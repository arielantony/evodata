------------------------------------------------------------------------
r70505 | drsassafras | 2019-07-26 15:20:21 -0400 (sex, 26 jul 2019) | 1 line

[ENH][DB] OCR - Implements gallery level language control over OCR, (with code style, performance and php notice improvements)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 70504)
+++ tiki.sql	(revision 70505)
@@ -799,6 +799,7 @@
   `image_max_size_y` int(8) NOT NULL default '0',
   `show_source` char(1) NOT NULL DEFAULT 'o',
   `icon_fileId` int(14) UNSIGNED NULL DEFAULT NULL,
+  `ocr_lang` VARCHAR(255) default NULL,
   PRIMARY KEY (`galleryId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -838,7 +839,7 @@
   `archiveId` int(14) default 0,
   `deleteAfter` int(14) default NULL,
   `ocr_state` TINYINT(1) default NULL,
-  `ocr_lang` VARCHAR(11) default NULL,
+  `ocr_lang` VARCHAR(255) default NULL,
   `ocr_data` MEDIUMTEXT default NULL,
   PRIMARY KEY (`fileId`),
   KEY `name` (name(191)),

------------------------------------------------------------------------
r70288 | drsassafras | 2019-06-28 15:15:38 -0400 (sex, 28 jun 2019) | 1 line

[ENH][DB] OCR - usability enhancements & viewing features

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 70287)
+++ tiki.sql	(revision 70288)
@@ -785,6 +785,7 @@
   `show_explorer` char(1) default NULL,
   `show_path` char(1) default NULL,
   `show_slideshow` char(1) default NULL,
+  `show_ocr_state` char(1) default NULL,
   `default_view` varchar(20) default NULL,
   `quota` int(8) default 0,
   `size` int(14) default NULL,

------------------------------------------------------------------------
r70205 | pom2ter | 2019-06-11 21:52:30 -0400 (ter, 11 jun 2019) | 1 line

[MRG] Automatic merge, branches/20.x 70196 to 70204

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 70204)
+++ tiki.sql	(revision 70205)
@@ -4005,15 +4005,6 @@
 	`groups` BLOB NOT NULL
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS `tiki_addon_profiles`;
-CREATE TABLE `tiki_addon_profiles` (
-  `addon` VARCHAR(100) NOT NULL DEFAULT '',
-  `version` VARCHAR(100) NOT NULL DEFAULT '',
-  `profile` VARCHAR(100) NOT NULL DEFAULT '',
-  `install_date` TIMESTAMP,
-  PRIMARY KEY (`addon`,`version`(10),`profile`(81))
-) ENGINE=MyISAM;
-
 DROP TABLE IF EXISTS `tiki_tabular_formats`;
 CREATE TABLE `tiki_tabular_formats` (
 	`tabularId` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,

------------------------------------------------------------------------
r70082 | kroky6 | 2019-05-27 04:54:11 -0400 (seg, 27 mai 2019) | 1 line

[FIX] update tiki.sql with webmail removal changes

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 70081)
+++ tiki.sql	(revision 70082)
@@ -2563,30 +2563,6 @@
     PRIMARY KEY (`userId`, `secret`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS `tiki_user_mail_accounts`;
-CREATE TABLE `tiki_user_mail_accounts` (
-  `accountId` int(12) NOT NULL auto_increment,
-  `user` varchar(200) NOT NULL default '',
-  `account` varchar(50) NOT NULL default '',
-  `pop` varchar(255) default NULL,
-  `current` char(1) default NULL,
-  `port` int(4) default NULL,
-  `username` varchar(100) default NULL,
-  `pass` varchar(100) default NULL,
-  `msgs` int(4) default NULL,
-  `smtp` varchar(255) default NULL,
-  `useAuth` char(1) default NULL,
-  `smtpPort` int(4) default NULL,
-  `flagsPublic` char(1) default 'n',                -- COMMENT 'MatWho - Shared Group Mail box if y',
-  `autoRefresh` int(4) NOT NULL default 0,        -- COMMENT 'seconds for mail list to refresh, 0 = none',
-  `imap` varchar( 255 ) default NULL,
-  `mbox` varchar( 255 ) default NULL,
-  `maildir` varchar( 255 ) default NULL,
-  `useSSL` char( 1 ) NOT NULL default 'n',
-  `fromEmail` varchar( 255 ) NOT NULL default '',
-  PRIMARY KEY (`accountId`)
-) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-
 DROP TABLE IF EXISTS `tiki_user_menus`;
 CREATE TABLE `tiki_user_menus` (
   `user` varchar(200) NOT NULL default '',
@@ -2763,18 +2739,6 @@
   PRIMARY KEY (`contactId`,`groupName`(179))
 ) ENGINE=MyISAM ;
 
-DROP TABLE IF EXISTS `tiki_webmail_messages`;
-CREATE TABLE `tiki_webmail_messages` (
-  `accountId` int(12) NOT NULL default '0',
-  `mailId` varchar(255) NOT NULL default '',
-  `user` varchar(200) NOT NULL default '',
-  `isRead` char(1) default NULL,
-  `isReplied` char(1) default NULL,
-  `isFlagged` char(1) default NULL,
-  `flaggedMsg` varchar(50) default '',
-  PRIMARY KEY (`accountId`,`mailId`(179))
-) ENGINE=MyISAM;
-
 DROP TABLE IF EXISTS `tiki_wiki_attachments`;
 CREATE TABLE `tiki_wiki_attachments` (
   `attId` int(12) NOT NULL auto_increment,

------------------------------------------------------------------------
r70069 | xorti | 2019-05-24 09:54:24 -0400 (sex, 24 mai 2019) | 1 line

[FIX] Fix issues in schedulers and user notes to support database strict mode on

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 70068)
+++ tiki.sql	(revision 70069)
@@ -2615,7 +2615,7 @@
   `created` int(14) default NULL,
   `name` varchar(255) default NULL,
   `lastModif` int(14) default NULL,
-  `data` text,
+  `data` LONGBLOB,
   `size` int(14) default NULL,
   `parse_mode` varchar(20) default NULL,
   PRIMARY KEY (`noteId`)

------------------------------------------------------------------------
r70027 | xorti | 2019-05-20 12:03:32 -0400 (seg, 20 mai 2019) | 1 line

[ENH] Improvements in scheduler runs when cron is not set to run on every minute

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 70026)
+++ tiki.sql	(revision 70027)
@@ -4070,7 +4070,8 @@
   `params` TEXT,
   `run_time` VARCHAR(255),
   `status` VARCHAR(10),
-  `re_run` TINYINT
+  `re_run` TINYINT,
+  `creation_date` INT(14)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_scheduler_run`;

------------------------------------------------------------------------
r69370 | jonnybradley | 2019-03-05 21:26:13 -0400 (ter, 05 mar 2019) | 2 lines

[FIX] objects: Missed from r69345 for new installs (thanks marclaporte)
...For tiki pages tiki_objects.href needs to be long enough for the 160 char page name to be url encoded plus adding tiki-index.php?page= before it. This still may not be enough 100% of the time but gives us extra wiggle room...

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 69369)
+++ tiki.sql	(revision 69370)
@@ -478,7 +478,7 @@
   `description` text,
   `created` int(14) default NULL,
   `name` varchar(200) default NULL,
-  `href` varchar(200) default NULL,
+  `href` varchar(256) default NULL,
   `hits` int(8) default NULL,
   `comments_locked` char(1) NOT NULL default 'n',
   PRIMARY KEY (`objectId`),

------------------------------------------------------------------------
r69037 | rjsmelo | 2019-02-10 20:45:47 -0400 (dom, 10 fev 2019) | 1 line

[MRG] Automatic merge, branches/19.x 69032 to 69035

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 69036)
+++ tiki.sql	(revision 69037)
@@ -1069,18 +1069,24 @@
 	title        VARCHAR(255) NOT NULL,
 	library_id   INT UNSIGNED NOT NULL,
 	parameters   LONGTEXT     NOT NULL,
-	filtered     LONGTEXT     NOT NULL,
+	filtered     LONGTEXT     NULL,
 	slug         VARCHAR(127) NOT NULL,
 	embed_type   VARCHAR(127) NOT NULL,
 	disable      INT UNSIGNED NOT NULL DEFAULT 0,
 	content_type VARCHAR(127) NULL,
-	author       VARCHAR(127) NULL,
-	license      VARCHAR(7)   NULL,
+	authors      MEDIUMTEXT   NULL,
+	license      VARCHAR(32)  NULL DEFAULT NULL,
 	keywords     TEXT         NULL,
 	description  TEXT         NULL,
+	source       VARCHAR(2083) NULL,
+	year_from    INT UNSIGNED NULL,
+	year_to      INT UNSIGNED NULL,
+	license_version VARCHAR(10) NULL,
+	license_extras  LONGTEXT NULL,
+	author_comments LONGTEXT NULL,
+	changes      MEDIUMTEXT NULL,
 	PRIMARY KEY (id),
 	UNIQUE KEY `fileId` (`file_id`)
-
 )	ENGINE = MyISAM;
 
 # Keep track of content dependencies
@@ -1114,6 +1120,9 @@
 	drop_library_css TEXT          NULL,
 	semantics        TEXT          NOT NULL,
 	tutorial_url     VARCHAR(1023) NOT NULL,
+	has_icon         INT  UNSIGNED  NOT NULL  DEFAULT '0',
+	metadata_settings TEXT NULL,
+	add_to           TEXT DEFAULT NULL,
 	PRIMARY KEY (id),
 	KEY name_version (name, major_version, minor_version, patch_version),
 	KEY runnable (runnable)

------------------------------------------------------------------------
r68910 | montefuscolo | 2019-01-29 14:43:06 -0400 (ter, 29 jan 2019) | 1 line

[FIX] Ambiguity on OAuth property name

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 68909)
+++ tiki.sql	(revision 68910)
@@ -4078,12 +4078,12 @@
 
 DROP TABLE IF EXISTS `tiki_oauthserver_clients`;
 CREATE TABLE `tiki_oauthserver_clients` (
-    `identifier` INT(14) NOT NULL AUTO_INCREMENT,
+    `id` INT(14) NOT NULL AUTO_INCREMENT,
     `name` VARCHAR(128) NOT NULL DEFAULT '',
     `client_id` VARCHAR(128) UNIQUE NOT NULL DEFAULT '',
     `client_secret` VARCHAR(255) NOT NULL DEFAULT '',
     `redirect_uri` VARCHAR(255) NOT NULL DEFAULT '',
-    PRIMARY KEY (`identifier`)
+    PRIMARY KEY (`id`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
 SET FOREIGN_KEY_CHECKS = 1;

------------------------------------------------------------------------
r68713 | montefuscolo | 2019-01-17 20:44:21 -0400 (qui, 17 jan 2019) | 1 line

[NEW][WIP] Creating user interface to register oauth clients id and secrets

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 68712)
+++ tiki.sql	(revision 68713)
@@ -4076,4 +4076,14 @@
   `healed` TINYINT DEFAULT 0
 ) ENGINE=MyISAM;
 
+DROP TABLE IF EXISTS `tiki_oauthserver_clients`;
+CREATE TABLE `tiki_oauthserver_clients` (
+    `identifier` INT(14) NOT NULL AUTO_INCREMENT,
+    `name` VARCHAR(128) NOT NULL DEFAULT '',
+    `client_id` VARCHAR(128) UNIQUE NOT NULL DEFAULT '',
+    `client_secret` VARCHAR(255) NOT NULL DEFAULT '',
+    `redirect_uri` VARCHAR(255) NOT NULL DEFAULT '',
+    PRIMARY KEY (`identifier`)
+) ENGINE=MyISAM AUTO_INCREMENT=1;
+
 SET FOREIGN_KEY_CHECKS = 1;

------------------------------------------------------------------------
r68460 | jonnybradley | 2018-11-30 07:50:32 -0400 (sex, 30 nov 2018) | 1 line

[MRG] Automatic merge, branches/19.x 68452 to 68459

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 68459)
+++ tiki.sql	(revision 68460)
@@ -4045,7 +4045,7 @@
 CREATE TABLE `tiki_tabular_formats` (
 	`tabularId` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
 	`trackerId` INT NOT NULL,
-	`name` VARCHAR(30) NOT NULL,
+	`name` VARCHAR(255) NOT NULL,
 	`format_descriptor` TEXT,
 	`filter_descriptor` TEXT,
 	`config` TEXT,

------------------------------------------------------------------------
r68295 | drsassafras | 2018-11-13 01:07:39 -0400 (ter, 13 nov 2018) | 1 line

[NEW] OCR functionality, basic framework

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 68294)
+++ tiki.sql	(revision 68295)
@@ -836,6 +836,9 @@
   `comment` varchar(200) default NULL,
   `archiveId` int(14) default 0,
   `deleteAfter` int(14) default NULL,
+  `ocr_state` TINYINT(1) default NULL,
+  `ocr_lang` VARCHAR(11) default NULL,
+  `ocr_data` MEDIUMTEXT default NULL,
   PRIMARY KEY (`fileId`),
   KEY `name` (name(191)),
   KEY `description` (description(191)),

------------------------------------------------------------------------
r67998 | amnabilal | 2018-10-15 15:06:14 -0400 (seg, 15 out 2018) | 1 line

[MRG] Automatic merge, branches/19.x 67988 to 67997

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 67997)
+++ tiki.sql	(revision 67998)
@@ -984,7 +984,7 @@
   `user` varchar(200) default '',
   `timestamp` int(14) default NULL,
   `reason` varchar(250) default NULL,
-  PRIMARY KEY (`threadId`)
+  PRIMARY KEY (`threadId`, `forumId`, `parentId`, `user`(182))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_galleries`;
@@ -3208,8 +3208,8 @@
 
 DROP TABLE IF EXISTS `tiki_pages_changes`;
 CREATE TABLE `tiki_pages_changes` (
-  `page_id` int(14),
-  `version` int(10),
+  `page_id` int(14) DEFAULT '0',
+  `version` int(10) DEFAULT '0',
   `segments_added` int(10),
   `segments_removed` int(10),
   `segments_total` int(10),
@@ -4031,9 +4031,9 @@
 
 DROP TABLE IF EXISTS `tiki_addon_profiles`;
 CREATE TABLE `tiki_addon_profiles` (
-  `addon` VARCHAR(100),
-  `version` VARCHAR(100),
-  `profile` VARCHAR(100),
+  `addon` VARCHAR(100) NOT NULL DEFAULT '',
+  `version` VARCHAR(100) NOT NULL DEFAULT '',
+  `profile` VARCHAR(100) NOT NULL DEFAULT '',
   `install_date` TIMESTAMP,
   PRIMARY KEY (`addon`,`version`(10),`profile`(81))
 ) ENGINE=MyISAM;

------------------------------------------------------------------------
r67955 | rjsmelo | 2018-10-11 19:21:16 -0400 (qui, 11 out 2018) | 1 line

[MRG] Automatic merge, branches/19.x 67949 to 67954

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 67954)
+++ tiki.sql	(revision 67955)
@@ -23,7 +23,7 @@
   `isFlagged` char(1) default NULL,
   `priority` int(2) default NULL,
   PRIMARY KEY (`msgId`),
-  KEY `userIsRead` (user(191), `isRead`)
+  KEY `userIsRead` (user(190), `isRead`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `messu_archive`;
@@ -100,7 +100,7 @@
   `name` varchar(40) NOT NULL,
   `value` text,
   KEY `actionId` (`actionId`),
-  KEY `nameValue` (`name`, `value`(191))
+  KEY `nameValue` (`name`, `value`(151))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_activity_stream`;
@@ -483,7 +483,7 @@
   `comments_locked` char(1) NOT NULL default 'n',
   PRIMARY KEY (`objectId`),
   KEY (`type`, `objectId`),
-  KEY (`itemId`(191), `type`)
+  KEY (`itemId`(141), `type`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_categorized_objects`;
@@ -541,7 +541,7 @@
   `nickname` varchar(200) NOT NULL default '',
   `channelId` int(8) NOT NULL default '0',
   `timestamp` int(14) default NULL,
-  PRIMARY KEY (`nickname`(191),`channelId`)
+  PRIMARY KEY (`nickname`(183),`channelId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_comments`;
@@ -572,14 +572,14 @@
   `approved` char(1) NOT NULL default 'y',
   `locked` char(1) NOT NULL default 'n',
   PRIMARY KEY (`threadId`),
-  UNIQUE KEY `no_repeats` (`parentId`, `userName`(40), `title`(100), `commentDate`, `message_id`(40), `in_reply_to`(40)),
+  UNIQUE KEY `no_repeats` (`parentId`, `userName`(40), `title`(43), `commentDate`, `message_id`(40), `in_reply_to`(40)),
   KEY `title` (`title`(191)),
   KEY `data` (`data`(191)),
   KEY `hits` (hits),
   KEY `tc_pi` (`parentId`),
-  KEY `objectType` (object(191), `objectType`),
+  KEY `objectType` (object(160), `objectType`),
   KEY `commentDate` (`commentDate`),
-  KEY `threaded` (message_id, in_reply_to, `parentId`)
+  KEY `threaded` (message_id(89), in_reply_to(88), `parentId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_content`;
@@ -604,7 +604,7 @@
 CREATE TABLE `tiki_content_templates_sections` (
   `templateId` int(10) NOT NULL default '0',
   `section` varchar(250) NOT NULL default '',
-  PRIMARY KEY (`templateId`,`section`(191))
+  PRIMARY KEY (`templateId`,`section`(181))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_cookies`;
@@ -858,7 +858,7 @@
   `metadata` longtext,
   `lastModif` integer(14) DEFAULT NULL,
   `lockedby` varchar(200) default '',
-  PRIMARY KEY (`fileId`, `user`(191))
+  PRIMARY KEY (`fileId`, `user`(177))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_forum_attachments`;
@@ -884,7 +884,7 @@
   `threadId` int(14) NOT NULL default '0',
   `forumId` int(14) default NULL,
   `timestamp` int(14) default NULL,
-  PRIMARY KEY (`user`(191),`threadId`)
+  PRIMARY KEY (`user`(177),`threadId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_forums`;
@@ -1024,7 +1024,7 @@
   KEY `description` (description(191)),
   KEY `hits` (hits),
   KEY `parentgallery` (parentgallery),
-  KEY `visibleUser` (visible, user(191))
+  KEY `visibleUser` (visible, user(190))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_galleries_scales`;
@@ -1305,7 +1305,7 @@
 CREATE TABLE `tiki_links` (
   `fromPage` varchar(160) NOT NULL default '',
   `toPage` varchar(160) NOT NULL default '',
-  PRIMARY KEY (`fromPage`,`toPage`),
+  PRIMARY KEY (`fromPage`(96),`toPage`(95)),
   KEY `toPage` (`toPage`)
 ) ENGINE=MyISAM;
 
@@ -1744,7 +1744,7 @@
   `subscribed` int(14) default NULL,
   `isUser` char(1) NOT NULL default 'n',
   `included` char(1) NOT NULL default 'n',
-  PRIMARY KEY (`nlId`,`email`(191),`isUser`)
+  PRIMARY KEY (`nlId`,`email`(178),`isUser`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_newsletter_groups`;
@@ -1753,7 +1753,7 @@
   `groupName` varchar(255) NOT NULL default '',
   `code` varchar(32) default NULL,
   `include_groups` char(1) DEFAULT 'y',
-  PRIMARY KEY (`nlId`,`groupName`(191))
+  PRIMARY KEY (`nlId`,`groupName`(179))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_newsletter_included`;
@@ -1878,7 +1878,7 @@
   `voteConsiderationSpan` int(4) default 0,
   PRIMARY KEY (`pollId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-ALTER TABLE tiki_polls ADD INDEX tiki_poll_lookup ( active , title(191) );
+ALTER TABLE tiki_polls ADD INDEX tiki_poll_lookup ( active , title(190) );
 
 DROP TABLE IF EXISTS `tiki_preferences`;
 CREATE TABLE `tiki_preferences` (
@@ -2106,7 +2106,7 @@
   `filename` varchar(250) NOT NULL,
   `tiki_version` varchar(60) NOT NULL,
   `severity` int(4) NOT NULL default '0',
-  PRIMARY KEY (`filename`(191),`tiki_version`),
+  PRIMARY KEY (`filename`(171),`tiki_version`(20)),
   KEY `sdb_fn` (filename(191))
 ) ENGINE=MyISAM;
 
@@ -2518,7 +2518,7 @@
   `ord` int(4) NOT NULL default 0,
   `type` char(1) default NULL,
   `user` varchar(200) NOT NULL default '',
-  PRIMARY KEY (`name`(30),`user`(191),`position`, `ord`),
+  PRIMARY KEY (`name`(30),`user`(137),`position`, `ord`),
   KEY `id` (moduleId)
 ) ENGINE=MyISAM;
 
@@ -2528,7 +2528,7 @@
   `parentId` int(12) default NULL,
   `user` varchar(200) NOT NULL default '',
   `name` varchar(30) default NULL,
-  PRIMARY KEY (`user`(191),`folderId`)
+  PRIMARY KEY (`user`(179),`folderId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_user_bookmarks_urls`;
@@ -2624,7 +2624,7 @@
   `user` varchar(200) NOT NULL default '',
   `prefName` varchar(40) NOT NULL default '',
   `value` TEXT,
-  PRIMARY KEY (`user`(191),`prefName`)
+  PRIMARY KEY (`user`(151),`prefName`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_user_quizzes`;
@@ -2644,7 +2644,7 @@
 CREATE TABLE `tiki_user_taken_quizzes` (
   `user` varchar(200) NOT NULL default '',
   `quizId` varchar(255) NOT NULL default '',
-  PRIMARY KEY (`user`(191),`quizId`(50))
+  PRIMARY KEY (`user`(141),`quizId`(50))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_user_tasks_history`;
@@ -2681,7 +2681,7 @@
   `completed` int(14) default NULL,
   `percentage` int(4) default NULL,
   PRIMARY KEY (`taskId`),
-  UNIQUE(creator(191), created)
+  UNIQUE(creator(177), created)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
 DROP TABLE IF EXISTS `tiki_user_votings`;
@@ -2748,7 +2748,7 @@
 CREATE TABLE `tiki_webmail_contacts_groups` (
   `contactId` int(12) NOT NULL,
   `groupName` varchar(255) NOT NULL,
-  PRIMARY KEY (`contactId`,`groupName`(191))
+  PRIMARY KEY (`contactId`,`groupName`(179))
 ) ENGINE=MyISAM ;
 
 DROP TABLE IF EXISTS `tiki_webmail_messages`;
@@ -2760,7 +2760,7 @@
   `isReplied` char(1) default NULL,
   `isFlagged` char(1) default NULL,
   `flaggedMsg` varchar(50) default '',
-  PRIMARY KEY (`accountId`,`mailId`(191))
+  PRIMARY KEY (`accountId`,`mailId`(179))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_wiki_attachments`;
@@ -2795,7 +2795,7 @@
   `date` int(14) NOT NULL default '0',
   `IP` varchar(50) NOT NULL default '',
   PRIMARY KEY (`id`),
-  KEY `object` (object(191),`userId`,type),
+  KEY `object` (object(163),`userId`,type),
   KEY `userId` (`userId`),
   KEY `type` (type),
   KEY `date` (date)
@@ -2845,7 +2845,7 @@
   `permName` varchar(40) NOT NULL default '',
   `objectType` varchar(20) NOT NULL default '',
   `objectId` varchar(32) NOT NULL default '',
-  PRIMARY KEY `uo` (`objectId`, `objectType`, `groupName`(170),`permName`)
+  PRIMARY KEY `uo` (`objectId`, `objectType`, `groupName`(99),`permName`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `users_permissions`;
@@ -2861,7 +2861,7 @@
   `groupName` varchar(255) NOT NULL default '',
   `created` int(14) default NULL,
   `expire` int(14) default NULL,
-  PRIMARY KEY (`userId`,`groupName`(191))
+  PRIMARY KEY (`userId`,`groupName`(183))
 ) ENGINE=MyISAM;
 
 INSERT INTO users_groups (`groupName`,`groupDesc`) VALUES ('Anonymous','Public users not logged');
@@ -2947,7 +2947,7 @@
   `type` varchar(50) NOT NULL,
   `objId` varchar(255) NOT NULL,
   `lang` varchar(16) default NULL,
-  PRIMARY KEY (`type`, `objId`(191)),
+  PRIMARY KEY (`type`, `objId`(141)),
   KEY `traId` ( `traId` )
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
@@ -3049,7 +3049,7 @@
   `type` varchar(20) NOT NULL default '',
   `day` int(14) NOT NULL default '0',
   `hits` int(14) NOT NULL default '0',
-  PRIMARY KEY (`object`(191),`type`,`day`)
+  PRIMARY KEY (`object`(157),`type`,`day`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_registration_fields`;
@@ -3150,7 +3150,7 @@
   `objectId` int(11) NOT NULL default 0,
   `user` varchar(200) default '',
   `created` int(14) NOT NULL default '0',
-  PRIMARY KEY (`tagId`,`user`(191),`objectId`),
+  PRIMARY KEY (`tagId`,`user`(168),`objectId`),
   KEY (`tagId`),
   KEY (user(191)),
   KEY (`objectId`)
@@ -3237,7 +3237,7 @@
   `value` VARCHAR(160) NOT NULL,
   `named` ENUM('y','n') NOT NULL,
   `creation_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
-  PRIMARY KEY ( `domain`, `profile`, `object` ),
+  PRIMARY KEY ( `domain`, `profile`(70), `object`(71) ),
   INDEX(`named`)
 ) ENGINE=MyISAM;
 
@@ -3306,7 +3306,7 @@
   `objectType` varchar( 20 ) NOT NULL default '',
   `objectId` varchar(10) NOT NULL default '',
   `displayEachuser` char( 1 ) default NULL ,
-  PRIMARY KEY (`groupName`(191), `objectType`, `objectId` )
+  PRIMARY KEY (`groupName`(161), `objectType`, `objectId` )
 ) ENGINE=MyISAM ;
 
 DROP TABLE IF EXISTS `tiki_sent_newsletters_files`;
@@ -3435,7 +3435,7 @@
   `last_objectType` VARCHAR(20) NOT NULL,
   `last_objectId` VARCHAR(200) NOT NULL,
   PRIMARY KEY (`fingerprint`(191)),
-  KEY `last_object` (last_objectType, last_objectId(191))
+  KEY `last_object` (last_objectType, last_objectId(171))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_user_reports`;
@@ -3485,7 +3485,7 @@
     `to` varchar(255) NOT NULL,
     `guards` text,
     PRIMARY KEY(`transitionId`),
-    KEY `transition_lookup` (`type`, `from`(191))
+    KEY `transition_lookup` (`type`, `from`(171))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_auth_tokens`;
@@ -3576,7 +3576,7 @@
     `content` TEXT,
     `categories` TEXT,
     KEY `tiki_rss_items_rss` (`rssId`),
-    KEY `tiki_rss_items_item` (`rssId`, `guid`(191))
+    KEY `tiki_rss_items_item` (`rssId`, `guid`(177))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_object_attributes`;
@@ -3587,8 +3587,8 @@
     `attribute` varchar(70) NOT NULL,
     `value` varchar(255),
 	`comment` varchar(255),
-    UNIQUE `item_attribute_uq` ( `type`, `itemId`, `attribute` ),
-    KEY `attribute_lookup_ix` (`attribute`, `value`(191))
+    UNIQUE `item_attribute_uq` ( `type`, `itemId`(91), `attribute`(50) ),
+    KEY `attribute_lookup_ix` (`attribute`, `value`(121))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_rating_configs`;
@@ -3633,7 +3633,7 @@
     `from` VARCHAR(255) default NULL,
     `to` VARCHAR(255) default NULL,
     PRIMARY KEY (`todoId`),
-    KEY `what` (`objectType`, `objectId`(191)),
+    KEY `what` (`objectType`, `objectId`(141)),
     KEY `after` (`after`)
 ) ENGINE=MyISAM;
 DROP TABLE IF EXISTS `tiki_todo_notif`;
@@ -3884,7 +3884,7 @@
     `path` VARCHAR(200) NOT NULL,
     `method` VARCHAR(20) NOT NULL,
     `arguments` TEXT NOT NULL,
-    KEY `tiki_source_auth_ix` (`scheme`, `domain`(191))
+    KEY `tiki_source_auth_ix` (`scheme`, `domain`(171))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_connect`;
@@ -4035,7 +4035,7 @@
   `version` VARCHAR(100),
   `profile` VARCHAR(100),
   `install_date` TIMESTAMP,
-  PRIMARY KEY (`addon`,`version`,`profile`)
+  PRIMARY KEY (`addon`,`version`(10),`profile`(81))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_tabular_formats`;

------------------------------------------------------------------------
r67620 | rjsmelo | 2018-09-23 22:22:13 -0400 (dom, 23 set 2018) | 2 lines

[REF] Upgrade tiki to utf8mb4


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 67619)
+++ tiki.sql	(revision 67620)
@@ -1,9 +1,8 @@
 -- --------------------------------------------------------
--- --------------------------------------------------------
 -- Database : Tiki
 -- --------------------------------------------------------
 
-ALTER DATABASE DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci;
+ALTER DATABASE DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
 SET FOREIGN_KEY_CHECKS = 0;  /* tiki doesn't officially use foreign keys but sometimes they "appear", leading to table dropping errors */
 
 DROP TABLE IF EXISTS `messu_messages`;
@@ -24,7 +23,7 @@
   `isFlagged` char(1) default NULL,
   `priority` int(2) default NULL,
   PRIMARY KEY (`msgId`),
-  KEY `userIsRead` (user, `isRead`)
+  KEY `userIsRead` (user(191), `isRead`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `messu_archive`;
@@ -101,7 +100,7 @@
   `name` varchar(40) NOT NULL,
   `value` text,
   KEY `actionId` (`actionId`),
-  KEY `nameValue` (`name`, `value`(200))
+  KEY `nameValue` (`name`, `value`(191))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_activity_stream`;
@@ -167,9 +166,9 @@
   `isfloat` char(1) default NULL,
   `ispublished` char(1) NOT NULL DEFAULT 'y',
   PRIMARY KEY (`articleId`),
-  KEY `title` (`title`),
-  KEY `heading` (`heading`(255)),
-  KEY `body` (`body`(255)),
+  KEY `title` (`title` (191)),
+  KEY `heading` (`heading`(191)),
+  KEY `body` (`body`(191)),
   KEY `nbreads` (`nbreads`),
   KEY `author` (`author`(32)),
   KEY `topicId` (`topicId`),
@@ -298,7 +297,7 @@
   `priv` varchar(1) default 'n',
   `wysiwyg` varchar(1) default NULL,
   PRIMARY KEY (`postId`),
-  KEY `data` (`data`(255)),
+  KEY `data` (`data`(191)),
   KEY `blogId` (`blogId`),
   KEY `created` (`created`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -344,8 +343,8 @@
   `show_related` char(1) default NULL,
   `related_max` int(4) default 5,
   PRIMARY KEY (`blogId`),
-  KEY `title` (`title`),
-  KEY `description` (`description`(255)),
+  KEY `title` (`title`(191)),
+  KEY `description` (`description`(191)),
   KEY `hits` (`hits`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -484,7 +483,7 @@
   `comments_locked` char(1) NOT NULL default 'n',
   PRIMARY KEY (`objectId`),
   KEY (`type`, `objectId`),
-  KEY (`itemId`, `type`)
+  KEY (`itemId`(191), `type`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_categorized_objects`;
@@ -542,7 +541,7 @@
   `nickname` varchar(200) NOT NULL default '',
   `channelId` int(8) NOT NULL default '0',
   `timestamp` int(14) default NULL,
-  PRIMARY KEY (`nickname`,`channelId`)
+  PRIMARY KEY (`nickname`(191),`channelId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_comments`;
@@ -574,11 +573,11 @@
   `locked` char(1) NOT NULL default 'n',
   PRIMARY KEY (`threadId`),
   UNIQUE KEY `no_repeats` (`parentId`, `userName`(40), `title`(100), `commentDate`, `message_id`(40), `in_reply_to`(40)),
-  KEY `title` (`title`),
-  KEY `data` (`data`(255)),
+  KEY `title` (`title`(191)),
+  KEY `data` (`data`(191)),
   KEY `hits` (hits),
   KEY `tc_pi` (`parentId`),
-  KEY `objectType` (object, `objectType`),
+  KEY `objectType` (object(191), `objectType`),
   KEY `commentDate` (`commentDate`),
   KEY `threaded` (message_id, in_reply_to, `parentId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -605,7 +604,7 @@
 CREATE TABLE `tiki_content_templates_sections` (
   `templateId` int(10) NOT NULL default '0',
   `section` varchar(250) NOT NULL default '',
-  PRIMARY KEY (`templateId`,`section`)
+  PRIMARY KEY (`templateId`,`section`(191))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_cookies`;
@@ -659,7 +658,7 @@
 CREATE TABLE `tiki_directory_search` (
   `term` varchar(250) NOT NULL default '',
   `hits` int(14) default NULL,
-  PRIMARY KEY (`term`)
+  PRIMARY KEY (`term`(191))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_directory_sites`;
@@ -677,7 +676,7 @@
   `cache_timestamp` int(14) default NULL,
   PRIMARY KEY (`siteId`),
   KEY (`isValid`),
-  KEY (url)
+  KEY (url(191))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_dsn`;
@@ -715,8 +714,8 @@
   `created` int(14) default NULL,
   PRIMARY KEY (`questionId`),
   KEY `faqId` (`faqId`),
-  KEY `question` (question(255)),
-  KEY `answer` (answer(255)),
+  KEY `question` (question(191)),
+  KEY `answer` (answer(191)),
   KEY `created` (`created`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -730,8 +729,8 @@
   `hits` int(8) default NULL,
   `canSuggest` char(1) default NULL,
   PRIMARY KEY (`faqId`),
-  KEY `title` (title),
-  KEY `description` (description(255)),
+  KEY `title` (title(191)),
+  KEY `description` (description(191)),
   KEY `hits` (hits)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -743,7 +742,7 @@
   `hits` int(8) default NULL,
   `position` int(6) default NULL,
   `type` char(1) default NULL,
-  PRIMARY KEY (`url`)
+  PRIMARY KEY (`url`(191))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_file_galleries`;
@@ -838,8 +837,8 @@
   `archiveId` int(14) default 0,
   `deleteAfter` int(14) default NULL,
   PRIMARY KEY (`fileId`),
-  KEY `name` (name),
-  KEY `description` (description(255)),
+  KEY `name` (name(191)),
+  KEY `description` (description(191)),
   KEY `created` (created),
   KEY `archiveId` (`archiveId`),
   KEY `galleryId` (`galleryId`),
@@ -859,7 +858,7 @@
   `metadata` longtext,
   `lastModif` integer(14) DEFAULT NULL,
   `lockedby` varchar(200) default '',
-  PRIMARY KEY (`fileId`, `user`)
+  PRIMARY KEY (`fileId`, `user`(191))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_forum_attachments`;
@@ -885,7 +884,7 @@
   `threadId` int(14) NOT NULL default '0',
   `forumId` int(14) default NULL,
   `timestamp` int(14) default NULL,
-  PRIMARY KEY (`user`,`threadId`)
+  PRIMARY KEY (`user`(191),`threadId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_forums`;
@@ -1022,10 +1021,10 @@
   `showcategories` char(1) NOT NULL default 'n',
   PRIMARY KEY (`galleryId`),
   KEY `name` (name),
-  KEY `description` (description(255)),
+  KEY `description` (description(191)),
   KEY `hits` (hits),
   KEY `parentgallery` (parentgallery),
-  KEY `visibleUser` (visible, user)
+  KEY `visibleUser` (visible, user(191))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_galleries_scales`;
@@ -1171,7 +1170,7 @@
 	created_at INT UNSIGNED NOT NULL,
 	PRIMARY KEY (id),
 	KEY created_at (created_at),
-	KEY path (path)
+	KEY path (path(191))
 ) ENGINE = MyISAM;
 
 # Keep track of results (contents >-< users)
@@ -1212,7 +1211,7 @@
   `type` varchar(50) default NULL,
   `is_html` TINYINT(1) NOT NULL DEFAULT 0,
   PRIMARY KEY (`pageName`,`version`),
-  KEY `user` (`user`),
+  KEY `user` (`user`(191)),
   KEY (`historyId`)
 ) ENGINE=MyISAM;
 
@@ -1220,7 +1219,7 @@
 CREATE TABLE `tiki_hotwords` (
   `word` varchar(255) NOT NULL default '',
   `url` varchar(255) NOT NULL default '',
-  PRIMARY KEY (`word`)
+  PRIMARY KEY (`word`(191))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_html_pages`;
@@ -1230,7 +1229,7 @@
   `refresh` int(10) default NULL,
   `type` char(1) default NULL,
   `created` int(14) default NULL,
-  PRIMARY KEY (`pageName`)
+  PRIMARY KEY (`pageName`(191))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_html_pages_dynamic_zones`;
@@ -1255,12 +1254,12 @@
   `hits` int(14) default NULL,
   `path` varchar(255) default NULL,
   PRIMARY KEY (`imageId`),
-  KEY `name` (name),
-  KEY `description` (description(255)),
+  KEY `name` (name(191)),
+  KEY `description` (description(191)),
   KEY `hits` (hits),
   KEY `ti_gId` (`galleryId`),
   KEY `ti_cr` (created),
-  KEY `ti_us` (user)
+  KEY `ti_us` (user(191))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_images_data`;
@@ -1298,9 +1297,9 @@
   `data` longblob,
   `refresh` int(14) default NULL,
   PRIMARY KEY (`cacheId`),
-  KEY `url` (url)
+  KEY `url` (url(191))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-CREATE INDEX urlindex ON tiki_link_cache (url(250));
+CREATE INDEX urlindex ON tiki_link_cache (url(191));
 
 DROP TABLE IF EXISTS `tiki_links`;
 CREATE TABLE `tiki_links` (
@@ -1374,7 +1373,7 @@
   `votes` int(10) default NULL,
   `points` int(10) default NULL,
   `status_since` int(14) default NULL,
-  PRIMARY KEY (`user`)
+  PRIMARY KEY (`user`(191))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_live_support_requests`;
@@ -1745,7 +1744,7 @@
   `subscribed` int(14) default NULL,
   `isUser` char(1) NOT NULL default 'n',
   `included` char(1) NOT NULL default 'n',
-  PRIMARY KEY (`nlId`,`email`,`isUser`)
+  PRIMARY KEY (`nlId`,`email`(191),`isUser`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_newsletter_groups`;
@@ -1754,7 +1753,7 @@
   `groupName` varchar(255) NOT NULL default '',
   `code` varchar(32) default NULL,
   `include_groups` char(1) DEFAULT 'y',
-  PRIMARY KEY (`nlId`,`groupName`)
+  PRIMARY KEY (`nlId`,`groupName`(191))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_newsletter_included`;
@@ -1839,7 +1838,7 @@
   PRIMARY KEY (`page_id`),
   UNIQUE KEY `pageName` (`pageName`),
   UNIQUE KEY `pageSlug` (`pageSlug`),
-  KEY `data` (`data`(255)),
+  KEY `data` (`data`(191)),
   KEY `pageRank` (`pageRank`),
   KEY `lastModif`(`lastModif`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
@@ -1879,13 +1878,13 @@
   `voteConsiderationSpan` int(4) default 0,
   PRIMARY KEY (`pollId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-ALTER TABLE tiki_polls ADD INDEX tiki_poll_lookup ( active , title );
+ALTER TABLE tiki_polls ADD INDEX tiki_poll_lookup ( active , title(191) );
 
 DROP TABLE IF EXISTS `tiki_preferences`;
 CREATE TABLE `tiki_preferences` (
   `name` varchar(255) NOT NULL default '',
   `value` text,
-  PRIMARY KEY (`name`)
+  PRIMARY KEY (`name`(191))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_private_messages`;
@@ -2048,7 +2047,7 @@
   `page_alias` varchar(250) default '',
   `pos` int(4) default NULL,
   PRIMARY KEY (`receivedPageId`),
-  KEY `structureName` (`structureName`)
+  KEY `structureName` (`structureName`(191))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_referer_stats`;
@@ -2057,7 +2056,7 @@
   `hits` int(10) default NULL,
   `last` int(14) default NULL,
   `lasturl` text default NULL,
-  PRIMARY KEY (`referer`)
+  PRIMARY KEY (`referer`(191))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_related_categories`;
@@ -2107,8 +2106,8 @@
   `filename` varchar(250) NOT NULL,
   `tiki_version` varchar(60) NOT NULL,
   `severity` int(4) NOT NULL default '0',
-  PRIMARY KEY (`filename`,`tiki_version`),
-  KEY `sdb_fn` (filename)
+  PRIMARY KEY (`filename`(191),`tiki_version`),
+  KEY `sdb_fn` (filename(191))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_semaphores`;
@@ -2118,7 +2117,7 @@
   `user` varchar(200) NOT NULL default '',
   `timestamp` int(14) default NULL,
   `value` VARCHAR(255) NULL,
-  PRIMARY KEY (`semName`)
+  PRIMARY KEY (`semName`(191))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_sent_newsletters`;
@@ -2151,7 +2150,7 @@
   `timestamp` int(14) default NULL,
   `tikihost` varchar(200) default NULL,
   PRIMARY KEY (`sessionId`),
-  KEY `user` (user),
+  KEY `user` (user(191)),
   KEY `timestamp` (`timestamp`)
 ) ENGINE=MyISAM;
 
@@ -2361,7 +2360,7 @@
 CREATE TABLE `tiki_theme_control_sections` (
   `section` varchar(250) NOT NULL default '',
   `theme` varchar(250) NOT NULL default '',
-  PRIMARY KEY (`section`)
+  PRIMARY KEY (`section`(191))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_topics`;
@@ -2433,7 +2432,7 @@
   `value` text,
   PRIMARY KEY (`itemId`,`fieldId`),
   INDEX `fieldId` (`fieldId`),
-  INDEX value (value(250))
+  INDEX value (value(191))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_tracker_item_field_logs`;
@@ -2519,7 +2518,7 @@
   `ord` int(4) NOT NULL default 0,
   `type` char(1) default NULL,
   `user` varchar(200) NOT NULL default '',
-  PRIMARY KEY (`name`(30),`user`,`position`, `ord`),
+  PRIMARY KEY (`name`(30),`user`(191),`position`, `ord`),
   KEY `id` (moduleId)
 ) ENGINE=MyISAM;
 
@@ -2529,7 +2528,7 @@
   `parentId` int(12) default NULL,
   `user` varchar(200) NOT NULL default '',
   `name` varchar(30) default NULL,
-  PRIMARY KEY (`user`,`folderId`)
+  PRIMARY KEY (`user`(191),`folderId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_user_bookmarks_urls`;
@@ -2594,7 +2593,7 @@
   `data` longblob,
   `parse` char(1) default NULL,
   `status` VARCHAR(60) default '',
-  PRIMARY KEY (`name`)
+  PRIMARY KEY (`name`(191))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_user_notes`;
@@ -2617,7 +2616,7 @@
   `last` int(14) default NULL,
   `first` int(14) default NULL,
   `level` int(8) default NULL,
-  PRIMARY KEY (`user`)
+  PRIMARY KEY (`user`(191))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_user_preferences`;
@@ -2625,7 +2624,7 @@
   `user` varchar(200) NOT NULL default '',
   `prefName` varchar(40) NOT NULL default '',
   `value` TEXT,
-  PRIMARY KEY (`user`,`prefName`)
+  PRIMARY KEY (`user`(191),`prefName`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_user_quizzes`;
@@ -2645,7 +2644,7 @@
 CREATE TABLE `tiki_user_taken_quizzes` (
   `user` varchar(200) NOT NULL default '',
   `quizId` varchar(255) NOT NULL default '',
-  PRIMARY KEY (`user`,`quizId`(50))
+  PRIMARY KEY (`user`(191),`quizId`(50))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_user_tasks_history`;
@@ -2682,7 +2681,7 @@
   `completed` int(14) default NULL,
   `percentage` int(4) default NULL,
   PRIMARY KEY (`taskId`),
-  UNIQUE(creator, created)
+  UNIQUE(creator(191), created)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
 DROP TABLE IF EXISTS `tiki_user_votings`;
@@ -2694,7 +2693,7 @@
   `time` int(14) NOT NULL default 0,
   KEY (`user`(100),id(100)),
   KEY `ip` (`ip`),
-  KEY `id` (`id`)
+  KEY `id` (`id`(191))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_user_watches`;
@@ -2749,7 +2748,7 @@
 CREATE TABLE `tiki_webmail_contacts_groups` (
   `contactId` int(12) NOT NULL,
   `groupName` varchar(255) NOT NULL,
-  PRIMARY KEY (`contactId`,`groupName`(200))
+  PRIMARY KEY (`contactId`,`groupName`(191))
 ) ENGINE=MyISAM ;
 
 DROP TABLE IF EXISTS `tiki_webmail_messages`;
@@ -2761,7 +2760,7 @@
   `isReplied` char(1) default NULL,
   `isFlagged` char(1) default NULL,
   `flaggedMsg` varchar(50) default '',
-  PRIMARY KEY (`accountId`,`mailId`)
+  PRIMARY KEY (`accountId`,`mailId`(191))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_wiki_attachments`;
@@ -2778,7 +2777,7 @@
   `created` int(14) default NULL,
   `comment` varchar(250) default NULL,
   PRIMARY KEY (`attId`),
-  KEY `page` (page)
+  KEY `page` (page(191))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_zones`;
@@ -2796,7 +2795,7 @@
   `date` int(14) NOT NULL default '0',
   `IP` varchar(50) NOT NULL default '',
   PRIMARY KEY (`id`),
-  KEY `object` (object,`userId`,type),
+  KEY `object` (object(191),`userId`,type),
   KEY `userId` (`userId`),
   KEY `type` (type),
   KEY `date` (date)
@@ -2836,7 +2835,7 @@
   `anniversary` char(4) default '',
   `prorateInterval` varchar(255) default '',
   PRIMARY KEY (`id`),
-  UNIQUE KEY `groupName` (`groupName`),
+  UNIQUE KEY `groupName` (`groupName` (191)),
   KEY `expireAfter` (`expireAfter`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
@@ -2862,7 +2861,7 @@
   `groupName` varchar(255) NOT NULL default '',
   `created` int(14) default NULL,
   `expire` int(14) default NULL,
-  PRIMARY KEY (`userId`,`groupName`(225))
+  PRIMARY KEY (`userId`,`groupName`(191))
 ) ENGINE=MyISAM;
 
 INSERT INTO users_groups (`groupName`,`groupDesc`) VALUES ('Anonymous','Public users not logged');
@@ -2894,9 +2893,9 @@
   `openid_url` varchar(255) default NULL,
   `waiting` char(1) default NULL,
   PRIMARY KEY (`userId`),
-  UNIQUE KEY `login` (login),
+  UNIQUE KEY `login` (login (191)),
   KEY `registrationDate` (`registrationDate`),
-  KEY `openid_url` (openid_url)
+  KEY `openid_url` (openid_url(191))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 -- Administrator account
@@ -2948,7 +2947,7 @@
   `type` varchar(50) NOT NULL,
   `objId` varchar(255) NOT NULL,
   `lang` varchar(16) default NULL,
-  PRIMARY KEY (`type`, `objId`),
+  PRIMARY KEY (`type`, `objId`(191)),
   KEY `traId` ( `traId` )
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
@@ -2957,7 +2956,7 @@
   event varchar(255) NOT NULL default '',
   data text,
   reversalEvent varchar(255),
-  PRIMARY KEY (`event`)
+  PRIMARY KEY (`event`(191))
 ) ENGINE=MyISAM;
 
 INSERT INTO `tiki_score` VALUES
@@ -3050,7 +3049,7 @@
   `type` varchar(20) NOT NULL default '',
   `day` int(14) NOT NULL default '0',
   `hits` int(14) NOT NULL default '0',
-  PRIMARY KEY (`object`(200),`type`,`day`)
+  PRIMARY KEY (`object`(191),`type`,`day`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_registration_fields`;
@@ -3151,9 +3150,9 @@
   `objectId` int(11) NOT NULL default 0,
   `user` varchar(200) default '',
   `created` int(14) NOT NULL default '0',
-  PRIMARY KEY (`tagId`,`user`,`objectId`),
+  PRIMARY KEY (`tagId`,`user`(191),`objectId`),
   KEY (`tagId`),
-  KEY (user),
+  KEY (user(191)),
   KEY (`objectId`)
 ) ENGINE=MyISAM;
 
@@ -3190,7 +3189,7 @@
   `fieldId` int(10) unsigned NOT NULL auto_increment,
   `flagsPublic` CHAR( 1 ) NOT NULL DEFAULT 'n',
   PRIMARY KEY ( `fieldId` ),
-  INDEX ( `user` )
+  INDEX ( `user` (191))
 ) ENGINE = MyISAM ;
 
 DROP TABLE IF EXISTS `tiki_pages_translation_bits`;
@@ -3307,7 +3306,7 @@
   `objectType` varchar( 20 ) NOT NULL default '',
   `objectId` varchar(10) NOT NULL default '',
   `displayEachuser` char( 1 ) default NULL ,
-  PRIMARY KEY (`groupName`, `objectType`, `objectId` )
+  PRIMARY KEY (`groupName`(191), `objectType`, `objectId` )
 ) ENGINE=MyISAM ;
 
 DROP TABLE IF EXISTS `tiki_sent_newsletters_files`;
@@ -3428,7 +3427,7 @@
 
 DROP TABLE IF EXISTS `tiki_plugin_security`;
 CREATE TABLE `tiki_plugin_security` (
-  `fingerprint` VARCHAR(200) NOT NULL PRIMARY KEY,
+  `fingerprint` VARCHAR(200) NOT NULL,
   `status` VARCHAR(10) NOT NULL,
   `added_by` VARCHAR(200) NULL,
   `approval_by` VARCHAR(200) NULL,
@@ -3435,7 +3434,8 @@
   `last_update` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
   `last_objectType` VARCHAR(20) NOT NULL,
   `last_objectId` VARCHAR(200) NOT NULL,
-  KEY `last_object` (last_objectType, last_objectId)
+  PRIMARY KEY (`fingerprint`(191)),
+  KEY `last_object` (last_objectType, last_objectId(191))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_user_reports`;
@@ -3485,7 +3485,7 @@
     `to` varchar(255) NOT NULL,
     `guards` text,
     PRIMARY KEY(`transitionId`),
-    KEY `transition_lookup` (`type`, `from`)
+    KEY `transition_lookup` (`type`, `from`(191))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_auth_tokens`;
@@ -3552,7 +3552,7 @@
     `max` INT,
     `comment` TEXT,
     PRIMARY KEY(`id`),
-    KEY `code` (`code`)
+    KEY `code` (`code`(191))
 ) ENGINE=MyISAM;
 DROP TABLE IF EXISTS `tiki_translations_in_progress`;
 CREATE TABLE `tiki_translations_in_progress` (
@@ -3576,7 +3576,7 @@
     `content` TEXT,
     `categories` TEXT,
     KEY `tiki_rss_items_rss` (`rssId`),
-    KEY `tiki_rss_items_item` (`rssId`, `guid`(200))
+    KEY `tiki_rss_items_item` (`rssId`, `guid`(191))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_object_attributes`;
@@ -3588,7 +3588,7 @@
     `value` varchar(255),
 	`comment` varchar(255),
     UNIQUE `item_attribute_uq` ( `type`, `itemId`, `attribute` ),
-    KEY `attribute_lookup_ix` (`attribute`, `value`)
+    KEY `attribute_lookup_ix` (`attribute`, `value`(191))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_rating_configs`;
@@ -3633,7 +3633,7 @@
     `from` VARCHAR(255) default NULL,
     `to` VARCHAR(255) default NULL,
     PRIMARY KEY (`todoId`),
-    KEY `what` (`objectType`, `objectId`),
+    KEY `what` (`objectType`, `objectId`(191)),
     KEY `after` (`after`)
 ) ENGINE=MyISAM;
 DROP TABLE IF EXISTS `tiki_todo_notif`;
@@ -3642,7 +3642,7 @@
     `objectType` VARCHAR(50),
     `objectId` VARCHAR(255) default NULL,
     KEY `todoId` (`todoId`),
-    KEY `objectId` (`objectId`)
+    KEY `objectId` (`objectId`(191))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_url_shortener`;
@@ -3682,7 +3682,7 @@
   `used_on_user` varchar(200) default NULL,
   PRIMARY KEY  (`id`),
   KEY `id_invite` (`id_invite`),
-  KEY `used_on_user` (`used_on_user`)
+  KEY `used_on_user` (`used_on_user`(191))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_credits`;
@@ -3884,7 +3884,7 @@
     `path` VARCHAR(200) NOT NULL,
     `method` VARCHAR(20) NOT NULL,
     `arguments` TEXT NOT NULL,
-    KEY `tiki_source_auth_ix` (`scheme`, `domain`)
+    KEY `tiki_source_auth_ix` (`scheme`, `domain`(191))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_connect`;
@@ -3929,8 +3929,8 @@
   KEY `PageId` (`page_id`)
 ) ENGINE=MyISAM;
 ALTER TABLE tiki_page_references ADD UNIQUE INDEX uk1_tiki_page_ref_biblio_code (page_id, biblio_code);
-ALTER TABLE tiki_page_references ADD INDEX idx_tiki_page_ref_title (title);
-ALTER TABLE tiki_page_references ADD INDEX idx_tiki_page_ref_author (author);
+ALTER TABLE tiki_page_references ADD INDEX idx_tiki_page_ref_title (title(191));
+ALTER TABLE tiki_page_references ADD INDEX idx_tiki_page_ref_author (author(191));
 
 DROP TABLE IF EXISTS `tiki_db_status`;
 CREATE TABLE `tiki_db_status` (

------------------------------------------------------------------------
r67393 | jonnybradley | 2018-09-09 12:27:36 -0400 (dom, 09 set 2018) | 1 line

[UX] Make the menu 42 module title "System Menu" (and fix a comment syntax)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 67392)
+++ tiki.sql	(revision 67393)
@@ -4,7 +4,7 @@
 -- --------------------------------------------------------
 
 ALTER DATABASE DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci;
-SET FOREIGN_KEY_CHECKS = 0;   # tiki doesn't officially use foreign keys but sometimes they "appear", leading to table dropping errors
+SET FOREIGN_KEY_CHECKS = 0;  /* tiki doesn't officially use foreign keys but sometimes they "appear", leading to table dropping errors */
 
 DROP TABLE IF EXISTS `messu_messages`;
 CREATE TABLE `messu_messages` (
@@ -1730,7 +1730,7 @@
 ) ENGINE=MyISAM;
 
 INSERT INTO `tiki_modules` (name,position,ord,cache_time,params,groups) VALUES
-    ('menu','left',1,7200,'id=42&flip=y','a:1:{i:0;s:10:"Registered";}'),
+    ('menu','left',1,7200,'id=42&title=System+Menu','a:1:{i:0;s:10:"Registered";}'),
     ('logo','top',1,7200,'nobox=y','a:0:{}'),
     ('login_box','top',2,0,'mode=popup&nobox=y','a:0:{}'),
     ('rsslist','bottom',1,7200,'nobox=y','a:0:{}'),

------------------------------------------------------------------------
r67387 | jonnybradley | 2018-09-08 21:14:32 -0400 (sÃ¡b, 08 set 2018) | 1 line

[UX] Remove Quick Admin module on default installs as it is confusing for new users

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 67386)
+++ tiki.sql	(revision 67387)
@@ -1,4 +1,5 @@
 -- --------------------------------------------------------
+-- --------------------------------------------------------
 -- Database : Tiki
 -- --------------------------------------------------------
 
@@ -1732,7 +1733,6 @@
     ('menu','left',1,7200,'id=42&flip=y','a:1:{i:0;s:10:"Registered";}'),
     ('logo','top',1,7200,'nobox=y','a:0:{}'),
     ('login_box','top',2,0,'mode=popup&nobox=y','a:0:{}'),
-    ('quickadmin','top',3,7200,'nobox=y','a:1:{i:0;s:6:"Admins";}'),
     ('rsslist','bottom',1,7200,'nobox=y','a:0:{}'),
     ('poweredby','bottom',2,7200,'nobox=y&icons=n&version=n','a:0:{}');
 

------------------------------------------------------------------------
r67124 | kroky6 | 2018-08-06 11:07:52 -0400 (seg, 06 ago 2018) | 1 line

[FIX] missing tiki.sql update

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 67123)
+++ tiki.sql	(revision 67124)
@@ -2117,6 +2117,7 @@
   `objectType` varchar(20) default 'wiki page',
   `user` varchar(200) NOT NULL default '',
   `timestamp` int(14) default NULL,
+  `value` VARCHAR(255) NULL,
   PRIMARY KEY (`semName`)
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r66934 | xorti | 2018-07-09 20:21:17 -0400 (seg, 09 jul 2018) | 4 lines

[REM] Remove feature reports and wikiplugin_report

- https://tiki.org/forumthread67333


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 66933)
+++ tiki.sql	(revision 66934)
@@ -1663,7 +1663,6 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'r', 'Invoice', 'tiki-list_invoices.php', 790, 'feature_invoice', 'tiki_p_admin', '', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'o', 'New Invoice', 'tiki-edit_invoice.php', 791, 'feature_invoice', 'tiki_p_admin', '', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'o', 'TimeSheet', 'tiki-timesheet.php', 39, 'feature_time_sheet', '', '', 0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o',  'Reports','tiki-edit_report.php',38,'feature_reports','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Scheduler','tiki-admin_schedulers.php',1270,'','tiki_p_admin','', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Webservices','tiki-admin_webservices.php',1280,'feature_webservices','tiki_p_admin_webservices','', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','References','tiki-references.php',255,'feature_wiki,feature_references','tiki_p_edit_references','', 0);

------------------------------------------------------------------------
r66920 | rjsmelo | 2018-07-08 19:14:30 -0400 (dom, 08 jul 2018) | 2 lines

[ENH] Improve Rollback capabilities for profile apply


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 66919)
+++ tiki.sql	(revision 66920)
@@ -88,7 +88,7 @@
   `comment` text default NULL,
   `categId` int(12) NOT NULL default '0',
   `client` VARCHAR( 200 ) NULL DEFAULT NULL,
-  `log` TEXT NULL DEFAULT NULL,
+  `log` LONGTEXT NULL DEFAULT NULL,
   PRIMARY KEY (`actionId`),
   KEY `lastModif` (`lastModif`),
   KEY `object` (`object`(100), `objectType`, `action`(100))

------------------------------------------------------------------------
r66808 | jonnybradley | 2018-06-25 11:54:32 -0400 (seg, 25 jun 2018) | 2 lines

[FIX] reports: Fix invalid dates in reports for last_report datetime for recent mysql 5.7+ and mariadb or where NO_ZERO_IN_DATE NO_ZERO_DATE are enabled (was breaking tests for me)
Lightly tested with real data, seems ok...

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 66807)
+++ tiki.sql	(revision 66808)
@@ -3446,7 +3446,7 @@
   `view` varchar(8) NOT NULL,
   `type` varchar(5) NOT NULL,
   `always_email` tinyint(1) NOT NULL,
-  `last_report` datetime NOT NULL,
+  `last_report` datetime DEFAULT NULL,
   PRIMARY KEY (`id`)
 ) ENGINE=MyISAM;
 
@@ -3456,7 +3456,7 @@
   `user` varchar(200) NOT NULL,
   `event` varchar(200) NOT NULL,
   `data` text NOT NULL,
-  `time` datetime NOT NULL,
+  `time` datetime DEFAULT NULL,
   PRIMARY KEY (`id`)
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r66257 | jyhem | 2018-05-03 18:17:23 -0400 (qui, 03 mai 2018) | 1 line

[FIX] When newsletters are throttled, ensure all batches look the same as the first batch.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 66256)
+++ tiki.sql	(revision 66257)
@@ -2131,6 +2131,7 @@
   `data` longblob,
   `datatxt` longblob,
   `wysiwyg` char(1) default NULL,
+  `is_html` varchar(2) default NULL,
   PRIMARY KEY (`editionId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r66144 | xorti | 2018-04-22 18:48:53 -0400 (dom, 22 abr 2018) | 9 lines

[NEW] Add schedulers heal feature

- Cron now is able to heal scheduler if is running for long time and is stalled.
- Allow admins to set the running timeout, before heal.
- Allow admins to receive notifications when a scheduler is healed.
- Allow admins to reset/heal scheduler if stalled, from the scheduler administration.
- Allow admins to set how many logs to keep for each scheduler.
- Logs are now paginated.


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 66143)
+++ tiki.sql	(revision 66144)
@@ -4068,7 +4068,8 @@
   `end_time` INT(14),
   `status` VARCHAR(10),
   `output` TEXT,
-  `stalled` TINYINT DEFAULT 0
+  `stalled` TINYINT DEFAULT 0,
+  `healed` TINYINT DEFAULT 0
 ) ENGINE=MyISAM;
 
 SET FOREIGN_KEY_CHECKS = 1;

------------------------------------------------------------------------
r66143 | xorti | 2018-04-22 11:24:32 -0400 (dom, 22 abr 2018) | 7 lines

[NEW] Add schedulers stalled alerts

- Cron now sets a scheduler as stalled if running for a long period.
- Allow admins to set the running timeout, setting it as stalled.
- Allow admins to receive notifications when a scheduler is marked as stalled.
- Allow admins to reset scheduler if stalled, from the scheduler administration.


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 66142)
+++ tiki.sql	(revision 66143)
@@ -4067,7 +4067,8 @@
   `start_time` INT(14),
   `end_time` INT(14),
   `status` VARCHAR(10),
-  `output` TEXT
+  `output` TEXT,
+  `stalled` TINYINT DEFAULT 0
 ) ENGINE=MyISAM;
 
 SET FOREIGN_KEY_CHECKS = 1;

------------------------------------------------------------------------
r66009 | xorti | 2018-04-14 14:24:52 -0400 (sÃ¡b, 14 abr 2018) | 11 lines

[ENH] Custom Routes - Short URL improvements

- Fix route.php to load necessary sef_url preferences to redirect to page in SEF url if enabled.
- Improve UI on the list custom routes, add column to show if is shorturl.
- Move shorturl prefererences to sefurl prefs page.
- Include the option to get a short url for forum threads.
- Add title in modal when remove a custom route.
- Rename Custom Route option 'Delete' to 'Remove'.
- Add missing menu entry to include 'Custom Route' in the side menu.
- Add script to fix Custom Route menu entries that was missing.
- Add script to update renamed preferences.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 66008)
+++ tiki.sql	(revision 66009)
@@ -1667,6 +1667,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Scheduler','tiki-admin_schedulers.php',1270,'','tiki_p_admin','', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Webservices','tiki-admin_webservices.php',1280,'feature_webservices','tiki_p_admin_webservices','', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','References','tiki-references.php',255,'feature_wiki,feature_references','tiki_p_edit_references','', 0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'o', 'Custom Routes', 'tiki-admin_routes.php', 1290, 'feature_sefurl_routes', 'tiki_p_admin', '', 0);
 
 DROP TABLE IF EXISTS `tiki_menus`;
 CREATE TABLE `tiki_menus` (

------------------------------------------------------------------------
r65987 | rjsmelo | 2018-04-11 17:05:59 -0400 (qua, 11 abr 2018) | 2 lines

[FIX] Scheduler field is small for complex scheduler definitions


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 65986)
+++ tiki.sql	(revision 65987)
@@ -4053,7 +4053,7 @@
   `name` VARCHAR(255),
   `description` VARCHAR(255),
   `task`VARCHAR(255),
-  `params` VARCHAR(255),
+  `params` TEXT,
   `run_time` VARCHAR(255),
   `status` VARCHAR(10),
   `re_run` TINYINT

------------------------------------------------------------------------
r65935 | rjsmelo | 2018-04-05 20:59:17 -0400 (qui, 05 abr 2018) | 2 lines

[FIX] Fix issue when custum routes have / in the route, remove unused field in custom routes.


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 65934)
+++ tiki.sql	(revision 65935)
@@ -635,7 +635,6 @@
   `from` varchar(255) NOT NULL,
   `redirect` text NOT NULL,
   `active` tinyint(1) NOT NULL DEFAULT '1',
-  `user_id` int(11) NOT NULL,
   `short_url` tinyint(1) DEFAULT '0'
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r65849 | xorti | 2018-03-31 09:16:52 -0400 (sÃ¡b, 31 mar 2018) | 1 line

[FIX] Add short_url column to tiki_custom_route table schema

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 65848)
+++ tiki.sql	(revision 65849)
@@ -635,7 +635,8 @@
   `from` varchar(255) NOT NULL,
   `redirect` text NOT NULL,
   `active` tinyint(1) NOT NULL DEFAULT '1',
-  `user_id` int(11) NOT NULL
+  `user_id` int(11) NOT NULL,
+  `short_url` tinyint(1) DEFAULT '0'
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_directory_categories`;

------------------------------------------------------------------------
r65651 | Luis Fagundes | 2018-03-05 10:56:44 -0400 (seg, 05 mar 2018) | 1 line

[ENH] Better flagged revision workflow: rejection interface with commeent, consistent history page

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 65650)
+++ tiki.sql	(revision 65651)
@@ -3584,6 +3584,7 @@
     `itemId` varchar(160) NOT NULL,
     `attribute` varchar(70) NOT NULL,
     `value` varchar(255),
+	`comment` varchar(255),
     UNIQUE `item_attribute_uq` ( `type`, `itemId`, `attribute` ),
     KEY `attribute_lookup_ix` (`attribute`, `value`)
 ) ENGINE=MyISAM;

------------------------------------------------------------------------
r65549 | jonnybradley | 2018-02-20 12:02:36 -0400 (ter, 20 fev 2018) | 6 lines

[MRG] Automatic merge, branches/18.x 65531 to 65548
Conflicts fixed
	lib/wiki/editlib.php (manually)
	lang/fr/language.php (mc)

Excluding lib/core/WikiPlugin/Reference.php and templates/plugin/quick_add_references.tpl for now due to errors

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 65548)
+++ tiki.sql	(revision 65549)
@@ -1666,6 +1666,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o',  'Reports','tiki-edit_report.php',38,'feature_reports','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Scheduler','tiki-admin_schedulers.php',1270,'','tiki_p_admin','', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Webservices','tiki-admin_webservices.php',1280,'feature_webservices','tiki_p_admin_webservices','', 0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','References','tiki-references.php',255,'feature_wiki,feature_references','tiki_p_edit_references','', 0);
 
 DROP TABLE IF EXISTS `tiki_menus`;
 CREATE TABLE `tiki_menus` (

------------------------------------------------------------------------
r65467 | jonnybradley | 2018-02-07 07:17:31 -0400 (qua, 07 fev 2018) | 1 line

[MRG] Automatic merge, branches/18.x 65464 to 65466

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 65466)
+++ tiki.sql	(revision 65467)
@@ -3,6 +3,7 @@
 -- --------------------------------------------------------
 
 ALTER DATABASE DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci;
+SET FOREIGN_KEY_CHECKS = 0;   # tiki doesn't officially use foreign keys but sometimes they "appear", leading to table dropping errors
 
 DROP TABLE IF EXISTS `messu_messages`;
 CREATE TABLE `messu_messages` (
@@ -4065,3 +4066,5 @@
   `status` VARCHAR(10),
   `output` TEXT
 ) ENGINE=MyISAM;
+
+SET FOREIGN_KEY_CHECKS = 1;

------------------------------------------------------------------------
r64867 | jonnybradley | 2017-12-11 11:46:38 -0400 (seg, 11 dez 2017) | 1 line

[MRG] Automatic merge, branches/18.x 64845 to 64866

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 64866)
+++ tiki.sql	(revision 64867)
@@ -2105,7 +2105,7 @@
   `filename` varchar(250) NOT NULL,
   `tiki_version` varchar(60) NOT NULL,
   `severity` int(4) NOT NULL default '0',
-  PRIMARY KEY (`md5_value`,`filename`(100),`tiki_version`),
+  PRIMARY KEY (`filename`,`tiki_version`),
   KEY `sdb_fn` (filename)
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r64824 | jonnybradley | 2017-12-06 10:56:44 -0400 (qua, 06 dez 2017) | 1 line

[MRG] Automatic merge, branches/18.x 64817 to 64823

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 64823)
+++ tiki.sql	(revision 64824)
@@ -156,7 +156,6 @@
   `created` int(14) default NULL,
   `heading` text,
   `body` text,
-  `hash` varchar(32) default NULL,
   `author` varchar(200) default NULL,
   `nbreads` int(14) default NULL,
   `votes` int(8) default NULL,
@@ -627,6 +626,17 @@
   PRIMARY KEY (`copyrightId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
+DROP TABLE IF EXISTS `tiki_custom_route`;
+CREATE TABLE `tiki_custom_route` (
+  `id` int(11) NOT NULL PRIMARY KEY AUTO_INCREMENT,
+  `description` varchar(255) NULL,
+  `type` varchar(255) NOT NULL,
+  `from` varchar(255) NOT NULL,
+  `redirect` text NOT NULL,
+  `active` tinyint(1) NOT NULL DEFAULT '1',
+  `user_id` int(11) NOT NULL
+) ENGINE=MyISAM;
+
 DROP TABLE IF EXISTS `tiki_directory_categories`;
 CREATE TABLE `tiki_directory_categories` (
   `categId` int(10) NOT NULL auto_increment,
@@ -1105,6 +1115,7 @@
 	KEY runnable (runnable)
 )	ENGINE = MyISAM;
 
+DROP TABLE IF EXISTS `tiki_h5p_libraries_hub_cache`;
 CREATE TABLE tiki_h5p_libraries_hub_cache (
   id                INT UNSIGNED NOT NULL AUTO_INCREMENT,
   machine_name      VARCHAR(127) NOT NULL,
@@ -2251,7 +2262,6 @@
   `resume` text,
   `heading` text,
   `body` text,
-  `hash` varchar(32) default NULL,
   `author` varchar(200) default NULL,
   `nbreads` int(14) default NULL,
   `votes` int(8) default NULL,
@@ -3531,7 +3541,7 @@
     KEY `payment_request_ix` (`paymentRequestId`)
 ) ENGINE=MyISAM;
 DROP TABLE IF EXISTS `tiki_discount`;
-CREATE TABLE `tiki_discount`(
+CREATE TABLE `tiki_discount` (
     `id` INT NOT NULL AUTO_INCREMENT,
     `code` VARCHAR(255),
     `value` VARCHAR(255),
@@ -3771,6 +3781,7 @@
 
 DROP TABLE IF EXISTS `tiki_acct_item`;
 CREATE TABLE `tiki_acct_item` (
+  `itemId` int(11) NOT NULL AUTO_INCREMENT,
   `itemBookId` int(10) unsigned NOT NULL,
   `itemJournalId` int(10) unsigned NOT NULL DEFAULT '0',
   `itemAccountId` int(10) unsigned NOT NULL DEFAULT '0',
@@ -3778,7 +3789,7 @@
   `itemAmount` double NOT NULL DEFAULT '0',
   `itemText` varchar(255) NOT NULL DEFAULT '',
   `itemTs` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
-  PRIMARY KEY (`itemBookId`,`itemJournalId`,`itemAccountId`,`itemType`)
+  PRIMARY KEY (`itemId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_acct_journal`;
@@ -3846,7 +3857,7 @@
     `entryId` INT PRIMARY KEY AUTO_INCREMENT,
     `queue` VARCHAR(25) NOT NULL,
     `timestamp` INT NOT NULL,
-    `handler` VARCHAR(20) NULL,
+    `handler` VARCHAR(64) NULL,
     `message` TEXT NOT NULL,
     KEY `queue_name_ix` (`queue`),
     KEY `queue_handler_ix` (`handler`)
@@ -4029,6 +4040,7 @@
 	`name` VARCHAR(30) NOT NULL,
 	`format_descriptor` TEXT,
 	`filter_descriptor` TEXT,
+	`config` TEXT,
 	KEY `tabular_tracker_ix` (`trackerId`)
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r64816 | jonnybradley | 2017-12-05 13:39:39 -0400 (ter, 05 dez 2017) | 1 line

[MRG] Automatic merge, branches/18.x 64812 to 64815

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 64815)
+++ tiki.sql	(revision 64816)
@@ -86,7 +86,8 @@
   `ip` varchar(39) default NULL,
   `comment` text default NULL,
   `categId` int(12) NOT NULL default '0',
-    `client` VARCHAR( 200 ) NULL DEFAULT NULL,
+  `client` VARCHAR( 200 ) NULL DEFAULT NULL,
+  `log` TEXT NULL DEFAULT NULL,
   PRIMARY KEY (`actionId`),
   KEY `lastModif` (`lastModif`),
   KEY `object` (`object`(100), `objectType`, `action`(100))

------------------------------------------------------------------------
r64679 | jonnybradley | 2017-11-22 16:18:42 -0400 (qua, 22 nov 2017) | 2 lines

[FIX] h5p: Fix more issues with updated H5P libraries - new tiki_h5p_libraries_hub_cache table, new pref h5p_hub_is_enabled etc.
Editor seems to work more completely now, still more to come...

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 64678)
+++ tiki.sql	(revision 64679)
@@ -1104,6 +1104,33 @@
 	KEY runnable (runnable)
 )	ENGINE = MyISAM;
 
+CREATE TABLE tiki_h5p_libraries_hub_cache (
+  id                INT UNSIGNED NOT NULL AUTO_INCREMENT,
+  machine_name      VARCHAR(127) NOT NULL,
+  major_version     INT UNSIGNED NOT NULL,
+  minor_version     INT UNSIGNED NOT NULL,
+  patch_version     INT UNSIGNED NOT NULL,
+  h5p_major_version INT UNSIGNED,
+  h5p_minor_version INT UNSIGNED,
+  title             VARCHAR(255) NOT NULL,
+  summary           TEXT         NOT NULL,
+  description       TEXT         NOT NULL,
+  icon              VARCHAR(511) NOT NULL,
+  created_at        INT UNSIGNED NOT NULL,
+  updated_at        INT UNSIGNED NOT NULL,
+  is_recommended    INT UNSIGNED NOT NULL,
+  popularity        INT UNSIGNED NOT NULL,
+  screenshots       TEXT,
+  license           TEXT,
+  example           VARCHAR(511) NOT NULL,
+  tutorial          VARCHAR(511),
+  keywords          TEXT,
+  categories        TEXT,
+  owner             VARCHAR(511),
+  PRIMARY KEY (id),
+  KEY name_version (machine_name, major_version, minor_version, patch_version)
+) ENGINE = MyISAM;
+
 # Keep track of h5p library dependencies
 DROP TABLE IF EXISTS `tiki_h5p_libraries_libraries`;
 CREATE TABLE tiki_h5p_libraries_libraries (

------------------------------------------------------------------------
r64028 | chealer | 2017-09-28 12:35:34 -0400 (qui, 28 set 2017) | 3 lines

Support distinguishing database translations which are specific to the Tiki instance from general translations which can be contributed to the Tiki community
This removes the LanguageTranslations::updateTrans() bypass for unchanged strings, which causes tiki_language.changed to be set to 1, but there seems to be no way tiki_language.changed could take a value other than 1 anyway.
[REF] Replace _getDbTranslationsEscaped() with PHPEscape(), to be used with _getDbTranslations()

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 64027)
+++ tiki.sql	(revision 64028)
@@ -1244,6 +1244,7 @@
   `lang` char(16) NOT NULL default '',
   `tran` text,
   `changed` bool,
+  `general` bool DEFAULT NULL COMMENT 'true if this translation is general and can be contributed to the Tiki community, false if it is specific to this instance',
   `userId` int(8),
   `lastModif` int(14) NULL,
   PRIMARY KEY (`id`)

------------------------------------------------------------------------
r63993 | yonixxx | 2017-09-24 03:24:48 -0400 (dom, 24 set 2017) | 1 line

[FIX] SEFURL route stats changed to statistics to avoid conflict with some hosting setup

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 63992)
+++ tiki.sql	(revision 63993)
@@ -3339,7 +3339,7 @@
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-my_tiki.php', 'my', '', '', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-newsletters.php', 'newsletters', 'newsletter', 'feature_newsletters', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-list_quizzes.php', 'quizzes', '', 'feature_quizzes', 200);
-INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-stats.php', 'stats', '', 'feature_stats', 200);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-stats.php', 'statistics', '', 'feature_stats', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-list_surveys.php', 'surveys', '', 'feature_surveys', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-list_trackers.php', 'trackers', 'tracker', 'feature_trackers', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-sheets.php', 'sheets', '', 'feature_sheet', 200);

------------------------------------------------------------------------
r63892 | jonnybradley | 2017-09-20 13:41:13 -0400 (qua, 20 set 2017) | 1 line

[MRG] Automatic merge, branches/17.x 63886 to 63891

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 63891)
+++ tiki.sql	(revision 63892)
@@ -1562,6 +1562,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Settings','tiki-admin.php',1050,'','tiki_p_edit_menu','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Settings','tiki-admin.php',1050,'','tiki_p_clean_cache','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Settings','tiki-admin.php',1050,'','tiki_p_admin_modules','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Settings','tiki-admin.php',1050,'','tiki_p_admin_webservices','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o',' Control Panels','tiki-admin.php',1051,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Live Support','tiki-live_support_admin.php',1055,'feature_live_support','tiki_p_live_support_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Live Support','tiki-live_support_admin.php',1055,'feature_live_support','user_is_operator','',0);
@@ -1623,7 +1624,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'o', 'TimeSheet', 'tiki-timesheet.php', 39, 'feature_time_sheet', '', '', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o',  'Reports','tiki-edit_report.php',38,'feature_reports','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Scheduler','tiki-admin_schedulers.php',1270,'','tiki_p_admin','', 0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Webservices','tiki-admin_webservices.php',1280,'feature_webservices','tiki_p_admin','', 0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Webservices','tiki-admin_webservices.php',1280,'feature_webservices','tiki_p_admin_webservices','', 0);
 
 DROP TABLE IF EXISTS `tiki_menus`;
 CREATE TABLE `tiki_menus` (

------------------------------------------------------------------------
r62364 | luciash | 2017-04-27 12:55:48 -0400 (qui, 27 abr 2017) | 1 line

[MRG] Automatic merge, branches/17.x 62359 to 62363

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 62363)
+++ tiki.sql	(revision 62364)
@@ -3069,10 +3069,10 @@
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Viewed', 'article', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('%', 'system', 'y');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('feature', 'system', 'y');
-INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Updated', 'trackeritem', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Created', 'trackeritem', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Viewed', 'trackeritem', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Removed', 'trackeritem', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Updated', 'trackeritem', 'y');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Created', 'trackeritem', 'y');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Viewed', 'trackeritem', 'y');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Removed', 'trackeritem', 'y');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Created', 'wiki page attachment', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Removed', 'wiki page attachment', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Categorized', 'wiki page', 'n');

------------------------------------------------------------------------
r62115 | kroky6 | 2017-04-06 09:17:31 -0400 (qui, 06 abr 2017) | 1 line

[MRG] Automatic merge, branches/17.x 62108 to 62112

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 62114)
+++ tiki.sql	(revision 62115)
@@ -2785,6 +2785,7 @@
   `userChoice` char(1) default NULL,
   `groupDefCat` int(12) default 0,
   `groupTheme` varchar(255) default '',
+  `groupColor` VARCHAR(20) NOT NULL DEFAULT '',
   `isExternal` char(1) default 'n',
   `expireAfter` int(14) default 0,
   `emailPattern`  varchar(255) default '',

------------------------------------------------------------------------
r62046 | drsassafras | 2017-04-03 00:56:55 -0400 (seg, 03 abr 2017) | 1 line

[REF] sql - removed redundant sql

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 62045)
+++ tiki.sql	(revision 62046)
@@ -3510,7 +3510,7 @@
     KEY `code` (`code`)
 ) ENGINE=MyISAM;
 DROP TABLE IF EXISTS `tiki_translations_in_progress`;
-CREATE TABLE IF NOT EXISTS `tiki_translations_in_progress` (
+CREATE TABLE `tiki_translations_in_progress` (
    `page_id` int(14) NOT NULL,
    `language` char(2) NOT NULL,
    KEY `page_id` (`page_id`),
@@ -3715,7 +3715,7 @@
   `amountType` int(10) unsigned NOT NULL,
   `fieldNameAmountSign` varchar(63) NOT NULL,
   `SignPositive` varchar(7) NOT NULL,
-  `SignNegative` varchar(7) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
+  `SignNegative` varchar(7) NOT NULL,
   PRIMARY KEY (`bankBookId`,`bankAccountId`)
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r62027 | jonnybradley | 2017-04-02 10:09:37 -0400 (dom, 02 abr 2017) | 2 lines

[FIX] sql: Change duplicate trackeritem tiki_actionlog_conf line from Viewed to Removed as that one seems to be missing.
Thanks bfitz on https://dev.tiki.org/item6298#threadId=5325 for this and the previous sql fix

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 62026)
+++ tiki.sql	(revision 62027)
@@ -3071,7 +3071,7 @@
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Updated', 'trackeritem', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Created', 'trackeritem', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Viewed', 'trackeritem', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Viewed', 'trackeritem', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Removed', 'trackeritem', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Created', 'wiki page attachment', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Removed', 'wiki page attachment', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Categorized', 'wiki page', 'n');

------------------------------------------------------------------------
r62026 | jonnybradley | 2017-04-02 10:05:42 -0400 (dom, 02 abr 2017) | 1 line

[FIX] h5p: Missed DROP TABLE commands on newly added table definitions

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 62025)
+++ tiki.sql	(revision 62026)
@@ -1044,6 +1044,7 @@
 ) ENGINE=MyISAM;
 
 # Keep track of h5p content entities > Pending in Tiki: Add FileId
+DROP TABLE IF EXISTS `tiki_h5p_contents`;
 CREATE TABLE tiki_h5p_contents (
 	id           INT UNSIGNED NOT NULL AUTO_INCREMENT,
 	file_id			 INT UNSIGNED NOT NULL,	# reference to the file gallery object in tiki_files table
@@ -1068,6 +1069,7 @@
 )	ENGINE = MyISAM;
 
 # Keep track of content dependencies
+DROP TABLE IF EXISTS `tiki_h5p_contents_libraries`;
 CREATE TABLE tiki_h5p_contents_libraries (
 	content_id      INT UNSIGNED      NOT NULL,
 	library_id      INT UNSIGNED      NOT NULL,
@@ -1078,6 +1080,7 @@
 )	ENGINE = MyISAM;
 
 # Keep track of h5p libraries
+DROP TABLE IF EXISTS `tiki_h5p_libraries`;
 CREATE TABLE tiki_h5p_libraries (
 	id               INT UNSIGNED  NOT NULL AUTO_INCREMENT,
 	created_at       TIMESTAMP     NULL,
@@ -1102,6 +1105,7 @@
 )	ENGINE = MyISAM;
 
 # Keep track of h5p library dependencies
+DROP TABLE IF EXISTS `tiki_h5p_libraries_libraries`;
 CREATE TABLE tiki_h5p_libraries_libraries (
 	library_id          INT UNSIGNED NOT NULL,
 	required_library_id INT UNSIGNED NOT NULL,
@@ -1110,6 +1114,7 @@
 )	ENGINE = MyISAM;
 
 # Keep track of h5p library translations
+DROP TABLE IF EXISTS `tiki_h5p_libraries_languages`;
 CREATE TABLE tiki_h5p_libraries_languages (
 	library_id    INT UNSIGNED NOT NULL,
 	language_code VARCHAR(31)  NOT NULL,
@@ -1118,6 +1123,7 @@
 )	ENGINE = MyISAM;
 
 # Keep track of temporary files uploaded in editor before saving content
+DROP TABLE IF EXISTS `tiki_h5p_tmpfiles`;
 CREATE TABLE tiki_h5p_tmpfiles (
 	id         INT UNSIGNED NOT NULL AUTO_INCREMENT,
 	path       VARCHAR(255) NOT NULL,
@@ -1128,6 +1134,7 @@
 ) ENGINE = MyISAM;
 
 # Keep track of results (contents >-< users)
+DROP TABLE IF EXISTS `tiki_h5p_results`;
 CREATE TABLE tiki_h5p_results (
 	id         INT UNSIGNED NOT NULL AUTO_INCREMENT,
 	content_id INT UNSIGNED NOT NULL,
@@ -1142,6 +1149,7 @@
 )	ENGINE = MyISAM;
 
 # Cache table for h5p libraries so we can reuse the existing h5p code for caching
+DROP TABLE IF EXISTS `tiki_h5p_libraries_cachedassets`;
 CREATE TABLE tiki_h5p_libraries_cachedassets (
 	library_id INT UNSIGNED NOT NULL,
 	hash       VARCHAR(64)  NOT NULL,
@@ -3249,7 +3257,6 @@
 ) ENGINE=MyISAM ;
 
 DROP TABLE IF EXISTS `tiki_groupalert`;
-
 CREATE TABLE `tiki_groupalert` (
   `groupName` varchar(255) NOT NULL default '',
   `objectType` varchar( 20 ) NOT NULL default '',

------------------------------------------------------------------------
r61937 | jonnybradley | 2017-03-29 11:55:20 -0400 (qua, 29 mar 2017) | 4 lines

[NEW] h5p: Merge everything from branches/experimental/h5p
Including: New section for H5P prefs on admin/fgals/enhancements, new plugin {h5p}, new AJAX services etc
See https://dev.tiki.org/H5P and https://doc.tiki.org/H5P for more
(thanks marclaporte and all involved in bringing this to Tiki)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 61936)
+++ tiki.sql	(revision 61937)
@@ -1043,6 +1043,111 @@
   INDEX `event-object-group` ( `event` , `object` ( 100 ) , `group` ( 50 ) )
 ) ENGINE=MyISAM;
 
+# Keep track of h5p content entities > Pending in Tiki: Add FileId
+CREATE TABLE tiki_h5p_contents (
+	id           INT UNSIGNED NOT NULL AUTO_INCREMENT,
+	file_id			 INT UNSIGNED NOT NULL,	# reference to the file gallery object in tiki_files table
+	created_at   TIMESTAMP    NULL,
+	updated_at   TIMESTAMP    NULL,
+	user_id      INT UNSIGNED NOT NULL,
+	title        VARCHAR(255) NOT NULL,
+	library_id   INT UNSIGNED NOT NULL,
+	parameters   LONGTEXT     NOT NULL,
+	filtered     LONGTEXT     NOT NULL,
+	slug         VARCHAR(127) NOT NULL,
+	embed_type   VARCHAR(127) NOT NULL,
+	disable      INT UNSIGNED NOT NULL DEFAULT 0,
+	content_type VARCHAR(127) NULL,
+	author       VARCHAR(127) NULL,
+	license      VARCHAR(7)   NULL,
+	keywords     TEXT         NULL,
+	description  TEXT         NULL,
+	PRIMARY KEY (id),
+	UNIQUE KEY `fileId` (`file_id`)
+
+)	ENGINE = MyISAM;
+
+# Keep track of content dependencies
+CREATE TABLE tiki_h5p_contents_libraries (
+	content_id      INT UNSIGNED      NOT NULL,
+	library_id      INT UNSIGNED      NOT NULL,
+	dependency_type VARCHAR(31)       NOT NULL,
+	weight          SMALLINT UNSIGNED NOT NULL DEFAULT 0,
+	drop_css        TINYINT UNSIGNED  NOT NULL,
+	PRIMARY KEY (content_id, library_id, dependency_type)
+)	ENGINE = MyISAM;
+
+# Keep track of h5p libraries
+CREATE TABLE tiki_h5p_libraries (
+	id               INT UNSIGNED  NOT NULL AUTO_INCREMENT,
+	created_at       TIMESTAMP     NULL,
+	updated_at       TIMESTAMP     NULL,
+	name             VARCHAR(127)  NOT NULL,
+	title            VARCHAR(255)  NOT NULL,
+	major_version    INT UNSIGNED  NOT NULL,
+	minor_version    INT UNSIGNED  NOT NULL,
+	patch_version    INT UNSIGNED  NOT NULL,
+	runnable         INT UNSIGNED  NOT NULL,
+	restricted       INT UNSIGNED  NOT NULL DEFAULT 0,
+	fullscreen       INT UNSIGNED  NOT NULL,
+	embed_types      VARCHAR(255)  NOT NULL,
+	preloaded_js     TEXT          NULL,
+	preloaded_css    TEXT          NULL,
+	drop_library_css TEXT          NULL,
+	semantics        TEXT          NOT NULL,
+	tutorial_url     VARCHAR(1023) NOT NULL,
+	PRIMARY KEY (id),
+	KEY name_version (name, major_version, minor_version, patch_version),
+	KEY runnable (runnable)
+)	ENGINE = MyISAM;
+
+# Keep track of h5p library dependencies
+CREATE TABLE tiki_h5p_libraries_libraries (
+	library_id          INT UNSIGNED NOT NULL,
+	required_library_id INT UNSIGNED NOT NULL,
+	dependency_type     VARCHAR(31)  NOT NULL,
+	PRIMARY KEY (library_id, required_library_id)
+)	ENGINE = MyISAM;
+
+# Keep track of h5p library translations
+CREATE TABLE tiki_h5p_libraries_languages (
+	library_id    INT UNSIGNED NOT NULL,
+	language_code VARCHAR(31)  NOT NULL,
+	translation   TEXT         NOT NULL,
+	PRIMARY KEY (library_id, language_code)
+)	ENGINE = MyISAM;
+
+# Keep track of temporary files uploaded in editor before saving content
+CREATE TABLE tiki_h5p_tmpfiles (
+	id         INT UNSIGNED NOT NULL AUTO_INCREMENT,
+	path       VARCHAR(255) NOT NULL,
+	created_at INT UNSIGNED NOT NULL,
+	PRIMARY KEY (id),
+	KEY created_at (created_at),
+	KEY path (path)
+) ENGINE = MyISAM;
+
+# Keep track of results (contents >-< users)
+CREATE TABLE tiki_h5p_results (
+	id         INT UNSIGNED NOT NULL AUTO_INCREMENT,
+	content_id INT UNSIGNED NOT NULL,
+	user_id    INT UNSIGNED NOT NULL,
+	score      INT UNSIGNED NOT NULL,
+	max_score  INT UNSIGNED NOT NULL,
+	opened     INT UNSIGNED NOT NULL,
+	finished   INT UNSIGNED NOT NULL,
+	time       INT UNSIGNED NOT NULL,
+	PRIMARY KEY (id),
+	KEY content_user (content_id, user_id)
+)	ENGINE = MyISAM;
+
+# Cache table for h5p libraries so we can reuse the existing h5p code for caching
+CREATE TABLE tiki_h5p_libraries_cachedassets (
+	library_id INT UNSIGNED NOT NULL,
+	hash       VARCHAR(64)  NOT NULL,
+	PRIMARY KEY (library_id, hash)
+) ENGINE = MyISAM;
+
 DROP TABLE IF EXISTS `tiki_history`;
 CREATE TABLE `tiki_history` (
   `historyId` int(12) NOT NULL auto_increment,

------------------------------------------------------------------------
r61931 | chealer | 2017-03-29 11:23:33 -0400 (qua, 29 mar 2017) | 1 line

Increase maximum category description length from 250 characters to 500

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 61930)
+++ tiki.sql	(revision 61931)
@@ -462,7 +462,7 @@
 CREATE TABLE `tiki_categories` (
   `categId` int(12) NOT NULL auto_increment,
   `name` varchar(200) default NULL,
-  `description` varchar(250) default NULL,
+  `description` varchar(500) default NULL,
   `parentId` int(12) default NULL,
   `rootId` int NOT NULL DEFAULT 0,
   `hits` int(8) default NULL,

------------------------------------------------------------------------
r61917 | jonnybradley | 2017-03-28 13:31:43 -0400 (ter, 28 mar 2017) | 1 line

[FIX] mysql 5.7 can have trouble with indexes which allow null values, so change the default (hopefully fixes wish6298 without breaking anything else - unused table afaik, thanks bfitz)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 61916)
+++ tiki.sql	(revision 61917)
@@ -2358,8 +2358,8 @@
 CREATE TABLE `tiki_user_assigned_modules` (
   `moduleId` int(8) NOT NULL,
   `name` varchar(200) NOT NULL default '',
-  `position` varchar(20) default NULL,
-  `ord` int(4) default NULL,
+  `position` varchar(20) NOT NULL default '',
+  `ord` int(4) NOT NULL default 0,
   `type` char(1) default NULL,
   `user` varchar(200) NOT NULL default '',
   PRIMARY KEY (`name`(30),`user`,`position`, `ord`),

------------------------------------------------------------------------
r61502 | jonnybradley | 2017-03-05 11:19:01 -0400 (dom, 05 mar 2017) | 1 line

[ENH] webservices: Add admin menu item

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 61501)
+++ tiki.sql	(revision 61502)
@@ -1510,6 +1510,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'o', 'TimeSheet', 'tiki-timesheet.php', 39, 'feature_time_sheet', '', '', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o',  'Reports','tiki-edit_report.php',38,'feature_reports','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Scheduler','tiki-admin_schedulers.php',1270,'','tiki_p_admin','', 0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Webservices','tiki-admin_webservices.php',1280,'feature_webservices','tiki_p_admin','', 0);
 
 DROP TABLE IF EXISTS `tiki_menus`;
 CREATE TABLE `tiki_menus` (

------------------------------------------------------------------------
r61501 | jonnybradley | 2017-03-05 11:02:39 -0400 (dom, 05 mar 2017) | 1 line

[FIX] Menu 42 item missed from r61431

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 61500)
+++ tiki.sql	(revision 61501)
@@ -1509,6 +1509,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'o', 'New Invoice', 'tiki-edit_invoice.php', 791, 'feature_invoice', 'tiki_p_admin', '', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'o', 'TimeSheet', 'tiki-timesheet.php', 39, 'feature_time_sheet', '', '', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o',  'Reports','tiki-edit_report.php',38,'feature_reports','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Scheduler','tiki-admin_schedulers.php',1270,'','tiki_p_admin','', 0);
 
 DROP TABLE IF EXISTS `tiki_menus`;
 CREATE TABLE `tiki_menus` (

------------------------------------------------------------------------
r61431 | rjsmelo | 2017-02-28 20:35:38 -0400 (ter, 28 fev 2017) | 5 lines

[NEW] Add support for schedule tasks (cron) to tiki
- New command avalable in the console to trigger the schedule: scheduler:run
- One task provided (ConsoleCommandTask) that allow to run other console commands
- Managed using tiki-admin_schedulers.php


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 61430)
+++ tiki.sql	(revision 61431)
@@ -3886,3 +3886,25 @@
 	`filter_descriptor` TEXT,
 	KEY `tabular_tracker_ix` (`trackerId`)
 ) ENGINE=MyISAM;
+
+DROP TABLE IF EXISTS `tiki_scheduler`;
+CREATE TABLE `tiki_scheduler` (
+  `id` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
+  `name` VARCHAR(255),
+  `description` VARCHAR(255),
+  `task`VARCHAR(255),
+  `params` VARCHAR(255),
+  `run_time` VARCHAR(255),
+  `status` VARCHAR(10),
+  `re_run` TINYINT
+) ENGINE=MyISAM;
+
+DROP TABLE IF EXISTS `tiki_scheduler_run`;
+CREATE TABLE `tiki_scheduler_run` (
+  `id` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
+  `scheduler_id` INT NOT NULL,
+  `start_time` INT(14),
+  `end_time` INT(14),
+  `status` VARCHAR(10),
+  `output` TEXT
+) ENGINE=MyISAM;

------------------------------------------------------------------------
r61130 | drsassafras | 2017-01-30 01:58:20 -0400 (seg, 30 jan 2017) | 1 line

[ENH][FIX] Moved wiki dumps to Tools page; separated file dumps and database dumps for clarity; added option to delete file dumps; fixed inability to create multiple database dumps; moved wiki dumps to storage directory (part 1)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 61129)
+++ tiki.sql	(revision 61130)
@@ -1349,7 +1349,6 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Wiki','tiki-index.php',200,'feature_wiki','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Wiki Home','tiki-index.php',202,'feature_wiki','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Last Changes','tiki-lastchanges.php',205,'feature_wiki,feature_lastChanges','tiki_p_view','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Dump','dump/new.tar',210,'feature_wiki,feature_dump','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Rankings','tiki-wiki_rankings.php',215,'feature_wiki,feature_wiki_rankings','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Pages','tiki-listpages.php?cookietab=1#tab1',220,'feature_wiki,feature_listPages','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Create a Wiki Page','tiki-listpages.php?cookietab=2#tab2',222,'feature_wiki,feature_listPages','tiki_p_view,tiki_p_edit','',0);

------------------------------------------------------------------------
r60539 | montefuscolo | 2016-12-06 10:17:32 -0400 (ter, 06 dez 2016) | 1 line

[DB] increase lenght for comment field to 255

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 60538)
+++ tiki.sql	(revision 60539)
@@ -1053,7 +1053,7 @@
   `description` varchar(200) default NULL,
   `user` varchar(200) not null default '',
   `ip` varchar(39) default NULL,
-  `comment` varchar(200) default NULL,
+  `comment` varchar(255) default NULL,
   `data` longblob,
   `type` varchar(50) default NULL,
   `is_html` TINYINT(1) NOT NULL DEFAULT 0,
@@ -1657,7 +1657,7 @@
   `data` mediumtext,
   `description` varchar(200) default NULL,
   `lastModif` int(14) default NULL,
-  `comment` varchar(200) default NULL,
+  `comment` varchar(255) default NULL,
   `version` int(8) NOT NULL default '0',
   `version_minor` int(8) NOT NULL default '0',
   `user` varchar(200) default '',

------------------------------------------------------------------------
r60231 | jonnybradley | 2016-11-10 10:18:06 -0400 (qui, 10 nov 2016) | 1 line

[MRG] Automatic merge, branches/16.x 60200 to 60224

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 60230)
+++ tiki.sql	(revision 60231)
@@ -2715,7 +2715,6 @@
   `userId` int(8) NOT NULL auto_increment,
   `email` varchar(200) default NULL,
   `login` varchar(200) NOT NULL default '',
-  `password` varchar(30) default '',
   `provpass` varchar(30) default NULL,
   `default_group` varchar(255),
   `lastLogin` int(14) default NULL,

------------------------------------------------------------------------
r60175 | drsassafras | 2016-11-06 12:36:54 -0400 (dom, 06 nov 2016) | 1 line

[ENH] Update installer to new login code.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 60174)
+++ tiki.sql	(revision 60175)
@@ -2742,7 +2742,7 @@
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 -- Administrator account
-INSERT INTO users_users(email,login,password,hash,created,registrationDate) VALUES ('','admin','admin',md5('adminadmin'),UNIX_TIMESTAMP(),UNIX_TIMESTAMP());
+INSERT INTO users_users(email,login,hash,created,registrationDate) VALUES ('','admin','$2y$10$nzMJ64PLyjKqgKvqSvO/S.n8jtgAiRzmNMYPLq/TQVLfYIFa0xqkG',UNIX_TIMESTAMP(),UNIX_TIMESTAMP());
 INSERT INTO tiki_user_preferences (user,`prefName`,value) VALUES ('admin','realName','System Administrator');
 INSERT INTO users_usergroups (`userId`, `groupName`) VALUES(1,'Admins');
 INSERT INTO users_grouppermissions (`groupName`, `permName`) VALUES ('Admins','tiki_p_admin');

------------------------------------------------------------------------
r59707 | jonnybradley | 2016-09-15 06:57:02 -0400 (qui, 15 set 2016) | 1 line

[FIX] search: Increase the federated search maximum index name length to 255, the maximum supported by elasticsearch

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 59706)
+++ tiki.sql	(revision 59707)
@@ -687,7 +687,7 @@
   `extwikiId` int(12) NOT NULL auto_increment,
   `name` varchar(200) NOT NULL default '',
   `extwiki` varchar(255) default NULL,
-  `indexname` varchar(20) default NULL,
+  `indexname` varchar(255) default NULL,
   `groups` varchar(1024) default NULL,
   PRIMARY KEY (`extwikiId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;

------------------------------------------------------------------------
r59664 | jonnybradley | 2016-09-10 12:25:02 -0400 (sÃ¡b, 10 set 2016) | 2 lines

[FIX] tiki.sql: Add missing columns in tiki_extwiki in new installs but included in upgrades in 20140807_federated_search_tiki.sql
(detected by \EditLib_ParseToWiki_LinkTest::testExternalWiki, woo!)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 59663)
+++ tiki.sql	(revision 59664)
@@ -687,6 +687,8 @@
   `extwikiId` int(12) NOT NULL auto_increment,
   `name` varchar(200) NOT NULL default '',
   `extwiki` varchar(255) default NULL,
+  `indexname` varchar(20) default NULL,
+  `groups` varchar(1024) default NULL,
   PRIMARY KEY (`extwikiId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r59141 | yonixxx | 2016-07-09 15:48:34 -0400 (sÃ¡b, 09 jul 2016) | 1 line

[FIX] Reverted change from commit 58902 that was breaking the install process - Admin user wasn't created.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 59140)
+++ tiki.sql	(revision 59141)
@@ -2713,6 +2713,7 @@
   `userId` int(8) NOT NULL auto_increment,
   `email` varchar(200) default NULL,
   `login` varchar(200) NOT NULL default '',
+  `password` varchar(30) default '',
   `provpass` varchar(30) default NULL,
   `default_group` varchar(255),
   `lastLogin` int(14) default NULL,

------------------------------------------------------------------------
r58902 | drsassafras | 2016-06-14 05:38:38 -0400 (ter, 14 jun 2016) | 1 line

[SEC][DB][REM][ENH] Removal of code related to two already disabled features, open passwords & password challenge.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 58901)
+++ tiki.sql	(revision 58902)
@@ -2713,13 +2713,11 @@
   `userId` int(8) NOT NULL auto_increment,
   `email` varchar(200) default NULL,
   `login` varchar(200) NOT NULL default '',
-  `password` varchar(30) default '',
   `provpass` varchar(30) default NULL,
   `default_group` varchar(255),
   `lastLogin` int(14) default NULL,
   `currentLogin` int(14) default NULL,
   `registrationDate` int(14) default NULL,
-  `challenge` varchar(32) default NULL,
   `pass_confirm` int(14) default NULL,
   `email_confirm` int(14) default NULL,
   `hash` varchar(60) default NULL,

------------------------------------------------------------------------
r58836 | jonnybradley | 2016-06-08 11:27:23 -0400 (qua, 08 jun 2016) | 5 lines

[MRG] Automatic merge, branches/15.x 58823 to 58835
Conflicts occurred in:
	lib/jquery_tiki/tiki-jquery.js          fixed
	lib/wiki-plugins/wikiplugin_quote.php   totally different, not merged, sorry


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 58835)
+++ tiki.sql	(revision 58836)
@@ -1467,6 +1467,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Mail Notifications','tiki-admin_notifications.php',1120,'','tiki_p_admin_notifications','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Search Stats','tiki-search_stats.php',1125,'feature_search_stats','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Theme Control','tiki-theme_control.php',1130,'feature_theme_control','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tokens','tiki-admin_tokens.php',1132,'auth_token_access','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Toolbars','tiki-admin_toolbars.php',1135,'','tiki_p_admin_toolbars','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Transitions','tiki-admin_transitions.php',1140,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Categories','tiki-admin_categories.php',1145,'feature_categories','tiki_p_admin_categories','',0);

------------------------------------------------------------------------
r58761 | jonnybradley | 2016-06-01 14:48:35 -0400 (qua, 01 jun 2016) | 1 line

[MRG] Automatic merge, branches/15.x 58756 to 58760

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 58760)
+++ tiki.sql	(revision 58761)
@@ -256,8 +256,8 @@
   `ip3` char(3) default NULL,
   `ip4` char(3) default NULL,
   `user` varchar(200) default '',
-  `date_from` timestamp NOT NULL,
-  `date_to` timestamp NOT NULL,
+  `date_from` timestamp NULL,
+  `date_to` timestamp NULL,
   `use_dates` char(1) default NULL,
   `created` int(14) default NULL,
   `message` text,
@@ -2387,7 +2387,7 @@
 CREATE TABLE `tiki_user_login_cookies` (
     `userId` INT NOT NULL,
     `secret` CHAR(64) NOT NULL,
-    `expiration` TIMESTAMP NOT NULL,
+    `expiration` TIMESTAMP NULL,
     PRIMARY KEY (`userId`, `secret`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -3362,8 +3362,8 @@
     `amount_paid` DECIMAL(7,2) NOT NULL DEFAULT 0.0,
     `currency` CHAR(3) NOT NULL,
     `request_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
-    `due_date` TIMESTAMP NOT NULL,
-	`authorized_until` TIMESTAMP NULL,
+    `due_date` TIMESTAMP NULL,
+    `authorized_until` TIMESTAMP NULL,
     `cancel_date` TIMESTAMP NULL,
     `description` VARCHAR(100) NOT NULL,
     `actions` TEXT,
@@ -3610,8 +3610,8 @@
   `bookId` int(10) unsigned NOT NULL AUTO_INCREMENT,
   `bookName` varchar(255) NOT NULL,
   `bookClosed` enum('y','n') NOT NULL DEFAULT 'n',
-  `bookStartDate` date NOT NULL,
-  `bookEndDate` date NOT NULL,
+  `bookStartDate` date NULL,
+  `bookEndDate` date NULL,
   `bookCurrency` varchar(3) NOT NULL DEFAULT 'EUR',
   `bookCurrencyPos` int(11) NOT NULL,
   `bookDecimals` int(11) NOT NULL DEFAULT '2',
@@ -3640,7 +3640,7 @@
 CREATE TABLE `tiki_acct_journal` (
   `journalBookId` int(10) unsigned NOT NULL,
   `journalId` int(10) unsigned NOT NULL AUTO_INCREMENT,
-  `journalDate` date NOT NULL DEFAULT '0000-00-00',
+  `journalDate` date NULL,
   `journalDescription` varchar(255) NOT NULL,
   `journalCancelled` int(1) NOT NULL DEFAULT '0',
   `journalTs` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
@@ -3651,7 +3651,7 @@
 CREATE TABLE `tiki_acct_stack` (
   `stackBookId` int(10) unsigned NOT NULL,
   `stackId` int(10) unsigned NOT NULL AUTO_INCREMENT,
-  `stackDate` date NOT NULL DEFAULT '0000-00-00',
+  `stackDate` date NULL,
   `stackDescription` varchar(255) NOT NULL,
   `stackTs` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
   PRIMARY KEY (`stackId`)
@@ -3673,8 +3673,8 @@
   `statementBookId` int(10) unsigned NOT NULL,
   `statementAccountId` int(10) unsigned NOT NULL DEFAULT '0',
   `statementId` int(10) unsigned NOT NULL AUTO_INCREMENT,
-  `statementBookingDate` date NOT NULL,
-  `statementValueDate` date NOT NULL,
+  `statementBookingDate` date NULL,
+  `statementValueDate` date NULL,
   `statementBookingText` varchar(255) NOT NULL,
   `statementReason` varchar(255) NOT NULL,
   `statementCounterpart` varchar(63) NOT NULL,

------------------------------------------------------------------------
r58740 | jonnybradley | 2016-05-30 07:39:15 -0400 (seg, 30 mai 2016) | 1 line

[MRG] Automatic merge, branches/15.x 58712 to 58739

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 58739)
+++ tiki.sql	(revision 58740)
@@ -1322,6 +1322,8 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tags','tiki-browse_freetags.php',27,'feature_freetags','tiki_p_view_freetags','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Calendar','tiki-calendar.php',35,'feature_calendar','tiki_p_view_calendar','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tiki Calendar','tiki-action_calendar.php',37,'feature_action_calendar','tiki_p_view_tiki_calendar','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Payments','tiki-payment.php',39,'payment_feature','tiki_p_payment_view','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Payments','tiki-payment.php',39,'payment_feature','tiki_p_payment_request','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','(debug)','javascript:toggle(\'debugconsole\')',40,'feature_debug_console','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','User Wizard','tiki-wizard_user.php',45,'feature_wizard_user','','Registered',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','My Account','tiki-my_tiki.php',50,'feature_mytiki','','Registered',0);

------------------------------------------------------------------------
r58641 | jonnybradley | 2016-05-19 12:20:17 -0400 (qui, 19 mai 2016) | 1 line

[MRG] Automatic merge, branches/15.x 58626 to 58640

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 58640)
+++ tiki.sql	(revision 58641)
@@ -2970,6 +2970,9 @@
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Created', 'category', 'y');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Updated', 'category', 'y');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Removed', 'category', 'y');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Created', 'calendar event', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Updated', 'calendar event', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Removed', 'calendar event', 'n');
 
 DROP TABLE IF EXISTS `tiki_freetags`;
 CREATE TABLE `tiki_freetags` (

------------------------------------------------------------------------
r58078 | jonnybradley | 2016-03-26 10:16:24 -0400 (sÃ¡b, 26 mar 2016) | 1 line

[MRG] Automatic merge, branches/15.x 58067 to 58077

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 58077)
+++ tiki.sql	(revision 58078)
@@ -1347,7 +1347,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Last Changes','tiki-lastchanges.php',205,'feature_wiki,feature_lastChanges','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Dump','dump/new.tar',210,'feature_wiki,feature_dump','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Rankings','tiki-wiki_rankings.php',215,'feature_wiki,feature_wiki_rankings','tiki_p_view','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Pages','tiki-listpages.php',220,'feature_wiki,feature_listPages','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Pages','tiki-listpages.php?cookietab=1#tab1',220,'feature_wiki,feature_listPages','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Create a Wiki Page','tiki-listpages.php?cookietab=2#tab2',222,'feature_wiki,feature_listPages','tiki_p_view,tiki_p_edit','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Orphan Pages','tiki-orphan_pages.php',225,'feature_wiki,feature_listorphanPages','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Sandbox','tiki-editpage.php?page=sandbox',230,'feature_wiki,feature_sandbox','tiki_p_view','',0);

------------------------------------------------------------------------
r57666 | jonnybradley | 2016-02-29 07:23:37 -0400 (seg, 29 fev 2016) | 4 lines

[MRG] Automatic merge, branches/15.x 57626 to 57665
Conflict fixed in
    lib/setup/twversion.class.php


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 57665)
+++ tiki.sql	(revision 57666)
@@ -3880,4 +3880,4 @@
 	`format_descriptor` TEXT,
 	`filter_descriptor` TEXT,
 	KEY `tabular_tracker_ix` (`trackerId`)
-);
+) ENGINE=MyISAM;

------------------------------------------------------------------------
r57379 | jonnybradley | 2016-02-01 12:45:28 -0400 (seg, 01 fev 2016) | 1 line

[KIL] map server: Remove ancient map server feature (feature_maps) and associated libraries etc

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 57378)
+++ tiki.sql	(revision 57379)
@@ -1402,9 +1402,6 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','FAQs','tiki-list_faqs.php',650,'feature_faqs','tiki_p_view_faqs','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List FAQs','tiki-list_faqs.php',665,'feature_faqs','tiki_p_view_faqs','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin FAQs','tiki-list_faqs.php',660,'feature_faqs','tiki_p_admin_faqs','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Maps','tiki-map.php',700,'feature_maps','tiki_p_map_view','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Mapfiles','tiki-map_edit.php',705,'feature_maps','tiki_p_map_view','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Layer Management','tiki-map_upload.php',710,'feature_maps','tiki_p_map_edit','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Quizzes','tiki-list_quizzes.php',750,'feature_quizzes','tiki_p_take_quiz','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Quizzes','tiki-list_quizzes.php',755,'feature_quizzes','tiki_p_take_quiz','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Quiz Stats','tiki-quiz_stats.php',760,'feature_quizzes','tiki_p_view_quiz_stats','',0);

------------------------------------------------------------------------
r57270 | jonnybradley | 2016-01-20 12:38:22 -0400 (qua, 20 jan 2016) | 1 line

[FIX] gmaps: Move left over menu tem

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 57269)
+++ tiki.sql	(revision 57270)
@@ -1321,7 +1321,6 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Categories','tiki-browse_categories.php',25,'feature_categories','tiki_p_view_category','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tags','tiki-browse_freetags.php',27,'feature_freetags','tiki_p_view_freetags','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Calendar','tiki-calendar.php',35,'feature_calendar','tiki_p_view_calendar','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Users Map','tiki-gmap_usermap.php',36,'feature_gmap','','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tiki Calendar','tiki-action_calendar.php',37,'feature_action_calendar','tiki_p_view_tiki_calendar','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','(debug)','javascript:toggle(\'debugconsole\')',40,'feature_debug_console','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','User Wizard','tiki-wizard_user.php',45,'feature_wizard_user','','Registered',0);

------------------------------------------------------------------------
r56898 | patrick-proulx | 2015-12-04 14:49:34 -0400 (sex, 04 dez 2015) | 2 lines

[FIX] Minor change to the install script for the recently updated scoring system


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 56897)
+++ tiki.sql	(revision 56898)
@@ -2807,8 +2807,8 @@
 	{"ruleId":"User logs in","recipientType":"user","recipient":"user","score":"1","validObjectIds":[""],"expiration":""}
 ]',''),
 ('tiki.user.view','[
-	{"ruleId":"See other user\'s profile","recipientType":"user","recipient":"user","score":"2","validObjectIds":[""],"expiration":"60"},
-	{"ruleId":"Have your profile seen","recipientType":"user","recipient":"object","score":"1","validObjectIds":[""],"expiration":"60"}
+	{"ruleId":"See other user\'s profile","recipientType":"user","recipient":"user","score":"2","validObjectIds":[""],"expiration":""},
+	{"ruleId":"Have your profile seen","recipientType":"user","recipient":"object","score":"1","validObjectIds":[""],"expiration":""}
 ]',''),
 ('tiki.user.friend','[
 	{"ruleId":"Make friends","recipientType":"user","recipient":"user","score":"10","validObjectIds":[""],"expiration":""}
@@ -2841,8 +2841,8 @@
 	{"ruleId":"Upload new image to gallery","recipientType":"user","recipient":"user","score":"6","validObjectIds":[""],"expiration":""}
 ]',''),
 ('tiki.image.view','[
-	{"ruleId":"See other user\'s image","recipientType":"user","recipient":"user","score":"3","validObjectIds":[""],"expiration":"60"},
-	{"ruleId":"Have your image seen","recipientType":"user","recipient":"owner","score":"1","validObjectIds":[""],"expiration":"60"}
+	{"ruleId":"See other user\'s image","recipientType":"user","recipient":"user","score":"3","validObjectIds":[""],"expiration":""},
+	{"ruleId":"Have your image seen","recipientType":"user","recipient":"owner","score":"1","validObjectIds":[""],"expiration":""}
 ]',''),
 ('tiki.blog.create','[
 	{"ruleId":"Create new blog","recipientType":"user","recipient":"user","score":"20","validObjectIds":[""],"expiration":""}

------------------------------------------------------------------------
r56896 | patrick-proulx | 2015-12-04 14:31:54 -0400 (sex, 04 dez 2015) | 2 lines

[FIX] Included the db install script updates for new scoring system (ref: r56883)


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 56895)
+++ tiki.sql	(revision 56896)
@@ -2731,13 +2731,11 @@
   `avatarData` longblob,
   `avatarLibName` varchar(200) default NULL,
   `avatarType` char(1) default NULL,
-  `score` int(11) NOT NULL default 0,
   `valid` varchar(32) default NULL,
   `unsuccessful_logins` int(14) default 0,
   `openid_url` varchar(255) default NULL,
   `waiting` char(1) default NULL,
   PRIMARY KEY (`userId`),
-  KEY `score` (score),
   UNIQUE KEY `login` (login),
   KEY `registrationDate` (`registrationDate`),
   KEY `openid_url` (openid_url)
@@ -2798,52 +2796,88 @@
 
 DROP TABLE IF EXISTS `tiki_score`;
 CREATE TABLE `tiki_score` (
-  event varchar(40) NOT NULL default '',
-  score int(11) NOT NULL default '0',
-  expiration int(11) NOT NULL default '0',
-  validObjectIds text,
+  event varchar(255) NOT NULL default '',
+  data text,
+  reversalEvent varchar(255),
   PRIMARY KEY (`event`)
 ) ENGINE=MyISAM;
 
-INSERT INTO tiki_score (event, score, expiration) VALUES ('login',1,0);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('login_remain',2,60);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('profile_fill',10,0);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('profile_see',2,0);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('profile_is_seen',1,0);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('friend_new',10,0);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('message_receive',1,0);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('message_send',2,0);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('article_read',2,0);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('article_comment',5,0);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('article_new',20,0);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('article_is_read',1,0);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('article_is_commented',2,0);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('fgallery_new',10,0);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('fgallery_new_file',10,0);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('fgallery_download',5,0);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('fgallery_is_downloaded',5,0);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('igallery_new',10,0);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('igallery_new_img',6,0);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('igallery_see_img',3,0);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('igallery_img_seen',1,0);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('blog_new',20,0);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('blog_post',5,0);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('blog_read',2,0);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('blog_comment',2,0);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('blog_is_read',3,0);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('blog_is_commented',3,0);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('wiki_new',10,0);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('wiki_edit',5,0);
-INSERT INTO tiki_score (event, score, expiration) VALUES ('wiki_attach_file',3,0);
+INSERT INTO `tiki_score` VALUES
+('tiki.user.login','[
+	{"ruleId":"User logs in","recipientType":"user","recipient":"user","score":"1","validObjectIds":[""],"expiration":""}
+]',''),
+('tiki.user.view','[
+	{"ruleId":"See other user\'s profile","recipientType":"user","recipient":"user","score":"2","validObjectIds":[""],"expiration":"60"},
+	{"ruleId":"Have your profile seen","recipientType":"user","recipient":"object","score":"1","validObjectIds":[""],"expiration":"60"}
+]',''),
+('tiki.user.friend','[
+	{"ruleId":"Make friends","recipientType":"user","recipient":"user","score":"10","validObjectIds":[""],"expiration":""}
+]',''),
+('tiki.user.message','[
+	{"ruleId":"Send message","recipientType":"user","recipient":"user","score":"2","validObjectIds":[""],"expiration":""},
+	{"ruleId":"Receive message","recipientType":"user","recipient":"object","score":"1","validObjectIds":[""],"expiration":""}
+]',''),
+('tiki.article.create','[
+	{"ruleId":"Publish new article","recipientType":"user","recipient":"user","score":"20","validObjectIds":[""],"expiration":""}
+]',''),
+('tiki.article.view','[
+	{"ruleId":"Read an article","recipientType":"user","recipient":"user","score":"2","validObjectIds":[""],"expiration":""},
+	{"ruleId":"Have your article read","recipientType":"user","recipient":"author","score":"1","validObjectIds":[""],"expiration":""}
+]',''),
+('tiki.filegallery.create','[
+	{"ruleId":"Create new file gallery","recipientType":"user","recipient":"user","score":"10","validObjectIds":[""],"expiration":""}
+]',''),
+('tiki.file.create','[
+	{"ruleId":"Upload new file to gallery","recipientType":"user","recipient":"user","score":"10","validObjectIds":[""],"expiration":""}
+]',''),
+('tiki.file.download','[
+	{"ruleId":"Download other user\'s file","recipientType":"user","recipient":"user","score":"5","validObjectIds":[""],"expiration":""},
+	{"ruleId":"Have your file downloaded","recipientType":"user","recipient":"owner","score":"5","validObjectIds":[""],"expiration":""}
+]',''),
+('tiki.imagegallery.create','[
+	{"ruleId":"Create new image gallery","recipientType":"user","recipient":"user","score":"10","validObjectIds":[""],"expiration":""}
+]',''),
+('tiki.image.create','[
+	{"ruleId":"Upload new image to gallery","recipientType":"user","recipient":"user","score":"6","validObjectIds":[""],"expiration":""}
+]',''),
+('tiki.image.view','[
+	{"ruleId":"See other user\'s image","recipientType":"user","recipient":"user","score":"3","validObjectIds":[""],"expiration":"60"},
+	{"ruleId":"Have your image seen","recipientType":"user","recipient":"owner","score":"1","validObjectIds":[""],"expiration":"60"}
+]',''),
+('tiki.blog.create','[
+	{"ruleId":"Create new blog","recipientType":"user","recipient":"user","score":"20","validObjectIds":[""],"expiration":""}
+]',''),
+('tiki.blogpost.create','[
+	{"ruleId":"Post in a blog","recipientType":"user","recipient":"user","score":"5","validObjectIds":[""],"expiration":""}
+]',''),
+('tiki.blog.view','[
+	{"ruleId":"Read other user\'s blog","recipientType":"user","recipient":"user","score":"2","validObjectIds":[""],"expiration":""},
+	{"ruleId":"Have your blog read","recipientType":"user","recipient":"author","score":"3","validObjectIds":[""],"expiration":""}
+]',''),
+('tiki.wiki.create','[
+	{"ruleId":"Create a wiki page","recipientType":"user","recipient":"user","score":"10","validObjectIds":[""],"expiration":""}
+]',''),
+('tiki.wiki.update','[
+	{"ruleId":"Edit an existing wiki page","recipientType":"user","recipient":"user","score":"5","validObjectIds":[""],"expiration":""}
+]',''),
+('tiki.wiki.attachfile','[
+	{"ruleId":"Attach file to wiki page","recipientType":"user","recipient":"user","score":"3","validObjectIds":[""],"expiration":""}
+]','');
 
-DROP TABLE IF EXISTS `tiki_users_score`;
-CREATE TABLE `tiki_users_score` (
-  `user` char(200) NOT NULL default '',
-  `event_id` char(200) NOT NULL default '',
-  `expire` int(14) NOT NULL default '0',
-  `tstamp` timestamp NOT NULL,
-  PRIMARY KEY (`user`(110),`event_id`(110)),
-  KEY `user` (user(110),event_id(110),expire)
+DROP TABLE IF EXISTS `tiki_object_scores`;
+CREATE TABLE `tiki_object_scores` (
+  `id` INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
+  `triggerObjectType` VARCHAR(255) NOT NULL,
+  `triggerObjectId` VARCHAR(255) NOT NULL,
+  `triggerUser` VARCHAR(255) NOT NULL,
+  `triggerEvent` VARCHAR(255) NOT NULL,
+  `ruleId` VARCHAR(255) NOT NULL,
+  `recipientObjectType` VARCHAR(255) NOT NULL,
+  `recipientObjectId` VARCHAR(255) NOT NULL,
+  `pointsAssigned` INT NOT NULL,
+  `pointsBalance` INT NOT NULL,
+  `date` INT NOT NULL,
+  `reversalOf` INT UNSIGNED
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_file_handlers`;

------------------------------------------------------------------------
r56888 | nkoth | 2015-12-03 20:40:34 -0400 (qui, 03 dez 2015) | 2 lines

[NEW] Allow users to login to Tiki using temporary user account via a token with the perms of specified groups (without needing permanent user account)


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 56887)
+++ tiki.sql	(revision 56888)
@@ -3306,6 +3306,8 @@
     `email` varchar(255) NOT NULL,
     `parameters` VARCHAR(255),
     `groups` TEXT,
+    `createUser` CHAR(1) DEFAULT 'n',
+    `userPrefix` VARCHAR(200) DEFAULT '_token',
     PRIMARY KEY( `tokenId` ),
     KEY `tiki_auth_tokens_token` (`token`)
 ) ENGINE=MyISAM;

------------------------------------------------------------------------
r56361 | jonnybradley | 2015-09-29 09:51:06 -0400 (ter, 29 set 2015) | 1 line

[MRG] Automatic merge, branches/14.x 56357 to 56360

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 56360)
+++ tiki.sql	(revision 56361)
@@ -1062,7 +1062,7 @@
 
 DROP TABLE IF EXISTS `tiki_hotwords`;
 CREATE TABLE `tiki_hotwords` (
-  `word` varchar(40) NOT NULL default '',
+  `word` varchar(255) NOT NULL default '',
   `url` varchar(255) NOT NULL default '',
   PRIMARY KEY (`word`)
 ) ENGINE=MyISAM;

------------------------------------------------------------------------
r56127 | patrick-proulx | 2015-09-02 08:46:23 -0400 (qua, 02 set 2015) | 2 lines

[FIX] Added the character length for preference names to the tiki.sql as well (update script was added in r56121)


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 56126)
+++ tiki.sql	(revision 56127)
@@ -1725,7 +1725,7 @@
 
 DROP TABLE IF EXISTS `tiki_preferences`;
 CREATE TABLE `tiki_preferences` (
-  `name` varchar(40) NOT NULL default '',
+  `name` varchar(255) NOT NULL default '',
   `value` text,
   PRIMARY KEY (`name`)
 ) ENGINE=MyISAM;

------------------------------------------------------------------------
r55962 | jonnybradley | 2015-07-31 06:11:49 -0400 (sex, 31 jul 2015) | 1 line

[MRG] Automatic merge, branches/14.x 55926 to 55961

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 55961)
+++ tiki.sql	(revision 55962)
@@ -1414,6 +1414,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Sheets','tiki-sheets.php',782,'feature_sheet','tiki_p_view_sheet','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Trackers','tiki-list_trackers.php',800,'feature_trackers','tiki_p_list_trackers','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Trackers','tiki-list_trackers.php',805,'feature_trackers','tiki_p_list_trackers','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Manage Tabular Formats','tiki-tabular-manage',810,'tracker_tabular_enabled','tiki_p_tabular_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s', 'Accounting', 'tiki-accounting_books.php', 830, 'feature_accounting', 'tiki_p_acct_view', '', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o', 'Accounting books', 'tiki-accounting_books.php', 835, 'feature_accounting', 'tiki_p_acct_view', '', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Surveys','tiki-list_surveys.php',850,'feature_surveys','tiki_p_take_survey','',0);

------------------------------------------------------------------------
r55235 | lindonb | 2015-04-27 00:29:24 -0400 (seg, 27 abr 2015) | 1 line

[MRG] Automatic merge, branches/14.x 55218 to 55234

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 55234)
+++ tiki.sql	(revision 55235)
@@ -1462,6 +1462,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Hotwords','tiki-admin_hotwords.php',1095,'feature_hotwords','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Edit languages','tiki-edit_languages.php',1098,'lang_use_db','tiki_p_edit_languages','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','External Feeds','tiki-admin_rssmodules.php',1100,'','tiki_p_admin_rssmodules','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','External Wikis','tiki-admin_external_wikis.php',1102,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Menus','tiki-admin_menus.php',1105,'','tiki_p_edit_menu','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Polls','tiki-admin_polls.php',1110,'feature_polls','tiki_p_admin_polls','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Mail Notifications','tiki-admin_notifications.php',1120,'','tiki_p_admin_notifications','',0);

------------------------------------------------------------------------
r55081 | nkoth | 2015-04-14 19:45:18 -0400 (ter, 14 abr 2015) | 1 line

[MRG] Automatic merge, branches/14.x 55063 to 55078

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 55080)
+++ tiki.sql	(revision 55081)
@@ -3038,7 +3038,7 @@
   `profile` VARCHAR(100) NOT NULL,
   `object` VARCHAR(150) NOT NULL,
   `type` VARCHAR(20) NOT NULL,
-  `value` VARCHAR(50) NOT NULL,
+  `value` VARCHAR(160) NOT NULL,
   `named` ENUM('y','n') NOT NULL,
   `creation_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
   PRIMARY KEY ( `domain`, `profile`, `object` ),

------------------------------------------------------------------------
r54331 | jonnybradley | 2015-03-11 09:01:24 -0400 (qua, 11 mar 2015) | 1 line

[MRG] Automatic merge, branches/14.x 54316 to 54330

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 54330)
+++ tiki.sql	(revision 54331)
@@ -1325,8 +1325,8 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tiki Calendar','tiki-action_calendar.php',37,'feature_action_calendar','tiki_p_view_tiki_calendar','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','(debug)','javascript:toggle(\'debugconsole\')',40,'feature_debug_console','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','User Wizard','tiki-wizard_user.php',45,'feature_wizard_user','','Registered',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','MyTiki','tiki-my_tiki.php',50,'feature_mytiki','','Registered',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','MyTiki Home','tiki-my_tiki.php',51,'feature_mytiki','','Registered',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','My Account','tiki-my_tiki.php',50,'feature_mytiki','','Registered',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','My Account Home','tiki-my_tiki.php',51,'feature_mytiki','','Registered',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Preferences','tiki-user_preferences.php',55,'feature_mytiki,feature_userPreferences','','Registered',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Messages','messu-mailbox.php',60,'feature_mytiki,feature_messages','tiki_p_messages','Registered',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tasks','tiki-user_tasks.php',65,'feature_mytiki,feature_tasks','tiki_p_tasks','Registered',0);
@@ -3210,7 +3210,7 @@
 UPDATE tiki_menu_options SET icon = 'messages48x48' WHERE name = 'Newsletters';
 UPDATE tiki_menu_options SET icon = 'vcard48x48' WHERE name = 'Tags';
 UPDATE tiki_menu_options SET icon = 'date48x48' WHERE name = 'Calendar' AND url = 'tiki-calendar.php';
-UPDATE tiki_menu_options SET icon = 'userfiles48x48' WHERE name = 'MyTiki';
+UPDATE tiki_menu_options SET icon = 'userfiles48x48' WHERE name = 'My Account';
 UPDATE tiki_menu_options SET icon = 'home48x48' WHERE name = 'Home';
 UPDATE tiki_menu_options SET icon = 'categories48x48' WHERE name = 'Categories';
 UPDATE tiki_menu_options SET icon = 'accounting48x48' WHERE name = 'Accounting';

------------------------------------------------------------------------
r54317 | jonnybradley | 2015-03-10 13:45:58 -0400 (ter, 10 mar 2015) | 1 line

[MRG] Automatic merge, branches/14.x 54308 to 54316

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 54316)
+++ tiki.sql	(revision 54317)
@@ -1319,7 +1319,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Contact Us','tiki-contact.php',20,'feature_contact,feature_messages','','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Stats','tiki-stats.php',23,'feature_stats','tiki_p_view_stats','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Categories','tiki-browse_categories.php',25,'feature_categories','tiki_p_view_category','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Freetags','tiki-browse_freetags.php',27,'feature_freetags','tiki_p_view_freetags','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tags','tiki-browse_freetags.php',27,'feature_freetags','tiki_p_view_freetags','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Calendar','tiki-calendar.php',35,'feature_calendar','tiki_p_view_calendar','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Users Map','tiki-gmap_usermap.php',36,'feature_gmap','','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tiki Calendar','tiki-action_calendar.php',37,'feature_action_calendar','tiki_p_view_tiki_calendar','',0);
@@ -3208,7 +3208,7 @@
 UPDATE tiki_menu_options SET icon = 'stock_dialog_question48x48' WHERE name = 'FAQs';
 UPDATE tiki_menu_options SET icon = 'maps48x48' WHERE name = 'Maps';
 UPDATE tiki_menu_options SET icon = 'messages48x48' WHERE name = 'Newsletters';
-UPDATE tiki_menu_options SET icon = 'vcard48x48' WHERE name = 'Freetags';
+UPDATE tiki_menu_options SET icon = 'vcard48x48' WHERE name = 'Tags';
 UPDATE tiki_menu_options SET icon = 'date48x48' WHERE name = 'Calendar' AND url = 'tiki-calendar.php';
 UPDATE tiki_menu_options SET icon = 'userfiles48x48' WHERE name = 'MyTiki';
 UPDATE tiki_menu_options SET icon = 'home48x48' WHERE name = 'Home';

------------------------------------------------------------------------
r53750 | patrick-proulx | 2015-02-03 15:16:09 -0400 (ter, 03 fev 2015) | 3 lines

[ENH] Add the ability to assign a class to a Tiki menu option



Index: tiki.sql
===================================================================
--- tiki.sql	(revision 53749)
+++ tiki.sql	(revision 53750)
@@ -1307,6 +1307,7 @@
   `groupname` text default NULL,
   `userlevel` int(4) default 0,
   `icon` varchar(200),
+  `class` text default NULL,
   PRIMARY KEY (`optionId`),
   UNIQUE KEY `uniq_menu` (`menuId`,`name`(30),`url`(50),`position`,`section`(60),`perm`(50),`groupname`(50))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;

------------------------------------------------------------------------
r53446 | lphuberdeau | 2015-01-09 14:21:23 -0400 (sex, 09 jan 2015) | 1 line

[MOD] Adding UI components to select available filters on tabular

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 53445)
+++ tiki.sql	(revision 53446)
@@ -3843,5 +3843,6 @@
 	`trackerId` INT NOT NULL,
 	`name` VARCHAR(30) NOT NULL,
 	`format_descriptor` TEXT,
+	`filter_descriptor` TEXT,
 	KEY `tabular_tracker_ix` (`trackerId`)
 );

------------------------------------------------------------------------
r53190 | xavidp | 2014-11-25 04:23:12 -0400 (ter, 25 nov 2014) | 1 line

[MOD]Renaming menu option 'Configuration' into 'Settings', and 'Configuration Panels' (or just 'Panels') into 'Control Panels', as discussed in the devel list and decided on the last webinar. Re: http://dev.tiki.org/Tiki14#Renaming_of_Admin_X 

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 53189)
+++ tiki.sql	(revision 53190)
@@ -1425,30 +1425,30 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_list_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Send Newsletters','tiki-send_newsletters.php',905,'feature_newsletters','tiki_p_send_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Newsletters','tiki-admin_newsletters.php',910,'feature_newsletters','tiki_p_admin_newsletters','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_admin_categories','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_admin_banners','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_edit_templates','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_edit_cookies','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_admin_dynamic','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_admin_mailin','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_edit_content_templates','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_edit_html_pages','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_view_referer_stats','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_admin_shoutbox','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_live_support_admin','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','user_is_operator','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'feature_integrator','tiki_p_admin_integrator','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'feature_edit_templates','tiki_p_edit_templates','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'feature_view_tpl','tiki_p_edit_templates','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'feature_editcss','tiki_p_create_css','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_admin_contribution','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_admin_users','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_admin_toolbars','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_edit_menu','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_clean_cache','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_admin_modules','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o',' Panels','tiki-admin.php',1051,'','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Settings','tiki-admin.php',1050,'','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Settings','tiki-admin.php',1050,'','tiki_p_admin_categories','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Settings','tiki-admin.php',1050,'','tiki_p_admin_banners','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Settings','tiki-admin.php',1050,'','tiki_p_edit_templates','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Settings','tiki-admin.php',1050,'','tiki_p_edit_cookies','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Settings','tiki-admin.php',1050,'','tiki_p_admin_dynamic','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Settings','tiki-admin.php',1050,'','tiki_p_admin_mailin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Settings','tiki-admin.php',1050,'','tiki_p_edit_content_templates','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Settings','tiki-admin.php',1050,'','tiki_p_edit_html_pages','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Settings','tiki-admin.php',1050,'','tiki_p_view_referer_stats','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Settings','tiki-admin.php',1050,'','tiki_p_admin_shoutbox','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Settings','tiki-admin.php',1050,'','tiki_p_live_support_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Settings','tiki-admin.php',1050,'','user_is_operator','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Settings','tiki-admin.php',1050,'feature_integrator','tiki_p_admin_integrator','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Settings','tiki-admin.php',1050,'feature_edit_templates','tiki_p_edit_templates','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Settings','tiki-admin.php',1050,'feature_view_tpl','tiki_p_edit_templates','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Settings','tiki-admin.php',1050,'feature_editcss','tiki_p_create_css','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Settings','tiki-admin.php',1050,'','tiki_p_admin_contribution','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Settings','tiki-admin.php',1050,'','tiki_p_admin_users','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Settings','tiki-admin.php',1050,'','tiki_p_admin_toolbars','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Settings','tiki-admin.php',1050,'','tiki_p_edit_menu','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Settings','tiki-admin.php',1050,'','tiki_p_clean_cache','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Settings','tiki-admin.php',1050,'','tiki_p_admin_modules','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o',' Control Panels','tiki-admin.php',1051,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Live Support','tiki-live_support_admin.php',1055,'feature_live_support','tiki_p_live_support_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Live Support','tiki-live_support_admin.php',1055,'feature_live_support','user_is_operator','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Banning','tiki-admin_banning.php',1060,'feature_banning','tiki_p_admin_banning','',0);
@@ -3194,7 +3194,7 @@
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-list_file_gallery.php\\?galleryId=(\\d+)', 'file$1', 'file gallery', 'feature_file_galleries', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-user_information.php\\?userId=(\\d+)','user$1', '', '', 200);
 
-UPDATE tiki_menu_options SET icon = 'icon-configuration48x48' WHERE name = 'Configuration';
+UPDATE tiki_menu_options SET icon = 'icon-configuration48x48' WHERE name = 'Settings';
 UPDATE tiki_menu_options SET icon = 'xfce4-appfinder48x48' WHERE name = 'Search';
 UPDATE tiki_menu_options SET icon = 'wikipages48x48' WHERE name = 'Wiki';
 UPDATE tiki_menu_options SET icon = 'blogs48x48' WHERE name = 'Blogs';

------------------------------------------------------------------------
r53165 | lphuberdeau | 2014-11-20 13:31:13 -0400 (qui, 20 nov 2014) | 1 line

[NEW] Adding a primitive UI to use the tracker tabular feature, improvements to come

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 53164)
+++ tiki.sql	(revision 53165)
@@ -3837,3 +3837,11 @@
   PRIMARY KEY (`addon`,`version`,`profile`)
 ) ENGINE=MyISAM;
 
+DROP TABLE IF EXISTS `tiki_tabular_formats`;
+CREATE TABLE `tiki_tabular_formats` (
+	`tabularId` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
+	`trackerId` INT NOT NULL,
+	`name` VARCHAR(30) NOT NULL,
+	`format_descriptor` TEXT,
+	KEY `tabular_tracker_ix` (`trackerId`)
+);

------------------------------------------------------------------------
r53044 | xavidp | 2014-11-10 09:53:19 -0400 (seg, 10 nov 2014) | 1 line

[FIX]Missing parts to have consistent naming in installs and upgrades, and with the most agreeed wording. Option Panels is set with a space in purpose, in order to have it shown in the first position under "Configuration" section of the menu.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 53043)
+++ tiki.sql	(revision 53044)
@@ -1448,7 +1448,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_edit_menu','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_clean_cache','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_admin_modules','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Configuration Panels','tiki-admin.php',1051,'','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o',' Panels','tiki-admin.php',1051,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Live Support','tiki-live_support_admin.php',1055,'feature_live_support','tiki_p_live_support_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Live Support','tiki-live_support_admin.php',1055,'feature_live_support','user_is_operator','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Banning','tiki-admin_banning.php',1060,'feature_banning','tiki_p_admin_banning','',0);

------------------------------------------------------------------------
r53014 | xavidp | 2014-11-06 17:03:01 -0400 (qui, 06 nov 2014) | 1 line

[MOD]Renaming of 'Admin Home' (and equivalent) with 'Configuration Panels' (and equivalent), as dicussed in the devel list months ago and indicated with more people for the change (or indiferent) than against it as shown here: http://dev.tiki.org/Tiki14 . Thanks to those who voted and proposed alternative naming in time.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 53013)
+++ tiki.sql	(revision 53014)
@@ -1425,30 +1425,30 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_list_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Send Newsletters','tiki-send_newsletters.php',905,'feature_newsletters','tiki_p_send_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Newsletters','tiki-admin_newsletters.php',910,'feature_newsletters','tiki_p_admin_newsletters','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_categories','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_banners','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_templates','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_cookies','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_dynamic','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_mailin','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_content_templates','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_html_pages','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_view_referer_stats','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_shoutbox','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_live_support_admin','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','user_is_operator','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'feature_integrator','tiki_p_admin_integrator','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'feature_edit_templates','tiki_p_edit_templates','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'feature_view_tpl','tiki_p_edit_templates','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'feature_editcss','tiki_p_create_css','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_contribution','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_users','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_toolbars','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_menu','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_clean_cache','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_modules','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Home','tiki-admin.php',1051,'','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_admin_categories','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_admin_banners','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_edit_templates','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_edit_cookies','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_admin_dynamic','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_admin_mailin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_edit_content_templates','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_edit_html_pages','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_view_referer_stats','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_admin_shoutbox','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_live_support_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','user_is_operator','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'feature_integrator','tiki_p_admin_integrator','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'feature_edit_templates','tiki_p_edit_templates','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'feature_view_tpl','tiki_p_edit_templates','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'feature_editcss','tiki_p_create_css','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_admin_contribution','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_admin_users','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_admin_toolbars','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_edit_menu','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_clean_cache','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Configuration','tiki-admin.php',1050,'','tiki_p_admin_modules','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Configuration Panels','tiki-admin.php',1051,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Live Support','tiki-live_support_admin.php',1055,'feature_live_support','tiki_p_live_support_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Live Support','tiki-live_support_admin.php',1055,'feature_live_support','user_is_operator','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Banning','tiki-admin_banning.php',1060,'feature_banning','tiki_p_admin_banning','',0);
@@ -3194,7 +3194,7 @@
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-list_file_gallery.php\\?galleryId=(\\d+)', 'file$1', 'file gallery', 'feature_file_galleries', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-user_information.php\\?userId=(\\d+)','user$1', '', '', 200);
 
-UPDATE tiki_menu_options SET icon = 'icon-configuration48x48' WHERE name = 'Admin';
+UPDATE tiki_menu_options SET icon = 'icon-configuration48x48' WHERE name = 'Configuration';
 UPDATE tiki_menu_options SET icon = 'xfce4-appfinder48x48' WHERE name = 'Search';
 UPDATE tiki_menu_options SET icon = 'wikipages48x48' WHERE name = 'Wiki';
 UPDATE tiki_menu_options SET icon = 'blogs48x48' WHERE name = 'Blogs';

------------------------------------------------------------------------
r52519 | nkoth | 2014-09-15 01:02:29 -0400 (seg, 15 set 2014) | 2 lines

[NEW] The rest of the Tiki Addons feature (for now).


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 52518)
+++ tiki.sql	(revision 52519)
@@ -3827,3 +3827,13 @@
 	`user` VARCHAR(200) NOT NULL,
 	`groups` BLOB NOT NULL
 ) ENGINE=MyISAM;
+
+DROP TABLE IF EXISTS `tiki_addon_profiles`;
+CREATE TABLE `tiki_addon_profiles` (
+  `addon` VARCHAR(100),
+  `version` VARCHAR(100),
+  `profile` VARCHAR(100),
+  `install_date` TIMESTAMP,
+  PRIMARY KEY (`addon`,`version`,`profile`)
+) ENGINE=MyISAM;
+

------------------------------------------------------------------------
r51860 | lphuberdeau | 2014-07-05 13:00:36 -0400 (sÃ¡b, 05 jul 2014) | 1 line

[NEW] Allow to change the URL scheme for wiki pages, currently to replace spaces with underscores

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 51859)
+++ tiki.sql	(revision 51860)
@@ -1648,6 +1648,7 @@
 CREATE TABLE `tiki_pages` (
   `page_id` int(14) NOT NULL auto_increment,
   `pageName` varchar(160) NOT NULL default '',
+  `pageSlug` varchar(160) NULL,
   `hits` int(8) default NULL,
   `data` mediumtext,
   `description` varchar(200) default NULL,
@@ -1676,6 +1677,7 @@
   `keywords` TEXT,
   PRIMARY KEY (`page_id`),
   UNIQUE KEY `pageName` (`pageName`),
+  UNIQUE KEY `pageSlug` (`pageSlug`),
   KEY `data` (`data`(255)),
   KEY `pageRank` (`pageRank`),
   KEY `lastModif`(`lastModif`)

------------------------------------------------------------------------
r51737 | lphuberdeau | 2014-06-25 12:07:31 -0400 (qua, 25 jun 2014) | 1 line

[MRG] Automatic merge, branches/13.x 51732 to 51736

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 51736)
+++ tiki.sql	(revision 51737)
@@ -2140,8 +2140,8 @@
   `options` text,
   `type` char(1) default NULL,
   `position` int(5) default NULL,
-  `votes` int(10) default NULL,
-  `value` int(10) default NULL,
+  `votes` int(10) default 0,
+  `value` int(10) default 0,
   `average` decimal(4,2) default NULL,
   `mandatory` char(1) NOT NULL default 'n',
   `max_answers` int(5) NOT NULL default 0,

------------------------------------------------------------------------
r51204 | nkoth | 2014-05-09 18:59:53 -0400 (sex, 09 mai 2014) | 2 lines

[FIX] Missing db column needed in recent new feature


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 51203)
+++ tiki.sql	(revision 51204)
@@ -3373,6 +3373,7 @@
     `author` VARCHAR(255),
     `description` TEXT,
     `content` TEXT,
+    `categories` TEXT,
     KEY `tiki_rss_items_rss` (`rssId`),
     KEY `tiki_rss_items_item` (`rssId`, `guid`(200))
 ) ENGINE=MyISAM;

------------------------------------------------------------------------
r50991 | lphuberdeau | 2014-04-25 08:50:30 -0400 (sex, 25 abr 2014) | 1 line

[FIX] These were missing from the tiki.sql file?

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 50990)
+++ tiki.sql	(revision 50991)
@@ -3798,3 +3798,29 @@
   `version` int(8) NOT NULL default '0',
   `outputId` INT NOT NULL PRIMARY KEY AUTO_INCREMENT
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
+
+DROP TABLE IF EXISTS `tiki_goals`;
+CREATE TABLE `tiki_goals` (
+	`goalId` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
+	`name` VARCHAR(50) NOT NULL,
+	`type` VARCHAR(10) NOT NULL DEFAULT 'user',
+	`description` TEXT,
+	`enabled` INT NOT NULL DEFAULT 0,
+	`daySpan` INT NOT NULL DEFAULT 14,
+	`from` DATETIME,
+	`to` DATETIME,
+	`eligible` BLOB,
+	`conditions` BLOB,
+	`rewards` BLOB
+) ENGINE=MyISAM;
+
+DROP TABLE IF EXISTS `tiki_goal_events`;
+CREATE TABLE `tiki_goal_events` (
+	`eventId` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
+	`eventDate` INT NOT NULL,
+	`eventType` VARCHAR(50) NOT NULL,
+	`targetType` VARCHAR(50),
+	`targetObject` VARCHAR(255),
+	`user` VARCHAR(200) NOT NULL,
+	`groups` BLOB NOT NULL
+) ENGINE=MyISAM;

------------------------------------------------------------------------
r50981 | nkoth | 2014-04-24 15:35:49 -0400 (qui, 24 abr 2014) | 1 line

[KIL] Metrics Dashboard which was never used/too complicated experimental feature

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 50980)
+++ tiki.sql	(revision 50981)
@@ -3305,39 +3305,6 @@
     KEY `tiki_auth_tokens_token` (`token`)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS `metrics_assigned`;
-CREATE TABLE `metrics_assigned` (
-    `assigned_id` int(11) NOT NULL AUTO_INCREMENT,
-    `metric_id` int(11) NOT NULL,
-    `tab_id` int(11) NOT NULL,
-    PRIMARY KEY (`assigned_id`),
-    KEY `metric_id` (`metric_id`),
-    KEY `tab_id` (`tab_id`)
-) ENGINE=MyISAM;
-
-DROP TABLE IF EXISTS `metrics_metric`;
-CREATE TABLE `metrics_metric` (
-    `metric_id` int(11) NOT NULL AUTO_INCREMENT,
-    `metric_name` varchar(255) NOT NULL,
-    `metric_range` varchar(1) NOT NULL DEFAULT '+' COMMENT 'values: + (daily), @ (monthly&weekly), - (weekly)',
-    `metric_datatype` varchar(1) NOT NULL DEFAULT 'i' COMMENT 'values: i(nteger), %(percentage), f(loat), L(ist)',
-    `metric_lastupdate` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
-    `metric_query` text,
-    `metric_dsn` VARCHAR(200) NOT NULL DEFAULT 'local',
-    PRIMARY KEY (`metric_id`),
-    UNIQUE KEY `metric_name` (`metric_name`)
-) ENGINE=MyISAM;
-
-DROP TABLE IF EXISTS `metrics_tab`;
-CREATE TABLE `metrics_tab` (
-    `tab_id` int(11) NOT NULL AUTO_INCREMENT,
-    `tab_name` varchar(255) NOT NULL,
-    `tab_order` int(11) NOT NULL DEFAULT '0',
-    `tab_content` longtext NOT NULL,
-    PRIMARY KEY (`tab_id`),
-    UNIQUE KEY `tab_name` (`tab_name`)
-) ENGINE=MyISAM;
-
 DROP TABLE IF EXISTS `tiki_file_backlinks`;
 CREATE TABLE `tiki_file_backlinks` (
        `fileId` int(14) NOT NULL,

------------------------------------------------------------------------
r50738 | lphuberdeau | 2014-04-10 12:46:11 -0400 (qui, 10 abr 2014) | 1 line

[FIX] Field added by 20140301_add_column_rating_choice_topic_on_forums_tiki.sql, but not included in tiki.sql

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 50737)
+++ tiki.sql	(revision 50738)
@@ -916,6 +916,7 @@
   `inbound_pop_password` varchar(80) default NULL,
   `topic_smileys` char(1) default NULL,
   `ui_avatar` char(1) default NULL,
+  `ui_rating_choice_topic` char(1) DEFAULT NULL,
   `ui_flag` char(1) default NULL,
   `ui_posts` char(1) default NULL,
   `ui_email` char(1) default NULL,
@@ -3829,4 +3830,4 @@
   `outputType` varchar(32) NOT NULL default '',
   `version` int(8) NOT NULL default '0',
   `outputId` INT NOT NULL PRIMARY KEY AUTO_INCREMENT
-) ENGINE=MyISAM AUTO_INCREMENT=1;
\ No newline at end of file
+) ENGINE=MyISAM AUTO_INCREMENT=1;

------------------------------------------------------------------------
r50653 | robertplummer | 2014-04-03 12:53:32 -0400 (qui, 03 abr 2014) | 1 line

[MRG] Merge wikiLingo experimental branch with trunk... the fun begins

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 50652)
+++ tiki.sql	(revision 50653)
@@ -3822,28 +3822,11 @@
 	UNIQUE `event_target_uq` (`event`, `target`, `userId`)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS `tiki_goals`;
-CREATE TABLE `tiki_goals` (
-	`goalId` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
-	`name` VARCHAR(50) NOT NULL,
-	`type` VARCHAR(10) NOT NULL DEFAULT 'user',
-	`description` TEXT,
-	`enabled` INT NOT NULL DEFAULT 0,
-	`daySpan` INT NOT NULL DEFAULT 14,
-	`from` DATETIME,
-	`to` DATETIME,
-	`eligible` BLOB,
-	`conditions` BLOB,
-	`rewards` BLOB
-) ENGINE=MyISAM;
-
-DROP TABLE IF EXISTS `tiki_goal_events`;
-CREATE TABLE `tiki_goal_events` (
-	`eventId` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
-	`eventDate` INT NOT NULL,
-	`eventType` VARCHAR(50) NOT NULL,
-	`targetType` VARCHAR(50),
-	`targetObject` VARCHAR(255),
-	`user` VARCHAR(200) NOT NULL,
-	`groups` BLOB NOT NULL
-) ENGINE=MyISAM;
+DROP TABLE IF EXISTS `tiki_output`;
+CREATE TABLE `tiki_output` (
+  `entityId` varchar(160) NOT NULL default '',
+  `objectType` varchar(32) NOT NULL default '',
+  `outputType` varchar(32) NOT NULL default '',
+  `version` int(8) NOT NULL default '0',
+  `outputId` INT NOT NULL PRIMARY KEY AUTO_INCREMENT
+) ENGINE=MyISAM AUTO_INCREMENT=1;
\ No newline at end of file

------------------------------------------------------------------------
r50637 | lphuberdeau | 2014-04-02 17:07:49 -0400 (qua, 02 abr 2014) | 1 line

[MOD] Adding support for IMAP accounts

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 50636)
+++ tiki.sql	(revision 50637)
@@ -1263,7 +1263,8 @@
   `accountId` int(12) NOT NULL auto_increment,
   `user` varchar(200) NOT NULL default '',
   `account` varchar(50) NOT NULL default '',
-  `pop` varchar(255) default NULL,
+  `protocol` varchar(10) NOT NULL DEFAULT 'pop',
+  `host` varchar(255) default NULL,
   `port` int(4) default NULL,
   `username` varchar(100) default NULL,
   `pass` varchar(100) default NULL,

------------------------------------------------------------------------
r50627 | lphuberdeau | 2014-04-02 15:03:20 -0400 (qua, 02 abr 2014) | 1 line

[MOD] Add pre-auth/capture support for israelpost payment gateway

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 50626)
+++ tiki.sql	(revision 50627)
@@ -3352,6 +3352,7 @@
     `currency` CHAR(3) NOT NULL,
     `request_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
     `due_date` TIMESTAMP NOT NULL,
+	`authorized_until` TIMESTAMP NULL,
     `cancel_date` TIMESTAMP NULL,
     `description` VARCHAR(100) NOT NULL,
     `actions` TEXT,
@@ -3367,6 +3368,7 @@
     `payment_date` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
     `amount` DECIMAL(7,2),
     `type` VARCHAR(15),
+	`status` VARCHAR(15) NOT NULL DEFAULT 'paid',
     `details` TEXT,
     `userId` int(8),
     PRIMARY KEY(`paymentReceivedId`),

------------------------------------------------------------------------
r50616 | lphuberdeau | 2014-04-02 08:58:25 -0400 (qua, 02 abr 2014) | 1 line

[MOD] Remove SMTP parameters on mail-in as they were not being used after all

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 50615)
+++ tiki.sql	(revision 50616)
@@ -1269,9 +1269,6 @@
   `pass` varchar(100) default NULL,
   `active` char(1) default NULL,
   `type` varchar(40) default NULL,
-  `smtp` varchar(255) default NULL,
-  `useAuth` char(1) default NULL,
-  `smtpPort` int(4) default NULL,
   `anonymous` char(1) NOT NULL default 'y',
   `admin` char(1) NOT NULL default 'y',
   `attachments` char(1) NOT NULL default 'n',

------------------------------------------------------------------------
r50401 | lphuberdeau | 2014-03-20 11:55:51 -0400 (qui, 20 mar 2014) | 1 line

[FIX] Syntax errors in SQL

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 50400)
+++ tiki.sql	(revision 50401)
@@ -3832,8 +3832,8 @@
 	`daySpan` INT NOT NULL DEFAULT 14,
 	`from` DATETIME,
 	`to` DATETIME,
-	`eligible`,
-	`conditions`,
+	`eligible` BLOB,
+	`conditions` BLOB,
 	`rewards` BLOB
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r50374 | jonnybradley | 2014-03-18 13:40:24 -0400 (ter, 18 mar 2014) | 1 line

[MRG] Automatic merge, branches/12.x 50369 to 50373

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 50373)
+++ tiki.sql	(revision 50374)
@@ -1324,7 +1324,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Users Map','tiki-gmap_usermap.php',36,'feature_gmap','','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tiki Calendar','tiki-action_calendar.php',37,'feature_action_calendar','tiki_p_view_tiki_calendar','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','(debug)','javascript:toggle(\'debugconsole\')',40,'feature_debug_console','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','User Wizard','tiki-wizard_user.php',45,'feature_wizard_user','','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','User Wizard','tiki-wizard_user.php',45,'feature_wizard_user','','Registered',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','MyTiki','tiki-my_tiki.php',50,'feature_mytiki','','Registered',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','MyTiki Home','tiki-my_tiki.php',51,'feature_mytiki','','Registered',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Preferences','tiki-user_preferences.php',55,'feature_mytiki,feature_userPreferences','','Registered',0);

------------------------------------------------------------------------
r49968 | lphuberdeau | 2014-02-19 14:03:25 -0400 (qua, 19 fev 2014) | 1 line

[MOD] Keep track of goals reached

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 49967)
+++ tiki.sql	(revision 49968)
@@ -3842,6 +3842,8 @@
 	`eventId` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
 	`eventDate` INT NOT NULL,
 	`eventType` VARCHAR(50) NOT NULL,
+	`targetType` VARCHAR(50),
+	`targetObject` VARCHAR(255),
 	`user` VARCHAR(200) NOT NULL,
 	`groups` BLOB NOT NULL
 ) ENGINE=MyISAM;

------------------------------------------------------------------------
r49965 | lphuberdeau | 2014-02-19 11:12:33 -0400 (qua, 19 fev 2014) | 1 line

[MOD] Goal events stored separately to simplify usage and reduce database size, also avoids double-entries if activities are stored multiple time through various paths

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 49964)
+++ tiki.sql	(revision 49965)
@@ -3837,3 +3837,11 @@
 	`rewards` BLOB
 ) ENGINE=MyISAM;
 
+DROP TABLE IF EXISTS `tiki_goal_events`;
+CREATE TABLE `tiki_goal_events` (
+	`eventId` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
+	`eventDate` INT NOT NULL,
+	`eventType` VARCHAR(50) NOT NULL,
+	`user` VARCHAR(200) NOT NULL,
+	`groups` BLOB NOT NULL
+) ENGINE=MyISAM;

------------------------------------------------------------------------
r49892 | lphuberdeau | 2014-02-14 17:59:05 -0400 (sex, 14 fev 2014) | 1 line

[MOD] Basic management interfaces for goals (work in progress)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 49891)
+++ tiki.sql	(revision 49892)
@@ -3822,3 +3822,18 @@
 	UNIQUE `event_target_uq` (`event`, `target`, `userId`)
 ) ENGINE=MyISAM;
 
+DROP TABLE IF EXISTS `tiki_goals`;
+CREATE TABLE `tiki_goals` (
+	`goalId` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
+	`name` VARCHAR(50) NOT NULL,
+	`type` VARCHAR(10) NOT NULL DEFAULT 'user',
+	`description` TEXT,
+	`enabled` INT NOT NULL DEFAULT 0,
+	`daySpan` INT NOT NULL DEFAULT 14,
+	`from` DATETIME,
+	`to` DATETIME,
+	`eligible`,
+	`conditions`,
+	`rewards` BLOB
+) ENGINE=MyISAM;
+

------------------------------------------------------------------------
r49810 | jonnybradley | 2014-02-10 15:55:37 -0400 (seg, 10 fev 2014) | 5 lines

[MRG] Automatic merge, branches/12.x 49795 to 49808
Conflicts fixed manually
	lib/prefs/feature.php (fixed itself, huh?)
	templates/modules/mod-cart.tpl (restored some curiously deleted <td>s too?)


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 49809)
+++ tiki.sql	(revision 49810)
@@ -1324,7 +1324,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Users Map','tiki-gmap_usermap.php',36,'feature_gmap','','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tiki Calendar','tiki-action_calendar.php',37,'feature_action_calendar','tiki_p_view_tiki_calendar','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','(debug)','javascript:toggle(\'debugconsole\')',40,'feature_debug_console','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','User Wizard','tiki-wizard_user.php',45,'','','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','User Wizard','tiki-wizard_user.php',45,'feature_wizard_user','','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','MyTiki','tiki-my_tiki.php',50,'feature_mytiki','','Registered',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','MyTiki Home','tiki-my_tiki.php',51,'feature_mytiki','','Registered',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Preferences','tiki-user_preferences.php',55,'feature_mytiki,feature_userPreferences','','Registered',0);

------------------------------------------------------------------------
r49689 | xavidp | 2014-02-04 05:04:34 -0400 (ter, 04 fev 2014) | 11 lines

[MRG] Automatic merge, branches/12.x 49678 to 49687
Conflicts in the following files were resolved manually:
'./templates/wiki-plugins/wikiplugin_addtocart.tpl'
'./templates/wizard/wizard_bar_user.tpl'
'./templates/wizard/user_preferences_notifications.tpl'
'./templates/wizard/user_preferences_info.tpl'
'./templates/wizard/user_wizard.tpl'
'./templates/wizard/user_preferences_params.tpl'
'./templates/wizard/user_preferences_reports.tpl'



Index: tiki.sql
===================================================================
--- tiki.sql	(revision 49688)
+++ tiki.sql	(revision 49689)
@@ -1324,6 +1324,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Users Map','tiki-gmap_usermap.php',36,'feature_gmap','','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tiki Calendar','tiki-action_calendar.php',37,'feature_action_calendar','tiki_p_view_tiki_calendar','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','(debug)','javascript:toggle(\'debugconsole\')',40,'feature_debug_console','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','User Wizard','tiki-wizard_user.php',45,'','','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','MyTiki','tiki-my_tiki.php',50,'feature_mytiki','','Registered',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','MyTiki Home','tiki-my_tiki.php',51,'feature_mytiki','','Registered',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Preferences','tiki-user_preferences.php',55,'feature_mytiki,feature_userPreferences','','Registered',0);
@@ -3224,6 +3225,7 @@
 UPDATE tiki_menu_options SET icon = 'debug48x48' WHERE name = '(debug)';
 UPDATE tiki_menu_options SET icon = 'kaltura48x48' WHERE name = 'Kaltura Video';
 UPDATE tiki_menu_options SET icon = 'tikicalendar48x48' WHERE name = 'Tiki Calendar';
+UPDATE tiki_menu_options SET icon = 'wizard_user48x48' WHERE name = 'User Wizard';
 UPDATE tiki_menus SET use_items_icons='y' WHERE `menuId`=42;
 
 DROP TABLE IF EXISTS `tiki_plugin_security`;

------------------------------------------------------------------------
r49630 | lphuberdeau | 2014-01-29 18:06:18 -0400 (qua, 29 jan 2014) | 1 line

[MOD]Â Add support for translation-related notifications

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 49629)
+++ tiki.sql	(revision 49630)
@@ -3815,7 +3815,7 @@
 	`userId` INT NOT NULL,
 	`event` VARCHAR(50) NOT NULL,
 	`priority` VARCHAR(10) NOT NULL,
-	`target` VARCHAR(15) NOT NULL,
+	`target` VARCHAR(25) NOT NULL,
 	INDEX `userid_target_ix` (`userId`, `target`),
 	UNIQUE `event_target_uq` (`event`, `target`, `userId`)
 ) ENGINE=MyISAM;

------------------------------------------------------------------------
r49493 | arildb | 2014-01-22 14:42:28 -0400 (qua, 22 jan 2014) | 1 line

[FIX] database error. longblob cannot have a default value

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 49492)
+++ tiki.sql	(revision 49493)
@@ -2000,7 +2000,7 @@
   `className` varchar(64) default NULL,
   `parseValues` char( 1 ) NOT NULL default 'n',
   `clonedSheetId` int(8) NULL,
-  `metadata` longblob default '',
+  `metadata` longblob,
   UNIQUE KEY `sheetId` (`sheetId`, `begin`)
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r49447 | lphuberdeau | 2014-01-17 17:30:51 -0400 (sex, 17 jan 2014) | 1 line

[NEW] New table for notification revamp and management interface

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 49446)
+++ tiki.sql	(revision 49447)
@@ -3796,6 +3796,7 @@
    PRIMARY KEY (`mailin_struct_id`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
+DROP TABLE IF EXISTS `tiki_search_queries`;
 CREATE TABLE `tiki_search_queries` (
 	`queryId` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
 	`userId` INT NOT NULL,
@@ -3807,3 +3808,15 @@
 	INDEX `query_userId` (`userId`),
 	UNIQUE KEY `tiki_user_query_uq` (`userId`, `label`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
+
+DROP TABLE IF EXISTS `tiki_user_monitors`;
+CREATE TABLE `tiki_user_monitors` (
+	`monitorId` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
+	`userId` INT NOT NULL,
+	`event` VARCHAR(50) NOT NULL,
+	`priority` VARCHAR(10) NOT NULL,
+	`target` VARCHAR(15) NOT NULL,
+	INDEX `userid_target_ix` (`userId`, `target`),
+	UNIQUE `event_target_uq` (`event`, `target`, `userId`)
+) ENGINE=MyISAM;
+

------------------------------------------------------------------------
r49351 | lphuberdeau | 2014-01-09 12:05:42 -0400 (qui, 09 jan 2014) | 1 line

[MOD] Adding unique key constraint on stored query labels, adding description field

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 49350)
+++ tiki.sql	(revision 49351)
@@ -3803,5 +3803,7 @@
 	`label` VARCHAR(100) NOT NULL,
 	`priority` VARCHAR(15) NOT NULL,
 	`query` BLOB,
-	INDEX `query_userId` (`userId`)
+	`description` TEXT,
+	INDEX `query_userId` (`userId`),
+	UNIQUE KEY `tiki_user_query_uq` (`userId`, `label`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;

------------------------------------------------------------------------
r49290 | robertplummer | 2013-12-31 17:06:33 -0400 (ter, 31 dez 2013) | 1 line

[FIX] Sheet now working with 3.1 rc5

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 49289)
+++ tiki.sql	(revision 49290)
@@ -2000,6 +2000,7 @@
   `className` varchar(64) default NULL,
   `parseValues` char( 1 ) NOT NULL default 'n',
   `clonedSheetId` int(8) NULL,
+  `metadata` longblob default '',
   UNIQUE KEY `sheetId` (`sheetId`, `begin`)
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r49174 | lphuberdeau | 2013-12-19 14:34:03 -0400 (qui, 19 dez 2013) | 1 line

[NEW] Storing search queries in the database

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 49173)
+++ tiki.sql	(revision 49174)
@@ -3794,3 +3794,13 @@
 	`is_active` char(1) NULL DEFAULT 'n',
    PRIMARY KEY (`mailin_struct_id`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
+
+CREATE TABLE `tiki_search_queries` (
+	`queryId` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
+	`userId` INT NOT NULL,
+	`lastModif` INT,
+	`label` VARCHAR(100) NOT NULL,
+	`priority` VARCHAR(15) NOT NULL,
+	`query` BLOB,
+	INDEX `query_userId` (`userId`)
+) ENGINE=MyISAM AUTO_INCREMENT=1;

------------------------------------------------------------------------
r48387 | jonnybradley | 2013-11-11 06:58:59 -0400 (seg, 11 nov 2013) | 1 line

[MRG] Automatic merge, branches/12.x 48369 to 48386

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 48386)
+++ tiki.sql	(revision 48387)
@@ -2795,6 +2795,7 @@
   event varchar(40) NOT NULL default '',
   score int(11) NOT NULL default '0',
   expiration int(11) NOT NULL default '0',
+  validObjectIds text,
   PRIMARY KEY (`event`)
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r48376 | lindonb | 2013-11-09 15:09:42 -0400 (sÃ¡b, 09 nov 2013) | 1 line

[MRG] Automatic merge, branches/12.x 48325 to 48369

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 48375)
+++ tiki.sql	(revision 48376)
@@ -1333,6 +1333,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Modules','tiki-user_assigned_modules.php',75,'feature_mytiki,user_assigned_modules','tiki_p_configure_modules','Registered',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Webmail','tiki-webmail.php',85,'feature_mytiki,feature_webmail','tiki_p_use_webmail','Registered',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Contacts','tiki-contacts.php',87,'feature_mytiki,feature_contacts','','Registered',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Mail-in','tiki-user_mailin.php',88,'feature_mytiki,feature_mailin','','Registered',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Notepad','tiki-notepad_list.php',90,'feature_mytiki,feature_notepad','tiki_p_notepad','Registered',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','My Files','tiki-userfiles.php',95,'feature_mytiki,feature_userfiles','tiki_p_userfiles','Registered',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','User Menu','tiki-usermenu.php',100,'feature_mytiki,feature_usermenu','tiki_p_usermenu','Registered',0);

------------------------------------------------------------------------
r47940 | xavidp | 2013-10-09 14:18:47 -0400 (qua, 09 out 2013) | 1 line

[FIX]Add a few more missing icons. Also lgpl'd from http://commons.wikimedia.org/wiki/Crystal_Clear , except kaltura, which was there in the tiki file tree already. Thanks jonnyb.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 47939)
+++ tiki.sql	(revision 47940)
@@ -3216,6 +3216,11 @@
 UPDATE tiki_menu_options SET icon = 'surveys48x48' WHERE name = 'Surveys';
 UPDATE tiki_menu_options SET icon = 'spreadsheet48x48' WHERE name = 'Spreadsheets';
 UPDATE tiki_menu_options SET icon = 'timesheet48x48' WHERE name = 'Timesheet';
+UPDATE tiki_menu_options SET icon = 'usersmap48x48' WHERE name = 'Users Map';
+UPDATE tiki_menu_options SET icon = 'contactus48x48' WHERE name = 'Contact Us';
+UPDATE tiki_menu_options SET icon = 'debug48x48' WHERE name = '(debug)';
+UPDATE tiki_menu_options SET icon = 'kaltura48x48' WHERE name = 'Kaltura Video';
+UPDATE tiki_menu_options SET icon = 'tikicalendar48x48' WHERE name = 'Tiki Calendar';
 UPDATE tiki_menus SET use_items_icons='y' WHERE `menuId`=42;
 
 DROP TABLE IF EXISTS `tiki_plugin_security`;

------------------------------------------------------------------------
r47913 | xavidp | 2013-10-07 13:50:15 -0400 (seg, 07 out 2013) | 1 line

[FIX]Add default icons for the menu entries that had an icon missing. Improvable for sure, but better than current case (question mark for those menu items). Lgpl'd from the crystal clear icon set - http://commons.wikimedia.org/wiki/Crystal_Clear

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 47912)
+++ tiki.sql	(revision 47913)
@@ -3205,10 +3205,17 @@
 UPDATE tiki_menu_options SET icon = 'vcard48x48' WHERE name = 'Freetags';
 UPDATE tiki_menu_options SET icon = 'date48x48' WHERE name = 'Calendar' AND url = 'tiki-calendar.php';
 UPDATE tiki_menu_options SET icon = 'userfiles48x48' WHERE name = 'MyTiki';
-UPDATE tiki_menu_options SET icon = '' WHERE name = 'Quizzes';
-UPDATE tiki_menu_options SET icon = '' WHERE name = 'Surveys';
-UPDATE tiki_menu_options SET icon = '' WHERE name = 'TikiSheet';
-UPDATE tiki_menu_options SET icon = '' WHERE name = 'Workflow';
+UPDATE tiki_menu_options SET icon = 'home48x48' WHERE name = 'Home';
+UPDATE tiki_menu_options SET icon = 'categories48x48' WHERE name = 'Categories';
+UPDATE tiki_menu_options SET icon = 'accounting48x48' WHERE name = 'Accounting';
+UPDATE tiki_menu_options SET icon = 'directory48x48' WHERE name = 'Directory';
+UPDATE tiki_menu_options SET icon = 'invoice48x48' WHERE name = 'Invoice';
+UPDATE tiki_menu_options SET icon = 'quizzes48x48' WHERE name = 'Quizzes';
+UPDATE tiki_menu_options SET icon = 'reports48x48' WHERE name = 'Reports';
+UPDATE tiki_menu_options SET icon = 'stats48x48' WHERE name = 'Stats';
+UPDATE tiki_menu_options SET icon = 'surveys48x48' WHERE name = 'Surveys';
+UPDATE tiki_menu_options SET icon = 'spreadsheet48x48' WHERE name = 'Spreadsheets';
+UPDATE tiki_menu_options SET icon = 'timesheet48x48' WHERE name = 'Timesheet';
 UPDATE tiki_menus SET use_items_icons='y' WHERE `menuId`=42;
 
 DROP TABLE IF EXISTS `tiki_plugin_security`;

------------------------------------------------------------------------
r46910 | lphuberdeau | 2013-07-30 09:15:22 -0400 (ter, 30 jul 2013) | 1 line

[KIL] Removing most of the old friendship feature (with intention of adding back once bases are established), converting dedicated tables to relations - using the 'follow' model as it seems to be what was in place

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 46909)
+++ tiki.sql	(revision 46910)
@@ -2789,21 +2789,6 @@
   KEY `traId` ( `traId` )
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
-DROP TABLE IF EXISTS `tiki_friends`;
-CREATE TABLE `tiki_friends` (
-  `user` varchar(200) NOT NULL default '',
-  `friend` varchar(200) NOT NULL default '',
-  PRIMARY KEY (`user`(120),friend(120))
-) ENGINE=MyISAM;
-
-DROP TABLE IF EXISTS `tiki_friendship_requests`;
-CREATE TABLE `tiki_friendship_requests` (
-  `userFrom` varchar(200) NOT NULL default '',
-  `userTo` varchar(200) NOT NULL default '',
-  `tstamp` timestamp NOT NULL,
-  PRIMARY KEY (`userFrom`(120),`userTo`(120))
-) ENGINE=MyISAM;
-
 DROP TABLE IF EXISTS `tiki_score`;
 CREATE TABLE `tiki_score` (
   event varchar(40) NOT NULL default '',

------------------------------------------------------------------------
r46703 | lphuberdeau | 2013-07-15 17:08:11 -0400 (seg, 15 jul 2013) | 1 line

[NEW] Adding a basic interface to manage the custom event rules (skeleton)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 46702)
+++ tiki.sql	(revision 46703)
@@ -117,6 +117,16 @@
   PRIMARY KEY(`field_name`)
 ) ENGINE=MyISAM;
 
+DROP TABLE IF EXISTS `tiki_activity_stream_rules`;
+CREATE TABLE `tiki_activity_stream_rules` (
+  `ruleId` int(8) NOT NULL auto_increment,
+  `eventType` varchar(100) NOT NULL,
+  `ruleType` varchar(20) NOT NULL,
+  `rule` TEXT,
+  `notes` TEXT,
+  PRIMARY KEY(`ruleId`)
+) ENGINE=MyISAM;
+
 DROP TABLE IF EXISTS `tiki_articles`;
 CREATE TABLE `tiki_articles` (
   `articleId` int(8) NOT NULL auto_increment,

------------------------------------------------------------------------
r46558 | lphuberdeau | 2013-07-05 13:50:18 -0400 (sex, 05 jul 2013) | 1 line

[NEW] Adding core functionality to support event recording

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 46557)
+++ tiki.sql	(revision 46558)
@@ -101,6 +101,22 @@
   KEY `nameValue` (`name`, `value`(200))
 ) ENGINE=MyISAM;
 
+DROP TABLE IF EXISTS `tiki_activity_stream`;
+CREATE TABLE `tiki_activity_stream` (
+  `activityId` int(8) NOT NULL auto_increment,
+  `eventType` varchar(100) NOT NULL,
+  `eventDate` int NOT NULL,
+  `arguments` BLOB,
+  PRIMARY KEY(`activityId`)
+) ENGINE=MyISAM;
+
+DROP TABLE IF EXISTS `tiki_activity_stream_mapping`;
+CREATE TABLE `tiki_activity_stream_mapping` (
+  `field_name` varchar(50) NOT NULL,
+  `field_type` varchar(15) NOT NULL,
+  PRIMARY KEY(`field_name`)
+) ENGINE=MyISAM;
+
 DROP TABLE IF EXISTS `tiki_articles`;
 CREATE TABLE `tiki_articles` (
   `articleId` int(8) NOT NULL auto_increment,

------------------------------------------------------------------------
r46540 | sylvieg | 2013-07-04 10:05:04 -0400 (qui, 04 jul 2013) | 1 line

[ENH]increase category name size

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 46539)
+++ tiki.sql	(revision 46540)
@@ -435,7 +435,7 @@
 DROP TABLE IF EXISTS `tiki_categories`;
 CREATE TABLE `tiki_categories` (
   `categId` int(12) NOT NULL auto_increment,
-  `name` varchar(100) default NULL,
+  `name` varchar(200) default NULL,
   `description` varchar(250) default NULL,
   `parentId` int(12) default NULL,
   `rootId` int NOT NULL DEFAULT 0,

------------------------------------------------------------------------
r46433 | arildb | 2013-06-23 20:51:18 -0400 (dom, 23 jun 2013) | 1 line

[NEW] Mail-in admin options: "Allow routing" and "Leave email"

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 46432)
+++ tiki.sql	(revision 46433)
@@ -1249,6 +1249,7 @@
   `anonymous` char(1) NOT NULL default 'y',
   `admin` char(1) NOT NULL default 'y',
   `attachments` char(1) NOT NULL default 'n',
+  `routing` char(1) NOT NULL default 'y',
   `article_topicId` int(4) default NULL,
   `article_type` varchar(50) default NULL,
   `discard_after` varchar(255) default NULL,
@@ -1257,6 +1258,7 @@
   `categoryId` int(12) NULL,
   `namespace` varchar(20) default NULL,
   `respond_email` char(1) NOT NULL default 'y',
+  `leave_email` char(1) NOT NULL default 'n',
   PRIMARY KEY (`accountId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r46430 | arildb | 2013-06-23 19:24:47 -0400 (dom, 23 jun 2013) | 5 lines

[NEW] Mail-in routing of incoming email to structures. Configured per user in "My Tiki" / "Mail-in"
...the option for this is still pending.
[ENH] Mail-in admin panel lists actions before the "Add New" account section.
[DOC] Make header like comments for each mail-in type


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 46429)
+++ tiki.sql	(revision 46430)
@@ -3755,3 +3755,15 @@
 	`definition` TEXT,
 	`is_advanced` CHAR(1) NOT NULL DEFAULT 'n'
 ) ENGINE=MyISAM;
+
+DROP TABLE IF EXISTS `tiki_user_mailin_struct`;
+CREATE TABLE `tiki_user_mailin_struct` (
+	`mailin_struct_id` int(12) NOT NULL auto_increment,
+	`username` varchar(200) NOT NULL,
+	`subj_pattern` varchar(255) NULL,
+	`body_pattern` varchar(255) NULL,
+	`structure_id` int(14) NOT NULL,
+	`page_id` int(14) NULL,
+	`is_active` char(1) NULL DEFAULT 'n',
+   PRIMARY KEY (`mailin_struct_id`)
+) ENGINE=MyISAM AUTO_INCREMENT=1;

------------------------------------------------------------------------
r46358 | arildb | 2013-06-16 09:02:23 -0400 (dom, 16 jun 2013) | 2 lines

[NEW] Mail-in admin can specify a namespace, which will be added to all incoming email. Can be used to prevent overwrites.
[ENH] Add some descriptions to the mail-in admin options

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 46357)
+++ tiki.sql	(revision 46358)
@@ -1255,6 +1255,7 @@
   `show_inlineImages` char(1) NULL,
   `save_html` char(1) NULL default 'y',
   `categoryId` int(12) NULL,
+  `namespace` varchar(20) default NULL,
   `respond_email` char(1) NOT NULL default 'y',
   PRIMARY KEY (`accountId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;

------------------------------------------------------------------------
r46315 | arildb | 2013-06-13 23:40:41 -0400 (qui, 13 jun 2013) | 1 line

[NEW] Add mail-in option "Allow admin access". If no, admins are blocked from using mail-in. Prevents use of full privileges through email.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 46314)
+++ tiki.sql	(revision 46315)
@@ -1247,6 +1247,7 @@
   `useAuth` char(1) default NULL,
   `smtpPort` int(4) default NULL,
   `anonymous` char(1) NOT NULL default 'y',
+  `admin` char(1) NOT NULL default 'y',
   `attachments` char(1) NOT NULL default 'n',
   `article_topicId` int(4) default NULL,
   `article_type` varchar(50) default NULL,

------------------------------------------------------------------------
r46312 | arildb | 2013-06-13 22:00:18 -0400 (qui, 13 jun 2013) | 2 lines

[NEW] add mail-in option "Keep HTML format". If yes, then html email is saved as wysiwyg-html regardless of editor availability or selection
[FIX] admin users have full mail-in access

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 46311)
+++ tiki.sql	(revision 46312)
@@ -1252,6 +1252,7 @@
   `article_type` varchar(50) default NULL,
   `discard_after` varchar(255) default NULL,
   `show_inlineImages` char(1) NULL,
+  `save_html` char(1) NULL default 'y',
   `categoryId` int(12) NULL,
   `respond_email` char(1) NOT NULL default 'y',
   PRIMARY KEY (`accountId`)

------------------------------------------------------------------------
r46242 | arildb | 2013-06-08 13:51:07 -0400 (sÃ¡b, 08 jun 2013) | 5 lines

[NEW] permission checking when submitting/approving an article.
[FIX] default respond_email setting should be 'y' 
[FIX] display of respond_email
[FIX] failed email is now deleted properly on the email server


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 46241)
+++ tiki.sql	(revision 46242)
@@ -1253,7 +1253,7 @@
   `discard_after` varchar(255) default NULL,
   `show_inlineImages` char(1) NULL,
   `categoryId` int(12) NULL,
-  `respond_email` char(1) NOT NULL default 'n',
+  `respond_email` char(1) NOT NULL default 'y',
   PRIMARY KEY (`accountId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r46239 | arildb | 2013-06-08 11:34:29 -0400 (sÃ¡b, 08 jun 2013) | 3 lines

[NEW] Added field to specify how to respond to errors. By default an email is sent
[NEW] New permission tiki_p_send_mailin. If anonymous=n and tiki_p_send_mailin is not set, the email is not added to the wiki.


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 46238)
+++ tiki.sql	(revision 46239)
@@ -1253,6 +1253,7 @@
   `discard_after` varchar(255) default NULL,
   `show_inlineImages` char(1) NULL,
   `categoryId` int(12) NULL,
+  `respond_email` char(1) NOT NULL default 'n',
   PRIMARY KEY (`accountId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r46223 | arildb | 2013-06-06 16:09:18 -0400 (qui, 06 jun 2013) | 2 lines

[NEW] mail-in can auto-assign a category to the created wiki page. 
[FIX] show_inlineImages is now filled in for newly created accounts

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 46222)
+++ tiki.sql	(revision 46223)
@@ -1252,6 +1252,7 @@
   `article_type` varchar(50) default NULL,
   `discard_after` varchar(255) default NULL,
   `show_inlineImages` char(1) NULL,
+  `categoryId` int(12) NULL,
   PRIMARY KEY (`accountId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r46189 | arildb | 2013-06-06 08:45:36 -0400 (qui, 06 jun 2013) | 11 lines

[NEW] MailIn resolve inline images in html email. 
Have tried to test several email clients. Most seem to have a slightly different scheme storing the attachment/email info.
Have adjusted the cases I found.
[MOD] MailIn HTML mail now creates wiki pages in HTML format
[FIX] Mailin logs the correct user
[SEC] Mailin checks the user permissions (of the sender). 
Previously the checks would have been for the user currently logged on, triggering the mailin check.
Updated for wiki mailIns, but not for article mailIns.
Note that senders email address can be spoofed. So, there is no real security in mailIn
[FIX] Mailin account "attachments" setting is checked.


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 46188)
+++ tiki.sql	(revision 46189)
@@ -1251,6 +1251,7 @@
   `article_topicId` int(4) default NULL,
   `article_type` varchar(50) default NULL,
   `discard_after` varchar(255) default NULL,
+  `show_inlineImages` char(1) NULL,
   PRIMARY KEY (`accountId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r46102 | lphuberdeau | 2013-05-30 11:45:25 -0400 (qui, 30 mai 2013) | 1 line

[ENH] Include category modifications in the action log, profile export recent changes, and exclude element removals from the recent changes (not something profiles can do)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 46101)
+++ tiki.sql	(revision 46102)
@@ -2910,6 +2910,9 @@
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Created', 'tracker', 'y');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Updated', 'tracker', 'y');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Removed', 'tracker', 'y');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Created', 'category', 'y');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Updated', 'category', 'y');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Removed', 'category', 'y');
 
 DROP TABLE IF EXISTS `tiki_freetags`;
 CREATE TABLE `tiki_freetags` (

------------------------------------------------------------------------
r46097 | lphuberdeau | 2013-05-30 10:52:03 -0400 (qui, 30 mai 2013) | 1 line

[ENH] Improve logging of tracker structural updates (and making sure they apply through all paths, not just the service utilities path)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 46096)
+++ tiki.sql	(revision 46097)
@@ -2907,6 +2907,9 @@
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Refresh', 'url', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Joined Room', 'bigbluebutton', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Left Room', 'bigbluebutton', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Created', 'tracker', 'y');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Updated', 'tracker', 'y');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Removed', 'tracker', 'y');
 
 DROP TABLE IF EXISTS `tiki_freetags`;
 CREATE TABLE `tiki_freetags` (

------------------------------------------------------------------------
r45799 | changi67 | 2013-04-29 15:05:12 -0400 (seg, 29 abr 2013) | 1 line

[FIX] Missing INSERT in tiki_actionlog_conf

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 45798)
+++ tiki.sql	(revision 45799)
@@ -1,5 +1,5 @@
 -- --------------------------------------------------------
--- Database : Tiki 
+-- Database : Tiki
 -- --------------------------------------------------------
 
 ALTER DATABASE DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci;
@@ -594,7 +594,7 @@
   `title` varchar(200) default NULL,
   `year` int(11) default NULL,
   `authors` varchar(200) default NULL,
-  `holder` varchar(200) default NULL,  
+  `holder` varchar(200) default NULL,
   `copyright_order` int(11) default NULL,
   `userName` varchar(200) default '',
   PRIMARY KEY (`copyrightId`)
@@ -780,7 +780,7 @@
   `user` varchar(200) default '',
   `author` varchar(40) default NULL,
   `hits` int(14) default NULL,
-  `maxhits` INT( 14 ) default NULL, 
+  `maxhits` INT( 14 ) default NULL,
   `lastDownload` int(14) default NULL,
   `votes` int(8) default NULL,
   `points` decimal(8,2) default NULL,
@@ -977,7 +977,7 @@
   `showfilesize` char(1) NOT NULL default 'n',
   `showfilename` char(1) NOT NULL default 'n',
   `defaultscale` varchar(10) NOT NULL DEFAULT 'o',
-  `showcategories` char(1) NOT NULL default 'n', 
+  `showcategories` char(1) NOT NULL default 'n',
   PRIMARY KEY (`galleryId`),
   KEY `name` (name),
   KEY `description` (description(255)),
@@ -1011,7 +1011,7 @@
   `type` varchar(200) default NULL,
   `url` varchar(250) default NULL,
   PRIMARY KEY (`watchId`),
-  INDEX `event-object-group` ( `event` , `object` ( 100 ) , `group` ( 50 ) ) 
+  INDEX `event-object-group` ( `event` , `object` ( 100 ) , `group` ( 50 ) )
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_history`;
@@ -2393,7 +2393,7 @@
   `title` varchar(40) default NULL,
   `data` longblob,
   `parse` char(1) default NULL,
-  `status` VARCHAR(60) default '',  
+  `status` VARCHAR(60) default '',
   PRIMARY KEY (`name`)
 ) ENGINE=MyISAM;
 
@@ -2905,6 +2905,8 @@
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Flagged', 'wiki page', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Fetch', 'url', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Refresh', 'url', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Joined Room', 'bigbluebutton', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Left Room', 'bigbluebutton', 'n');
 
 DROP TABLE IF EXISTS `tiki_freetags`;
 CREATE TABLE `tiki_freetags` (
@@ -3161,7 +3163,7 @@
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-view_tracker_item.php\\?itemId=(\\d+)', 'item$1', 'trackeritem', 'feature_trackers', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-list_file_gallery.php\\?galleryId=(\\d+)', 'file$1', 'file gallery', 'feature_file_galleries', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-user_information.php\\?userId=(\\d+)','user$1', '', '', 200);
- 
+
 UPDATE tiki_menu_options SET icon = 'icon-configuration48x48' WHERE name = 'Admin';
 UPDATE tiki_menu_options SET icon = 'xfce4-appfinder48x48' WHERE name = 'Search';
 UPDATE tiki_menu_options SET icon = 'wikipages48x48' WHERE name = 'Wiki';
@@ -3252,7 +3254,7 @@
     `creation` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
     `timeout` INT NOT NULL DEFAULT 0,
     `hits` INT NOT NULL DEFAULT 1,
-    `maxhits` INT NOT NULL DEFAULT 1, 
+    `maxhits` INT NOT NULL DEFAULT 1,
     `token` CHAR(32),
     `entry` VARCHAR(50),
     `email` varchar(255) NOT NULL,
@@ -3332,7 +3334,7 @@
     KEY `payment_request_ix` (`paymentRequestId`)
 ) ENGINE=MyISAM;
 DROP TABLE IF EXISTS `tiki_discount`;
-CREATE TABLE `tiki_discount`( 
+CREATE TABLE `tiki_discount`(
     `id` INT NOT NULL AUTO_INCREMENT,
     `code` VARCHAR(255),
     `value` VARCHAR(255),
@@ -3502,7 +3504,7 @@
     `unit_text` VARCHAR( 25 ) DEFAULT NULL,
     `is_static_level` CHAR( 1 ) DEFAULT 'n',
     `scaling_divisor` FLOAT NOT NULL DEFAULT 1,
-    PRIMARY KEY ( `credit_type` ) 
+    PRIMARY KEY ( `credit_type` )
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_acct_account`;
@@ -3519,7 +3521,7 @@
   KEY `accountTax` (`accountTax`)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS `tiki_acct_bankaccount`; 
+DROP TABLE IF EXISTS `tiki_acct_bankaccount`;
 CREATE TABLE `tiki_acct_bankaccount` (
   `bankBookId` int(10) unsigned NOT NULL,
   `bankAccountId` int(10) unsigned NOT NULL,
@@ -3569,7 +3571,7 @@
   PRIMARY KEY (`bookId`)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS `tiki_acct_item`; 
+DROP TABLE IF EXISTS `tiki_acct_item`;
 CREATE TABLE `tiki_acct_item` (
   `itemBookId` int(10) unsigned NOT NULL,
   `itemJournalId` int(10) unsigned NOT NULL DEFAULT '0',
@@ -3581,7 +3583,7 @@
   PRIMARY KEY (`itemBookId`,`itemJournalId`,`itemAccountId`,`itemType`)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS `tiki_acct_journal`; 
+DROP TABLE IF EXISTS `tiki_acct_journal`;
 CREATE TABLE `tiki_acct_journal` (
   `journalBookId` int(10) unsigned NOT NULL,
   `journalId` int(10) unsigned NOT NULL AUTO_INCREMENT,
@@ -3592,7 +3594,7 @@
   PRIMARY KEY (`journalId`)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS `tiki_acct_stack`; 
+DROP TABLE IF EXISTS `tiki_acct_stack`;
 CREATE TABLE `tiki_acct_stack` (
   `stackBookId` int(10) unsigned NOT NULL,
   `stackId` int(10) unsigned NOT NULL AUTO_INCREMENT,
@@ -3602,7 +3604,7 @@
   PRIMARY KEY (`stackId`)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS `tiki_acct_stackitem`; 
+DROP TABLE IF EXISTS `tiki_acct_stackitem`;
 CREATE TABLE `tiki_acct_stackitem` (
   `stackBookId` int(10) unsigned NOT NULL,
   `stackItemStackId` int(10) unsigned NOT NULL DEFAULT '0',
@@ -3631,7 +3633,7 @@
   PRIMARY KEY (`statementId`)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS `tiki_acct_tax`; 
+DROP TABLE IF EXISTS `tiki_acct_tax`;
 CREATE TABLE `tiki_acct_tax` (
   `taxBookId` int(10) unsigned NOT NULL,
   `taxId` int(10) unsigned NOT NULL AUTO_INCREMENT,
@@ -3708,7 +3710,7 @@
   `location` VARCHAR(255)  DEFAULT NULL,
   `style` VARCHAR(30) DEFAULT NULL,
   `template` varchar(255) DEFAULT NULL,
-  `last_modified` timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,  
+  `last_modified` timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
   PRIMARY KEY (`ref_id`),
   KEY `PageId` (`page_id`)
 ) ENGINE=MyISAM;
@@ -3731,7 +3733,7 @@
   `messageId` INT NOT NULL AUTO_INCREMENT ,
   `message`   TEXT NULL ,
   `attempts`  INT NOT NULL DEFAULT 0 ,
-  PRIMARY KEY (`messageId`) 
+  PRIMARY KEY (`messageId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
 DROP TABLE IF EXISTS `tiki_workspace_templates`;

------------------------------------------------------------------------
r45621 | nkoth | 2013-04-20 13:35:29 -0400 (sÃ¡b, 20 abr 2013) | 1 line

[ENH] Provide option to not send newsletter if article clipping results in no items tks Nelson

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 45620)
+++ tiki.sql	(revision 45621)
@@ -1597,6 +1597,7 @@
   `autoArticleClip` char(1) default 'n',
   `articleClipTypes` text,
   `articleClipRange` int(14) default NULL,
+  `emptyClipBlocksSend` char(1) default 'n',
   PRIMARY KEY (`nlId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r45292 | jonnybradley | 2013-03-22 12:58:47 -0400 (sex, 22 mar 2013) | 1 line

[MOD] menus: Move a couple of feature menu options (Reports and Timesheets) from underneath the admin menu to the top section (still not in alphabetical order, but more logical i think)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 45291)
+++ tiki.sql	(revision 45292)
@@ -1469,8 +1469,8 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Social networks','tiki-socialnetworks.php',115,'feature_mytiki,feature_socialnetworks','tiki_p_socialnetworks|tiki_p_admin_socialnetworks','Registered',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'r', 'Invoice', 'tiki-list_invoices.php', 790, 'feature_invoice', 'tiki_p_admin', '', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'o', 'New Invoice', 'tiki-edit_invoice.php', 791, 'feature_invoice', 'tiki_p_admin', '', 0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'r', 'TimeSheet', 'tiki-timesheet.php', 1270, 'feature_time_sheet', '', '', 0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r',  'Reports','tiki-edit_report.php',1275,'feature_reports','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'o', 'TimeSheet', 'tiki-timesheet.php', 39, 'feature_time_sheet', '', '', 0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o',  'Reports','tiki-edit_report.php',38,'feature_reports','tiki_p_admin','',0);
 
 DROP TABLE IF EXISTS `tiki_menus`;
 CREATE TABLE `tiki_menus` (

------------------------------------------------------------------------
r45025 | jonnybradley | 2013-03-01 16:54:01 -0400 (sex, 01 mar 2013) | 1 line

[FIX] tiki.sql: Missing schema updates from r44998 and r45024 (token groups and sefurl trackers)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 45024)
+++ tiki.sql	(revision 45025)
@@ -3154,7 +3154,7 @@
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-list_quizzes.php', 'quizzes', '', 'feature_quizzes', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-stats.php', 'stats', '', 'feature_stats', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-list_surveys.php', 'surveys', '', 'feature_surveys', 200);
-INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-list_trackers.php', 'trackers', '', 'feature_trackers', 200);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-list_trackers.php', 'trackers', 'tracker', 'feature_trackers', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-sheets.php', 'sheets', '', 'feature_sheet', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-view_tracker_item.php\\?trackerId=(\\d+)\\&itemId=(\\d+)', 'item$2', 'trackeritem', 'feature_trackers', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-view_tracker_item.php\\?itemId=(\\d+)', 'item$1', 'trackeritem', 'feature_trackers', 200);
@@ -3256,7 +3256,7 @@
     `entry` VARCHAR(50),
     `email` varchar(255) NOT NULL,
     `parameters` VARCHAR(255),
-    `groups` VARCHAR(255),
+    `groups` TEXT,
     PRIMARY KEY( `tokenId` ),
     KEY `tiki_auth_tokens_token` (`token`)
 ) ENGINE=MyISAM;

------------------------------------------------------------------------
r44933 | sylvieg | 2013-02-20 08:34:04 -0400 (qua, 20 fev 2013) | 1 line

[FIX]anonymous can attach files

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 44932)
+++ tiki.sql	(revision 44933)
@@ -2570,7 +2570,7 @@
   `filename` varchar(255) default NULL,
   `filetype` varchar(80) default NULL,
   `filesize` int(14) default NULL,
-  `user` varchar(200) NOT NULL default '',
+  `user` varchar(200) default NULL,
   `data` longblob,
   `path` varchar(255) default NULL,
   `hits` int(10) default NULL,

------------------------------------------------------------------------
r44269 | lphuberdeau | 2012-12-13 15:11:04 -0400 (qui, 13 dez 2012) | 1 line

[MOD] Allow longer module zone names in table (1 character is limited)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 44268)
+++ tiki.sql	(revision 44269)
@@ -1519,7 +1519,7 @@
 CREATE TABLE `tiki_modules` (
   `moduleId` int(8) NOT NULL auto_increment,
   `name` varchar(200) NOT NULL default '',
-  `position` char(1) NOT NULL DEFAULT '',
+  `position` varchar(20) NOT NULL DEFAULT '',
   `ord` int(4) NOT NULL DEFAULT '0',
   `type` char(1) default NULL,
   `title` varchar(255) default NULL,
@@ -1529,16 +1529,16 @@
   `groups` text,
   PRIMARY KEY (`moduleId`),
   KEY `positionType` (position, type),
-  KEY `namePosOrdParam` (`name`(100), `position`, `ord`, `params`(140))
+  KEY `namePosOrdParam` (`name`(100), `position`, `ord`, `params`(120))
 ) ENGINE=MyISAM;
 
 INSERT INTO `tiki_modules` (name,position,ord,cache_time,params,groups) VALUES
-    ('menu','l',1,7200,'id=42&flip=y','a:1:{i:0;s:10:"Registered";}'),
-    ('logo','t',1,7200,'nobox=y','a:0:{}'),
-    ('login_box','t',2,0,'mode=popup&nobox=y','a:0:{}'),
-    ('quickadmin','t',3,7200,'nobox=y','a:1:{i:0;s:6:"Admins";}'),
-    ('rsslist','b',1,7200,'nobox=y','a:0:{}'),
-    ('poweredby','b',2,7200,'nobox=y&icons=n&version=n','a:0:{}');
+    ('menu','left',1,7200,'id=42&flip=y','a:1:{i:0;s:10:"Registered";}'),
+    ('logo','top',1,7200,'nobox=y','a:0:{}'),
+    ('login_box','top',2,0,'mode=popup&nobox=y','a:0:{}'),
+    ('quickadmin','top',3,7200,'nobox=y','a:1:{i:0;s:6:"Admins";}'),
+    ('rsslist','bottom',1,7200,'nobox=y','a:0:{}'),
+    ('poweredby','bottom',2,7200,'nobox=y&icons=n&version=n','a:0:{}');
 
 DROP TABLE IF EXISTS `tiki_newsletter_subscriptions`;
 CREATE TABLE `tiki_newsletter_subscriptions` (
@@ -2314,7 +2314,7 @@
 CREATE TABLE `tiki_user_assigned_modules` (
   `moduleId` int(8) NOT NULL,
   `name` varchar(200) NOT NULL default '',
-  `position` char(1) default NULL,
+  `position` varchar(20) default NULL,
   `ord` int(4) default NULL,
   `type` char(1) default NULL,
   `user` varchar(200) NOT NULL default '',

------------------------------------------------------------------------
r44234 | changi67 | 2012-12-11 06:25:27 -0400 (ter, 11 dez 2012) | 9 lines

Revision: 44234
          http://tikiwiki.svn.sourceforge.net/tikiwiki/?rev=44234&view=rev
			 Author:   lphuberdeau
			 Date:     2012-12-10 19:02:32 +0000 (Mon, 10 Dec 2012)
			 Log Message:
			 -----------
			 [MRG] Automatic merge, branches/10.x 44225 to 44233



Index: tiki.sql
===================================================================
--- tiki.sql	(revision 44233)
+++ tiki.sql	(revision 44234)
@@ -2318,7 +2318,8 @@
   `ord` int(4) default NULL,
   `type` char(1) default NULL,
   `user` varchar(200) NOT NULL default '',
-  PRIMARY KEY (`name`(30),`user`,`position`, `ord`)
+  PRIMARY KEY (`name`(30),`user`,`position`, `ord`),
+  KEY `id` (moduleId)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_user_bookmarks_folders`;

------------------------------------------------------------------------
r44192 | arildb | 2012-12-05 06:16:21 -0400 (qua, 05 dez 2012) | 2 lines

[ROLLBACK][r44185] "Allow for longer relations. Especially for 'tiki.link.*'."
The table attribute change: tiki-object_relations.relation can be set back to 70, since pagenames are no loger stored as tiki.link types.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 44191)
+++ tiki.sql	(revision 44192)
@@ -3397,7 +3397,7 @@
 DROP TABLE IF EXISTS `tiki_object_relations`;
 CREATE TABLE `tiki_object_relations` (
     `relationId` INT PRIMARY KEY AUTO_INCREMENT,
-    `relation` varchar(255) NOT NULL,
+    `relation` varchar(70) NOT NULL,
     `source_type` varchar(50) NOT NULL,
     `source_itemId` varchar(160) NOT NULL,
     `target_type` varchar(50) NOT NULL,

------------------------------------------------------------------------
r44185 | arildb | 2012-12-03 18:21:43 -0400 (seg, 03 dez 2012) | 1 line

[DB] Allow for longer relations. Especially for 'tiki.link.*'

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 44184)
+++ tiki.sql	(revision 44185)
@@ -3397,7 +3397,7 @@
 DROP TABLE IF EXISTS `tiki_object_relations`;
 CREATE TABLE `tiki_object_relations` (
     `relationId` INT PRIMARY KEY AUTO_INCREMENT,
-    `relation` varchar(70) NOT NULL,
+    `relation` varchar(255) NOT NULL,
     `source_type` varchar(50) NOT NULL,
     `source_itemId` varchar(160) NOT NULL,
     `target_type` varchar(50) NOT NULL,

------------------------------------------------------------------------
r43473 | arildb | 2012-10-16 14:31:12 -0400 (ter, 16 out 2012) | 1 line

[FIX] Make sure action log comment has enough space

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 43472)
+++ tiki.sql	(revision 43473)
@@ -84,7 +84,7 @@
   `objectType` varchar(32) NOT NULL default '',
   `user` varchar(200) default '',
   `ip` varchar(39) default NULL,
-  `comment` varchar(255) default NULL,
+  `comment` text default NULL,
   `categId` int(12) NOT NULL default '0',
     `client` VARCHAR( 200 ) NULL DEFAULT NULL,
   PRIMARY KEY (`actionId`),

------------------------------------------------------------------------
r43250 | jonnybradley | 2012-10-02 14:17:23 -0400 (ter, 02 out 2012) | 1 line

[ENH] areas: Add "exclusive", "share_common" & "enabled" fields to areas, deploy "enabled" and modernise binderlib db access (exclusive & share_common to come...)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 43249)
+++ tiki.sql	(revision 43250)
@@ -3685,6 +3685,9 @@
 CREATE TABLE `tiki_areas` (
     `categId` int(11) NOT NULL,
     `perspectives` text,
+    `exclusive` char(1) NOT NULL DEFAULT 'n',
+    `share_common` char(1) NOT NULL DEFAULT 'y',
+    `enabled` char(1)  NOT NULL DEFAULT 'y',
     KEY `categId` (`categId`)
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r43168 | jonnybradley | 2012-09-27 09:03:11 -0400 (qui, 27 set 2012) | 1 line

[MRG] Automatic merge, branches/9.x 43163 to 43167

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 43167)
+++ tiki.sql	(revision 43168)
@@ -1480,10 +1480,11 @@
   `type` char(1) default NULL,
   `icon` varchar(200) default NULL,
   `use_items_icons` char(1) NOT NULL DEFAULT 'n',
+  `parse` char(1)  NOT NULL  DEFAULT 'n',
   PRIMARY KEY (`menuId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-INSERT INTO tiki_menus (`menuId`,name,description,type) VALUES ('42','Application menu','Main extensive navigation menu','d');
+INSERT INTO tiki_menus (`menuId`,`name`,`description`,`type`,`parse`) VALUES ('42','Application menu','Main extensive navigation menu','d','n');
 
 DROP TABLE IF EXISTS `tiki_minical_events`;
 CREATE TABLE `tiki_minical_events` (

------------------------------------------------------------------------
r43011 | lphuberdeau | 2012-09-17 11:37:35 -0400 (seg, 17 set 2012) | 1 line

[FIX]Â Missing tiki.sql update

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 43010)
+++ tiki.sql	(revision 43011)
@@ -438,6 +438,7 @@
   `name` varchar(100) default NULL,
   `description` varchar(250) default NULL,
   `parentId` int(12) default NULL,
+  `rootId` int NOT NULL DEFAULT 0,
   `hits` int(8) default NULL,
   PRIMARY KEY (`categId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;

------------------------------------------------------------------------
r42817 | lindonb | 2012-09-03 20:19:46 -0400 (seg, 03 set 2012) | 1 line

[ENH] Implement partially metadata extraction for file gallery files. Metadata is extracted from file and stored in database upon upload, including for drafts and archives. Data can be viewed when "Properties" is clicked for a file (this also extracts and puts metadata into db if not already there). Extended data extracted for JPEG files, just basic file information for other file types.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 42816)
+++ tiki.sql	(revision 42817)
@@ -788,6 +788,7 @@
   `is_reference` char(1) default NULL,
   `hash` varchar(32) default NULL,
   `search_data` longtext,
+  `metadata` longtext,
   `lastModif` integer(14) DEFAULT NULL,
   `lastModifUser` varchar(200) DEFAULT NULL,
   `lockedby` varchar(200) default '',
@@ -813,6 +814,7 @@
   `user` varchar(200) default '',
   `path` varchar(255) default NULL,
   `hash` varchar(32) default NULL,
+  `metadata` longtext,
   `lastModif` integer(14) DEFAULT NULL,
   `lockedby` varchar(200) default '',
   PRIMARY KEY (`fileId`, `user`)

------------------------------------------------------------------------
r42785 | arildb | 2012-08-28 15:25:42 -0400 (ter, 28 ago 2012) | 1 line

[FIX] Specify Engine=MySAM to make the innodb user selection work

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 42784)
+++ tiki.sql	(revision 42785)
@@ -3731,4 +3731,4 @@
 	`name` VARCHAR(50),
 	`definition` TEXT,
 	`is_advanced` CHAR(1) NOT NULL DEFAULT 'n'
-);
+) ENGINE=MyISAM;

------------------------------------------------------------------------
r42732 | xavidp | 2012-08-25 10:18:49 -0400 (sÃ¡b, 25 ago 2012) | 1 line

[FIX]Add menu entries for accounting feature (for some reason they were missing)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 42731)
+++ tiki.sql	(revision 42732)
@@ -1375,6 +1375,8 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Sheets','tiki-sheets.php',782,'feature_sheet','tiki_p_view_sheet','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Trackers','tiki-list_trackers.php',800,'feature_trackers','tiki_p_list_trackers','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Trackers','tiki-list_trackers.php',805,'feature_trackers','tiki_p_list_trackers','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s', 'Accounting', 'tiki-accounting_books.php', 830, 'feature_accounting', 'tiki_p_acct_view', '', 0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o', 'Accounting books', 'tiki-accounting_books.php', 835, 'feature_accounting', 'tiki_p_acct_view', '', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Surveys','tiki-list_surveys.php',850,'feature_surveys','tiki_p_take_survey','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Surveys','tiki-list_surveys.php',855,'feature_surveys','tiki_p_take_survey','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Stats','tiki-survey_stats.php',860,'feature_surveys','tiki_p_view_survey_stats','',0);

------------------------------------------------------------------------
r42710 | lphuberdeau | 2012-08-24 08:50:54 -0400 (sex, 24 ago 2012) | 1 line

[NEW]Â Adding advanced workspace template editing for maximum flexibility until the UI provides the required features

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 42709)
+++ tiki.sql	(revision 42710)
@@ -3727,5 +3727,6 @@
 CREATE TABLE `tiki_workspace_templates` (
 	`templateId` INT PRIMARY KEY AUTO_INCREMENT,
 	`name` VARCHAR(50),
-	`definition` TEXT
+	`definition` TEXT,
+	`is_advanced` CHAR(1) NOT NULL DEFAULT 'n'
 );

------------------------------------------------------------------------
r42685 | lphuberdeau | 2012-08-23 06:46:04 -0400 (qui, 23 ago 2012) | 1 line

[MOD] Introducing workspace templates, which don't have much information yet, but adds non-admin permissions for creating workspaces

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 42684)
+++ tiki.sql	(revision 42685)
@@ -3721,4 +3721,11 @@
   `message`   TEXT NULL ,
   `attempts`  INT NOT NULL DEFAULT 0 ,
   PRIMARY KEY (`messageId`) 
-) ENGINE=MyISAM AUTO_INCREMENT=1;
\ No newline at end of file
+) ENGINE=MyISAM AUTO_INCREMENT=1;
+
+DROP TABLE IF EXISTS `tiki_workspace_templates`;
+CREATE TABLE `tiki_workspace_templates` (
+	`templateId` INT PRIMARY KEY AUTO_INCREMENT,
+	`name` VARCHAR(50),
+	`definition` TEXT
+);

------------------------------------------------------------------------
r42684 | xavidp | 2012-08-23 06:30:40 -0400 (qui, 23 ago 2012) | 1 line

Added an entry at the menu for admin tiki user credits (for some reason, there was no link anywhere). Added also for new installs

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 42683)
+++ tiki.sql	(revision 42684)
@@ -1413,6 +1413,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Live Support','tiki-live_support_admin.php',1055,'feature_live_support','user_is_operator','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Banning','tiki-admin_banning.php',1060,'feature_banning','tiki_p_admin_banning','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Calendar','tiki-admin_calendars.php',1065,'feature_calendar','tiki_p_admin_calendar','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin credits','tiki-admin_credits.php',1067,'payment_feature','tiki_p_admin_users','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Users','tiki-adminusers.php',1070,'','tiki_p_admin_users','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Groups','tiki-admingroups.php',1075,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','External Pages Cache','tiki-list_cache.php',1080,'cachepages','tiki_p_admin','',0);

------------------------------------------------------------------------
r42179 | jonnybradley | 2012-07-02 09:52:06 -0400 (seg, 02 jul 2012) | 1 line

[MRG] Automatic merge, branches/9.x 42154 to 42177

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 42178)
+++ tiki.sql	(revision 42179)
@@ -2673,7 +2673,7 @@
   `challenge` varchar(32) default NULL,
   `pass_confirm` int(14) default NULL,
   `email_confirm` int(14) default NULL,
-  `hash` varchar(34) default NULL,
+  `hash` varchar(60) default NULL,
   `created` int(14) default NULL,
   `avatarName` varchar(80) default NULL,
   `avatarSize` int(14) default NULL,

------------------------------------------------------------------------
r42155 | jonnybradley | 2012-06-28 12:24:38 -0400 (qui, 28 jun 2012) | 1 line

[MRG] Automatic merge, branches/9.x 42130 to 42154

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 42154)
+++ tiki.sql	(revision 42155)
@@ -2694,8 +2694,7 @@
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 -- Administrator account
-INSERT INTO users_users(email,login,password,hash) VALUES ('','admin','admin',md5('adminadmin'));
-UPDATE users_users set `currentLogin`=`lastLogin`, `registrationDate`=`lastLogin`;
+INSERT INTO users_users(email,login,password,hash,created,registrationDate) VALUES ('','admin','admin',md5('adminadmin'),UNIX_TIMESTAMP(),UNIX_TIMESTAMP());
 INSERT INTO tiki_user_preferences (user,`prefName`,value) VALUES ('admin','realName','System Administrator');
 INSERT INTO users_usergroups (`userId`, `groupName`) VALUES(1,'Admins');
 INSERT INTO users_grouppermissions (`groupName`, `permName`) VALUES ('Admins','tiki_p_admin');

------------------------------------------------------------------------
r41756 | arildb | 2012-06-04 15:41:55 -0400 (seg, 04 jun 2012) | 1 line

[NEW] add field for copyright holder. The copyright holder is not necessarily the author(s).

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 41755)
+++ tiki.sql	(revision 41756)
@@ -593,6 +593,7 @@
   `title` varchar(200) default NULL,
   `year` int(11) default NULL,
   `authors` varchar(200) default NULL,
+  `holder` varchar(200) default NULL,  
   `copyright_order` int(11) default NULL,
   `userName` varchar(200) default '',
   PRIMARY KEY (`copyrightId`)

------------------------------------------------------------------------
r41478 | lrrcenter | 2012-05-16 12:18:21 -0400 (qua, 16 mai 2012) | 1 line

[FIX] Mail queue. "Engine = MyISAM" is required after the create table statement.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 41477)
+++ tiki.sql	(revision 41478)
@@ -3720,4 +3720,4 @@
   `message`   TEXT NULL ,
   `attempts`  INT NOT NULL DEFAULT 0 ,
   PRIMARY KEY (`messageId`) 
-);
\ No newline at end of file
+) ENGINE=MyISAM AUTO_INCREMENT=1;
\ No newline at end of file

------------------------------------------------------------------------
r41477 | lrrcenter | 2012-05-16 11:44:11 -0400 (qua, 16 mai 2012) | 1 line

[FIX] Mail queue. Missing sql instructions for new installs in db/tiki.sql

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 41476)
+++ tiki.sql	(revision 41477)
@@ -3713,3 +3713,11 @@
   `other` varchar(100) DEFAULT NULL,
   PRIMARY KEY (`id`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
+
+DROP TABLE IF EXISTS `tiki_mail_queue`;
+CREATE TABLE `tiki_mail_queue` (
+  `messageId` INT NOT NULL AUTO_INCREMENT ,
+  `message`   TEXT NULL ,
+  `attempts`  INT NOT NULL DEFAULT 0 ,
+  PRIMARY KEY (`messageId`) 
+);
\ No newline at end of file

------------------------------------------------------------------------
r41267 | jonnybradley | 2012-05-01 14:35:01 -0400 (ter, 01 mai 2012) | 3 lines

[MRG] Automatic merge, branches/9.x 41183 to 41266
Fixed lang file conflicts using "mine-conflict"


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 41266)
+++ tiki.sql	(revision 41267)
@@ -263,12 +263,12 @@
   `excerpt` text default NULL,
   `created` int(14) default NULL,
   `user` varchar(200) default '',
+  `hits` bigint NULL default '0',
   `trackbacks_to` text,
   `trackbacks_from` text,
   `title` varchar(255) default NULL,
   `priv` varchar(1) default 'n',
   `wysiwyg` varchar(1) default NULL,
-  `hits` bigint NULL default '0',
   PRIMARY KEY (`postId`),
   KEY `data` (`data`(255)),
   KEY `blogId` (`blogId`),
@@ -755,7 +755,7 @@
   `image_max_size_x` int(8) NOT NULL default '0',
   `image_max_size_y` int(8) NOT NULL default '0',
   `show_source` char(1) NOT NULL DEFAULT 'o',
-  `icon_fileId` int(14) NULL DEFAULT NULL,
+  `icon_fileId` int(14) UNSIGNED NULL DEFAULT NULL,
   PRIMARY KEY (`galleryId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -1024,7 +1024,6 @@
   `data` longblob,
   `type` varchar(50) default NULL,
   `is_html` TINYINT(1) NOT NULL DEFAULT 0,
-  `status` varchar(60) default '',
   PRIMARY KEY (`pageName`,`version`),
   KEY `user` (`user`),
   KEY (`historyId`)
@@ -1631,7 +1630,6 @@
   `wiki_authors_style` varchar(20) default '',
   `comments_enabled` char(1) default NULL,
   `keywords` TEXT,
-  `status` varchar(60) default '',
   PRIMARY KEY (`page_id`),
   UNIQUE KEY `pageName` (`pageName`),
   KEY `data` (`data`(255)),

------------------------------------------------------------------------
r41169 | jonnybradley | 2012-04-29 09:53:16 -0400 (dom, 29 abr 2012) | 3 lines

[MRG] Automatic merge, branches/9.x 41052 to 41165
Conflicts manually fixed on db/tiki_convert_myisam_to_innodb.sql, db/tiki.sql, lib/tikilib.php (Authors please double check merge)


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 41168)
+++ tiki.sql	(revision 41169)
@@ -1459,6 +1459,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o', 'List Media', 'tiki-list_kaltura_entries.php', 952, 'feature_kaltura', 'tiki_p_admin | tiki_p_admin_kaltura | tiki_p_list_videos', '', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o', 'Upload Media', 'tiki-kaltura_upload.php', 954, 'feature_kaltura', 'tiki_p_admin | tiki_p_admin_kaltura | tiki_p_upload_videos', '', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Permissions','tiki-objectpermissions.php',1077,'','tiki_p_admin|tiki_p_admin_objects','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Perspectives','tiki-edit_perspective.php',1081,'feature_perspective','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Social networks','tiki-socialnetworks.php',115,'feature_mytiki,feature_socialnetworks','tiki_p_socialnetworks|tiki_p_admin_socialnetworks','Registered',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'r', 'Invoice', 'tiki-list_invoices.php', 790, 'feature_invoice', 'tiki_p_admin', '', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'o', 'New Invoice', 'tiki-edit_invoice.php', 791, 'feature_invoice', 'tiki_p_admin', '', 0);
@@ -3704,3 +3705,13 @@
 ALTER TABLE tiki_page_references ADD UNIQUE INDEX uk1_tiki_page_ref_biblio_code (page_id, biblio_code);
 ALTER TABLE tiki_page_references ADD INDEX idx_tiki_page_ref_title (title);
 ALTER TABLE tiki_page_references ADD INDEX idx_tiki_page_ref_author (author);
+
+DROP TABLE IF EXISTS `tiki_db_status`;
+CREATE TABLE `tiki_db_status` (
+  `id` int(11) NOT NULL AUTO_INCREMENT,
+  `objectId` varchar(100) NOT NULL,
+  `tableName` varchar(100) NOT NULL,
+  `status` varchar(100) NOT NULL,
+  `other` varchar(100) DEFAULT NULL,
+  PRIMARY KEY (`id`)
+) ENGINE=MyISAM AUTO_INCREMENT=1;

------------------------------------------------------------------------
r41133 | arildb | 2012-04-27 04:16:38 -0400 (sex, 27 abr 2012) | 1 line

[FIX] Fix syntax errors

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 41132)
+++ tiki.sql	(revision 41133)
@@ -2384,7 +2384,7 @@
   `title` varchar(40) default NULL,
   `data` longblob,
   `parse` char(1) default NULL,
-  `status` VARCHAR(60) default ''  
+  `status` VARCHAR(60) default '',  
   PRIMARY KEY (`name`)
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r41056 | arildb | 2012-04-23 13:45:06 -0400 (seg, 23 abr 2012) | 1 line

[NEW] Local reference handling added. See http://doc.tiki.org/References for the doc

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 41055)
+++ tiki.sql	(revision 41056)
@@ -2384,6 +2384,7 @@
   `title` varchar(40) default NULL,
   `data` longblob,
   `parse` char(1) default NULL,
+  `status` VARCHAR(60) default ''  
   PRIMARY KEY (`name`)
 ) ENGINE=MyISAM;
 
@@ -3680,3 +3681,26 @@
     `perspectives` text,
     KEY `categId` (`categId`)
 ) ENGINE=MyISAM;
+
+DROP TABLE IF EXISTS `tiki_page_references`;
+CREATE TABLE `tiki_page_references` (
+  `ref_id` INT(14) NOT NULL AUTO_INCREMENT,
+  `page_id` INT(14) DEFAULT NULL,
+  `biblio_code` VARCHAR(50) DEFAULT NULL,
+  `author` VARCHAR(255) DEFAULT NULL,
+  `title` VARCHAR(255) DEFAULT NULL,
+  `part` VARCHAR(255) DEFAULT NULL,
+  `uri` VARCHAR(255) DEFAULT NULL,
+  `code` VARCHAR(255) DEFAULT NULL,
+  `year` VARCHAR(255) DEFAULT NULL,
+  `publisher` VARCHAR(255) DEFAULT NULL,
+  `location` VARCHAR(255)  DEFAULT NULL,
+  `style` VARCHAR(30) DEFAULT NULL,
+  `template` varchar(255) DEFAULT NULL,
+  `last_modified` timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,  
+  PRIMARY KEY (`ref_id`),
+  KEY `PageId` (`page_id`)
+) ENGINE=MyISAM;
+ALTER TABLE tiki_page_references ADD UNIQUE INDEX uk1_tiki_page_ref_biblio_code (page_id, biblio_code);
+ALTER TABLE tiki_page_references ADD INDEX idx_tiki_page_ref_title (title);
+ALTER TABLE tiki_page_references ADD INDEX idx_tiki_page_ref_author (author);

------------------------------------------------------------------------
r41053 | robertplummer | 2012-04-23 12:30:27 -0400 (seg, 23 abr 2012) | 1 line

[MRG] Automatic merge, branches/9.x 41031 to 41052

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 41052)
+++ tiki.sql	(revision 41053)
@@ -1635,7 +1635,7 @@
   UNIQUE KEY `pageName` (`pageName`),
   KEY `data` (`data`(255)),
   KEY `pageRank` (`pageRank`),
-  KEY `lastModif`(`lastModif`),
+  KEY `lastModif`(`lastModif`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
 DROP TABLE IF EXISTS `tiki_pageviews`;
@@ -2812,7 +2812,7 @@
 
 DROP TABLE IF EXISTS `tiki_file_handlers`;
 CREATE TABLE `tiki_file_handlers` (
-  `mime_type` varchar(64) default NULL,
+  `mime_type` varchar(128) default NULL,
   `cmd` varchar(238) default NULL
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r41023 | sylvieg | 2012-04-21 20:10:48 -0400 (sÃ¡b, 21 abr 2012) | 1 line

[MRG] Automatic merge, branches/9.x 40948 to 41022

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 41022)
+++ tiki.sql	(revision 41023)
@@ -1024,6 +1024,7 @@
   `data` longblob,
   `type` varchar(50) default NULL,
   `is_html` TINYINT(1) NOT NULL DEFAULT 0,
+  `status` varchar(60) default '',
   PRIMARY KEY (`pageName`,`version`),
   KEY `user` (`user`),
   KEY (`historyId`)
@@ -1628,12 +1629,13 @@
   `wysiwyg` char(1) default NULL,
   `wiki_authors_style` varchar(20) default '',
   `comments_enabled` char(1) default NULL,
-  `keywords` TEXT, 
+  `keywords` TEXT,
+  `status` varchar(60) default '',
   PRIMARY KEY (`page_id`),
   UNIQUE KEY `pageName` (`pageName`),
   KEY `data` (`data`(255)),
   KEY `pageRank` (`pageRank`),
-  KEY `lastModif`(`lastModif`)
+  KEY `lastModif`(`lastModif`),
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
 DROP TABLE IF EXISTS `tiki_pageviews`;

------------------------------------------------------------------------
r40627 | marclaporte | 2012-04-01 18:50:37 -0400 (dom, 01 abr 2012) | 1 line

Update menu to nicer label for new installs

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 40626)
+++ tiki.sql	(revision 40627)
@@ -1455,7 +1455,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_faq_comments','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Contribution','tiki-admin_contribution.php',1265,'feature_contribution','tiki_p_admin_contribution','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s', 'Kaltura Video', 'tiki-list_kaltura_entries.php', 950, 'feature_kaltura', 'tiki_p_admin | tiki_p_admin_kaltura | tiki_p_list_videos', '', 0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o', 'List Entries', 'tiki-list_kaltura_entries.php', 952, 'feature_kaltura', 'tiki_p_admin | tiki_p_admin_kaltura | tiki_p_list_videos', '', 0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o', 'List Media', 'tiki-list_kaltura_entries.php', 952, 'feature_kaltura', 'tiki_p_admin | tiki_p_admin_kaltura | tiki_p_list_videos', '', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o', 'Upload Media', 'tiki-kaltura_upload.php', 954, 'feature_kaltura', 'tiki_p_admin | tiki_p_admin_kaltura | tiki_p_upload_videos', '', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Permissions','tiki-objectpermissions.php',1077,'','tiki_p_admin|tiki_p_admin_objects','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Social networks','tiki-socialnetworks.php',115,'feature_mytiki,feature_socialnetworks','tiki_p_socialnetworks|tiki_p_admin_socialnetworks','Registered',0);

------------------------------------------------------------------------
r40355 | jonnybradley | 2012-03-24 13:54:25 -0400 (sÃ¡b, 24 mar 2012) | 1 line

[ENH] filegals: Add ability to make the icon for galleries in browse mode a thumbnail by specifying an image fileId (can be in any other gallery)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 40354)
+++ tiki.sql	(revision 40355)
@@ -754,7 +754,8 @@
   `show_share` char(1) default NULL,
   `image_max_size_x` int(8) NOT NULL default '0',
   `image_max_size_y` int(8) NOT NULL default '0',
-  show_source CHAR(1) NOT NULL DEFAULT 'o',
+  `show_source` char(1) NOT NULL DEFAULT 'o',
+  `icon_fileId` int(14) NULL DEFAULT NULL,
   PRIMARY KEY (`galleryId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r40329 | robertplummer | 2012-03-23 15:59:05 -0400 (sex, 23 mar 2012) | 1 line

[FIX] Ensured basic functionality is working

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 40328)
+++ tiki.sql	(revision 40329)
@@ -1373,7 +1373,6 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Sheets','tiki-sheets.php',782,'feature_sheet','tiki_p_view_sheet','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Trackers','tiki-list_trackers.php',800,'feature_trackers','tiki_p_list_trackers','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Trackers','tiki-list_trackers.php',805,'feature_trackers','tiki_p_list_trackers','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tracker Reports','tiki-tracker_reports.php',812,'feature_tracker_reports','tiki_p_admin_trackers','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Surveys','tiki-list_surveys.php',850,'feature_surveys','tiki_p_take_survey','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Surveys','tiki-list_surveys.php',855,'feature_surveys','tiki_p_take_survey','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Stats','tiki-survey_stats.php',860,'feature_surveys','tiki_p_view_survey_stats','',0);
@@ -1462,6 +1461,8 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'r', 'Invoice', 'tiki-list_invoices.php', 790, 'feature_invoice', 'tiki_p_admin', '', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'o', 'New Invoice', 'tiki-edit_invoice.php', 791, 'feature_invoice', 'tiki_p_admin', '', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'r', 'TimeSheet', 'tiki-timesheet.php', 1270, 'feature_time_sheet', '', '', 0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r',  'Reports','tiki-edit_report.php',1275,'feature_reports','tiki_p_admin','',0);
+
 DROP TABLE IF EXISTS `tiki_menus`;
 CREATE TABLE `tiki_menus` (
   `menuId` int(8) NOT NULL auto_increment,

------------------------------------------------------------------------
r40272 | chealer | 2012-03-20 15:12:21 -0400 (ter, 20 mar 2012) | 4 lines

[ENH] Trackers: Merge tiki-list_trackers and tiki-admin_trackers, using the generalized tiki-admin_trackers. The new interface is tiki-list_trackers.
Reference: http://article.gmane.org/gmane.comp.cms.tiki.devel/25367
In list_trackers, creation and last modification dates do not show the time anymore (could be useful, but too noisy in current presentation)
The new interface is generally called "Trackers", sometimes "List Trackers"

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 40271)
+++ tiki.sql	(revision 40272)
@@ -1373,7 +1373,6 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Sheets','tiki-sheets.php',782,'feature_sheet','tiki_p_view_sheet','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Trackers','tiki-list_trackers.php',800,'feature_trackers','tiki_p_list_trackers','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Trackers','tiki-list_trackers.php',805,'feature_trackers','tiki_p_list_trackers','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Trackers','tiki-admin_trackers.php',810,'feature_trackers','tiki_p_admin_trackers','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tracker Reports','tiki-tracker_reports.php',812,'feature_tracker_reports','tiki_p_admin_trackers','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Surveys','tiki-list_surveys.php',850,'feature_surveys','tiki_p_take_survey','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Surveys','tiki-list_surveys.php',855,'feature_surveys','tiki_p_take_survey','',0);

------------------------------------------------------------------------
r40195 | chealer | 2012-03-15 14:08:53 -0400 (qui, 15 mar 2012) | 3 lines

[ENH] Articles: Also add a maximum vertical size for custom images specific to list mode
[ENH] Add default for dimension limits to custom images specific to list mode (approach of r27943)
Sylvie: big_image from tiki-read_article.tpl will not consider this. If you can explain what big_image means, that should probably be changed...

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 40194)
+++ tiki.sql	(revision 40195)
@@ -122,6 +122,7 @@
   `image_x` int(4) default NULL,
   `image_y` int(4) default NULL,
   `list_image_x` int(4) default NULL,
+  `list_image_y` int(4) default NULL,
   `image_data` longblob,
   `publishDate` int(14) default NULL,
   `expireDate` int(14) default NULL,

------------------------------------------------------------------------
r39718 | sampaioprimo | 2012-02-01 13:32:04 -0400 (qua, 01 fev 2012) | 1 line

remove unused column from tiki_user_reports

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 39717)
+++ tiki.sql	(revision 39718)
@@ -3190,7 +3190,6 @@
   `interval` varchar(20) NOT NULL,
   `view` varchar(8) NOT NULL,
   `type` varchar(5) NOT NULL,
-  `time_to_send` datetime NULL default 0,
   `always_email` tinyint(1) NOT NULL,
   `last_report` datetime NOT NULL,
   PRIMARY KEY (`id`)

------------------------------------------------------------------------
r39514 | chealer | 2012-01-16 16:25:54 -0400 (seg, 16 jan 2012) | 1 line

[REM] Remove show_lang option for article types (Show language). Badly implemented and can now be globally replaced by show_available translations

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 39513)
+++ tiki.sql	(revision 39514)
@@ -168,7 +168,6 @@
   `show_subtitle` varchar(1) default 'n',
   `show_linkto` varchar(1) default 'n',
   `show_image_caption` varchar(1) default 'n',
-  `show_lang` varchar(1) default 'n',
   `creator_edit` varchar(1) default NULL,
   `comment_can_rate_article` char(1) default NULL,
   PRIMARY KEY (`type`),

------------------------------------------------------------------------
r39147 | gregmartin | 2011-12-11 23:15:31 -0400 (dom, 11 dez 2011) | 1 line

[FIX] db type for blog post hits

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 39146)
+++ tiki.sql	(revision 39147)
@@ -268,7 +268,7 @@
   `title` varchar(255) default NULL,
   `priv` varchar(1) default 'n',
   `wysiwyg` varchar(1) default NULL,
-  `hist` bigint NULL default '0',
+  `hits` bigint NULL default '0',
   PRIMARY KEY (`postId`),
   KEY `data` (`data`(255)),
   KEY `blogId` (`blogId`),

------------------------------------------------------------------------
r39145 | gregmartin | 2011-12-11 22:36:16 -0400 (dom, 11 dez 2011) | 1 line

[ADD] rack blog post hits

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 39144)
+++ tiki.sql	(revision 39145)
@@ -268,6 +268,7 @@
   `title` varchar(255) default NULL,
   `priv` varchar(1) default 'n',
   `wysiwyg` varchar(1) default NULL,
+  `hist` bigint NULL default '0',
   PRIMARY KEY (`postId`),
   KEY `data` (`data`(255)),
   KEY `blogId` (`blogId`),

------------------------------------------------------------------------
r38277 | robertplummer | 2011-10-14 11:38:26 -0400 (sex, 14 out 2011) | 2 lines

[FIX] Added feature check for tracers
[NEW] Added menu schema items for timesheet

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 38276)
+++ tiki.sql	(revision 38277)
@@ -1461,7 +1461,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Social networks','tiki-socialnetworks.php',115,'feature_mytiki,feature_socialnetworks','tiki_p_socialnetworks|tiki_p_admin_socialnetworks','Registered',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'r', 'Invoice', 'tiki-list_invoices.php', 790, 'feature_invoice', 'tiki_p_admin', '', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'o', 'New Invoice', 'tiki-edit_invoice.php', 791, 'feature_invoice', 'tiki_p_admin', '', 0);
-
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'r', 'TimeSheet', 'tiki-timesheet.php', 1270, 'feature_time_sheet', '', '', 0);
 DROP TABLE IF EXISTS `tiki_menus`;
 CREATE TABLE `tiki_menus` (
   `menuId` int(8) NOT NULL auto_increment,

------------------------------------------------------------------------
r38276 | sampaioprimo | 2011-10-14 11:20:49 -0400 (sex, 14 out 2011) | 1 line

[MRG] Automatic merge, branches/8.x 38220 to 38272

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 38275)
+++ tiki.sql	(revision 38276)
@@ -2,7 +2,7 @@
 -- Database : Tiki 
 -- --------------------------------------------------------
 
-ALTER DATABASE DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;
+ALTER DATABASE DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci;
 
 DROP TABLE IF EXISTS `messu_messages`;
 CREATE TABLE `messu_messages` (

------------------------------------------------------------------------
r38148 | jonnybradley | 2011-10-11 06:23:49 -0400 (ter, 11 out 2011) | 1 line

[MRG] Automatic merge, branches/8.x 38116 to 38147

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 38147)
+++ tiki.sql	(revision 38148)
@@ -2312,12 +2312,11 @@
 
 DROP TABLE IF EXISTS `tiki_user_bookmarks_folders`;
 CREATE TABLE `tiki_user_bookmarks_folders` (
-  `folderId` int(12) NOT NULL auto_increment,
+  `folderId` int(12) NOT NULL,
   `parentId` int(12) default NULL,
   `user` varchar(200) NOT NULL default '',
   `name` varchar(30) default NULL,
-  PRIMARY KEY (`folderId`),
-  KEY `user` (`user`)
+  PRIMARY KEY (`user`,`folderId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_user_bookmarks_urls`;
@@ -3674,7 +3673,7 @@
 
 DROP TABLE IF EXISTS `tiki_areas`;
 CREATE TABLE `tiki_areas` (
-	`categId` int(11) NOT NULL,
-	`perspectives` text,
-	KEY `categId` (`categId`)
+    `categId` int(11) NOT NULL,
+    `perspectives` text,
+    KEY `categId` (`categId`)
 ) ENGINE=MyISAM;

------------------------------------------------------------------------
r38038 | changi67 | 2011-10-06 16:38:23 -0400 (qui, 06 out 2011) | 1 line

[MRG] Automatic merge, branches/8.x 38024 to 38033

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 38037)
+++ tiki.sql	(revision 38038)
@@ -1846,7 +1846,7 @@
   `referer` varchar(255) NOT NULL default '',
   `hits` int(10) default NULL,
   `last` int(14) default NULL,
-  `lasturl` varchar(255) default NULL,
+  `lasturl` text default NULL,
   PRIMARY KEY (`referer`)
 ) ENGINE=MyISAM;
 
@@ -2230,7 +2230,6 @@
   `itemId` int(12) NOT NULL default '0',
   `fieldId` int(12) NOT NULL default '0',
   `value` text,
-  `lang` char(16) default NULL,
   INDEX `version` (`version`),
   INDEX `itemId` (`itemId`),
   INDEX `fieldId` (`fieldId`)

------------------------------------------------------------------------
r37854 | oeversetten | 2011-10-01 18:05:38 -0400 (sÃ¡b, 01 out 2011) | 4 lines


[DB] add tiki_areas table creation



Index: tiki.sql
===================================================================
--- tiki.sql	(revision 37853)
+++ tiki.sql	(revision 37854)
@@ -3672,3 +3672,10 @@
     PRIMARY KEY (`id`),
     KEY `server` (`server`)
 ) ENGINE=MyISAM;
+
+DROP TABLE IF EXISTS `tiki_areas`;
+CREATE TABLE `tiki_areas` (
+	`categId` int(11) NOT NULL,
+	`perspectives` text,
+	KEY `categId` (`categId`)
+) ENGINE=MyISAM;

------------------------------------------------------------------------
r37704 | robertplummer | 2011-09-26 15:31:18 -0400 (seg, 26 set 2011) | 2 lines

[FIX] Permissions per tracker item are not checked, had to change to admin only
[FIX] Proper error for incorrect permissions

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 37703)
+++ tiki.sql	(revision 37704)
@@ -1373,7 +1373,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Trackers','tiki-list_trackers.php',800,'feature_trackers','tiki_p_list_trackers','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Trackers','tiki-list_trackers.php',805,'feature_trackers','tiki_p_list_trackers','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Trackers','tiki-admin_trackers.php',810,'feature_trackers','tiki_p_admin_trackers','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tracker Reports','tiki-tracker_reports.php',812,'feature_tracker_reports','tiki_p_list_trackers','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tracker Reports','tiki-tracker_reports.php',812,'feature_tracker_reports','tiki_p_admin_trackers','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Surveys','tiki-list_surveys.php',850,'feature_surveys','tiki_p_take_survey','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Surveys','tiki-list_surveys.php',855,'feature_surveys','tiki_p_take_survey','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Stats','tiki-survey_stats.php',860,'feature_surveys','tiki_p_view_survey_stats','',0);

------------------------------------------------------------------------
r37681 | robertplummer | 2011-09-26 10:04:56 -0400 (seg, 26 set 2011) | 1 line

[FIX] Tracker reports permissions

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 37680)
+++ tiki.sql	(revision 37681)
@@ -1373,7 +1373,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Trackers','tiki-list_trackers.php',800,'feature_trackers','tiki_p_list_trackers','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Trackers','tiki-list_trackers.php',805,'feature_trackers','tiki_p_list_trackers','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Trackers','tiki-admin_trackers.php',810,'feature_trackers','tiki_p_admin_trackers','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tracker Reports','tiki-tracker_reports.php',812,'feature_tracker_reports','tiki_p_admin_trackers','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tracker Reports','tiki-tracker_reports.php',812,'feature_tracker_reports','tiki_p_list_trackers','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Surveys','tiki-list_surveys.php',850,'feature_surveys','tiki_p_take_survey','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Surveys','tiki-list_surveys.php',855,'feature_surveys','tiki_p_take_survey','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Stats','tiki-survey_stats.php',860,'feature_surveys','tiki_p_view_survey_stats','',0);

------------------------------------------------------------------------
r37675 | robertplummer | 2011-09-26 08:50:50 -0400 (seg, 26 set 2011) | 1 line

[NEW] Added tracker reports as a feature and menu option, it was already there, might as well make it usable

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 37674)
+++ tiki.sql	(revision 37675)
@@ -1373,6 +1373,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Trackers','tiki-list_trackers.php',800,'feature_trackers','tiki_p_list_trackers','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Trackers','tiki-list_trackers.php',805,'feature_trackers','tiki_p_list_trackers','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Trackers','tiki-admin_trackers.php',810,'feature_trackers','tiki_p_admin_trackers','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tracker Reports','tiki-tracker_reports.php',812,'feature_tracker_reports','tiki_p_admin_trackers','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Surveys','tiki-list_surveys.php',850,'feature_surveys','tiki_p_take_survey','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Surveys','tiki-list_surveys.php',855,'feature_surveys','tiki_p_take_survey','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Stats','tiki-survey_stats.php',860,'feature_surveys','tiki_p_view_survey_stats','',0);

------------------------------------------------------------------------
r37585 | gillesm | 2011-09-23 10:01:26 -0400 (sex, 23 set 2011) | 3 lines

tiki.sql define the lasturl for tiki_referer_stats



Index: tiki.sql
===================================================================
--- tiki.sql	(revision 37584)
+++ tiki.sql	(revision 37585)
@@ -1845,6 +1845,7 @@
   `referer` varchar(255) NOT NULL default '',
   `hits` int(10) default NULL,
   `last` int(14) default NULL,
+  `lasturl` varchar(255) default NULL,
   PRIMARY KEY (`referer`)
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r37472 | arildb | 2011-09-20 16:47:28 -0400 (ter, 20 set 2011) | 1 line

[MERGE] Integrated experimental/innodb branch (rev 37260 to 37457) to trunk

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 37471)
+++ tiki.sql	(revision 37472)
@@ -146,8 +146,7 @@
   KEY `topicId` (`topicId`),
   KEY `publishDate` (`publishDate`),
   KEY `expireDate` (`expireDate`),
-  KEY `type` (`type`),
-  FULLTEXT KEY `ft` (`title`, `heading`, `body`)
+  KEY `type` (`type`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_article_types`;
@@ -272,8 +271,7 @@
   PRIMARY KEY (`postId`),
   KEY `data` (`data`(255)),
   KEY `blogId` (`blogId`),
-  KEY `created` (`created`),
-  FULLTEXT KEY `ft` (`data`, `title`)
+  KEY `created` (`created`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_blog_posts_images`;
@@ -319,8 +317,7 @@
   PRIMARY KEY (`blogId`),
   KEY `title` (`title`),
   KEY `description` (`description`(255)),
-  KEY `hits` (`hits`),
-  FULLTEXT KEY `ft` (`title`, `description`)
+  KEY `hits` (`hits`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_calendar_categories`;
@@ -386,11 +383,7 @@
   `lastmodif` int(14) NOT NULL default '0',
   `allday` tinyint(1) NOT NULL default '0',
   PRIMARY KEY (`calitemId`),
-  KEY `calendarId` (`calendarId`),
-  FULLTEXT KEY `ft` (`name`,`description`),
-  CONSTRAINT `fk_calitems_recurrence`
-    FOREIGN KEY (`recurrenceId`) REFERENCES `tiki_calendar_recurrence`(`recurrenceId`)
-    ON UPDATE CASCADE ON DELETE SET NULL
+  KEY `calendarId` (`calendarId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_calendar_locations`;
@@ -557,8 +550,7 @@
   KEY `tc_pi` (`parentId`),
   KEY `objectType` (object, `objectType`),
   KEY `commentDate` (`commentDate`),
-  KEY `threaded` (message_id, in_reply_to, `parentId`),
-  FULLTEXT KEY `ft` (title,data)
+  KEY `threaded` (message_id, in_reply_to, `parentId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_content`;
@@ -643,8 +635,7 @@
   `cache_timestamp` int(14) default NULL,
   PRIMARY KEY (`siteId`),
   KEY (`isValid`),
-  KEY (url),
-  FULLTEXT KEY `ft` (name,description)
+  KEY (url)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_dsn`;
@@ -682,8 +673,7 @@
   KEY `faqId` (`faqId`),
   KEY `question` (question(255)),
   KEY `answer` (answer(255)),
-  KEY `created` (`created`),
-  FULLTEXT KEY `ft` (question,answer)
+  KEY `created` (`created`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_faqs`;
@@ -698,8 +688,7 @@
   PRIMARY KEY (`faqId`),
   KEY `title` (title),
   KEY `description` (description(255)),
-  KEY `hits` (hits),
-  FULLTEXT KEY `ft` (title,description)
+  KEY `hits` (hits)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_featured_links`;
@@ -808,8 +797,7 @@
   KEY `created` (created),
   KEY `archiveId` (`archiveId`),
   KEY `galleryId` (`galleryId`),
-  KEY `hits` (hits),
-  FULLTEXT KEY `ft` (name,description,search_data,filename)
+  KEY `hits` (hits)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_file_drafts`;
@@ -989,8 +977,7 @@
   KEY `description` (description(255)),
   KEY `hits` (hits),
   KEY `parentgallery` (parentgallery),
-  KEY `visibleUser` (visible, user),
-  FULLTEXT KEY `ft` (name,description)
+  KEY `visibleUser` (visible, user)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_galleries_scales`;
@@ -1084,8 +1071,7 @@
   KEY `hits` (hits),
   KEY `ti_gId` (`galleryId`),
   KEY `ti_cr` (created),
-  KEY `ti_us` (user),
-  FULLTEXT KEY `ft` (name,description)
+  KEY `ti_us` (user)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_images_data`;
@@ -1644,7 +1630,6 @@
   UNIQUE KEY `pageName` (`pageName`),
   KEY `data` (`data`(255)),
   KEY `pageRank` (`pageRank`),
-  FULLTEXT KEY `ft` (`pageName`,`description`,`data`),
   KEY `lastModif`(`lastModif`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
@@ -2234,8 +2219,7 @@
   `value` text,
   PRIMARY KEY (`itemId`,`fieldId`),
   INDEX `fieldId` (`fieldId`),
-  INDEX value (value(250)),
-  FULLTEXT KEY `ft` (value)
+  INDEX value (value(250))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_tracker_item_field_logs`;

------------------------------------------------------------------------
r37299 | chealer | 2011-09-15 17:22:01 -0400 (qui, 15 set 2011) | 2 lines

[FIX] tiki_user_bookmarks_folders definition for strict SQL mode ("Incorrect table definition; there can be only one auto column and it must be defined as a key", from r28)
Thanks Arild Berg

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 37298)
+++ tiki.sql	(revision 37299)
@@ -2331,7 +2331,8 @@
   `parentId` int(12) default NULL,
   `user` varchar(200) NOT NULL default '',
   `name` varchar(30) default NULL,
-  PRIMARY KEY (`user`,`folderId`)
+  PRIMARY KEY (`folderId`),
+  KEY `user` (`user`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_user_bookmarks_urls`;

------------------------------------------------------------------------
r37198 | nkoth | 2011-09-13 00:48:54 -0400 (ter, 13 set 2011) | 1 line

[NEW] Allow for membership extension of groups by fixed annual or monthly anniversary term periods, including calculation of prorated payment.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 37197)
+++ tiki.sql	(revision 37198)
@@ -2633,6 +2633,8 @@
   `isExternal` char(1) default 'n',
   `expireAfter` int(14) default 0,
   `emailPattern`  varchar(255) default '',
+  `anniversary` char(4) default '',
+  `prorateInterval` varchar(255) default '',
   PRIMARY KEY (`id`),
   UNIQUE KEY `groupName` (`groupName`),
   KEY `expireAfter` (`expireAfter`)

------------------------------------------------------------------------
r37191 | lphuberdeau | 2011-09-12 11:04:05 -0400 (seg, 12 set 2011) | 1 line

[FIX] Remove columns that have not been used in a long time apparently

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 37190)
+++ tiki.sql	(revision 37191)
@@ -2279,15 +2279,7 @@
   `descriptionIsParsed` varchar(1) NULL default '0',
   `created` int(14) default NULL,
   `lastModif` int(14) default NULL,
-  `showCreated` char(1) default NULL,
-  `showStatus` char(1) default NULL,
-  `showLastModif` char(1) default NULL,
-  `useComments` char(1) default NULL,
-  `useAttachments` char(1) default NULL,
-  `showAttachments` char(1) default NULL,
   `items` int(10) default NULL,
-  `showComments` char(1) default NULL,
-  `orderAttachments` varchar(255) NOT NULL default 'filename,created,filesize,hits,desc',
   PRIMARY KEY (`trackerId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r37148 | arildb | 2011-09-11 13:28:29 -0400 (dom, 11 set 2011) | 1 line

[FIX] Add missing table engine specifications

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 37147)
+++ tiki.sql	(revision 37148)
@@ -3667,7 +3667,7 @@
     `quantity` INT( 14 ) NOT NULL,
     `timeHeld` INT( 14 ) NOT NULL,
     `hash` CHAR( 32 ) NOT NULL
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_source_auth`;
 CREATE TABLE `tiki_source_auth` (
@@ -3678,7 +3678,7 @@
     `method` VARCHAR(20) NOT NULL,
     `arguments` TEXT NOT NULL,
     KEY `tiki_source_auth_ix` (`scheme`, `domain`)
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_connect`;
 CREATE TABLE `tiki_connect` (
@@ -3690,4 +3690,4 @@
     `server` TINYINT(1) NOT NULL DEFAULT '0',
     PRIMARY KEY (`id`),
     KEY `server` (`server`)
-);
+) ENGINE=MyISAM;

------------------------------------------------------------------------
r37094 | robertplummer | 2011-09-09 17:33:55 -0400 (sex, 09 set 2011) | 1 line

[NEW] Added forum language to db and forum admin page

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 37093)
+++ tiki.sql	(revision 37094)
@@ -916,6 +916,7 @@
   `commentsPerPage` varchar(100) default NULL,
   `is_flat` char(1) default NULL,
   `mandatory_contribution` char(1) default NULL,
+  `forumLanguage` varchar(255) default NULL,
   PRIMARY KEY (`forumId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r37039 | sylvieg | 2011-09-08 09:11:33 -0400 (qui, 08 set 2011) | 1 line

[FIX]article: author can be null if anonymous submission

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 37038)
+++ tiki.sql	(revision 37039)
@@ -2066,7 +2066,7 @@
   `heading` text,
   `body` text,
   `hash` varchar(32) default NULL,
-  `author` varchar(200) NOT NULL default '',
+  `author` varchar(200) default NULL,
   `nbreads` int(14) default NULL,
   `votes` int(8) default NULL,
   `points` int(14) default NULL,

------------------------------------------------------------------------
r36962 | arildb | 2011-09-05 17:27:44 -0400 (seg, 05 set 2011) | 1 line

[FIX] Make tiki_actionlog handle comments like: <!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">=><!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 36961)
+++ tiki.sql	(revision 36962)
@@ -84,7 +84,7 @@
   `objectType` varchar(32) NOT NULL default '',
   `user` varchar(200) default '',
   `ip` varchar(39) default NULL,
-  `comment` varchar(200) default NULL,
+  `comment` varchar(255) default NULL,
   `categId` int(12) NOT NULL default '0',
     `client` VARCHAR( 200 ) NULL DEFAULT NULL,
   PRIMARY KEY (`actionId`),

------------------------------------------------------------------------
r36896 | arildb | 2011-09-04 08:19:08 -0400 (dom, 04 set 2011) | 1 line

[FIX] Shoutbox insert error due to missing tweetId fixed. Now tweetId default = 0 in db table

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 36895)
+++ tiki.sql	(revision 36896)
@@ -2006,7 +2006,7 @@
   `timestamp` int(14) default NULL,
   `user` varchar(200) NULL default '',
   `hash` varchar(32) default NULL,
-  `tweetId` bigint(20) unsigned NOT NULL,
+  `tweetId` bigint(20) unsigned NOT NULL default 0,
   PRIMARY KEY (`msgId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r36800 | chealer | 2011-09-02 01:26:22 -0400 (sex, 02 set 2011) | 4 lines

[user:chealer:FINISHOFF] Workspace Helper: remove ws_container, rootCategId, reverting changes to categlib (22005, 21885, 21791, 21722, 21638 and 21000). Completes r22802
20110902_revert_rootCategId_addition completes 20100214_workspaces_remove_menu_items to cancel 20090921_workspaces
[REF] minor cleanups


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 36799)
+++ tiki.sql	(revision 36800)
@@ -445,7 +445,6 @@
   `description` varchar(250) default NULL,
   `parentId` int(12) default NULL,
   `hits` int(8) default NULL,
-  `rootCategId` int(12) default NULL,
   PRIMARY KEY (`categId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -3671,23 +3670,23 @@
 
 DROP TABLE IF EXISTS `tiki_source_auth`;
 CREATE TABLE `tiki_source_auth` (
-	`identifier` VARCHAR(50) PRIMARY KEY,
-	`scheme` VARCHAR(20) NOT NULL,
-	`domain` VARCHAR(200) NOT NULL,
-	`path` VARCHAR(200) NOT NULL,
-	`method` VARCHAR(20) NOT NULL,
-	`arguments` TEXT NOT NULL,
-	KEY `tiki_source_auth_ix` (`scheme`, `domain`)
+    `identifier` VARCHAR(50) PRIMARY KEY,
+    `scheme` VARCHAR(20) NOT NULL,
+    `domain` VARCHAR(200) NOT NULL,
+    `path` VARCHAR(200) NOT NULL,
+    `method` VARCHAR(20) NOT NULL,
+    `arguments` TEXT NOT NULL,
+    KEY `tiki_source_auth_ix` (`scheme`, `domain`)
 );
 
 DROP TABLE IF EXISTS `tiki_connect`;
 CREATE TABLE `tiki_connect` (
-	`id` INT(11) unsigned NOT NULL AUTO_INCREMENT,
-	`created` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
-	`type` VARCHAR(64) NOT NULL DEFAULT '',
-	`data` TEXT,
-	`guid` VARCHAR(64) DEFAULT NULL,
-	`server` TINYINT(1) NOT NULL DEFAULT '0',
-	PRIMARY KEY (`id`),
-	KEY `server` (`server`)
+    `id` INT(11) unsigned NOT NULL AUTO_INCREMENT,
+    `created` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
+    `type` VARCHAR(64) NOT NULL DEFAULT '',
+    `data` TEXT,
+    `guid` VARCHAR(64) DEFAULT NULL,
+    `server` TINYINT(1) NOT NULL DEFAULT '0',
+    PRIMARY KEY (`id`),
+    KEY `server` (`server`)
 );

------------------------------------------------------------------------
r36656 | jonnybradley | 2011-08-30 12:38:38 -0400 (ter, 30 ago 2011) | 2 lines

[REF] connect: Split connect services up into client and server, and use service actions properly (no more cmd param).
Also use JitFilter input params correctly, increase guid length in database and don't delete failed or cancelled connection, just mark as deleted (thanks lphuberdeau)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 36655)
+++ tiki.sql	(revision 36656)
@@ -3686,7 +3686,7 @@
 	`created` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
 	`type` VARCHAR(64) NOT NULL DEFAULT '',
 	`data` TEXT,
-	`guid` VARCHAR(32) DEFAULT NULL,
+	`guid` VARCHAR(64) DEFAULT NULL,
 	`server` TINYINT(1) NOT NULL DEFAULT '0',
 	PRIMARY KEY (`id`),
 	KEY `server` (`server`)

------------------------------------------------------------------------
r36410 | jonnybradley | 2011-08-23 15:17:28 -0400 (ter, 23 ago 2011) | 1 line

[ENH] connect: Storage for data, moved js to  a separate file, some refactoring and renaming

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 36409)
+++ tiki.sql	(revision 36410)
@@ -3680,3 +3680,14 @@
 	KEY `tiki_source_auth_ix` (`scheme`, `domain`)
 );
 
+DROP TABLE IF EXISTS `tiki_connect`;
+CREATE TABLE `tiki_connect` (
+	`id` INT(11) unsigned NOT NULL AUTO_INCREMENT,
+	`created` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
+	`type` VARCHAR(64) NOT NULL DEFAULT '',
+	`data` TEXT,
+	`guid` VARCHAR(32) DEFAULT NULL,
+	`server` TINYINT(1) NOT NULL DEFAULT '0',
+	PRIMARY KEY (`id`),
+	KEY `server` (`server`)
+);

------------------------------------------------------------------------
r36349 | lphuberdeau | 2011-08-19 15:25:22 -0400 (sex, 19 ago 2011) | 1 line

[FIX] Length was effectively still 30 because of the key length, which remains quite random for groupName across tiki, thanks to varchar(255)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 36348)
+++ tiki.sql	(revision 36349)
@@ -2668,7 +2668,7 @@
   `groupName` varchar(255) NOT NULL default '',
   `created` int(14) default NULL,
   `expire` int(14) default NULL,
-  PRIMARY KEY (`userId`,`groupName`(30))
+  PRIMARY KEY (`userId`,`groupName`(225))
 ) ENGINE=MyISAM;
 
 INSERT INTO users_groups (`groupName`,`groupDesc`) VALUES ('Anonymous','Public users not logged');

------------------------------------------------------------------------
r35951 | sylvieg | 2011-08-09 12:02:05 -0400 (ter, 09 ago 2011) | 1 line

[MRG] Automatic merge, branches/7.x 35708 to 35940

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 35950)
+++ tiki.sql	(revision 35951)
@@ -2247,7 +2247,7 @@
   `lang` char(16) default NULL,
   INDEX `version` (`version`),
   INDEX `itemId` (`itemId`),
-  INDEX `fieldId` (`itemId`)
+  INDEX `fieldId` (`fieldId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_tracker_items`;

------------------------------------------------------------------------
r35844 | sampaioprimo | 2011-08-05 09:27:32 -0400 (sex, 05 ago 2011) | 1 line

fix syntax error introduced with r35810

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 35843)
+++ tiki.sql	(revision 35844)
@@ -2647,7 +2647,7 @@
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
 DROP TABLE IF EXISTS `users_objectpermissions`;
-CREATE TABLE ` (
+CREATE TABLE `users_objectpermissions` (
   `groupName` varchar(255) NOT NULL default '',
   `permName` varchar(40) NOT NULL default '',
   `objectType` varchar(20) NOT NULL default '',

------------------------------------------------------------------------
r35810 | sylvieg | 2011-08-03 13:56:25 -0400 (qua, 03 ago 2011) | 1 line

[FIX]perm: groups canb have more thatn 30 first common characters

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 35809)
+++ tiki.sql	(revision 35810)
@@ -2647,12 +2647,12 @@
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
 DROP TABLE IF EXISTS `users_objectpermissions`;
-CREATE TABLE `users_objectpermissions` (
+CREATE TABLE ` (
   `groupName` varchar(255) NOT NULL default '',
   `permName` varchar(40) NOT NULL default '',
   `objectType` varchar(20) NOT NULL default '',
   `objectId` varchar(32) NOT NULL default '',
-  PRIMARY KEY (`objectId`, `objectType`, `groupName`(30),`permName`)
+  PRIMARY KEY `uo` (`objectId`, `objectType`, `groupName`(170),`permName`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `users_permissions`;

------------------------------------------------------------------------
r35688 | lphuberdeau | 2011-07-27 13:45:07 -0400 (qua, 27 jul 2011) | 1 line

[MOD] Remove the lang column in both tiki_tracker_item_fields and tiki_tracker_item_field_logs, store multilingual value as serialized instead to avoid global complexity for a localized problem

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 35687)
+++ tiki.sql	(revision 35688)
@@ -2232,11 +2232,9 @@
   `itemId` int(12) NOT NULL default '0',
   `fieldId` int(12) NOT NULL default '0',
   `value` text,
-  `lang` char(16) default NULL,
-  PRIMARY KEY (`itemId`,`fieldId`,`lang`),
+  PRIMARY KEY (`itemId`,`fieldId`),
   INDEX `fieldId` (`fieldId`),
   INDEX value (value(250)),
-  INDEX lang (lang),
   FULLTEXT KEY `ft` (value)
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r35646 | lphuberdeau | 2011-07-25 11:16:18 -0400 (seg, 25 jul 2011) | 1 line

[MOD]Â Adding a permanent name to tracker fields to be used for services and integration

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 35645)
+++ tiki.sql	(revision 35646)
@@ -2183,6 +2183,7 @@
   `fieldId` int(12) NOT NULL auto_increment,
   `trackerId` int(12) NOT NULL default '0',
   `name` varchar(255) default NULL,
+  `permName` VARCHAR(100) NULL,
   `options` text,
   `type` varchar(15) default NULL,
   `isMain` char(1) default NULL,
@@ -2203,7 +2204,8 @@
   `validationParam` varchar(255) default '',
   `validationMessage` varchar(255) default '',
   PRIMARY KEY (`fieldId`),
-  INDEX `trackerId` (`trackerId`)
+  INDEX `trackerId` (`trackerId`),
+  UNIQUE `permName` (`permName`, `trackerId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_tracker_item_attachments`;

------------------------------------------------------------------------
r35485 | robertplummer | 2011-07-19 09:13:49 -0400 (ter, 19 jul 2011) | 1 line

[FIX] Added the invoice menu items for standard install

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 35484)
+++ tiki.sql	(revision 35485)
@@ -1472,8 +1472,9 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o', 'Upload Media', 'tiki-kaltura_upload.php', 954, 'feature_kaltura', 'tiki_p_admin | tiki_p_admin_kaltura | tiki_p_upload_videos', '', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Permissions','tiki-objectpermissions.php',1077,'','tiki_p_admin|tiki_p_admin_objects','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Social networks','tiki-socialnetworks.php',115,'feature_mytiki,feature_socialnetworks','tiki_p_socialnetworks|tiki_p_admin_socialnetworks','Registered',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'r', 'Invoice', 'tiki-list_invoices.php', 790, 'feature_invoice', 'tiki_p_admin', '', 0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'o', 'New Invoice', 'tiki-edit_invoice.php', 791, 'feature_invoice', 'tiki_p_admin', '', 0);
 
-
 DROP TABLE IF EXISTS `tiki_menus`;
 CREATE TABLE `tiki_menus` (
   `menuId` int(8) NOT NULL auto_increment,

------------------------------------------------------------------------
r35008 | lphuberdeau | 2011-06-22 11:21:16 -0400 (qua, 22 jun 2011) | 1 line

[MOD] Including URL fetch status in the action log

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 35007)
+++ tiki.sql	(revision 35008)
@@ -2910,6 +2910,8 @@
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Categorized', 'wiki page', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Uncategorized', 'wiki page', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Flagged', 'wiki page', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Fetch', 'url', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Refresh', 'url', 'n');
 
 DROP TABLE IF EXISTS `tiki_freetags`;
 CREATE TABLE `tiki_freetags` (

------------------------------------------------------------------------
r34939 | sylvieg | 2011-06-15 06:29:54 -0400 (qua, 15 jun 2011) | 1 line

[FIX]structures: received structures generated a null alias .. and alias can be null

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 34938)
+++ tiki.sql	(revision 34939)
@@ -2031,7 +2031,7 @@
   `parent_id` int(14) default NULL,
   `page_id` int(14) NOT NULL,
   `page_version` int(8) default NULL,
-  `page_alias` varchar(240) NOT NULL default '',
+  `page_alias` varchar(240) default '',
   `pos` int(4) default NULL,
   PRIMARY KEY (`page_ref_id`),
   KEY `pidpaid` (page_id,parent_id),

------------------------------------------------------------------------
r34927 | lphuberdeau | 2011-06-14 13:35:39 -0400 (ter, 14 jun 2011) | 1 line

[MRG] Automatic merge, branches/7.x 34885 to 34926

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 34926)
+++ tiki.sql	(revision 34927)
@@ -3595,7 +3595,7 @@
   `journalDescription` varchar(255) NOT NULL,
   `journalCancelled` int(1) NOT NULL DEFAULT '0',
   `journalTs` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
-  PRIMARY KEY (`journalBookId`,`journalId`)
+  PRIMARY KEY (`journalId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_acct_stack`; 
@@ -3605,7 +3605,7 @@
   `stackDate` date NOT NULL DEFAULT '0000-00-00',
   `stackDescription` varchar(255) NOT NULL,
   `stackTs` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
-  PRIMARY KEY (`stackBookId`,`stackId`)
+  PRIMARY KEY (`stackId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_acct_stackitem`; 
@@ -3634,7 +3634,7 @@
   `statementAmount` double NOT NULL,
   `statementJournalId` int(10) unsigned NOT NULL DEFAULT '0',
   `statementStackId` int(11) NOT NULL,
-  PRIMARY KEY (`statementBookId`,`statementAccountId`,`statementId`)
+  PRIMARY KEY (`statementId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_acct_tax`; 
@@ -3644,7 +3644,7 @@
   `taxText` varchar(63) NOT NULL,
   `taxAmount` double NOT NULL DEFAULT '0',
   `taxIsFix` enum('y','n') NOT NULL DEFAULT 'n',
-  PRIMARY KEY (`taxBookId`,`taxId`)
+  PRIMARY KEY (`taxId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_queue`;

------------------------------------------------------------------------
r34923 | lphuberdeau | 2011-06-14 11:30:13 -0400 (ter, 14 jun 2011) | 1 line

[NEW] Adding support for authenticated HTTP sources configurable from the admin panels, should work magically with all http requests going through the standard paths

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 34922)
+++ tiki.sql	(revision 34923)
@@ -3665,3 +3665,15 @@
     `timeHeld` INT( 14 ) NOT NULL,
     `hash` CHAR( 32 ) NOT NULL
 );
+
+DROP TABLE IF EXISTS `tiki_source_auth`;
+CREATE TABLE `tiki_source_auth` (
+	`identifier` VARCHAR(50) PRIMARY KEY,
+	`scheme` VARCHAR(20) NOT NULL,
+	`domain` VARCHAR(200) NOT NULL,
+	`path` VARCHAR(200) NOT NULL,
+	`method` VARCHAR(20) NOT NULL,
+	`arguments` TEXT NOT NULL,
+	KEY `tiki_source_auth_ix` (`scheme`, `domain`)
+);
+

------------------------------------------------------------------------
r34913 | lphuberdeau | 2011-06-13 11:53:34 -0400 (seg, 13 jun 2011) | 1 line

[MOD] Displaying source in file galleries

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 34912)
+++ tiki.sql	(revision 34913)
@@ -765,6 +765,7 @@
   `show_share` char(1) default NULL,
   `image_max_size_x` int(8) NOT NULL default '0',
   `image_max_size_y` int(8) NOT NULL default '0',
+  show_source CHAR(1) NOT NULL DEFAULT 'o',
   PRIMARY KEY (`galleryId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r34888 | jonnybradley | 2011-06-10 06:32:16 -0400 (sex, 10 jun 2011) | 4 lines

[MRG] Automatic merge, branches/7.x 34852 to 34885
Conflicts:  lang/de/language.php and lang/pt-br/language.php resolved using "mine full"
            lib/setup/twversion.class.php and lib/setup/perms.php fixed manually


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 34887)
+++ tiki.sql	(revision 34888)
@@ -1679,20 +1679,10 @@
   `active` char(1) default NULL,
   `publishDate` int(14) default NULL,
   `voteConsiderationSpan` int(4) default 0,
-    `anonym` ENUM( 'a', 'u', 'i', 'c' ) NOT NULL DEFAULT 'u',
   PRIMARY KEY (`pollId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 ALTER TABLE tiki_polls ADD INDEX tiki_poll_lookup ( active , title );
 
-CREATE TABLE IF NOT EXISTS `tiki_poll_votes` (
-  `pollId` int(11) NOT NULL,
-  `optionId` int(11) NOT NULL,
-  `voteId` int(11) NOT NULL auto_increment,
-  `identification` varchar(300) NOT NULL,
-  `time` int(11) NOT NULL,
-  PRIMARY KEY  (`voteId`)
-) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-
 DROP TABLE IF EXISTS `tiki_preferences`;
 CREATE TABLE `tiki_preferences` (
   `name` varchar(40) NOT NULL default '',
@@ -2629,7 +2619,7 @@
 
 
 INSERT INTO users_grouppermissions (`groupName`,`permName`)
-	VALUES('Anonymous','tiki_p_view'),('Anonymous','tiki_p_search'),('Anonymous','tiki_p_download_files');
+    VALUES('Anonymous','tiki_p_view'),('Anonymous','tiki_p_search'),('Anonymous','tiki_p_download_files');
 
 DROP TABLE IF EXISTS `users_groups`;
 CREATE TABLE `users_groups` (

------------------------------------------------------------------------
r34808 | jonnybradley | 2011-06-07 09:26:59 -0400 (ter, 07 jun 2011) | 1 line

[MRG] Automatic merge, branches/7.x 34741 to 34806

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 34807)
+++ tiki.sql	(revision 34808)
@@ -3666,3 +3666,11 @@
     KEY `queue_name_ix` (`queue`),
     KEY `queue_handler_ix` (`handler`)
 ) ENGINE=MyISAM;
+
+DROP TABLE IF EXISTS `tiki_cart_inventory_hold`;
+CREATE TABLE `tiki_cart_inventory_hold` (
+    `productId` INT( 14 ) NOT NULL,
+    `quantity` INT( 14 ) NOT NULL,
+    `timeHeld` INT( 14 ) NOT NULL,
+    `hash` CHAR( 32 ) NOT NULL
+);

------------------------------------------------------------------------
r34782 | sept_7 | 2011-06-06 06:22:57 -0400 (seg, 06 jun 2011) | 3 lines

[FIX] Ip logging in many table too short for IPv6 reported by canelli
 Now IP fields are 39 character wide.


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 34781)
+++ tiki.sql	(revision 34782)
@@ -541,7 +541,7 @@
   `hash` varchar(32) default NULL,
   `email` varchar(200) default NULL,
   `website` varchar(200) default NULL,
-  `user_ip` varchar(15) default NULL,
+  `user_ip` varchar(39) default NULL,
   `summary` varchar(240) default NULL,
   `smiley` varchar(80) default NULL,
   `message_id` varchar(128) default NULL,
@@ -1029,7 +1029,7 @@
   `lastModif` int(14) default NULL,
   `description` varchar(200) default NULL,
   `user` varchar(200) not null default '',
-  `ip` varchar(15) default NULL,
+  `ip` varchar(39) default NULL,
   `comment` varchar(200) default NULL,
   `data` longblob,
   `type` varchar(50) default NULL,
@@ -1620,7 +1620,7 @@
   `version` int(8) NOT NULL default '0',
   `version_minor` int(8) NOT NULL default '0',
   `user` varchar(200) default '',
-  `ip` varchar(15) default NULL,
+  `ip` varchar(39) default NULL,
   `flag` char(1) default NULL,
   `points` int(8) default NULL,
   `votes` int(8) default NULL,
@@ -2145,7 +2145,7 @@
   `comment` varchar(200) default NULL,
   `version` int(8) NOT NULL default '0',
   `user` varchar(200) NOT NULL default '',
-  `ip` varchar(15) default NULL,
+  `ip` varchar(39) default NULL,
   `flag` char(1) default NULL,
   PRIMARY KEY (`tagName`,`pageName`)
 ) ENGINE=MyISAM;
@@ -2505,7 +2505,7 @@
 DROP TABLE IF EXISTS `tiki_user_votings`;
 CREATE TABLE `tiki_user_votings` (
   `user` varchar(200) NOT NULL default '',
-  `ip` varchar(15) default NULL,
+  `ip` varchar(39) default NULL,
   `id` varchar(255) NOT NULL default '',
   `optionId` int(10) NOT NULL default 0,
   `time` int(14) NOT NULL default 0,

------------------------------------------------------------------------
r34753 | lphuberdeau | 2011-06-03 16:40:05 -0400 (sex, 03 jun 2011) | 1 line

[MOD] Convert tracker comments to standard comments and use the AJAX interface

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 34752)
+++ tiki.sql	(revision 34753)
@@ -2233,17 +2233,6 @@
   INDEX `itemId` (`itemId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS `tiki_tracker_item_comments`;
-CREATE TABLE `tiki_tracker_item_comments` (
-  `commentId` int(12) NOT NULL auto_increment,
-  `itemId` int(12) NOT NULL default '0',
-  `user` varchar(200) default NULL,
-  `data` text,
-  `title` varchar(200) default NULL,
-  `posted` int(14) default NULL,
-  PRIMARY KEY (`commentId`)
-) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-
 DROP TABLE IF EXISTS `tiki_tracker_item_fields`;
 CREATE TABLE `tiki_tracker_item_fields` (
   `itemId` int(12) NOT NULL default '0',

------------------------------------------------------------------------
r34674 | marclaporte | 2011-05-27 16:47:55 -0400 (sex, 27 mai 2011) | 1 line

cosmetic re-ordering a db entry

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 34673)
+++ tiki.sql	(revision 34674)
@@ -332,7 +332,6 @@
   UNIQUE KEY `catname` (`calendarId`, `name`(16))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS `tiki_calendar_items`;
 DROP TABLE IF EXISTS `tiki_calendar_recurrence`;
 CREATE TABLE `tiki_calendar_recurrence` (
   `recurrenceId` int(14) NOT NULL auto_increment,
@@ -365,6 +364,7 @@
   KEY `calendarId` (`calendarId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
+DROP TABLE IF EXISTS `tiki_calendar_items`;
 CREATE TABLE `tiki_calendar_items` (
   `calitemId` int(14) NOT NULL auto_increment,
   `calendarId` int(14) NOT NULL default '0',

------------------------------------------------------------------------
r34579 | sampaioprimo | 2011-05-23 14:47:42 -0400 (seg, 23 mai 2011) | 1 line

[MRG] Automatic merge, branches/7.x 34565 to 34576

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 34578)
+++ tiki.sql	(revision 34579)
@@ -2425,8 +2425,6 @@
   PRIMARY KEY (`name`)
 ) ENGINE=MyISAM;
 
-INSERT INTO tiki_user_modules (name, title, data, parse) VALUES ('Application Menu', 'Menu', '{menu id=42 css=y type=vert}', 'n');
-
 DROP TABLE IF EXISTS `tiki_user_notes`;
 CREATE TABLE `tiki_user_notes` (
   `user` varchar(200) NOT NULL default '',

------------------------------------------------------------------------
r34503 | sylvieg | 2011-05-19 09:42:26 -0400 (qui, 19 mai 2011) | 1 line

[MRG] Automatic merge, branches/7.x 34460 to 34501

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 34502)
+++ tiki.sql	(revision 34503)
@@ -3498,7 +3498,6 @@
   KEY `used_on_user` (`used_on_user`)
 ) ENGINE=MyISAM;
 
-
 DROP TABLE IF EXISTS `tiki_credits`;
 CREATE TABLE `tiki_credits` (
     `creditId` INT UNSIGNED NOT NULL AUTO_INCREMENT ,

------------------------------------------------------------------------
r34401 | sylvieg | 2011-05-13 14:18:50 -0400 (sex, 13 mai 2011) | 1 line

[ENH]banner: now pref to display a banner of a zone except in some URIs

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 34400)
+++ tiki.sql	(revision 34401)
@@ -216,6 +216,7 @@
   `clicks` int(8) default NULL,
   `zone` varchar(40) default NULL,
   `onlyInURIs` text,
+  `exceptInURIs` text,
   PRIMARY KEY (`bannerId`),
   INDEX ban1(zone,`useDates`,impressions,`maxImpressions`,`hourFrom`,`hourTo`,`fromDate`,`toDate`,mon,tue,wed,thu,fri,sat,sun)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;

------------------------------------------------------------------------
r34066 | jonnybradley | 2011-04-21 13:21:06 -0400 (qui, 21 abr 2011) | 1 line

[MRG] Automatic merge, branches/7.x 34027 to 34065

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 34065)
+++ tiki.sql	(revision 34066)
@@ -1904,36 +1904,6 @@
   PRIMARY KEY (`name`,`rssVer`)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS `tiki_searchindex`;
-CREATE TABLE tiki_searchindex(
-  `searchword` varchar(80) NOT NULL default '',
-  `location` varchar(80) NOT NULL default '',
-  `page` varchar(255) NOT NULL default '',
-  `count` int(11) NOT NULL default '1',
-  `last_update` int(11) NOT NULL default '0',
-  PRIMARY KEY (`searchword`,`location`,`page`(80)),
-  KEY `last_update` (last_update),
-  KEY `location` (location(50), page(200))
-) ENGINE=MyISAM;
-
--- LRU (last recently used) list for searching parts of words
-DROP TABLE IF EXISTS `tiki_searchsyllable`;
-CREATE TABLE tiki_searchsyllable(
-  `syllable` varchar(80) NOT NULL default '',
-  `lastUsed` int(11) NOT NULL default '0',
-  `lastUpdated` int(11) NOT NULL default '0',
-  PRIMARY KEY (`syllable`),
-  KEY `lastUsed` (`lastUsed`)
-) ENGINE=MyISAM;
-
--- searchword caching table for search syllables
-DROP TABLE IF EXISTS `tiki_searchwords`;
-CREATE TABLE tiki_searchwords(
-  `syllable` varchar(80) NOT NULL default '',
-  `searchword` varchar(80) NOT NULL default '',
-  PRIMARY KEY (`syllable`,`searchword`)
-) ENGINE=MyISAM;
-
 DROP TABLE IF EXISTS `tiki_search_stats`;
 CREATE TABLE `tiki_search_stats` (
   `term` varchar(50) NOT NULL default '',

------------------------------------------------------------------------
r34052 | lphuberdeau | 2011-04-20 12:38:32 -0400 (qua, 20 abr 2011) | 1 line

[MOD]Â Add an option to include or not the inherited groups in mailing list, and displaying the inherited groups in the list to make it more obvious

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 34051)
+++ tiki.sql	(revision 34052)
@@ -1556,6 +1556,7 @@
   `nlId` int(12) NOT NULL default '0',
   `groupName` varchar(255) NOT NULL default '',
   `code` varchar(32) default NULL,
+  `include_groups` char(1) DEFAULT 'y',
   PRIMARY KEY (`nlId`,`groupName`)
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r33953 | jonnybradley | 2011-04-14 09:44:55 -0400 (qui, 14 abr 2011) | 1 line

[MRG] Automatic merge, branches/7.x 33907 to 33946

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 33952)
+++ tiki.sql	(revision 33953)
@@ -266,7 +266,7 @@
   `trackbacks_to` text,
   `trackbacks_from` text,
   `title` varchar(255) default NULL,
-  `priv` varchar(1) default NULL,
+  `priv` varchar(1) default 'n',
   `wysiwyg` varchar(1) default NULL,
   PRIMARY KEY (`postId`),
   KEY `data` (`data`(255)),

------------------------------------------------------------------------
r33934 | lphuberdeau | 2011-04-12 16:27:14 -0400 (ter, 12 abr 2011) | 1 line

[MOD] Moving permission definitions out of the database, removing tiki-assignpermissions.php (phased out since 4), killing a few functions that were no longer used (instead of rewriting them), might still need to fix quickperms

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 33933)
+++ tiki.sql	(revision 33934)
@@ -2707,305 +2707,10 @@
 DROP TABLE IF EXISTS `users_permissions`;
 CREATE TABLE `users_permissions` (
   `permName` varchar(40) NOT NULL default '',
-  `permDesc` varchar(250) default NULL,
   `level` varchar(80) default NULL,
-  `type` varchar(20) default NULL,
-  `admin` varchar(1) default NULL,
-  `feature_check` varchar(255) default NULL,
-  PRIMARY KEY  (`permName`),
-  KEY `type` (`type`)
+  PRIMARY KEY  (`permName`)
 ) ENGINE=MyISAM;
 
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_calendar', 'Can create/admin calendars', 'admin', 'calendar', 'y', 'feature_calendar');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_add_events', 'Can add events in the calendar', 'registered', 'calendar', NULL, 'feature_calendar');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_change_events', 'Can change events in the calendar', 'registered', 'calendar', NULL, 'feature_calendar');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_calendar', 'Can browse the calendar', 'basic', 'calendar', NULL, 'feature_calendar');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_events', 'Can view events details', 'registered', 'calendar', NULL, 'feature_calendar');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_calendar_add_my_particip', 'Can add own user to the participants', 'registered', 'calendar', NULL, 'feature_calendar');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_calendar_add_guest_particip', 'Can add guest to the participants', 'registered', 'calendar', NULL, 'feature_calendar');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_tiki_calendar', 'Can view Tiki tools calendar', 'basic', 'calendar', NULL, 'feature_calendar');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_chat', 'Administrator, can create channels remove channels etc', 'editors', 'chat', 'y', 'feature_minichat,feature_live_support');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_chat', 'Can use the chat system', 'registered', 'chat', NULL, 'feature_minichat,feature_live_support');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_cms', 'Can admin the articles', 'editors', 'cms', 'y', 'feature_articles');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_approve_submission', 'Can approve submissions', 'editors', 'cms', NULL, 'feature_articles');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_articles_admin_topics', 'Can admin article topics', 'editors', 'cms', NULL, 'feature_articles');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_articles_admin_types', 'Can admin article types', 'editors', 'cms', NULL, 'feature_articles');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_articles_read_heading', 'Can read article headings', 'basic', 'cms', NULL, 'feature_articles');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_autoapprove_submission', 'Submitted articles automatically approved', 'editors', 'cms', NULL, 'feature_articles');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_article', 'Can edit articles', 'editors', 'cms', NULL, 'feature_articles');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_submission', 'Can edit submissions', 'editors', 'cms', NULL, 'feature_articles');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_read_article', 'Can read articles', 'basic', 'cms', NULL, 'feature_articles');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_remove_article', 'Can remove articles', 'editors', 'cms', NULL, 'feature_articles');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_remove_submission', 'Can remove submissions', 'editors', 'cms', NULL, 'feature_articles');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_submit_article', 'Can submit articles', 'basic', 'cms', NULL, 'feature_articles');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_rate_article', 'Can rate articles', 'basic', 'cms', NULL, 'feature_articles');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_topic_read', 'Can read a topic (Applies only to individual topic perms)', 'basic', 'cms', NULL, 'feature_articles');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_contribution', 'Can admin contributions', 'admin', 'contribution', 'y', 'feature_contribution');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_directory', 'Can admin the directory', 'editors', 'directory', 'y', 'feature_directory');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_directory_cats', 'Can admin directory categories', 'editors', 'directory', NULL, 'feature_directory');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_directory_sites', 'Can admin directory sites', 'editors', 'directory', NULL, 'feature_directory');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_autosubmit_link', 'Submitted links are valid', 'editors', 'directory', NULL, 'feature_directory');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_submit_link', 'Can submit sites to the directory', 'basic', 'directory', NULL, 'feature_directory');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_validate_links', 'Can validate submitted links', 'editors', 'directory', NULL, 'feature_directory');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_directory', 'Can use the directory', 'basic', 'directory', NULL, 'feature_directory');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_faqs', 'Can admin faqs', 'editors', 'faqs', 'y', 'feature_faqs');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_suggest_faq', 'Can suggest faq questions', 'basic', 'faqs', NULL, 'feature_faqs');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_faqs', 'Can view faqs', 'basic', 'faqs', NULL, 'feature_faqs');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin', 'Administrator, can manage users groups and permissions, and all features', 'admin', 'tiki', 'y', NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_users', 'Can admin users', 'admin', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_access_closed_site', 'Can access site when closed', 'admin', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_banners', 'Administrator, can admin banners', 'admin', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_banning', 'Can ban users or ips', 'admin', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_dynamic', 'Can admin the dynamic content system', 'editors', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_integrator', 'Can admin integrator repositories and rules', 'admin', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_mailin', 'Can admin mail-in accounts', 'admin', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_objects', 'Can edit object permissions', 'admin', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_rssmodules', 'Can admin external feeds', 'admin', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_clean_cache', 'Can clean cache', 'editors', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_create_css', 'Can create new css suffixed with -user', 'registered', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_detach_translation', 'Can remove association between two pages in a translation set', 'registered', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_cookies', 'Can admin cookies', 'editors', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_languages', 'Can edit translations and create new languages', 'editors', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_menu', 'Can edit menu', 'admin', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_menu_option', 'Can edit menu option', 'admin', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_templates', 'Can edit site templates', 'admin', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_search', 'Can search', 'basic', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_site_report', 'Can report a link to the webmaster', 'basic', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_subscribe_groups', 'Can subscribe to groups', 'registered', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tell_a_friend', 'Can send a link to a friend', 'Basic', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_share', 'Can share a page (email, twitter, facebook, message, forums)', 'Basic', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_use_HTML', 'Can use HTML in pages', 'editors', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_actionlog', 'Can view action log', 'registered', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_actionlog_owngroups', 'Can view action log for users of his own groups', 'registered', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_integrator', 'Can view integrated repositories', 'basic', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_referer_stats', 'Can view referrer stats', 'editors', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_stats', 'Can view site stats', 'basic', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_templates', 'Can view site templates', 'admin', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_blog_admin', 'Can admin blogs', 'editors', 'blogs', 'y', 'feature_blogs');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_assign_perm_blog', 'Can assign perms to blog', 'admin', 'blogs', NULL, 'feature_blogs');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_blog_post', 'Can post to a blog', 'registered', 'blogs', NULL, 'feature_blogs');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_create_blogs', 'Can create a blog', 'editors', 'blogs', NULL, 'feature_blogs');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_read_blog', 'Can read blogs', 'basic', 'blogs', NULL, 'feature_blogs');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_blog_post_view_ref', 'Can view in module and feed the blog posts', 'basic', 'blogs', NULL, 'feature_blogs');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_blog_view_ref', 'Can view in module and feed the blog', 'basic', 'blogs', NULL, 'feature_blogs');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_file_galleries', 'Can admin file galleries', 'editors', 'file galleries', 'y', 'feature_file_galleries');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_assign_perm_file_gallery', 'Can assign perms to file gallery', 'admin', 'file galleries', NULL, 'feature_file_galleries');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_batch_upload_file_dir', 'Can use Directory Batch Load', 'editors', 'file galleries', NULL, 'feature_file_galleries');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_batch_upload_files', 'Can upload zip files with files', 'editors', 'file galleries', NULL, 'feature_file_galleries');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_create_file_galleries', 'Can create file galleries', 'editors', 'file galleries', NULL, 'feature_file_galleries');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_download_files', 'Can download files', 'basic', 'file galleries', NULL, 'feature_file_galleries');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_gallery_file', 'Can edit a gallery file', 'editors', 'file galleries', NULL, 'feature_file_galleries');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_list_file_galleries', 'Can list file galleries', 'basic', 'file galleries', NULL, 'feature_file_galleries');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_upload_files', 'Can upload files', 'registered', 'file galleries', NULL, 'feature_file_galleries');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_remove_files', 'Can remove files', 'registered', 'file galleries', NULL, 'feature_file_galleries');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_fgal_explorer', 'Can view file galleries explorer', 'basic', 'file galleries', NULL, 'feature_file_galleries');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_fgal_path', 'Can view file galleries path', 'basic', 'file galleries', NULL, 'feature_file_galleries');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_file_gallery', 'Can view file galleries', 'basic', 'file galleries', NULL, 'feature_file_galleries');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_forum', 'Can admin forums', 'editors', 'forums', 'y', 'feature_forums');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_forum_attach', 'Can attach to forum posts', 'registered', 'forums', NULL, 'feature_forums');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_forum_autoapp', 'Auto approve forum posts', 'editors', 'forums', NULL, 'feature_forums');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_forum_edit_own_posts', 'Can edit own forum posts', 'registered', 'forums', NULL, 'feature_forums');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_forum_post', 'Can post in forums', 'registered', 'forums', NULL, 'feature_forums');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_forum_post_topic', 'Can start threads in forums', 'registered', 'forums', NULL, 'feature_forums');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_forum_read', 'Can read forums', 'basic', 'forums', NULL, 'feature_forums');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_forums_report', 'Can report posts to moderator', 'registered', 'forums', NULL, 'feature_forums');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_forum_vote', 'Can vote comments in forums', 'registered', 'forums', NULL, 'feature_forums');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_freetags', 'Can admin freetags', 'admin', 'freetags', 'y', 'feature_freetags');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_galleries', 'Can admin Image Galleries', 'editors', 'image galleries', 'y', 'feature_galleries');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_assign_perm_image_gallery', 'Can assign perms to image gallery', 'admin', 'image galleries', NULL, 'feature_galleries');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_batch_upload_image_dir', 'Can use Directory Batch Load', 'editors', 'image galleries', NULL, 'feature_galleries');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_batch_upload_images', 'Can upload zip files with images', 'editors', 'image galleries', NULL, 'feature_galleries');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_create_galleries', 'Can create image galleries', 'editors', 'image galleries', NULL, 'feature_galleries');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_freetags_tag', 'Can tag objects', 'registered', 'freetags', NULL, 'feature_freetags');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_list_image_galleries', 'Can list image galleries', 'basic', 'image galleries', NULL, 'feature_galleries');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_unassign_freetags', 'Can unassign tags from an object', 'basic', 'freetags', NULL, 'feature_freetags');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_upload_images', 'Can upload images', 'registered', 'image galleries', NULL, 'feature_galleries');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_freetags', 'Can browse freetags', 'basic', 'freetags', NULL, 'feature_freetags');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_image_gallery', 'Can view image galleries', 'basic', 'image galleries', NULL, 'feature_galleries');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_newsletters', 'Can admin newsletters', 'admin', 'newsletters', 'y', 'feature_newsletters');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_batch_subscribe_email', 'Can subscribe many e-mails at once (requires tiki_p_subscribe email)', 'editors', 'newsletters', NULL, 'feature_newsletters');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_send_newsletters', 'Can send newsletters', 'editors', 'newsletters', NULL, 'feature_newsletters');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_subscribe_email', 'Can subscribe any email to newsletters', 'editors', 'newsletters', NULL, 'feature_newsletters');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_subscribe_newsletters', 'Can subscribe to newsletters', 'basic', 'newsletters', NULL, 'feature_newsletters');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_newsletter', 'Can view the archive of a newsletters', 'basic', 'newsletters', NULL, 'feature_newsletters');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_list_newsletters', 'Can list newsletters', 'basic', 'newsletters', NULL, 'feature_newsletters');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_polls', 'Can admin polls', 'admin', 'polls', 'y', 'feature_polls');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_poll_results', 'Can view poll results', 'basic', 'polls', NULL, 'feature_polls');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_vote_poll', 'Can vote polls', 'basic', 'polls', NULL, 'feature_polls');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_poll_voters', 'Can view poll voters', 'basic', 'polls', NULL, 'feature_polls');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_toolbars', 'Can admin toolbars', 'admin', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_quizzes', 'Can admin quizzes', 'editors', 'quizzes', 'y', 'feature_quizzes');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_take_quiz', 'Can take quizzes', 'basic', 'quizzes', NULL, 'feature_quizzes');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_quiz_stats', 'Can view quiz stats', 'basic', 'quizzes', NULL, 'feature_quizzes');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_user_results', 'Can view user quiz results', 'editors', 'quizzes', NULL, 'feature_quizzes');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_sheet', 'Can admin sheet', 'admin', 'sheet', 'y', 'feature_sheet');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_sheet', 'Can create and edit sheets', 'editors', 'sheet', NULL, 'feature_sheet');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_sheet', 'Can view sheet', 'basic', 'sheet', NULL, 'feature_sheet');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_sheet_history', 'Can view sheet history', 'admin', 'sheet', NULL, 'feature_sheet');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_shoutbox', 'Can admin shoutbox (Edit/remove messages)', 'editors', 'shoutbox', 'y', 'feature_shoutbox');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_post_shoutbox', 'Can post messages in shoutbox', 'basic', 'shoutbox', NULL, 'feature_shoutbox');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_shoutbox', 'Can view shoutbox', 'basic', 'shoutbox', NULL, 'feature_shoutbox');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_surveys', 'Can admin surveys', 'editors', 'surveys', 'y', 'feature_surveys');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_take_survey', 'Can take surveys', 'basic', 'surveys', NULL, 'feature_surveys');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_survey_stats', 'Can view survey stats', 'basic', 'surveys', NULL, 'feature_surveys');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_trackers', 'Can admin trackers', 'editors', 'trackers', 'y', 'feature_trackers');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_attach_trackers', 'Can attach files to tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tracker_view_attachments', 'Can view tracker items attachments and download', 'registered', 'trackers', NULL, 'feature_trackers');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_comment_tracker_items', 'Can insert comments for tracker items', 'basic', 'trackers', NULL, 'feature_trackers');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tracker_view_comments', 'Can view tracker items comments', 'basic', 'trackers', NULL, 'feature_trackers');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_create_tracker_items', 'Can create new items for trackers', 'registered', 'trackers', NULL, 'feature_trackers');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_list_trackers', 'Can list trackers', 'basic', 'trackers', NULL, 'feature_trackers');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_modify_tracker_items', 'Can change tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_modify_tracker_items_pending', 'Can change pending tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_modify_tracker_items_closed', 'Can change closed tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_remove_tracker_items', 'Can remove tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_remove_tracker_items_pending', 'Can remove pending tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_remove_tracker_items_closed', 'Can remove closed tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tracker_view_ratings', 'Can view rating result for tracker items', 'basic', 'trackers', NULL, 'feature_trackers');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tracker_vote_ratings', 'Can vote a rating for tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tracker_revote_ratings', 'Can re-vote a rating for tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_trackers', 'Can view trackers', 'basic', 'trackers', NULL, 'feature_trackers');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_trackers_closed', 'Can view closed trackers items', 'registered', 'trackers', NULL, 'feature_trackers');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_trackers_pending', 'Can view pending trackers items', 'editors', 'trackers', NULL, 'feature_trackers');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_watch_trackers', 'Can watch tracker', 'registered', 'trackers', NULL, 'feature_trackers');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_export_tracker', 'Can export tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_wiki', 'Can admin the wiki', 'editors', 'wiki', 'y', 'feature_wiki');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_assign_perm_wiki_page', 'Can assign perms to wiki pages', 'admin', 'wiki', NULL, 'feature_wiki');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit', 'Can edit pages', 'registered', 'wiki', NULL, 'feature_wiki');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_copyrights', 'Can edit copyright notices', 'editors', 'wiki', NULL, 'wiki_feature_copyrights');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_dynvar', 'Can edit dynamic variables', 'editors', 'wiki', NULL, 'feature_wiki');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_structures', 'Can create and edit structures', 'editors', 'wiki', NULL, 'feature_wiki_structure');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_export_wiki', 'Can export wiki pages using the export feature', 'admin', 'wiki', NULL, 'feature_wiki_export');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_lock', 'Can lock pages', 'editors', 'wiki', NULL, 'feature_wiki');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_minor', 'Can save as minor edit', 'registered', 'wiki', NULL, 'feature_wiki');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_remove', 'Can remove', 'editors', 'wiki', NULL, 'feature_wiki');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_rename', 'Can rename pages', 'editors', 'wiki', NULL, 'feature_wiki');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_rollback', 'Can rollback pages', 'editors', 'wiki', NULL, 'feature_wiki');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_upload_picture', 'Can upload pictures to wiki pages', 'registered', 'wiki', NULL, 'feature_wiki_pictures');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_use_as_template', 'Can use the page as a tracker template', 'basic', 'wiki', NULL, 'feature_wiki');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view', 'Can view page/pages', 'basic', 'wiki', NULL, 'feature_wiki');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_view_ref', 'Can view in module and feed the wiki pages reference', 'basic', 'wiki', NULL, 'feature_wiki');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_watch_structure', 'Can watch structure', 'registered', 'wiki', NULL, 'feature_wiki_structure');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_admin_attachments', 'Can admin attachments on wiki pages', 'editors', 'wiki', NULL, 'feature_wiki_attachments');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_admin_ratings', 'Can add and change ratings on wiki pages', 'admin', 'wiki', NULL, 'feature_wiki_ratings');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_attach_files', 'Can attach files to wiki pages', 'registered', 'wiki', NULL, 'feature_wiki_attachments');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_view_attachments', 'Can view wiki attachments and download', 'registered', 'wiki', NULL, 'feature_wiki_attachments');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_view_comments', 'Can view wiki comments', 'basic', 'wiki', NULL, 'feature_wiki_comments');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_view_history', 'Can view wiki history', 'basic', 'wiki', NULL, 'feature_history');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_view_ratings', 'Can view rating of wiki pages', 'basic', 'wiki', NULL, 'feature_wiki_ratings');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_view_source', 'Can view source of wiki pages', 'basic', 'wiki', NULL, 'feature_source');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_vote_ratings', 'Can participate to rating of wiki pages', 'registered', 'wiki', NULL, 'feature_wiki_ratings');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_view_similar', 'Can view similar wiki pages', 'registered', 'wiki', NULL, 'feature_wiki');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_received_articles', 'Can admin received articles', 'editors', 'comm', NULL, 'feature_comm');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_received_pages', 'Can admin received pages', 'editors', 'comm', NULL, 'feature_comm');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_send_articles', 'Can send articles to other sites', 'editors', 'comm', NULL, 'feature_comm');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_sendme_articles', 'Can send articles to this site', 'registered', 'comm', NULL, 'feature_comm');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_sendme_pages', 'Can send pages to this site', 'registered', 'comm', NULL, 'feature_comm');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_send_pages', 'Can send pages to other sites', 'registered', 'comm', NULL, 'feature_comm');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_tikitests', 'Can admin the TikiTests', 'admin', 'tikitests', NULL, 'feature_tikitests');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_tikitests', 'Can edit TikiTests', 'editors', 'tikitests', NULL, 'feature_tikitests');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_play_tikitests', 'Can replay the TikiTests', 'registered', 'tikitests', NULL, 'feature_tikitests');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_cache_bookmarks', 'Can cache user bookmarks', 'admin', 'user', NULL, 'feature_user_bookmarks');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_configure_modules', 'Can configure modules', 'registered', 'user', NULL, 'feature_modulecontrols');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_create_bookmarks', 'Can create user bookmarks', 'registered', 'user', NULL, 'feature_user_bookmarks');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_minical', 'Can use the mini event calendar', 'registered', 'user', NULL, 'feature_minical');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_notepad', 'Can use the notepad', 'registered', 'user', NULL, 'feature_notepad');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tasks_admin', 'Can admin public tasks', 'admin', 'user', NULL, 'feature_tasks');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tasks', 'Can use tasks', 'registered', 'user', NULL, 'feature_tasks');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tasks_receive', 'Can receive tasks from other users', 'registered', 'user', NULL, 'feature_tasks');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tasks_send', 'Can send tasks to other users', 'registered', 'user', NULL, 'feature_tasks');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_userfiles', 'Can upload personal files', 'registered', 'user', NULL, 'feature_userfiles');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_usermenu', 'Can create items in personal menu', 'registered', 'user', NULL, 'feature_usermenu');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_broadcast_all', 'Can broadcast messages to all user', 'admin', 'messu', NULL, 'feature_messages');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_broadcast', 'Can broadcast messages to groups', 'admin', 'messu', NULL, 'feature_messages');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_messages', 'Can use the messaging system', 'registered', 'messu', NULL, 'feature_messages');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_comments', 'Can admin comments', 'admin', 'comments', 'y', 'feature_wiki_comments,feature_blogposts_comments,feature_file_galleries_comments,feature_image_galleries_comments,feature_article_comments,feature_faq_comments,feature_poll_comments,map_comments');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_comments', 'Can edit all comments', 'editors', 'comments', NULL, 'feature_wiki_comments,feature_blogposts_comments,feature_file_galleries_comments,feature_image_galleries_comments,feature_article_comments,feature_faq_comments,feature_poll_comments,map_comments');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_post_comments', 'Can post new comments', 'registered', 'comments', NULL, 'feature_wiki_comments,feature_blogposts_comments,feature_file_galleries_comments,feature_image_galleries_comments,feature_article_comments,feature_faq_comments,feature_poll_comments,map_comments');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_read_comments', 'Can read comments', 'basic', 'comments', NULL, 'feature_wiki_comments,feature_blogposts_comments,feature_file_galleries_comments,feature_image_galleries_comments,feature_article_comments,feature_faq_comments,feature_poll_comments,map_comments');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_remove_comments', 'Can delete comments', 'editors', 'comments', NULL, 'feature_wiki_comments,feature_blogposts_comments,feature_file_galleries_comments,feature_image_galleries_comments,feature_article_comments,feature_faq_comments,feature_poll_comments,map_comments');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_vote_comments', 'Can vote comments', 'registered', 'comments', NULL, 'feature_wiki_comments,feature_blogposts_comments,feature_file_galleries_comments,feature_image_galleries_comments,feature_article_comments,feature_faq_comments,feature_poll_comments,map_comments');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_content_templates', 'Can admin content templates', 'admin', 'content templates', 'y', 'feature_wiki_templates,feature_cms_templates');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_content_templates', 'Can edit content templates', 'editors', 'content templates', NULL, 'feature_wiki_templates,feature_cms_templates');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_use_content_templates', 'Can use content templates', 'registered', 'content templates', NULL, 'feature_wiki_templates,feature_cms_templates');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_html_pages', 'Can edit HTML pages', 'editors', 'html pages', NULL, 'feature_html_pages');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_html_pages', 'Can view HTML pages', 'basic', 'html pages', NULL, 'feature_html_pages');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_list_users', 'Can list registered users', 'registered', 'user', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_live_support_admin', 'Admin live support system', 'admin', 'support', 'y', 'feature_live_support');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_live_support', 'Can use live support system', 'basic', 'support', NULL, 'feature_live_support');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_map_create', 'Can create new mapfile', 'admin', 'maps', NULL, 'feature_maps');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_map_delete', 'Can delete mapfiles', 'admin', 'maps', NULL, 'feature_maps');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_map_edit', 'Can edit mapfiles', 'editors', 'maps', NULL, 'feature_maps');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_map_view', 'Can view mapfiles', 'basic', 'maps', NULL, 'feature_maps');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_map_view_mapfiles', 'Can view contents of mapfiles', 'registered', 'maps', NULL, 'feature_maps');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_use_webmail', 'Can use webmail', 'registered', 'webmail', NULL, 'feature_webmail,feature_contacts');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_use_group_webmail', 'Can use group webmail', 'registered', 'webmail', NULL, 'feature_webmail,feature_contacts');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_group_webmail', 'Can admin group webmail accounts', 'registered', 'webmail', NULL, 'feature_webmail,feature_contacts');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_use_personal_webmail', 'Can use personal webmail accounts', 'registered', 'webmail', NULL, 'feature_webmail,feature_contacts');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_personal_webmail', 'Can admin personal webmail accounts', 'registered', 'webmail', NULL, 'feature_webmail,feature_contacts');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_plugin_viewdetail', 'Can view unapproved plugin details', 'registered', 'wiki', NULL, 'feature_wiki');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_plugin_preview', 'Can execute unapproved plugin', 'registered', 'wiki', NULL, 'feature_wiki');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_plugin_approve', 'Can approve plugin execution', 'editors', 'wiki', NULL, 'feature_wiki');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_trust_input', 'Trust all user inputs including plugins (no security checks)', 'admin', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_backlink', 'View page backlinks', 'basic', 'wiki', NULL, 'feature_wiki');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_notifications', 'Can admin mail notifications', 'editors', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_invite_to_my_groups', 'Can invite user to my groups', 'editors', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_delete_account', 'Can delete his/her own account', 'admin', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_importer', 'Can use the importer', 'admin', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_categories', 'Can admin categories', 'editors', 'category', 'y', 'feature_categories');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_category', 'Can see the category in a listing', 'basic', 'category', NULL, 'feature_categories');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_modify_object_categories', 'Can change the categories of the object', 'editors', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_add_object', 'Can add objects to the category (needs tiki_p_modify_object_categories)', 'editors', 'category', NULL, 'feature_categories');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_remove_object', 'Can remove objects from the category (needs tiki_p_modify_object_categories)', 'editors', 'category', NULL, 'feature_categories');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_create_category', 'Can create new categories', 'admin', 'category', NULL, 'feature_categories');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_perspective_view', 'Can view the perspective', 'basic', 'perspective', NULL, 'feature_perspective');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_perspective_edit', 'Can edit the perspective', 'basic', 'perspective', NULL, 'feature_perspective');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_perspective_create', 'Can create a perspective', 'basic', 'perspective', NULL, 'feature_perspective');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_perspective_admin', 'Can admin perspectives', 'admin', 'perspective', 'y', 'feature_perspective');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_group_view', 'Can view the group', 'basic', 'group', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_group_view_members', 'Can view the group members', 'basic', 'group', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_group_add_member', 'Can add group members', 'admin', 'group', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_group_remove_member', 'Can remove group members', 'admin', 'group', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_group_join', 'Can join or leave the group', 'admin', 'group', NULL, NULL);
-
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_trigger_transition', 'Can trigger the transition between two states', 'admin', 'transition', NULL, 'feature_group_transition,feature_category_transition');
-
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_kaltura', 'Can admin kaltura feature', 'admin', 'kaltura', 'y', 'feature_kaltura');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_upload_videos', 'Can upload video on kaltura server', 'editors', 'kaltura', NULL, 'feature_kaltura');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_videos', 'Can edit information of kaltura entry', 'editors', 'kaltura', NULL, 'feature_kaltura');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_remix_videos', 'Can create kaltura remix video', 'editors', 'kaltura', NULL, 'feature_kaltura');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_delete_videos', 'Can delete kaltura entry', 'editors', 'kaltura', NULL, 'feature_kaltura');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_download_videos', 'Can download kaltura entry', 'registered', 'kaltura', NULL, 'feature_kaltura');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_list_videos', 'Can list kaltura entries', 'basic', 'kaltura', NULL, 'feature_kaltura');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_videos', 'Can view kaltura entry', 'basic', 'kaltura', NULL, 'feature_kaltura');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_dsn_query', 'Can execute arbitrary queries on a given DSN', 'admin', 'dsn', NULL, NULL);
-
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_admin', 'Can administer payments', 'admin', 'payment', 'y', 'payment_feature');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_view', 'Can view payment requests and details', 'admin', 'payment', NULL, 'payment_feature');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_manual', 'Can enter manual payments', 'admin', 'payment', NULL, 'payment_feature');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_request', 'Can request a payment', 'admin', 'payment', NULL, 'payment_feature');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES ('tiki_p_admin_modules', 'User can administer modules', 'registered', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tracker_dump', 'Can save a .CSV backup of entire trackers', 'admin', 'trackers', NULL, 'feature_trackers');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_bigbluebutton_join', 'Can join a meeting', 'basic', 'bigbluebutton', NULL, 'bigbluebutton_feature');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_bigbluebutton_moderate', 'Can moderate a meeting', 'admin', 'bigbluebutton', NULL, 'bigbluebutton_feature');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_bigbluebutton_create', 'Can create a meeting', 'admin', 'bigbluebutton', NULL, 'bigbluebutton_feature');
-
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_socialnetworks', 'user can use social network integration', 'registered', 'socialnetworks', NULL, 'feature_socialnetworks');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_socialnetworks', 'user can register this site with social networks', 'admin', 'socialnetworks', 'y', 'feature_socialnetworks');
-
-
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_page_contribution_view', 'Can view contributions to a page', 'basic', 'wiki', NULL, 'feature_wiki');
-
-INSERT INTO `users_permissions` (`permName` , `permDesc` , `level` , `type` , `admin` , `feature_check` ) VALUES ( 'tiki_p_acct_create_book', 'Can create/close a book', 'admin', 'accounting', 'y', 'feature_accounting');
-INSERT INTO `users_permissions` (`permName` , `permDesc` , `level` , `type` , `admin` , `feature_check` ) VALUES ( 'tiki_p_acct_manage_accounts', 'Can create/edit/lock accounts', 'admin', 'accounting', 'y', 'feature_accounting' );
-INSERT INTO `users_permissions` (`permName` , `permDesc` , `level` , `type` , `admin` , `feature_check` ) VALUES ( 'tiki_p_acct_book', 'Create a new transaction', 'editor', 'accounting', 'n', 'feature_accounting');
-INSERT INTO `users_permissions` (`permName` , `permDesc` , `level` , `type` , `admin` , `feature_check` ) VALUES ( 'tiki_p_acct_view', 'Permission to view the journal', 'registered', 'accounting', 'n', 'feature_accounting' );
-INSERT INTO `users_permissions` (`permName` , `permDesc` , `level` , `type` , `admin` , `feature_check` ) VALUES ( 'tiki_p_acct_book_stack', 'Can book into the stack, where statements can be changed', 'editor', 'accounting', 'n', 'feature_accounting');
-INSERT INTO `users_permissions` (`permName` , `permDesc` , `level` , `type` , `admin` , `feature_check` ) VALUES ( 'tiki_p_acct_book_import', 'Can import statements from external accounts', 'editor', 'accounting', 'n', 'feature_accounting' );
-INSERT INTO `users_permissions` (`permName` , `permDesc` , `level` , `type` , `admin` , `feature_check` ) VALUES ( 'tiki_p_acct_manage_template', 'Can manage templates for recurring transactions', 'editor', 'accounting', 'n', 'feature_accounting');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_view_latest', 'Can view unapproved revisions of pages', 'registered', 'wiki', NULL, 'flaggedrev_approval');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_approve', 'Can approve revisions of pages', 'editor', 'wiki', NULL, 'flaggedrev_approval');
-
 DROP TABLE IF EXISTS `users_usergroups`;
 CREATE TABLE `users_usergroups` (
   `userId` int(8) NOT NULL default '0',
@@ -3821,7 +3526,6 @@
   KEY `used_on_user` (`used_on_user`)
 ) ENGINE=MyISAM;
 
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES ('tiki_p_invite', 'Can invite users by email, and include them in groups', 'registered', 'tiki', NULL, 'feature_invite');
 
 DROP TABLE IF EXISTS `tiki_credits`;
 CREATE TABLE `tiki_credits` (

------------------------------------------------------------------------
r33912 | sylvieg | 2011-04-11 12:13:23 -0400 (seg, 11 abr 2011) | 1 line

ENH]banner: possibility to display banner of a zone only in some URIs

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 33911)
+++ tiki.sql	(revision 33912)
@@ -215,6 +215,7 @@
   `maxClicks` int(8) default NULL,
   `clicks` int(8) default NULL,
   `zone` varchar(40) default NULL,
+  `onlyInURIs` text,
   PRIMARY KEY (`bannerId`),
   INDEX ban1(zone,`useDates`,impressions,`maxImpressions`,`hourFrom`,`hourTo`,`fromDate`,`toDate`,mon,tue,wed,thu,fri,sat,sun)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;

------------------------------------------------------------------------
r33659 | jonnybradley | 2011-03-25 14:30:22 -0400 (sex, 25 mar 2011) | 1 line

[MRG] Automatic merge, branches/7.x 33652 to 33658

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 33658)
+++ tiki.sql	(revision 33659)
@@ -1532,9 +1532,9 @@
 
 INSERT INTO `tiki_modules` (name,position,ord,cache_time,params,groups) VALUES
     ('menu','l',1,7200,'id=42&flip=y','a:1:{i:0;s:10:"Registered";}'),
-    ('logo','t',1,7200,'nobox=y&style=float%3Aleft%3Bmargin%3A0+30px%3B','a:0:{}'),
-    ('login_box','t',2,0,'mode=header&nobox=y&style=position%3Aabsolute%3Bright%3A30px%3Btop%3A5px%3B','a:0:{}'),
-    ('quickadmin','t',3,7200,'nobox=y&style=position%3A+absolute%3B+right%3A+200px%3B','a:1:{i:0;s:6:"Admins";}'),
+    ('logo','t',1,7200,'nobox=y','a:0:{}'),
+    ('login_box','t',2,0,'mode=popup&nobox=y','a:0:{}'),
+    ('quickadmin','t',3,7200,'nobox=y','a:1:{i:0;s:6:"Admins";}'),
     ('rsslist','b',1,7200,'nobox=y','a:0:{}'),
     ('poweredby','b',2,7200,'nobox=y&icons=n&version=n','a:0:{}');
 

------------------------------------------------------------------------
r33641 | jonnybradley | 2011-03-24 17:12:03 -0400 (qui, 24 mar 2011) | 1 line

[MRG] Automatic merge, branches/7.x 33635 to 33640

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 33640)
+++ tiki.sql	(revision 33641)
@@ -2668,7 +2668,8 @@
 ) ENGINE=MyISAM;
 
 
-INSERT INTO users_grouppermissions (`groupName`,`permName`) VALUES('Anonymous','tiki_p_view');
+INSERT INTO users_grouppermissions (`groupName`,`permName`)
+	VALUES('Anonymous','tiki_p_view'),('Anonymous','tiki_p_search'),('Anonymous','tiki_p_download_files');
 
 DROP TABLE IF EXISTS `users_groups`;
 CREATE TABLE `users_groups` (

------------------------------------------------------------------------
r33464 | nkoth | 2011-03-17 13:05:22 -0400 (qui, 17 mar 2011) | 1 line

[MOD] Maximize size for relation and attribute while reatining indexability

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 33463)
+++ tiki.sql	(revision 33464)
@@ -3718,9 +3718,9 @@
 CREATE TABLE `tiki_object_attributes` (
     `attributeId` INT PRIMARY KEY AUTO_INCREMENT,
     `type` varchar(50) NOT NULL,
-    `itemId` varchar(255) NOT NULL,
-    `attribute` varchar(25) NOT NULL,
-    `value` varchar(100),
+    `itemId` varchar(160) NOT NULL,
+    `attribute` varchar(70) NOT NULL,
+    `value` varchar(255),
     UNIQUE `item_attribute_uq` ( `type`, `itemId`, `attribute` ),
     KEY `attribute_lookup_ix` (`attribute`, `value`)
 ) ENGINE=MyISAM;
@@ -3748,11 +3748,11 @@
 DROP TABLE IF EXISTS `tiki_object_relations`;
 CREATE TABLE `tiki_object_relations` (
     `relationId` INT PRIMARY KEY AUTO_INCREMENT,
-    `relation` varchar(25) NOT NULL,
+    `relation` varchar(70) NOT NULL,
     `source_type` varchar(50) NOT NULL,
-    `source_itemId` varchar(255) NOT NULL,
+    `source_itemId` varchar(160) NOT NULL,
     `target_type` varchar(50) NOT NULL,
-    `target_itemId` varchar(255) NOT NULL,
+    `target_itemId` varchar(160) NOT NULL,
     KEY `relation_source_ix` (`source_type`, `source_itemId`),
     KEY `relation_target_ix` (`target_type`, `target_itemId`)
 ) ENGINE=MyISAM;
@@ -3994,12 +3994,11 @@
 
 DROP TABLE IF EXISTS `tiki_queue`;
 CREATE TABLE `tiki_queue` (
-	`entryId` INT PRIMARY KEY AUTO_INCREMENT,
-	`queue` VARCHAR(25) NOT NULL,
-	`timestamp` INT NOT NULL,
-	`handler` VARCHAR(20) NULL,
-	`message` TEXT NOT NULL,
-	KEY `queue_name_ix` (`queue`),
-	KEY `queue_handler_ix` (`handler`)
+    `entryId` INT PRIMARY KEY AUTO_INCREMENT,
+    `queue` VARCHAR(25) NOT NULL,
+    `timestamp` INT NOT NULL,
+    `handler` VARCHAR(20) NULL,
+    `message` TEXT NOT NULL,
+    KEY `queue_name_ix` (`queue`),
+    KEY `queue_handler_ix` (`handler`)
 ) ENGINE=MyISAM;
-

------------------------------------------------------------------------
r33287 | sylvieg | 2011-03-08 18:39:29 -0400 (ter, 08 mar 2011) | 1 line

[FIX]rss: index are limitted to 255

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 33286)
+++ tiki.sql	(revision 33287)
@@ -3711,7 +3711,7 @@
     `description` TEXT,
     `content` TEXT,
     KEY `tiki_rss_items_rss` (`rssId`),
-    UNIQUE `tiki_rss_items_item` (`rssId`, `guid`)
+    KEY `tiki_rss_items_item` (`rssId`, `guid`(200))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_object_attributes`;

------------------------------------------------------------------------
r33274 | jonnybradley | 2011-03-07 16:01:47 -0400 (seg, 07 mar 2011) | 2 lines

[KIL] Calendar reminder removed.
Interesting feature but still not functioning after several months. Also not using Tiki conventions and libraries for notifications, database access, mail sending etc.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 33273)
+++ tiki.sql	(revision 33274)
@@ -3856,26 +3856,6 @@
     PRIMARY KEY ( `credit_type` ) 
 ) ENGINE=MyISAM;
 
-
--- --------------------------------------------------------
--- Calendar reminder table
--- --------------------------------------------------------
-DROP TABLE IF EXISTS custom_calendar_reminder;
-CREATE TABLE custom_calendar_reminder
-(
-    reminder_id INT NOT NULL AUTO_INCREMENT,
-    calendar_item_id INT NOT NULL,
-    reminder_type TINYINT NOT NULL DEFAULT 0,
-    fixed_date INT NOT NULL DEFAULT 0,
-    time_offset INT NOT NULL DEFAULT 0,
-    related_to CHAR(1) NOT NULL DEFAULT 'S',
-    when_run CHAR(1) NOT NULL DEFAULT 'B',
-    last_sent INT NOT NULL DEFAULT 0,
-    times_sent INT NOT NULL DEFAULT 0,
-    PRIMARY KEY (reminder_id),
-    INDEX (calendar_item_id)
-) ENGINE=MyISAM;
-
 DROP TABLE IF EXISTS `tiki_acct_account`;
 CREATE TABLE `tiki_acct_account` (
   `accountBookId` int(10) unsigned NOT NULL,

------------------------------------------------------------------------
r33061 | lphuberdeau | 2011-02-23 11:31:39 -0400 (qua, 23 fev 2011) | 1 line

[MOD] Use a queue to collect the documents that need updating in the index, prevent the queue from being processed during a complete rebuild and process the queue right after a complete rebuild

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 33060)
+++ tiki.sql	(revision 33061)
@@ -4011,3 +4011,15 @@
   `taxIsFix` enum('y','n') NOT NULL DEFAULT 'n',
   PRIMARY KEY (`taxBookId`,`taxId`)
 ) ENGINE=MyISAM;
+
+DROP TABLE IF EXISTS `tiki_queue`;
+CREATE TABLE `tiki_queue` (
+	`entryId` INT PRIMARY KEY AUTO_INCREMENT,
+	`queue` VARCHAR(25) NOT NULL,
+	`timestamp` INT NOT NULL,
+	`handler` VARCHAR(20) NULL,
+	`message` TEXT NOT NULL,
+	KEY `queue_name_ix` (`queue`),
+	KEY `queue_handler_ix` (`handler`)
+) ENGINE=MyISAM;
+

------------------------------------------------------------------------
r32922 | luciash | 2011-02-20 02:44:32 -0400 (dom, 20 fev 2011) | 1 line

[ENH] tiki_p_tracker_view_attachments: new perm to allow viewing and downloading of tracker items attachments

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 32921)
+++ tiki.sql	(revision 32922)
@@ -2848,6 +2848,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_survey_stats', 'Can view survey stats', 'basic', 'surveys', NULL, 'feature_surveys');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_trackers', 'Can admin trackers', 'editors', 'trackers', 'y', 'feature_trackers');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_attach_trackers', 'Can attach files to tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tracker_view_attachments', 'Can view tracker items attachments and download', 'registered', 'trackers', NULL, 'feature_trackers');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_comment_tracker_items', 'Can insert comments for tracker items', 'basic', 'trackers', NULL, 'feature_trackers');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tracker_view_comments', 'Can view tracker items comments', 'basic', 'trackers', NULL, 'feature_trackers');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_create_tracker_items', 'Can create new items for trackers', 'registered', 'trackers', NULL, 'feature_trackers');

------------------------------------------------------------------------
r32569 | eromneg | 2011-02-11 09:53:52 -0400 (sex, 11 fev 2011) | 1 line

[FIX] mistyped File Gallery menu permission

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 32568)
+++ tiki.sql	(revision 32569)
@@ -1364,7 +1364,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_admin_directory_cats','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_admin_directory_sites','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_validate_links','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','File Galleries','tiki-list_file_gallery.php',600,'feature_file_galleries','tiki-list_file_gallery.php|tiki_p_view_file_gallery|tiki_p_upload_files','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','File Galleries','tiki-list_file_gallery.php',600,'feature_file_galleries','tiki_p_list_file_galleries|tiki_p_view_file_gallery|tiki_p_upload_files','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Galleries','tiki-list_file_gallery.php',605,'feature_file_galleries','tiki_p_list_file_galleries','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Rankings','tiki-file_galleries_rankings.php',610,'feature_file_galleries,feature_file_galleries_rankings','tiki_p_list_file_galleries','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Upload File','tiki-upload_file.php',615,'feature_file_galleries','tiki_p_upload_files','',0);

------------------------------------------------------------------------
r32542 | changi67 | 2011-02-10 03:45:12 -0400 (qui, 10 fev 2011) | 1 line

[FIX] Force MyISAM Engine - http://dev.tiki.org/wish3790

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 32541)
+++ tiki.sql	(revision 32542)
@@ -659,7 +659,7 @@
   `name` varchar(40) NOT NULL,
   `data` text,
   `lang` VARCHAR(16) NULL
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_extwiki`;
 CREATE TABLE `tiki_extwiki` (
@@ -1572,7 +1572,7 @@
     `validateAddrs` CHAR( 1 ) NOT NULL DEFAULT 'n',
     `addToList` CHAR( 1 ) NOT NULL DEFAULT 'n',
     PRIMARY KEY ( `nlId` , `wikiPageName` )
-) ENGINE = MYISAM ;
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_newsletters`;
 CREATE TABLE `tiki_newsletters` (
@@ -3322,7 +3322,7 @@
   KEY (`page_id`),
   KEY (`original_translation_bit`),
   KEY (`source_translation_bit`)
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_pages_changes`;
 CREATE TABLE `tiki_pages_changes` (
@@ -3332,7 +3332,7 @@
   `segments_removed` int(10),
   `segments_total` int(10),
   PRIMARY KEY (page_id, version)
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_minichat`;
 CREATE TABLE `tiki_minichat` (
@@ -3344,7 +3344,7 @@
   `msg` varchar(255) NOT NULL,
   PRIMARY KEY (`id`),
   KEY `channel` (`channel`)
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_profile_symbols`;
 CREATE TABLE `tiki_profile_symbols` (
@@ -3357,7 +3357,7 @@
   `creation_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
   PRIMARY KEY ( `domain`, `profile`, `object` ),
   INDEX(`named`)
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_feature`;
 CREATE TABLE `tiki_feature` (
@@ -3438,7 +3438,7 @@
   `filename` varchar(256) NOT NULL,
   PRIMARY KEY  (`id`),
   KEY `editionId` (`editionId`)
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_sefurl_regex_out`;
 CREATE TABLE `tiki_sefurl_regex_out` (
@@ -3453,7 +3453,7 @@
   PRIMARY KEY (`id`),
   UNIQUE KEY `left` (`left`(128)),
   INDEX `idx1` (silent, type, feature(30))
-);
+) ENGINE=MyISAM;
 
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-index.php\\?page=(.+)', '$1', 'wiki', 'feature_wiki');
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-slideshow.php\\?page=(.+)', 'show:$1', '', 'feature_wiki');
@@ -3541,7 +3541,7 @@
   `last_objectType` VARCHAR(20) NOT NULL,
   `last_objectId` VARCHAR(200) NOT NULL,
   KEY `last_object` (last_objectType, last_objectId)
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_user_reports`;
 CREATE TABLE `tiki_user_reports` (
@@ -3608,7 +3608,7 @@
     `groups` VARCHAR(255),
     PRIMARY KEY( `tokenId` ),
     KEY `tiki_auth_tokens_token` (`token`)
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `metrics_assigned`;
 CREATE TABLE `metrics_assigned` (
@@ -3618,7 +3618,7 @@
     PRIMARY KEY (`assigned_id`),
     KEY `metric_id` (`metric_id`),
     KEY `tab_id` (`tab_id`)
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `metrics_metric`;
 CREATE TABLE `metrics_metric` (
@@ -3631,7 +3631,7 @@
     `metric_dsn` VARCHAR(200) NOT NULL DEFAULT 'local',
     PRIMARY KEY (`metric_id`),
     UNIQUE KEY `metric_name` (`metric_name`)
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `metrics_tab`;
 CREATE TABLE `metrics_tab` (
@@ -3641,7 +3641,7 @@
     `tab_content` longtext NOT NULL,
     PRIMARY KEY (`tab_id`),
     UNIQUE KEY `tab_name` (`tab_name`)
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_file_backlinks`;
 CREATE TABLE `tiki_file_backlinks` (
@@ -3649,7 +3649,7 @@
        `objectId` int(12) NOT NULL,
        KEY `objectId` (`objectId`),
        KEY `fileId` (`fileId`)
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_payment_requests`;
 CREATE TABLE `tiki_payment_requests` (
@@ -3665,7 +3665,7 @@
     `detail` TEXT,
     `userId` int(8),
     PRIMARY KEY( `paymentRequestId` )
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_payment_received`;
 CREATE TABLE `tiki_payment_received` (
@@ -3678,7 +3678,7 @@
     `userId` int(8),
     PRIMARY KEY(`paymentReceivedId`),
     KEY `payment_request_ix` (`paymentRequestId`)
-);
+) ENGINE=MyISAM;
 DROP TABLE IF EXISTS `tiki_discount`;
 CREATE TABLE `tiki_discount`( 
     `id` INT NOT NULL AUTO_INCREMENT,
@@ -3688,7 +3688,7 @@
     `comment` TEXT,
     PRIMARY KEY(`id`),
     KEY `code` (`code`)
-);
+) ENGINE=MyISAM;
 DROP TABLE IF EXISTS `tiki_translations_in_progress`;
 CREATE TABLE IF NOT EXISTS `tiki_translations_in_progress` (
    `page_id` int(14) NOT NULL,
@@ -3696,7 +3696,7 @@
    KEY `page_id` (`page_id`),
    KEY `language` (`language`),
    UNIQUE (`page_id`, `language`)
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_rss_items`;
 CREATE TABLE `tiki_rss_items` (
@@ -3711,7 +3711,7 @@
     `content` TEXT,
     KEY `tiki_rss_items_rss` (`rssId`),
     UNIQUE `tiki_rss_items_item` (`rssId`, `guid`)
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_object_attributes`;
 CREATE TABLE `tiki_object_attributes` (
@@ -3722,7 +3722,7 @@
     `value` varchar(100),
     UNIQUE `item_attribute_uq` ( `type`, `itemId`, `attribute` ),
     KEY `attribute_lookup_ix` (`attribute`, `value`)
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_rating_configs`;
 CREATE TABLE `tiki_rating_configs` (
@@ -3731,7 +3731,7 @@
     `expiry` INT NOT NULL DEFAULT 3600,
     `formula` TEXT NOT NULL,
     `callbacks` TEXT
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_rating_obtained`;
 CREATE TABLE `tiki_rating_obtained` (
@@ -3742,7 +3742,7 @@
     `expire` INT NOT NULL,
     `value` FLOAT NOT NULL,
     UNIQUE `tiki_obtained_rating_uq` (`type`, `object`, `ratingConfigId`)
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_object_relations`;
 CREATE TABLE `tiki_object_relations` (
@@ -3754,7 +3754,7 @@
     `target_itemId` varchar(255) NOT NULL,
     KEY `relation_source_ix` (`source_type`, `source_itemId`),
     KEY `relation_target_ix` (`target_type`, `target_itemId`)
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_todo`;
 CREATE TABLE `tiki_todo` (
@@ -3768,7 +3768,7 @@
     PRIMARY KEY (`todoId`),
     KEY `what` (`objectType`, `objectId`),
     KEY `after` (`after`)
-);
+) ENGINE=MyISAM;
 DROP TABLE IF EXISTS `tiki_todo_notif`;
 CREATE TABLE `tiki_todo_notif` (
     `todoId` INT(12) NOT NULL,
@@ -3776,7 +3776,7 @@
     `objectId` VARCHAR(255) default NULL,
     KEY `todoId` (`todoId`),
     KEY `objectId` (`objectId`)
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_url_shortener`;
 CREATE TABLE `tiki_url_shortener` (
@@ -3802,7 +3802,7 @@
   `wikicontent` text,
   `wikipageafter` varchar(255) default NULL,
   PRIMARY KEY  (`id`)
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_invited`;
 CREATE TABLE `tiki_invited` (
@@ -3816,7 +3816,7 @@
   PRIMARY KEY  (`id`),
   KEY `id_invite` (`id_invite`),
   KEY `used_on_user` (`used_on_user`)
-);
+) ENGINE=MyISAM;
 
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES ('tiki_p_invite', 'Can invite users by email, and include them in groups', 'registered', 'tiki', NULL, 'feature_invite');
 
@@ -3832,7 +3832,7 @@
     `product_id` INT( 8 ) NULL ,
     PRIMARY KEY ( `creditId` ) ,
     INDEX ( `userId` , `credit_type` )
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_credits_usage`;
 CREATE TABLE `tiki_credits_usage` (
@@ -3843,7 +3843,7 @@
     `used_amount` FLOAT NOT NULL DEFAULT 0,
     `product_id` INT( 8 ) NULL ,
     PRIMARY KEY ( `usageId` )
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_credits_types`;
 CREATE TABLE `tiki_credits_types` (
@@ -3853,7 +3853,7 @@
     `is_static_level` CHAR( 1 ) DEFAULT 'n',
     `scaling_divisor` FLOAT NOT NULL DEFAULT 1,
     PRIMARY KEY ( `credit_type` ) 
-);
+) ENGINE=MyISAM;
 
 
 -- --------------------------------------------------------
@@ -3873,7 +3873,7 @@
     times_sent INT NOT NULL DEFAULT 0,
     PRIMARY KEY (reminder_id),
     INDEX (calendar_item_id)
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_acct_account`;
 CREATE TABLE `tiki_acct_account` (
@@ -3887,7 +3887,7 @@
   `accountUserId` int(8) NOT NULL DEFAULT '0',
   PRIMARY KEY (`accountBookId`,`accountId`),
   KEY `accountTax` (`accountTax`)
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_acct_bankaccount`; 
 CREATE TABLE `tiki_acct_bankaccount` (
@@ -3918,7 +3918,7 @@
   `SignPositive` varchar(7) NOT NULL,
   `SignNegative` varchar(7) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
   PRIMARY KEY (`bankBookId`,`bankAccountId`)
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_acct_book`;
 CREATE TABLE `tiki_acct_book` (
@@ -3937,7 +3937,7 @@
   `exportQuote` varchar(4) NOT NULL DEFAULT '"',
   `bookAutoTax` enum('y','n') NOT NULL DEFAULT 'y',
   PRIMARY KEY (`bookId`)
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_acct_item`; 
 CREATE TABLE `tiki_acct_item` (
@@ -3949,7 +3949,7 @@
   `itemText` varchar(255) NOT NULL DEFAULT '',
   `itemTs` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
   PRIMARY KEY (`itemBookId`,`itemJournalId`,`itemAccountId`,`itemType`)
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_acct_journal`; 
 CREATE TABLE `tiki_acct_journal` (
@@ -3960,7 +3960,7 @@
   `journalCancelled` int(1) NOT NULL DEFAULT '0',
   `journalTs` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
   PRIMARY KEY (`journalBookId`,`journalId`)
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_acct_stack`; 
 CREATE TABLE `tiki_acct_stack` (
@@ -3970,7 +3970,7 @@
   `stackDescription` varchar(255) NOT NULL,
   `stackTs` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
   PRIMARY KEY (`stackBookId`,`stackId`)
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_acct_stackitem`; 
 CREATE TABLE `tiki_acct_stackitem` (
@@ -3981,7 +3981,7 @@
   `stackItemAmount` double NOT NULL DEFAULT '0',
   `stackItemText` varchar(255) NOT NULL DEFAULT '',
   PRIMARY KEY (`stackBookId`,`stackItemStackId`,`stackItemAccountId`,`stackItemType`)
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_acct_statement`;
 CREATE TABLE `tiki_acct_statement` (
@@ -3999,7 +3999,7 @@
   `statementJournalId` int(10) unsigned NOT NULL DEFAULT '0',
   `statementStackId` int(11) NOT NULL,
   PRIMARY KEY (`statementBookId`,`statementAccountId`,`statementId`)
-);
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_acct_tax`; 
 CREATE TABLE `tiki_acct_tax` (
@@ -4009,4 +4009,4 @@
   `taxAmount` double NOT NULL DEFAULT '0',
   `taxIsFix` enum('y','n') NOT NULL DEFAULT 'n',
   PRIMARY KEY (`taxBookId`,`taxId`)
-);
+) ENGINE=MyISAM;

------------------------------------------------------------------------
r32539 | sylvieg | 2011-02-09 18:20:26 -0400 (qua, 09 fev 2011) | 1 line

[FIX]users: tiki_p_list_users is now used outside the feature

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 32538)
+++ tiki.sql	(revision 32539)
@@ -2927,7 +2927,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_use_content_templates', 'Can use content templates', 'registered', 'content templates', NULL, 'feature_wiki_templates,feature_cms_templates');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_html_pages', 'Can edit HTML pages', 'editors', 'html pages', NULL, 'feature_html_pages');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_html_pages', 'Can view HTML pages', 'basic', 'html pages', NULL, 'feature_html_pages');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_list_users', 'Can list registered users', 'registered', 'user', NULL, 'feature_friends');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_list_users', 'Can list registered users', 'registered', 'user', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_live_support_admin', 'Admin live support system', 'admin', 'support', 'y', 'feature_live_support');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_live_support', 'Can use live support system', 'basic', 'support', NULL, 'feature_live_support');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_map_create', 'Can create new mapfile', 'admin', 'maps', NULL, 'feature_maps');

------------------------------------------------------------------------
r32346 | chealer | 2011-02-01 14:40:40 -0400 (ter, 01 fev 2011) | 2 lines

MySQL 5.5: don't use removed TIMESTAMP(N), just TIMESTAMP. thanks elmonty
sorry, Aptana might be messing with indentation a bit

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 32345)
+++ tiki.sql	(revision 32346)
@@ -229,8 +229,8 @@
   `ip3` char(3) default NULL,
   `ip4` char(3) default NULL,
   `user` varchar(200) default '',
-  `date_from` timestamp(14) NOT NULL,
-  `date_to` timestamp(14) NOT NULL,
+  `date_from` timestamp NOT NULL,
+  `date_to` timestamp NOT NULL,
   `use_dates` char(1) default NULL,
   `created` int(14) default NULL,
   `message` text,
@@ -1531,12 +1531,12 @@
 ) ENGINE=MyISAM;
 
 INSERT INTO `tiki_modules` (name,position,ord,cache_time,params,groups) VALUES
-	('menu','l',1,7200,'id=42&flip=y','a:1:{i:0;s:10:"Registered";}'),
-	('logo','t',1,7200,'nobox=y&style=float%3Aleft%3Bmargin%3A0+30px%3B','a:0:{}'),
-	('login_box','t',2,0,'mode=header&nobox=y&style=position%3Aabsolute%3Bright%3A30px%3Btop%3A5px%3B','a:0:{}'),
-	('quickadmin','t',3,7200,'nobox=y&style=position%3A+absolute%3B+right%3A+200px%3B','a:1:{i:0;s:6:"Admins";}'),
-	('rsslist','b',1,7200,'nobox=y','a:0:{}'),
-	('poweredby','b',2,7200,'nobox=y&icons=n&version=n','a:0:{}');
+    ('menu','l',1,7200,'id=42&flip=y','a:1:{i:0;s:10:"Registered";}'),
+    ('logo','t',1,7200,'nobox=y&style=float%3Aleft%3Bmargin%3A0+30px%3B','a:0:{}'),
+    ('login_box','t',2,0,'mode=header&nobox=y&style=position%3Aabsolute%3Bright%3A30px%3Btop%3A5px%3B','a:0:{}'),
+    ('quickadmin','t',3,7200,'nobox=y&style=position%3A+absolute%3B+right%3A+200px%3B','a:1:{i:0;s:6:"Admins";}'),
+    ('rsslist','b',1,7200,'nobox=y','a:0:{}'),
+    ('poweredby','b',2,7200,'nobox=y&icons=n&version=n','a:0:{}');
 
 DROP TABLE IF EXISTS `tiki_newsletter_subscriptions`;
 CREATE TABLE `tiki_newsletter_subscriptions` (
@@ -1676,7 +1676,7 @@
   `active` char(1) default NULL,
   `publishDate` int(14) default NULL,
   `voteConsiderationSpan` int(4) default 0,
-	`anonym` ENUM( 'a', 'u', 'i', 'c' ) NOT NULL DEFAULT 'u',
+    `anonym` ENUM( 'a', 'u', 'i', 'c' ) NOT NULL DEFAULT 'u',
   PRIMARY KEY (`pollId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 ALTER TABLE tiki_polls ADD INDEX tiki_poll_lookup ( active , title );
@@ -3115,7 +3115,7 @@
 CREATE TABLE `tiki_friendship_requests` (
   `userFrom` varchar(200) NOT NULL default '',
   `userTo` varchar(200) NOT NULL default '',
-  `tstamp` timestamp(14) NOT NULL,
+  `tstamp` timestamp NOT NULL,
   PRIMARY KEY (`userFrom`(120),`userTo`(120))
 ) ENGINE=MyISAM;
 
@@ -3163,7 +3163,7 @@
   `user` char(200) NOT NULL default '',
   `event_id` char(200) NOT NULL default '',
   `expire` int(14) NOT NULL default '0',
-  `tstamp` timestamp(14) NOT NULL,
+  `tstamp` timestamp NOT NULL,
   PRIMARY KEY (`user`(110),`event_id`(110)),
   KEY `user` (user(110),event_id(110),expire)
 ) ENGINE=MyISAM;

------------------------------------------------------------------------
r32334 | robertplummer | 2011-02-01 10:49:28 -0400 (ter, 01 fev 2011) | 2 lines

[FIX] Some code refactoring for organization
[ADD] SQL for cloning spreadsheets to tiki.db

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 32333)
+++ tiki.sql	(revision 32334)
@@ -2000,6 +2000,7 @@
   `footerRow` int(4) NOT NULL default '0',
   `className` varchar(64) default NULL,
   `parseValues` char( 1 ) NOT NULL default 'n',
+  `clonedSheetId` int(8) NULL,
   UNIQUE KEY `sheetId` (`sheetId`, `begin`)
 ) ENGINE=MyISAM;
 
@@ -2018,6 +2019,7 @@
   `user` varchar(200) default '',
   `style` varchar( 255 ) default '',
   `class` varchar( 255 ) default '',
+  `clonedSheetId` int(8) NULL,
   UNIQUE KEY `sheetId` (`sheetId`,begin,`rowIndex`,`columnIndex`),
   KEY `sheetId_2` (`sheetId`,`rowIndex`,`columnIndex`)
 ) ENGINE=MyISAM;
@@ -2029,6 +2031,7 @@
   `description` text,
   `author` varchar(200) NOT NULL default '',
   `parentSheetId` int(8) NULL,
+  `clonedSheetId` int(8) NULL,
   PRIMARY KEY (`sheetId`)
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r32297 | nyloth | 2011-01-30 22:13:29 -0400 (dom, 30 jan 2011) | 3 lines

[NEW] Wiki Attachments in File Galleries: new pref 'feature_use_fgal_for_wiki_attachments' to handle attachments in file galleries + new smarty attachments plugin



Index: tiki.sql
===================================================================
--- tiki.sql	(revision 32296)
+++ tiki.sql	(revision 32297)
@@ -768,6 +768,7 @@
 
 INSERT INTO `tiki_file_galleries` (`galleryId`, `name`, `type`, `description`, `visible`, `user`, `public`, `parentId`) VALUES ('1','File Galleries', 'system', '', 'y', 'admin', 'y', -1);
 INSERT INTO `tiki_file_galleries` (`galleryId`, `name`, `type`, `description`, `visible`, `user`, `public`, `parentId`) VALUES ('2','Users File Galleries', 'system', '', 'y', 'admin', 'y', -1);
+INSERT INTO `tiki_file_galleries` (`galleryId`, `name`, `type`, `description`, `visible`, `user`, `public`, `parentId`) VALUES ('3','Wiki Attachments', 'system', '', 'y', 'admin', 'y', -1);
 
 
 DROP TABLE IF EXISTS `tiki_files`;

------------------------------------------------------------------------
r32289 | nyloth | 2011-01-30 21:16:51 -0400 (dom, 30 jan 2011) | 7 lines

[NEW] User files in file galleries
- new preference 'feature_use_fgal_for_user_files' to allow the usage of File Galleries for user files (with all advantages of File Galleries, like display options or WebDAV for example)
	(each user gets their own gallery, automatically created at first access. The gallery is named with the user name, in the special parent gallery 'Users File Galleries')
- User uploads can be done using tiki-userupload.php (not in a menu yet - has to be done)




Index: tiki.sql
===================================================================
--- tiki.sql	(revision 32288)
+++ tiki.sql	(revision 32289)
@@ -766,7 +766,8 @@
   PRIMARY KEY (`galleryId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-INSERT INTO `tiki_file_galleries` (`name`, `type`, `description`, `visible`, `user`, `public`, `parentId`) VALUES ('File Galleries', 'system', '', 'y', 'admin', 'y', -1);
+INSERT INTO `tiki_file_galleries` (`galleryId`, `name`, `type`, `description`, `visible`, `user`, `public`, `parentId`) VALUES ('1','File Galleries', 'system', '', 'y', 'admin', 'y', -1);
+INSERT INTO `tiki_file_galleries` (`galleryId`, `name`, `type`, `description`, `visible`, `user`, `public`, `parentId`) VALUES ('2','Users File Galleries', 'system', '', 'y', 'admin', 'y', -1);
 
 
 DROP TABLE IF EXISTS `tiki_files`;

------------------------------------------------------------------------
r32278 | nyloth | 2011-01-30 19:27:17 -0400 (dom, 30 jan 2011) | 1 line

[ENH] filegals: new preference to display checkboxes in filegal listing for mass actions + installer/schema for show_deleteAfer and show_share columns that were not included in r32269 and r32256 by mistake.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 32277)
+++ tiki.sql	(revision 32278)
@@ -759,6 +759,7 @@
   `backlinkPerms` char(1) default 'n',
   `show_backlinks` char(1) default NULL,
   `show_deleteAfter` char(1) default NULL,
+  `show_checked` char(1) default NULL,
   `show_share` char(1) default NULL,
   `image_max_size_x` int(8) NOT NULL default '0',
   `image_max_size_y` int(8) NOT NULL default '0',

------------------------------------------------------------------------
r32269 | nyloth | 2011-01-30 17:12:22 -0400 (dom, 30 jan 2011) | 15 lines

[NEW] Share This Page: New features to be able to use Tiki as a file sharing service
- New Admin panel for "Share This Page" options
- Better handle the temporary file sharing & file max hits
- In filegal listings : add a column 'share' to display the people which have some temporary access to the file and the number of hits they have done or can do
- Add AJAX Autocomplete to lookup into users & contacts
- Allow the user to specify the max number of access are allowed
- New options to hide or display info on the share page (for links, name, email, ...)
- Allow Tiki to send a notification to the Tiki user that shared the resource when the recipient has accessed the resource (through a Token that allow him to get temporarily superior rights)
- New options to automatically add unknown recipients to the user contacts

Other notes for Auth Tokens:
- Tokens are stored with an optional e-mail to be able to identify who has originally received the token (when the token was generated by "Share This Page" feature)
- Handle Token Errors (at the UI level)



Index: tiki.sql
===================================================================
--- tiki.sql	(revision 32268)
+++ tiki.sql	(revision 32269)
@@ -759,6 +759,7 @@
   `backlinkPerms` char(1) default 'n',
   `show_backlinks` char(1) default NULL,
   `show_deleteAfter` char(1) default NULL,
+  `show_share` char(1) default NULL,
   `image_max_size_x` int(8) NOT NULL default '0',
   `image_max_size_y` int(8) NOT NULL default '0',
   PRIMARY KEY (`galleryId`)
@@ -781,6 +782,7 @@
   `user` varchar(200) default '',
   `author` varchar(40) default NULL,
   `hits` int(14) default NULL,
+  `maxhits` INT( 14 ) default NULL, 
   `lastDownload` int(14) default NULL,
   `votes` int(8) default NULL,
   `points` decimal(8,2) default NULL,
@@ -3592,8 +3594,10 @@
     `creation` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
     `timeout` INT NOT NULL DEFAULT 0,
     `hits` INT NOT NULL DEFAULT 1,
+    `maxhits` INT NOT NULL DEFAULT 1, 
     `token` CHAR(32),
     `entry` VARCHAR(50),
+    `email` varchar(255) NOT NULL,
     `parameters` VARCHAR(255),
     `groups` VARCHAR(255),
     PRIMARY KEY( `tokenId` ),

------------------------------------------------------------------------
r32256 | nyloth | 2011-01-30 11:31:09 -0400 (dom, 30 jan 2011) | 1 line

[ENH] file galleries: handle the 'deleteAfter' file parameter as any other information in file listings (display it as a column, in the popup info, ...)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 32255)
+++ tiki.sql	(revision 32256)
@@ -758,6 +758,7 @@
   `wiki_syntax` varchar(200) default NULL,
   `backlinkPerms` char(1) default 'n',
   `show_backlinks` char(1) default NULL,
+  `show_deleteAfter` char(1) default NULL,
   `image_max_size_x` int(8) NOT NULL default '0',
   `image_max_size_y` int(8) NOT NULL default '0',
   PRIMARY KEY (`galleryId`)

------------------------------------------------------------------------
r31980 | sylvieg | 2011-01-18 12:30:54 -0400 (ter, 18 jan 2011) | 1 line

[ENH]tracker: split tiki_p_modify_tracker_item_xxx with tiki_p_remove_tracker_items_xxx

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 31979)
+++ tiki.sql	(revision 31980)
@@ -2846,6 +2846,9 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_modify_tracker_items', 'Can change tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_modify_tracker_items_pending', 'Can change pending tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_modify_tracker_items_closed', 'Can change closed tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_remove_tracker_items', 'Can remove tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_remove_tracker_items_pending', 'Can remove pending tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_remove_tracker_items_closed', 'Can remove closed tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tracker_view_ratings', 'Can view rating result for tracker items', 'basic', 'trackers', NULL, 'feature_trackers');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tracker_vote_ratings', 'Can vote a rating for tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tracker_revote_ratings', 'Can re-vote a rating for tracker items', 'registered', 'trackers', NULL, 'feature_trackers');

------------------------------------------------------------------------
r31958 | jonnybradley | 2011-01-17 16:39:15 -0400 (seg, 17 jan 2011) | 1 line

[FIX] modules: Better upgrade and defaults to match default theme (FiveAlive) - also restore siteheader.jpg to fivealives.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 31957)
+++ tiki.sql	(revision 31958)
@@ -1526,9 +1526,9 @@
 
 INSERT INTO `tiki_modules` (name,position,ord,cache_time,params,groups) VALUES
 	('menu','l',1,7200,'id=42&flip=y','a:1:{i:0;s:10:"Registered";}'),
-	('logo','t',1,7200,'nobox=y&style=float%3Aleft%3Bmargin%3A0+5em%3B','a:0:{}'),
-	('login_box','t',2,0,'mode=header&nobox=y&style=float%3Aright%3B','a:0:{}'),
-	('quickadmin','t',3,7200,'nobox=y&style=float%3Aleft%3Bmargin%3A0+5em%3B','a:1:{i:0;s:6:"Admins";}'),
+	('logo','t',1,7200,'nobox=y&style=float%3Aleft%3Bmargin%3A0+30px%3B','a:0:{}'),
+	('login_box','t',2,0,'mode=header&nobox=y&style=position%3Aabsolute%3Bright%3A30px%3Btop%3A5px%3B','a:0:{}'),
+	('quickadmin','t',3,7200,'nobox=y&style=position%3A+absolute%3B+right%3A+200px%3B','a:1:{i:0;s:6:"Admins";}'),
 	('rsslist','b',1,7200,'nobox=y','a:0:{}'),
 	('poweredby','b',2,7200,'nobox=y&icons=n&version=n','a:0:{}');
 

------------------------------------------------------------------------
r31953 | jonnybradley | 2011-01-17 14:55:08 -0400 (seg, 17 jan 2011) | 1 line

[FIX] modules revamp: Better defaults for new installs - no search or tiki-top menu, use menu module for application menu

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 31952)
+++ tiki.sql	(revision 31953)
@@ -1525,13 +1525,10 @@
 ) ENGINE=MyISAM;
 
 INSERT INTO `tiki_modules` (name,position,ord,cache_time,params,groups) VALUES
-	('Application Menu','l',30,7200,'flip=y','a:1:{i:0;s:10:"Registered";}'),
+	('menu','l',1,7200,'id=42&flip=y','a:1:{i:0;s:10:"Registered";}'),
 	('logo','t',1,7200,'nobox=y&style=float%3Aleft%3Bmargin%3A0+5em%3B','a:0:{}'),
 	('login_box','t',2,0,'mode=header&nobox=y&style=float%3Aright%3B','a:0:{}'),
-	('search','t',6,7200,'nobox=y&style=float%3Aright%3Bclear%3Aright%3B','a:0:{}'),
 	('quickadmin','t',3,7200,'nobox=y&style=float%3Aleft%3Bmargin%3A0+5em%3B','a:1:{i:0;s:6:"Admins";}'),
-	('menu','t',5,7200,'id=43&type=horiz&menu_id=tiki-top&menu_class=clearfix&nobox=y&style=float%3Aleft%3Bclear%3Aboth%3Bwidth%3A100%25%3B','a:0:{}'),
-	('breadcrumbs','t',6,0,'nobox=y','a:0:{}'),
 	('rsslist','b',1,7200,'nobox=y','a:0:{}'),
 	('poweredby','b',2,7200,'nobox=y&icons=n&version=n','a:0:{}');
 

------------------------------------------------------------------------
r31950 | jonnybradley | 2011-01-17 14:02:36 -0400 (seg, 17 jan 2011) | 7 lines

[ENH] modules revamp: Merge from experimental branch (known as "xajax_removal").
Drag and drop & double click modules admin
New module zones: top, pagetop, bottom and pagebottom
New modules (including menu, poweredby etc)
Upgrade script v1 to migrate header and footer prefs.
Many general [FIX]s and [MOD]s in modules.
More CSS work TODO.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 31949)
+++ tiki.sql	(revision 31950)
@@ -1524,7 +1524,16 @@
   KEY `namePosOrdParam` (`name`(100), `position`, `ord`, `params`(140))
 ) ENGINE=MyISAM;
 
-INSERT INTO tiki_modules (name,position,ord,cache_time,params,groups) VALUES ('Application Menu','l',30,0,'flip=y','a:1:{i:0;s:10:"Registered";}');
+INSERT INTO `tiki_modules` (name,position,ord,cache_time,params,groups) VALUES
+	('Application Menu','l',30,7200,'flip=y','a:1:{i:0;s:10:"Registered";}'),
+	('logo','t',1,7200,'nobox=y&style=float%3Aleft%3Bmargin%3A0+5em%3B','a:0:{}'),
+	('login_box','t',2,0,'mode=header&nobox=y&style=float%3Aright%3B','a:0:{}'),
+	('search','t',6,7200,'nobox=y&style=float%3Aright%3Bclear%3Aright%3B','a:0:{}'),
+	('quickadmin','t',3,7200,'nobox=y&style=float%3Aleft%3Bmargin%3A0+5em%3B','a:1:{i:0;s:6:"Admins";}'),
+	('menu','t',5,7200,'id=43&type=horiz&menu_id=tiki-top&menu_class=clearfix&nobox=y&style=float%3Aleft%3Bclear%3Aboth%3Bwidth%3A100%25%3B','a:0:{}'),
+	('breadcrumbs','t',6,0,'nobox=y','a:0:{}'),
+	('rsslist','b',1,7200,'nobox=y','a:0:{}'),
+	('poweredby','b',2,7200,'nobox=y&icons=n&version=n','a:0:{}');
 
 DROP TABLE IF EXISTS `tiki_newsletter_subscriptions`;
 CREATE TABLE `tiki_newsletter_subscriptions` (

------------------------------------------------------------------------
r31875 | lphuberdeau | 2011-01-12 13:11:06 -0400 (qua, 12 jan 2011) | 1 line

[NEW] Adding permissions for flagged revision approval and basic approval interface

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 31874)
+++ tiki.sql	(revision 31875)
@@ -2982,6 +2982,8 @@
 INSERT INTO `users_permissions` (`permName` , `permDesc` , `level` , `type` , `admin` , `feature_check` ) VALUES ( 'tiki_p_acct_book_stack', 'Can book into the stack, where statements can be changed', 'editor', 'accounting', 'n', 'feature_accounting');
 INSERT INTO `users_permissions` (`permName` , `permDesc` , `level` , `type` , `admin` , `feature_check` ) VALUES ( 'tiki_p_acct_book_import', 'Can import statements from external accounts', 'editor', 'accounting', 'n', 'feature_accounting' );
 INSERT INTO `users_permissions` (`permName` , `permDesc` , `level` , `type` , `admin` , `feature_check` ) VALUES ( 'tiki_p_acct_manage_template', 'Can manage templates for recurring transactions', 'editor', 'accounting', 'n', 'feature_accounting');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_view_latest', 'Can view unapproved revisions of pages', 'registered', 'wiki', NULL, 'flaggedrev_approval');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_approve', 'Can approve revisions of pages', 'editor', 'wiki', NULL, 'flaggedrev_approval');
 
 DROP TABLE IF EXISTS `users_usergroups`;
 CREATE TABLE `users_usergroups` (

------------------------------------------------------------------------
r31749 | lphuberdeau | 2011-01-04 12:37:33 -0400 (ter, 04 jan 2011) | 1 line

[NEW]Â Initial support for flagged revision approval scheme, much UI still missing

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 31748)
+++ tiki.sql	(revision 31749)
@@ -3231,6 +3231,7 @@
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Removed', 'wiki page attachment', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Categorized', 'wiki page', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Uncategorized', 'wiki page', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Flagged', 'wiki page', 'n');
 
 DROP TABLE IF EXISTS `tiki_freetags`;
 CREATE TABLE `tiki_freetags` (

------------------------------------------------------------------------
r31689 | lphuberdeau | 2010-12-31 12:34:52 -0400 (sex, 31 dez 2010) | 1 line

[FIX]Â Missing drop table if exists

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 31688)
+++ tiki.sql	(revision 31689)
@@ -3836,6 +3836,7 @@
 -- --------------------------------------------------------
 -- Calendar reminder table
 -- --------------------------------------------------------
+DROP TABLE IF EXISTS custom_calendar_reminder;
 CREATE TABLE custom_calendar_reminder
 (
     reminder_id INT NOT NULL AUTO_INCREMENT,

------------------------------------------------------------------------
r31557 | jonnybradley | 2010-12-20 21:04:49 -0400 (seg, 20 dez 2010) | 1 line

[bp/r31497 & 31499][KIL] feature_mobile

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 31556)
+++ tiki.sql	(revision 31557)
@@ -1288,7 +1288,6 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Calendar','tiki-calendar.php',35,'feature_calendar','tiki_p_view_calendar','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Users Map','tiki-gmap_usermap.php',36,'feature_gmap','','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tiki Calendar','tiki-action_calendar.php',37,'feature_action_calendar','tiki_p_view_tiki_calendar','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Mobile','tiki-mobile.php',37,'feature_mobile','','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','(debug)','javascript:toggle(\'debugconsole\')',40,'feature_debug_console','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','MyTiki','tiki-my_tiki.php',50,'feature_mytiki','','Registered',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','MyTiki Home','tiki-my_tiki.php',51,'feature_mytiki','','Registered',0);
@@ -3483,7 +3482,6 @@
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-stats.php', 'stats', '', 'feature_stats', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-list_surveys.php', 'surveys', '', 'feature_surveys', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-list_trackers.php', 'trackers', '', 'feature_trackers', 200);
-INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-mobile.php', 'mobile', '', 'feature_mobile', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-sheets.php', 'sheets', '', 'feature_sheet', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-view_tracker_item.php\\?trackerId=(\\d+)\\&itemId=(\\d+)', 'item$2', 'trackeritem', 'feature_trackers', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-view_tracker_item.php\\?itemId=(\\d+)', 'item$1', 'trackeritem', 'feature_trackers', 200);

------------------------------------------------------------------------
r31434 | jonnybradley | 2010-12-15 11:31:39 -0400 (qua, 15 dez 2010) | 8 lines

[bp/r31354 & 31355] From xajax_removal branch.
[KIL] xajax removal: First pass of removing Xajax.
3rd party library link disconnected and support files removed.
"loadComponent" functionality removed.
Remaining dependant features' (gmap, webmail, shoutbox) ajax operation disabled and marked with AJAX_TODO comments.
[KIL] xajax removal: Part 2 - feature_wiki_save_draft
Table tiki_page_drafts not removed to preserve existing data but removed from tiki.sql for new installs.
Script in devtools started for manual removal.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 31433)
+++ tiki.sql	(revision 31434)
@@ -1632,17 +1632,6 @@
   KEY `lastModif`(`lastModif`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
-DROP TABLE IF EXISTS `tiki_page_drafts`;
-CREATE TABLE `tiki_page_drafts` (
-  `user` varchar(200) default '',
-  `pageName` varchar(255) NOT NULL,
-  `data` mediumtext,
-  `description` varchar(200) default NULL,
-  `comment` varchar(200) default NULL,
-  `lastModif` int(14) default NULL,
-  PRIMARY KEY (`pageName`(120), `user`(120))
-) ENGINE=MyISAM;
-
 DROP TABLE IF EXISTS `tiki_pageviews`;
 CREATE TABLE `tiki_pageviews` (
   `day` int(14) NOT NULL default '0',

------------------------------------------------------------------------
r31429 | killianebel | 2010-12-15 10:01:27 -0400 (qua, 15 dez 2010) | 1 line

[ADD] File galleries can be created / edited from a template, which define parameters in YAML format

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 31428)
+++ tiki.sql	(revision 31429)
@@ -717,6 +717,7 @@
   `galleryId` int(14) NOT NULL auto_increment,
   `name` varchar(80) NOT NULL default '',
   `type` varchar(20) NOT NULL default 'default',
+  `template` int(10) default NULL,
   `description` text,
   `created` int(14) default NULL,
   `visible` char(1) default NULL,

------------------------------------------------------------------------
r31422 | lphuberdeau | 2010-12-15 09:25:50 -0400 (qua, 15 dez 2010) | 1 line

[REVERT] r31417 The commit implies anyone with auto-approve right approves plugin by visiting the page, regardless of them introducing them or not. This removes all possible protection. Might as well introduce a preference that disables the security altogether.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 31421)
+++ tiki.sql	(revision 31422)
@@ -2936,7 +2936,6 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_plugin_viewdetail', 'Can view unapproved plugin details', 'registered', 'wiki', NULL, 'feature_wiki');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_plugin_preview', 'Can execute unapproved plugin', 'registered', 'wiki', NULL, 'feature_wiki');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_plugin_approve', 'Can approve plugin execution', 'editors', 'wiki', NULL, 'feature_wiki');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_plugin_autoapprove', 'Auto approve plugin execution', 'editors', 'wiki', NULL, 'feature_wiki');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_trust_input', 'Trust all user inputs including plugins (no security checks)', 'admin', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_backlink', 'View page backlinks', 'basic', 'wiki', NULL, 'feature_wiki');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_notifications', 'Can admin mail notifications', 'editors', 'tiki', NULL, NULL);

------------------------------------------------------------------------
r31421 | killianebel | 2010-12-15 09:24:08 -0400 (qua, 15 dez 2010) | 1 line

[ADD] Permission on file suppression

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 31420)
+++ tiki.sql	(revision 31421)
@@ -2791,6 +2791,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_gallery_file', 'Can edit a gallery file', 'editors', 'file galleries', NULL, 'feature_file_galleries');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_list_file_galleries', 'Can list file galleries', 'basic', 'file galleries', NULL, 'feature_file_galleries');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_upload_files', 'Can upload files', 'registered', 'file galleries', NULL, 'feature_file_galleries');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_remove_files', 'Can remove files', 'registered', 'file galleries', NULL, 'feature_file_galleries');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_fgal_explorer', 'Can view file galleries explorer', 'basic', 'file galleries', NULL, 'feature_file_galleries');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_fgal_path', 'Can view file galleries path', 'basic', 'file galleries', NULL, 'feature_file_galleries');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_file_gallery', 'Can view file galleries', 'basic', 'file galleries', NULL, 'feature_file_galleries');

------------------------------------------------------------------------
r31417 | killianebel | 2010-12-15 09:11:53 -0400 (qua, 15 dez 2010) | 1 line

[ADD] Autoapprove right on wiki plugins

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 31416)
+++ tiki.sql	(revision 31417)
@@ -2935,6 +2935,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_plugin_viewdetail', 'Can view unapproved plugin details', 'registered', 'wiki', NULL, 'feature_wiki');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_plugin_preview', 'Can execute unapproved plugin', 'registered', 'wiki', NULL, 'feature_wiki');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_plugin_approve', 'Can approve plugin execution', 'editors', 'wiki', NULL, 'feature_wiki');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_plugin_autoapprove', 'Auto approve plugin execution', 'editors', 'wiki', NULL, 'feature_wiki');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_trust_input', 'Trust all user inputs including plugins (no security checks)', 'admin', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_backlink', 'View page backlinks', 'basic', 'wiki', NULL, 'feature_wiki');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_notifications', 'Can admin mail notifications', 'editors', 'tiki', NULL, NULL);

------------------------------------------------------------------------
r31414 | jonnybradley | 2010-12-14 18:30:46 -0400 (ter, 14 dez 2010) | 1 line

[MRG] Automatic merge, branches/6.x 31378 to 31409

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 31413)
+++ tiki.sql	(revision 31414)
@@ -1675,10 +1675,20 @@
   `active` char(1) default NULL,
   `publishDate` int(14) default NULL,
   `voteConsiderationSpan` int(4) default 0,
+	`anonym` ENUM( 'a', 'u', 'i', 'c' ) NOT NULL DEFAULT 'u',
   PRIMARY KEY (`pollId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 ALTER TABLE tiki_polls ADD INDEX tiki_poll_lookup ( active , title );
 
+CREATE TABLE IF NOT EXISTS `tiki_poll_votes` (
+  `pollId` int(11) NOT NULL,
+  `optionId` int(11) NOT NULL,
+  `voteId` int(11) NOT NULL auto_increment,
+  `identification` varchar(300) NOT NULL,
+  `time` int(11) NOT NULL,
+  PRIMARY KEY  (`voteId`)
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
+
 DROP TABLE IF EXISTS `tiki_preferences`;
 CREATE TABLE `tiki_preferences` (
   `name` varchar(40) NOT NULL default '',

------------------------------------------------------------------------
r31291 | killianebel | 2010-12-08 04:55:50 -0400 (qua, 08 dez 2010) | 1 line

[MOD] SOAP Tiki server + SOAP client in webservices admin

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 31290)
+++ tiki.sql	(revision 31291)
@@ -3379,6 +3379,8 @@
 CREATE TABLE `tiki_webservice` (
   `service` VARCHAR(25) NOT NULL PRIMARY KEY,
   `url` VARCHAR(250),
+  `wstype` CHAR(4),
+  `operation` VARCHAR(250),
   `body` TEXT,
   `schema_version` VARCHAR(5),
   `schema_documentation` VARCHAR(250)

------------------------------------------------------------------------
r31251 | killianebel | 2010-12-07 10:15:31 -0400 (ter, 07 dez 2010) | 1 line

[MOD] Files in file galleries can have a draft, using the 'file_galleries_save_drafts' feature.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 31250)
+++ tiki.sql	(revision 31251)
@@ -803,6 +803,21 @@
   FULLTEXT KEY `ft` (name,description,search_data,filename)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
+DROP TABLE IF EXISTS `tiki_file_drafts`;
+CREATE TABLE `tiki_file_drafts` (
+  `fileId` int(14) NOT NULL,
+  `filename` varchar(80) default NULL,
+  `filesize` int(14) default NULL,
+  `filetype` varchar(250) default NULL,
+  `data` longblob,
+  `user` varchar(200) default '',
+  `path` varchar(255) default NULL,
+  `hash` varchar(32) default NULL,
+  `lastModif` integer(14) DEFAULT NULL,
+  `lockedby` varchar(200) default '',
+  PRIMARY KEY (`fileId`, `user`)
+) ENGINE=MyISAM;
+
 DROP TABLE IF EXISTS `tiki_forum_attachments`;
 CREATE TABLE `tiki_forum_attachments` (
   `attId` int(14) NOT NULL auto_increment,

------------------------------------------------------------------------
r31228 | killianebel | 2010-12-07 06:08:11 -0400 (ter, 07 dez 2010) | 1 line

[FIX] User login is now unique.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 31227)
+++ tiki.sql	(revision 31228)
@@ -3010,7 +3010,7 @@
   `waiting` char(1) default NULL,
   PRIMARY KEY (`userId`),
   KEY `score` (score),
-  KEY `login` (login),
+  UNIQUE KEY `login` (login),
   KEY `registrationDate` (`registrationDate`),
   KEY `openid_url` (openid_url)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;

------------------------------------------------------------------------
r31034 | jonnybradley | 2010-12-03 15:54:07 -0400 (sex, 03 dez 2010) | 1 line

[MRG] Automatic merge, branches/6.x 30996 to 31032

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 31033)
+++ tiki.sql	(revision 31034)
@@ -739,7 +739,7 @@
   `parentId` int(14) NOT NULL default -1,
   `lockable` char(1) default 'n',
   `show_lockedby` char(1) default NULL,
-  `archives` int(4) default -1,
+  `archives` int(4) default 0,
   `sort_mode` char(20) default NULL,
   `show_modified` char(1) default NULL,
   `show_author` char(1) default NULL,

------------------------------------------------------------------------
r30995 | cdrwhite | 2010-12-02 13:48:51 -0400 (qui, 02 dez 2010) | 4 lines

[FIX] Permissions in accounting, problems with AUTOINCREMENT
[NEW] Accounting books can be closed
[NEW] First steps for cancelling journal entries
[ENH] Switching templates to new icons/{icon}-Plugin

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 30994)
+++ tiki.sql	(revision 30995)
@@ -3901,6 +3901,7 @@
 
 DROP TABLE IF EXISTS `tiki_acct_item`; 
 CREATE TABLE `tiki_acct_item` (
+  `itemBookId` int(10) unsigned NOT NULL,
   `itemJournalId` int(10) unsigned NOT NULL DEFAULT '0',
   `itemAccountId` int(10) unsigned NOT NULL DEFAULT '0',
   `itemType` int(1) NOT NULL DEFAULT '-1',
@@ -3907,7 +3908,7 @@
   `itemAmount` double NOT NULL DEFAULT '0',
   `itemText` varchar(255) NOT NULL DEFAULT '',
   `itemTs` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
-  PRIMARY KEY (`itemJournalId`,`itemAccountId`,`itemType`)
+  PRIMARY KEY (`itemBookId`,`itemJournalId`,`itemAccountId`,`itemType`)
 );
 
 DROP TABLE IF EXISTS `tiki_acct_journal`; 
@@ -3933,12 +3934,13 @@
 
 DROP TABLE IF EXISTS `tiki_acct_stackitem`; 
 CREATE TABLE `tiki_acct_stackitem` (
+  `stackBookId` int(10) unsigned NOT NULL,
   `stackItemStackId` int(10) unsigned NOT NULL DEFAULT '0',
   `stackItemAccountId` int(10) unsigned NOT NULL DEFAULT '0',
   `stackItemType` int(1) NOT NULL DEFAULT '-1',
   `stackItemAmount` double NOT NULL DEFAULT '0',
   `stackItemText` varchar(255) NOT NULL DEFAULT '',
-  PRIMARY KEY (`stackItemStackId`,`stackItemAccountId`,`stackItemType`)
+  PRIMARY KEY (`stackBookId`,`stackItemStackId`,`stackItemAccountId`,`stackItemType`)
 );
 
 DROP TABLE IF EXISTS `tiki_acct_statement`;

------------------------------------------------------------------------
r30951 | cdrwhite | 2010-11-30 12:43:25 -0400 (ter, 30 nov 2010) | 1 line

Database structures for accounting

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 30950)
+++ tiki.sql	(revision 30951)
@@ -2960,6 +2960,14 @@
 
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_page_contribution_view', 'Can view contributions to a page', 'basic', 'wiki', NULL, 'feature_wiki');
 
+INSERT INTO `users_permissions` (`permName` , `permDesc` , `level` , `type` , `admin` , `feature_check` ) VALUES ( 'tiki_p_acct_create_book', 'Can create/close a book', 'admin', 'accounting', 'y', 'feature_accounting');
+INSERT INTO `users_permissions` (`permName` , `permDesc` , `level` , `type` , `admin` , `feature_check` ) VALUES ( 'tiki_p_acct_manage_accounts', 'Can create/edit/lock accounts', 'admin', 'accounting', 'y', 'feature_accounting' );
+INSERT INTO `users_permissions` (`permName` , `permDesc` , `level` , `type` , `admin` , `feature_check` ) VALUES ( 'tiki_p_acct_book', 'Create a new transaction', 'editor', 'accounting', 'n', 'feature_accounting');
+INSERT INTO `users_permissions` (`permName` , `permDesc` , `level` , `type` , `admin` , `feature_check` ) VALUES ( 'tiki_p_acct_view', 'Permission to view the journal', 'registered', 'accounting', 'n', 'feature_accounting' );
+INSERT INTO `users_permissions` (`permName` , `permDesc` , `level` , `type` , `admin` , `feature_check` ) VALUES ( 'tiki_p_acct_book_stack', 'Can book into the stack, where statements can be changed', 'editor', 'accounting', 'n', 'feature_accounting');
+INSERT INTO `users_permissions` (`permName` , `permDesc` , `level` , `type` , `admin` , `feature_check` ) VALUES ( 'tiki_p_acct_book_import', 'Can import statements from external accounts', 'editor', 'accounting', 'n', 'feature_accounting' );
+INSERT INTO `users_permissions` (`permName` , `permDesc` , `level` , `type` , `admin` , `feature_check` ) VALUES ( 'tiki_p_acct_manage_template', 'Can manage templates for recurring transactions', 'editor', 'accounting', 'n', 'feature_accounting');
+
 DROP TABLE IF EXISTS `users_usergroups`;
 CREATE TABLE `users_usergroups` (
   `userId` int(8) NOT NULL default '0',
@@ -3826,3 +3834,137 @@
     PRIMARY KEY (reminder_id),
     INDEX (calendar_item_id)
 );
+
+DROP TABLE IF EXISTS `tiki_acct_account`;
+CREATE TABLE `tiki_acct_account` (
+  `accountBookId` int(10) unsigned NOT NULL,
+  `accountId` int(10) unsigned NOT NULL DEFAULT '0',
+  `accountName` varchar(255) NOT NULL,
+  `accountNotes` text NOT NULL,
+  `accountBudget` double NOT NULL DEFAULT '0',
+  `accountLocked` int(1) NOT NULL DEFAULT '0',
+  `accountTax` int(11) NOT NULL DEFAULT '0',
+  `accountUserId` int(8) NOT NULL DEFAULT '0',
+  PRIMARY KEY (`accountBookId`,`accountId`),
+  KEY `accountTax` (`accountTax`)
+);
+
+DROP TABLE IF EXISTS `tiki_acct_bankaccount`; 
+CREATE TABLE `tiki_acct_bankaccount` (
+  `bankBookId` int(10) unsigned NOT NULL,
+  `bankAccountId` int(10) unsigned NOT NULL,
+  `externalNumber` int(10) NOT NULL,
+  `bankCountry` varchar(2) NOT NULL,
+  `bankCode` varchar(11) NOT NULL,
+  `bankIBAN` varchar(63) NOT NULL,
+  `bankBIC` varchar(63) NOT NULL,
+  `bankDelimeter` varchar(15) NOT NULL DEFAULT ';',
+  `bankDecPoint` varchar(1) NOT NULL DEFAULT ',',
+  `bankThousand` varchar(1) NOT NULL DEFAULT '.',
+  `bankHasHeader` tinyint(1) NOT NULL DEFAULT '1',
+  `fieldNameAccount` varchar(63) NOT NULL,
+  `fieldNameBookingDate` varchar(63) NOT NULL,
+  `formatBookingDate` varchar(31) NOT NULL,
+  `fieldNameValueDate` varchar(63) NOT NULL,
+  `formatValueDate` varchar(31) NOT NULL,
+  `fieldNameBookingText` varchar(63) NOT NULL,
+  `fieldNameReason` varchar(63) NOT NULL,
+  `fieldNameCounterpartName` varchar(63) NOT NULL,
+  `fieldNameCounterpartAccount` varchar(63) NOT NULL,
+  `fieldNameCounterpartBankCode` varchar(63) NOT NULL,
+  `fieldNameAmount` varchar(63) NOT NULL,
+  `amountType` int(10) unsigned NOT NULL,
+  `fieldNameAmountSign` varchar(63) NOT NULL,
+  `SignPositive` varchar(7) NOT NULL,
+  `SignNegative` varchar(7) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
+  PRIMARY KEY (`bankBookId`,`bankAccountId`)
+);
+
+DROP TABLE IF EXISTS `tiki_acct_book`;
+CREATE TABLE `tiki_acct_book` (
+  `bookId` int(10) unsigned NOT NULL AUTO_INCREMENT,
+  `bookName` varchar(255) NOT NULL,
+  `bookClosed` enum('y','n') NOT NULL DEFAULT 'n',
+  `bookStartDate` date NOT NULL,
+  `bookEndDate` date NOT NULL,
+  `bookCurrency` varchar(3) NOT NULL DEFAULT 'EUR',
+  `bookCurrencyPos` int(11) NOT NULL,
+  `bookDecimals` int(11) NOT NULL DEFAULT '2',
+  `bookDecPoint` varchar(1) NOT NULL DEFAULT ',',
+  `bookThousand` varchar(1) NOT NULL DEFAULT '.',
+  `exportSeparator` varchar(4) NOT NULL DEFAULT ';',
+  `exportEOL` varchar(4) NOT NULL DEFAULT 'LF',
+  `exportQuote` varchar(4) NOT NULL DEFAULT '"',
+  `bookAutoTax` enum('y','n') NOT NULL DEFAULT 'y',
+  PRIMARY KEY (`bookId`)
+);
+
+DROP TABLE IF EXISTS `tiki_acct_item`; 
+CREATE TABLE `tiki_acct_item` (
+  `itemJournalId` int(10) unsigned NOT NULL DEFAULT '0',
+  `itemAccountId` int(10) unsigned NOT NULL DEFAULT '0',
+  `itemType` int(1) NOT NULL DEFAULT '-1',
+  `itemAmount` double NOT NULL DEFAULT '0',
+  `itemText` varchar(255) NOT NULL DEFAULT '',
+  `itemTs` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
+  PRIMARY KEY (`itemJournalId`,`itemAccountId`,`itemType`)
+);
+
+DROP TABLE IF EXISTS `tiki_acct_journal`; 
+CREATE TABLE `tiki_acct_journal` (
+  `journalBookId` int(10) unsigned NOT NULL,
+  `journalId` int(10) unsigned NOT NULL AUTO_INCREMENT,
+  `journalDate` date NOT NULL DEFAULT '0000-00-00',
+  `journalDescription` varchar(255) NOT NULL,
+  `journalCancelled` int(1) NOT NULL DEFAULT '0',
+  `journalTs` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
+  PRIMARY KEY (`journalBookId`,`journalId`)
+);
+
+DROP TABLE IF EXISTS `tiki_acct_stack`; 
+CREATE TABLE `tiki_acct_stack` (
+  `stackBookId` int(10) unsigned NOT NULL,
+  `stackId` int(10) unsigned NOT NULL AUTO_INCREMENT,
+  `stackDate` date NOT NULL DEFAULT '0000-00-00',
+  `stackDescription` varchar(255) NOT NULL,
+  `stackTs` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
+  PRIMARY KEY (`stackBookId`,`stackId`)
+);
+
+DROP TABLE IF EXISTS `tiki_acct_stackitem`; 
+CREATE TABLE `tiki_acct_stackitem` (
+  `stackItemStackId` int(10) unsigned NOT NULL DEFAULT '0',
+  `stackItemAccountId` int(10) unsigned NOT NULL DEFAULT '0',
+  `stackItemType` int(1) NOT NULL DEFAULT '-1',
+  `stackItemAmount` double NOT NULL DEFAULT '0',
+  `stackItemText` varchar(255) NOT NULL DEFAULT '',
+  PRIMARY KEY (`stackItemStackId`,`stackItemAccountId`,`stackItemType`)
+);
+
+DROP TABLE IF EXISTS `tiki_acct_statement`;
+CREATE TABLE `tiki_acct_statement` (
+  `statementBookId` int(10) unsigned NOT NULL,
+  `statementAccountId` int(10) unsigned NOT NULL DEFAULT '0',
+  `statementId` int(10) unsigned NOT NULL AUTO_INCREMENT,
+  `statementBookingDate` date NOT NULL,
+  `statementValueDate` date NOT NULL,
+  `statementBookingText` varchar(255) NOT NULL,
+  `statementReason` varchar(255) NOT NULL,
+  `statementCounterpart` varchar(63) NOT NULL,
+  `statementCounterpartAccount` varchar(63) NOT NULL,
+  `statementCounterpartBankCode` varchar(63) NOT NULL,
+  `statementAmount` double NOT NULL,
+  `statementJournalId` int(10) unsigned NOT NULL DEFAULT '0',
+  `statementStackId` int(11) NOT NULL,
+  PRIMARY KEY (`statementBookId`,`statementAccountId`,`statementId`)
+);
+
+DROP TABLE IF EXISTS `tiki_acct_tax`; 
+CREATE TABLE `tiki_acct_tax` (
+  `taxBookId` int(10) unsigned NOT NULL,
+  `taxId` int(10) unsigned NOT NULL AUTO_INCREMENT,
+  `taxText` varchar(63) NOT NULL,
+  `taxAmount` double NOT NULL DEFAULT '0',
+  `taxIsFix` enum('y','n') NOT NULL DEFAULT 'n',
+  PRIMARY KEY (`taxBookId`,`taxId`)
+);

------------------------------------------------------------------------
r30876 | qoumaq | 2010-11-26 10:46:23 -0400 (sex, 26 nov 2010) | 1 line

calendar reminder added

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 30875)
+++ tiki.sql	(revision 30876)
@@ -3807,3 +3807,22 @@
     `scaling_divisor` FLOAT NOT NULL DEFAULT 1,
     PRIMARY KEY ( `credit_type` ) 
 );
+
+
+-- --------------------------------------------------------
+-- Calendar reminder table
+-- --------------------------------------------------------
+CREATE TABLE custom_calendar_reminder
+(
+    reminder_id INT NOT NULL AUTO_INCREMENT,
+    calendar_item_id INT NOT NULL,
+    reminder_type TINYINT NOT NULL DEFAULT 0,
+    fixed_date INT NOT NULL DEFAULT 0,
+    time_offset INT NOT NULL DEFAULT 0,
+    related_to CHAR(1) NOT NULL DEFAULT 'S',
+    when_run CHAR(1) NOT NULL DEFAULT 'B',
+    last_sent INT NOT NULL DEFAULT 0,
+    times_sent INT NOT NULL DEFAULT 0,
+    PRIMARY KEY (reminder_id),
+    INDEX (calendar_item_id)
+);

------------------------------------------------------------------------
r30800 | sampaioprimo | 2010-11-19 14:41:25 -0400 (sex, 19 nov 2010) | 2 lines

differentiate blog post and forum post menu entries strings for easier
translations

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 30799)
+++ tiki.sql	(revision 30800)
@@ -1331,8 +1331,8 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Blogs','tiki-list_blogs.php',455,'feature_blogs','tiki_p_read_blog','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Rankings','tiki-blog_rankings.php',460,'feature_blogs,feature_blog_rankings','tiki_p_read_blog','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Create Blog','tiki-edit_blog.php',465,'feature_blogs','tiki_p_read_blog,tiki_p_create_blogs','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Post','tiki-blog_post.php',470,'feature_blogs','tiki_p_read_blog,tiki_p_blog_post','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Posts','tiki-list_posts.php',475,'feature_blogs','tiki_p_read_blog,tiki_p_blog_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','New Blog Post','tiki-blog_post.php',470,'feature_blogs','tiki_p_read_blog,tiki_p_blog_post','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Blog Posts','tiki-list_posts.php',475,'feature_blogs','tiki_p_read_blog,tiki_p_blog_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Forums','tiki-forums.php',500,'feature_forums','tiki_p_forum_read','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Forums','tiki-forums.php',505,'feature_forums','tiki_p_forum_read','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Rankings','tiki-forum_rankings.php',510,'feature_forums,feature_forum_rankings','tiki_p_forum_read','',0);

------------------------------------------------------------------------
r30790 | sylvieg | 2010-11-19 10:56:04 -0400 (sex, 19 nov 2010) | 1 line

[FIX]categ: describe dependance of the categ perms

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 30789)
+++ tiki.sql	(revision 30790)
@@ -2919,8 +2919,8 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_categories', 'Can admin categories', 'editors', 'category', 'y', 'feature_categories');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_category', 'Can see the category in a listing', 'basic', 'category', NULL, 'feature_categories');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_modify_object_categories', 'Can change the categories of the object', 'editors', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_add_object', 'Can add objects to the category', 'editors', 'category', NULL, 'feature_categories');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_remove_object', 'Can remove objects from the category', 'editors', 'category', NULL, 'feature_categories');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_add_object', 'Can add objects to the category (needs tiki_p_modify_object_categories)', 'editors', 'category', NULL, 'feature_categories');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_remove_object', 'Can remove objects from the category (needs tiki_p_modify_object_categories)', 'editors', 'category', NULL, 'feature_categories');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_create_category', 'Can create new categories', 'admin', 'category', NULL, 'feature_categories');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_perspective_view', 'Can view the perspective', 'basic', 'perspective', NULL, 'feature_perspective');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_perspective_edit', 'Can edit the perspective', 'basic', 'perspective', NULL, 'feature_perspective');

------------------------------------------------------------------------
r30754 | sylvieg | 2010-11-17 14:52:21 -0400 (qua, 17 nov 2010) | 1 line

[NEW]actionlog: record categorize or ucategorize of wiki page

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 30753)
+++ tiki.sql	(revision 30754)
@@ -3206,6 +3206,8 @@
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Viewed', 'trackeritem', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Created', 'wiki page attachment', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Removed', 'wiki page attachment', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Categorized', 'wiki page', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Uncategorized', 'wiki page', 'n');
 
 DROP TABLE IF EXISTS `tiki_freetags`;
 CREATE TABLE `tiki_freetags` (

------------------------------------------------------------------------
r30630 | sylvieg | 2010-11-10 17:03:05 -0400 (qua, 10 nov 2010) | 1 line

[NEW]actionlog: log wiki attachment

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 30629)
+++ tiki.sql	(revision 30630)
@@ -3204,6 +3204,8 @@
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Created', 'trackeritem', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Viewed', 'trackeritem', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Viewed', 'trackeritem', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Created', 'wiki page attachment', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Removed', 'wiki page attachment', 'n');
 
 DROP TABLE IF EXISTS `tiki_freetags`;
 CREATE TABLE `tiki_freetags` (

------------------------------------------------------------------------
r30414 | sylvieg | 2010-10-29 15:16:34 -0400 (sex, 29 out 2010) | 1 line

[MRG] Automatic merge, branches/6.x 30341 to 30411

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 30413)
+++ tiki.sql	(revision 30414)
@@ -2913,7 +2913,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_trust_input', 'Trust all user inputs including plugins (no security checks)', 'admin', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_backlink', 'View page backlinks', 'basic', 'wiki', NULL, 'feature_wiki');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_notifications', 'Can admin mail notifications', 'editors', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_invite', 'Can invite user to groups', 'editors', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_invite_to_my_groups', 'Can invite user to my groups', 'editors', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_delete_account', 'Can delete his/her own account', 'admin', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_importer', 'Can use the importer', 'admin', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_categories', 'Can admin categories', 'editors', 'category', 'y', 'feature_categories');
@@ -3542,7 +3542,7 @@
     `to` varchar(255) NOT NULL,
     `guards` text,
     PRIMARY KEY(`transitionId`),
-	KEY `transition_lookup` (`type`, `from`)
+    KEY `transition_lookup` (`type`, `from`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_auth_tokens`;
@@ -3740,8 +3740,8 @@
   KEY `longurl_hash` (`longurl_hash`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS `tiki_invit`;
-CREATE TABLE `tiki_invit` (
+DROP TABLE IF EXISTS `tiki_invite`;
+CREATE TABLE `tiki_invite` (
   `id` int(11) NOT NULL auto_increment,
   `inviter` varchar(200) NOT NULL,
   `groups` varchar(255) default NULL,
@@ -3756,7 +3756,7 @@
 DROP TABLE IF EXISTS `tiki_invited`;
 CREATE TABLE `tiki_invited` (
   `id` int(11) NOT NULL auto_increment,
-  `id_invit` int(11) NOT NULL,
+  `id_invite` int(11) NOT NULL,
   `email` varchar(255) NOT NULL,
   `firstname` varchar(24) NOT NULL,
   `lastname` varchar(24) NOT NULL,
@@ -3763,8 +3763,43 @@
   `used` enum('no','registered','logged') NOT NULL,
   `used_on_user` varchar(200) default NULL,
   PRIMARY KEY  (`id`),
-  KEY `id_invit` (`id_invit`),
+  KEY `id_invite` (`id_invite`),
   KEY `used_on_user` (`used_on_user`)
 );
 
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES ('tiki_p_invit', 'Can invit users by email, and include them in groups', 'registered', 'tiki', NULL, 'feature_invit');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES ('tiki_p_invite', 'Can invite users by email, and include them in groups', 'registered', 'tiki', NULL, 'feature_invite');
+
+DROP TABLE IF EXISTS `tiki_credits`;
+CREATE TABLE `tiki_credits` (
+    `creditId` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
+    `userId` INT( 8 ) NOT NULL ,
+    `credit_type` VARCHAR( 25 ) NOT NULL ,
+    `creation_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ,
+    `expiration_date` TIMESTAMP NULL ,
+    `total_amount` FLOAT NOT NULL DEFAULT 0,
+    `used_amount` FLOAT NOT NULL DEFAULT 0,
+    `product_id` INT( 8 ) NULL ,
+    PRIMARY KEY ( `creditId` ) ,
+    INDEX ( `userId` , `credit_type` )
+);
+
+DROP TABLE IF EXISTS `tiki_credits_usage`;
+CREATE TABLE `tiki_credits_usage` (
+    `usageId` INT NOT NULL AUTO_INCREMENT,
+    `userId` INT NOT NULL,
+    `usage_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
+    `credit_type` VARCHAR( 25 ) NOT NULL,
+    `used_amount` FLOAT NOT NULL DEFAULT 0,
+    `product_id` INT( 8 ) NULL ,
+    PRIMARY KEY ( `usageId` )
+);
+
+DROP TABLE IF EXISTS `tiki_credits_types`;
+CREATE TABLE `tiki_credits_types` (
+    `credit_type` VARCHAR( 25 ) NOT NULL,
+    `display_text` VARCHAR( 50 ) DEFAULT NULL,
+    `unit_text` VARCHAR( 25 ) DEFAULT NULL,
+    `is_static_level` CHAR( 1 ) DEFAULT 'n',
+    `scaling_divisor` FLOAT NOT NULL DEFAULT 1,
+    PRIMARY KEY ( `credit_type` ) 
+);

------------------------------------------------------------------------
r30280 | sampaioprimo | 2010-10-25 10:55:26 -0400 (seg, 25 out 2010) | 1 line

[FIX] renaming blog menu entry from 'Create/Edit Blog' to 'Create Blog' since this is the real functionality of the link

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 30279)
+++ tiki.sql	(revision 30280)
@@ -1330,7 +1330,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Blogs','tiki-list_blogs.php',450,'feature_blogs','tiki_p_read_blog','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Blogs','tiki-list_blogs.php',455,'feature_blogs','tiki_p_read_blog','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Rankings','tiki-blog_rankings.php',460,'feature_blogs,feature_blog_rankings','tiki_p_read_blog','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Create/Edit Blog','tiki-edit_blog.php',465,'feature_blogs','tiki_p_read_blog,tiki_p_create_blogs','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Create Blog','tiki-edit_blog.php',465,'feature_blogs','tiki_p_read_blog,tiki_p_create_blogs','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Post','tiki-blog_post.php',470,'feature_blogs','tiki_p_read_blog,tiki_p_blog_post','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Posts','tiki-list_posts.php',475,'feature_blogs','tiki_p_read_blog,tiki_p_blog_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Forums','tiki-forums.php',500,'feature_forums','tiki_p_forum_read','',0);

------------------------------------------------------------------------
r30124 | sylvieg | 2010-10-19 10:26:33 -0400 (ter, 19 out 2010) | 1 line

[MRG] Automatic merge, branches/6.x 30050 to 30123

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 30123)
+++ tiki.sql	(revision 30124)
@@ -1,7 +1,9 @@
-- --------------------------------------------------------
+-- --------------------------------------------------------
 -- Database : Tiki 
 -- --------------------------------------------------------
 
+ALTER DATABASE DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;
+
 DROP TABLE IF EXISTS `messu_messages`;
 CREATE TABLE `messu_messages` (
   `msgId` int(14) NOT NULL auto_increment,

------------------------------------------------------------------------
r30051 | jonnybradley | 2010-10-15 15:06:16 -0400 (sex, 15 out 2010) | 1 line

[MRG] Automatic merge, branches/6.x 30020 to 30050

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 30050)
+++ tiki.sql	(revision 30051)
@@ -1,4 +1,4 @@
--- --------------------------------------------------------
+- --------------------------------------------------------
 -- Database : Tiki 
 -- --------------------------------------------------------
 
@@ -2799,7 +2799,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_poll_results', 'Can view poll results', 'basic', 'polls', NULL, 'feature_polls');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_vote_poll', 'Can vote polls', 'basic', 'polls', NULL, 'feature_polls');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_poll_voters', 'Can view poll voters', 'basic', 'polls', NULL, 'feature_polls');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_toolbars', 'Can admin toolbars', 'admin', 'tiki', 'y', NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_toolbars', 'Can admin toolbars', 'admin', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_quizzes', 'Can admin quizzes', 'editors', 'quizzes', 'y', 'feature_quizzes');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_take_quiz', 'Can take quizzes', 'basic', 'quizzes', NULL, 'feature_quizzes');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_quiz_stats', 'Can view quiz stats', 'basic', 'quizzes', NULL, 'feature_quizzes');
@@ -2913,7 +2913,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_notifications', 'Can admin mail notifications', 'editors', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_invite', 'Can invite user to groups', 'editors', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_delete_account', 'Can delete his/her own account', 'admin', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_importer', 'Can use the importer', 'admin', 'tiki', 'y', NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_importer', 'Can use the importer', 'admin', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_categories', 'Can admin categories', 'editors', 'category', 'y', 'feature_categories');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_category', 'Can see the category in a listing', 'basic', 'category', NULL, 'feature_categories');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_modify_object_categories', 'Can change the categories of the object', 'editors', 'tiki', NULL, NULL);

------------------------------------------------------------------------
r30027 | sampaioprimo | 2010-10-14 19:42:52 -0400 (qui, 14 out 2010) | 2 lines

[ENH] log time of the last modification to a string when using interactive translation
[FIX] only show diff option if there is a difference between the original string and the new string

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 30026)
+++ tiki.sql	(revision 30027)
@@ -1084,6 +1084,7 @@
   `tran` text,
   `changed` bool,
   `userId` int(8),
+  `lastModif` int(14) NULL,
   PRIMARY KEY (`id`)
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r29907 | sampaioprimo | 2010-10-08 13:35:49 -0400 (sex, 08 out 2010) | 2 lines

[ENH] log which user translated each string for interactive translation and tiki-edit_languages.php


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 29906)
+++ tiki.sql	(revision 29907)
@@ -1083,6 +1083,7 @@
   `lang` char(16) NOT NULL default '',
   `tran` text,
   `changed` bool,
+  `userId` int(8),
   PRIMARY KEY (`id`)
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r29782 | sylvieg | 2010-10-04 13:13:51 -0400 (seg, 04 out 2010) | 1 line

[MRG] Automatic merge, branches/6.x 29683 to 29781

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 29781)
+++ tiki.sql	(revision 29782)
@@ -3410,7 +3410,7 @@
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-browse_image.php\\?imageId=(\\d+)', 'browseimage$1', 'image', 'feature_galleries');
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-directory_browse.php\\?parent=(\\d+)', 'directory$1', 'directory', 'feature_directory');
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-view_faq.php\\?faqId=(\\d+)', 'faq$1', 'faq', 'feature_faqs');
-INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-download_file.php\\?fileId=(\\d+)', 'dl$1', 'file', 'feature_file_galleries');
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-download_file.php\\?fileId=(\\d+)', 'dl$1', 'file', 'feature_file_galleries', 10);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-download_file.php\\?fileId=(\\d+)&amp;thumbnail', 'thumbnail$1', 'thumbnail', 'feature_file_galleries');
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-download_file.php\\?fileId=(\\d+)&amp;display', 'display$1', 'display', 'feature_file_galleries');
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-download_file.php\\?fileId=(\\d+)&amp;preview', 'preview$1', 'preview', 'feature_file_galleries');

------------------------------------------------------------------------
r29657 | sylvieg | 2010-09-27 10:55:48 -0400 (seg, 27 set 2010) | 1 line

[MRG] Automatic merge, branches/6.x 29594 to 29656

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 29656)
+++ tiki.sql	(revision 29657)
@@ -1,5 +1,5 @@
 -- --------------------------------------------------------
--- Database : tikiwiki
+-- Database : Tiki 
 -- --------------------------------------------------------
 
 DROP TABLE IF EXISTS `messu_messages`;
@@ -1410,6 +1410,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Search Stats','tiki-search_stats.php',1125,'feature_search_stats','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Theme Control','tiki-theme_control.php',1130,'feature_theme_control','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Toolbars','tiki-admin_toolbars.php',1135,'','tiki_p_admin_toolbars','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Transitions','tiki-admin_transitions.php',1140,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Categories','tiki-admin_categories.php',1145,'feature_categories','tiki_p_admin_categories','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Banners','tiki-list_banners.php',1150,'feature_banners','tiki_p_admin_banners','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Edit Templates','tiki-edit_templates.php',1155,'feature_edit_templates','tiki_p_edit_templates','',0);

------------------------------------------------------------------------
r29595 | sylvieg | 2010-09-24 09:13:17 -0400 (sex, 24 set 2010) | 1 line

[MRG] Automatic merge, branches/6.x 29559 to 29594

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 29594)
+++ tiki.sql	(revision 29595)
@@ -1101,7 +1101,6 @@
 CREATE TABLE `tiki_links` (
   `fromPage` varchar(160) NOT NULL default '',
   `toPage` varchar(160) NOT NULL default '',
-  `reltype` varchar(50),
   PRIMARY KEY (`fromPage`,`toPage`),
   KEY `toPage` (`toPage`)
 ) ENGINE=MyISAM;
@@ -2511,7 +2510,7 @@
 
 DROP TABLE IF EXISTS `tiki_user_votings`;
 CREATE TABLE `tiki_user_votings` (
-  `user` varchar(200) default '',
+  `user` varchar(200) NOT NULL default '',
   `ip` varchar(15) default NULL,
   `id` varchar(255) NOT NULL default '',
   `optionId` int(10) NOT NULL default 0,
@@ -3537,7 +3536,8 @@
     `from` varchar(255) NOT NULL,
     `to` varchar(255) NOT NULL,
     `guards` text,
-    PRIMARY KEY(`transitionId`)
+    PRIMARY KEY(`transitionId`),
+	KEY `transition_lookup` (`type`, `from`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_auth_tokens`;

------------------------------------------------------------------------
r29384 | sylvieg | 2010-09-20 08:31:10 -0400 (seg, 20 set 2010) | 1 line

opps schema must be identical

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 29383)
+++ tiki.sql	(revision 29384)
@@ -3704,7 +3704,7 @@
 CREATE TABLE `tiki_todo` (
     `todoId` INT(12) NOT NULL auto_increment,
     `after` INT(12) NOT NULL,
-    `event` VARCHAR(50),
+    `event` VARCHAR(50) NOT NULL,
     `objectType` VARCHAR(50),
     `objectId` VARCHAR(255) default NULL,
     `from` VARCHAR(255) default NULL,

------------------------------------------------------------------------
r29383 | sylvieg | 2010-09-20 07:57:06 -0400 (seg, 20 set 2010) | 1 line

[ENH]todo: open the event type to more events

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 29382)
+++ tiki.sql	(revision 29383)
@@ -3704,7 +3704,7 @@
 CREATE TABLE `tiki_todo` (
     `todoId` INT(12) NOT NULL auto_increment,
     `after` INT(12) NOT NULL,
-    `event` ENUM('creation', 'modification', 'upload'),
+    `event` VARCHAR(50),
     `objectType` VARCHAR(50),
     `objectId` VARCHAR(255) default NULL,
     `from` VARCHAR(255) default NULL,

------------------------------------------------------------------------
r29381 | cdrwhite | 2010-09-20 06:11:31 -0400 (seg, 20 set 2010) | 2 lines

[FIX]Glitch in escape if the first word is a html tag, renaming to tiki-page_contribution, own feature feature_page_contribution, better permission checking
[ENH] View page button

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 29380)
+++ tiki.sql	(revision 29381)
@@ -2954,7 +2954,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_socialnetworks', 'user can register this site with social networks', 'admin', 'socialnetworks', 'y', 'feature_socialnetworks');
 
 
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_page-contribution_view', 'Can view contributions to a page', 'basic', 'wiki', NULL, 'feature_wiki');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_page_contribution_view', 'Can view contributions to a page', 'basic', 'wiki', NULL, 'feature_wiki');
 
 DROP TABLE IF EXISTS `users_usergroups`;
 CREATE TABLE `users_usergroups` (

------------------------------------------------------------------------
r29273 | sampaioprimo | 2010-09-15 15:17:41 -0400 (qua, 15 set 2010) | 2 lines

updating previously created menu entry to check if lang_use_db is enabled


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 29272)
+++ tiki.sql	(revision 29273)
@@ -1403,7 +1403,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','External Pages Cache','tiki-list_cache.php',1080,'cachepages','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Modules','tiki-admin_modules.php',1085,'','tiki_p_admin_modules','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Hotwords','tiki-admin_hotwords.php',1095,'feature_hotwords','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Edit languages','tiki-edit_languages.php',1098,'','tiki_p_edit_languages','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Edit languages','tiki-edit_languages.php',1098,'lang_use_db','tiki_p_edit_languages','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','External Feeds','tiki-admin_rssmodules.php',1100,'','tiki_p_admin_rssmodules','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Menus','tiki-admin_menus.php',1105,'','tiki_p_edit_menu','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Polls','tiki-admin_polls.php',1110,'feature_polls','tiki_p_admin_polls','',0);

------------------------------------------------------------------------
r29253 | sampaioprimo | 2010-09-15 11:12:30 -0400 (qua, 15 set 2010) | 2 lines

[ENH] menu option under admin section for tiki-edit_languages.php


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 29252)
+++ tiki.sql	(revision 29253)
@@ -1403,6 +1403,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','External Pages Cache','tiki-list_cache.php',1080,'cachepages','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Modules','tiki-admin_modules.php',1085,'','tiki_p_admin_modules','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Hotwords','tiki-admin_hotwords.php',1095,'feature_hotwords','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Edit languages','tiki-edit_languages.php',1098,'','tiki_p_edit_languages','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','External Feeds','tiki-admin_rssmodules.php',1100,'','tiki_p_admin_rssmodules','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Menus','tiki-admin_menus.php',1105,'','tiki_p_edit_menu','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Polls','tiki-admin_polls.php',1110,'feature_polls','tiki_p_admin_polls','',0);

------------------------------------------------------------------------
r29120 | sampaioprimo | 2010-09-10 16:17:08 -0400 (sex, 10 set 2010) | 4 lines

[ENH] options to control whether to display or not blog title, description and breadcrumbs
[ENH] remove help button from each blog title
[ENH] add sefurl to blog link in blog title


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 29119)
+++ tiki.sql	(revision 29120)
@@ -299,6 +299,10 @@
   `heading` text,
   `post_heading` text,
   `use_find` char(1) default NULL,
+  `use_title` char(1) default 'y',
+  `use_title_in_post` char(1) default 'y',
+  `use_description` char(1) default 'y',
+  `use_breadcrumbs` char(1) default 'n',
   `use_author` char(1) default NULL,
   `use_excerpt` char(1) default NULL,
   `add_date` char(1) default NULL,

------------------------------------------------------------------------
r29086 | sampaioprimo | 2010-09-09 18:08:14 -0400 (qui, 09 set 2010) | 2 lines

[FIX] remove 255 characters limit to store translations in the database


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 29085)
+++ tiki.sql	(revision 29086)
@@ -1075,9 +1075,9 @@
 DROP TABLE IF EXISTS `tiki_language`;
 CREATE TABLE `tiki_language` (
   `id` int(14) NOT NULL auto_increment,
-  `source` tinytext NOT NULL,
+  `source` text NOT NULL,
   `lang` char(16) NOT NULL default '',
-  `tran` tinytext,
+  `tran` text,
   `changed` bool,
   PRIMARY KEY (`id`)
 ) ENGINE=MyISAM;

------------------------------------------------------------------------
r29068 | chealer | 2010-09-09 13:41:01 -0400 (qui, 09 set 2010) | 1 line

[ENH][DB] Wiki attachments: Increase filename size limit from 80 to 255, supporting LFN and files from most Unix filesystems

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 29067)
+++ tiki.sql	(revision 29068)
@@ -2587,7 +2587,7 @@
 CREATE TABLE `tiki_wiki_attachments` (
   `attId` int(12) NOT NULL auto_increment,
   `page` varchar(200) NOT NULL default '',
-  `filename` varchar(80) default NULL,
+  `filename` varchar(255) default NULL,
   `filetype` varchar(80) default NULL,
   `filesize` int(14) default NULL,
   `user` varchar(200) NOT NULL default '',

------------------------------------------------------------------------
r28925 | pascalstjean | 2010-09-03 17:46:48 -0400 (sex, 03 set 2010) | 1 line

Added Article isPublished on/off feature. 

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 28924)
+++ tiki.sql	(revision 28925)
@@ -134,6 +134,7 @@
   `type` varchar(50) default NULL,
   `rating` decimal(3,2) default NULL,
   `isfloat` char(1) default NULL,
+  `ispublished` char(1) NOT NULL DEFAULT 'y',
   PRIMARY KEY (`articleId`),
   KEY `title` (`title`),
   KEY `heading` (`heading`(255)),

------------------------------------------------------------------------
r28869 | niclone | 2010-09-02 17:14:37 -0400 (qui, 02 set 2010) | 2 lines

[FIX] also added sql to tiki.sql for tiki-invit


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 28868)
+++ tiki.sql	(revision 28869)
@@ -3728,3 +3728,32 @@
   UNIQUE KEY `shorturl` (`shorturl`),
   KEY `longurl_hash` (`longurl_hash`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
+
+DROP TABLE IF EXISTS `tiki_invit`;
+CREATE TABLE `tiki_invit` (
+  `id` int(11) NOT NULL auto_increment,
+  `inviter` varchar(200) NOT NULL,
+  `groups` varchar(255) default NULL,
+  `ts` int(11) NOT NULL,
+  `emailsubject` varchar(255) NOT NULL,
+  `emailcontent` text NOT NULL,
+  `wikicontent` text,
+  `wikipageafter` varchar(255) default NULL,
+  PRIMARY KEY  (`id`)
+);
+
+DROP TABLE IF EXISTS `tiki_invited`;
+CREATE TABLE `tiki_invited` (
+  `id` int(11) NOT NULL auto_increment,
+  `id_invit` int(11) NOT NULL,
+  `email` varchar(255) NOT NULL,
+  `firstname` varchar(24) NOT NULL,
+  `lastname` varchar(24) NOT NULL,
+  `used` enum('no','registered','logged') NOT NULL,
+  `used_on_user` varchar(200) default NULL,
+  PRIMARY KEY  (`id`),
+  KEY `id_invit` (`id_invit`),
+  KEY `used_on_user` (`used_on_user`)
+);
+
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES ('tiki_p_invit', 'Can invit users by email, and include them in groups', 'registered', 'tiki', NULL, 'feature_invit');

------------------------------------------------------------------------
r28852 | sylvieg | 2010-09-02 08:11:18 -0400 (qui, 02 set 2010) | 1 line

[FIX]group: really memorise the group expiration date to avoid changing the assignment date for periods > 1. Displays assignement+expiration date in the memberlist

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 28851)
+++ tiki.sql	(revision 28852)
@@ -2955,6 +2955,7 @@
   `userId` int(8) NOT NULL default '0',
   `groupName` varchar(255) NOT NULL default '',
   `created` int(14) default NULL,
+  `expire` int(14) default NULL,
   PRIMARY KEY (`userId`,`groupName`(30))
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r28800 | sylvieg | 2010-08-31 06:55:55 -0400 (ter, 31 ago 2010) | 1 line

[FIX}freetag: increase freetag size

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 28799)
+++ tiki.sql	(revision 28800)
@@ -3197,8 +3197,8 @@
 DROP TABLE IF EXISTS `tiki_freetags`;
 CREATE TABLE `tiki_freetags` (
   `tagId` int(10) unsigned NOT NULL auto_increment,
-  `tag` varchar(30) NOT NULL default '',
-  `raw_tag` varchar(50) NOT NULL default '',
+  `tag` varchar(128) NOT NULL default '',
+  `raw_tag` varchar(150) NOT NULL default '',
   `lang` varchar(16) NULL,
   PRIMARY KEY (`tagId`)
 ) ENGINE=MyISAM;

------------------------------------------------------------------------
r28771 | robertplummer | 2010-08-30 12:50:48 -0400 (seg, 30 ago 2010) | 3 lines

[MOD] Added the columns style and class to table tiki_sheet_values and the modification on how to handle it.
[MOD] Added 20100830_sheet_add_styles_and_classes.sql to take care of updates.
[MOD] Added most of the needed modifications to grid.php to handle style and class and a bit of js to tiki-jquery.js to send the information to the php handler.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 28770)
+++ tiki.sql	(revision 28771)
@@ -1980,6 +1980,8 @@
   `height` int(4) NOT NULL default '1',
   `format` varchar(255) default NULL,
   `user` varchar(200) default '',
+  `style` varchar( 255 ) default '',
+  `class` varchar( 255 ) default '',
   UNIQUE KEY `sheetId` (`sheetId`,begin,`rowIndex`,`columnIndex`),
   KEY `sheetId_2` (`sheetId`,`rowIndex`,`columnIndex`)
 ) ENGINE=MyISAM;

------------------------------------------------------------------------
r28735 | sylvieg | 2010-08-27 08:26:30 -0400 (sex, 27 ago 2010) | 1 line

[FIX]blog: fix commit 28338; post_heading was added in articles not blogs

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 28734)
+++ tiki.sql	(revision 28735)
@@ -125,7 +125,6 @@
   `expireDate` int(14) default NULL,
   `created` int(14) default NULL,
   `heading` text,
-  `post_heading` text,
   `body` text,
   `hash` varchar(32) default NULL,
   `author` varchar(200) default NULL,
@@ -297,6 +296,7 @@
   `hits` int(8) default NULL,
   `activity` decimal(4,2) default NULL,
   `heading` text,
+  `post_heading` text,
   `use_find` char(1) default NULL,
   `use_author` char(1) default NULL,
   `use_excerpt` char(1) default NULL,

------------------------------------------------------------------------
r28716 | sampaioprimo | 2010-08-25 17:38:23 -0400 (qua, 25 ago 2010) | 2 lines

[KIL] blog option 'use_title' (as proposed in the blog revamp page)


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 28715)
+++ tiki.sql	(revision 28716)
@@ -298,7 +298,6 @@
   `activity` decimal(4,2) default NULL,
   `heading` text,
   `use_find` char(1) default NULL,
-  `use_title` char(1) default NULL,
   `use_author` char(1) default NULL,
   `use_excerpt` char(1) default NULL,
   `add_date` char(1) default NULL,

------------------------------------------------------------------------
r28713 | sampaioprimo | 2010-08-25 13:16:27 -0400 (qua, 25 ago 2010) | 2 lines

[ENH] keep track of changed translations in the database


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 28712)
+++ tiki.sql	(revision 28713)
@@ -1074,10 +1074,12 @@
 
 DROP TABLE IF EXISTS `tiki_language`;
 CREATE TABLE `tiki_language` (
+  `id` int(14) NOT NULL auto_increment,
   `source` tinytext NOT NULL,
   `lang` char(16) NOT NULL default '',
   `tran` tinytext,
-  PRIMARY KEY (`source`(255),`lang`)
+  `changed` bool,
+  PRIMARY KEY (`id`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_link_cache`;

------------------------------------------------------------------------
r28698 | sampaioprimo | 2010-08-24 11:49:51 -0400 (ter, 24 ago 2010) | 2 lines

[NEW] blog post excerpt


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 28697)
+++ tiki.sql	(revision 28698)
@@ -257,6 +257,7 @@
   `blogId` int(8) NOT NULL default '0',
   `data` text,
   `data_size` int(11) unsigned NOT NULL default '0',
+  `excerpt` text default NULL,
   `created` int(14) default NULL,
   `user` varchar(200) default '',
   `trackbacks_to` text,
@@ -299,6 +300,7 @@
   `use_find` char(1) default NULL,
   `use_title` char(1) default NULL,
   `use_author` char(1) default NULL,
+  `use_excerpt` char(1) default NULL,
   `add_date` char(1) default NULL,
   `add_poster` char(1) default NULL,
   `allow_comments` char(1) default NULL,

------------------------------------------------------------------------
r28685 | marclaporte | 2010-08-23 17:55:24 -0400 (seg, 23 ago 2010) | 1 line

[FIX] various minor fixes to permission names (typos, spelling, unclearness, etc) for new installs. Upgrades are unnafected

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 28684)
+++ tiki.sql	(revision 28685)
@@ -2677,15 +2677,15 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_events', 'Can view events details', 'registered', 'calendar', NULL, 'feature_calendar');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_calendar_add_my_particip', 'Can add own user to the participants', 'registered', 'calendar', NULL, 'feature_calendar');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_calendar_add_guest_particip', 'Can add guest to the participants', 'registered', 'calendar', NULL, 'feature_calendar');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_tiki_calendar', 'Can view Tikiwiki tools calendar', 'basic', 'calendar', NULL, 'feature_calendar');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_tiki_calendar', 'Can view Tiki tools calendar', 'basic', 'calendar', NULL, 'feature_calendar');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_chat', 'Administrator, can create channels remove channels etc', 'editors', 'chat', 'y', 'feature_minichat,feature_live_support');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_chat', 'Can use the chat system', 'registered', 'chat', NULL, 'feature_minichat,feature_live_support');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_cms', 'Can admin the cms', 'editors', 'cms', 'y', 'feature_articles');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_cms', 'Can admin the articles', 'editors', 'cms', 'y', 'feature_articles');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_approve_submission', 'Can approve submissions', 'editors', 'cms', NULL, 'feature_articles');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_articles_admin_topics', 'Can admin article topics', 'editors', 'cms', NULL, 'feature_articles');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_articles_admin_types', 'Can admin article types', 'editors', 'cms', NULL, 'feature_articles');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_articles_read_heading', 'Can read article headings', 'basic', 'cms', NULL, 'feature_articles');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_autoapprove_submission', 'Submited articles automatically approved', 'editors', 'cms', NULL, 'feature_articles');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_autoapprove_submission', 'Submitted articles automatically approved', 'editors', 'cms', NULL, 'feature_articles');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_article', 'Can edit articles', 'editors', 'cms', NULL, 'feature_articles');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_submission', 'Can edit submissions', 'editors', 'cms', NULL, 'feature_articles');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_read_article', 'Can read articles', 'basic', 'cms', NULL, 'feature_articles');
@@ -2698,14 +2698,14 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_directory', 'Can admin the directory', 'editors', 'directory', 'y', 'feature_directory');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_directory_cats', 'Can admin directory categories', 'editors', 'directory', NULL, 'feature_directory');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_directory_sites', 'Can admin directory sites', 'editors', 'directory', NULL, 'feature_directory');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_autosubmit_link', 'Submited links are valid', 'editors', 'directory', NULL, 'feature_directory');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_autosubmit_link', 'Submitted links are valid', 'editors', 'directory', NULL, 'feature_directory');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_submit_link', 'Can submit sites to the directory', 'basic', 'directory', NULL, 'feature_directory');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_validate_links', 'Can validate submited links', 'editors', 'directory', NULL, 'feature_directory');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_validate_links', 'Can validate submitted links', 'editors', 'directory', NULL, 'feature_directory');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_directory', 'Can use the directory', 'basic', 'directory', NULL, 'feature_directory');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_faqs', 'Can admin faqs', 'editors', 'faqs', 'y', 'feature_faqs');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_suggest_faq', 'Can suggest faq questions', 'basic', 'faqs', NULL, 'feature_faqs');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_faqs', 'Can view faqs', 'basic', 'faqs', NULL, 'feature_faqs');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin', 'Administrator, can manage users groups and permissions, Hotwords and all the weblog features', 'admin', 'tiki', 'y', NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin', 'Administrator, can manage users groups and permissions, and all features', 'admin', 'tiki', 'y', NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_users', 'Can admin users', 'admin', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_access_closed_site', 'Can access site when closed', 'admin', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_banners', 'Administrator, can admin banners', 'admin', 'tiki', NULL, NULL);
@@ -2732,7 +2732,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_actionlog', 'Can view action log', 'registered', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_actionlog_owngroups', 'Can view action log for users of his own groups', 'registered', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_integrator', 'Can view integrated repositories', 'basic', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_referer_stats', 'Can view referer stats', 'editors', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_referer_stats', 'Can view referrer stats', 'editors', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_stats', 'Can view site stats', 'basic', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_templates', 'Can view site templates', 'admin', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_blog_admin', 'Can admin blogs', 'editors', 'blogs', 'y', 'feature_blogs');
@@ -2761,7 +2761,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_forum_post', 'Can post in forums', 'registered', 'forums', NULL, 'feature_forums');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_forum_post_topic', 'Can start threads in forums', 'registered', 'forums', NULL, 'feature_forums');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_forum_read', 'Can read forums', 'basic', 'forums', NULL, 'feature_forums');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_forums_report', 'Can report msgs to moderator', 'registered', 'forums', NULL, 'feature_forums');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_forums_report', 'Can report posts to moderator', 'registered', 'forums', NULL, 'feature_forums');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_forum_vote', 'Can vote comments in forums', 'registered', 'forums', NULL, 'feature_forums');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_freetags', 'Can admin freetags', 'admin', 'freetags', 'y', 'feature_freetags');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_galleries', 'Can admin Image Galleries', 'editors', 'image galleries', 'y', 'feature_galleries');
@@ -2795,7 +2795,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_sheet', 'Can create and edit sheets', 'editors', 'sheet', NULL, 'feature_sheet');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_sheet', 'Can view sheet', 'basic', 'sheet', NULL, 'feature_sheet');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_sheet_history', 'Can view sheet history', 'admin', 'sheet', NULL, 'feature_sheet');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_shoutbox', 'Can admin shoutbox (Edit/remove msgs)', 'editors', 'shoutbox', 'y', 'feature_shoutbox');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_shoutbox', 'Can admin shoutbox (Edit/remove messages)', 'editors', 'shoutbox', 'y', 'feature_shoutbox');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_post_shoutbox', 'Can post messages in shoutbox', 'basic', 'shoutbox', NULL, 'feature_shoutbox');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_shoutbox', 'Can view shoutbox', 'basic', 'shoutbox', NULL, 'feature_shoutbox');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_surveys', 'Can admin surveys', 'editors', 'surveys', 'y', 'feature_surveys');
@@ -2808,14 +2808,14 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_create_tracker_items', 'Can create new items for trackers', 'registered', 'trackers', NULL, 'feature_trackers');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_list_trackers', 'Can list trackers', 'basic', 'trackers', NULL, 'feature_trackers');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_modify_tracker_items', 'Can change tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_modify_tracker_items_pending', 'Can change tracker pending items', 'registered', 'trackers', NULL, 'feature_trackers');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_modify_tracker_items_closed', 'Can change tracker closed items', 'registered', 'trackers', NULL, 'feature_trackers');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_modify_tracker_items_pending', 'Can change pending tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_modify_tracker_items_closed', 'Can change closed tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tracker_view_ratings', 'Can view rating result for tracker items', 'basic', 'trackers', NULL, 'feature_trackers');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tracker_vote_ratings', 'Can vote a rating for tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tracker_revote_ratings', 'Can re-vote a rating for tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_trackers', 'Can view trackers', 'basic', 'trackers', NULL, 'feature_trackers');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_trackers_closed', 'Can view trackers closed items', 'registered', 'trackers', NULL, 'feature_trackers');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_trackers_pending', 'Can view trackers pending items', 'editors', 'trackers', NULL, 'feature_trackers');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_trackers_closed', 'Can view closed trackers items', 'registered', 'trackers', NULL, 'feature_trackers');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_trackers_pending', 'Can view pending trackers items', 'editors', 'trackers', NULL, 'feature_trackers');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_watch_trackers', 'Can watch tracker', 'registered', 'trackers', NULL, 'feature_trackers');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_export_tracker', 'Can export tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_wiki', 'Can admin the wiki', 'editors', 'wiki', 'y', 'feature_wiki');
@@ -2835,7 +2835,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view', 'Can view page/pages', 'basic', 'wiki', NULL, 'feature_wiki');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_view_ref', 'Can view in module and feed the wiki pages reference', 'basic', 'wiki', NULL, 'feature_wiki');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_watch_structure', 'Can watch structure', 'registered', 'wiki', NULL, 'feature_wiki_structure');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_admin_attachments', 'Can admin attachments to wiki pages', 'editors', 'wiki', NULL, 'feature_wiki_attachments');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_admin_attachments', 'Can admin attachments on wiki pages', 'editors', 'wiki', NULL, 'feature_wiki_attachments');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_admin_ratings', 'Can add and change ratings on wiki pages', 'admin', 'wiki', NULL, 'feature_wiki_ratings');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_attach_files', 'Can attach files to wiki pages', 'registered', 'wiki', NULL, 'feature_wiki_attachments');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_view_attachments', 'Can view wiki attachments and download', 'registered', 'wiki', NULL, 'feature_wiki_attachments');
@@ -2889,9 +2889,9 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_map_view_mapfiles', 'Can view contents of mapfiles', 'registered', 'maps', NULL, 'feature_maps');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_use_webmail', 'Can use webmail', 'registered', 'webmail', NULL, 'feature_webmail,feature_contacts');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_use_group_webmail', 'Can use group webmail', 'registered', 'webmail', NULL, 'feature_webmail,feature_contacts');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_group_webmail', 'Can administrate group webmail accounts', 'registered', 'webmail', NULL, 'feature_webmail,feature_contacts');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_group_webmail', 'Can admin group webmail accounts', 'registered', 'webmail', NULL, 'feature_webmail,feature_contacts');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_use_personal_webmail', 'Can use personal webmail accounts', 'registered', 'webmail', NULL, 'feature_webmail,feature_contacts');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_personal_webmail', 'Can administrate personal webmail accounts', 'registered', 'webmail', NULL, 'feature_webmail,feature_contacts');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_personal_webmail', 'Can admin personal webmail accounts', 'registered', 'webmail', NULL, 'feature_webmail,feature_contacts');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_plugin_viewdetail', 'Can view unapproved plugin details', 'registered', 'wiki', NULL, 'feature_wiki');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_plugin_preview', 'Can execute unapproved plugin', 'registered', 'wiki', NULL, 'feature_wiki');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_plugin_approve', 'Can approve plugin execution', 'editors', 'wiki', NULL, 'feature_wiki');
@@ -2898,13 +2898,13 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_trust_input', 'Trust all user inputs including plugins (no security checks)', 'admin', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_backlink', 'View page backlinks', 'basic', 'wiki', NULL, 'feature_wiki');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_notifications', 'Can admin mail notifications', 'editors', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_invite', 'Can invite user in groups', 'editors', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_delete_account', 'Can delete his own account', 'admin', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_importer', 'Can use the Tiki Importer', 'admin', 'tiki', 'y', NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_invite', 'Can invite user to groups', 'editors', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_delete_account', 'Can delete his/her own account', 'admin', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_importer', 'Can use the importer', 'admin', 'tiki', 'y', NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_categories', 'Can admin categories', 'editors', 'category', 'y', 'feature_categories');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_category', 'Can see the category in a listing', 'basic', 'category', NULL, 'feature_categories');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_modify_object_categories', 'Can change the categories on the object', 'editors', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_add_object', 'Can add objects in the category', 'editors', 'category', NULL, 'feature_categories');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_modify_object_categories', 'Can change the categories of the object', 'editors', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_add_object', 'Can add objects to the category', 'editors', 'category', NULL, 'feature_categories');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_remove_object', 'Can remove objects from the category', 'editors', 'category', NULL, 'feature_categories');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_create_category', 'Can create new categories', 'admin', 'category', NULL, 'feature_categories');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_perspective_view', 'Can view the perspective', 'basic', 'perspective', NULL, 'feature_perspective');
@@ -2933,14 +2933,14 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_view', 'Can view payment requests and details', 'admin', 'payment', NULL, 'payment_feature');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_manual', 'Can enter manual payments', 'admin', 'payment', NULL, 'payment_feature');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_request', 'Can request a payment', 'admin', 'payment', NULL, 'payment_feature');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES ('tiki_p_admin_modules', 'User can Administer Modules', 'registered', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tracker_dump', 'Can save a CSV backup of entire trackers', 'admin', 'trackers', NULL, 'feature_trackers');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES ('tiki_p_admin_modules', 'User can administer modules', 'registered', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tracker_dump', 'Can save a .CSV backup of entire trackers', 'admin', 'trackers', NULL, 'feature_trackers');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_bigbluebutton_join', 'Can join a meeting', 'basic', 'bigbluebutton', NULL, 'bigbluebutton_feature');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_bigbluebutton_moderate', 'Can moderate a meeting', 'admin', 'bigbluebutton', NULL, 'bigbluebutton_feature');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_bigbluebutton_create', 'Can create a meeting', 'admin', 'bigbluebutton', NULL, 'bigbluebutton_feature');
 
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_socialnetworks', 'user can use social network integration', 'registered', 'socialnetworks', NULL, 'feature_socialnetworks');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_socialnetworks', 'user can register this site with socialnetworks', 'admin', 'socialnetworks', 'y', 'feature_socialnetworks');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_socialnetworks', 'user can register this site with social networks', 'admin', 'socialnetworks', 'y', 'feature_socialnetworks');
 
 
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_page-contribution_view', 'Can view contributions to a page', 'basic', 'wiki', NULL, 'feature_wiki');

------------------------------------------------------------------------
r28624 | Jyhem | 2010-08-20 08:12:16 -0400 (sex, 20 ago 2010) | 1 line

[ENH] Store parsing format of blog posts for correct display when some are entered wysiwyg and others are not

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 28623)
+++ tiki.sql	(revision 28624)
@@ -263,6 +263,7 @@
   `trackbacks_from` text,
   `title` varchar(255) default NULL,
   `priv` varchar(1) default NULL,
+  `wysiwyg` varchar(1) default NULL,
   PRIMARY KEY (`postId`),
   KEY `data` (`data`(255)),
   KEY `blogId` (`blogId`),

------------------------------------------------------------------------
r28596 | chealer | 2010-08-18 14:39:04 -0400 (qua, 18 ago 2010) | 1 line

tiki_*_watches: restore index on event+object+user/group 

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 28595)
+++ tiki.sql	(revision 28596)
@@ -983,7 +983,8 @@
   `title` varchar(250) default NULL,
   `type` varchar(200) default NULL,
   `url` varchar(250) default NULL,
-  PRIMARY KEY (`watchId`)
+  PRIMARY KEY (`watchId`),
+  INDEX `event-object-group` ( `event` , `object` ( 100 ) , `group` ( 50 ) ) 
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_history`;
@@ -2518,7 +2519,8 @@
   `type` varchar(200) default NULL,
   `url` varchar(250) default NULL,
   `email` varchar(200) default NULL,
-  PRIMARY KEY (`watchId`)
+  PRIMARY KEY (`watchId`),
+  INDEX `event-object-user` ( `event` , `object` ( 100 ) , `user` ( 50 ) )
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_userfiles`;

------------------------------------------------------------------------
r28592 | chealer | 2010-08-18 12:41:53 -0400 (qua, 18 ago 2010) | 1 line

move watches primary key on watchId allowing to make user watches email null. 

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 28591)
+++ tiki.sql	(revision 28592)
@@ -983,8 +983,7 @@
   `title` varchar(250) default NULL,
   `type` varchar(200) default NULL,
   `url` varchar(250) default NULL,
-  KEY `watchId` (`watchId`),
-  PRIMARY KEY (`group`(50),event,object(100))
+  PRIMARY KEY (`watchId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_history`;
@@ -2519,8 +2518,7 @@
   `type` varchar(200) default NULL,
   `url` varchar(250) default NULL,
   `email` varchar(200) default NULL,
-  KEY `watchId` (`watchId`),
-  PRIMARY KEY (`user`(50),event,object(100),email(50))
+  PRIMARY KEY (`watchId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_userfiles`;
@@ -3594,7 +3592,7 @@
     `description` VARCHAR(100) NOT NULL,
     `actions` TEXT,
     `detail` TEXT,
-	`userId` int(8),
+    `userId` int(8),
     PRIMARY KEY( `paymentRequestId` )
 );
 
@@ -3606,19 +3604,19 @@
     `amount` DECIMAL(7,2),
     `type` VARCHAR(15),
     `details` TEXT,
-	`userId` int(8),
+    `userId` int(8),
     PRIMARY KEY(`paymentReceivedId`),
     KEY `payment_request_ix` (`paymentRequestId`)
 );
 DROP TABLE IF EXISTS `tiki_discount`;
 CREATE TABLE `tiki_discount`( 
-	`id` INT NOT NULL AUTO_INCREMENT,
-	`code` VARCHAR(255),
-	`value` VARCHAR(255),
-	`max` INT,
-	`comment` TEXT,
-	PRIMARY KEY(`id`),
-	KEY `code` (`code`)
+    `id` INT NOT NULL AUTO_INCREMENT,
+    `code` VARCHAR(255),
+    `value` VARCHAR(255),
+    `max` INT,
+    `comment` TEXT,
+    PRIMARY KEY(`id`),
+    KEY `code` (`code`)
 );
 DROP TABLE IF EXISTS `tiki_translations_in_progress`;
 CREATE TABLE IF NOT EXISTS `tiki_translations_in_progress` (
@@ -3689,24 +3687,24 @@
 
 DROP TABLE IF EXISTS `tiki_todo`;
 CREATE TABLE `tiki_todo` (
-	`todoId` INT(12) NOT NULL auto_increment,
-	`after` INT(12) NOT NULL,
-	`event` ENUM('creation', 'modification', 'upload'),
-	`objectType` VARCHAR(50),
-	`objectId` VARCHAR(255) default NULL,
-	`from` VARCHAR(255) default NULL,
-	`to` VARCHAR(255) default NULL,
-	PRIMARY KEY (`todoId`),
-	KEY `what` (`objectType`, `objectId`),
-	KEY `after` (`after`)
+    `todoId` INT(12) NOT NULL auto_increment,
+    `after` INT(12) NOT NULL,
+    `event` ENUM('creation', 'modification', 'upload'),
+    `objectType` VARCHAR(50),
+    `objectId` VARCHAR(255) default NULL,
+    `from` VARCHAR(255) default NULL,
+    `to` VARCHAR(255) default NULL,
+    PRIMARY KEY (`todoId`),
+    KEY `what` (`objectType`, `objectId`),
+    KEY `after` (`after`)
 );
 DROP TABLE IF EXISTS `tiki_todo_notif`;
 CREATE TABLE `tiki_todo_notif` (
-	`todoId` INT(12) NOT NULL,
-	`objectType` VARCHAR(50),
-	`objectId` VARCHAR(255) default NULL,
-	KEY `todoId` (`todoId`),
-	KEY `objectId` (`objectId`)
+    `todoId` INT(12) NOT NULL,
+    `objectType` VARCHAR(50),
+    `objectId` VARCHAR(255) default NULL,
+    KEY `todoId` (`todoId`),
+    KEY `objectId` (`objectId`)
 );
 
 DROP TABLE IF EXISTS `tiki_url_shortener`;

------------------------------------------------------------------------
r28583 | sampaioprimo | 2010-08-18 00:48:51 -0400 (qua, 18 ago 2010) | 2 lines

[NEW] website and email optional fields for comments


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 28582)
+++ tiki.sql	(revision 28583)
@@ -528,6 +528,8 @@
   `title` varchar(255) default NULL,
   `data` text,
   `hash` varchar(32) default NULL,
+  `email` varchar(200) default NULL,
+  `website` varchar(200) default NULL,
   `user_ip` varchar(15) default NULL,
   `summary` varchar(240) default NULL,
   `smiley` varchar(80) default NULL,

------------------------------------------------------------------------
r28542 | sampaioprimo | 2010-08-16 12:40:44 -0400 (seg, 16 ago 2010) | 2 lines

[NEW] field to set the number of posts to display in the related content section of a post


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 28541)
+++ tiki.sql	(revision 28542)
@@ -304,6 +304,7 @@
   `show_avatar` char(1) default NULL,
   `always_owner` char(1) default NULL,
   `show_related` char(1) default NULL,
+  `related_max` int(4) default 5,
   PRIMARY KEY (`blogId`),
   KEY `title` (`title`),
   KEY `description` (`description`(255)),

------------------------------------------------------------------------
r28476 | sampaioprimo | 2010-08-12 16:50:54 -0400 (qui, 12 ago 2010) | 2 lines

[NEW] related posts on the bottom of each post


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 28475)
+++ tiki.sql	(revision 28476)
@@ -303,6 +303,7 @@
   `allow_comments` char(1) default NULL,
   `show_avatar` char(1) default NULL,
   `always_owner` char(1) default NULL,
+  `show_related` char(1) default NULL,
   PRIMARY KEY (`blogId`),
   KEY `title` (`title`),
   KEY `description` (`description`(255)),

------------------------------------------------------------------------
r28360 | sampaioprimo | 2010-08-07 01:17:06 -0400 (sÃ¡b, 07 ago 2010) | 2 lines

modify fields in tiki_language to tinytext instead of tinyblob


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 28359)
+++ tiki.sql	(revision 28360)
@@ -1067,9 +1067,9 @@
 
 DROP TABLE IF EXISTS `tiki_language`;
 CREATE TABLE `tiki_language` (
-  `source` tinyblob NOT NULL,
+  `source` tinytext NOT NULL,
   `lang` char(16) NOT NULL default '',
-  `tran` tinyblob,
+  `tran` tinytext,
   PRIMARY KEY (`source`(255),`lang`)
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r28338 | Jyhem | 2010-08-06 10:42:54 -0400 (sex, 06 ago 2010) | 1 line

[NEW] Allow custom blog post heading

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 28337)
+++ tiki.sql	(revision 28338)
@@ -125,6 +125,7 @@
   `expireDate` int(14) default NULL,
   `created` int(14) default NULL,
   `heading` text,
+  `post_heading` text,
   `body` text,
   `hash` varchar(32) default NULL,
   `author` varchar(200) default NULL,

------------------------------------------------------------------------
r28326 | sampaioprimo | 2010-08-05 16:42:05 -0400 (qui, 05 ago 2010) | 2 lines

[KIL] feature to create a new language in the database (new languages created using the database were used nowhere)


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 28325)
+++ tiki.sql	(revision 28326)
@@ -1072,15 +1072,6 @@
   PRIMARY KEY (`source`(255),`lang`)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS `tiki_languages`;
-CREATE TABLE `tiki_languages` (
-  `lang` char(16) NOT NULL default '',
-  `language` varchar(255) default NULL,
-  PRIMARY KEY (`lang`)
-) ENGINE=MyISAM;
-
-INSERT INTO tiki_languages (lang, language) VALUES ('en','English');
-
 DROP TABLE IF EXISTS `tiki_link_cache`;
 CREATE TABLE `tiki_link_cache` (
   `cacheId` int(14) NOT NULL auto_increment,

------------------------------------------------------------------------
r28263 | cdrwhite | 2010-08-02 11:46:13 -0400 (seg, 02 ago 2010) | 1 line

[ENH] Adding URL-Shortener functionality to socialnetworks and rename promote to share

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 28262)
+++ tiki.sql	(revision 28263)
@@ -2730,7 +2730,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_site_report', 'Can report a link to the webmaster', 'basic', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_subscribe_groups', 'Can subscribe to groups', 'registered', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tell_a_friend', 'Can send a link to a friend', 'Basic', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_promote_page', 'Can promote a page (email, twitter, facebook)', 'Basic', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_share', 'Can share a page (email, twitter, facebook, message, forums)', 'Basic', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_use_HTML', 'Can use HTML in pages', 'editors', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_actionlog', 'Can view action log', 'registered', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_actionlog_owngroups', 'Can view action log for users of his own groups', 'registered', 'tiki', NULL, NULL);
@@ -3712,3 +3712,16 @@
 	KEY `todoId` (`todoId`),
 	KEY `objectId` (`objectId`)
 );
+
+DROP TABLE IF EXISTS `tiki_url_shortener`;
+CREATE TABLE `tiki_url_shortener` (
+  `urlId` int(10) unsigned NOT NULL AUTO_INCREMENT,
+  `user` varchar(200) NOT NULL,
+  `longurl` tinytext NOT NULL,
+  `longurl_hash` varchar(32) NOT NULL,
+  `service` varchar(32) NOT NULL,
+  `shorturl` varchar(63) NOT NULL,
+  PRIMARY KEY (`urlId`),
+  UNIQUE KEY `shorturl` (`shorturl`),
+  KEY `longurl_hash` (`longurl_hash`)
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;

------------------------------------------------------------------------
r28213 | sylvieg | 2010-07-30 10:40:48 -0400 (sex, 30 jul 2010) | 1 line

[FIX]articles: better implementation 27943: a global param giving the image width in list mode does not work as image can be landscape or portrait. So need to be defined for each article

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 28212)
+++ tiki.sql	(revision 28213)
@@ -119,6 +119,7 @@
   `image_size` int(14) default NULL,
   `image_x` int(4) default NULL,
   `image_y` int(4) default NULL,
+  `list_image_x` int(4) default NULL,
   `image_data` longblob,
   `publishDate` int(14) default NULL,
   `expireDate` int(14) default NULL,

------------------------------------------------------------------------
r28156 | cdrwhite | 2010-07-27 12:12:07 -0400 (ter, 27 jul 2010) | 2 lines

[NEW] feature_promote allows to promote a page via email (like tell a friend) + post on facebook wall + Tweet via twitter


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 28155)
+++ tiki.sql	(revision 28156)
@@ -2729,6 +2729,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_site_report', 'Can report a link to the webmaster', 'basic', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_subscribe_groups', 'Can subscribe to groups', 'registered', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tell_a_friend', 'Can send a link to a friend', 'Basic', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_promote_page', 'Can promote a page (email, twitter, facebook)', 'Basic', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_use_HTML', 'Can use HTML in pages', 'editors', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_actionlog', 'Can view action log', 'registered', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_actionlog_owngroups', 'Can view action log for users of his own groups', 'registered', 'tiki', NULL, NULL);

------------------------------------------------------------------------
r28114 | marclaporte | 2010-07-23 15:49:24 -0400 (sex, 23 jul 2010) | 1 line

[FIX] stray comma

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 28113)
+++ tiki.sql	(revision 28114)
@@ -3526,7 +3526,7 @@
     `from` varchar(255) NOT NULL,
     `to` varchar(255) NOT NULL,
     `guards` text,
-    PRIMARY KEY(`transitionId`),
+    PRIMARY KEY(`transitionId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_auth_tokens`;
@@ -3709,4 +3709,4 @@
 	`objectId` VARCHAR(255) default NULL,
 	KEY `todoId` (`todoId`),
 	KEY `objectId` (`objectId`)
-);
\ No newline at end of file
+);

------------------------------------------------------------------------
r28107 | sylvieg | 2010-07-23 09:45:50 -0400 (sex, 23 jul 2010) | 1 line

[FIX]missing commit to 28085

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 28106)
+++ tiki.sql	(revision 28107)
@@ -3705,6 +3705,7 @@
 DROP TABLE IF EXISTS `tiki_todo_notif`;
 CREATE TABLE `tiki_todo_notif` (
 	`todoId` INT(12) NOT NULL,
+	`objectType` VARCHAR(50),
 	`objectId` VARCHAR(255) default NULL,
 	KEY `todoId` (`todoId`),
 	KEY `objectId` (`objectId`)

------------------------------------------------------------------------
r28085 | sylvieg | 2010-07-21 11:21:19 -0400 (qua, 21 jul 2010) | 1 line

[FIX]tracker: reimplement 27986 in special tables: possibility to change the status of a tracker's items a certain time after creation or last modif + notof creator before a certain time : a cron job must be set up

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 28084)
+++ tiki.sql	(revision 28085)
@@ -3688,3 +3688,24 @@
     KEY `relation_source_ix` (`source_type`, `source_itemId`),
     KEY `relation_target_ix` (`target_type`, `target_itemId`)
 );
+
+DROP TABLE IF EXISTS `tiki_todo`;
+CREATE TABLE `tiki_todo` (
+	`todoId` INT(12) NOT NULL auto_increment,
+	`after` INT(12) NOT NULL,
+	`event` ENUM('creation', 'modification', 'upload'),
+	`objectType` VARCHAR(50),
+	`objectId` VARCHAR(255) default NULL,
+	`from` VARCHAR(255) default NULL,
+	`to` VARCHAR(255) default NULL,
+	PRIMARY KEY (`todoId`),
+	KEY `what` (`objectType`, `objectId`),
+	KEY `after` (`after`)
+);
+DROP TABLE IF EXISTS `tiki_todo_notif`;
+CREATE TABLE `tiki_todo_notif` (
+	`todoId` INT(12) NOT NULL,
+	`objectId` VARCHAR(255) default NULL,
+	KEY `todoId` (`todoId`),
+	KEY `objectId` (`objectId`)
+);
\ No newline at end of file

------------------------------------------------------------------------
r28083 | sylvieg | 2010-07-21 11:04:00 -0400 (qua, 21 jul 2010) | 1 line

[FIX]transition: partial rollback to batch transition

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 28082)
+++ tiki.sql	(revision 28083)
@@ -3523,15 +3523,10 @@
     `preserve` int(1) NOT NULL DEFAULT 0,
     `name` varchar(50),
     `type` varchar(20) NOT NULL,
-	`objectId` int(12) DEFAULT NULL,
     `from` varchar(255) NOT NULL,
     `to` varchar(255) NOT NULL,
     `guards` text,
-    `batch` char(1) DEFAULT NULL,
     PRIMARY KEY(`transitionId`),
-    KEY `transition_lookup` (`type`, `from`),
-	KEY `batch` (`batch`),
-	KEY `objectId` (`objectId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_auth_tokens`;

------------------------------------------------------------------------
r28078 | cdrwhite | 2010-07-20 12:21:01 -0400 (ter, 20 jul 2010) | 1 line

[NEW] Contributional  stats and track changes to a wiki page

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 28077)
+++ tiki.sql	(revision 28078)
@@ -2943,6 +2943,9 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_socialnetworks', 'user can use social network integration', 'registered', 'socialnetworks', NULL, 'feature_socialnetworks');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_socialnetworks', 'user can register this site with socialnetworks', 'admin', 'socialnetworks', 'y', 'feature_socialnetworks');
 
+
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_page-contribution_view', 'Can view contributions to a page', 'basic', 'wiki', NULL, 'feature_wiki');
+
 DROP TABLE IF EXISTS `users_usergroups`;
 CREATE TABLE `users_usergroups` (
   `userId` int(8) NOT NULL default '0',

------------------------------------------------------------------------
r28057 | marclaporte | 2010-07-18 11:05:53 -0400 (dom, 18 jul 2010) | 1 line

[KIL] removing a seemingly unused table. users_users is what your are looking for.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 28056)
+++ tiki.sql	(revision 28057)
@@ -2549,15 +2549,6 @@
   `voted` int(8) default NULL
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS `tiki_users`;
-CREATE TABLE `tiki_users` (
-  `user` varchar(200) NOT NULL default '',
-  `password` varchar(40) default NULL,
-  `email` varchar(200) default NULL,
-  `lastLogin` int(14) default NULL,
-  PRIMARY KEY (`user`)
-) ENGINE=MyISAM;
-
 DROP TABLE IF EXISTS `tiki_webmail_contacts`;
 CREATE TABLE `tiki_webmail_contacts` (
   `contactId` int(12) NOT NULL auto_increment,

------------------------------------------------------------------------
r27986 | sylvieg | 2010-07-14 11:56:08 -0400 (qua, 14 jul 2010) | 1 line

[NEW]tracker: possibility to change the status of a tracker's items a certain time after creation or last modif: a cron job to run tiki-batch_transition must be set up

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 27985)
+++ tiki.sql	(revision 27986)
@@ -3529,11 +3529,15 @@
     `preserve` int(1) NOT NULL DEFAULT 0,
     `name` varchar(50),
     `type` varchar(20) NOT NULL,
+	`objectId` int(12) DEFAULT NULL,
     `from` varchar(255) NOT NULL,
     `to` varchar(255) NOT NULL,
     `guards` text,
+    `batch` char(1) DEFAULT NULL,
     PRIMARY KEY(`transitionId`),
-    KEY `transition_lookup` (`type`, `from`)
+    KEY `transition_lookup` (`type`, `from`),
+	KEY `batch` (`batch`),
+	KEY `objectId` (`objectId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_auth_tokens`;

------------------------------------------------------------------------
r27823 | sylvieg | 2010-07-02 08:39:15 -0400 (sex, 02 jul 2010) | 1 line

[NEW]discount: library to manage discount in payment

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 27822)
+++ tiki.sql	(revision 27823)
@@ -3619,6 +3619,16 @@
     PRIMARY KEY(`paymentReceivedId`),
     KEY `payment_request_ix` (`paymentRequestId`)
 );
+DROP TABLE IF EXISTS `tiki_discount`;
+CREATE TABLE `tiki_discount`( 
+	`id` INT NOT NULL AUTO_INCREMENT,
+	`code` VARCHAR(255),
+	`value` VARCHAR(255),
+	`max` INT,
+	`comment` TEXT,
+	PRIMARY KEY(`id`),
+	KEY `code` (`code`)
+);
 DROP TABLE IF EXISTS `tiki_translations_in_progress`;
 CREATE TABLE IF NOT EXISTS `tiki_translations_in_progress` (
    `page_id` int(14) NOT NULL,

------------------------------------------------------------------------
r27808 | sampaioprimo | 2010-06-29 15:39:45 -0400 (ter, 29 jun 2010) | 2 lines

[KIL] feature_blog_comments


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 27807)
+++ tiki.sql	(revision 27808)
@@ -1427,7 +1427,6 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Content Templates','tiki-admin_content_templates.php',1256,'feature_wiki_templates','tiki_p_edit_content_templates','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_wiki_comments','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_article_comments','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_blog_comments','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_file_galleries_comments','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_image_galleries_comments','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_poll_comments','tiki_p_admin','',0);
@@ -2879,12 +2878,12 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_broadcast_all', 'Can broadcast messages to all user', 'admin', 'messu', NULL, 'feature_messages');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_broadcast', 'Can broadcast messages to groups', 'admin', 'messu', NULL, 'feature_messages');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_messages', 'Can use the messaging system', 'registered', 'messu', NULL, 'feature_messages');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_comments', 'Can admin comments', 'admin', 'comments', 'y', 'feature_wiki_comments,feature_blog_comments,feature_blogposts_comments,feature_file_galleries_comments,feature_image_galleries_comments,feature_article_comments,feature_faq_comments,feature_poll_comments,map_comments');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_comments', 'Can edit all comments', 'editors', 'comments', NULL, 'feature_wiki_comments,feature_blog_comments,feature_blogposts_comments,feature_file_galleries_comments,feature_image_galleries_comments,feature_article_comments,feature_faq_comments,feature_poll_comments,map_comments');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_post_comments', 'Can post new comments', 'registered', 'comments', NULL, 'feature_wiki_comments,feature_blog_comments,feature_blogposts_comments,feature_file_galleries_comments,feature_image_galleries_comments,feature_article_comments,feature_faq_comments,feature_poll_comments,map_comments');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_read_comments', 'Can read comments', 'basic', 'comments', NULL, 'feature_wiki_comments,feature_blog_comments,feature_blogposts_comments,feature_file_galleries_comments,feature_image_galleries_comments,feature_article_comments,feature_faq_comments,feature_poll_comments,map_comments');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_remove_comments', 'Can delete comments', 'editors', 'comments', NULL, 'feature_wiki_comments,feature_blog_comments,feature_blogposts_comments,feature_file_galleries_comments,feature_image_galleries_comments,feature_article_comments,feature_faq_comments,feature_poll_comments,map_comments');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_vote_comments', 'Can vote comments', 'registered', 'comments', NULL, 'feature_wiki_comments,feature_blog_comments,feature_blogposts_comments,feature_file_galleries_comments,feature_image_galleries_comments,feature_article_comments,feature_faq_comments,feature_poll_comments,map_comments');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_comments', 'Can admin comments', 'admin', 'comments', 'y', 'feature_wiki_comments,feature_blogposts_comments,feature_file_galleries_comments,feature_image_galleries_comments,feature_article_comments,feature_faq_comments,feature_poll_comments,map_comments');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_comments', 'Can edit all comments', 'editors', 'comments', NULL, 'feature_wiki_comments,feature_blogposts_comments,feature_file_galleries_comments,feature_image_galleries_comments,feature_article_comments,feature_faq_comments,feature_poll_comments,map_comments');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_post_comments', 'Can post new comments', 'registered', 'comments', NULL, 'feature_wiki_comments,feature_blogposts_comments,feature_file_galleries_comments,feature_image_galleries_comments,feature_article_comments,feature_faq_comments,feature_poll_comments,map_comments');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_read_comments', 'Can read comments', 'basic', 'comments', NULL, 'feature_wiki_comments,feature_blogposts_comments,feature_file_galleries_comments,feature_image_galleries_comments,feature_article_comments,feature_faq_comments,feature_poll_comments,map_comments');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_remove_comments', 'Can delete comments', 'editors', 'comments', NULL, 'feature_wiki_comments,feature_blogposts_comments,feature_file_galleries_comments,feature_image_galleries_comments,feature_article_comments,feature_faq_comments,feature_poll_comments,map_comments');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_vote_comments', 'Can vote comments', 'registered', 'comments', NULL, 'feature_wiki_comments,feature_blogposts_comments,feature_file_galleries_comments,feature_image_galleries_comments,feature_article_comments,feature_faq_comments,feature_poll_comments,map_comments');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_content_templates', 'Can admin content templates', 'admin', 'content templates', 'y', 'feature_wiki_templates,feature_cms_templates');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_content_templates', 'Can edit content templates', 'editors', 'content templates', NULL, 'feature_wiki_templates,feature_cms_templates');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_use_content_templates', 'Can use content templates', 'registered', 'content templates', NULL, 'feature_wiki_templates,feature_cms_templates');

------------------------------------------------------------------------
r27802 | lphuberdeau | 2010-06-29 13:05:55 -0400 (ter, 29 jun 2010) | 1 line

[MRG] Automatic merge, branches/5.x 27724 to 27798

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 27801)
+++ tiki.sql	(revision 27802)
@@ -230,7 +230,8 @@
   `use_dates` char(1) default NULL,
   `created` int(14) default NULL,
   `message` text,
-  PRIMARY KEY (`banId`)
+  PRIMARY KEY (`banId`),
+  INDEX ban(`use_dates`, `date_from`, `date_to`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_banning_sections`;

------------------------------------------------------------------------
r27790 | sylvieg | 2010-06-28 16:38:30 -0400 (seg, 28 jun 2010) | 1 line

[ENH]payment: display also the suer who creates the payment

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 27789)
+++ tiki.sql	(revision 27790)
@@ -3603,6 +3603,7 @@
     `description` VARCHAR(100) NOT NULL,
     `actions` TEXT,
     `detail` TEXT,
+	`userId` int(8),
     PRIMARY KEY( `paymentRequestId` )
 );
 
@@ -3614,6 +3615,7 @@
     `amount` DECIMAL(7,2),
     `type` VARCHAR(15),
     `details` TEXT,
+	`userId` int(8),
     PRIMARY KEY(`paymentReceivedId`),
     KEY `payment_request_ix` (`paymentRequestId`)
 );

------------------------------------------------------------------------
r27737 | nkoth | 2010-06-22 01:55:57 -0400 (ter, 22 jun 2010) | 1 line

[ENH] Auto guess prefix alias links so that for example ((Project:Title of Project)) will can link to itemId with that title

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 27736)
+++ tiki.sql	(revision 27737)
@@ -3336,6 +3336,7 @@
 
 INSERT INTO tiki_semantic_tokens (token, label) VALUES('alias', 'Page Alias');
 INSERT INTO tiki_semantic_tokens (token, label) VALUES('prefixalias', 'Page Prefix Alias');
+INSERT INTO tiki_semantic_tokens (token, label) VALUES('titlefieldid', 'Field Id for Page Title'),('trackerid', 'Id of Embedded Tracker');
 
 
 DROP TABLE IF EXISTS `tiki_webservice`;

------------------------------------------------------------------------
r27735 | nkoth | 2010-06-22 00:22:16 -0400 (ter, 22 jun 2010) | 1 line

[NEW] Ability to redirect something like Project:15 to tiki-index.php?page=Project&itemId=15 where Project is a pretty tracker page, using semantic prefix alias link

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 27734)
+++ tiki.sql	(revision 27735)
@@ -3335,6 +3335,7 @@
 ) ENGINE=MyISAM ;
 
 INSERT INTO tiki_semantic_tokens (token, label) VALUES('alias', 'Page Alias');
+INSERT INTO tiki_semantic_tokens (token, label) VALUES('prefixalias', 'Page Prefix Alias');
 
 
 DROP TABLE IF EXISTS `tiki_webservice`;

------------------------------------------------------------------------
r27698 | sylvieg | 2010-06-18 10:52:27 -0400 (sex, 18 jun 2010) | 1 line

[ENH]calendar: 2 perms to be able to add yourself to the participants of an event and to add guest

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 27697)
+++ tiki.sql	(revision 27698)
@@ -2686,6 +2686,8 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_change_events', 'Can change events in the calendar', 'registered', 'calendar', NULL, 'feature_calendar');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_calendar', 'Can browse the calendar', 'basic', 'calendar', NULL, 'feature_calendar');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_events', 'Can view events details', 'registered', 'calendar', NULL, 'feature_calendar');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_calendar_add_my_particip', 'Can add own user to the participants', 'registered', 'calendar', NULL, 'feature_calendar');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_calendar_add_guest_particip', 'Can add guest to the participants', 'registered', 'calendar', NULL, 'feature_calendar');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_tiki_calendar', 'Can view Tikiwiki tools calendar', 'basic', 'calendar', NULL, 'feature_calendar');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_chat', 'Administrator, can create channels remove channels etc', 'editors', 'chat', 'y', 'feature_minichat,feature_live_support');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_chat', 'Can use the chat system', 'registered', 'chat', NULL, 'feature_minichat,feature_live_support');

------------------------------------------------------------------------
r27674 | nkoth | 2010-06-17 11:24:12 -0400 (qui, 17 jun 2010) | 1 line

[NEW] Sefurl rule for tiki-user_information.php

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 27673)
+++ tiki.sql	(revision 27674)
@@ -3445,6 +3445,7 @@
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-view_tracker_item.php\\?trackerId=(\\d+)\\&itemId=(\\d+)', 'item$2', 'trackeritem', 'feature_trackers', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-view_tracker_item.php\\?itemId=(\\d+)', 'item$1', 'trackeritem', 'feature_trackers', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-list_file_gallery.php\\?galleryId=(\\d+)', 'file$1', 'file gallery', 'feature_file_galleries', 200);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-user_information.php\\?userId=(\\d+)','user$1', '', '', 200);
  
 UPDATE tiki_menu_options SET icon = 'icon-configuration48x48' WHERE name = 'Admin';
 UPDATE tiki_menu_options SET icon = 'xfce4-appfinder48x48' WHERE name = 'Search';

------------------------------------------------------------------------
r27600 | pkdille | 2010-06-11 14:37:32 -0400 (sex, 11 jun 2010) | 1 line

[FIX] external RSS: An url with more than 256 chars can happen

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 27599)
+++ tiki.sql	(revision 27600)
@@ -3626,7 +3626,7 @@
     `rssItemId` INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
     `rssId` INT NOT NULL,
     `guid` VARCHAR(255) NOT NULL,
-    `url` VARCHAR(255) NOT NULL,
+    `url` TEXT NOT NULL,
     `publication_date` INT UNSIGNED NOT NULL,
     `title` VARCHAR(255) NOT NULL,
     `author` VARCHAR(255),

------------------------------------------------------------------------
r27538 | jonnybradley | 2010-06-08 05:34:12 -0400 (ter, 08 jun 2010) | 1 line

[MRG] Automatic merge, branches/5.x 27492 to 27535

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 27537)
+++ tiki.sql	(revision 27538)
@@ -2903,7 +2903,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_plugin_viewdetail', 'Can view unapproved plugin details', 'registered', 'wiki', NULL, 'feature_wiki');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_plugin_preview', 'Can execute unapproved plugin', 'registered', 'wiki', NULL, 'feature_wiki');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_plugin_approve', 'Can approve plugin execution', 'editors', 'wiki', NULL, 'feature_wiki');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_trust_input', 'Trust all user inputs (no security checks)', 'admin', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_trust_input', 'Trust all user inputs including plugins (no security checks)', 'admin', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_backlink', 'View page backlinks', 'basic', 'wiki', NULL, 'feature_wiki');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_notifications', 'Can admin mail notifications', 'editors', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_invite', 'Can invite user in groups', 'editors', 'tiki', NULL, NULL);

------------------------------------------------------------------------
r27310 | nkoth | 2010-05-25 11:13:12 -0400 (ter, 25 mai 2010) | 1 line

[ENH] New Jquery validation to receive message to be shown when validation fails

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 27309)
+++ tiki.sql	(revision 27310)
@@ -2194,6 +2194,7 @@
   `descriptionIsParsed` char(1) default 'n',
   `validation` varchar(255) default '',
   `validationParam` varchar(255) default '',
+  `validationMessage` varchar(255) default '',
   PRIMARY KEY (`fieldId`),
   INDEX `trackerId` (`trackerId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;

------------------------------------------------------------------------
r27305 | nkoth | 2010-05-24 22:33:09 -0400 (seg, 24 mai 2010) | 1 line

[NEW] AJAX Tracker entry validation using JQuery Validation plugin

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 27304)
+++ tiki.sql	(revision 27305)
@@ -2192,6 +2192,8 @@
   `visibleBy` text,
   `editableBy` text,
   `descriptionIsParsed` char(1) default 'n',
+  `validation` varchar(255) default '',
+  `validationParam` varchar(255) default '',
   PRIMARY KEY (`fieldId`),
   INDEX `trackerId` (`trackerId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;

------------------------------------------------------------------------
r27239 | sylvieg | 2010-05-19 07:51:17 -0400 (qua, 19 mai 2010) | 1 line

[NEW]tracker: action log for view item (only on TRACKER and tiki-view_tracker_item for now)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 27238)
+++ tiki.sql	(revision 27239)
@@ -3188,6 +3188,8 @@
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('feature', 'system', 'y');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Updated', 'trackeritem', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Created', 'trackeritem', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Viewed', 'trackeritem', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Viewed', 'trackeritem', 'n');
 
 DROP TABLE IF EXISTS `tiki_freetags`;
 CREATE TABLE `tiki_freetags` (

------------------------------------------------------------------------
r27131 | sylvieg | 2010-05-12 14:19:55 -0400 (qua, 12 mai 2010) | 1 line

[MRG] Automatic merge, branches/5.x 27081 to 27130

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 27130)
+++ tiki.sql	(revision 27131)
@@ -1286,7 +1286,8 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Last Changes','tiki-lastchanges.php',205,'feature_wiki,feature_lastChanges','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Dump','dump/new.tar',210,'feature_wiki,feature_dump','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Rankings','tiki-wiki_rankings.php',215,'feature_wiki,feature_wiki_rankings','tiki_p_view','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Pages','tiki-listpages.php',220,'feature_wiki,feature_listPages','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Pages','tiki-listpages.php',220,'feature_wiki,feature_listPages','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Create a Wiki Page','tiki-listpages.php?cookietab=2#tab2',222,'feature_wiki,feature_listPages','tiki_p_view,tiki_p_edit','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Orphan Pages','tiki-orphan_pages.php',225,'feature_wiki,feature_listorphanPages','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Sandbox','tiki-editpage.php?page=sandbox',230,'feature_wiki,feature_sandbox','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Multiple Print','tiki-print_pages.php',235,'feature_wiki,feature_wiki_multiprint','tiki_p_view','',0);
@@ -1484,8 +1485,8 @@
 CREATE TABLE `tiki_modules` (
   `moduleId` int(8) NOT NULL auto_increment,
   `name` varchar(200) NOT NULL default '',
-  `position` char(1) default NULL,
-  `ord` int(4) default NULL,
+  `position` char(1) NOT NULL DEFAULT '',
+  `ord` int(4) NOT NULL DEFAULT '0',
   `type` char(1) default NULL,
   `title` varchar(255) default NULL,
   `cache_time` int(14) default NULL,
@@ -2406,7 +2407,7 @@
   PRIMARY KEY (`name`)
 ) ENGINE=MyISAM;
 
-INSERT INTO tiki_user_modules (name, title, data, parse) VALUES ('Application Menu', 'Menu', '{menu id=42}', 'n');
+INSERT INTO tiki_user_modules (name, title, data, parse) VALUES ('Application Menu', 'Menu', '{menu id=42 css=y type=vert}', 'n');
 
 DROP TABLE IF EXISTS `tiki_user_notes`;
 CREATE TABLE `tiki_user_notes` (

------------------------------------------------------------------------
r27056 | cdrwhite | 2010-05-10 10:49:28 -0400 (seg, 10 mai 2010) | 2 lines

Social networks integration (twitter) for shoutbox


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 27055)
+++ tiki.sql	(revision 27056)
@@ -1431,13 +1431,13 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_poll_comments','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_faq_comments','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Contribution','tiki-admin_contribution.php',1265,'feature_contribution','tiki_p_admin_contribution','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 's', 'Kaltura Video', 'tiki-list_kaltura_entries.php', 950, 'feature_kaltura', 'tiki_p_admin | tiki_p_admin_kaltura | tiki_p_list_videos', '', 0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'o', 'List Entries', 'tiki-list_kaltura_entries.php', 952, 'feature_kaltura', 'tiki_p_admin | tiki_p_admin_kaltura | tiki_p_list_videos', '', 0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'o', 'Upload Media', 'tiki-kaltura_upload.php', 954, 'feature_kaltura', 'tiki_p_admin | tiki_p_admin_kaltura | tiki_p_upload_videos', '', 0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s', 'Kaltura Video', 'tiki-list_kaltura_entries.php', 950, 'feature_kaltura', 'tiki_p_admin | tiki_p_admin_kaltura | tiki_p_list_videos', '', 0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o', 'List Entries', 'tiki-list_kaltura_entries.php', 952, 'feature_kaltura', 'tiki_p_admin | tiki_p_admin_kaltura | tiki_p_list_videos', '', 0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o', 'Upload Media', 'tiki-kaltura_upload.php', 954, 'feature_kaltura', 'tiki_p_admin | tiki_p_admin_kaltura | tiki_p_upload_videos', '', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Permissions','tiki-objectpermissions.php',1077,'','tiki_p_admin|tiki_p_admin_objects','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Social networks','tiki-socialnetworks.php',115,'feature_mytiki,feature_socialnetworks','tiki_p_socialnetworks|tiki_p_admin_socialnetworks','Registered',0);
 
 
-
 DROP TABLE IF EXISTS `tiki_menus`;
 CREATE TABLE `tiki_menus` (
   `menuId` int(8) NOT NULL auto_increment,
@@ -1999,6 +1999,7 @@
   `timestamp` int(14) default NULL,
   `user` varchar(200) NULL default '',
   `hash` varchar(32) default NULL,
+  `tweetId` bigint(20) unsigned NOT NULL,
   PRIMARY KEY (`msgId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -2942,6 +2943,8 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_bigbluebutton_moderate', 'Can moderate a meeting', 'admin', 'bigbluebutton', NULL, 'bigbluebutton_feature');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_bigbluebutton_create', 'Can create a meeting', 'admin', 'bigbluebutton', NULL, 'bigbluebutton_feature');
 
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_socialnetworks', 'user can use social network integration', 'registered', 'socialnetworks', NULL, 'feature_socialnetworks');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_socialnetworks', 'user can register this site with socialnetworks', 'admin', 'socialnetworks', 'y', 'feature_socialnetworks');
 
 DROP TABLE IF EXISTS `users_usergroups`;
 CREATE TABLE `users_usergroups` (

------------------------------------------------------------------------
r26935 | nkoth | 2010-05-06 10:19:30 -0400 (qui, 06 mai 2010) | 1 line

[FIX] text field cannot have default in some operating systems

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 26934)
+++ tiki.sql	(revision 26935)
@@ -84,7 +84,7 @@
   `ip` varchar(39) default NULL,
   `comment` varchar(200) default NULL,
   `categId` int(12) NOT NULL default '0',
-	`client` VARCHAR( 200 ) NULL DEFAULT NULL,
+    `client` VARCHAR( 200 ) NULL DEFAULT NULL,
   PRIMARY KEY (`actionId`),
   KEY `lastModif` (`lastModif`),
   KEY `object` (`object`(100), `objectType`, `action`(100))
@@ -373,8 +373,8 @@
   KEY `calendarId` (`calendarId`),
   FULLTEXT KEY `ft` (`name`,`description`),
   CONSTRAINT `fk_calitems_recurrence`
-	FOREIGN KEY (`recurrenceId`) REFERENCES `tiki_calendar_recurrence`(`recurrenceId`)
-	ON UPDATE CASCADE ON DELETE SET NULL
+    FOREIGN KEY (`recurrenceId`) REFERENCES `tiki_calendar_recurrence`(`recurrenceId`)
+    ON UPDATE CASCADE ON DELETE SET NULL
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_calendar_locations`;
@@ -416,10 +416,10 @@
 
 DROP TABLE IF EXISTS `tiki_calendar_options`;
 CREATE TABLE `tiki_calendar_options` (
-	`calendarId` int(14) NOT NULL default 0,
-	`optionName` varchar(120) NOT NULL default '',
-	`value` varchar(255),
-	PRIMARY KEY (`calendarId`,`optionName`)
+    `calendarId` int(14) NOT NULL default 0,
+    `optionName` varchar(120) NOT NULL default '',
+    `value` varchar(255),
+    PRIMARY KEY (`calendarId`,`optionName`)
 ) ENGINE=MyISAM ;
 
 DROP TABLE IF EXISTS `tiki_categories`;
@@ -1528,11 +1528,11 @@
 
 DROP TABLE IF EXISTS `tiki_newsletter_pages`;
 CREATE TABLE `tiki_newsletter_pages` (
-	`nlId` INT( 12 ) NOT NULL ,
-	`wikiPageName` VARCHAR( 160 ) NOT NULL ,
-	`validateAddrs` CHAR( 1 ) NOT NULL DEFAULT 'n',
-	`addToList` CHAR( 1 ) NOT NULL DEFAULT 'n',
-	PRIMARY KEY ( `nlId` , `wikiPageName` )
+    `nlId` INT( 12 ) NOT NULL ,
+    `wikiPageName` VARCHAR( 160 ) NOT NULL ,
+    `validateAddrs` CHAR( 1 ) NOT NULL DEFAULT 'n',
+    `addToList` CHAR( 1 ) NOT NULL DEFAULT 'n',
+    PRIMARY KEY ( `nlId` , `wikiPageName` )
 ) ENGINE = MYISAM ;
 
 DROP TABLE IF EXISTS `tiki_newsletters`;
@@ -1553,7 +1553,7 @@
   `author` varchar(200) default NULL,
   `allowArticleClip` char(1) default 'y',
   `autoArticleClip` char(1) default 'n',
-  `articleClipTypes` text  default '',
+  `articleClipTypes` text,
   `articleClipRange` int(14) default NULL,
   PRIMARY KEY (`nlId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -2355,10 +2355,10 @@
 
 DROP TABLE IF EXISTS `tiki_user_login_cookies`;
 CREATE TABLE `tiki_user_login_cookies` (
-	`userId` INT NOT NULL,
-	`secret` CHAR(64) NOT NULL,
-	`expiration` TIMESTAMP NOT NULL,
-	PRIMARY KEY (`userId`, `secret`)
+    `userId` INT NOT NULL,
+    `secret` CHAR(64) NOT NULL,
+    `expiration` TIMESTAMP NOT NULL,
+    PRIMARY KEY (`userId`, `secret`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_user_mail_accounts`;
@@ -2375,8 +2375,8 @@
   `smtp` varchar(255) default NULL,
   `useAuth` char(1) default NULL,
   `smtpPort` int(4) default NULL,
-  `flagsPublic` char(1) default 'n',				-- COMMENT 'MatWho - Shared Group Mail box if y',
-  `autoRefresh` int(4) NOT NULL default 0,		-- COMMENT 'seconds for mail list to refresh, 0 = none',
+  `flagsPublic` char(1) default 'n',                -- COMMENT 'MatWho - Shared Group Mail box if y',
+  `autoRefresh` int(4) NOT NULL default 0,        -- COMMENT 'seconds for mail list to refresh, 0 = none',
   `imap` varchar( 255 ) default NULL,
   `mbox` varchar( 255 ) default NULL,
   `maildir` varchar( 255 ) default NULL,
@@ -3511,97 +3511,97 @@
 
 DROP TABLE IF EXISTS `tiki_transitions`;
 CREATE TABLE `tiki_transitions` (
-	`transitionId` int NOT NULL AUTO_INCREMENT,
-	`preserve` int(1) NOT NULL DEFAULT 0,
-	`name` varchar(50),
-	`type` varchar(20) NOT NULL,
-	`from` varchar(255) NOT NULL,
-	`to` varchar(255) NOT NULL,
-	`guards` text,
-	PRIMARY KEY(`transitionId`),
-	KEY `transition_lookup` (`type`, `from`)
+    `transitionId` int NOT NULL AUTO_INCREMENT,
+    `preserve` int(1) NOT NULL DEFAULT 0,
+    `name` varchar(50),
+    `type` varchar(20) NOT NULL,
+    `from` varchar(255) NOT NULL,
+    `to` varchar(255) NOT NULL,
+    `guards` text,
+    PRIMARY KEY(`transitionId`),
+    KEY `transition_lookup` (`type`, `from`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_auth_tokens`;
 CREATE TABLE `tiki_auth_tokens` (
-	`tokenId` INT NOT NULL AUTO_INCREMENT,
-	`creation` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
-	`timeout` INT NOT NULL DEFAULT 0,
-	`hits` INT NOT NULL DEFAULT 1,
-	`token` CHAR(32),
-	`entry` VARCHAR(50),
-	`parameters` VARCHAR(255),
-	`groups` VARCHAR(255),
-	PRIMARY KEY( `tokenId` ),
-	KEY `tiki_auth_tokens_token` (`token`)
+    `tokenId` INT NOT NULL AUTO_INCREMENT,
+    `creation` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
+    `timeout` INT NOT NULL DEFAULT 0,
+    `hits` INT NOT NULL DEFAULT 1,
+    `token` CHAR(32),
+    `entry` VARCHAR(50),
+    `parameters` VARCHAR(255),
+    `groups` VARCHAR(255),
+    PRIMARY KEY( `tokenId` ),
+    KEY `tiki_auth_tokens_token` (`token`)
 );
 
 DROP TABLE IF EXISTS `metrics_assigned`;
 CREATE TABLE `metrics_assigned` (
-	`assigned_id` int(11) NOT NULL AUTO_INCREMENT,
-	`metric_id` int(11) NOT NULL,
-	`tab_id` int(11) NOT NULL,
-	PRIMARY KEY (`assigned_id`),
-	KEY `metric_id` (`metric_id`),
-	KEY `tab_id` (`tab_id`)
+    `assigned_id` int(11) NOT NULL AUTO_INCREMENT,
+    `metric_id` int(11) NOT NULL,
+    `tab_id` int(11) NOT NULL,
+    PRIMARY KEY (`assigned_id`),
+    KEY `metric_id` (`metric_id`),
+    KEY `tab_id` (`tab_id`)
 );
 
 DROP TABLE IF EXISTS `metrics_metric`;
 CREATE TABLE `metrics_metric` (
-	`metric_id` int(11) NOT NULL AUTO_INCREMENT,
-	`metric_name` varchar(255) NOT NULL,
-	`metric_range` varchar(1) NOT NULL DEFAULT '+' COMMENT 'values: + (daily), @ (monthly&weekly), - (weekly)',
-	`metric_datatype` varchar(1) NOT NULL DEFAULT 'i' COMMENT 'values: i(nteger), %(percentage), f(loat), L(ist)',
-	`metric_lastupdate` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
-	`metric_query` text,
-	`metric_dsn` VARCHAR(200) NOT NULL DEFAULT 'local',
-	PRIMARY KEY (`metric_id`),
-	UNIQUE KEY `metric_name` (`metric_name`)
+    `metric_id` int(11) NOT NULL AUTO_INCREMENT,
+    `metric_name` varchar(255) NOT NULL,
+    `metric_range` varchar(1) NOT NULL DEFAULT '+' COMMENT 'values: + (daily), @ (monthly&weekly), - (weekly)',
+    `metric_datatype` varchar(1) NOT NULL DEFAULT 'i' COMMENT 'values: i(nteger), %(percentage), f(loat), L(ist)',
+    `metric_lastupdate` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
+    `metric_query` text,
+    `metric_dsn` VARCHAR(200) NOT NULL DEFAULT 'local',
+    PRIMARY KEY (`metric_id`),
+    UNIQUE KEY `metric_name` (`metric_name`)
 );
 
 DROP TABLE IF EXISTS `metrics_tab`;
 CREATE TABLE `metrics_tab` (
-	`tab_id` int(11) NOT NULL AUTO_INCREMENT,
-	`tab_name` varchar(255) NOT NULL,
-	`tab_order` int(11) NOT NULL DEFAULT '0',
-	`tab_content` longtext NOT NULL,
-	PRIMARY KEY (`tab_id`),
-	UNIQUE KEY `tab_name` (`tab_name`)
+    `tab_id` int(11) NOT NULL AUTO_INCREMENT,
+    `tab_name` varchar(255) NOT NULL,
+    `tab_order` int(11) NOT NULL DEFAULT '0',
+    `tab_content` longtext NOT NULL,
+    PRIMARY KEY (`tab_id`),
+    UNIQUE KEY `tab_name` (`tab_name`)
 );
 
 DROP TABLE IF EXISTS `tiki_file_backlinks`;
 CREATE TABLE `tiki_file_backlinks` (
-	   `fileId` int(14) NOT NULL,
-	   `objectId` int(12) NOT NULL,
-	   KEY `objectId` (`objectId`),
-	   KEY `fileId` (`fileId`)
+       `fileId` int(14) NOT NULL,
+       `objectId` int(12) NOT NULL,
+       KEY `objectId` (`objectId`),
+       KEY `fileId` (`fileId`)
 );
 
 DROP TABLE IF EXISTS `tiki_payment_requests`;
 CREATE TABLE `tiki_payment_requests` (
-	`paymentRequestId` INT NOT NULL AUTO_INCREMENT,
-	`amount` DECIMAL(7,2) NOT NULL,
-	`amount_paid` DECIMAL(7,2) NOT NULL DEFAULT 0.0,
-	`currency` CHAR(3) NOT NULL,
-	`request_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
-	`due_date` TIMESTAMP NOT NULL,
-	`cancel_date` TIMESTAMP NULL,
-	`description` VARCHAR(100) NOT NULL,
-	`actions` TEXT,
-	`detail` TEXT,
-	PRIMARY KEY( `paymentRequestId` )
+    `paymentRequestId` INT NOT NULL AUTO_INCREMENT,
+    `amount` DECIMAL(7,2) NOT NULL,
+    `amount_paid` DECIMAL(7,2) NOT NULL DEFAULT 0.0,
+    `currency` CHAR(3) NOT NULL,
+    `request_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
+    `due_date` TIMESTAMP NOT NULL,
+    `cancel_date` TIMESTAMP NULL,
+    `description` VARCHAR(100) NOT NULL,
+    `actions` TEXT,
+    `detail` TEXT,
+    PRIMARY KEY( `paymentRequestId` )
 );
 
 DROP TABLE IF EXISTS `tiki_payment_received`;
 CREATE TABLE `tiki_payment_received` (
-	`paymentReceivedId` INT NOT NULL AUTO_INCREMENT,
-	`paymentRequestId` INT NOT NULL,
-	`payment_date` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
-	`amount` DECIMAL(7,2),
-	`type` VARCHAR(15),
-	`details` TEXT,
-	PRIMARY KEY(`paymentReceivedId`),
-	KEY `payment_request_ix` (`paymentRequestId`)
+    `paymentReceivedId` INT NOT NULL AUTO_INCREMENT,
+    `paymentRequestId` INT NOT NULL,
+    `payment_date` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
+    `amount` DECIMAL(7,2),
+    `type` VARCHAR(15),
+    `details` TEXT,
+    PRIMARY KEY(`paymentReceivedId`),
+    KEY `payment_request_ix` (`paymentRequestId`)
 );
 DROP TABLE IF EXISTS `tiki_translations_in_progress`;
 CREATE TABLE IF NOT EXISTS `tiki_translations_in_progress` (
@@ -3614,58 +3614,58 @@
 
 DROP TABLE IF EXISTS `tiki_rss_items`;
 CREATE TABLE `tiki_rss_items` (
-	`rssItemId` INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
-	`rssId` INT NOT NULL,
-	`guid` VARCHAR(255) NOT NULL,
-	`url` VARCHAR(255) NOT NULL,
-	`publication_date` INT UNSIGNED NOT NULL,
-	`title` VARCHAR(255) NOT NULL,
-	`author` VARCHAR(255),
-	`description` TEXT,
-	`content` TEXT,
-	KEY `tiki_rss_items_rss` (`rssId`),
-	UNIQUE `tiki_rss_items_item` (`rssId`, `guid`)
+    `rssItemId` INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
+    `rssId` INT NOT NULL,
+    `guid` VARCHAR(255) NOT NULL,
+    `url` VARCHAR(255) NOT NULL,
+    `publication_date` INT UNSIGNED NOT NULL,
+    `title` VARCHAR(255) NOT NULL,
+    `author` VARCHAR(255),
+    `description` TEXT,
+    `content` TEXT,
+    KEY `tiki_rss_items_rss` (`rssId`),
+    UNIQUE `tiki_rss_items_item` (`rssId`, `guid`)
 );
 
 DROP TABLE IF EXISTS `tiki_object_attributes`;
 CREATE TABLE `tiki_object_attributes` (
-	`attributeId` INT PRIMARY KEY AUTO_INCREMENT,
-	`type` varchar(50) NOT NULL,
-	`itemId` varchar(255) NOT NULL,
-	`attribute` varchar(25) NOT NULL,
-	`value` varchar(100),
-	UNIQUE `item_attribute_uq` ( `type`, `itemId`, `attribute` ),
-	KEY `attribute_lookup_ix` (`attribute`, `value`)
+    `attributeId` INT PRIMARY KEY AUTO_INCREMENT,
+    `type` varchar(50) NOT NULL,
+    `itemId` varchar(255) NOT NULL,
+    `attribute` varchar(25) NOT NULL,
+    `value` varchar(100),
+    UNIQUE `item_attribute_uq` ( `type`, `itemId`, `attribute` ),
+    KEY `attribute_lookup_ix` (`attribute`, `value`)
 );
 
 DROP TABLE IF EXISTS `tiki_rating_configs`;
 CREATE TABLE `tiki_rating_configs` (
-	`ratingConfigId` INT PRIMARY KEY AUTO_INCREMENT,
-	`name` VARCHAR(50) NOT NULL,
-	`expiry` INT NOT NULL DEFAULT 3600,
-	`formula` TEXT NOT NULL,
-	`callbacks` TEXT
+    `ratingConfigId` INT PRIMARY KEY AUTO_INCREMENT,
+    `name` VARCHAR(50) NOT NULL,
+    `expiry` INT NOT NULL DEFAULT 3600,
+    `formula` TEXT NOT NULL,
+    `callbacks` TEXT
 );
 
 DROP TABLE IF EXISTS `tiki_rating_obtained`;
 CREATE TABLE `tiki_rating_obtained` (
-	`ratingId` INT PRIMARY KEY AUTO_INCREMENT,
-	`ratingConfigId` INT NOT NULL,
-	`type` VARCHAR(50) NOT NULL,
-	`object` INT NOT NULL,
-	`expire` INT NOT NULL,
-	`value` FLOAT NOT NULL,
-	UNIQUE `tiki_obtained_rating_uq` (`type`, `object`, `ratingConfigId`)
+    `ratingId` INT PRIMARY KEY AUTO_INCREMENT,
+    `ratingConfigId` INT NOT NULL,
+    `type` VARCHAR(50) NOT NULL,
+    `object` INT NOT NULL,
+    `expire` INT NOT NULL,
+    `value` FLOAT NOT NULL,
+    UNIQUE `tiki_obtained_rating_uq` (`type`, `object`, `ratingConfigId`)
 );
 
 DROP TABLE IF EXISTS `tiki_object_relations`;
 CREATE TABLE `tiki_object_relations` (
-	`relationId` INT PRIMARY KEY AUTO_INCREMENT,
-	`relation` varchar(25) NOT NULL,
-	`source_type` varchar(50) NOT NULL,
-	`source_itemId` varchar(255) NOT NULL,
-	`target_type` varchar(50) NOT NULL,
-	`target_itemId` varchar(255) NOT NULL,
-	KEY `relation_source_ix` (`source_type`, `source_itemId`),
-	KEY `relation_target_ix` (`target_type`, `target_itemId`)
+    `relationId` INT PRIMARY KEY AUTO_INCREMENT,
+    `relation` varchar(25) NOT NULL,
+    `source_type` varchar(50) NOT NULL,
+    `source_itemId` varchar(255) NOT NULL,
+    `target_type` varchar(50) NOT NULL,
+    `target_itemId` varchar(255) NOT NULL,
+    KEY `relation_source_ix` (`source_type`, `source_itemId`),
+    KEY `relation_target_ix` (`target_type`, `target_itemId`)
 );

------------------------------------------------------------------------
r26856 | jonnybradley | 2010-05-01 16:55:08 -0400 (sÃ¡b, 01 mai 2010) | 3 lines

[ENH] Newsletter pages: Use wiki pages as subscription lists either to update subscriptions, or at send time.
Allows use of tracker data (via pretty tracker templates), or any other way of making a wiki page.
Some control of subscription/cancellation - needs refining (& testing!)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 26855)
+++ tiki.sql	(revision 26856)
@@ -1526,6 +1526,15 @@
   PRIMARY KEY (`nlId`,`includedId`)
 ) ENGINE=MyISAM;
 
+DROP TABLE IF EXISTS `tiki_newsletter_pages`;
+CREATE TABLE `tiki_newsletter_pages` (
+	`nlId` INT( 12 ) NOT NULL ,
+	`wikiPageName` VARCHAR( 160 ) NOT NULL ,
+	`validateAddrs` CHAR( 1 ) NOT NULL DEFAULT 'n',
+	`addToList` CHAR( 1 ) NOT NULL DEFAULT 'n',
+	PRIMARY KEY ( `nlId` , `wikiPageName` )
+) ENGINE = MYISAM ;
+
 DROP TABLE IF EXISTS `tiki_newsletters`;
 CREATE TABLE `tiki_newsletters` (
   `nlId` int(12) NOT NULL auto_increment,

------------------------------------------------------------------------
r26745 | sylvieg | 2010-04-23 00:38:37 -0400 (sex, 23 abr 2010) | 1 line

[NEW]tracker: log tracker modification (todo: attach, img + display hisory)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 26744)
+++ tiki.sql	(revision 26745)
@@ -2228,6 +2228,18 @@
   FULLTEXT KEY `ft` (value)
 ) ENGINE=MyISAM;
 
+DROP TABLE IF EXISTS `tiki_tracker_item_field_logs`;
+CREATE TABLE `tiki_tracker_item_field_logs` (
+  `version` int(12) NOT NULL,
+  `itemId` int(12) NOT NULL default '0',
+  `fieldId` int(12) NOT NULL default '0',
+  `value` text,
+  `lang` char(16) default NULL,
+  INDEX `version` (`version`),
+  INDEX `itemId` (`itemId`),
+  INDEX `fieldId` (`itemId`)
+) ENGINE=MyISAM;
+
 DROP TABLE IF EXISTS `tiki_tracker_items`;
 CREATE TABLE `tiki_tracker_items` (
   `itemId` int(12) NOT NULL auto_increment,
@@ -3161,6 +3173,8 @@
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Viewed', 'article', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('%', 'system', 'y');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('feature', 'system', 'y');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Updated', 'trackeritem', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Created', 'trackeritem', 'n');
 
 DROP TABLE IF EXISTS `tiki_freetags`;
 CREATE TABLE `tiki_freetags` (

------------------------------------------------------------------------
r26709 | jonnybradley | 2010-04-20 12:50:48 -0400 (ter, 20 abr 2010) | 1 line

[MRG] Automatic merge, branches/5.x 26666 to 26706

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 26708)
+++ tiki.sql	(revision 26709)
@@ -1492,9 +1492,9 @@
   `rows` int(4) default NULL,
   `params` text,
   `groups` text,
-  PRIMARY KEY (`name`(100), `position`, `ord`, `params`(140)),
+  PRIMARY KEY (`moduleId`),
   KEY `positionType` (position, type),
-  KEY `moduleId` (`moduleId`)
+  KEY `namePosOrdParam` (`name`(100), `position`, `ord`, `params`(140))
 ) ENGINE=MyISAM;
 
 INSERT INTO tiki_modules (name,position,ord,cache_time,params,groups) VALUES ('Application Menu','l',30,0,'flip=y','a:1:{i:0;s:10:"Registered";}');
@@ -2917,6 +2917,9 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_request', 'Can request a payment', 'admin', 'payment', NULL, 'payment_feature');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES ('tiki_p_admin_modules', 'User can Administer Modules', 'registered', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tracker_dump', 'Can save a CSV backup of entire trackers', 'admin', 'trackers', NULL, 'feature_trackers');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_bigbluebutton_join', 'Can join a meeting', 'basic', 'bigbluebutton', NULL, 'bigbluebutton_feature');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_bigbluebutton_moderate', 'Can moderate a meeting', 'admin', 'bigbluebutton', NULL, 'bigbluebutton_feature');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_bigbluebutton_create', 'Can create a meeting', 'admin', 'bigbluebutton', NULL, 'bigbluebutton_feature');
 
 
 DROP TABLE IF EXISTS `users_usergroups`;

------------------------------------------------------------------------
r26661 | sylvieg | 2010-04-16 15:12:50 -0400 (sex, 16 abr 2010) | 1 line

[MRG] Automatic merge, branches/5.x 26623 to 26659

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 26660)
+++ tiki.sql	(revision 26661)
@@ -3132,7 +3132,7 @@
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Uploaded', 'file gallery', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Uploaded', 'image gallery', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('%', 'category', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('login', 'system', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('login', 'system', 'y');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Posted', 'message', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Replied', 'message', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Viewed', 'message', 'n');
@@ -3156,7 +3156,8 @@
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Removed', 'blog', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Removed', 'file', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Viewed', 'article', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('%', 'system', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('%', 'system', 'y');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('feature', 'system', 'y');
 
 DROP TABLE IF EXISTS `tiki_freetags`;
 CREATE TABLE `tiki_freetags` (

------------------------------------------------------------------------
r26602 | jonnybradley | 2010-04-13 08:05:22 -0400 (ter, 13 abr 2010) | 1 line

[MRG] Automatic merge, branches/5.x 26526 to 26600

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 26601)
+++ tiki.sql	(revision 26602)
@@ -739,10 +739,10 @@
   `quota` int(8) default 0,
   `size` int(14) default NULL,
   `wiki_syntax` varchar(200) default NULL,
+  `backlinkPerms` char(1) default 'n',
+  `show_backlinks` char(1) default NULL,
   `image_max_size_x` int(8) NOT NULL default '0',
   `image_max_size_y` int(8) NOT NULL default '0',
-  `backlinkPerms` char(1) default 'n',
-  `show_backlinks` char(1) default NULL,
   PRIMARY KEY (`galleryId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -1490,7 +1490,7 @@
   `title` varchar(255) default NULL,
   `cache_time` int(14) default NULL,
   `rows` int(4) default NULL,
-  `params` varchar(255) default NULL,
+  `params` text,
   `groups` text,
   PRIMARY KEY (`name`(100), `position`, `ord`, `params`(140)),
   KEY `positionType` (position, type),

------------------------------------------------------------------------
r26290 | nkoth | 2010-03-24 13:54:21 -0400 (qua, 24 mar 2010) | 1 line

[NEW] Clip from articles into newsletter capability (part 1, part 2 coming later today)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 26289)
+++ tiki.sql	(revision 26290)
@@ -1542,6 +1542,10 @@
   `frequency` int(14) default NULL,
   `allowTxt` char(1) default 'y',
   `author` varchar(200) default NULL,
+  `allowArticleClip` char(1) default 'y',
+  `autoArticleClip` char(1) default 'n',
+  `articleClipTypes` text  default '',
+  `articleClipRange` int(14) default NULL,
   PRIMARY KEY (`nlId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r26196 | sylvieg | 2010-03-18 10:08:55 -0400 (qui, 18 mar 2010) | 1 line

[MRG] Automatic merge, branches/5.x 26159 to 26195

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 26195)
+++ tiki.sql	(revision 26196)
@@ -739,6 +739,8 @@
   `quota` int(8) default 0,
   `size` int(14) default NULL,
   `wiki_syntax` varchar(200) default NULL,
+  `image_max_size_x` int(8) NOT NULL default '0',
+  `image_max_size_y` int(8) NOT NULL default '0',
   `backlinkPerms` char(1) default 'n',
   `show_backlinks` char(1) default NULL,
   PRIMARY KEY (`galleryId`)

------------------------------------------------------------------------
r26088 | sylvieg | 2010-03-12 15:44:30 -0400 (sex, 12 mar 2010) | 1 line

[NEW]group: option to put automatically at registration or by batch user in a group depending a pattern on their email

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 26087)
+++ tiki.sql	(revision 26088)
@@ -2622,6 +2622,7 @@
   `groupTheme` varchar(255) default '',
   `isExternal` char(1) default 'n',
   `expireAfter` int(14) default 0,
+  `emailPattern`  varchar(255) default '',
   PRIMARY KEY (`id`),
   UNIQUE KEY `groupName` (`groupName`),
   KEY `expireAfter` (`expireAfter`)

------------------------------------------------------------------------
r26020 | jonnybradley | 2010-03-09 12:08:39 -0400 (ter, 09 mar 2010) | 1 line

[ENH] Add parentSheetId to tiki_sheets table - plus admin interface (multi-sheet implementation to come soon)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 26019)
+++ tiki.sql	(revision 26020)
@@ -1973,6 +1973,7 @@
   `title` varchar(200) NOT NULL default '',
   `description` text,
   `author` varchar(200) NOT NULL default '',
+  `parentSheetId` int(8) NULL,
   PRIMARY KEY (`sheetId`)
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r26015 | sylvieg | 2010-03-09 10:14:00 -0400 (ter, 09 mar 2010) | 1 line

[NEW]fgal: option a user can give a duration after a file can be deleted

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 26014)
+++ tiki.sql	(revision 26015)
@@ -774,6 +774,7 @@
   `lockedby` varchar(200) default '',
   `comment` varchar(200) default NULL,
   `archiveId` int(14) default 0,
+  `deleteAfter` int(14) default NULL,
   PRIMARY KEY (`fileId`),
   KEY `name` (name),
   KEY `description` (description(255)),

------------------------------------------------------------------------
r25759 | jonnybradley | 2010-02-26 20:07:39 -0400 (sex, 26 fev 2010) | 1 line

[FIX] feature check for 'Content Templates' menu item

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 25758)
+++ tiki.sql	(revision 25759)
@@ -1419,7 +1419,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_view_actionlog','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_view_actionlog_owngroups','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Content Templates','tiki-admin_content_templates.php',1256,'','tiki_p_edit_content_templates','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Content Templates','tiki-admin_content_templates.php',1256,'feature_wiki_templates','tiki_p_edit_content_templates','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_wiki_comments','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_article_comments','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_blog_comments','tiki_p_admin','',0);

------------------------------------------------------------------------
r25749 | jonnybradley | 2010-02-26 14:34:09 -0400 (sex, 26 fev 2010) | 3 lines

[NEW] Tracker dump. Allows an entire tracker to be exported as CSV. Overrides existing permissions so has it's own new perm, and saves raw values only (so far).
Tested with up to 15,000 items with 20 fields each.
Faster with more memory assigned but tested successfully down to around 45M.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 25748)
+++ tiki.sql	(revision 25749)
@@ -2906,7 +2906,8 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_view', 'Can view payment requests and details', 'admin', 'payment', NULL, 'payment_feature');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_manual', 'Can enter manual payments', 'admin', 'payment', NULL, 'payment_feature');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_request', 'Can request a payment', 'admin', 'payment', NULL, 'payment_feature');
-INSERT INTO users_permissions (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES ('tiki_p_admin_modules', 'User can Administer Modules', 'registered', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES ('tiki_p_admin_modules', 'User can Administer Modules', 'registered', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tracker_dump', 'Can save a CSV backup of entire trackers', 'admin', 'trackers', NULL, 'feature_trackers');
 
 
 DROP TABLE IF EXISTS `users_usergroups`;

------------------------------------------------------------------------
r25671 | lphuberdeau | 2010-02-24 12:03:21 -0400 (qua, 24 fev 2010) | 1 line

[MOD] Generic object relations

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 25670)
+++ tiki.sql	(revision 25671)
@@ -3620,3 +3620,15 @@
 	`value` FLOAT NOT NULL,
 	UNIQUE `tiki_obtained_rating_uq` (`type`, `object`, `ratingConfigId`)
 );
+
+DROP TABLE IF EXISTS `tiki_object_relations`;
+CREATE TABLE `tiki_object_relations` (
+	`relationId` INT PRIMARY KEY AUTO_INCREMENT,
+	`relation` varchar(25) NOT NULL,
+	`source_type` varchar(50) NOT NULL,
+	`source_itemId` varchar(255) NOT NULL,
+	`target_type` varchar(50) NOT NULL,
+	`target_itemId` varchar(255) NOT NULL,
+	KEY `relation_source_ix` (`source_type`, `source_itemId`),
+	KEY `relation_target_ix` (`target_type`, `target_itemId`)
+);

------------------------------------------------------------------------
r25570 | pascalstjean | 2010-02-23 17:47:22 -0400 (ter, 23 fev 2010) | 1 line

[NEW] - Added 'always_owner' column to tiki_blogs database table

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 25569)
+++ tiki.sql	(revision 25570)
@@ -299,6 +299,7 @@
   `add_poster` char(1) default NULL,
   `allow_comments` char(1) default NULL,
   `show_avatar` char(1) default NULL,
+  `always_owner` char(1) default NULL,
   PRIMARY KEY (`blogId`),
   KEY `title` (`title`),
   KEY `description` (`description`(255)),

------------------------------------------------------------------------
r25513 | jonnybradley | 2010-02-22 15:38:15 -0400 (seg, 22 fev 2010) | 1 line

[ENH] Add 'from' email address to webmail accounts - overrides user pref if set.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 25512)
+++ tiki.sql	(revision 25513)
@@ -2351,6 +2351,7 @@
   `mbox` varchar( 255 ) default NULL,
   `maildir` varchar( 255 ) default NULL,
   `useSSL` char( 1 ) NOT NULL default 'n',
+  `fromEmail` varchar( 255 ) NOT NULL default '',
   PRIMARY KEY (`accountId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r25485 | chealer | 2010-02-22 01:44:38 -0400 (seg, 22 fev 2010) | 3 lines

[FIX] failure to create tiki_user_login_cookies
oops
Thanks Nelson Koth

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 25484)
+++ tiki.sql	(revision 25485)
@@ -2326,7 +2326,7 @@
 DROP TABLE IF EXISTS `tiki_user_login_cookies`;
 CREATE TABLE `tiki_user_login_cookies` (
 	`userId` INT NOT NULL,
-	`secret` TEXT NOT NULL,
+	`secret` CHAR(64) NOT NULL,
 	`expiration` TIMESTAMP NOT NULL,
 	PRIMARY KEY (`userId`, `secret`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;

------------------------------------------------------------------------
r25346 | lphuberdeau | 2010-02-18 12:01:46 -0400 (qui, 18 fev 2010) | 1 line

[NEW] Allow to generate auth tokens from tell a friend page to provide privileged access.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 25345)
+++ tiki.sql	(revision 25346)
@@ -3488,6 +3488,7 @@
 	`tokenId` INT NOT NULL AUTO_INCREMENT,
 	`creation` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
 	`timeout` INT NOT NULL DEFAULT 0,
+	`hits` INT NOT NULL DEFAULT 1,
 	`token` CHAR(32),
 	`entry` VARCHAR(50),
 	`parameters` VARCHAR(255),

------------------------------------------------------------------------
r25341 | chealer | 2010-02-18 05:26:58 -0400 (qui, 18 fev 2010) | 3 lines

[SEC] move persistent login cookies from tiki_preferences to new table tiki_user_login_cookies
Intertiki changes untested
userslib: remove unused functions get_user_hash() and get_user_by_hash()

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 25340)
+++ tiki.sql	(revision 25341)
@@ -2323,6 +2323,14 @@
   PRIMARY KEY (`urlId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
+DROP TABLE IF EXISTS `tiki_user_login_cookies`;
+CREATE TABLE `tiki_user_login_cookies` (
+	`userId` INT NOT NULL,
+	`secret` TEXT NOT NULL,
+	`expiration` TIMESTAMP NOT NULL,
+	PRIMARY KEY (`userId`, `secret`)
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
+
 DROP TABLE IF EXISTS `tiki_user_mail_accounts`;
 CREATE TABLE `tiki_user_mail_accounts` (
   `accountId` int(12) NOT NULL auto_increment,

------------------------------------------------------------------------
r25325 | lphuberdeau | 2010-02-17 17:55:51 -0400 (qua, 17 fev 2010) | 1 line

[NEW] Admin panel to configure rating calculations

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 25324)
+++ tiki.sql	(revision 25325)
@@ -3589,3 +3589,23 @@
 	UNIQUE `item_attribute_uq` ( `type`, `itemId`, `attribute` ),
 	KEY `attribute_lookup_ix` (`attribute`, `value`)
 );
+
+DROP TABLE IF EXISTS `tiki_rating_configs`;
+CREATE TABLE `tiki_rating_configs` (
+	`ratingConfigId` INT PRIMARY KEY AUTO_INCREMENT,
+	`name` VARCHAR(50) NOT NULL,
+	`expiry` INT NOT NULL DEFAULT 3600,
+	`formula` TEXT NOT NULL,
+	`callbacks` TEXT
+);
+
+DROP TABLE IF EXISTS `tiki_rating_obtained`;
+CREATE TABLE `tiki_rating_obtained` (
+	`ratingId` INT PRIMARY KEY AUTO_INCREMENT,
+	`ratingConfigId` INT NOT NULL,
+	`type` VARCHAR(50) NOT NULL,
+	`object` INT NOT NULL,
+	`expire` INT NOT NULL,
+	`value` FLOAT NOT NULL,
+	UNIQUE `tiki_obtained_rating_uq` (`type`, `object`, `ratingConfigId`)
+);

------------------------------------------------------------------------
r25280 | lphuberdeau | 2010-02-16 15:04:14 -0400 (ter, 16 fev 2010) | 1 line

[NEW] Adding very simple library to manage attributes on any object (to be used by upcoming features)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 25279)
+++ tiki.sql	(revision 25280)
@@ -3579,3 +3579,13 @@
 	UNIQUE `tiki_rss_items_item` (`rssId`, `guid`)
 );
 
+DROP TABLE IF EXISTS `tiki_object_attributes`;
+CREATE TABLE `tiki_object_attributes` (
+	`attributeId` INT PRIMARY KEY AUTO_INCREMENT,
+	`type` varchar(50) NOT NULL,
+	`itemId` varchar(255) NOT NULL,
+	`attribute` varchar(25) NOT NULL,
+	`value` varchar(100),
+	UNIQUE `item_attribute_uq` ( `type`, `itemId`, `attribute` ),
+	KEY `attribute_lookup_ix` (`attribute`, `value`)
+);

------------------------------------------------------------------------
r25278 | jonnybradley | 2010-02-16 14:27:10 -0400 (ter, 16 fev 2010) | 1 line

[MOD] Rename TikiSheet to Spreadsheets (user visible instances only)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 25277)
+++ tiki.sql	(revision 25278)
@@ -1343,7 +1343,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Quizzes','tiki-list_quizzes.php',755,'feature_quizzes','tiki_p_take_quiz','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Quiz Stats','tiki-quiz_stats.php',760,'feature_quizzes','tiki_p_view_quiz_stats','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Quizzes','tiki-edit_quiz.php',765,'feature_quizzes','tiki_p_admin_quizzes','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','TikiSheet','tiki-sheets.php',780,'feature_sheet','tiki_p_view_sheet','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Spreadsheets','tiki-sheets.php',780,'feature_sheet','tiki_p_view_sheet','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Sheets','tiki-sheets.php',782,'feature_sheet','tiki_p_view_sheet','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Trackers','tiki-list_trackers.php',800,'feature_trackers','tiki_p_list_trackers','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Trackers','tiki-list_trackers.php',805,'feature_trackers','tiki_p_list_trackers','',0);

------------------------------------------------------------------------
r25234 | lphuberdeau | 2010-02-15 13:56:23 -0400 (seg, 15 fev 2010) | 1 line

[NEW] Adding user ratings to articles

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 25233)
+++ tiki.sql	(revision 25234)
@@ -2656,6 +2656,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_remove_article', 'Can remove articles', 'editors', 'cms', NULL, 'feature_articles');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_remove_submission', 'Can remove submissions', 'editors', 'cms', NULL, 'feature_articles');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_submit_article', 'Can submit articles', 'basic', 'cms', NULL, 'feature_articles');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_rate_article', 'Can rate articles', 'basic', 'cms', NULL, 'feature_articles');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_topic_read', 'Can read a topic (Applies only to individual topic perms)', 'basic', 'cms', NULL, 'feature_articles');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_contribution', 'Can admin contributions', 'admin', 'contribution', 'y', 'feature_contribution');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_directory', 'Can admin the directory', 'editors', 'directory', 'y', 'feature_directory');

------------------------------------------------------------------------
r25198 | sylvieg | 2010-02-13 18:49:54 -0400 (sÃ¡b, 13 fev 2010) | 1 line

[FIX]key: use as much as possible - group can be long (todo: use id)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 25197)
+++ tiki.sql	(revision 25198)
@@ -959,7 +959,7 @@
 CREATE TABLE `tiki_group_inclusion` (
   `groupName` varchar(255) NOT NULL default '',
   `includeGroup` varchar(255) NOT NULL default '',
-  PRIMARY KEY (`groupName`(30),`includeGroup`(30))
+  PRIMARY KEY (`groupName`(120),`includeGroup`(120))
 ) ENGINE=MyISAM;
 INSERT INTO  `tiki_group_inclusion` (`groupName` ,`includeGroup`) VALUES ('Registered','Anonymous');
 

------------------------------------------------------------------------
r25097 | jonnybradley | 2010-02-11 15:20:58 -0400 (qui, 11 fev 2010) | 2 lines

[ENH] Tiki-sheet can now parse wiki syntax in cells.
More to come (has produced more problems saving sheets with jQuery.sheet - saveSheet() needs rewiting... next)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 25096)
+++ tiki.sql	(revision 25097)
@@ -1944,6 +1944,7 @@
   `headerRow` int(4) NOT NULL default '0',
   `footerRow` int(4) NOT NULL default '0',
   `className` varchar(64) default NULL,
+  `parseValues` char( 1 ) NOT NULL default 'n',
   UNIQUE KEY `sheetId` (`sheetId`, `begin`)
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r25087 | lphuberdeau | 2010-02-11 14:15:02 -0400 (qui, 11 fev 2010) | 1 line

[NEW] Allow to pull RSS feeds into tiki articles

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 25086)
+++ tiki.sql	(revision 25087)
@@ -1832,6 +1832,7 @@
   `showPubDate` char(1) default 'n',
   `sitetitle` VARCHAR(255),
   `siteurl` VARCHAR(255),
+  `actions` TEXT,
   PRIMARY KEY (`rssId`),
   KEY `name` (name)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;

------------------------------------------------------------------------
r25074 | lphuberdeau | 2010-02-11 11:35:36 -0400 (qui, 11 fev 2010) | 1 line

[MOD] Rewriting external feed library to use Zend_Feed_Reader rather than an assorted set of regex. Should add support for more formats, resolve multiple issues and speed up feed display (feeds used to be parsed every single time they were displayed and sorted manually)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 25073)
+++ tiki.sql	(revision 25074)
@@ -1830,7 +1830,8 @@
   `lastUpdated` int(14) default NULL,
   `showTitle` char(1) default 'n',
   `showPubDate` char(1) default 'n',
-  `content` longblob,
+  `sitetitle` VARCHAR(255),
+  `siteurl` VARCHAR(255),
   PRIMARY KEY (`rssId`),
   KEY `name` (name)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -3559,3 +3560,19 @@
    KEY `language` (`language`),
    UNIQUE (`page_id`, `language`)
 );
+
+DROP TABLE IF EXISTS `tiki_rss_items`;
+CREATE TABLE `tiki_rss_items` (
+	`rssItemId` INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
+	`rssId` INT NOT NULL,
+	`guid` VARCHAR(255) NOT NULL,
+	`url` VARCHAR(255) NOT NULL,
+	`publication_date` INT UNSIGNED NOT NULL,
+	`title` VARCHAR(255) NOT NULL,
+	`author` VARCHAR(255),
+	`description` TEXT,
+	`content` TEXT,
+	KEY `tiki_rss_items_rss` (`rssId`),
+	UNIQUE `tiki_rss_items_item` (`rssId`, `guid`)
+);
+

------------------------------------------------------------------------
r25064 | jonnybradley | 2010-02-11 09:40:44 -0400 (qui, 11 fev 2010) | 1 line

[ENH] Object perms management page gets it's own menu item

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 25063)
+++ tiki.sql	(revision 25064)
@@ -1430,6 +1430,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 's', 'Kaltura Video', 'tiki-list_kaltura_entries.php', 950, 'feature_kaltura', 'tiki_p_admin | tiki_p_admin_kaltura | tiki_p_list_videos', '', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'o', 'List Entries', 'tiki-list_kaltura_entries.php', 952, 'feature_kaltura', 'tiki_p_admin | tiki_p_admin_kaltura | tiki_p_list_videos', '', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'o', 'Upload Media', 'tiki-kaltura_upload.php', 954, 'feature_kaltura', 'tiki_p_admin | tiki_p_admin_kaltura | tiki_p_upload_videos', '', 0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Permissions','tiki-objectpermissions.php',1077,'','tiki_p_admin|tiki_p_admin_objects','',0);
 
 
 

------------------------------------------------------------------------
r24894 | sylvieg | 2010-02-05 15:10:05 -0400 (sex, 05 fev 2010) | 1 line

[NEW]wiki: new perm tiki_p_wiki_view_ref to be able to see a page in modules and rss (without the data) convenient for a site with only one page visible. (more modules to come) 

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 24893)
+++ tiki.sql	(revision 24894)
@@ -2791,6 +2791,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_upload_picture', 'Can upload pictures to wiki pages', 'registered', 'wiki', NULL, 'feature_wiki_pictures');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_use_as_template', 'Can use the page as a tracker template', 'basic', 'wiki', NULL, 'feature_wiki');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view', 'Can view page/pages', 'basic', 'wiki', NULL, 'feature_wiki');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_view_ref', 'Can view in module and feed the wiki pages reference', 'basic', 'wiki', NULL, 'feature_wiki');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_watch_structure', 'Can watch structure', 'registered', 'wiki', NULL, 'feature_wiki_structure');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_admin_attachments', 'Can admin attachments to wiki pages', 'editors', 'wiki', NULL, 'feature_wiki_attachments');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_admin_ratings', 'Can add and change ratings on wiki pages', 'admin', 'wiki', NULL, 'feature_wiki_ratings');

------------------------------------------------------------------------
r24869 | sept_7 | 2010-02-05 06:41:59 -0400 (sex, 05 fev 2010) | 3 lines

[MERGE] merging of experimental/tiki-log-merge to trunk
The aim of this is to unify tikilogs adn tikiactionlog, so now all logs are recorded via tikiactions logs...


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 24868)
+++ tiki.sql	(revision 24869)
@@ -81,9 +81,10 @@
   `object` varchar(255) default NULL,
   `objectType` varchar(32) NOT NULL default '',
   `user` varchar(200) default '',
-  `ip` varchar(15) default NULL,
+  `ip` varchar(39) default NULL,
   `comment` varchar(200) default NULL,
   `categId` int(12) NOT NULL default '0',
+	`client` VARCHAR( 200 ) NULL DEFAULT NULL,
   PRIMARY KEY (`actionId`),
   KEY `lastModif` (`lastModif`),
   KEY `object` (`object`(100), `objectType`, `action`(100))
@@ -3104,8 +3105,8 @@
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Viewed', 'image gallery', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Uploaded', 'file gallery', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Uploaded', 'image gallery', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('*', 'category', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('*', 'login', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('%', 'category', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('login', 'system', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Posted', 'message', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Replied', 'message', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Viewed', 'message', 'n');
@@ -3129,6 +3130,7 @@
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Removed', 'blog', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Removed', 'file', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Viewed', 'article', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('%', 'system', 'n');
 
 DROP TABLE IF EXISTS `tiki_freetags`;
 CREATE TABLE `tiki_freetags` (

------------------------------------------------------------------------
r24818 | lphuberdeau | 2010-02-03 14:28:47 -0400 (qua, 03 fev 2010) | 1 line

[NEW] Cart

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 24817)
+++ tiki.sql	(revision 24818)
@@ -3532,6 +3532,7 @@
 	`cancel_date` TIMESTAMP NULL,
 	`description` VARCHAR(100) NOT NULL,
 	`actions` TEXT,
+	`detail` TEXT,
 	PRIMARY KEY( `paymentRequestId` )
 );
 

------------------------------------------------------------------------
r24784 | sylvieg | 2010-02-01 17:04:25 -0400 (seg, 01 fev 2010) | 1 line

missing table

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 24783)
+++ tiki.sql	(revision 24784)
@@ -3546,3 +3546,11 @@
 	PRIMARY KEY(`paymentReceivedId`),
 	KEY `payment_request_ix` (`paymentRequestId`)
 );
+DROP TABLE IF EXISTS `tiki_translations_in_progress`;
+CREATE TABLE IF NOT EXISTS `tiki_translations_in_progress` (
+   `page_id` int(14) NOT NULL,
+   `language` char(2) NOT NULL,
+   KEY `page_id` (`page_id`),
+   KEY `language` (`language`),
+   UNIQUE (`page_id`, `language`)
+);

------------------------------------------------------------------------
r24745 | lphuberdeau | 2010-01-29 13:07:46 -0400 (sex, 29 jan 2010) | 1 line

[KIL]Â Screencast won't be used

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 24744)
+++ tiki.sql	(revision 24745)
@@ -2883,7 +2883,6 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_download_videos', 'Can download kaltura entry', 'registered', 'kaltura', NULL, 'feature_kaltura');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_list_videos', 'Can list kaltura entries', 'basic', 'kaltura', NULL, 'feature_kaltura');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_videos', 'Can view kaltura entry', 'basic', 'kaltura', NULL, 'feature_kaltura');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_upload_screencast', 'Can upload screencasts to wiki pages', 'basic', 'registered', NULL, 'feature_wiki_screencasts');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_dsn_query', 'Can execute arbitrary queries on a given DSN', 'admin', 'dsn', NULL, NULL);
 
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_admin', 'Can administer payments', 'admin', 'payment', 'y', 'payment_feature');

------------------------------------------------------------------------
r24744 | lphuberdeau | 2010-01-29 12:53:17 -0400 (sex, 29 jan 2010) | 1 line

[KIL]Â Pagelist won't be used

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 24743)
+++ tiki.sql	(revision 24744)
@@ -3468,25 +3468,6 @@
 	KEY `transition_lookup` (`type`, `from`)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS `tiki_page_lists`;
-CREATE TABLE IF NOT EXISTS `tiki_page_lists` (
-  `list_type_id` int(8) unsigned NOT NULL,
-  `priority` int(8) unsigned NOT NULL,
-  `page_name` varchar(160) NOT NULL,
-  `score` float default NULL,
-  PRIMARY KEY  (`list_type_id`,`page_name`)
-) ENGINE=MyISAM;
-
-DROP TABLE IF EXISTS `tiki_page_list_types`;
-CREATE TABLE IF NOT EXISTS `tiki_page_list_types` (
-  `id` int(8) unsigned NOT NULL auto_increment,
-  `name` varchar(40) NOT NULL,
-  `title` varchar(160) default NULL,
-  `description` varchar(200) default NULL,
-  PRIMARY KEY  (`name`),
-  UNIQUE KEY `id` (`id`)
-) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-
 DROP TABLE IF EXISTS `tiki_auth_tokens`;
 CREATE TABLE `tiki_auth_tokens` (
 	`tokenId` INT NOT NULL AUTO_INCREMENT,

------------------------------------------------------------------------
r24732 | chealer | 2010-01-29 01:34:35 -0400 (sex, 29 jan 2010) | 2 lines

[KIL] unused events: evlib, tiki_events and now unused functions from notificationlib and registrationlib
Ref: http://sourceforge.net/mailarchive/forum.php?thread_name=4d9048fc1001280740o7325e83fq3b9e821b9f1f39cd%40mail.gmail.com&forum_name=tikiwiki-devel

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 24731)
+++ tiki.sql	(revision 24732)
@@ -3072,23 +3072,6 @@
   PRIMARY KEY (`object`(200),`type`,`day`)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS `tiki_events`;
-CREATE TABLE `tiki_events` (
-  `callback_type` int(1) NOT NULL default '3',
-  `order` int(2) NOT NULL default '50',
-  `event` varchar(200) NOT NULL default '',
-  `file` varchar(200) NOT NULL default '',
-  `object` varchar(200) NOT NULL default '',
-  `method` varchar(200) NOT NULL default '',
-  PRIMARY KEY (`callback_type`,`order`)
-) ENGINE=MyISAM;
-
-INSERT IGNORE INTO tiki_events(callback_type,`order`,event,file,object,method) VALUES ('1', '20', 'user_registers', 'lib/registration/registrationlib.php', 'registrationlib', 'callback_tikiwiki_setup_custom_fields');
-INSERT IGNORE INTO tiki_events(event,file,object,method) VALUES ('user_registers', 'lib/registration/registrationlib.php', 'registrationlib', 'callback_tikiwiki_save_registration');
-INSERT IGNORE INTO tiki_events(callback_type,`order`,event,file,object,method) VALUES ('5', '20', 'user_registers', 'lib/registration/registrationlib.php', 'registrationlib', 'callback_logslib_user_registers');
-INSERT IGNORE INTO tiki_events(callback_type,`order`,event,file,object,method) VALUES ('5', '25', 'user_registers', 'lib/registration/registrationlib.php', 'registrationlib', 'callback_tikiwiki_send_email');
-INSERT IGNORE INTO tiki_events(callback_type,`order`,event,file,object,method) VALUES ('5', '30', 'user_registers', 'lib/registration/registrationlib.php', 'registrationlib', 'callback_tikimail_user_registers');
-
 DROP TABLE IF EXISTS `tiki_registration_fields`;
 CREATE TABLE `tiki_registration_fields` (
   `id` int(11) NOT NULL auto_increment,

------------------------------------------------------------------------
r24719 | sylvieg | 2010-01-28 14:52:04 -0400 (qui, 28 jan 2010) | 1 line

[NEW]blog: new permission to be able to see modules and rss blog without having the perm to read the complete blog

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 24718)
+++ tiki.sql	(revision 24719)
@@ -2697,6 +2697,8 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_blog_post', 'Can post to a blog', 'registered', 'blogs', NULL, 'feature_blogs');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_create_blogs', 'Can create a blog', 'editors', 'blogs', NULL, 'feature_blogs');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_read_blog', 'Can read blogs', 'basic', 'blogs', NULL, 'feature_blogs');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_blog_post_view_ref', 'Can view in module and feed the blog posts', 'basic', 'blogs', NULL, 'feature_blogs');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_blog_view_ref', 'Can view in module and feed the blog', 'basic', 'blogs', NULL, 'feature_blogs');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_file_galleries', 'Can admin file galleries', 'editors', 'file galleries', 'y', 'feature_file_galleries');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_assign_perm_file_gallery', 'Can assign perms to file gallery', 'admin', 'file galleries', NULL, 'feature_file_galleries');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_batch_upload_file_dir', 'Can use Directory Batch Load', 'editors', 'file galleries', NULL, 'feature_file_galleries');

------------------------------------------------------------------------
r24687 | sylvieg | 2010-01-26 17:21:30 -0400 (ter, 26 jan 2010) | 1 line

[NEW]fgal: can display last Download

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 24686)
+++ tiki.sql	(revision 24687)
@@ -717,6 +717,7 @@
   `max_desc` int(8) default NULL,
   `show_created` char(1) default NULL,
   `show_hits` char(1) default NULL,
+  `show_lastDownload` char(1) default NULL,
   `parentId` int(14) NOT NULL default -1,
   `lockable` char(1) default 'n',
   `show_lockedby` char(1) default NULL,

------------------------------------------------------------------------
r24683 | sylvieg | 2010-01-26 16:24:13 -0400 (ter, 26 jan 2010) | 1 line

[NEW]fgal: memo last download time - can be approximative due to browser cache

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 24682)
+++ tiki.sql	(revision 24683)
@@ -758,6 +758,7 @@
   `user` varchar(200) default '',
   `author` varchar(40) default NULL,
   `hits` int(14) default NULL,
+  `lastDownload` int(14) default NULL,
   `votes` int(8) default NULL,
   `points` decimal(8,2) default NULL,
   `path` varchar(255) default NULL,

------------------------------------------------------------------------
r24586 | chealer | 2010-01-20 22:16:26 -0400 (qua, 20 jan 2010) | 1 line

[NEW] restore Tiki search for a few advantages over MySQL search

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 24585)
+++ tiki.sql	(revision 24586)
@@ -1246,7 +1246,8 @@
 
 -- when adding new inserts, order commands by position
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Home','./',10,'','','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Search','tiki-searchresults.php',13,'feature_search','tiki_p_search','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Search','tiki-searchresults.php',13,'feature_search_fulltext','tiki_p_search','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Search','tiki-searchindex.php',13,'feature_search','tiki_p_search','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Contact Us','tiki-contact.php',20,'feature_contact,feature_messages','','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Stats','tiki-stats.php',23,'feature_stats','tiki_p_view_stats','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Categories','tiki-browse_categories.php',25,'feature_categories','tiki_p_view_category','',0);
@@ -1840,6 +1841,36 @@
   PRIMARY KEY (`name`,`rssVer`)
 ) ENGINE=MyISAM;
 
+DROP TABLE IF EXISTS `tiki_searchindex`;
+CREATE TABLE tiki_searchindex(
+  `searchword` varchar(80) NOT NULL default '',
+  `location` varchar(80) NOT NULL default '',
+  `page` varchar(255) NOT NULL default '',
+  `count` int(11) NOT NULL default '1',
+  `last_update` int(11) NOT NULL default '0',
+  PRIMARY KEY (`searchword`,`location`,`page`(80)),
+  KEY `last_update` (last_update),
+  KEY `location` (location(50), page(200))
+) ENGINE=MyISAM;
+
+-- LRU (last recently used) list for searching parts of words
+DROP TABLE IF EXISTS `tiki_searchsyllable`;
+CREATE TABLE tiki_searchsyllable(
+  `syllable` varchar(80) NOT NULL default '',
+  `lastUsed` int(11) NOT NULL default '0',
+  `lastUpdated` int(11) NOT NULL default '0',
+  PRIMARY KEY (`syllable`),
+  KEY `lastUsed` (`lastUsed`)
+) ENGINE=MyISAM;
+
+-- searchword caching table for search syllables
+DROP TABLE IF EXISTS `tiki_searchwords`;
+CREATE TABLE tiki_searchwords(
+  `syllable` varchar(80) NOT NULL default '',
+  `searchword` varchar(80) NOT NULL default '',
+  PRIMARY KEY (`syllable`,`searchword`)
+) ENGINE=MyISAM;
+
 DROP TABLE IF EXISTS `tiki_search_stats`;
 CREATE TABLE `tiki_search_stats` (
   `term` varchar(50) NOT NULL default '',

------------------------------------------------------------------------
r24545 | sylvieg | 2010-01-19 09:46:04 -0400 (ter, 19 jan 2010) | 1 line

[NEW]forum: option to display in the list topics author avatar or last post user avatar

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 24544)
+++ tiki.sql	(revision 24545)
@@ -862,6 +862,7 @@
   `topics_list_lastpost_title` char(1) default NULL,
   `topics_list_lastpost_avatar` char(1) default NULL,
   `topics_list_author` char(1) default NULL,
+  `topics_list_author_avatar` char(1) default NULL,
   `vote_threads` char(1) default NULL,
   `forum_last_n` int(2) default 0,
   `threadStyle` varchar(100) default NULL,

------------------------------------------------------------------------
r24508 | pascalstjean | 2010-01-18 17:15:25 -0400 (seg, 18 jan 2010) | 1 line

[NEW] Added Blog Property Use_Author in order to control the display of author

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 24507)
+++ tiki.sql	(revision 24508)
@@ -293,6 +293,7 @@
   `heading` text,
   `use_find` char(1) default NULL,
   `use_title` char(1) default NULL,
+  `use_author` char(1) default NULL,
   `add_date` char(1) default NULL,
   `add_poster` char(1) default NULL,
   `allow_comments` char(1) default NULL,

------------------------------------------------------------------------
r24501 | chealer | 2010-01-18 15:40:20 -0400 (seg, 18 jan 2010) | 2 lines

[KIL] Removal of DB Abstraction code (db/, search)
[FIX] colons inside tr blocks

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 24500)
+++ tiki.sql	(revision 24501)
@@ -1244,8 +1244,7 @@
 
 -- when adding new inserts, order commands by position
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Home','./',10,'','','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Search','tiki-searchresults.php',13,'feature_search_fulltext','tiki_p_search','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Search','tiki-searchindex.php',13,'feature_search','tiki_p_search','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Search','tiki-searchresults.php',13,'feature_search','tiki_p_search','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Contact Us','tiki-contact.php',20,'feature_contact,feature_messages','','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Stats','tiki-stats.php',23,'feature_stats','tiki_p_view_stats','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Categories','tiki-browse_categories.php',25,'feature_categories','tiki_p_view_category','',0);
@@ -1839,36 +1838,6 @@
   PRIMARY KEY (`name`,`rssVer`)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS `tiki_searchindex`;
-CREATE TABLE tiki_searchindex(
-  `searchword` varchar(80) NOT NULL default '',
-  `location` varchar(80) NOT NULL default '',
-  `page` varchar(255) NOT NULL default '',
-  `count` int(11) NOT NULL default '1',
-  `last_update` int(11) NOT NULL default '0',
-  PRIMARY KEY (`searchword`,`location`,`page`(80)),
-  KEY `last_update` (last_update),
-  KEY `location` (location(50), page(200))
-) ENGINE=MyISAM;
-
--- LRU (last recently used) list for searching parts of words
-DROP TABLE IF EXISTS `tiki_searchsyllable`;
-CREATE TABLE tiki_searchsyllable(
-  `syllable` varchar(80) NOT NULL default '',
-  `lastUsed` int(11) NOT NULL default '0',
-  `lastUpdated` int(11) NOT NULL default '0',
-  PRIMARY KEY (`syllable`),
-  KEY `lastUsed` (`lastUsed`)
-) ENGINE=MyISAM;
-
--- searchword caching table for search syllables
-DROP TABLE IF EXISTS `tiki_searchwords`;
-CREATE TABLE tiki_searchwords(
-  `syllable` varchar(80) NOT NULL default '',
-  `searchword` varchar(80) NOT NULL default '',
-  PRIMARY KEY (`syllable`,`searchword`)
-) ENGINE=MyISAM;
-
 DROP TABLE IF EXISTS `tiki_search_stats`;
 CREATE TABLE `tiki_search_stats` (
   `term` varchar(50) NOT NULL default '',

------------------------------------------------------------------------
r24481 | marclaporte | 2010-01-18 00:18:08 -0400 (seg, 18 jan 2010) | 1 line

[FIX] avoid 2 errors on clean install

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 24480)
+++ tiki.sql	(revision 24481)
@@ -3552,7 +3552,7 @@
 	   KEY `fileId` (`fileId`)
 );
 
-DROP TABLE `tiki_payment_requests`;
+DROP TABLE IF EXISTS `tiki_payment_requests`;
 CREATE TABLE `tiki_payment_requests` (
 	`paymentRequestId` INT NOT NULL AUTO_INCREMENT,
 	`amount` DECIMAL(7,2) NOT NULL,
@@ -3566,7 +3566,7 @@
 	PRIMARY KEY( `paymentRequestId` )
 );
 
-DROP TABLE `tiki_payment_received`;
+DROP TABLE IF EXISTS `tiki_payment_received`;
 CREATE TABLE `tiki_payment_received` (
 	`paymentReceivedId` INT NOT NULL AUTO_INCREMENT,
 	`paymentRequestId` INT NOT NULL,

------------------------------------------------------------------------
r24435 | pascalstjean | 2010-01-15 23:07:29 -0400 (sex, 15 jan 2010) | 1 line

[MOD] changed main menu List Pages to Pages. Because this is where the new Create page function resides. Therefore it was appropriate to rename the link and make it intuative for new users.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 24434)
+++ tiki.sql	(revision 24435)
@@ -1277,7 +1277,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Last Changes','tiki-lastchanges.php',205,'feature_wiki,feature_lastChanges','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Dump','dump/new.tar',210,'feature_wiki,feature_dump','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Rankings','tiki-wiki_rankings.php',215,'feature_wiki,feature_wiki_rankings','tiki_p_view','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Pages','tiki-listpages.php',220,'feature_wiki,feature_listPages','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Pages','tiki-listpages.php',220,'feature_wiki,feature_listPages','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Orphan Pages','tiki-orphan_pages.php',225,'feature_wiki,feature_listorphanPages','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Sandbox','tiki-editpage.php?page=sandbox',230,'feature_wiki,feature_sandbox','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Multiple Print','tiki-print_pages.php',235,'feature_wiki,feature_wiki_multiprint','tiki_p_view','',0);

------------------------------------------------------------------------
r24419 | pascalstjean | 2010-01-15 18:23:15 -0400 (sex, 15 jan 2010) | 1 line

[NEW] Admin Modules Permission SQL Query

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 24418)
+++ tiki.sql	(revision 24419)
@@ -1375,6 +1375,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_toolbars','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_menu','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_clean_cache','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_modules','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Home','tiki-admin.php',1051,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Live Support','tiki-live_support_admin.php',1055,'feature_live_support','tiki_p_live_support_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Live Support','tiki-live_support_admin.php',1055,'feature_live_support','user_is_operator','',0);
@@ -1383,7 +1384,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Users','tiki-adminusers.php',1070,'','tiki_p_admin_users','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Groups','tiki-admingroups.php',1075,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','External Pages Cache','tiki-list_cache.php',1080,'cachepages','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Modules','tiki-admin_modules.php',1085,'','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Modules','tiki-admin_modules.php',1085,'','tiki_p_admin_modules','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Hotwords','tiki-admin_hotwords.php',1095,'feature_hotwords','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','External Feeds','tiki-admin_rssmodules.php',1100,'','tiki_p_admin_rssmodules','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Menus','tiki-admin_menus.php',1105,'','tiki_p_edit_menu','',0);
@@ -2883,6 +2884,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_view', 'Can view payment requests and details', 'admin', 'payment', NULL, 'payment_feature');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_manual', 'Can enter manual payments', 'admin', 'payment', NULL, 'payment_feature');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_request', 'Can request a payment', 'admin', 'payment', NULL, 'payment_feature');
+INSERT INTO users_permissions (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES ('tiki_p_admin_modules', 'User can Administer Modules', 'registered', 'tiki', NULL, NULL);
 
 
 DROP TABLE IF EXISTS `users_usergroups`;

------------------------------------------------------------------------
r24390 | chealer | 2010-01-15 00:56:19 -0400 (sex, 15 jan 2010) | 1 line

[FIX] duplicate addition of payment permissions

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 24389)
+++ tiki.sql	(revision 24390)
@@ -3575,9 +3575,3 @@
 	PRIMARY KEY(`paymentReceivedId`),
 	KEY `payment_request_ix` (`paymentRequestId`)
 );
-
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_admin', 'Can administer paymenrs', 'admin', 'payment', 'y', 'payment_feature');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_view', 'Can view payment requests and details', 'admin', 'payment', NULL, 'payment_feature');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_manual', 'Can enter manual payments', 'admin', 'payment', NULL, 'payment_feature');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_request', 'Can request a payment', 'admin', 'payment', NULL, 'payment_feature');
-

------------------------------------------------------------------------
r24318 | sylvieg | 2010-01-13 17:05:13 -0400 (qua, 13 jan 2010) | 1 line

[MOD]forum: option not to see the last post title - it is usually the Re:topic title...)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 24317)
+++ tiki.sql	(revision 24318)
@@ -858,6 +858,8 @@
   `topics_list_reads` char(1) default NULL,
   `topics_list_pts` char(1) default NULL,
   `topics_list_lastpost` char(1) default NULL,
+  `topics_list_lastpost_title` char(1) default NULL,
+  `topics_list_lastpost_avatar` char(1) default NULL,
   `topics_list_author` char(1) default NULL,
   `vote_threads` char(1) default NULL,
   `forum_last_n` int(2) default 0,

------------------------------------------------------------------------
r24214 | marclaporte | 2010-01-08 12:39:41 -0400 (sex, 08 jan 2010) | 1 line

[FIX] typo

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 24213)
+++ tiki.sql	(revision 24214)
@@ -2877,7 +2877,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_upload_screencast', 'Can upload screencasts to wiki pages', 'basic', 'registered', NULL, 'feature_wiki_screencasts');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_dsn_query', 'Can execute arbitrary queries on a given DSN', 'admin', 'dsn', NULL, NULL);
 
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_admin', 'Can administer paymenrs', 'admin', 'payment', 'y', 'payment_feature');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_admin', 'Can administer payments', 'admin', 'payment', 'y', 'payment_feature');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_view', 'Can view payment requests and details', 'admin', 'payment', NULL, 'payment_feature');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_manual', 'Can enter manual payments', 'admin', 'payment', NULL, 'payment_feature');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_request', 'Can request a payment', 'admin', 'payment', NULL, 'payment_feature');

------------------------------------------------------------------------
r24207 | lphuberdeau | 2010-01-08 09:47:14 -0400 (sex, 08 jan 2010) | 1 line

[FIX] Forgot drop tables yesterday

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 24206)
+++ tiki.sql	(revision 24207)
@@ -3548,6 +3548,7 @@
 	   KEY `fileId` (`fileId`)
 );
 
+DROP TABLE `tiki_payment_requests`;
 CREATE TABLE `tiki_payment_requests` (
 	`paymentRequestId` INT NOT NULL AUTO_INCREMENT,
 	`amount` DECIMAL(7,2) NOT NULL,
@@ -3561,6 +3562,7 @@
 	PRIMARY KEY( `paymentRequestId` )
 );
 
+DROP TABLE `tiki_payment_received`;
 CREATE TABLE `tiki_payment_received` (
 	`paymentReceivedId` INT NOT NULL AUTO_INCREMENT,
 	`paymentRequestId` INT NOT NULL,

------------------------------------------------------------------------
r24205 | lphuberdeau | 2010-01-07 18:41:40 -0400 (qui, 07 jan 2010) | 1 line

[NEW] Basic payment management

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 24204)
+++ tiki.sql	(revision 24205)
@@ -2877,7 +2877,12 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_upload_screencast', 'Can upload screencasts to wiki pages', 'basic', 'registered', NULL, 'feature_wiki_screencasts');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_dsn_query', 'Can execute arbitrary queries on a given DSN', 'admin', 'dsn', NULL, NULL);
 
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_admin', 'Can administer paymenrs', 'admin', 'payment', 'y', 'payment_feature');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_view', 'Can view payment requests and details', 'admin', 'payment', NULL, 'payment_feature');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_manual', 'Can enter manual payments', 'admin', 'payment', NULL, 'payment_feature');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_request', 'Can request a payment', 'admin', 'payment', NULL, 'payment_feature');
 
+
 DROP TABLE IF EXISTS `users_usergroups`;
 CREATE TABLE `users_usergroups` (
   `userId` int(8) NOT NULL default '0',
@@ -3543,4 +3548,32 @@
 	   KEY `fileId` (`fileId`)
 );
 
+CREATE TABLE `tiki_payment_requests` (
+	`paymentRequestId` INT NOT NULL AUTO_INCREMENT,
+	`amount` DECIMAL(7,2) NOT NULL,
+	`amount_paid` DECIMAL(7,2) NOT NULL DEFAULT 0.0,
+	`currency` CHAR(3) NOT NULL,
+	`request_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
+	`due_date` TIMESTAMP NOT NULL,
+	`cancel_date` TIMESTAMP NULL,
+	`description` VARCHAR(100) NOT NULL,
+	`actions` TEXT,
+	PRIMARY KEY( `paymentRequestId` )
+);
 
+CREATE TABLE `tiki_payment_received` (
+	`paymentReceivedId` INT NOT NULL AUTO_INCREMENT,
+	`paymentRequestId` INT NOT NULL,
+	`payment_date` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
+	`amount` DECIMAL(7,2),
+	`type` VARCHAR(15),
+	`details` TEXT,
+	PRIMARY KEY(`paymentReceivedId`),
+	KEY `payment_request_ix` (`paymentRequestId`)
+);
+
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_admin', 'Can administer paymenrs', 'admin', 'payment', 'y', 'payment_feature');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_view', 'Can view payment requests and details', 'admin', 'payment', NULL, 'payment_feature');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_manual', 'Can enter manual payments', 'admin', 'payment', NULL, 'payment_feature');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_payment_request', 'Can request a payment', 'admin', 'payment', NULL, 'payment_feature');
+

------------------------------------------------------------------------
r24167 | sylvieg | 2010-01-06 13:02:15 -0400 (qua, 06 jan 2010) | 1 line

[NEW]forum: option to display in forum view the number of attachements of all the threads of a topic

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 24166)
+++ tiki.sql	(revision 24167)
@@ -832,6 +832,7 @@
   `att_store` varchar(4) default NULL,
   `att_store_dir` varchar(250) default NULL,
   `att_max_size` int(12) default NULL,
+  `att_list_nb` char(1) default NULL,
   `ui_level` char(1) default NULL,
   `forum_password` varchar(32) default NULL,
   `forum_use_password` char(1) default NULL,

------------------------------------------------------------------------
r24142 | sylvieg | 2010-01-04 15:21:34 -0400 (seg, 04 jan 2010) | 1 line

[MOD]tracker: new perm to be able to revote ratings

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 24141)
+++ tiki.sql	(revision 24142)
@@ -2759,6 +2759,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_modify_tracker_items_closed', 'Can change tracker closed items', 'registered', 'trackers', NULL, 'feature_trackers');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tracker_view_ratings', 'Can view rating result for tracker items', 'basic', 'trackers', NULL, 'feature_trackers');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tracker_vote_ratings', 'Can vote a rating for tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tracker_revote_ratings', 'Can re-vote a rating for tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_trackers', 'Can view trackers', 'basic', 'trackers', NULL, 'feature_trackers');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_trackers_closed', 'Can view trackers closed items', 'registered', 'trackers', NULL, 'feature_trackers');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_trackers_pending', 'Can view trackers pending items', 'editors', 'trackers', NULL, 'feature_trackers');

------------------------------------------------------------------------
r24070 | lphuberdeau | 2009-12-28 13:46:06 -0400 (seg, 28 dez 2009) | 1 line

[NEW] Mozilla upstream. Wiki page keyword manager

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 24069)
+++ tiki.sql	(revision 24070)
@@ -1568,6 +1568,7 @@
   `wysiwyg` char(1) default NULL,
   `wiki_authors_style` varchar(20) default '',
   `comments_enabled` char(1) default NULL,
+  `keywords` TEXT, 
   PRIMARY KEY (`page_id`),
   UNIQUE KEY `pageName` (`pageName`),
   KEY `data` (`data`(255)),

------------------------------------------------------------------------
r23965 | sylvieg | 2009-12-18 20:14:23 -0400 (sex, 18 dez 2009) | 1 line

dbv sync

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 23964)
+++ tiki.sql	(revision 23965)
@@ -2962,7 +2962,7 @@
 
 INSERT INTO tiki_integrator_rules VALUES ('1','1','1','.*<body[^>]*?>(.*?)</body.*','\1','y','n','i','y','Extract code between <body> and </body> tags');
 INSERT INTO tiki_integrator_rules VALUES ('2','1','2','img src=(\"|\')(?!http://)','img src=\1{path}/','y','n','i','y','Fix image paths');
-INSERT INTO tiki_integrator_rules VALUES ('3','1','3','href=(\"|\')(?!(#|(http|ftp)://))','href=\1tiki-integrator.php?repID={repID}&file=','y','n','i','y','Replace internal links to integrator. Don\'t touch an external link.');
+INSERT INTO tiki_integrator_rules VALUES ('3','1','3','href=(\"|\')(?!(#|(http|ftp)://))','href=\1tiki-integrator.php?repID={repID}&file=','y','n','i','y','Replace internal links to integrator. Don not touch an external link.');
 
 -- Translated objects table
 DROP TABLE IF EXISTS `tiki_translated_objects`;

------------------------------------------------------------------------
r23919 | sylvieg | 2009-12-16 13:50:23 -0400 (qua, 16 dez 2009) | 1 line

[MOD]fgal: display nb backlinks in fgal

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 23918)
+++ tiki.sql	(revision 23919)
@@ -736,6 +736,7 @@
   `size` int(14) default NULL,
   `wiki_syntax` varchar(200) default NULL,
   `backlinkPerms` char(1) default 'n',
+  `show_backlinks` char(1) default NULL,
   PRIMARY KEY (`galleryId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r23877 | lphuberdeau | 2009-12-14 13:36:53 -0400 (seg, 14 dez 2009) | 1 line

[NEW] Perspective UI (initial)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 23876)
+++ tiki.sql	(revision 23877)
@@ -2851,6 +2851,9 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_remove_object', 'Can remove objects from the category', 'editors', 'category', NULL, 'feature_categories');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_create_category', 'Can create new categories', 'admin', 'category', NULL, 'feature_categories');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_perspective_view', 'Can view the perspective', 'basic', 'perspective', NULL, 'feature_perspective');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_perspective_edit', 'Can edit the perspective', 'basic', 'perspective', NULL, 'feature_perspective');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_perspective_create', 'Can create a perspective', 'basic', 'perspective', NULL, 'feature_perspective');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_perspective_admin', 'Can admin perspectives', 'admin', 'perspective', 'y', 'feature_perspective');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_group_view', 'Can view the group', 'basic', 'group', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_group_view_members', 'Can view the group members', 'basic', 'group', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_group_add_member', 'Can add group members', 'admin', 'group', NULL, NULL);

------------------------------------------------------------------------
r23810 | lphuberdeau | 2009-12-10 14:47:16 -0400 (qui, 10 dez 2009) | 1 line

[MOD] Allow to use wiki pages for dynamic content

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 23809)
+++ tiki.sql	(revision 23810)
@@ -1647,6 +1647,7 @@
 CREATE TABLE `tiki_programmed_content` (
   `pId` int(8) NOT NULL auto_increment,
   `contentId` int(8) NOT NULL default '0',
+  `content_type` VARCHAR( 20 ) NOT NULL DEFAULT 'static',
   `publishDate` int(14) NOT NULL default '0',
   `data` text,
   PRIMARY KEY (`pId`)

------------------------------------------------------------------------
r23771 | sylvieg | 2009-12-09 12:30:57 -0400 (qua, 09 dez 2009) | 1 line

[FIX]fgal rss: need to limit the cache name for a long list og galleries

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 23770)
+++ tiki.sql	(revision 23771)
@@ -1824,7 +1824,7 @@
 
 DROP TABLE IF EXISTS `tiki_rss_feeds`;
 CREATE TABLE `tiki_rss_feeds` (
-  `name` varchar(30) NOT NULL default '',
+  `name` varchar(60) NOT NULL default '',
   `rssVer` char(1) NOT NULL default '1',
   `refresh` int(8) default '300',
   `lastUpdated` int(14) default NULL,

------------------------------------------------------------------------
r23759 | sylvieg | 2009-12-08 19:15:55 -0400 (ter, 08 dez 2009) | 1 line

[NEW]fgal: new option for a fgal: after fgal perms check, file perms check - check if the objects using the file are viewable - if None of them are viewable, the file can bot be seen

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 23758)
+++ tiki.sql	(revision 23759)
@@ -735,6 +735,7 @@
   `quota` int(8) default 0,
   `size` int(14) default NULL,
   `wiki_syntax` varchar(200) default NULL,
+  `backlinkPerms` char(1) default 'n',
   PRIMARY KEY (`galleryId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r23675 | sylvieg | 2009-12-04 16:45:56 -0400 (sex, 04 dez 2009) | 1 line

[NEW]newletter: perm to see the archives different than perm to subscribe

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 23674)
+++ tiki.sql	(revision 23675)
@@ -2723,6 +2723,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_send_newsletters', 'Can send newsletters', 'editors', 'newsletters', NULL, 'feature_newsletters');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_subscribe_email', 'Can subscribe any email to newsletters', 'editors', 'newsletters', NULL, 'feature_newsletters');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_subscribe_newsletters', 'Can subscribe to newsletters', 'basic', 'newsletters', NULL, 'feature_newsletters');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_newsletter', 'Can view the archive of a newsletters', 'basic', 'newsletters', NULL, 'feature_newsletters');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_list_newsletters', 'Can list newsletters', 'basic', 'newsletters', NULL, 'feature_newsletters');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_polls', 'Can admin polls', 'admin', 'polls', 'y', 'feature_polls');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_poll_results', 'Can view poll results', 'basic', 'polls', NULL, 'feature_polls');

------------------------------------------------------------------------
r23669 | sylvieg | 2009-12-04 12:08:25 -0400 (sex, 04 dez 2009) | 1 line

[MRG] Automatic merge, branches/4.x 23636 to 23661

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 23668)
+++ tiki.sql	(revision 23669)
@@ -734,6 +734,7 @@
   `default_view` varchar(20) default NULL,
   `quota` int(8) default 0,
   `size` int(14) default NULL,
+  `wiki_syntax` varchar(200) default NULL,
   PRIMARY KEY (`galleryId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r23646 | lphuberdeau | 2009-12-03 13:38:27 -0400 (qui, 03 dez 2009) | 1 line

[FIX] Forgot to add this field a few weeks ago.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 23645)
+++ tiki.sql	(revision 23646)
@@ -552,6 +552,7 @@
 DROP TABLE IF EXISTS `tiki_content_templates`;
 CREATE TABLE `tiki_content_templates` (
   `templateId` int(10) NOT NULL auto_increment,
+  `template_type` VARCHAR( 20 ) NOT NULL DEFAULT 'static',
   `content` longblob,
   `name` varchar(200) default NULL,
   `created` int(14) default NULL,

------------------------------------------------------------------------
r23635 | jonnybradley | 2009-12-02 15:21:27 -0400 (qua, 02 dez 2009) | 1 line

[FIX] Remove duplicated insert statement

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 23634)
+++ tiki.sql	(revision 23635)
@@ -3328,7 +3328,6 @@
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-browse_image.php\\?imageId=(\\d+)', 'browseimage$1', 'image', 'feature_galleries');
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-directory_browse.php\\?parent=(\\d+)', 'directory$1', 'directory', 'feature_directory');
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-view_faq.php\\?faqId=(\\d+)', 'faq$1', 'faq', 'feature_faqs');
-INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-list_file_gallery.php\\?galleryId=(\\d+)', 'file$1', 'file', 'feature_file_galleries');
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-download_file.php\\?fileId=(\\d+)', 'dl$1', 'file', 'feature_file_galleries');
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-download_file.php\\?fileId=(\\d+)&amp;thumbnail', 'thumbnail$1', 'thumbnail', 'feature_file_galleries');
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-download_file.php\\?fileId=(\\d+)&amp;display', 'display$1', 'display', 'feature_file_galleries');

------------------------------------------------------------------------
r23539 | lphuberdeau | 2009-11-26 14:16:53 -0400 (qui, 26 nov 2009) | 1 line

[NEW] Mozilla upstream. Allow dynamic language variables to be language specific.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 23538)
+++ tiki.sql	(revision 23539)
@@ -638,7 +638,7 @@
 CREATE TABLE `tiki_dynamic_variables` (
   `name` varchar(40) NOT NULL,
   `data` text,
-  PRIMARY KEY (`name`)
+  `lang` VARCHAR(16) NULL
 );
 
 DROP TABLE IF EXISTS `tiki_extwiki`;

------------------------------------------------------------------------
r23515 | jonnybradley | 2009-11-25 15:55:20 -0400 (qua, 25 nov 2009) | 1 line

[MRG] Automatic merge, branches/4.x 23509 to 23514

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 23514)
+++ tiki.sql	(revision 23515)
@@ -1563,6 +1563,7 @@
   `created` int(14),
   `wysiwyg` char(1) default NULL,
   `wiki_authors_style` varchar(20) default '',
+  `comments_enabled` char(1) default NULL,
   PRIMARY KEY (`page_id`),
   UNIQUE KEY `pageName` (`pageName`),
   KEY `data` (`data`(255)),

------------------------------------------------------------------------
r23494 | sylvieg | 2009-11-24 17:48:44 -0400 (ter, 24 nov 2009) | 1 line

[NEW]fgal: backlink to files for wiki page (only the last version) + blog: warning when you want to delete a file that has backlinks

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 23493)
+++ tiki.sql	(revision 23494)
@@ -3465,7 +3465,7 @@
   `page_name` varchar(160) NOT NULL,
   `score` float default NULL,
   PRIMARY KEY  (`list_type_id`,`page_name`)
-) ENGINE=MyISAM DEFAULT CHARSET=latin1;
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_page_list_types`;
 CREATE TABLE IF NOT EXISTS `tiki_page_list_types` (
@@ -3475,7 +3475,7 @@
   `description` varchar(200) default NULL,
   PRIMARY KEY  (`name`),
   UNIQUE KEY `id` (`id`)
-) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_auth_tokens`;
 CREATE TABLE `tiki_auth_tokens` (
@@ -3489,7 +3489,6 @@
 	PRIMARY KEY( `tokenId` ),
 	KEY `tiki_auth_tokens_token` (`token`)
 );
--- --------------------------------------------------------
 
 DROP TABLE IF EXISTS `metrics_assigned`;
 CREATE TABLE `metrics_assigned` (
@@ -3524,3 +3523,12 @@
 	UNIQUE KEY `tab_name` (`tab_name`)
 );
 
+DROP TABLE IF EXISTS `tiki_file_backlinks`;
+CREATE TABLE `tiki_file_backlinks` (
+	   `fileId` int(14) NOT NULL,
+	   `objectId` int(12) NOT NULL,
+	   KEY `objectId` (`objectId`),
+	   KEY `fileId` (`fileId`)
+);
+
+

------------------------------------------------------------------------
r23481 | lphuberdeau | 2009-11-24 11:19:58 -0400 (ter, 24 nov 2009) | 1 line

[NEW] Mozilla upstream. Metrics dashboard.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 23480)
+++ tiki.sql	(revision 23481)
@@ -2862,6 +2862,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_list_videos', 'Can list kaltura entries', 'basic', 'kaltura', NULL, 'feature_kaltura');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_videos', 'Can view kaltura entry', 'basic', 'kaltura', NULL, 'feature_kaltura');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_upload_screencast', 'Can upload screencasts to wiki pages', 'basic', 'registered', NULL, 'feature_wiki_screencasts');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_dsn_query', 'Can execute arbitrary queries on a given DSN', 'admin', 'dsn', NULL, NULL);
 
 
 DROP TABLE IF EXISTS `users_usergroups`;
@@ -3489,3 +3490,37 @@
 	KEY `tiki_auth_tokens_token` (`token`)
 );
 -- --------------------------------------------------------
+
+DROP TABLE IF EXISTS `metrics_assigned`;
+CREATE TABLE `metrics_assigned` (
+	`assigned_id` int(11) NOT NULL AUTO_INCREMENT,
+	`metric_id` int(11) NOT NULL,
+	`tab_id` int(11) NOT NULL,
+	PRIMARY KEY (`assigned_id`),
+	KEY `metric_id` (`metric_id`),
+	KEY `tab_id` (`tab_id`)
+);
+
+DROP TABLE IF EXISTS `metrics_metric`;
+CREATE TABLE `metrics_metric` (
+	`metric_id` int(11) NOT NULL AUTO_INCREMENT,
+	`metric_name` varchar(255) NOT NULL,
+	`metric_range` varchar(1) NOT NULL DEFAULT '+' COMMENT 'values: + (daily), @ (monthly&weekly), - (weekly)',
+	`metric_datatype` varchar(1) NOT NULL DEFAULT 'i' COMMENT 'values: i(nteger), %(percentage), f(loat), L(ist)',
+	`metric_lastupdate` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
+	`metric_query` text,
+	`metric_dsn` VARCHAR(200) NOT NULL DEFAULT 'local',
+	PRIMARY KEY (`metric_id`),
+	UNIQUE KEY `metric_name` (`metric_name`)
+);
+
+DROP TABLE IF EXISTS `metrics_tab`;
+CREATE TABLE `metrics_tab` (
+	`tab_id` int(11) NOT NULL AUTO_INCREMENT,
+	`tab_name` varchar(255) NOT NULL,
+	`tab_order` int(11) NOT NULL DEFAULT '0',
+	`tab_content` longtext NOT NULL,
+	PRIMARY KEY (`tab_id`),
+	UNIQUE KEY `tab_name` (`tab_name`)
+);
+

------------------------------------------------------------------------
r23403 | lphuberdeau | 2009-11-20 11:12:40 -0400 (sex, 20 nov 2009) | 1 line

[FIX] Poll filter never worked correctly, causing thousands of rows to be scanned on poll-intensive sites. Added an index to speed up the search as well.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 23402)
+++ tiki.sql	(revision 23403)
@@ -1617,6 +1617,7 @@
   `voteConsiderationSpan` int(4) default 0,
   PRIMARY KEY (`pollId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
+ALTER TABLE tiki_polls ADD INDEX tiki_poll_lookup ( active , title );
 
 DROP TABLE IF EXISTS `tiki_preferences`;
 CREATE TABLE `tiki_preferences` (

------------------------------------------------------------------------
r23363 | sylvieg | 2009-11-18 12:33:31 -0400 (qua, 18 nov 2009) | 1 line

[MOD]sefurl: some sefurl in CATEGORY

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 23362)
+++ tiki.sql	(revision 23363)
@@ -3368,6 +3368,8 @@
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-mobile.php', 'mobile', '', 'feature_mobile', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-sheets.php', 'sheets', '', 'feature_sheet', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-view_tracker_item.php\\?trackerId=(\\d+)\\&itemId=(\\d+)', 'item$2', 'trackeritem', 'feature_trackers', 200);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-view_tracker_item.php\\?itemId=(\\d+)', 'item$1', 'trackeritem', 'feature_trackers', 200);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-list_file_gallery.php\\?galleryId=(\\d+)', 'file$1', 'file gallery', 'feature_file_galleries', 200);
  
 UPDATE tiki_menu_options SET icon = 'icon-configuration48x48' WHERE name = 'Admin';
 UPDATE tiki_menu_options SET icon = 'xfce4-appfinder48x48' WHERE name = 'Search';

------------------------------------------------------------------------
r23282 | sylvieg | 2009-11-14 08:50:23 -0400 (sÃ¡b, 14 nov 2009) | 1 line

[MRG] Automatic merge, branches/4.x 23227 to 23279

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 23281)
+++ tiki.sql	(revision 23282)
@@ -1479,7 +1479,7 @@
   KEY `moduleId` (`moduleId`)
 ) ENGINE=MyISAM;
 
-INSERT INTO tiki_modules (name,position,ord,cache_time,params,groups) VALUES ('Application_Menu','l',30,0,'flip=y','a:1:{i:0;s:10:"Registered";}');
+INSERT INTO tiki_modules (name,position,ord,cache_time,params,groups) VALUES ('Application Menu','l',30,0,'flip=y','a:1:{i:0;s:10:"Registered";}');
 
 DROP TABLE IF EXISTS `tiki_newsletter_subscriptions`;
 CREATE TABLE `tiki_newsletter_subscriptions` (
@@ -2345,7 +2345,7 @@
   PRIMARY KEY (`name`)
 ) ENGINE=MyISAM;
 
-INSERT INTO tiki_user_modules (name, title, data, parse) VALUES ('Application_Menu', 'Menu', '{menu id=42}', 'n');
+INSERT INTO tiki_user_modules (name, title, data, parse) VALUES ('Application Menu', 'Menu', '{menu id=42}', 'n');
 
 DROP TABLE IF EXISTS `tiki_user_notes`;
 CREATE TABLE `tiki_user_notes` (

------------------------------------------------------------------------
r23228 | lphuberdeau | 2009-11-13 09:31:34 -0400 (sex, 13 nov 2009) | 1 line

[MRG] Automatic merge, branches/4.x 23155 to 23227

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 23227)
+++ tiki.sql	(revision 23228)
@@ -1479,7 +1479,7 @@
   KEY `moduleId` (`moduleId`)
 ) ENGINE=MyISAM;
 
-INSERT INTO tiki_modules (name,position,ord,cache_time,params,groups) VALUES ('mnu_application_menu','l',30,0,'flip=y','a:1:{i:0;s:10:"Registered";}');
+INSERT INTO tiki_modules (name,position,ord,cache_time,params,groups) VALUES ('Application_Menu','l',30,0,'flip=y','a:1:{i:0;s:10:"Registered";}');
 
 DROP TABLE IF EXISTS `tiki_newsletter_subscriptions`;
 CREATE TABLE `tiki_newsletter_subscriptions` (
@@ -2345,7 +2345,7 @@
   PRIMARY KEY (`name`)
 ) ENGINE=MyISAM;
 
-INSERT INTO tiki_user_modules (name, title, data, parse) VALUES ('mnu_application_menu', 'Menu', '{menu id=42}', 'n');
+INSERT INTO tiki_user_modules (name, title, data, parse) VALUES ('Application_Menu', 'Menu', '{menu id=42}', 'n');
 
 DROP TABLE IF EXISTS `tiki_user_notes`;
 CREATE TABLE `tiki_user_notes` (

------------------------------------------------------------------------
r23123 | lphuberdeau | 2009-11-12 11:52:10 -0400 (qui, 12 nov 2009) | 1 line

[MRG] Automatic merge, branches/4.x 23047 to 23122

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 23122)
+++ tiki.sql	(revision 23123)
@@ -732,6 +732,7 @@
   `show_slideshow` char(1) default NULL,
   `default_view` varchar(20) default NULL,
   `quota` int(8) default 0,
+  `size` int(14) default NULL,
   PRIMARY KEY (`galleryId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r22989 | sylvieg | 2009-11-09 12:54:41 -0400 (seg, 09 nov 2009) | 1 line

[MRG] Automatic merge, branches/4.x 22939 to 22987

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 22988)
+++ tiki.sql	(revision 22989)
@@ -94,7 +94,7 @@
   `actionId` int(8) NOT NULL,
   `name` varchar(40) NOT NULL,
   `value` text,
-  KEY `actionIDIndex` (`actionId`),
+  KEY `actionId` (`actionId`),
   KEY `nameValue` (`name`, `value`(200))
 ) ENGINE=MyISAM;
 
@@ -3285,7 +3285,7 @@
   `objectType` varchar( 20 ) NOT NULL default '',
   `objectId` varchar(10) NOT NULL default '',
   `displayEachuser` char( 1 ) default NULL ,
-  PRIMARY KEY ( `objectType`, `objectId` )
+  PRIMARY KEY (`groupName`, `objectType`, `objectId` )
 ) ENGINE=MyISAM ;
 
 DROP TABLE IF EXISTS `tiki_sent_newsletters_files`;

------------------------------------------------------------------------
r22937 | lphuberdeau | 2009-11-06 09:06:46 -0400 (sex, 06 nov 2009) | 1 line

[FIX] Forgot to add to tiki.sql

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 22936)
+++ tiki.sql	(revision 22937)
@@ -3453,6 +3453,7 @@
 	KEY `transition_lookup` (`type`, `from`)
 ) ENGINE=MyISAM;
 
+DROP TABLE IF EXISTS `tiki_page_lists`;
 CREATE TABLE IF NOT EXISTS `tiki_page_lists` (
   `list_type_id` int(8) unsigned NOT NULL,
   `priority` int(8) unsigned NOT NULL,
@@ -3461,6 +3462,7 @@
   PRIMARY KEY  (`list_type_id`,`page_name`)
 ) ENGINE=MyISAM DEFAULT CHARSET=latin1;
 
+DROP TABLE IF EXISTS `tiki_page_list_types`;
 CREATE TABLE IF NOT EXISTS `tiki_page_list_types` (
   `id` int(8) unsigned NOT NULL auto_increment,
   `name` varchar(40) NOT NULL,
@@ -3470,3 +3472,16 @@
   UNIQUE KEY `id` (`id`)
 ) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;
 
+DROP TABLE IF EXISTS `tiki_auth_tokens`;
+CREATE TABLE `tiki_auth_tokens` (
+	`tokenId` INT NOT NULL AUTO_INCREMENT,
+	`creation` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
+	`timeout` INT NOT NULL DEFAULT 0,
+	`token` CHAR(32),
+	`entry` VARCHAR(50),
+	`parameters` VARCHAR(255),
+	`groups` VARCHAR(255),
+	PRIMARY KEY( `tokenId` ),
+	KEY `tiki_auth_tokens_token` (`token`)
+);
+-- --------------------------------------------------------

------------------------------------------------------------------------
r22845 | nagendra016 | 2009-11-03 15:04:01 -0400 (ter, 03 nov 2009) | 1 line

[FIX]Broken Kaltura upload link on clean install

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 22844)
+++ tiki.sql	(revision 22845)
@@ -1413,9 +1413,9 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_poll_comments','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_faq_comments','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Contribution','tiki-admin_contribution.php',1265,'feature_contribution','tiki_p_admin_contribution','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 's', 'Kaltura', 'tiki-list_kaltura_entries.php', 950, 'feature_kaltura', 'tiki_p_admin | tiki_p_admin_kaltura | tiki_p_list_videos', '', 0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 's', 'Kaltura Video', 'tiki-list_kaltura_entries.php', 950, 'feature_kaltura', 'tiki_p_admin | tiki_p_admin_kaltura | tiki_p_list_videos', '', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'o', 'List Entries', 'tiki-list_kaltura_entries.php', 952, 'feature_kaltura', 'tiki_p_admin | tiki_p_admin_kaltura | tiki_p_list_videos', '', 0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'o', 'Upload Media', 'tiki-kaltura_video.php', 954, 'feature_kaltura', 'tiki_p_admin | tiki_p_admin_kaltura | tiki_p_upload_videos', '', 0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'o', 'Upload Media', 'tiki-kaltura_upload.php', 954, 'feature_kaltura', 'tiki_p_admin | tiki_p_admin_kaltura | tiki_p_upload_videos', '', 0);
 
 
 

------------------------------------------------------------------------
r22802 | marclaporte | 2009-11-02 20:54:09 -0400 (seg, 02 nov 2009) | 1 line

[KIL] Remove Workspace-Helper related files, as explained at http://article.gmane.org/gmane.comp.cms.tiki.devel/14261 Hope it is completed and added to Tiki5 or Tiki4.1    Workspace withouth helper, are working fine

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 22801)
+++ tiki.sql	(revision 22802)
@@ -1345,9 +1345,6 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_list_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Send Newsletters','tiki-send_newsletters.php',905,'feature_newsletters','tiki_p_send_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Newsletters','tiki-admin_newsletters.php',910,'feature_newsletters','tiki_p_admin_newsletters','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Workspaces','tiki-my-workspaces.php',920,'feature_workspaces','tiki_p_ws_view','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','My Workspaces','tiki-my-workspaces.php',925,'feature_workspaces','tiki_p_ws_view','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Manage Workspaces','tiki-manage-workspaces.php',935,'feature_workspaces','tiki_p_admin_ws.php','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_categories','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_banners','',0);
@@ -1416,7 +1413,6 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_poll_comments','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_faq_comments','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Contribution','tiki-admin_contribution.php',1265,'feature_contribution','tiki_p_admin_contribution','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Workspaces','tiki-admin.php?page=workspaces',1270,'feature_workspaces','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 's', 'Kaltura', 'tiki-list_kaltura_entries.php', 950, 'feature_kaltura', 'tiki_p_admin | tiki_p_admin_kaltura | tiki_p_list_videos', '', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'o', 'List Entries', 'tiki-list_kaltura_entries.php', 952, 'feature_kaltura', 'tiki_p_admin | tiki_p_admin_kaltura | tiki_p_list_videos', '', 0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'o', 'Upload Media', 'tiki-kaltura_video.php', 954, 'feature_kaltura', 'tiki_p_admin | tiki_p_admin_kaltura | tiki_p_upload_videos', '', 0);
@@ -2854,13 +2850,6 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_group_join', 'Can join or leave the group', 'admin', 'group', NULL, NULL);
 
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_trigger_transition', 'Can trigger the transition between two states', 'admin', 'transition', NULL, 'feature_group_transition,feature_category_transition');
-INSERT INTO users_permissions (`permName`, `permDesc`, level, type, admin) VALUES ('tiki_p_ws_admin', 'Can admin all ws', 'globaladmin', 'ws', 'y');
-INSERT INTO users_permissions (`permName`, `permDesc`, level, type) VALUES ('tiki_p_ws_addws', 'Can add ws', 'globaladmin', 'ws');
-INSERT INTO users_permissions (`permName`, `permDesc`, level, type) VALUES ('tiki_p_ws_removews', 'Can remove ws', 'globaladmin', 'ws');
-INSERT INTO users_permissions (`permName`, `permDesc`, level, type) VALUES ('tiki_p_ws_adminws', 'Can admin a single ws', 'admin', 'ws');
-INSERT INTO users_permissions (`permName`, `permDesc`, level, type) VALUES ('tiki_p_ws_adminresources', 'Can admin resources into single ws', 'admin', 'ws');
-INSERT INTO users_permissions (`permName`, `permDesc`, level, type) VALUES ('tiki_p_ws_admingroups', 'Can admin groups in a single ws', 'admin', 'ws');
-INSERT INTO users_permissions (`permName`, `permDesc`, level, type) VALUES ('tiki_p_ws_view', 'Can view a single ws', 'registered', 'ws');
 
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_kaltura', 'Can admin kaltura feature', 'admin', 'kaltura', 'y', 'feature_kaltura');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_upload_videos', 'Can upload video on kaltura server', 'editors', 'kaltura', NULL, 'feature_kaltura');

------------------------------------------------------------------------
r22728 | sylvieg | 2009-10-28 19:23:08 -0400 (qua, 28 out 2009) | 1 line

[MOD]fgal quota: alllows to limit the volume that is uploaded globally to the fgals or locally to a fgal

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 22727)
+++ tiki.sql	(revision 22728)
@@ -731,6 +731,7 @@
   `show_path` char(1) default NULL,
   `show_slideshow` char(1) default NULL,
   `default_view` varchar(20) default NULL,
+  `quota` int(8) default 0,
   PRIMARY KEY (`galleryId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r22609 | sylvieg | 2009-10-23 09:37:15 -0400 (sex, 23 out 2009) | 1 line

[FIX]report: unused columnn needs a default

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 22608)
+++ tiki.sql	(revision 22609)
@@ -3419,7 +3419,7 @@
   `interval` varchar(20) NOT NULL,
   `view` varchar(8) NOT NULL,
   `type` varchar(5) NOT NULL,
-  `time_to_send` datetime NOT NULL,
+  `time_to_send` datetime NULL default 0,
   `always_email` tinyint(1) NOT NULL,
   `last_report` datetime NOT NULL,
   PRIMARY KEY (`id`)

------------------------------------------------------------------------
r22599 | chealer | 2009-10-23 02:59:51 -0400 (sex, 23 out 2009) | 2 lines

bump tiki_user_bookmarks_url.name from varchar(30) to varchar(200)


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 22598)
+++ tiki.sql	(revision 22599)
@@ -2295,7 +2295,7 @@
 DROP TABLE IF EXISTS `tiki_user_bookmarks_urls`;
 CREATE TABLE `tiki_user_bookmarks_urls` (
   `urlId` int(12) NOT NULL auto_increment,
-  `name` varchar(30) default NULL,
+  `name` varchar(200) default NULL,
   `url` varchar(250) default NULL,
   `data` longblob,
   `lastUpdated` int(14) default NULL,

------------------------------------------------------------------------
r22525 | lphuberdeau | 2009-10-21 12:23:01 -0400 (qua, 21 out 2009) | 1 line

[NEW] Page list feature for l10n dashboard (upstream from Mozilla)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 22524)
+++ tiki.sql	(revision 22525)
@@ -3463,3 +3463,20 @@
 	KEY `transition_lookup` (`type`, `from`)
 ) ENGINE=MyISAM;
 
+CREATE TABLE IF NOT EXISTS `tiki_page_lists` (
+  `list_type_id` int(8) unsigned NOT NULL,
+  `priority` int(8) unsigned NOT NULL,
+  `page_name` varchar(160) NOT NULL,
+  `score` float default NULL,
+  PRIMARY KEY  (`list_type_id`,`page_name`)
+) ENGINE=MyISAM DEFAULT CHARSET=latin1;
+
+CREATE TABLE IF NOT EXISTS `tiki_page_list_types` (
+  `id` int(8) unsigned NOT NULL auto_increment,
+  `name` varchar(40) NOT NULL,
+  `title` varchar(160) default NULL,
+  `description` varchar(200) default NULL,
+  PRIMARY KEY  (`name`),
+  UNIQUE KEY `id` (`id`)
+) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;
+

------------------------------------------------------------------------
r22503 | sylvieg | 2009-10-20 17:42:59 -0400 (ter, 20 out 2009) | 1 line

[FIX]sefurl : for trackeritem

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 22502)
+++ tiki.sql	(revision 22503)
@@ -3376,7 +3376,8 @@
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-list_trackers.php', 'trackers', '', 'feature_trackers', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-mobile.php', 'mobile', '', 'feature_mobile', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-sheets.php', 'sheets', '', 'feature_sheet', 200);
-
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-view_tracker_item.php\\?trackerId=(\\d+)\\&itemId=(\\d+)', 'item$2', 'trackeritem', 'feature_trackers', 200);
+ 
 UPDATE tiki_menu_options SET icon = 'icon-configuration48x48' WHERE name = 'Admin';
 UPDATE tiki_menu_options SET icon = 'xfce4-appfinder48x48' WHERE name = 'Search';
 UPDATE tiki_menu_options SET icon = 'wikipages48x48' WHERE name = 'Wiki';

------------------------------------------------------------------------
r22501 | lphuberdeau | 2009-10-20 16:51:42 -0400 (ter, 20 out 2009) | 1 line

[NEW] Upstreaming screencast feature from Mozilla, UI issues remaining

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 22500)
+++ tiki.sql	(revision 22501)
@@ -2869,6 +2869,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_download_videos', 'Can download kaltura entry', 'registered', 'kaltura', NULL, 'feature_kaltura');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_list_videos', 'Can list kaltura entries', 'basic', 'kaltura', NULL, 'feature_kaltura');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_videos', 'Can view kaltura entry', 'basic', 'kaltura', NULL, 'feature_kaltura');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_upload_screencast', 'Can upload screencasts to wiki pages', 'basic', 'registered', NULL, 'feature_wiki_screencasts');
 
 
 DROP TABLE IF EXISTS `users_usergroups`;

------------------------------------------------------------------------
r22494 | sylvieg | 2009-10-20 14:12:04 -0400 (ter, 20 out 2009) | 1 line

[MOD]faq: last validated faq questions

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 22493)
+++ tiki.sql	(revision 22494)
@@ -656,10 +656,12 @@
   `position` int(4) default NULL,
   `question` text,
   `answer` text,
+  `created` int(14) default NULL,
   PRIMARY KEY (`questionId`),
   KEY `faqId` (`faqId`),
   KEY `question` (question(255)),
   KEY `answer` (answer(255)),
+  KEY `created` (`created`),
   FULLTEXT KEY `ft` (question,answer)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r22470 | jonnybradley | 2009-10-20 10:22:24 -0400 (ter, 20 out 2009) | 2 lines

[FIX] Bigger user prefs value size (so it's now the same as tiki_prefs)
Was preventing group selection being saved on object perms

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 22469)
+++ tiki.sql	(revision 22470)
@@ -2374,7 +2374,7 @@
 CREATE TABLE `tiki_user_preferences` (
   `user` varchar(200) NOT NULL default '',
   `prefName` varchar(40) NOT NULL default '',
-  `value` varchar(250) default NULL,
+  `value` TEXT,
   PRIMARY KEY (`user`,`prefName`)
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r22426 | jonnybradley | 2009-10-19 13:59:13 -0400 (seg, 19 out 2009) | 1 line

[MOD] Moving a few perms that were not feature related and on their own into the tiki (or user)  perm "type"

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 22425)
+++ tiki.sql	(revision 22426)
@@ -2662,8 +2662,8 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_detach_translation', 'Can remove association between two pages in a translation set', 'registered', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_cookies', 'Can admin cookies', 'editors', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_languages', 'Can edit translations and create new languages', 'editors', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_menu', 'Can edit menu', 'admin', 'menus', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_menu_option', 'Can edit menu option', 'admin', 'menus', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_menu', 'Can edit menu', 'admin', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_menu_option', 'Can edit menu option', 'admin', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_templates', 'Can edit site templates', 'admin', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_search', 'Can search', 'basic', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_site_report', 'Can report a link to the webmaster', 'basic', 'tiki', NULL, NULL);
@@ -2724,7 +2724,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_poll_results', 'Can view poll results', 'basic', 'polls', NULL, 'feature_polls');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_vote_poll', 'Can vote polls', 'basic', 'polls', NULL, 'feature_polls');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_poll_voters', 'Can view poll voters', 'basic', 'polls', NULL, 'feature_polls');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_toolbars', 'Can admin toolbars', 'admin', 'toolbars', 'y', NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_toolbars', 'Can admin toolbars', 'admin', 'tiki', 'y', NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_quizzes', 'Can admin quizzes', 'editors', 'quizzes', 'y', 'feature_quizzes');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_take_quiz', 'Can take quizzes', 'basic', 'quizzes', NULL, 'feature_quizzes');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_quiz_stats', 'Can view quiz stats', 'basic', 'quizzes', NULL, 'feature_quizzes');
@@ -2815,7 +2815,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_use_content_templates', 'Can use content templates', 'registered', 'content templates', NULL, 'feature_wiki_templates,feature_cms_templates');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_html_pages', 'Can edit HTML pages', 'editors', 'html pages', NULL, 'feature_html_pages');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_html_pages', 'Can view HTML pages', 'basic', 'html pages', NULL, 'feature_html_pages');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_list_users', 'Can list registered users', 'registered', 'community', NULL, 'feature_friends');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_list_users', 'Can list registered users', 'registered', 'user', NULL, 'feature_friends');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_live_support_admin', 'Admin live support system', 'admin', 'support', 'y', 'feature_live_support');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_live_support', 'Can use live support system', 'basic', 'support', NULL, 'feature_live_support');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_map_create', 'Can create new mapfile', 'admin', 'maps', NULL, 'feature_maps');
@@ -2833,7 +2833,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_plugin_approve', 'Can approve plugin execution', 'editors', 'wiki', NULL, 'feature_wiki');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_trust_input', 'Trust all user inputs (no security checks)', 'admin', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_backlink', 'View page backlinks', 'basic', 'wiki', NULL, 'feature_wiki');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_notifications', 'Can admin mail notifications', 'editors', 'mail notifications', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_notifications', 'Can admin mail notifications', 'editors', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_invite', 'Can invite user in groups', 'editors', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_delete_account', 'Can delete his own account', 'admin', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_importer', 'Can use the Tiki Importer', 'admin', 'tiki', 'y', NULL);

------------------------------------------------------------------------
r22374 | chealer | 2009-10-15 16:26:47 -0400 (qui, 15 out 2009) | 4 lines

rename RSS modules to External Feeds and RSS feeds to Feeds to generalize
while we're renaming menu links, also rename "Wiki Cache" to "External Pages Cache"
change External Feeds Admin help link to Feeds User


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 22373)
+++ tiki.sql	(revision 22374)
@@ -1377,7 +1377,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','External Pages Cache','tiki-list_cache.php',1080,'cachepages','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Modules','tiki-admin_modules.php',1085,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Hotwords','tiki-admin_hotwords.php',1095,'feature_hotwords','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','RSS Modules','tiki-admin_rssmodules.php',1100,'','tiki_p_admin_rssmodules','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','External Feeds','tiki-admin_rssmodules.php',1100,'','tiki_p_admin_rssmodules','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Menus','tiki-admin_menus.php',1105,'','tiki_p_edit_menu','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Polls','tiki-admin_polls.php',1110,'feature_polls','tiki_p_admin_polls','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Mail Notifications','tiki-admin_notifications.php',1120,'','tiki_p_admin_notifications','',0);
@@ -2656,7 +2656,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_integrator', 'Can admin integrator repositories and rules', 'admin', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_mailin', 'Can admin mail-in accounts', 'admin', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_objects', 'Can edit object permissions', 'admin', 'tiki', NULL, NULL);
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_rssmodules', 'Can admin rss modules', 'admin', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_rssmodules', 'Can admin external feeds', 'admin', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_clean_cache', 'Can clean cache', 'editors', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_create_css', 'Can create new css suffixed with -user', 'registered', 'tiki', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_detach_translation', 'Can remove association between two pages in a translation set', 'registered', 'tiki', NULL, NULL);

------------------------------------------------------------------------
r22371 | chealer | 2009-10-15 13:40:40 -0400 (qui, 15 out 2009) | 2 lines

rename Cache / Wiki Cache to External Pages Cache


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 22370)
+++ tiki.sql	(revision 22371)
@@ -1374,7 +1374,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Calendar','tiki-admin_calendars.php',1065,'feature_calendar','tiki_p_admin_calendar','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Users','tiki-adminusers.php',1070,'','tiki_p_admin_users','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Groups','tiki-admingroups.php',1075,'','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Wiki Cache','tiki-list_cache.php',1080,'cachepages','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','External Pages Cache','tiki-list_cache.php',1080,'cachepages','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Modules','tiki-admin_modules.php',1085,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Hotwords','tiki-admin_hotwords.php',1095,'feature_hotwords','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','RSS Modules','tiki-admin_rssmodules.php',1100,'','tiki_p_admin_rssmodules','',0);

------------------------------------------------------------------------
r22359 | luciash | 2009-10-14 21:55:50 -0400 (qua, 14 out 2009) | 1 line

[DB][FIX] tiki.sql: backticked all camelCaseName occurences

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 22358)
+++ tiki.sql	(revision 22359)
@@ -20,7 +20,7 @@
   `isFlagged` char(1) default NULL,
   `priority` int(2) default NULL,
   PRIMARY KEY (`msgId`),
-  KEY `userIsRead` (user, isRead)
+  KEY `userIsRead` (user, `isRead`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `messu_archive`;
@@ -211,7 +211,7 @@
   `clicks` int(8) default NULL,
   `zone` varchar(40) default NULL,
   PRIMARY KEY (`bannerId`),
-  INDEX ban1(zone,useDates,impressions,maxImpressions,hourFrom,hourTo,fromDate,toDate,mon,tue,wed,thu,fri,sat,sun)
+  INDEX ban1(zone,`useDates`,impressions,`maxImpressions`,`hourFrom`,`hourTo`,`fromDate`,`toDate`,mon,tue,wed,thu,fri,sat,sun)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_banning`;
@@ -536,7 +536,7 @@
   KEY `hits` (hits),
   KEY `tc_pi` (`parentId`),
   KEY `objectType` (object, `objectType`),
-  KEY `commentDate` (commentDate),
+  KEY `commentDate` (`commentDate`),
   KEY `threaded` (message_id, in_reply_to, `parentId`),
   FULLTEXT KEY `ft` (title,data)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -621,7 +621,7 @@
   `cache` longblob,
   `cache_timestamp` int(14) default NULL,
   PRIMARY KEY (`siteId`),
-  KEY (isValid),
+  KEY (`isValid`),
   KEY (url),
   FULLTEXT KEY `ft` (name,description)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -657,7 +657,7 @@
   `question` text,
   `answer` text,
   PRIMARY KEY (`questionId`),
-  KEY `faqId` (faqId),
+  KEY `faqId` (`faqId`),
   KEY `question` (question(255)),
   KEY `answer` (answer(255)),
   FULLTEXT KEY `ft` (question,answer)
@@ -765,8 +765,8 @@
   KEY `name` (name),
   KEY `description` (description(255)),
   KEY `created` (created),
-  KEY `archiveId` (archiveId),
-  KEY `galleryId` (galleryId),
+  KEY `archiveId` (`archiveId`),
+  KEY `galleryId` (`galleryId`),
   KEY `hits` (hits),
   FULLTEXT KEY `ft` (name,description,search_data,filename)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -785,7 +785,7 @@
   `created` int(14) default NULL,
   `path` varchar(250) default NULL,
   PRIMARY KEY (`attId`),
-  KEY `threadId` (threadId)
+  KEY `threadId` (`threadId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_forum_reads`;
@@ -956,7 +956,7 @@
   `title` varchar(250) default NULL,
   `type` varchar(200) default NULL,
   `url` varchar(250) default NULL,
-  KEY `watchId` (watchId),
+  KEY `watchId` (`watchId`),
   PRIMARY KEY (`group`(50),event,object(100))
 ) ENGINE=MyISAM;
 
@@ -976,7 +976,7 @@
   `is_html` TINYINT(1) NOT NULL DEFAULT 0,
   PRIMARY KEY (`pageName`,`version`),
   KEY `user` (`user`),
-  KEY (historyId)
+  KEY (`historyId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_hotwords`;
@@ -1021,7 +1021,7 @@
   KEY `name` (name),
   KEY `description` (description(255)),
   KEY `hits` (hits),
-  KEY `ti_gId` (galleryId),
+  KEY `ti_gId` (`galleryId`),
   KEY `ti_cr` (created),
   KEY `ti_us` (user),
   FULLTEXT KEY `ft` (name,description)
@@ -1039,7 +1039,7 @@
   `data` longblob,
   `etag` varchar(32) default NULL,
   PRIMARY KEY (`imageId`,`xsize`,`ysize`,`type`),
-  KEY `t_i_d_it` (imageId,type)
+  KEY `t_i_d_it` (`imageId`,type)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_language`;
@@ -1076,7 +1076,7 @@
   `toPage` varchar(160) NOT NULL default '',
   `reltype` varchar(50),
   PRIMARY KEY (`fromPage`,`toPage`),
-  KEY `toPage` (toPage)
+  KEY `toPage` (`toPage`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_live_support_events`;
@@ -1431,7 +1431,7 @@
   PRIMARY KEY (`menuId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-INSERT INTO tiki_menus (menuId,name,description,type) VALUES ('42','Application menu','Main extensive navigation menu','d');
+INSERT INTO tiki_menus (`menuId`,name,description,type) VALUES ('42','Application menu','Main extensive navigation menu','d');
 
 DROP TABLE IF EXISTS `tiki_minical_events`;
 CREATE TABLE `tiki_minical_events` (
@@ -1476,7 +1476,7 @@
   `groups` text,
   PRIMARY KEY (`name`(100), `position`, `ord`, `params`(140)),
   KEY `positionType` (position, type),
-  KEY `moduleId` (moduleId)
+  KEY `moduleId` (`moduleId`)
 ) ENGINE=MyISAM;
 
 INSERT INTO tiki_modules (name,position,ord,cache_time,params,groups) VALUES ('mnu_application_menu','l',30,0,'flip=y','a:1:{i:0;s:10:"Registered";}');
@@ -1784,7 +1784,7 @@
   `page_alias` varchar(250) default '',
   `pos` int(4) default NULL,
   PRIMARY KEY (`receivedPageId`),
-  KEY `structureName` (structureName)
+  KEY `structureName` (`structureName`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_referer_stats`;
@@ -1846,7 +1846,7 @@
   `lastUsed` int(11) NOT NULL default '0',
   `lastUpdated` int(11) NOT NULL default '0',
   PRIMARY KEY (`syllable`),
-  KEY `lastUsed` (lastUsed)
+  KEY `lastUsed` (`lastUsed`)
 ) ENGINE=MyISAM;
 
 -- searchword caching table for search syllables
@@ -1902,7 +1902,7 @@
   `email` varchar(255),
   `login` varchar(40) default '',
   `error` char(1) default '',
-  KEY (editionId)
+  KEY (`editionId`)
 ) ENGINE=MyISAM ;
 
 DROP TABLE IF EXISTS `tiki_sessions`;
@@ -1940,8 +1940,8 @@
   `height` int(4) NOT NULL default '1',
   `format` varchar(255) default NULL,
   `user` varchar(200) default '',
-  UNIQUE KEY `sheetId` (sheetId,begin,rowIndex,columnIndex),
-  KEY `sheetId_2` (sheetId,rowIndex,columnIndex)
+  UNIQUE KEY `sheetId` (`sheetId`,begin,`rowIndex`,`columnIndex`),
+  KEY `sheetId_2` (`sheetId`,`rowIndex`,`columnIndex`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_sheets`;
@@ -2152,7 +2152,7 @@
   `editableBy` text,
   `descriptionIsParsed` char(1) default 'n',
   PRIMARY KEY (`fieldId`),
-  INDEX trackerId (trackerId)
+  INDEX `trackerId` (`trackerId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_tracker_item_attachments`;
@@ -2171,7 +2171,7 @@
   `longdesc` blob,
   `version` varchar(40) default NULL,
   PRIMARY KEY (`attId`),
-  INDEX itemId (itemId)
+  INDEX `itemId` (`itemId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_tracker_item_comments`;
@@ -2192,7 +2192,7 @@
   `value` text,
   `lang` char(16) default NULL,
   PRIMARY KEY (`itemId`,`fieldId`,`lang`),
-  INDEX fieldId (fieldId),
+  INDEX `fieldId` (`fieldId`),
   INDEX value (value(250)),
   INDEX lang (lang),
   FULLTEXT KEY `ft` (value)
@@ -2208,7 +2208,7 @@
   `lastModif` int(14) default NULL,
   `lastModifBy` varchar(200) default NULL,
   PRIMARY KEY (`itemId`),
-  INDEX trackerId (trackerId)
+  INDEX `trackerId` (`trackerId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_tracker_options`;
@@ -2457,7 +2457,7 @@
   `type` varchar(200) default NULL,
   `url` varchar(250) default NULL,
   `email` varchar(200) default NULL,
-  KEY `watchId` (watchId),
+  KEY `watchId` (`watchId`),
   PRIMARY KEY (`user`(50),event,object(100),email(50))
 ) ENGINE=MyISAM;
 
@@ -2555,8 +2555,8 @@
   `date` int(14) NOT NULL default '0',
   `IP` varchar(50) NOT NULL default '',
   PRIMARY KEY (`id`),
-  KEY `object` (object,userId,type),
-  KEY `userId` (userId),
+  KEY `object` (object,`userId`,type),
+  KEY `userId` (`userId`),
   KEY `type` (type),
   KEY `date` (date)
 ) ENGINE=MyISAM;
@@ -2570,7 +2570,7 @@
 ) ENGINE=MyISAM;
 
 
-INSERT INTO users_grouppermissions (groupName,permName) VALUES('Anonymous','tiki_p_view');
+INSERT INTO users_grouppermissions (`groupName`,`permName`) VALUES('Anonymous','tiki_p_view');
 
 DROP TABLE IF EXISTS `users_groups`;
 CREATE TABLE `users_groups` (
@@ -2590,7 +2590,7 @@
   `isExternal` char(1) default 'n',
   `expireAfter` int(14) default 0,
   PRIMARY KEY (`id`),
-  UNIQUE KEY `groupName` (groupName),
+  UNIQUE KEY `groupName` (`groupName`),
   KEY `expireAfter` (`expireAfter`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
@@ -2851,13 +2851,13 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_group_join', 'Can join or leave the group', 'admin', 'group', NULL, NULL);
 
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_trigger_transition', 'Can trigger the transition between two states', 'admin', 'transition', NULL, 'feature_group_transition,feature_category_transition');
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_ws_admin', 'Can admin all ws', 'globaladmin', 'ws', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_ws_addws', 'Can add ws', 'globaladmin', 'ws');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_ws_removews', 'Can remove ws', 'globaladmin', 'ws');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_ws_adminws', 'Can admin a single ws', 'admin', 'ws');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_ws_adminresources', 'Can admin resources into single ws', 'admin', 'ws');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_ws_admingroups', 'Can admin groups in a single ws', 'admin', 'ws');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_ws_view', 'Can view a single ws', 'registered', 'ws');
+INSERT INTO users_permissions (`permName`, `permDesc`, level, type, admin) VALUES ('tiki_p_ws_admin', 'Can admin all ws', 'globaladmin', 'ws', 'y');
+INSERT INTO users_permissions (`permName`, `permDesc`, level, type) VALUES ('tiki_p_ws_addws', 'Can add ws', 'globaladmin', 'ws');
+INSERT INTO users_permissions (`permName`, `permDesc`, level, type) VALUES ('tiki_p_ws_removews', 'Can remove ws', 'globaladmin', 'ws');
+INSERT INTO users_permissions (`permName`, `permDesc`, level, type) VALUES ('tiki_p_ws_adminws', 'Can admin a single ws', 'admin', 'ws');
+INSERT INTO users_permissions (`permName`, `permDesc`, level, type) VALUES ('tiki_p_ws_adminresources', 'Can admin resources into single ws', 'admin', 'ws');
+INSERT INTO users_permissions (`permName`, `permDesc`, level, type) VALUES ('tiki_p_ws_admingroups', 'Can admin groups in a single ws', 'admin', 'ws');
+INSERT INTO users_permissions (`permName`, `permDesc`, level, type) VALUES ('tiki_p_ws_view', 'Can view a single ws', 'registered', 'ws');
 
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_kaltura', 'Can admin kaltura feature', 'admin', 'kaltura', 'y', 'feature_kaltura');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_upload_videos', 'Can upload video on kaltura server', 'editors', 'kaltura', NULL, 'feature_kaltura');
@@ -2877,9 +2877,9 @@
   PRIMARY KEY (`userId`,`groupName`(30))
 ) ENGINE=MyISAM;
 
-INSERT INTO users_groups (groupName,groupDesc) VALUES ('Anonymous','Public users not logged');
-INSERT INTO users_groups (groupName,groupDesc) VALUES ('Registered','Users logged into the system');
-INSERT INTO users_groups (groupName,groupDesc) VALUES ('Admins','Administrator and accounts managers.');
+INSERT INTO users_groups (`groupName`,`groupDesc`) VALUES ('Anonymous','Public users not logged');
+INSERT INTO users_groups (`groupName`,`groupDesc`) VALUES ('Registered','Users logged into the system');
+INSERT INTO users_groups (`groupName`,`groupDesc`) VALUES ('Admins','Administrator and accounts managers.');
 
 DROP TABLE IF EXISTS `users_users`;
 CREATE TABLE `users_users` (
@@ -2911,16 +2911,16 @@
   PRIMARY KEY (`userId`),
   KEY `score` (score),
   KEY `login` (login),
-  KEY `registrationDate` (registrationDate),
+  KEY `registrationDate` (`registrationDate`),
   KEY `openid_url` (openid_url)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 -- Administrator account
 INSERT INTO users_users(email,login,password,hash) VALUES ('','admin','admin',md5('adminadmin'));
-UPDATE users_users set currentLogin=lastLogin, registrationDate=lastLogin;
-INSERT INTO tiki_user_preferences (user,prefName,value) VALUES ('admin','realName','System Administrator');
-INSERT INTO users_usergroups (userId, groupName) VALUES(1,'Admins');
-INSERT INTO users_grouppermissions (groupName, permName) VALUES ('Admins','tiki_p_admin');
+UPDATE users_users set `currentLogin`=`lastLogin`, `registrationDate`=`lastLogin`;
+INSERT INTO tiki_user_preferences (user,`prefName`,value) VALUES ('admin','realName','System Administrator');
+INSERT INTO users_usergroups (`userId`, `groupName`) VALUES(1,'Admins');
+INSERT INTO users_grouppermissions (`groupName`, `permName`) VALUES ('Admins','tiki_p_admin');
 
 DROP TABLE IF EXISTS `tiki_integrator_reps`;
 CREATE TABLE `tiki_integrator_reps` (
@@ -2966,7 +2966,7 @@
   `objId` varchar(255) NOT NULL,
   `lang` varchar(16) default NULL,
   PRIMARY KEY (`type`, `objId`),
-  KEY `traId` ( traId )
+  KEY `traId` ( `traId` )
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
 DROP TABLE IF EXISTS `tiki_friends`;
@@ -3086,43 +3086,43 @@
   KEY (id)
 ) ENGINE=MyISAM;
 
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Created', 'wiki page', 'y');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Updated', 'wiki page', 'y');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Removed', 'wiki page', 'y');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Viewed', 'wiki page', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Viewed', 'forum', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Posted', 'forum', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Replied', 'forum', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Updated', 'forum', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Viewed', 'file gallery', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Viewed', 'image gallery', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Uploaded', 'file gallery', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Uploaded', 'image gallery', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('*', 'category', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('*', 'login', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Posted', 'message', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Replied', 'message', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Viewed', 'message', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Removed version', 'wiki page', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Removed last version', 'wiki page', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Rollback', 'wiki page', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Removed', 'forum', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Downloaded', 'file gallery', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Posted', 'comment', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Replied', 'comment', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Updated', 'comment', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Removed', 'comment', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Renamed', 'wiki page', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Created', 'sheet', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Updated', 'sheet', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Removed', 'sheet', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Viewed', 'sheet', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Viewed', 'blog', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Posted', 'blog', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Updated', 'blog', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Removed', 'blog', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Removed', 'file', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Viewed', 'article', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Created', 'wiki page', 'y');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Updated', 'wiki page', 'y');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Removed', 'wiki page', 'y');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Viewed', 'wiki page', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Viewed', 'forum', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Posted', 'forum', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Replied', 'forum', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Updated', 'forum', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Viewed', 'file gallery', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Viewed', 'image gallery', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Uploaded', 'file gallery', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Uploaded', 'image gallery', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('*', 'category', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('*', 'login', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Posted', 'message', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Replied', 'message', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Viewed', 'message', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Removed version', 'wiki page', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Removed last version', 'wiki page', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Rollback', 'wiki page', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Removed', 'forum', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Downloaded', 'file gallery', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Posted', 'comment', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Replied', 'comment', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Updated', 'comment', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Removed', 'comment', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Renamed', 'wiki page', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Created', 'sheet', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Updated', 'sheet', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Removed', 'sheet', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Viewed', 'sheet', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Viewed', 'blog', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Posted', 'blog', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Updated', 'blog', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Removed', 'blog', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Removed', 'file', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, `objectType`, status) VALUES ('Viewed', 'article', 'n');
 
 DROP TABLE IF EXISTS `tiki_freetags`;
 CREATE TABLE `tiki_freetags` (
@@ -3140,9 +3140,9 @@
   `user` varchar(200) default '',
   `created` int(14) NOT NULL default '0',
   PRIMARY KEY (`tagId`,`user`,`objectId`),
-  KEY (tagId),
+  KEY (`tagId`),
   KEY (user),
-  KEY (objectId)
+  KEY (`objectId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_contributions`;
@@ -3394,7 +3394,7 @@
 UPDATE tiki_menu_options SET icon = '' WHERE name = 'Surveys';
 UPDATE tiki_menu_options SET icon = '' WHERE name = 'TikiSheet';
 UPDATE tiki_menu_options SET icon = '' WHERE name = 'Workflow';
-UPDATE tiki_menus SET use_items_icons='y' WHERE menuId=42;
+UPDATE tiki_menus SET use_items_icons='y' WHERE `menuId`=42;
 
 DROP TABLE IF EXISTS `tiki_plugin_security`;
 CREATE TABLE `tiki_plugin_security` (
@@ -3435,7 +3435,7 @@
 CREATE TABLE `tiki_perspectives` (
   `perspectiveId` int NOT NULL AUTO_INCREMENT,
   `name` varchar(100) NOT NULL,
-  PRIMARY KEY ( perspectiveId )
+  PRIMARY KEY ( `perspectiveId` )
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_perspective_preferences`;
@@ -3443,7 +3443,7 @@
   `perspectiveId` int NOT NULL,
   `pref` varchar(40) NOT NULL,
   `value` text,
-  PRIMARY KEY ( perspectiveId, pref )
+  PRIMARY KEY ( `perspectiveId`, pref )
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_transitions`;

------------------------------------------------------------------------
r22348 | chealer | 2009-10-14 16:52:24 -0400 (qua, 14 out 2009) | 2 lines

[FIX] registered users have no permissions / fewer permissions than anonymous on new installs (r22101 regression)


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 22347)
+++ tiki.sql	(revision 22348)
@@ -945,6 +945,7 @@
   `includeGroup` varchar(255) NOT NULL default '',
   PRIMARY KEY (`groupName`(30),`includeGroup`(30))
 ) ENGINE=MyISAM;
+INSERT INTO  `tiki_group_inclusion` (`groupName` ,`includeGroup`) VALUES ('Registered','Anonymous');
 
 DROP TABLE IF EXISTS `tiki_group_watches`;
 CREATE TABLE `tiki_group_watches` (

------------------------------------------------------------------------
r22300 | sylvieg | 2009-10-13 08:33:24 -0400 (ter, 13 out 2009) | 1 line

[FIX] rollback partial 15091 tiki_p_use_as_template as nothing to do with the wiki template feature - it is depending on tracker and wiki

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 22299)
+++ tiki.sql	(revision 22300)
@@ -2767,7 +2767,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_rename', 'Can rename pages', 'editors', 'wiki', NULL, 'feature_wiki');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_rollback', 'Can rollback pages', 'editors', 'wiki', NULL, 'feature_wiki');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_upload_picture', 'Can upload pictures to wiki pages', 'registered', 'wiki', NULL, 'feature_wiki_pictures');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_use_as_template', 'Can use the page as a tracker template', 'basic', 'wiki', NULL, 'feature_wiki_templates');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_use_as_template', 'Can use the page as a tracker template', 'basic', 'wiki', NULL, 'feature_wiki');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view', 'Can view page/pages', 'basic', 'wiki', NULL, 'feature_wiki');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_watch_structure', 'Can watch structure', 'registered', 'wiki', NULL, 'feature_wiki_structure');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_admin_attachments', 'Can admin attachments to wiki pages', 'editors', 'wiki', NULL, 'feature_wiki_attachments');

------------------------------------------------------------------------
r22190 | chealer | 2009-10-10 21:05:00 -0400 (sÃ¡b, 10 out 2009) | 2 lines

[FIX] "DROP TABLE IF EXISTS `tiki_calendar_recurrence`;" failure due to reference from tiki_calendar_items.recurrenceId (regression from r15918)


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 22189)
+++ tiki.sql	(revision 22190)
@@ -313,6 +313,7 @@
   UNIQUE KEY `catname` (`calendarId`, `name`(16))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
+DROP TABLE IF EXISTS `tiki_calendar_items`;
 DROP TABLE IF EXISTS `tiki_calendar_recurrence`;
 CREATE TABLE `tiki_calendar_recurrence` (
   `recurrenceId` int(14) NOT NULL auto_increment,
@@ -345,7 +346,6 @@
   KEY `calendarId` (`calendarId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS `tiki_calendar_items`;
 CREATE TABLE `tiki_calendar_items` (
   `calitemId` int(14) NOT NULL auto_increment,
   `calendarId` int(14) NOT NULL default '0',

------------------------------------------------------------------------
r22158 | axold | 2009-10-10 07:45:33 -0400 (sÃ¡b, 10 out 2009) | 1 line

[FIX] Fixed a bug in sql statement

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 22157)
+++ tiki.sql	(revision 22158)
@@ -1343,7 +1343,6 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Newsletters','tiki-admin_newsletters.php',910,'feature_newsletters','tiki_p_admin_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Workspaces','tiki-my-workspaces.php',920,'feature_workspaces','tiki_p_ws_view','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','My Workspaces','tiki-my-workspaces.php',925,'feature_workspaces','tiki_p_ws_view','',0);
--- INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Leave this Workspace','tiki-switch_workspaces.php',930,'feature_workspaces','tiki_p_ws_view','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Manage Workspaces','tiki-manage-workspaces.php',935,'feature_workspaces','tiki_p_admin_ws.php','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_categories','',0);

------------------------------------------------------------------------
r22117 | chealer | 2009-10-08 16:39:49 -0400 (qui, 08 out 2009) | 2 lines

[FIX] workspace query commented in r22024 now properly commented, assuming that was the intention


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 22116)
+++ tiki.sql	(revision 22117)
@@ -1343,7 +1343,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Newsletters','tiki-admin_newsletters.php',910,'feature_newsletters','tiki_p_admin_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Workspaces','tiki-my-workspaces.php',920,'feature_workspaces','tiki_p_ws_view','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','My Workspaces','tiki-my-workspaces.php',925,'feature_workspaces','tiki_p_ws_view','',0);
---INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Leave this Workspace','tiki-switch_workspaces.php',930,'feature_workspaces','tiki_p_ws_view','',0);
+-- INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Leave this Workspace','tiki-switch_workspaces.php',930,'feature_workspaces','tiki_p_ws_view','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Manage Workspaces','tiki-manage-workspaces.php',935,'feature_workspaces','tiki_p_admin_ws.php','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_categories','',0);

------------------------------------------------------------------------
r22024 | axold | 2009-10-05 19:46:31 -0400 (seg, 05 out 2009) | 1 line

[MOD] Modified more things in ws

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 22023)
+++ tiki.sql	(revision 22024)
@@ -1341,9 +1341,9 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_list_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Send Newsletters','tiki-send_newsletters.php',905,'feature_newsletters','tiki_p_send_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Newsletters','tiki-admin_newsletters.php',910,'feature_newsletters','tiki_p_admin_newsletters','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Workspaces','tiki-workspaces-index.php',920,'feature_workspaces','tiki_p_ws_view','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Workspaces Home','tiki-workspaces-index.php',925,'feature_workspaces','tiki_p_ws_view','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','My Workspaces','tiki-my-workspaces.php',930,'feature_workspaces','tiki_p_ws_view','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Workspaces','tiki-my-workspaces.php',920,'feature_workspaces','tiki_p_ws_view','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','My Workspaces','tiki-my-workspaces.php',925,'feature_workspaces','tiki_p_ws_view','',0);
+--INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Leave this Workspace','tiki-switch_workspaces.php',930,'feature_workspaces','tiki_p_ws_view','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Manage Workspaces','tiki-manage-workspaces.php',935,'feature_workspaces','tiki_p_admin_ws.php','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_categories','',0);

------------------------------------------------------------------------
r22021 | jonnybradley | 2009-10-05 14:30:29 -0400 (seg, 05 out 2009) | 6 lines

[MRG] Merging kaltura_integration_two experimental branch
GSoC 2009 project by Nagendra nagendra016@users.sourceforge.net.
See http://dev.tikiwiki.org/Kaltura for details.

N.B. Change of license in kaltura_client.php and kaltura_client_base.php required before release - Kaltura to supply.


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 22020)
+++ tiki.sql	(revision 22021)
@@ -1414,6 +1414,9 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_faq_comments','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Contribution','tiki-admin_contribution.php',1265,'feature_contribution','tiki_p_admin_contribution','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Workspaces','tiki-admin.php?page=workspaces',1270,'feature_workspaces','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 's', 'Kaltura', 'tiki-list_kaltura_entries.php', 950, 'feature_kaltura', 'tiki_p_admin | tiki_p_admin_kaltura | tiki_p_list_videos', '', 0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'o', 'List Entries', 'tiki-list_kaltura_entries.php', 952, 'feature_kaltura', 'tiki_p_admin | tiki_p_admin_kaltura | tiki_p_list_videos', '', 0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42, 'o', 'Upload Media', 'tiki-kaltura_video.php', 954, 'feature_kaltura', 'tiki_p_admin | tiki_p_admin_kaltura | tiki_p_upload_videos', '', 0);
 
 
 
@@ -2856,6 +2859,14 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_ws_admingroups', 'Can admin groups in a single ws', 'admin', 'ws');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_ws_view', 'Can view a single ws', 'registered', 'ws');
 
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_kaltura', 'Can admin kaltura feature', 'admin', 'kaltura', 'y', 'feature_kaltura');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_upload_videos', 'Can upload video on kaltura server', 'editors', 'kaltura', NULL, 'feature_kaltura');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_videos', 'Can edit information of kaltura entry', 'editors', 'kaltura', NULL, 'feature_kaltura');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_remix_videos', 'Can create kaltura remix video', 'editors', 'kaltura', NULL, 'feature_kaltura');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_delete_videos', 'Can delete kaltura entry', 'editors', 'kaltura', NULL, 'feature_kaltura');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_download_videos', 'Can download kaltura entry', 'registered', 'kaltura', NULL, 'feature_kaltura');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_list_videos', 'Can list kaltura entries', 'basic', 'kaltura', NULL, 'feature_kaltura');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_videos', 'Can view kaltura entry', 'basic', 'kaltura', NULL, 'feature_kaltura');
 
 
 DROP TABLE IF EXISTS `users_usergroups`;

------------------------------------------------------------------------
r21909 | axold | 2009-09-30 10:23:37 -0400 (qua, 30 set 2009) | 1 line

[MOD] Fixed some ws perms in sql files

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 21908)
+++ tiki.sql	(revision 21909)
@@ -2848,6 +2848,13 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_group_join', 'Can join or leave the group', 'admin', 'group', NULL, NULL);
 
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_trigger_transition', 'Can trigger the transition between two states', 'admin', 'transition', NULL, 'feature_group_transition,feature_category_transition');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_ws_admin', 'Can admin all ws', 'globaladmin', 'ws', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_ws_addws', 'Can add ws', 'globaladmin', 'ws');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_ws_removews', 'Can remove ws', 'globaladmin', 'ws');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_ws_adminws', 'Can admin a single ws', 'admin', 'ws');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_ws_adminresources', 'Can admin resources into single ws', 'admin', 'ws');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_ws_admingroups', 'Can admin groups in a single ws', 'admin', 'ws');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_ws_view', 'Can view a single ws', 'registered', 'ws');
 
 
 

------------------------------------------------------------------------
r21895 | lphuberdeau | 2009-09-29 15:17:42 -0400 (ter, 29 set 2009) | 1 line

[FIX] Patch 20090416_plugin_security_tiki was not propagated in tiki.sql

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 21894)
+++ tiki.sql	(revision 21895)
@@ -3382,6 +3382,7 @@
 CREATE TABLE `tiki_plugin_security` (
   `fingerprint` VARCHAR(200) NOT NULL PRIMARY KEY,
   `status` VARCHAR(10) NOT NULL,
+  `added_by` VARCHAR(200) NULL,
   `approval_by` VARCHAR(200) NULL,
   `last_update` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
   `last_objectType` VARCHAR(20) NOT NULL,

------------------------------------------------------------------------
r21824 | lphuberdeau | 2009-09-28 12:37:21 -0400 (seg, 28 set 2009) | 1 line

[FIX]Â TEXT cannot have defaults...

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 21823)
+++ tiki.sql	(revision 21824)
@@ -3435,7 +3435,7 @@
 	`type` varchar(20) NOT NULL,
 	`from` varchar(255) NOT NULL,
 	`to` varchar(255) NOT NULL,
-	`guards` text NOT NULL DEFAULT '[]',
+	`guards` text,
 	PRIMARY KEY(`transitionId`),
 	KEY `transition_lookup` (`type`, `from`)
 ) ENGINE=MyISAM;

------------------------------------------------------------------------
r21816 | lphuberdeau | 2009-09-28 10:52:45 -0400 (seg, 28 set 2009) | 1 line

[FIX]Â Remove dependency on MySQL >= 5.0

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 21815)
+++ tiki.sql	(revision 21816)
@@ -3435,7 +3435,7 @@
 	`type` varchar(20) NOT NULL,
 	`from` varchar(255) NOT NULL,
 	`to` varchar(255) NOT NULL,
-	`guards` varchar(1024) NOT NULL DEFAULT '[]',
+	`guards` text NOT NULL DEFAULT '[]',
 	PRIMARY KEY(`transitionId`),
 	KEY `transition_lookup` (`type`, `from`)
 ) ENGINE=MyISAM;

------------------------------------------------------------------------
r21791 | mangapower | 2009-09-27 04:19:37 -0400 (dom, 27 set 2009) | 1 line

[MOD] wslib.php works by side with perspectiveslib.php and categlib.php. Now it's to cache ws, remove perspectives, and solved some bugs in wslib.php and categlib.php (thanks Filipus for the mail!) ;)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 21790)
+++ tiki.sql	(revision 21791)
@@ -1341,9 +1341,9 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_list_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Send Newsletters','tiki-send_newsletters.php',905,'feature_newsletters','tiki_p_send_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Newsletters','tiki-admin_newsletters.php',910,'feature_newsletters','tiki_p_admin_newsletters','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Workspaces','tiki-workspaces-index.php',920,'feature_workspaces','','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Workspaces Home','tiki-workspaces-index.php',925,'feature_workspaces','','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','My Workspaces','tiki-my-workspaces.php',930,'feature_workspaces','','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Workspaces','tiki-workspaces-index.php',920,'feature_workspaces','tiki_p_ws_view','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Workspaces Home','tiki-workspaces-index.php',925,'feature_workspaces','tiki_p_ws_view','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','My Workspaces','tiki-my-workspaces.php',930,'feature_workspaces','tiki_p_ws_view','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Manage Workspaces','tiki-manage-workspaces.php',935,'feature_workspaces','tiki_p_admin_ws.php','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_categories','',0);

------------------------------------------------------------------------
r21719 | axold | 2009-09-23 17:46:56 -0400 (qua, 23 set 2009) | 1 line

[MOD] Solved minor bugs in ws

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 21718)
+++ tiki.sql	(revision 21719)
@@ -1341,9 +1341,9 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_list_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Send Newsletters','tiki-send_newsletters.php',905,'feature_newsletters','tiki_p_send_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Newsletters','tiki-admin_newsletters.php',910,'feature_newsletters','tiki_p_admin_newsletters','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Workspaces','tiki-workspaces-index.php',920,'feature_workspaces','tiki_p_view_ws','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Workspaces Home','tiki-workspaces-index.php',925,'feature_workspaces','tiki_p_view_ws','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','My Workspaces','tiki-my-workspaces.php',930,'feature_workspaces','tiki_p_view_ws','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Workspaces','tiki-workspaces-index.php',920,'feature_workspaces','','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Workspaces Home','tiki-workspaces-index.php',925,'feature_workspaces','','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','My Workspaces','tiki-my-workspaces.php',930,'feature_workspaces','','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Manage Workspaces','tiki-manage-workspaces.php',935,'feature_workspaces','tiki_p_admin_ws.php','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_categories','',0);

------------------------------------------------------------------------
r21647 | mangapower | 2009-09-21 13:42:28 -0400 (seg, 21 set 2009) | 1 line

[MOD] Restored WS queries, once more...

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 21646)
+++ tiki.sql	(revision 21647)
@@ -426,6 +426,7 @@
   `description` varchar(250) default NULL,
   `parentId` int(12) default NULL,
   `hits` int(8) default NULL,
+  `rootCategId` int(12) default NULL,
   PRIMARY KEY (`categId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -1340,6 +1341,10 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_list_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Send Newsletters','tiki-send_newsletters.php',905,'feature_newsletters','tiki_p_send_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Newsletters','tiki-admin_newsletters.php',910,'feature_newsletters','tiki_p_admin_newsletters','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Workspaces','tiki-workspaces-index.php',920,'feature_workspaces','tiki_p_view_ws','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Workspaces Home','tiki-workspaces-index.php',925,'feature_workspaces','tiki_p_view_ws','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','My Workspaces','tiki-my-workspaces.php',930,'feature_workspaces','tiki_p_view_ws','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Manage Workspaces','tiki-manage-workspaces.php',935,'feature_workspaces','tiki_p_admin_ws.php','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_categories','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_banners','',0);

------------------------------------------------------------------------
r21582 | lphuberdeau | 2009-09-18 16:02:44 -0400 (sex, 18 set 2009) | 1 line

[KIL] Galaxia

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 21581)
+++ tiki.sql	(revision 21582)
@@ -2,121 +2,6 @@
 -- Database : tikiwiki
 -- --------------------------------------------------------
 
-DROP TABLE IF EXISTS `galaxia_activities`;
-CREATE TABLE `galaxia_activities` (
-  `activityId` int(14) NOT NULL auto_increment,
-  `name` varchar(80) default NULL,
-  `normalized_name` varchar(80) default NULL,
-  `pId` int(14) NOT NULL default '0',
-  `type` enum('start','end','split','switch','join','activity','standalone') default NULL,
-  `isAutoRouted` char(1) default NULL,
-  `flowNum` int(10) default NULL,
-  `isInteractive` char(1) default NULL,
-  `lastModif` int(14) default NULL,
-  `description` text,
-  `expirationTime` int(6) unsigned NOT NULL default '0',
-  PRIMARY KEY (`activityId`)
-) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-
-DROP TABLE IF EXISTS `galaxia_activity_roles`;
-CREATE TABLE `galaxia_activity_roles` (
-  `activityId` int(14) NOT NULL default '0',
-  `roleId` int(14) NOT NULL default '0',
-  PRIMARY KEY (`activityId`,`roleId`)
-) ENGINE=MyISAM;
-
-DROP TABLE IF EXISTS `galaxia_instance_activities`;
-CREATE TABLE `galaxia_instance_activities` (
-  `instanceId` int(14) NOT NULL default '0',
-  `activityId` int(14) NOT NULL default '0',
-  `started` int(14) NOT NULL default '0',
-  `ended` int(14) NOT NULL default '0',
-  `user` varchar(200) default '',
-  `status` enum('running','completed') default NULL,
-  PRIMARY KEY (`instanceId`,`activityId`)
-) ENGINE=MyISAM;
-
-DROP TABLE IF EXISTS `galaxia_instance_comments`;
-CREATE TABLE `galaxia_instance_comments` (
-  `cId` int(14) NOT NULL auto_increment,
-  `instanceId` int(14) NOT NULL default '0',
-  `user` varchar(200) default '',
-  `activityId` int(14) default NULL,
-  `hash` varchar(34) default NULL,
-  `title` varchar(250) default NULL,
-  `comment` text,
-  `activity` varchar(80) default NULL,
-  `timestamp` int(14) default NULL,
-  PRIMARY KEY (`cId`)
-) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-
-DROP TABLE IF EXISTS `galaxia_instances`;
-CREATE TABLE `galaxia_instances` (
-  `instanceId` int(14) NOT NULL auto_increment,
-  `pId` int(14) NOT NULL default '0',
-  `started` int(14) default NULL,
-  `name` varchar(200) NOT NULL default 'No Name',
-  `owner` varchar(200) default NULL,
-  `nextActivity` int(14) default NULL,
-  `nextUser` varchar(200) default NULL,
-  `ended` int(14) default NULL,
-  `status` enum('active','exception','aborted','completed') default NULL,
-  `properties` longblob,
-  PRIMARY KEY (`instanceId`)
-) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-
-DROP TABLE IF EXISTS `galaxia_processes`;
-CREATE TABLE `galaxia_processes` (
-  `pId` int(14) NOT NULL auto_increment,
-  `name` varchar(80) default NULL,
-  `isValid` char(1) default NULL,
-  `isActive` char(1) default NULL,
-  `version` varchar(12) default NULL,
-  `description` text,
-  `lastModif` int(14) default NULL,
-  `normalized_name` varchar(80) default NULL,
-  PRIMARY KEY (`pId`)
-) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-
-DROP TABLE IF EXISTS `galaxia_roles`;
-CREATE TABLE `galaxia_roles` (
-  `roleId` int(14) NOT NULL auto_increment,
-  `pId` int(14) NOT NULL default '0',
-  `lastModif` int(14) default NULL,
-  `name` varchar(80) default NULL,
-  `description` text,
-  PRIMARY KEY (`roleId`)
-) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-
-DROP TABLE IF EXISTS `galaxia_transitions`;
-CREATE TABLE `galaxia_transitions` (
-  `pId` int(14) NOT NULL default '0',
-  `actFromId` int(14) NOT NULL default '0',
-  `actToId` int(14) NOT NULL default '0',
-  PRIMARY KEY (`actFromId`,`actToId`)
-) ENGINE=MyISAM;
-
-DROP TABLE IF EXISTS `galaxia_user_roles`;
-CREATE TABLE `galaxia_user_roles` (
-  `pId` int(14) NOT NULL default '0',
-  `roleId` int(14) NOT NULL auto_increment,
-  `user` varchar(200) NOT NULL default '',
-  PRIMARY KEY (`roleId`, `user`)
-) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-
-DROP TABLE IF EXISTS `galaxia_workitems`;
-CREATE TABLE `galaxia_workitems` (
-  `itemId` int(14) NOT NULL auto_increment,
-  `instanceId` int(14) NOT NULL default '0',
-  `orderId` int(14) NOT NULL default '0',
-  `activityId` int(14) NOT NULL default '0',
-  `properties` longblob,
-  `started` int(14) default NULL,
-  `ended` int(14) default NULL,
-  `user` varchar(200) default '',
-  PRIMARY KEY (`itemId`)
-) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-
 DROP TABLE IF EXISTS `messu_messages`;
 CREATE TABLE `messu_messages` (
   `msgId` int(14) NOT NULL auto_increment,
@@ -1242,7 +1127,6 @@
 INSERT INTO tiki_live_support_modules(name) VALUES('image galleries');
 INSERT INTO tiki_live_support_modules(name) VALUES('file galleries');
 INSERT INTO tiki_live_support_modules(name) VALUES('directory');
-INSERT INTO tiki_live_support_modules(name) VALUES('workflow');
 
 DROP TABLE IF EXISTS `tiki_live_support_operators`;
 CREATE TABLE `tiki_live_support_operators` (
@@ -1372,14 +1256,6 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','User Menu','tiki-usermenu.php',100,'feature_mytiki,feature_usermenu','tiki_p_usermenu','Registered',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Mini Calendar','tiki-minical.php',105,'feature_mytiki,feature_minical','tiki_p_minical','Registered',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','My Watches','tiki-user_watches.php',110,'feature_mytiki,feature_user_watches','','Registered',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Workflow','tiki-g-user_processes.php',150,'feature_workflow','tiki_p_use_workflow','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Processes','tiki-g-admin_processes.php',155,'feature_workflow','tiki_p_admin_workflow','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Monitor Processes','tiki-g-monitor_processes.php',160,'feature_workflow','tiki_p_admin_workflow','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Monitor Activities','tiki-g-monitor_activities.php',165,'feature_workflow','tiki_p_admin_workflow','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Monitor Instances','tiki-g-monitor_instances.php',170,'feature_workflow','tiki_p_admin_workflow','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','User Processes','tiki-g-user_processes.php',175,'feature_workflow','tiki_p_use_workflow','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','User activities','tiki-g-user_activities.php',180,'feature_workflow','tiki_p_use_workflow','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','User instances','tiki-g-user_instances.php',185,'feature_workflow','tiki_p_use_workflow','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Community','tiki-list_users.php',187,'feature_friends','tiki_p_list_users','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','User List','tiki-list_users.php',188,'feature_friends','tiki_p_list_users','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Friendship Network','tiki-friends.php',189,'feature_friends','','Registered',0);
@@ -2897,11 +2773,6 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_view_source', 'Can view source of wiki pages', 'basic', 'wiki', NULL, 'feature_source');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_vote_ratings', 'Can participate to rating of wiki pages', 'registered', 'wiki', NULL, 'feature_wiki_ratings');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_view_similar', 'Can view similar wiki pages', 'registered', 'wiki', NULL, 'feature_wiki');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_workflow', 'Can admin workflow processes', 'admin', 'workflow', 'y', 'feature_workflow');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_abort_instance', 'Can abort a process instance', 'editors', 'workflow', NULL, 'feature_workflow');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_exception_instance', 'Can declare an instance as exception', 'registered', 'workflow', NULL, 'feature_workflow');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_send_instance', 'Can send instances after completion', 'registered', 'workflow', NULL, 'feature_workflow');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_use_workflow', 'Can execute workflow activities', 'registered', 'workflow', NULL, 'feature_workflow');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_received_articles', 'Can admin received articles', 'editors', 'comm', NULL, 'feature_comm');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_received_pages', 'Can admin received pages', 'editors', 'comm', NULL, 'feature_comm');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_send_articles', 'Can send articles to other sites', 'editors', 'comm', NULL, 'feature_comm');

------------------------------------------------------------------------
r21581 | lphuberdeau | 2009-09-18 15:43:12 -0400 (sex, 18 set 2009) | 1 line

[NEW] Adding guards on transitions

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 21580)
+++ tiki.sql	(revision 21581)
@@ -3559,6 +3559,7 @@
 	`type` varchar(20) NOT NULL,
 	`from` varchar(255) NOT NULL,
 	`to` varchar(255) NOT NULL,
+	`guards` varchar(1024) NOT NULL DEFAULT '[]',
 	PRIMARY KEY(`transitionId`),
 	KEY `transition_lookup` (`type`, `from`)
 ) ENGINE=MyISAM;

------------------------------------------------------------------------
r21517 | jonnybradley | 2009-09-15 13:44:41 -0400 (ter, 15 set 2009) | 1 line

[FIX] Restore Category browse item on admin menu (for thise with tiki_p_view_category)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 21516)
+++ tiki.sql	(revision 21517)
@@ -1351,7 +1351,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Search','tiki-searchindex.php',13,'feature_search','tiki_p_search','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Contact Us','tiki-contact.php',20,'feature_contact,feature_messages','','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Stats','tiki-stats.php',23,'feature_stats','tiki_p_view_stats','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Categories','tiki-browse_categories.php',25,'feature_categories','tiki_p_view_categories','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Categories','tiki-browse_categories.php',25,'feature_categories','tiki_p_view_category','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Freetags','tiki-browse_freetags.php',27,'feature_freetags','tiki_p_view_freetags','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Calendar','tiki-calendar.php',35,'feature_calendar','tiki_p_view_calendar','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Users Map','tiki-gmap_usermap.php',36,'feature_gmap','','',0);

------------------------------------------------------------------------
r21413 | kerrnel22 | 2009-09-11 18:08:22 -0400 (sex, 11 set 2009) | 1 line

[MOD] Tracker now lets you display user who created and/or last modified an item in the item view.  Need to work on real name display for when real name is set to be displayed instead of userid.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 21412)
+++ tiki.sql	(revision 21413)
@@ -2319,8 +2319,10 @@
   `itemId` int(12) NOT NULL auto_increment,
   `trackerId` int(12) NOT NULL default '0',
   `created` int(14) default NULL,
+  `createdBy` varchar(200) default NULL,
   `status` char(1) default NULL,
   `lastModif` int(14) default NULL,
+  `lastModifBy` varchar(200) default NULL,
   PRIMARY KEY (`itemId`),
   INDEX trackerId (trackerId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;

------------------------------------------------------------------------
r21246 | sylvieg | 2009-09-04 10:05:03 -0400 (sex, 04 set 2009) | 1 line

[FIX]newsletter: remember wysiwyg to be able to reuse a newsletter

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 21245)
+++ tiki.sql	(revision 21246)
@@ -2008,6 +2008,7 @@
   `subject` varchar(200) default NULL,
   `data` longblob,
   `datatxt` longblob,
+  `wysiwyg` char(1) default NULL,
   PRIMARY KEY (`editionId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r21094 | sylvieg | 2009-08-26 10:17:51 -0400 (qua, 26 ago 2009) | 1 line

[MOD]group: group expiration period to unassign a user automaitcally after n days from a group (unassign is done at each login - perhaps needs more

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 21093)
+++ tiki.sql	(revision 21094)
@@ -1451,8 +1451,8 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Quizzes','tiki-edit_quiz.php',765,'feature_quizzes','tiki_p_admin_quizzes','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','TikiSheet','tiki-sheets.php',780,'feature_sheet','tiki_p_view_sheet','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Sheets','tiki-sheets.php',782,'feature_sheet','tiki_p_view_sheet','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Trackers','tiki-list_trackers.php',800,'feature_trackers','tiki_p_view_trackers','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Trackers','tiki-list_trackers.php',805,'feature_trackers','tiki_p_view_trackers','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Trackers','tiki-list_trackers.php',800,'feature_trackers','tiki_p_list_trackers','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Trackers','tiki-list_trackers.php',805,'feature_trackers','tiki_p_list_trackers','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Trackers','tiki-admin_trackers.php',810,'feature_trackers','tiki_p_admin_trackers','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Surveys','tiki-list_surveys.php',850,'feature_surveys','tiki_p_take_survey','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Surveys','tiki-list_surveys.php',855,'feature_surveys','tiki_p_take_survey','',0);
@@ -2701,8 +2701,10 @@
   `groupDefCat` int(12) default 0,
   `groupTheme` varchar(255) default '',
   `isExternal` char(1) default 'n',
+  `expireAfter` int(14) default 0,
   PRIMARY KEY (`id`),
-  UNIQUE KEY `groupName` (groupName)
+  UNIQUE KEY `groupName` (groupName),
+  KEY `expireAfter` (`expireAfter`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
 DROP TABLE IF EXISTS `users_objectpermissions`;
@@ -2974,6 +2976,7 @@
 CREATE TABLE `users_usergroups` (
   `userId` int(8) NOT NULL default '0',
   `groupName` varchar(255) NOT NULL default '',
+  `created` int(14) default NULL,
   PRIMARY KEY (`userId`,`groupName`(30))
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r21046 | Jyhem | 2009-08-22 12:14:44 -0400 (sÃ¡b, 22 ago 2009) | 1 line

[ENH] Improve texts (thanks Marc)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 21045)
+++ tiki.sql	(revision 21046)
@@ -1450,7 +1450,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Quiz Stats','tiki-quiz_stats.php',760,'feature_quizzes','tiki_p_view_quiz_stats','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Quizzes','tiki-edit_quiz.php',765,'feature_quizzes','tiki_p_admin_quizzes','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','TikiSheet','tiki-sheets.php',780,'feature_sheet','tiki_p_view_sheet','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List TikiSheets','tiki-sheets.php',782,'feature_sheet','tiki_p_view_sheet','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Sheets','tiki-sheets.php',782,'feature_sheet','tiki_p_view_sheet','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Trackers','tiki-list_trackers.php',800,'feature_trackers','tiki_p_view_trackers','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Trackers','tiki-list_trackers.php',805,'feature_trackers','tiki_p_view_trackers','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Trackers','tiki-admin_trackers.php',810,'feature_trackers','tiki_p_admin_trackers','',0);

------------------------------------------------------------------------
r20903 | kissaki | 2009-08-16 21:23:57 -0400 (dom, 16 ago 2009) | 1 line

[CODE] moved insert command from previous commit 20826 to a fitting position

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20902)
+++ tiki.sql	(revision 20903)
@@ -846,6 +846,9 @@
   PRIMARY KEY (`galleryId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
+INSERT INTO `tiki_file_galleries` (`name`, `type`, `description`, `visible`, `user`, `public`, `parentId`) VALUES ('File Galleries', 'system', '', 'y', 'admin', 'y', -1);
+
+
 DROP TABLE IF EXISTS `tiki_files`;
 CREATE TABLE `tiki_files` (
   `fileId` int(14) NOT NULL auto_increment,
@@ -3554,4 +3557,3 @@
 	KEY `transition_lookup` (`type`, `from`)
 ) ENGINE=MyISAM;
 
-INSERT INTO `tiki_file_galleries` (`name`, `type`, `description`, `visible`, `user`, `public`, `parentId`) VALUES ('File Galleries', 'system', '', 'y', 'admin', 'y', -1);

------------------------------------------------------------------------
r20826 | nyloth | 2009-08-13 10:06:28 -0400 (qui, 13 ago 2009) | 12 lines

[MOD] File Galleries: Convert the root gallery (was gallery id '-1') of File Galleries from a fake gallery to a 'real' gallery in the database, in order to allow users to:

  - upload files directly into the root/main gallery, without having to create a subgallery first (this has mainly been done to reduce the steps needed to quickly upload an image in a wiki page - it should now be easier than the old wiki_up way)

  - change display properties of the root/main gallery

The ID of the main gallery is stored in the pref 'fgal_root_id', because it will be '1' only on new installs.
For the moment, the 'fgal_root_id' pref is used when calling functions from the filegallib and not hardcoded/forced inside those functions in order to be able to reuse those functions later for something else. To be more precise, the idea is to make it possible to store, for example, User Files inside the filegals table (in order to factorize code and merge both features).

+ Also factorize code of modules/mod-file_galleries.php and templates/tiki-list_file_gallery.tpl. Move a lot of code to filegallib in order to do so.



Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20825)
+++ tiki.sql	(revision 20826)
@@ -3554,3 +3554,4 @@
 	KEY `transition_lookup` (`type`, `from`)
 ) ENGINE=MyISAM;
 
+INSERT INTO `tiki_file_galleries` (`name`, `type`, `description`, `visible`, `user`, `public`, `parentId`) VALUES ('File Galleries', 'system', '', 'y', 'admin', 'y', -1);

------------------------------------------------------------------------
r20799 | axold | 2009-08-12 05:52:34 -0400 (qua, 12 ago 2009) | 1 line

[MOD] Added the Workspaces menu in SQL for manage Workspaces

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20798)
+++ tiki.sql	(revision 20799)
@@ -1529,6 +1529,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_poll_comments','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_faq_comments','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Contribution','tiki-admin_contribution.php',1265,'feature_contribution','tiki_p_admin_contribution','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Workspaces','tiki-admin.php?page=workspaces',1270,'feature_workspaces','tiki_p_admin','',0);
 
 
 

------------------------------------------------------------------------
r20792 | jonnybradley | 2009-08-11 13:29:34 -0400 (ter, 11 ago 2009) | 2 lines

[MOD] QuickTags to Toolbars: The big renaming ceremony!
Note: Removed 'quicktags_over_textarea' pref behaviour. This was broken by the pref renaming - i'm sure this has been discussed and was agred to be an unnecessary overhead to maintain. Toolbars can now only be above the edit area as is consistant with convention.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20791)
+++ tiki.sql	(revision 20792)
@@ -1480,7 +1480,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'feature_editcss','tiki_p_create_css','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_contribution','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_users','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_quicktags','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_toolbars','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_menu','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_clean_cache','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Home','tiki-admin.php',1051,'','tiki_p_admin','',0);
@@ -1499,7 +1499,7 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Mail Notifications','tiki-admin_notifications.php',1120,'','tiki_p_admin_notifications','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Search Stats','tiki-search_stats.php',1125,'feature_search_stats','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Theme Control','tiki-theme_control.php',1130,'feature_theme_control','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','QuickTags','tiki-admin_quicktags.php',1135,'','tiki_p_admin_quicktags','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Toolbars','tiki-admin_toolbars.php',1135,'','tiki_p_admin_toolbars','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Categories','tiki-admin_categories.php',1145,'feature_categories','tiki_p_admin_categories','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Banners','tiki-list_banners.php',1150,'feature_banners','tiki_p_admin_banners','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Edit Templates','tiki-edit_templates.php',1155,'feature_edit_templates','tiki_p_edit_templates','',0);
@@ -2831,7 +2831,7 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_poll_results', 'Can view poll results', 'basic', 'polls', NULL, 'feature_polls');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_vote_poll', 'Can vote polls', 'basic', 'polls', NULL, 'feature_polls');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_poll_voters', 'Can view poll voters', 'basic', 'polls', NULL, 'feature_polls');
-INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_quicktags', 'Can admin quicktags', 'admin', 'quicktags', 'y', NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_toolbars', 'Can admin toolbars', 'admin', 'toolbars', 'y', NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_quizzes', 'Can admin quizzes', 'editors', 'quizzes', 'y', 'feature_quizzes');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_take_quiz', 'Can take quizzes', 'basic', 'quizzes', NULL, 'feature_quizzes');
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_quiz_stats', 'Can view quiz stats', 'basic', 'quizzes', NULL, 'feature_quizzes');
@@ -3054,196 +3054,6 @@
 INSERT INTO tiki_integrator_rules VALUES ('2','1','2','img src=(\"|\')(?!http://)','img src=\1{path}/','y','n','i','y','Fix image paths');
 INSERT INTO tiki_integrator_rules VALUES ('3','1','3','href=(\"|\')(?!(#|(http|ftp)://))','href=\1tiki-integrator.php?repID={repID}&file=','y','n','i','y','Replace internal links to integrator. Don\'t touch an external link.');
 
-DROP TABLE IF EXISTS `tiki_quicktags`;
-CREATE TABLE `tiki_quicktags` (
-  `tagId` int(4) unsigned NOT NULL auto_increment,
-  `taglabel` varchar(255) default NULL,
-  `taginsert` text,
-  `tagicon` varchar(255) default NULL,
-  `tagcategory` varchar(255) default NULL,
-  PRIMARY KEY (`tagId`),
-  KEY `tagcategory` (tagcategory),
-  KEY `taglabel` (taglabel)
-) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-
--- wiki
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, bold','__text__','pics/icons/text_bold.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, italic','\'\'text\'\'','pics/icons/text_italic.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, underline','===text===','pics/icons/text_underline.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2|r1c3\nr2c1|r2c2|r2c3\nr3c1|r3c2|r3c3||','pics/icons/table.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('link, external','[http://example.com|text]','pics/icons/world_link.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('link, wiki','((text))','pics/icons/page_link.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading1','!text','pics/icons/text_heading_1.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading2','!!text','pics/icons/text_heading_2.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading3','!!!text','pics/icons/text_heading_3.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' horizontal rule','---','pics/icons/page.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/database_gear.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','popup_plugin_form("img")','pics/icons/picture.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('list bullets', '*text', 'pics/icons/text_list_bullets.png', 'wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('list numbers', '#text', 'pics/icons/text_list_numbers.png', 'wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' deleted','--text--','pics/icons/text_strikethrough.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('quote','popup_plugin_form("quote")','pics/icons/quotes.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('code','popup_plugin_form("code")','pics/icons/page_white_code.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('flash','popup_plugin_form("flash")','pics/icons/page_white_actionscript.png','wiki');
-
--- maps
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New wms Metadata','METADATA\r\n		\"wms_name\" \"myname\"\r\n 	"wms_srs" "EPSG:4326"\r\n 	"wms_server_version" " "\r\n 	"wms_layers" "mylayers"\r\n 	"wms_request" "myrequest"\r\n 	"wms_format" " "\r\n 	"wms_time" " "\r\n END', 'pics/icons/tag_blue_add.png','maps');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Class', 'CLASS\r\n EXPRESSION ()\r\n SYMBOL 0\r\n OUTLINECOLOR\r\n COLOR\r\n NAME "myclass" \r\nEND #end of class', 'pics/icons/application_add.png','maps');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Projection','PROJECTION\r\n "init=epsg:4326"\r\nEND','pics/icons/image_add.png','maps');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Query','#\r\n# Start of query definitions\r\n#\r\n QUERYMAP\r\n STATUS ON\r\n STYLE HILITE\r\nEND','pics/icons/database_gear.png','maps');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Scalebar','#\r\n# Start of scalebar\r\n#\r\nSCALEBAR\r\n IMAGECOLOR 255 255 255\r\n STYLE 1\r\n SIZE 400 2\r\n COLOR 0 0 0\r\n UNITS KILOMETERS\r\n INTERVALS 5\r\n STATUS ON\r\nEND','pics/icons/layout_add.png','maps');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Layer','LAYER\r\n NAME\r\n TYPE\r\n STATUS ON\r\n DATA "mydata"\r\nEND #end of layer', 'pics/icons/layers.png', 'maps');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Label','LABEL\r\n COLOR\r\n ANGLE\r\n FONT arial\r\n TYPE TRUETYPE\r\n POSITION\r\n PARTIALS TRUE\r\n SIZE 6\r\n BUFFER 0\r\n OUTLINECOLOR \r\nEND #end of label', 'pics/icons/comment_add.png', 'maps');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Reference','#\r\n#start of reference\r\n#\r\n REFERENCE\r\n SIZE 120 60\r\n STATUS ON\r\n EXTENT -180 -90 182 88\r\n OUTLINECOLOR 255 0 0\r\n IMAGE "myimagedata"\r\n COLOR -1 -1 -1\r\nEND','pics/icons/picture_add.png','maps');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Legend','#\r\n#start of Legend\r\n#\r\n LEGEND\r\n KEYSIZE 18 12\r\n POSTLABELCACHE TRUE\r\n STATUS ON\r\nEND','pics/icons/note_add.png','maps');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Web','#\r\n# Start of web interface definition\r\n#\r\nWEB\r\n TEMPLATE "myfile/url"\r\n MINSCALE 1000\r\n MAXSCALE 40000\r\n IMAGEPATH "myimagepath"\r\n IMAGEURL "mypath"\r\nEND', 'pics/icons/world_link.png', 'maps');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Outputformat','OUTPUTFORMAT\r\n NAME\r\n DRIVER " "\r\n MIMETYPE "myimagetype"\r\n IMAGEMODE RGB\r\n EXTENSION "png"\r\nEND','pics/icons/newspaper_go.png','maps');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Mapfile','#\r\n# Start of mapfile\r\n#\r\nNAME MYMAPFLE\r\n STATUS ON\r\nSIZE \r\nEXTENT\r\nUNITS \r\nSHAPEPATH " "\r\nIMAGETYPE " "\r\nFONTSET " "\r\nIMAGECOLOR -1 -1 -1\r\n\r\n#remove this text and add objects here\r\n\r\nEND # end of mapfile','pics/icons/world_add.png','maps');
-
--- newsletters
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, bold','__text__','pics/icons/text_bold.png','newsletters');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, italic','\'\'text\'\'','pics/icons/text_italic.png','newsletters');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, underline','===text===','pics/icons/text_underline.png','newsletters');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text|nocache]','pics/icons/world_link.png','newsletters');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading1','!text','pics/icons/text_heading_1.png','newsletters');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading2','!!text','pics/icons/text_heading_2.png','newsletters');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading3','!!!text','pics/icons/text_heading_3.png','newsletters');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' horizontal rule', '---', 'pics/icons/page.png', 'newsletters');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','newsletters');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','newsletters');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','popup_plugin_form("img")','pics/icons/picture.png','newsletters');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' deleted','--text--','pics/icons/text_strikethrough.png','newsletters');
-
--- trackers
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, bold','__text__','pics/icons/text_bold.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, italic','\'\'text\'\'','pics/icons/text_italic.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, underline','===text===','pics/icons/text_underline.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2|r1c3\nr2c1|r2c2|r2c3\nr3c1|r3c2|r3c3||','pics/icons/table.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/world_link.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','pics/icons/page_link.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading1','!text','pics/icons/text_heading_1.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading2','!!text','pics/icons/text_heading_2.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading3','!!!text','pics/icons/text_heading_3.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' horizontal rule','---','pics/icons/page.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/database_gear.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','popup_plugin_form("img")','pics/icons/picture.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' deleted','--text--','pics/icons/text_strikethrough.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('quote','popup_plugin_form("quote")','pics/icons/quotes.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('code','popup_plugin_form("code")','pics/icons/page_white_code.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('flash','popup_plugin_form("flash")','pics/icons/page_white_actionscript.png','trackers');
-
--- blogs
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, bold','__text__','pics/icons/text_bold.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, italic','\'\'text\'\'','pics/icons/text_italic.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, underline','===text===','pics/icons/text_underline.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2|r1c3\nr2c1|r2c2|r2c3\nr3c1|r3c2|r3c3||','pics/icons/table.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/world_link.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','pics/icons/page_link.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading1','!text','pics/icons/text_heading_1.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading2','!!text','pics/icons/text_heading_2.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading3','!!!text','pics/icons/text_heading_3.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' horizontal rule','---','pics/icons/page.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/database_gear.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','popup_plugin_form("img")','pics/icons/picture.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' deleted','--text--','pics/icons/text_strikethrough.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('quote','popup_plugin_form("quote")','pics/icons/quotes.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('code','popup_plugin_form("code")','pics/icons/page_white_code.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('flash','popup_plugin_form("flash")','pics/icons/page_white_actionscript.png','blogs');
-
--- calendar
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, bold','__text__','pics/icons/text_bold.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, italic','\'\'text\'\'','pics/icons/text_italic.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, underline','===text===','pics/icons/text_underline.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2|r1c3\nr2c1|r2c2|r2c3\nr3c1|r3c2|r3c3||','pics/icons/table.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/world_link.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','pics/icons/page_link.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading1','!text','pics/icons/text_heading_1.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading2','!!text','pics/icons/text_heading_2.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading3','!!!text','pics/icons/text_heading_3.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' horizontal rule','---','pics/icons/page.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/database_gear.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','popup_plugin_form("img")','pics/icons/picture.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' deleted','--text--','pics/icons/text_strikethrough.png','calendar');
-
--- articles
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, bold','__text__','pics/icons/text_bold.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, italic','\'\'text\'\'','pics/icons/text_italic.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, underline','===text===','pics/icons/text_underline.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2|r1c3\nr2c1|r2c2|r2c3\nr3c1|r3c2|r3c3||','pics/icons/table.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/world_link.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','pics/icons/page_link.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading1','!text','pics/icons/text_heading_1.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading2','!!text','pics/icons/text_heading_2.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading3','!!!text','pics/icons/text_heading_3.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' horizontal rule','---','pics/icons/page.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/database_gear.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','popup_plugin_form("img")','pics/icons/picture.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' deleted','--text--','pics/icons/text_strikethrough.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('quote','popup_plugin_form("quote")','pics/icons/quotes.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('code','popup_plugin_form("code")','pics/icons/page_white_code.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('flash','popup_plugin_form("flash")','pics/icons/page_white_actionscript.png','articles');
-
--- faqs
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, bold','__text__','pics/icons/text_bold.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, italic','\'\'text\'\'','pics/icons/text_italic.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, underline','===text===','pics/icons/text_underline.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2|r1c3\nr2c1|r2c2|r2c3\nr3c1|r3c2|r3c3||','pics/icons/table.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/world_link.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','pics/icons/page_link.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading1','!text','pics/icons/text_heading_1.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading2','!!text','pics/icons/text_heading_2.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading3','!!!text','pics/icons/text_heading_3.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' horizontal rule','---','pics/icons/page.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/database_gear.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','popup_plugin_form("img")','pics/icons/picture.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' deleted','--text--','pics/icons/text_strikethrough.png','faqs');
-
--- forums
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, bold','__text__','pics/icons/text_bold.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, italic','\'\'text\'\'','pics/icons/text_italic.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, underline','===text===','pics/icons/text_underline.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2|r1c3\nr2c1|r2c2|r2c3\nr3c1|r3c2|r3c3||','pics/icons/table.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/world_link.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','pics/icons/page_link.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading1','!text','pics/icons/text_heading_1.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading2','!!text','pics/icons/text_heading_2.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading3','!!!text','pics/icons/text_heading_3.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' horizontal rule','---','pics/icons/page.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/database_gear.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','popup_plugin_form("img")','pics/icons/picture.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' deleted','--text--','pics/icons/text_strikethrough.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('quote','popup_plugin_form("quote")','pics/icons/quotes.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('code','popup_plugin_form("code")','pics/icons/page_white_code.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('flash','popup_plugin_form("flash")','pics/icons/page_white_actionscript.png','forums');
-
 -- Translated objects table
 DROP TABLE IF EXISTS `tiki_translated_objects`;
 CREATE TABLE `tiki_translated_objects` (

------------------------------------------------------------------------
r20790 | pkdille | 2009-08-11 12:02:20 -0400 (ter, 11 ago 2009) | 1 line

[FIX] admin_quizzes: remove nVersion field which was unused and, as declared as NOT NULL, gave some problems during quizzes saving

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20789)
+++ tiki.sql	(revision 20790)
@@ -1828,7 +1828,6 @@
   `publishDate` int(14) default NULL,
   `expireDate` int(14) default NULL,
   `bDeleted` char(1) default NULL,
-  `nVersion` int(4) NOT NULL,
   `nAuthor` int(4) default NULL,
   `bOnline` char(1) default NULL,
   `bRandomQuestions` char(1) default NULL,
@@ -1848,7 +1847,7 @@
   `sData` text,
   `sEpilogue` text,
   `passingperct` int(4) default 0,
-  PRIMARY KEY (`quizId`, `nVersion`)
+  PRIMARY KEY (`quizId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_received_articles`;

------------------------------------------------------------------------
r20735 | lphuberdeau | 2009-08-09 10:37:36 -0400 (dom, 09 ago 2009) | 1 line

[ENH] Adding more space in string length

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20734)
+++ tiki.sql	(revision 20735)
@@ -3507,8 +3507,8 @@
 DROP TABLE IF EXISTS `tiki_profile_symbols`;
 CREATE TABLE `tiki_profile_symbols` (
   `domain` VARCHAR(50) NOT NULL,
-  `profile` VARCHAR(50) NOT NULL,
-  `object` VARCHAR(50) NOT NULL,
+  `profile` VARCHAR(100) NOT NULL,
+  `object` VARCHAR(150) NOT NULL,
   `type` VARCHAR(20) NOT NULL,
   `value` VARCHAR(50) NOT NULL,
   `named` ENUM('y','n') NOT NULL,

------------------------------------------------------------------------
r20710 | chealer | 2009-08-08 14:22:39 -0400 (sÃ¡b, 08 ago 2009) | 3 lines

[FIX] actually fix minor modifications (current page version isn't in tiki_history)
introduces DB field tiki_pages.version_minor


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20709)
+++ tiki.sql	(revision 20710)
@@ -1657,6 +1657,7 @@
   `lastModif` int(14) default NULL,
   `comment` varchar(200) default NULL,
   `version` int(8) NOT NULL default '0',
+  `version_minor` int(8) NOT NULL default '0',
   `user` varchar(200) default '',
   `ip` varchar(15) default NULL,
   `flag` char(1) default NULL,

------------------------------------------------------------------------
r20703 | kissaki | 2009-08-08 12:37:12 -0400 (sÃ¡b, 08 ago 2009) | 1 line

pgsql conversation

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20702)
+++ tiki.sql	(revision 20703)
@@ -528,9 +528,9 @@
 
 DROP TABLE IF EXISTS `tiki_calendar_options`;
 CREATE TABLE `tiki_calendar_options` (
-	calendarId int(14) NOT NULL default 0,
-	optionName varchar(120) NOT NULL default '',
-	value varchar(255),
+	`calendarId` int(14) NOT NULL default 0,
+	`optionName` varchar(120) NOT NULL default '',
+	`value` varchar(255),
 	PRIMARY KEY (`calendarId`,`optionName`)
 ) ENGINE=MyISAM ;
 
@@ -644,14 +644,14 @@
   `approved` char(1) NOT NULL default 'y',
   `locked` char(1) NOT NULL default 'n',
   PRIMARY KEY (`threadId`),
-  UNIQUE KEY `no_repeats` (parentId, userName(40), title(100), commentDate, message_id(40), in_reply_to(40)),
-  KEY `title` (title),
-  KEY `data` (data(255)),
+  UNIQUE KEY `no_repeats` (`parentId`, `userName`(40), `title`(100), `commentDate`, `message_id`(40), `in_reply_to`(40)),
+  KEY `title` (`title`),
+  KEY `data` (`data`(255)),
   KEY `hits` (hits),
-  KEY `tc_pi` (parentId),
-  KEY `objectType` (object, objectType),
+  KEY `tc_pi` (`parentId`),
+  KEY `objectType` (object, `objectType`),
   KEY `commentDate` (commentDate),
-  KEY `threaded` (message_id, in_reply_to, parentId),
+  KEY `threaded` (message_id, in_reply_to, `parentId`),
   FULLTEXT KEY `ft` (title,data)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -1339,7 +1339,7 @@
   `userlevel` int(4) default 0,
   `icon` varchar(200),
   PRIMARY KEY (`optionId`),
-  UNIQUE KEY `uniq_menu` (menuId,name(30),url(50),position,section(60),perm(50),groupname(50))
+  UNIQUE KEY `uniq_menu` (`menuId`,`name`(30),`url`(50),`position`,`section`(60),`perm`(50),`groupname`(50))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 -- when adding new inserts, order commands by position
@@ -1644,7 +1644,7 @@
   `user` varchar(200) NOT NULL default '',
   `pageName` varchar(250) NOT NULL default '',
   `data` text,
-  PRIMARY KEY (`user`(150),pageName(100))
+  PRIMARY KEY (`user`(150),`pageName`(100))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_pages`;
@@ -1675,11 +1675,11 @@
   `wysiwyg` char(1) default NULL,
   `wiki_authors_style` varchar(20) default '',
   PRIMARY KEY (`page_id`),
-  UNIQUE KEY `pageName` (pageName),
-  KEY `data` (data(255)),
-  KEY `pageRank` (pageRank),
-  FULLTEXT KEY `ft` (pageName,description,data),
-  KEY `lastModif`(lastModif)
+  UNIQUE KEY `pageName` (`pageName`),
+  KEY `data` (`data`(255)),
+  KEY `pageRank` (`pageRank`),
+  FULLTEXT KEY `ft` (`pageName`,`description`,`data`),
+  KEY `lastModif`(`lastModif`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
 DROP TABLE IF EXISTS `tiki_page_drafts`;

------------------------------------------------------------------------
r20696 | kissaki | 2009-08-08 09:14:39 -0400 (sÃ¡b, 08 ago 2009) | 1 line

work on pgsql conversion

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20695)
+++ tiki.sql	(revision 20696)
@@ -3694,7 +3694,7 @@
 );
 
 DROP TABLE IF EXISTS `tiki_user_reports`;
-CREATE TABLE IF NOT EXISTS `tiki_user_reports` (
+CREATE TABLE `tiki_user_reports` (
   `id` int(11) NOT NULL AUTO_INCREMENT,
   `user` varchar(200) NOT NULL,
   `interval` varchar(20) NOT NULL,
@@ -3707,7 +3707,7 @@
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_user_reports_cache`;
-CREATE TABLE IF NOT EXISTS `tiki_user_reports_cache` (
+CREATE TABLE `tiki_user_reports_cache` (
   `id` int(11) NOT NULL AUTO_INCREMENT,
   `user` varchar(200) NOT NULL,
   `event` varchar(200) NOT NULL,

------------------------------------------------------------------------
r20655 | lphuberdeau | 2009-08-07 09:39:29 -0400 (sex, 07 ago 2009) | 1 line

[NEW] Support for group transitions (interface through memberlist plugin for now)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20654)
+++ tiki.sql	(revision 20655)
@@ -2962,8 +2962,10 @@
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_group_remove_member', 'Can remove group members', 'admin', 'group', NULL, NULL);
 INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_group_join', 'Can join or leave the group', 'admin', 'group', NULL, NULL);
 
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_trigger_transition', 'Can trigger the transition between two states', 'admin', 'transition', NULL, 'feature_group_transition,feature_category_transition');
 
 
+
 DROP TABLE IF EXISTS `users_usergroups`;
 CREATE TABLE `users_usergroups` (
   `userId` int(8) NOT NULL default '0',
@@ -3729,3 +3731,15 @@
   PRIMARY KEY ( perspectiveId, pref )
 ) ENGINE=MyISAM;
 
+DROP TABLE IF EXISTS `tiki_transitions`;
+CREATE TABLE `tiki_transitions` (
+	`transitionId` int NOT NULL AUTO_INCREMENT,
+	`preserve` int(1) NOT NULL DEFAULT 0,
+	`name` varchar(50),
+	`type` varchar(20) NOT NULL,
+	`from` varchar(255) NOT NULL,
+	`to` varchar(255) NOT NULL,
+	PRIMARY KEY(`transitionId`),
+	KEY `transition_lookup` (`type`, `from`)
+) ENGINE=MyISAM;
+

------------------------------------------------------------------------
r20636 | kissaki | 2009-08-06 21:12:12 -0400 (qui, 06 ago 2009) | 1 line

pgsql some more and converted

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20635)
+++ tiki.sql	(revision 20636)
@@ -1167,7 +1167,7 @@
   PRIMARY KEY (`lang`)
 ) ENGINE=MyISAM;
 
-INSERT INTO tiki_languages(lang, language) VALUES('en','English');
+INSERT INTO tiki_languages (lang, language) VALUES ('en','English');
 
 DROP TABLE IF EXISTS `tiki_link_cache`;
 CREATE TABLE `tiki_link_cache` (

------------------------------------------------------------------------
r20634 | kissaki | 2009-08-06 21:00:58 -0400 (qui, 06 ago 2009) | 1 line

pgsql: more work

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20633)
+++ tiki.sql	(revision 20634)
@@ -185,7 +185,7 @@
   `expireref` varchar(64),
   `data` text NOT NULL,
   PRIMARY KEY (`sesskey`),
-  KEY `expiry` (`expiry`)
+  KEY `expiry` (expiry)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_actionlog`;
@@ -1086,7 +1086,7 @@
   `is_html` TINYINT(1) NOT NULL DEFAULT 0,
   PRIMARY KEY (`pageName`,`version`),
   KEY `user` (`user`),
-  KEY(historyId)
+  KEY (historyId)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_hotwords`;
@@ -3474,9 +3474,9 @@
   `original_translation_bit` int(10) NULL,
   `flags` SET('critical') NULL DEFAULT '',
   PRIMARY KEY (`translation_bit_id`),
-  KEY(`page_id`),
-  KEY(`original_translation_bit`),
-  KEY(`source_translation_bit`)
+  KEY (`page_id`),
+  KEY (`original_translation_bit`),
+  KEY (`source_translation_bit`)
 );
 
 DROP TABLE IF EXISTS `tiki_pages_changes`;
@@ -3486,7 +3486,7 @@
   `segments_added` int(10),
   `segments_removed` int(10),
   `segments_total` int(10),
-  PRIMARY KEY(page_id, version)
+  PRIMARY KEY (page_id, version)
 );
 
 DROP TABLE IF EXISTS `tiki_minichat`;
@@ -3566,7 +3566,7 @@
   `output` VARCHAR(15) NOT NULL,
   `content` TEXT NOT NULL,
   `last_modif` INT,
-  PRIMARY KEY( service, template )
+  PRIMARY KEY ( service, template )
 ) ENGINE=MyISAM ;
 
 DROP TABLE IF EXISTS `tiki_groupalert`;
@@ -3601,7 +3601,7 @@
   `feature` varchar(256) NULL default NULL,
   `comment` varchar(256),
   `order` int(11) NULL default 0,
-  PRIMARY KEY(`id`),
+  PRIMARY KEY (`id`),
   UNIQUE KEY `left` (`left`(128)),
   INDEX `idx1` (silent, type, feature(30))
 );
@@ -3718,7 +3718,7 @@
 CREATE TABLE `tiki_perspectives` (
   `perspectiveId` int NOT NULL AUTO_INCREMENT,
   `name` varchar(100) NOT NULL,
-  PRIMARY KEY( perspectiveId )
+  PRIMARY KEY ( perspectiveId )
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_perspective_preferences`;
@@ -3726,6 +3726,6 @@
   `perspectiveId` int NOT NULL,
   `pref` varchar(40) NOT NULL,
   `value` text,
-  PRIMARY KEY( perspectiveId, pref )
+  PRIMARY KEY ( perspectiveId, pref )
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r20633 | kissaki | 2009-08-06 20:21:23 -0400 (qui, 06 ago 2009) | 2 lines

pgsql convert script updated
+some other, smaller things

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20632)
+++ tiki.sql	(revision 20633)
@@ -179,7 +179,7 @@
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `sessions`;
-CREATE TABLE sessions(
+CREATE TABLE `sessions` (
   `sesskey` char(32) NOT NULL,
   `expiry` int(11) unsigned NOT NULL,
   `expireref` varchar(64),

------------------------------------------------------------------------
r20627 | jonnybradley | 2009-08-06 10:33:23 -0400 (qui, 06 ago 2009) | 3 lines

[ENH] Optionally only show perms for enabled features in object permissions list
Some notices


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20626)
+++ tiki.sql	(revision 20627)
@@ -2717,323 +2717,253 @@
   `level` varchar(80) default NULL,
   `type` varchar(20) default NULL,
   `admin` varchar(1) default NULL,
-  `feature_check` VARCHAR(50) NULL,
-  PRIMARY KEY (`permName`),
-  KEY `type` (type)
+  `feature_check` varchar(255) default NULL,
+  PRIMARY KEY  (`permName`),
+  KEY `type` (`type`)
 ) ENGINE=MyISAM;
 
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_calendar', 'Can create/admin calendars', 'admin', 'calendar', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_add_events', 'Can add events in the calendar', 'registered', 'calendar');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_change_events', 'Can change events in the calendar', 'registered', 'calendar');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_calendar', 'Can browse the calendar', 'basic', 'calendar');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_events', 'Can view events details', 'registered', 'calendar');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_tiki_calendar', 'Can view Tikiwiki tools calendar', 'basic', 'calendar');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_calendar', 'Can create/admin calendars', 'admin', 'calendar', 'y', 'feature_calendar');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_add_events', 'Can add events in the calendar', 'registered', 'calendar', NULL, 'feature_calendar');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_change_events', 'Can change events in the calendar', 'registered', 'calendar', NULL, 'feature_calendar');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_calendar', 'Can browse the calendar', 'basic', 'calendar', NULL, 'feature_calendar');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_events', 'Can view events details', 'registered', 'calendar', NULL, 'feature_calendar');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_tiki_calendar', 'Can view Tikiwiki tools calendar', 'basic', 'calendar', NULL, 'feature_calendar');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_chat', 'Administrator, can create channels remove channels etc', 'editors', 'chat', 'y', 'feature_minichat,feature_live_support');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_chat', 'Can use the chat system', 'registered', 'chat', NULL, 'feature_minichat,feature_live_support');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_cms', 'Can admin the cms', 'editors', 'cms', 'y', 'feature_articles');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_approve_submission', 'Can approve submissions', 'editors', 'cms', NULL, 'feature_articles');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_articles_admin_topics', 'Can admin article topics', 'editors', 'cms', NULL, 'feature_articles');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_articles_admin_types', 'Can admin article types', 'editors', 'cms', NULL, 'feature_articles');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_articles_read_heading', 'Can read article headings', 'basic', 'cms', NULL, 'feature_articles');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_autoapprove_submission', 'Submited articles automatically approved', 'editors', 'cms', NULL, 'feature_articles');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_article', 'Can edit articles', 'editors', 'cms', NULL, 'feature_articles');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_submission', 'Can edit submissions', 'editors', 'cms', NULL, 'feature_articles');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_read_article', 'Can read articles', 'basic', 'cms', NULL, 'feature_articles');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_remove_article', 'Can remove articles', 'editors', 'cms', NULL, 'feature_articles');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_remove_submission', 'Can remove submissions', 'editors', 'cms', NULL, 'feature_articles');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_submit_article', 'Can submit articles', 'basic', 'cms', NULL, 'feature_articles');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_topic_read', 'Can read a topic (Applies only to individual topic perms)', 'basic', 'cms', NULL, 'feature_articles');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_contribution', 'Can admin contributions', 'admin', 'contribution', 'y', 'feature_contribution');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_directory', 'Can admin the directory', 'editors', 'directory', 'y', 'feature_directory');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_directory_cats', 'Can admin directory categories', 'editors', 'directory', NULL, 'feature_directory');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_directory_sites', 'Can admin directory sites', 'editors', 'directory', NULL, 'feature_directory');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_autosubmit_link', 'Submited links are valid', 'editors', 'directory', NULL, 'feature_directory');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_submit_link', 'Can submit sites to the directory', 'basic', 'directory', NULL, 'feature_directory');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_validate_links', 'Can validate submited links', 'editors', 'directory', NULL, 'feature_directory');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_directory', 'Can use the directory', 'basic', 'directory', NULL, 'feature_directory');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_faqs', 'Can admin faqs', 'editors', 'faqs', 'y', 'feature_faqs');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_suggest_faq', 'Can suggest faq questions', 'basic', 'faqs', NULL, 'feature_faqs');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_faqs', 'Can view faqs', 'basic', 'faqs', NULL, 'feature_faqs');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin', 'Administrator, can manage users groups and permissions, Hotwords and all the weblog features', 'admin', 'tiki', 'y', NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_users', 'Can admin users', 'admin', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_access_closed_site', 'Can access site when closed', 'admin', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_banners', 'Administrator, can admin banners', 'admin', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_banning', 'Can ban users or ips', 'admin', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_dynamic', 'Can admin the dynamic content system', 'editors', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_integrator', 'Can admin integrator repositories and rules', 'admin', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_mailin', 'Can admin mail-in accounts', 'admin', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_objects', 'Can edit object permissions', 'admin', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_rssmodules', 'Can admin rss modules', 'admin', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_clean_cache', 'Can clean cache', 'editors', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_create_css', 'Can create new css suffixed with -user', 'registered', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_detach_translation', 'Can remove association between two pages in a translation set', 'registered', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_cookies', 'Can admin cookies', 'editors', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_languages', 'Can edit translations and create new languages', 'editors', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_menu', 'Can edit menu', 'admin', 'menus', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_menu_option', 'Can edit menu option', 'admin', 'menus', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_templates', 'Can edit site templates', 'admin', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_search', 'Can search', 'basic', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_site_report', 'Can report a link to the webmaster', 'basic', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_subscribe_groups', 'Can subscribe to groups', 'registered', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tell_a_friend', 'Can send a link to a friend', 'Basic', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_use_HTML', 'Can use HTML in pages', 'editors', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_actionlog', 'Can view action log', 'registered', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_actionlog_owngroups', 'Can view action log for users of his own groups', 'registered', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_integrator', 'Can view integrated repositories', 'basic', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_referer_stats', 'Can view referer stats', 'editors', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_stats', 'Can view site stats', 'basic', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_templates', 'Can view site templates', 'admin', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_blog_admin', 'Can admin blogs', 'editors', 'blogs', 'y', 'feature_blogs');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_assign_perm_blog', 'Can assign perms to blog', 'admin', 'blogs', NULL, 'feature_blogs');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_blog_post', 'Can post to a blog', 'registered', 'blogs', NULL, 'feature_blogs');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_create_blogs', 'Can create a blog', 'editors', 'blogs', NULL, 'feature_blogs');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_read_blog', 'Can read blogs', 'basic', 'blogs', NULL, 'feature_blogs');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_file_galleries', 'Can admin file galleries', 'editors', 'file galleries', 'y', 'feature_file_galleries');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_assign_perm_file_gallery', 'Can assign perms to file gallery', 'admin', 'file galleries', NULL, 'feature_file_galleries');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_batch_upload_file_dir', 'Can use Directory Batch Load', 'editors', 'file galleries', NULL, 'feature_file_galleries');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_batch_upload_files', 'Can upload zip files with files', 'editors', 'file galleries', NULL, 'feature_file_galleries');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_create_file_galleries', 'Can create file galleries', 'editors', 'file galleries', NULL, 'feature_file_galleries');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_download_files', 'Can download files', 'basic', 'file galleries', NULL, 'feature_file_galleries');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_gallery_file', 'Can edit a gallery file', 'editors', 'file galleries', NULL, 'feature_file_galleries');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_list_file_galleries', 'Can list file galleries', 'basic', 'file galleries', NULL, 'feature_file_galleries');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_upload_files', 'Can upload files', 'registered', 'file galleries', NULL, 'feature_file_galleries');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_fgal_explorer', 'Can view file galleries explorer', 'basic', 'file galleries', NULL, 'feature_file_galleries');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_fgal_path', 'Can view file galleries path', 'basic', 'file galleries', NULL, 'feature_file_galleries');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_file_gallery', 'Can view file galleries', 'basic', 'file galleries', NULL, 'feature_file_galleries');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_forum', 'Can admin forums', 'editors', 'forums', 'y', 'feature_forums');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_forum_attach', 'Can attach to forum posts', 'registered', 'forums', NULL, 'feature_forums');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_forum_autoapp', 'Auto approve forum posts', 'editors', 'forums', NULL, 'feature_forums');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_forum_edit_own_posts', 'Can edit own forum posts', 'registered', 'forums', NULL, 'feature_forums');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_forum_post', 'Can post in forums', 'registered', 'forums', NULL, 'feature_forums');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_forum_post_topic', 'Can start threads in forums', 'registered', 'forums', NULL, 'feature_forums');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_forum_read', 'Can read forums', 'basic', 'forums', NULL, 'feature_forums');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_forums_report', 'Can report msgs to moderator', 'registered', 'forums', NULL, 'feature_forums');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_forum_vote', 'Can vote comments in forums', 'registered', 'forums', NULL, 'feature_forums');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_freetags', 'Can admin freetags', 'admin', 'freetags', 'y', 'feature_freetags');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_galleries', 'Can admin Image Galleries', 'editors', 'image galleries', 'y', 'feature_galleries');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_assign_perm_image_gallery', 'Can assign perms to image gallery', 'admin', 'image galleries', NULL, 'feature_galleries');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_batch_upload_image_dir', 'Can use Directory Batch Load', 'editors', 'image galleries', NULL, 'feature_galleries');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_batch_upload_images', 'Can upload zip files with images', 'editors', 'image galleries', NULL, 'feature_galleries');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_create_galleries', 'Can create image galleries', 'editors', 'image galleries', NULL, 'feature_galleries');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_freetags_tag', 'Can tag objects', 'registered', 'freetags', NULL, 'feature_freetags');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_list_image_galleries', 'Can list image galleries', 'basic', 'image galleries', NULL, 'feature_galleries');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_unassign_freetags', 'Can unassign tags from an object', 'basic', 'freetags', NULL, 'feature_freetags');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_upload_images', 'Can upload images', 'registered', 'image galleries', NULL, 'feature_galleries');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_freetags', 'Can browse freetags', 'basic', 'freetags', NULL, 'feature_freetags');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_image_gallery', 'Can view image galleries', 'basic', 'image galleries', NULL, 'feature_galleries');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_newsletters', 'Can admin newsletters', 'admin', 'newsletters', 'y', 'feature_newsletters');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_batch_subscribe_email', 'Can subscribe many e-mails at once (requires tiki_p_subscribe email)', 'editors', 'newsletters', NULL, 'feature_newsletters');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_send_newsletters', 'Can send newsletters', 'editors', 'newsletters', NULL, 'feature_newsletters');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_subscribe_email', 'Can subscribe any email to newsletters', 'editors', 'newsletters', NULL, 'feature_newsletters');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_subscribe_newsletters', 'Can subscribe to newsletters', 'basic', 'newsletters', NULL, 'feature_newsletters');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_list_newsletters', 'Can list newsletters', 'basic', 'newsletters', NULL, 'feature_newsletters');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_polls', 'Can admin polls', 'admin', 'polls', 'y', 'feature_polls');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_poll_results', 'Can view poll results', 'basic', 'polls', NULL, 'feature_polls');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_vote_poll', 'Can vote polls', 'basic', 'polls', NULL, 'feature_polls');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_poll_voters', 'Can view poll voters', 'basic', 'polls', NULL, 'feature_polls');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_quicktags', 'Can admin quicktags', 'admin', 'quicktags', 'y', NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_quizzes', 'Can admin quizzes', 'editors', 'quizzes', 'y', 'feature_quizzes');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_take_quiz', 'Can take quizzes', 'basic', 'quizzes', NULL, 'feature_quizzes');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_quiz_stats', 'Can view quiz stats', 'basic', 'quizzes', NULL, 'feature_quizzes');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_user_results', 'Can view user quiz results', 'editors', 'quizzes', NULL, 'feature_quizzes');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_sheet', 'Can admin sheet', 'admin', 'sheet', 'y', 'feature_sheet');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_sheet', 'Can create and edit sheets', 'editors', 'sheet', NULL, 'feature_sheet');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_sheet', 'Can view sheet', 'basic', 'sheet', NULL, 'feature_sheet');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_sheet_history', 'Can view sheet history', 'admin', 'sheet', NULL, 'feature_sheet');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_shoutbox', 'Can admin shoutbox (Edit/remove msgs)', 'editors', 'shoutbox', 'y', 'feature_shoutbox');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_post_shoutbox', 'Can post messages in shoutbox', 'basic', 'shoutbox', NULL, 'feature_shoutbox');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_shoutbox', 'Can view shoutbox', 'basic', 'shoutbox', NULL, 'feature_shoutbox');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_surveys', 'Can admin surveys', 'editors', 'surveys', 'y', 'feature_surveys');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_take_survey', 'Can take surveys', 'basic', 'surveys', NULL, 'feature_surveys');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_survey_stats', 'Can view survey stats', 'basic', 'surveys', NULL, 'feature_surveys');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_trackers', 'Can admin trackers', 'editors', 'trackers', 'y', 'feature_trackers');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_attach_trackers', 'Can attach files to tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_comment_tracker_items', 'Can insert comments for tracker items', 'basic', 'trackers', NULL, 'feature_trackers');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tracker_view_comments', 'Can view tracker items comments', 'basic', 'trackers', NULL, 'feature_trackers');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_create_tracker_items', 'Can create new items for trackers', 'registered', 'trackers', NULL, 'feature_trackers');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_list_trackers', 'Can list trackers', 'basic', 'trackers', NULL, 'feature_trackers');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_modify_tracker_items', 'Can change tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_modify_tracker_items_pending', 'Can change tracker pending items', 'registered', 'trackers', NULL, 'feature_trackers');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_modify_tracker_items_closed', 'Can change tracker closed items', 'registered', 'trackers', NULL, 'feature_trackers');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tracker_view_ratings', 'Can view rating result for tracker items', 'basic', 'trackers', NULL, 'feature_trackers');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tracker_vote_ratings', 'Can vote a rating for tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_trackers', 'Can view trackers', 'basic', 'trackers', NULL, 'feature_trackers');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_trackers_closed', 'Can view trackers closed items', 'registered', 'trackers', NULL, 'feature_trackers');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_trackers_pending', 'Can view trackers pending items', 'editors', 'trackers', NULL, 'feature_trackers');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_watch_trackers', 'Can watch tracker', 'registered', 'trackers', NULL, 'feature_trackers');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_export_tracker', 'Can export tracker items', 'registered', 'trackers', NULL, 'feature_trackers');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_wiki', 'Can admin the wiki', 'editors', 'wiki', 'y', 'feature_wiki');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_assign_perm_wiki_page', 'Can assign perms to wiki pages', 'admin', 'wiki', NULL, 'feature_wiki');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit', 'Can edit pages', 'registered', 'wiki', NULL, 'feature_wiki');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_copyrights', 'Can edit copyright notices', 'editors', 'wiki', NULL, 'wiki_feature_copyrights');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_dynvar', 'Can edit dynamic variables', 'editors', 'wiki', NULL, 'feature_wiki');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_structures', 'Can create and edit structures', 'editors', 'wiki', NULL, 'feature_wiki_structure');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_export_wiki', 'Can export wiki pages using the export feature', 'admin', 'wiki', NULL, 'feature_wiki_export');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_lock', 'Can lock pages', 'editors', 'wiki', NULL, 'feature_wiki');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_minor', 'Can save as minor edit', 'registered', 'wiki', NULL, 'feature_wiki');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_remove', 'Can remove', 'editors', 'wiki', NULL, 'feature_wiki');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_rename', 'Can rename pages', 'editors', 'wiki', NULL, 'feature_wiki');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_rollback', 'Can rollback pages', 'editors', 'wiki', NULL, 'feature_wiki');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_upload_picture', 'Can upload pictures to wiki pages', 'registered', 'wiki', NULL, 'feature_wiki_pictures');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_use_as_template', 'Can use the page as a tracker template', 'basic', 'wiki', NULL, 'feature_wiki_templates');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view', 'Can view page/pages', 'basic', 'wiki', NULL, 'feature_wiki');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_watch_structure', 'Can watch structure', 'registered', 'wiki', NULL, 'feature_wiki_structure');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_admin_attachments', 'Can admin attachments to wiki pages', 'editors', 'wiki', NULL, 'feature_wiki_attachments');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_admin_ratings', 'Can add and change ratings on wiki pages', 'admin', 'wiki', NULL, 'feature_wiki_ratings');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_attach_files', 'Can attach files to wiki pages', 'registered', 'wiki', NULL, 'feature_wiki_attachments');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_view_attachments', 'Can view wiki attachments and download', 'registered', 'wiki', NULL, 'feature_wiki_attachments');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_view_comments', 'Can view wiki comments', 'basic', 'wiki', NULL, 'feature_wiki_comments');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_view_history', 'Can view wiki history', 'basic', 'wiki', NULL, 'feature_history');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_view_ratings', 'Can view rating of wiki pages', 'basic', 'wiki', NULL, 'feature_wiki_ratings');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_view_source', 'Can view source of wiki pages', 'basic', 'wiki', NULL, 'feature_source');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_vote_ratings', 'Can participate to rating of wiki pages', 'registered', 'wiki', NULL, 'feature_wiki_ratings');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_wiki_view_similar', 'Can view similar wiki pages', 'registered', 'wiki', NULL, 'feature_wiki');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_workflow', 'Can admin workflow processes', 'admin', 'workflow', 'y', 'feature_workflow');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_abort_instance', 'Can abort a process instance', 'editors', 'workflow', NULL, 'feature_workflow');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_exception_instance', 'Can declare an instance as exception', 'registered', 'workflow', NULL, 'feature_workflow');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_send_instance', 'Can send instances after completion', 'registered', 'workflow', NULL, 'feature_workflow');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_use_workflow', 'Can execute workflow activities', 'registered', 'workflow', NULL, 'feature_workflow');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_received_articles', 'Can admin received articles', 'editors', 'comm', NULL, 'feature_comm');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_received_pages', 'Can admin received pages', 'editors', 'comm', NULL, 'feature_comm');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_send_articles', 'Can send articles to other sites', 'editors', 'comm', NULL, 'feature_comm');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_sendme_articles', 'Can send articles to this site', 'registered', 'comm', NULL, 'feature_comm');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_sendme_pages', 'Can send pages to this site', 'registered', 'comm', NULL, 'feature_comm');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_send_pages', 'Can send pages to other sites', 'registered', 'comm', NULL, 'feature_comm');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_tikitests', 'Can admin the TikiTests', 'admin', 'tikitests', NULL, 'feature_tikitests');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_tikitests', 'Can edit TikiTests', 'editors', 'tikitests', NULL, 'feature_tikitests');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_play_tikitests', 'Can replay the TikiTests', 'registered', 'tikitests', NULL, 'feature_tikitests');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_cache_bookmarks', 'Can cache user bookmarks', 'admin', 'user', NULL, 'feature_user_bookmarks');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_configure_modules', 'Can configure modules', 'registered', 'user', NULL, 'feature_modulecontrols');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_create_bookmarks', 'Can create user bookmarks', 'registered', 'user', NULL, 'feature_user_bookmarks');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_minical', 'Can use the mini event calendar', 'registered', 'user', NULL, 'feature_minical');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_notepad', 'Can use the notepad', 'registered', 'user', NULL, 'feature_notepad');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tasks_admin', 'Can admin public tasks', 'admin', 'user', NULL, 'feature_tasks');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tasks', 'Can use tasks', 'registered', 'user', NULL, 'feature_tasks');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tasks_receive', 'Can receive tasks from other users', 'registered', 'user', NULL, 'feature_tasks');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_tasks_send', 'Can send tasks to other users', 'registered', 'user', NULL, 'feature_tasks');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_userfiles', 'Can upload personal files', 'registered', 'user', NULL, 'feature_userfiles');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_usermenu', 'Can create items in personal menu', 'registered', 'user', NULL, 'feature_usermenu');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_broadcast_all', 'Can broadcast messages to all user', 'admin', 'messu', NULL, 'feature_messages');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_broadcast', 'Can broadcast messages to groups', 'admin', 'messu', NULL, 'feature_messages');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_messages', 'Can use the messaging system', 'registered', 'messu', NULL, 'feature_messages');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_comments', 'Can admin comments', 'admin', 'comments', 'y', 'feature_wiki_comments,feature_blog_comments,feature_blogposts_comments,feature_file_galleries_comments,feature_image_galleries_comments,feature_article_comments,feature_faq_comments,feature_poll_comments,map_comments');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_comments', 'Can edit all comments', 'editors', 'comments', NULL, 'feature_wiki_comments,feature_blog_comments,feature_blogposts_comments,feature_file_galleries_comments,feature_image_galleries_comments,feature_article_comments,feature_faq_comments,feature_poll_comments,map_comments');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_post_comments', 'Can post new comments', 'registered', 'comments', NULL, 'feature_wiki_comments,feature_blog_comments,feature_blogposts_comments,feature_file_galleries_comments,feature_image_galleries_comments,feature_article_comments,feature_faq_comments,feature_poll_comments,map_comments');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_read_comments', 'Can read comments', 'basic', 'comments', NULL, 'feature_wiki_comments,feature_blog_comments,feature_blogposts_comments,feature_file_galleries_comments,feature_image_galleries_comments,feature_article_comments,feature_faq_comments,feature_poll_comments,map_comments');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_remove_comments', 'Can delete comments', 'editors', 'comments', NULL, 'feature_wiki_comments,feature_blog_comments,feature_blogposts_comments,feature_file_galleries_comments,feature_image_galleries_comments,feature_article_comments,feature_faq_comments,feature_poll_comments,map_comments');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_vote_comments', 'Can vote comments', 'registered', 'comments', NULL, 'feature_wiki_comments,feature_blog_comments,feature_blogposts_comments,feature_file_galleries_comments,feature_image_galleries_comments,feature_article_comments,feature_faq_comments,feature_poll_comments,map_comments');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_content_templates', 'Can admin content templates', 'admin', 'content templates', 'y', 'feature_wiki_templates,feature_cms_templates');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_content_templates', 'Can edit content templates', 'editors', 'content templates', NULL, 'feature_wiki_templates,feature_cms_templates');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_use_content_templates', 'Can use content templates', 'registered', 'content templates', NULL, 'feature_wiki_templates,feature_cms_templates');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_edit_html_pages', 'Can edit HTML pages', 'editors', 'html pages', NULL, 'feature_html_pages');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_html_pages', 'Can view HTML pages', 'basic', 'html pages', NULL, 'feature_html_pages');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_list_users', 'Can list registered users', 'registered', 'community', NULL, 'feature_friends');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_live_support_admin', 'Admin live support system', 'admin', 'support', 'y', 'feature_live_support');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_live_support', 'Can use live support system', 'basic', 'support', NULL, 'feature_live_support');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_map_create', 'Can create new mapfile', 'admin', 'maps', NULL, 'feature_maps');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_map_delete', 'Can delete mapfiles', 'admin', 'maps', NULL, 'feature_maps');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_map_edit', 'Can edit mapfiles', 'editors', 'maps', NULL, 'feature_maps');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_map_view', 'Can view mapfiles', 'basic', 'maps', NULL, 'feature_maps');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_map_view_mapfiles', 'Can view contents of mapfiles', 'registered', 'maps', NULL, 'feature_maps');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_use_webmail', 'Can use webmail', 'registered', 'webmail', NULL, 'feature_webmail,feature_contacts');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_use_group_webmail', 'Can use group webmail', 'registered', 'webmail', NULL, 'feature_webmail,feature_contacts');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_group_webmail', 'Can administrate group webmail accounts', 'registered', 'webmail', NULL, 'feature_webmail,feature_contacts');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_use_personal_webmail', 'Can use personal webmail accounts', 'registered', 'webmail', NULL, 'feature_webmail,feature_contacts');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_personal_webmail', 'Can administrate personal webmail accounts', 'registered', 'webmail', NULL, 'feature_webmail,feature_contacts');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_plugin_viewdetail', 'Can view unapproved plugin details', 'registered', 'wiki', NULL, 'feature_wiki');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_plugin_preview', 'Can execute unapproved plugin', 'registered', 'wiki', NULL, 'feature_wiki');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_plugin_approve', 'Can approve plugin execution', 'editors', 'wiki', NULL, 'feature_wiki');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_trust_input', 'Trust all user inputs (no security checks)', 'admin', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_backlink', 'View page backlinks', 'basic', 'wiki', NULL, 'feature_wiki');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_notifications', 'Can admin mail notifications', 'editors', 'mail notifications', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_invite', 'Can invite user in groups', 'editors', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_delete_account', 'Can delete his own account', 'admin', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_importer', 'Can use the Tiki Importer', 'admin', 'tiki', 'y', NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_admin_categories', 'Can admin categories', 'editors', 'category', 'y', 'feature_categories');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_view_category', 'Can see the category in a listing', 'basic', 'category', NULL, 'feature_categories');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_modify_object_categories', 'Can change the categories on the object', 'editors', 'tiki', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_add_object', 'Can add objects in the category', 'editors', 'category', NULL, 'feature_categories');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_remove_object', 'Can remove objects from the category', 'editors', 'category', NULL, 'feature_categories');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_create_category', 'Can create new categories', 'admin', 'category', NULL, 'feature_categories');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_perspective_view', 'Can view the perspective', 'basic', 'perspective', NULL, 'feature_perspective');
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_group_view', 'Can view the group', 'basic', 'group', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_group_view_members', 'Can view the group members', 'basic', 'group', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_group_add_member', 'Can add group members', 'admin', 'group', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_group_remove_member', 'Can remove group members', 'admin', 'group', NULL, NULL);
+INSERT INTO `users_permissions` (`permName`, `permDesc`, `level`, `type`, `admin`, `feature_check`) VALUES('tiki_p_group_join', 'Can join or leave the group', 'admin', 'group', NULL, NULL);
 
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_chat', 'Administrator, can create channels remove channels etc', 'editors', 'chat', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_chat', 'Can use the chat system', 'registered', 'chat');
 
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_cms', 'Can admin the cms', 'editors', 'cms', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_approve_submission', 'Can approve submissions', 'editors', 'cms');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_articles_admin_topics', 'Can admin article topics', 'editors', 'cms');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_articles_admin_types', 'Can admin article types', 'editors', 'cms');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_articles_read_heading', 'Can read article headings', 'basic', 'cms');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_autoapprove_submission', 'Submited articles automatically approved', 'editors', 'cms');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_article', 'Can edit articles', 'editors', 'cms');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_submission', 'Can edit submissions', 'editors', 'cms');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_read_article', 'Can read articles', 'basic', 'cms');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_remove_article', 'Can remove articles', 'editors', 'cms');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_remove_submission', 'Can remove submissions', 'editors', 'cms');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_submit_article', 'Can submit articles', 'basic', 'cms');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_topic_read', 'Can read a topic (Applies only to individual topic perms)', 'basic', 'cms');
 
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_contribution', 'Can admin contributions', 'admin', 'contribution', 'y');
-
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_directory', 'Can admin the directory', 'editors', 'directory', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_directory_cats', 'Can admin directory categories', 'editors', 'directory');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_directory_sites', 'Can admin directory sites', 'editors', 'directory');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_autosubmit_link', 'Submited links are valid', 'editors', 'directory');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_submit_link', 'Can submit sites to the directory', 'basic', 'directory');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_validate_links', 'Can validate submited links', 'editors', 'directory');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_directory', 'Can use the directory', 'basic', 'directory');
-
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_faqs', 'Can admin faqs', 'editors', 'faqs', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_suggest_faq', 'Can suggest faq questions', 'basic', 'faqs');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_faqs', 'Can view faqs', 'basic', 'faqs');
-
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin', 'Administrator, can manage users groups and permissions, Hotwords and all the weblog features', 'admin', 'tiki', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_users', 'Can admin users', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_access_closed_site', 'Can access site when closed', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_banners', 'Administrator, can admin banners', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_banning', 'Can ban users or ips', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_dynamic', 'Can admin the dynamic content system', 'editors', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_integrator', 'Can admin integrator repositories and rules', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_mailin', 'Can admin mail-in accounts', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_objects','Can edit object permissions', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_rssmodules','Can admin rss modules', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_clean_cache', 'Can clean cache', 'editors', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_create_css', 'Can create new css suffixed with -user', 'registered', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_detach_translation', 'Can remove association between two pages in a translation set', 'registered', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_cookies', 'Can admin cookies', 'editors', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_languages', 'Can edit translations and create new languages', 'editors', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_menu', 'Can edit menu', 'admin', 'menus');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_menu_option', 'Can edit menu option', 'admin', 'menus');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_templates', 'Can edit site templates', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_search', 'Can search', 'basic', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_site_report', 'Can report a link to the webmaster', 'basic', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_subscribe_groups', 'Can subscribe to groups', 'registered', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tell_a_friend', 'Can send a link to a friend', 'Basic', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_HTML', 'Can use HTML in pages', 'editors', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_actionlog', 'Can view action log', 'registered', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_actionlog_owngroups', 'Can view action log for users of his own groups', 'registered', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_integrator', 'Can view integrated repositories', 'basic', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_referer_stats', 'Can view referer stats', 'editors', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_stats', 'Can view site stats', 'basic', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_templates', 'Can view site templates', 'admin', 'tiki');
-
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_blog_admin', 'Can admin blogs', 'editors', 'blogs', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_blog', 'Can assign perms to blog', 'admin', 'blogs');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_blog_post', 'Can post to a blog', 'registered', 'blogs');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_create_blogs', 'Can create a blog', 'editors', 'blogs');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_read_blog', 'Can read blogs', 'basic', 'blogs');
-
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_file_galleries', 'Can admin file galleries', 'editors', 'file galleries', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_file_gallery', 'Can assign perms to file gallery', 'admin', 'file galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_file_dir', 'Can use Directory Batch Load', 'editors', 'file galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_files', 'Can upload zip files with files', 'editors', 'file galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_create_file_galleries', 'Can create file galleries', 'editors', 'file galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_download_files', 'Can download files', 'basic', 'file galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_gallery_file', 'Can edit a gallery file', 'editors', 'file galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_file_galleries', 'Can list file galleries', 'basic', 'file galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_upload_files', 'Can upload files', 'registered', 'file galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_fgal_explorer', 'Can view file galleries explorer', 'basic', 'file galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_fgal_path', 'Can view file galleries path', 'basic', 'file galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_file_gallery', 'Can view file galleries', 'basic', 'file galleries');
-
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_forum', 'Can admin forums', 'editors', 'forums', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forum_attach', 'Can attach to forum posts', 'registered', 'forums');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forum_autoapp', 'Auto approve forum posts', 'editors', 'forums');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forum_edit_own_posts', 'Can edit own forum posts', 'registered', 'forums');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forum_post', 'Can post in forums', 'registered', 'forums');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forum_post_topic', 'Can start threads in forums', 'registered', 'forums');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forum_read', 'Can read forums', 'basic', 'forums');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forums_report', 'Can report msgs to moderator', 'registered', 'forums');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forum_vote', 'Can vote comments in forums', 'registered', 'forums');
-
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_freetags', 'Can admin freetags', 'admin', 'freetags', 'y');
-
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_galleries', 'Can admin Image Galleries', 'editors', 'image galleries', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_image_gallery', 'Can assign perms to image gallery', 'admin', 'image galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_image_dir', 'Can use Directory Batch Load', 'editors', 'image galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_images', 'Can upload zip files with images', 'editors', 'image galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_create_galleries', 'Can create image galleries', 'editors', 'image galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_freetags_tag', 'Can tag objects', 'registered', 'freetags');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_image_galleries', 'Can list image galleries', 'basic', 'image galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_unassign_freetags', 'Can unassign tags from an object', 'basic', 'freetags');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_upload_images', 'Can upload images', 'registered', 'image galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_freetags', 'Can browse freetags', 'basic', 'freetags');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_image_gallery', 'Can view image galleries', 'basic', 'image galleries');
-
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_newsletters', 'Can admin newsletters', 'admin', 'newsletters', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_subscribe_email', 'Can subscribe many e-mails at once (requires tiki_p_subscribe email)', 'editors', 'newsletters');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_send_newsletters', 'Can send newsletters', 'editors', 'newsletters');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_subscribe_email', 'Can subscribe any email to newsletters', 'editors', 'newsletters');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_subscribe_newsletters', 'Can subscribe to newsletters', 'basic', 'newsletters');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_newsletters', 'Can list newsletters', 'basic', 'newsletters');
-
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_polls','Can admin polls', 'admin', 'polls', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_poll_results', 'Can view poll results', 'basic', 'polls');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_vote_poll', 'Can vote polls', 'basic', 'polls');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_poll_voters', 'Can view poll voters', 'basic', 'polls');
-
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_quicktags', 'Can admin quicktags', 'admin', 'quicktags', 'y');
-
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_quizzes', 'Can admin quizzes', 'editors', 'quizzes', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_take_quiz', 'Can take quizzes', 'basic', 'quizzes');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_quiz_stats', 'Can view quiz stats', 'basic', 'quizzes');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_user_results', 'Can view user quiz results', 'editors', 'quizzes');
-
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_sheet', 'Can admin sheet', 'admin', 'sheet', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_sheet', 'Can create and edit sheets', 'editors', 'sheet');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_sheet', 'Can view sheet', 'basic', 'sheet');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_sheet_history', 'Can view sheet history', 'admin', 'sheet');
-
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_shoutbox', 'Can admin shoutbox (Edit/remove msgs)', 'editors', 'shoutbox', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_post_shoutbox', 'Can post messages in shoutbox', 'basic', 'shoutbox');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_shoutbox', 'Can view shoutbox', 'basic', 'shoutbox');
-
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_surveys', 'Can admin surveys', 'editors', 'surveys', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_take_survey', 'Can take surveys', 'basic', 'surveys');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_survey_stats', 'Can view survey stats', 'basic', 'surveys');
-
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_trackers', 'Can admin trackers', 'editors', 'trackers', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_attach_trackers', 'Can attach files to tracker items', 'registered', 'trackers');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_comment_tracker_items', 'Can insert comments for tracker items', 'basic', 'trackers');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tracker_view_comments', 'Can view tracker items comments', 'basic', 'trackers');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_create_tracker_items', 'Can create new items for trackers', 'registered', 'trackers');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_trackers', 'Can list trackers', 'basic', 'trackers');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_modify_tracker_items', 'Can change tracker items', 'registered', 'trackers');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_modify_tracker_items_pending', 'Can change tracker pending items', 'registered', 'trackers');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_modify_tracker_items_closed', 'Can change tracker closed items', 'registered', 'trackers');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tracker_view_ratings', 'Can view rating result for tracker items', 'basic', 'trackers');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tracker_vote_ratings', 'Can vote a rating for tracker items', 'registered', 'trackers');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_trackers', 'Can view trackers', 'basic', 'trackers');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_trackers_closed', 'Can view trackers closed items', 'registered', 'trackers');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_trackers_pending', 'Can view trackers pending items', 'editors', 'trackers');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_watch_trackers', 'Can watch tracker', 'registered', 'trackers');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_export_tracker', 'Can export tracker items', 'registered', 'trackers');
-
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_wiki', 'Can admin the wiki', 'editors', 'wiki', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_wiki_page', 'Can assign perms to wiki pages', 'admin', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit', 'Can edit pages', 'registered', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_copyrights', 'Can edit copyright notices', 'editors', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_dynvar', 'Can edit dynamic variables', 'editors', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_structures', 'Can create and edit structures', 'editors', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_export_wiki', 'Can export wiki pages using the export feature', 'admin', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_lock', 'Can lock pages', 'editors', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_minor', 'Can save as minor edit', 'registered', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_remove', 'Can remove', 'editors', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_rename', 'Can rename pages', 'editors', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_rollback', 'Can rollback pages', 'editors', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_upload_picture', 'Can upload pictures to wiki pages', 'registered', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_as_template', 'Can use the page as a tracker template', 'basic', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view', 'Can view page/pages', 'basic', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_watch_structure', 'Can watch structure', 'registered', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_admin_attachments', 'Can admin attachments to wiki pages', 'editors', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_admin_ratings', 'Can add and change ratings on wiki pages', 'admin', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_attach_files', 'Can attach files to wiki pages', 'registered', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_view_attachments', 'Can view wiki attachments and download', 'registered', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_view_comments', 'Can view wiki comments', 'basic', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_view_history', 'Can view wiki history', 'basic', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_view_ratings', 'Can view rating of wiki pages', 'basic', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_view_source', 'Can view source of wiki pages', 'basic', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_vote_ratings', 'Can participate to rating of wiki pages', 'registered', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_view_similar', 'Can view similar wiki pages', 'registered', 'wiki');
-
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_workflow', 'Can admin workflow processes', 'admin', 'workflow', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_abort_instance', 'Can abort a process instance', 'editors', 'workflow');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_exception_instance', 'Can declare an instance as exception', 'registered', 'workflow');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_send_instance', 'Can send instances after completion', 'registered', 'workflow');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_workflow', 'Can execute workflow activities', 'registered', 'workflow');
-
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_received_articles', 'Can admin received articles', 'editors', 'comm');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_received_pages', 'Can admin received pages', 'editors', 'comm');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_send_articles', 'Can send articles to other sites', 'editors', 'comm');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_sendme_articles', 'Can send articles to this site', 'registered', 'comm');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_sendme_pages', 'Can send pages to this site', 'registered', 'comm');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_send_pages', 'Can send pages to other sites', 'registered', 'comm');
-
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_tikitests', 'Can admin the TikiTests', 'admin', 'tikitests');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_tikitests', 'Can edit TikiTests', 'editors', 'tikitests');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_play_tikitests', 'Can replay the TikiTests', 'registered', 'tikitests');
-
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_cache_bookmarks', 'Can cache user bookmarks', 'admin', 'user');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_configure_modules', 'Can configure modules', 'registered', 'user');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_create_bookmarks', 'Can create user bookmarks', 'registered', 'user');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_minical', 'Can use the mini event calendar', 'registered', 'user');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_notepad', 'Can use the notepad', 'registered', 'user');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tasks_admin', 'Can admin public tasks', 'admin', 'user');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tasks', 'Can use tasks', 'registered', 'user');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tasks_receive', 'Can receive tasks from other users', 'registered', 'user');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tasks_send', 'Can send tasks to other users', 'registered', 'user');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_userfiles', 'Can upload personal files', 'registered', 'user');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_usermenu', 'Can create items in personal menu', 'registered', 'user');
-
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_broadcast_all', 'Can broadcast messages to all user', 'admin', 'messu');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_broadcast', 'Can broadcast messages to groups', 'admin', 'messu');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_messages', 'Can use the messaging system', 'registered', 'messu');
-
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_comments', 'Can admin comments', 'admin', 'comments', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_comments', 'Can edit all comments', 'editors', 'comments');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_post_comments', 'Can post new comments', 'registered', 'comments');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_read_comments', 'Can read comments', 'basic', 'comments');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_remove_comments', 'Can delete comments', 'editors', 'comments');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_vote_comments', 'Can vote comments', 'registered', 'comments');
-
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_content_templates', 'Can admin content templates', 'admin', 'content templates', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_content_templates', 'Can edit content templates', 'editors', 'content templates');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_content_templates', 'Can use content templates', 'registered', 'content templates');
-
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_html_pages', 'Can edit HTML pages', 'editors', 'html pages');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_html_pages', 'Can view HTML pages', 'basic', 'html pages');
-
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_users', 'Can list registered users', 'registered', 'community');
-
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_live_support_admin', 'Admin live support system', 'admin', 'support', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_live_support', 'Can use live support system', 'basic', 'support');
-
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_map_create', 'Can create new mapfile', 'admin', 'maps');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_map_delete', 'Can delete mapfiles', 'admin', 'maps');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_map_edit', 'Can edit mapfiles', 'editors', 'maps');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_map_view', 'Can view mapfiles', 'basic', 'maps');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_map_view_mapfiles', 'Can view contents of mapfiles', 'registered', 'maps');
-
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_webmail', 'Can use webmail', 'registered', 'webmail');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_group_webmail', 'Can use group webmail', 'registered', 'webmail');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_group_webmail', 'Can administrate group webmail accounts', 'registered', 'webmail');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_personal_webmail', 'Can use personal webmail accounts', 'registered', 'webmail');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_personal_webmail', 'Can administrate personal webmail accounts', 'registered', 'webmail');
-
-
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_plugin_viewdetail', 'Can view unapproved plugin details', 'registered', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_plugin_preview', 'Can execute unapproved plugin', 'registered', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_plugin_approve', 'Can approve plugin execution', 'editors', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_trust_input', 'Trust all user inputs (no security checks)', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_backlink', 'View page backlinks', 'basic', 'wiki');
-
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_notifications', 'Can admin mail notifications', 'editors', 'mail notifications');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_invite', 'Can invite user in groups', 'editors', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_delete_account', 'Can delete his own account', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_importer', 'Can use the Tiki Importer', 'admin', 'tiki', 'y');
- 
- INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_categories', 'Can admin categories', 'editors', 'category', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_category', 'Can see the category in a listing', 'basic', 'category');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_modify_object_categories', 'Can change the categories on the object', 'editors', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_add_object', 'Can add objects in the category', 'editors', 'category');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_remove_object', 'Can remove objects from the category', 'editors', 'category');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_create_category', 'Can create new categories', 'admin', 'category');
-
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_perspective_view', 'Can view the perspective', 'basic', 'perspective');
-
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_group_view', 'Can view the group', 'basic', 'group');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_group_view_members', 'Can view the group members', 'basic', 'group');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_group_add_member', 'Can add group members', 'admin', 'group');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_group_remove_member', 'Can remove group members', 'admin', 'group');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_group_join', 'Can join or leave the group', 'admin', 'group');
-
-UPDATE users_permissions SET feature_check = 'feature_wiki' WHERE permName IN(
-	'tiki_p_admin_wiki',
-	'tiki_p_assign_perm_wiki_page',
-	'tiki_p_edit',
-	'tiki_p_lock',
-	'tiki_p_minor',
-	'tiki_p_remove',
-	'tiki_p_rename',
-	'tiki_p_rollback',
-	'tiki_p_view'
-);
-
-UPDATE users_permissions SET feature_check = 'wiki_feature_copyrights' WHERE permName = 'tiki_p_edit_copyrights';
-UPDATE users_permissions SET feature_check = 'feature_wiki_structure' WHERE permName = 'tiki_p_edit_structures';
-UPDATE users_permissions SET feature_check = 'feature_wiki_structure' WHERE permName = 'tiki_p_watch_structure';
-UPDATE users_permissions SET feature_check = 'feature_wiki_pictures' WHERE permName = 'tiki_p_upload_picture';
-UPDATE users_permissions SET feature_check = 'feature_wiki_templates' WHERE permName = 'tiki_p_use_as_template';
-UPDATE users_permissions SET feature_check = 'feature_wiki_attachments' WHERE permName = 'tiki_p_admin_attachments';
-UPDATE users_permissions SET feature_check = 'feature_wiki_attachments' WHERE permName = 'tiki_p_attach_files';
-UPDATE users_permissions SET feature_check = 'feature_wiki_attachments' WHERE permName = 'tiki_p_wiki_view_attachments';
-UPDATE users_permissions SET feature_check = 'feature_wiki_ratings' WHERE permName = 'tiki_p_admin_ratings';
-UPDATE users_permissions SET feature_check = 'feature_wiki_ratings' WHERE permName = 'tiki_p_wiki_view_ratings';
-UPDATE users_permissions SET feature_check = 'feature_wiki_ratings' WHERE permName = 'tiki_p_wiki_vote_ratings';
-UPDATE users_permissions SET feature_check = 'feature_wiki_comments' WHERE permName = 'tiki_p_wiki_view_comments';
-UPDATE users_permissions SET feature_check = 'feature_wiki_export' WHERE permName = 'tiki_p_export_wiki';
-UPDATE users_permissions SET feature_check = 'feature_history' WHERE permName = 'tiki_p_wiki_view_history';
-UPDATE users_permissions SET feature_check = 'feature_wiki_attachments' WHERE permName = 'tiki_p_wiki_attach_files';
-UPDATE users_permissions SET feature_check = 'feature_wiki_attachments' WHERE permName = 'tiki_p_wiki_admin_attachments';
-UPDATE users_permissions SET feature_check = 'feature_wiki_ratings' WHERE permName = 'tiki_p_wiki_admin_ratings';
-UPDATE users_permissions SET feature_check = 'feature_source' WHERE permName = 'tiki_p_wiki_view_source';
-
-
-
-
 DROP TABLE IF EXISTS `users_usergroups`;
 CREATE TABLE `users_usergroups` (
   `userId` int(8) NOT NULL default '0',
@@ -3764,10 +3694,10 @@
 DROP TABLE IF EXISTS `tiki_user_reports`;
 CREATE TABLE IF NOT EXISTS `tiki_user_reports` (
   `id` int(11) NOT NULL AUTO_INCREMENT,
-  `user` varchar(200) COLLATE latin1_general_ci NOT NULL,
-  `interval` varchar(20) COLLATE latin1_general_ci NOT NULL,
-  `view` varchar(8) COLLATE latin1_general_ci NOT NULL,
-  `type` varchar(5) COLLATE latin1_general_ci NOT NULL,
+  `user` varchar(200) NOT NULL,
+  `interval` varchar(20) NOT NULL,
+  `view` varchar(8) NOT NULL,
+  `type` varchar(5) NOT NULL,
   `time_to_send` datetime NOT NULL,
   `always_email` tinyint(1) NOT NULL,
   `last_report` datetime NOT NULL,
@@ -3777,9 +3707,9 @@
 DROP TABLE IF EXISTS `tiki_user_reports_cache`;
 CREATE TABLE IF NOT EXISTS `tiki_user_reports_cache` (
   `id` int(11) NOT NULL AUTO_INCREMENT,
-  `user` varchar(200) COLLATE latin1_general_ci NOT NULL,
-  `event` varchar(200) COLLATE latin1_general_ci NOT NULL,
-  `data` text COLLATE latin1_general_ci NOT NULL,
+  `user` varchar(200) NOT NULL,
+  `event` varchar(200) NOT NULL,
+  `data` text NOT NULL,
   `time` datetime NOT NULL,
   PRIMARY KEY (`id`)
 ) ENGINE=MyISAM;

------------------------------------------------------------------------
r20620 | lphuberdeau | 2009-08-06 08:30:49 -0400 (qui, 06 ago 2009) | 1 line

[NEW] Allow delegation of member management

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20619)
+++ tiki.sql	(revision 20620)
@@ -2994,6 +2994,12 @@
 
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_perspective_view', 'Can view the perspective', 'basic', 'perspective');
 
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_group_view', 'Can view the group', 'basic', 'group');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_group_view_members', 'Can view the group members', 'basic', 'group');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_group_add_member', 'Can add group members', 'admin', 'group');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_group_remove_member', 'Can remove group members', 'admin', 'group');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_group_join', 'Can join or leave the group', 'admin', 'group');
+
 UPDATE users_permissions SET feature_check = 'feature_wiki' WHERE permName IN(
 	'tiki_p_admin_wiki',
 	'tiki_p_assign_perm_wiki_page',

------------------------------------------------------------------------
r20615 | jonnybradley | 2009-08-06 06:28:15 -0400 (qui, 06 ago 2009) | 3 lines

[KIL] Removed: Charts feature - chartlib, tiki_charts, feature_charts etc
Again, tables (4 of them) not created in new installs but not removed in updates - just in case


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20614)
+++ tiki.sql	(revision 20615)
@@ -587,65 +587,6 @@
   PRIMARY KEY (`categId`,`siteId`)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS `tiki_chart_items`;
-CREATE TABLE `tiki_chart_items` (
-  `itemId` int(14) NOT NULL auto_increment,
-  `title` varchar(250) default NULL,
-  `description` text,
-  `chartId` int(14) NOT NULL default '0',
-  `created` int(14) default NULL,
-  `URL` varchar(250) default NULL,
-  `votes` int(14) default NULL,
-  `points` int(14) default NULL,
-  `average` decimal(4,2) default NULL,
-  PRIMARY KEY (`itemId`)
-) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-
-DROP TABLE IF EXISTS `tiki_charts`;
-CREATE TABLE `tiki_charts` (
-  `chartId` int(14) NOT NULL auto_increment,
-  `title` varchar(250) default NULL,
-  `description` text,
-  `hits` int(14) default NULL,
-  `singleItemVotes` char(1) default NULL,
-  `singleChartVotes` char(1) default NULL,
-  `suggestions` char(1) default NULL,
-  `autoValidate` char(1) default NULL,
-  `topN` int(6) default NULL,
-  `maxVoteValue` int(4) default NULL,
-  `frequency` int(14) default NULL,
-  `showAverage` char(1) default NULL,
-  `isActive` char(1) default NULL,
-  `showVotes` char(1) default NULL,
-  `useCookies` char(1) default NULL,
-  `lastChart` int(14) default NULL,
-  `voteAgainAfter` int(14) default NULL,
-  `created` int(14) default NULL,
-  PRIMARY KEY (`chartId`)
-) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-
-DROP TABLE IF EXISTS `tiki_charts_rankings`;
-CREATE TABLE `tiki_charts_rankings` (
-  `chartId` int(14) NOT NULL default '0',
-  `itemId` int(14) NOT NULL default '0',
-  `position` int(14) NOT NULL default '0',
-  `timestamp` int(14) NOT NULL default '0',
-  `lastPosition` int(14) NOT NULL default '0',
-  `period` int(14) NOT NULL default '0',
-  `rvotes` int(14) NOT NULL default '0',
-  `raverage` decimal(4,2) NOT NULL default '0.00',
-  PRIMARY KEY (`chartId`,`itemId`,`period`)
-) ENGINE=MyISAM;
-
-DROP TABLE IF EXISTS `tiki_charts_votes`;
-CREATE TABLE `tiki_charts_votes` (
-  `user` varchar(200) NOT NULL default '',
-  `itemId` int(14) NOT NULL default '0',
-  `timestamp` int(14) default NULL,
-  `chartId` int(14) default NULL,
-  PRIMARY KEY (`user`,`itemId`)
-) ENGINE=MyISAM;
-
 DROP TABLE IF EXISTS `tiki_chat_channels`;
 CREATE TABLE `tiki_chat_channels` (
   `channelId` int(8) NOT NULL auto_increment,
@@ -1299,7 +1240,6 @@
 INSERT INTO tiki_live_support_modules(name) VALUES('file galleries');
 INSERT INTO tiki_live_support_modules(name) VALUES('directory');
 INSERT INTO tiki_live_support_modules(name) VALUES('workflow');
-INSERT INTO tiki_live_support_modules(name) VALUES('charts');
 
 DROP TABLE IF EXISTS `tiki_live_support_operators`;
 CREATE TABLE `tiki_live_support_operators` (
@@ -1521,8 +1461,6 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_list_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Send Newsletters','tiki-send_newsletters.php',905,'feature_newsletters','tiki_p_send_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Newsletters','tiki-admin_newsletters.php',910,'feature_newsletters','tiki_p_admin_newsletters','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Charts','tiki-charts.php',1000,'feature_charts','tiki_p_view_chart','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Charts','tiki-admin_charts.php',1005,'feature_charts','tiki_p_admin_charts','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_categories','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_banners','',0);
@@ -2791,12 +2729,6 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_events', 'Can view events details', 'registered', 'calendar');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_tiki_calendar', 'Can view Tikiwiki tools calendar', 'basic', 'calendar');
 
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_charts', 'Can admin charts', 'admin', 'charts', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_autoval_chart_suggestio', 'Autovalidate suggestions', 'editors', 'charts');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_suggest_chart_item', 'Can suggest items', 'basic', 'charts');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_chart', 'Can view charts', 'basic', 'charts');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_vote_chart', 'Can vote', 'basic', 'charts');
-
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_chat', 'Administrator, can create channels remove channels etc', 'editors', 'chat', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_chat', 'Can use the chat system', 'registered', 'chat');
 
@@ -3745,7 +3677,6 @@
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-view_blog.php\\?blogId=(\\d+)', 'blog$1', 'blog', 'feature_blogs');
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-view_blog_post.php\\?postId=(\\d+)', 'blogpost$1', 'blogpost', 'feature_blogs');
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-browse_image.php\\?imageId=(\\d+)', 'browseimage$1', 'image', 'feature_galleries');
-INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-view_chart.php\\?chartId=(\\d+)', 'chart$1', 'chart', 'feature_charts');
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-directory_browse.php\\?parent=(\\d+)', 'directory$1', 'directory', 'feature_directory');
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-view_faq.php\\?faqId=(\\d+)', 'faq$1', 'faq', 'feature_faqs');
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-list_file_gallery.php\\?galleryId=(\\d+)', 'file$1', 'file', 'feature_file_galleries');
@@ -3775,7 +3706,6 @@
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-view_articles.php', 'articles', '', 'feature_articles', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-list_blogs.php', 'blogs', '', 'feature_blogs', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-browse_categories.php', 'categories', '', 'feature_categories', 200);
-INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-list_charts.php', 'charts', '', 'feature_charts', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-contact.php', 'contact', '', 'feature_contact', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-directory_browse.php', 'directories', '', 'feature_directory', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-list_faqs.php', 'faqs', '', 'feature_faqs', 200);
@@ -3812,7 +3742,6 @@
 UPDATE tiki_menu_options SET icon = '' WHERE name = 'Surveys';
 UPDATE tiki_menu_options SET icon = '' WHERE name = 'TikiSheet';
 UPDATE tiki_menu_options SET icon = '' WHERE name = 'Workflow';
-UPDATE tiki_menu_options SET icon = '' WHERE name = 'Charts';
 UPDATE tiki_menus SET use_items_icons='y' WHERE menuId=42;
 
 DROP TABLE IF EXISTS `tiki_plugin_security`;

------------------------------------------------------------------------
r20608 | jonnybradley | 2009-08-05 15:51:49 -0400 (qua, 05 ago 2009) | 4 lines

[KIL] Remove jgraphpad - a.k.a. "drawings"
Database table not removed from updates to preserve any existing data
(but not created on a new install)


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20607)
+++ tiki.sql	(revision 20608)
@@ -799,18 +799,6 @@
   FULLTEXT KEY `ft` (name,description)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS `tiki_drawings`;
-CREATE TABLE `tiki_drawings` (
-  `drawId` int(12) NOT NULL auto_increment,
-  `version` int(8) default NULL,
-  `name` varchar(250) default NULL,
-  `filename_draw` varchar(250) default NULL,
-  `filename_pad` varchar(250) default NULL,
-  `timestamp` int(14) default NULL,
-  `user` varchar(200) default '',
-  PRIMARY KEY (`drawId`)
-) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-
 DROP TABLE IF EXISTS `tiki_dsn`;
 CREATE TABLE `tiki_dsn` (
   `dsnId` int(12) NOT NULL auto_increment,
@@ -1545,7 +1533,6 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_content_templates','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_html_pages','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_view_referer_stats','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_drawings','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_shoutbox','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_live_support_admin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','user_is_operator','',0);
@@ -1580,7 +1567,6 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Edit Templates','tiki-edit_templates.php',1155,'feature_edit_templates','tiki_p_edit_templates','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','View Templates','tiki-edit_templates.php',1155,'feature_view_tpl','tiki_p_edit_templates','',2);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Edit CSS','tiki-edit_css.php',1158,'feature_editcss','tiki_p_create_css','',2);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Drawings','tiki-admin_drawings.php',1160,'feature_drawings','tiki_p_admin_drawings','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Dynamic content','tiki-list_contents.php',1165,'feature_dynamic_content','tiki_p_admin_dynamic','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Mail-in','tiki-admin_mailin.php',1175,'feature_mailin','tiki_p_admin_mailin','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','HTML Pages','tiki-admin_html_pages.php',1185,'feature_html_pages','tiki_p_edit_html_pages','',0);
@@ -2838,9 +2824,6 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_validate_links', 'Can validate submited links', 'editors', 'directory');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_directory', 'Can use the directory', 'basic', 'directory');
 
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_drawings', 'Can admin drawings', 'editors', 'drawings', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_drawings', 'Can edit drawings', 'basic', 'drawings');
-
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_faqs', 'Can admin faqs', 'editors', 'faqs', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_suggest_faq', 'Can suggest faq questions', 'basic', 'faqs');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_faqs', 'Can view faqs', 'basic', 'faqs');

------------------------------------------------------------------------
r20607 | lphuberdeau | 2009-08-05 15:03:44 -0400 (qua, 05 ago 2009) | 1 line

[KIL]Â Newsreader

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20606)
+++ tiki.sql	(revision 20607)
@@ -1434,7 +1434,6 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tasks','tiki-user_tasks.php',65,'feature_mytiki,feature_tasks','tiki_p_tasks','Registered',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Bookmarks','tiki-user_bookmarks.php',70,'feature_mytiki,feature_user_bookmarks','tiki_p_create_bookmarks','Registered',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Modules','tiki-user_assigned_modules.php',75,'feature_mytiki,user_assigned_modules','tiki_p_configure_modules','Registered',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Newsreader','tiki-newsreader_servers.php',80,'feature_mytiki,feature_newsreader','tiki_p_newsreader','Registered',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Webmail','tiki-webmail.php',85,'feature_mytiki,feature_webmail','tiki_p_use_webmail','Registered',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Contacts','tiki-contacts.php',87,'feature_mytiki,feature_contacts','','Registered',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Notepad','tiki-notepad_list.php',90,'feature_mytiki,feature_notepad','tiki_p_notepad','Registered',0);
@@ -1716,26 +1715,6 @@
   PRIMARY KEY (`nlId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS `tiki_newsreader_marks`;
-CREATE TABLE `tiki_newsreader_marks` (
-  `user` varchar(200) NOT NULL default '',
-  `serverId` int(12) NOT NULL default '0',
-  `groupName` varchar(255) NOT NULL default '',
-  `timestamp` int(14) NOT NULL default '0',
-  PRIMARY KEY (`user`(100),serverId,groupName(100))
-) ENGINE=MyISAM;
-
-DROP TABLE IF EXISTS `tiki_newsreader_servers`;
-CREATE TABLE `tiki_newsreader_servers` (
-  `user` varchar(200) NOT NULL default '',
-  `serverId` int(12) NOT NULL auto_increment,
-  `server` varchar(250) default NULL,
-  `port` int(4) default NULL,
-  `username` varchar(200) default NULL,
-  `password` varchar(200) default NULL,
-  PRIMARY KEY (`serverId`)
-) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-
 DROP TABLE IF EXISTS `tiki_page_footnotes`;
 CREATE TABLE `tiki_page_footnotes` (
   `user` varchar(200) NOT NULL default '',
@@ -3036,7 +3015,6 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_configure_modules', 'Can configure modules', 'registered', 'user');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_create_bookmarks', 'Can create user bookmarks', 'registered', 'user');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_minical', 'Can use the mini event calendar', 'registered', 'user');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_newsreader', 'Can use the newsreader', 'registered', 'user');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_notepad', 'Can use the notepad', 'registered', 'user');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tasks_admin', 'Can admin public tasks', 'admin', 'user');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tasks', 'Can use tasks', 'registered', 'user');

------------------------------------------------------------------------
r20606 | jonnybradley | 2009-08-05 14:40:40 -0400 (qua, 05 ago 2009) | 1 line

[KIL] Games (database)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20605)
+++ tiki.sql	(revision 20606)
@@ -1121,15 +1121,6 @@
   PRIMARY KEY (`galleryId`,`scale`)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS `tiki_games`;
-CREATE TABLE `tiki_games` (
-  `gameName` varchar(200) NOT NULL default '',
-  `hits` int(8) default NULL,
-  `votes` int(8) default NULL,
-  `points` int(8) default NULL,
-  PRIMARY KEY (`gameName`)
-) ENGINE=MyISAM;
-
 DROP TABLE IF EXISTS `tiki_group_inclusion`;
 CREATE TABLE `tiki_group_inclusion` (
   `groupName` varchar(255) NOT NULL default '',
@@ -1431,7 +1422,6 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Stats','tiki-stats.php',23,'feature_stats','tiki_p_view_stats','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Categories','tiki-browse_categories.php',25,'feature_categories','tiki_p_view_categories','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Freetags','tiki-browse_freetags.php',27,'feature_freetags','tiki_p_view_freetags','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Games','tiki-list_games.php',30,'feature_games','tiki_p_play_games','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Calendar','tiki-calendar.php',35,'feature_calendar','tiki_p_view_calendar','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Users Map','tiki-gmap_usermap.php',36,'feature_gmap','','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tiki Calendar','tiki-action_calendar.php',37,'feature_action_calendar','tiki_p_view_tiki_calendar','',0);
@@ -2949,9 +2939,6 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_freetags', 'Can browse freetags', 'basic', 'freetags');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_image_gallery', 'Can view image galleries', 'basic', 'image galleries');
 
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_games', 'Can admin games', 'editors', 'games', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_play_games', 'Can play games', 'basic', 'games');
-
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_newsletters', 'Can admin newsletters', 'admin', 'newsletters', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_subscribe_email', 'Can subscribe many e-mails at once (requires tiki_p_subscribe email)', 'editors', 'newsletters');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_send_newsletters', 'Can send newsletters', 'editors', 'newsletters');

------------------------------------------------------------------------
r20598 | jonnybradley | 2009-08-05 13:56:04 -0400 (qua, 05 ago 2009) | 2 lines

[FIX] Missing field on tiki_webmail_contacts_fields


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20597)
+++ tiki.sql	(revision 20598)
@@ -3644,6 +3644,7 @@
   `order` int(2) NOT NULL default '0',
   `show` char(1) NOT NULL default 'n',
   `fieldId` int(10) unsigned NOT NULL auto_increment,
+  `flagsPublic` CHAR( 1 ) NOT NULL DEFAULT 'n',
   PRIMARY KEY ( `fieldId` ),
   INDEX ( `user` )
 ) ENGINE = MyISAM ;

------------------------------------------------------------------------
r20559 | sylvieg | 2009-08-04 09:24:22 -0400 (ter, 04 ago 2009) | 1 line

[FIX]search: one search option of each different search to follow search in top bar

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20558)
+++ tiki.sql	(revision 20559)
@@ -1425,7 +1425,8 @@
 
 -- when adding new inserts, order commands by position
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Home','./',10,'','','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Search','tiki-searchresults.php',13,'feature_search','tiki_p_search','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Search','tiki-searchresults.php',13,'feature_search_fulltext','tiki_p_search','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Search','tiki-searchindex.php',13,'feature_search','tiki_p_search','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Contact Us','tiki-contact.php',20,'feature_contact,feature_messages','','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Stats','tiki-stats.php',23,'feature_stats','tiki_p_view_stats','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Categories','tiki-browse_categories.php',25,'feature_categories','tiki_p_view_categories','',0);

------------------------------------------------------------------------
r20531 | lphuberdeau | 2009-08-03 11:08:09 -0400 (seg, 03 ago 2009) | 1 line

[NEW] Introduce permissions on perspectives to limit visibility

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20530)
+++ tiki.sql	(revision 20531)
@@ -3111,6 +3111,8 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_remove_object', 'Can remove objects from the category', 'editors', 'category');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_create_category', 'Can create new categories', 'admin', 'category');
 
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_perspective_view', 'Can view the perspective', 'basic', 'perspective');
+
 UPDATE users_permissions SET feature_check = 'feature_wiki' WHERE permName IN(
 	'tiki_p_admin_wiki',
 	'tiki_p_assign_perm_wiki_page',

------------------------------------------------------------------------
r20464 | lphuberdeau | 2009-08-01 13:19:26 -0400 (sÃ¡b, 01 ago 2009) | 1 line

[MOD] Adding granular permissions, batch loading, fixing several WYSIWYCA issues (summary: merging perms-take2)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20463)
+++ tiki.sql	(revision 20464)
@@ -2835,12 +2835,6 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_events', 'Can view events details', 'registered', 'calendar');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_tiki_calendar', 'Can view Tikiwiki tools calendar', 'basic', 'calendar');
 
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_categories', 'Can admin categories', 'editors', 'category', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_categorized', 'Can edit items in categories', 'registered', 'category');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_categories', 'Can view categories', 'basic', 'category');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_categorized', 'Can view categorized items', 'basic', 'category');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_search_categorized', 'Can search on objects of this category', 'basic', 'category');
-
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_charts', 'Can admin charts', 'admin', 'charts', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_autoval_chart_suggestio', 'Autovalidate suggestions', 'editors', 'charts');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_suggest_chart_item', 'Can suggest items', 'basic', 'charts');
@@ -3109,6 +3103,13 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_invite', 'Can invite user in groups', 'editors', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_delete_account', 'Can delete his own account', 'admin', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_importer', 'Can use the Tiki Importer', 'admin', 'tiki', 'y');
+ 
+ INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_categories', 'Can admin categories', 'editors', 'category', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_category', 'Can see the category in a listing', 'basic', 'category');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_modify_object_categories', 'Can change the categories on the object', 'editors', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_add_object', 'Can add objects in the category', 'editors', 'category');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_remove_object', 'Can remove objects from the category', 'editors', 'category');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_create_category', 'Can create new categories', 'admin', 'category');
 
 UPDATE users_permissions SET feature_check = 'feature_wiki' WHERE permName IN(
 	'tiki_p_admin_wiki',

------------------------------------------------------------------------
r20458 | kissaki | 2009-08-01 08:43:03 -0400 (sÃ¡b, 01 ago 2009) | 2 lines

insert into tiki_menu_options without PKs
order insert commands by position (as they're displayed)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20457)
+++ tiki.sql	(revision 20458)
@@ -1423,199 +1423,201 @@
   UNIQUE KEY `uniq_menu` (menuId,name(30),url(50),position,section(60),perm(50),groupname(50))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (1,42,'o','Home','./',10,'','','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (3,42,'o','Contact Us','tiki-contact.php',20,'feature_contact,feature_messages','','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (4,42,'o','Stats','tiki-stats.php',23,'feature_stats','tiki_p_view_stats','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (5,42,'o','Categories','tiki-browse_categories.php',25,'feature_categories','tiki_p_view_categories','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (6,42,'o','Games','tiki-list_games.php',30,'feature_games','tiki_p_play_games','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (7,42,'o','Calendar','tiki-calendar.php',35,'feature_calendar','tiki_p_view_calendar','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (8,42,'o','Users Map','tiki-gmap_usermap.php',36,'feature_gmap','','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (9,42,'o','Mobile','tiki-mobile.php',37,'feature_mobile','','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (10,42,'o','(debug)','javascript:toggle(\'debugconsole\')',40,'feature_debug_console','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (11,42,'s','MyTiki','tiki-my_tiki.php',50,'feature_mytiki','','Registered',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (12,42,'o','MyTiki Home','tiki-my_tiki.php',51,'feature_mytiki','','Registered',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (13,42,'o','Preferences','tiki-user_preferences.php',55,'feature_mytiki,feature_userPreferences','','Registered',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (14,42,'o','Messages','messu-mailbox.php',60,'feature_mytiki,feature_messages','tiki_p_messages','Registered',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (15,42,'o','Tasks','tiki-user_tasks.php',65,'feature_mytiki,feature_tasks','tiki_p_tasks','Registered',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (16,42,'o','Bookmarks','tiki-user_bookmarks.php',70,'feature_mytiki,feature_user_bookmarks','tiki_p_create_bookmarks','Registered',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (17,42,'o','Modules','tiki-user_assigned_modules.php',75,'feature_mytiki,user_assigned_modules','tiki_p_configure_modules','Registered',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (18,42,'o','Newsreader','tiki-newsreader_servers.php',80,'feature_mytiki,feature_newsreader','tiki_p_newsreader','Registered',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (19,42,'o','Webmail','tiki-webmail.php',85,'feature_mytiki,feature_webmail','tiki_p_use_webmail','Registered',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (20,42,'o','Notepad','tiki-notepad_list.php',90,'feature_mytiki,feature_notepad','tiki_p_notepad','Registered',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (21,42,'o','My Files','tiki-userfiles.php',95,'feature_mytiki,feature_userfiles','tiki_p_userfiles','Registered',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (22,42,'o','User Menu','tiki-usermenu.php',100,'feature_mytiki,feature_usermenu','tiki_p_usermenu','Registered',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (23,42,'o','Mini Calendar','tiki-minical.php',105,'feature_mytiki,feature_minical','tiki_p_minical','Registered',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (24,42,'o','My Watches','tiki-user_watches.php',110,'feature_mytiki,feature_user_watches','','Registered',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (25,42,'s','Workflow','tiki-g-user_processes.php',150,'feature_workflow','tiki_p_use_workflow','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (26,42,'o','Admin Processes','tiki-g-admin_processes.php',155,'feature_workflow','tiki_p_admin_workflow','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (27,42,'o','Monitor Processes','tiki-g-monitor_processes.php',160,'feature_workflow','tiki_p_admin_workflow','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (28,42,'o','Monitor Activities','tiki-g-monitor_activities.php',165,'feature_workflow','tiki_p_admin_workflow','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (29,42,'o','Monitor Instances','tiki-g-monitor_instances.php',170,'feature_workflow','tiki_p_admin_workflow','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (30,42,'o','User Processes','tiki-g-user_processes.php',175,'feature_workflow','tiki_p_use_workflow','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (31,42,'o','User activities','tiki-g-user_activities.php',180,'feature_workflow','tiki_p_use_workflow','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (32,42,'o','User instances','tiki-g-user_instances.php',185,'feature_workflow','tiki_p_use_workflow','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (33,42,'s','Community','tiki-list_users.php',187,'feature_friends','tiki_p_list_users','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (34,42,'o','User List','tiki-list_users.php',188,'feature_friends','tiki_p_list_users','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (35,42,'o','Friendship Network','tiki-friends.php',189,'feature_friends','','Registered',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (36,42,'s','Wiki','tiki-index.php',200,'feature_wiki','tiki_p_view','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (37,42,'o','Wiki Home','tiki-index.php',202,'feature_wiki','tiki_p_view','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (38,42,'o','Last Changes','tiki-lastchanges.php',205,'feature_wiki,feature_lastChanges','tiki_p_view','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (39,42,'o','Dump','dump/new.tar',210,'feature_wiki,feature_dump','tiki_p_view','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (40,42,'o','Rankings','tiki-wiki_rankings.php',215,'feature_wiki,feature_wiki_rankings','tiki_p_view','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (41,42,'o','List Pages','tiki-listpages.php',220,'feature_wiki,feature_listPages','tiki_p_view','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,42,'o','Orphan Pages','tiki-orphan_pages.php',225,'feature_wiki,feature_listorphanPages','tiki_p_view','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (43,42,'o','Sandbox','tiki-editpage.php?page=sandbox',230,'feature_wiki,feature_sandbox','tiki_p_view','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (44,42,'o','Multiple Print','tiki-print_pages.php',235,'feature_wiki,feature_wiki_multiprint','tiki_p_view','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (45,42,'o','Send Pages','tiki-send_objects.php',240,'feature_wiki,feature_comm','tiki_p_view,tiki_p_send_pages','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (46,42,'o','Received Pages','tiki-received_pages.php',245,'feature_wiki,feature_comm','tiki_p_view,tiki_p_admin_received_pages','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (47,42,'o','Structures','tiki-admin_structures.php',250,'feature_wiki,feature_wiki_structure','tiki_p_view','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (197,42,'o','Mind Map','tiki-mindmap.php',255,'feature_wiki_mindmap','tiki_p_view','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (48,42,'s','Image Galleries','tiki-galleries.php',300,'feature_galleries','tiki_p_view_image_gallery','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (49,42,'o','Galleries','tiki-galleries.php',305,'feature_galleries','tiki_p_list_image_galleries','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (50,42,'o','Rankings','tiki-galleries_rankings.php',310,'feature_galleries,feature_gal_rankings','tiki_p_list_image_galleries','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (51,42,'o','Upload Image','tiki-upload_image.php',315,'feature_galleries','tiki_p_upload_images','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (52,42,'o','Directory Batch','tiki-batch_upload.php',318,'feature_galleries,feature_gal_batch','tiki_p_batch_upload','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (53,42,'o','System Gallery','tiki-list_gallery.php?galleryId=0',320,'feature_galleries','tiki_p_admin_galleries','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (54,42,'s','Articles','tiki-view_articles.php',350,'feature_articles','tiki_p_read_article','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (55,42,'o','Articles Home','tiki-view_articles.php',355,'feature_articles','tiki_p_read_article','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (56,42,'o','List Articles','tiki-list_articles.php',360,'feature_articles','tiki_p_read_article','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (57,42,'o','Rankings','tiki-cms_rankings.php',365,'feature_articles,feature_cms_rankings','tiki_p_read_article','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (58,42,'o','Submit Article','tiki-edit_submission.php',370,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_submit_article','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (59,42,'o','View submissions','tiki-list_submissions.php',375,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_submit_article','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (60,42,'o','View submissions','tiki-list_submissions.php',375,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_approve_submission','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (61,42,'o','View Submissions','tiki-list_submissions.php',375,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_remove_submission','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (62,42,'o','New Article','tiki-edit_article.php',380,'feature_articles','tiki_p_read_article,tiki_p_edit_article','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (63,42,'o','Send Articles','tiki-send_objects.php',385,'feature_articles,feature_comm','tiki_p_read_article,tiki_p_send_articles','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (64,42,'o','Received Articles','tiki-received_articles.php',385,'feature_articles,feature_comm','tiki_p_read_article,tiki_p_admin_received_articles','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (196,42,'o','Admin Types','tiki-article_types.php',395,'feature_articles','tiki_p_articles_admin_types','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (195,42,'o','Admin Topics','tiki-admin_topics.php',390,'feature_articles','tiki_p_articles_admin_topics','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (67,42,'s','Blogs','tiki-list_blogs.php',450,'feature_blogs','tiki_p_read_blog','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (68,42,'o','List Blogs','tiki-list_blogs.php',455,'feature_blogs','tiki_p_read_blog','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (69,42,'o','Rankings','tiki-blog_rankings.php',460,'feature_blogs,feature_blog_rankings','tiki_p_read_blog','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (70,42,'o','Create/Edit Blog','tiki-edit_blog.php',465,'feature_blogs','tiki_p_read_blog,tiki_p_create_blogs','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (71,42,'o','Post','tiki-blog_post.php',470,'feature_blogs','tiki_p_read_blog,tiki_p_blog_post','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (72,42,'o','Admin Posts','tiki-list_posts.php',475,'feature_blogs','tiki_p_read_blog,tiki_p_blog_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (73,42,'s','Forums','tiki-forums.php',500,'feature_forums','tiki_p_forum_read','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (74,42,'o','List Forums','tiki-forums.php',505,'feature_forums','tiki_p_forum_read','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (75,42,'o','Rankings','tiki-forum_rankings.php',510,'feature_forums,feature_forum_rankings','tiki_p_forum_read','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (76,42,'o','Admin Forums','tiki-admin_forums.php',515,'feature_forums','tiki_p_forum_read,tiki_p_admin_forum','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (77,42,'s','Directory','tiki-directory_browse.php',550,'feature_directory','tiki_p_view_directory','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (78,42,'o','Submit a new link','tiki-directory_add_site.php',555,'feature_directory','tiki_p_submit_link','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (79,42,'o','Browse Directory','tiki-directory_browse.php',560,'feature_directory','tiki_p_view_directory','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (80,42,'o','Admin Directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_admin_directory_cats','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (81,42,'o','Admin Directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_admin_directory_sites','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (82,42,'o','Admin Directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_validate_links','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (83,42,'s','File Galleries','tiki-list_file_gallery.php',600,'feature_file_galleries','tiki-list_file_gallery.php|tiki_p_view_file_gallery|tiki_p_upload_files','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (84,42,'o','List Galleries','tiki-list_file_gallery.php',605,'feature_file_galleries','tiki_p_list_file_galleries','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (85,42,'o','Rankings','tiki-file_galleries_rankings.php',610,'feature_file_galleries,feature_file_galleries_rankings','tiki_p_list_file_galleries','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (86,42,'o','Upload File','tiki-upload_file.php',615,'feature_file_galleries','tiki_p_upload_files','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (87,42,'s','FAQs','tiki-list_faqs.php',650,'feature_faqs','tiki_p_view_faqs','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (88,42,'o','List FAQs','tiki-list_faqs.php',665,'feature_faqs','tiki_p_view_faqs','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (89,42,'o','Admin FAQs','tiki-list_faqs.php',660,'feature_faqs','tiki_p_admin_faqs','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (90,42,'s','Maps','tiki-map.php',700,'feature_maps','tiki_p_map_view','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (91,42,'o','Mapfiles','tiki-map_edit.php',705,'feature_maps','tiki_p_map_view','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (92,42,'o','Layer Management','tiki-map_upload.php',710,'feature_maps','tiki_p_map_edit','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (93,42,'s','Quizzes','tiki-list_quizzes.php',750,'feature_quizzes','tiki_p_take_quiz','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (94,42,'o','List Quizzes','tiki-list_quizzes.php',755,'feature_quizzes','tiki_p_take_quiz','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (95,42,'o','Quiz Stats','tiki-quiz_stats.php',760,'feature_quizzes','tiki_p_view_quiz_stats','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (96,42,'o','Admin Quizzes','tiki-edit_quiz.php',765,'feature_quizzes','tiki_p_admin_quizzes','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (97,42,'s','TikiSheet','tiki-sheets.php',780,'feature_sheet','tiki_p_view_sheet','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (98,42,'s','Trackers','tiki-list_trackers.php',800,'feature_trackers','tiki_p_view_trackers','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (99,42,'o','List Trackers','tiki-list_trackers.php',805,'feature_trackers','tiki_p_view_trackers','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (100,42,'o','Admin Trackers','tiki-admin_trackers.php',810,'feature_trackers','tiki_p_admin_trackers','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (101,42,'s','Surveys','tiki-list_surveys.php',850,'feature_surveys','tiki_p_take_survey','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (102,42,'o','List Surveys','tiki-list_surveys.php',855,'feature_surveys','tiki_p_take_survey','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (103,42,'o','Stats','tiki-survey_stats.php',860,'feature_surveys','tiki_p_view_survey_stats','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (104,42,'o','Admin Surveys','tiki-admin_surveys.php',865,'feature_surveys','tiki_p_admin_surveys','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (105,42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_subscribe_newsletters','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (106,42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_send_newsletters','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (107,42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_admin_newsletters','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (110,42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_list_newsletters','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (108,42,'o','Send Newsletters','tiki-send_newsletters.php',905,'feature_newsletters','tiki_p_send_newsletters','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (109,42,'o','Admin Newsletters','tiki-admin_newsletters.php',910,'feature_newsletters','tiki_p_admin_newsletters','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (112,42,'s','Charts','tiki-charts.php',1000,'feature_charts','tiki_p_view_chart','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (113,42,'o','Admin Charts','tiki-admin_charts.php',1005,'feature_charts','tiki_p_admin_charts','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (114,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (116,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_categories','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (117,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_banners','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (118,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_templates','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (119,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_cookies','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (120,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_dynamic','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (121,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_mailin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (122,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_content_templates','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (123,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_html_pages','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (124,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_view_referer_stats','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (125,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_drawings','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (126,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_shoutbox','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (127,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_live_support_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (128,42,'r','Admin','tiki-admin.php',1050,'','user_is_operator','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (129,42,'r','Admin','tiki-admin.php',1050,'feature_integrator','tiki_p_admin_integrator','',0);
+-- when adding new inserts, order commands by position
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Home','./',10,'','','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Search','tiki-searchresults.php',13,'feature_search','tiki_p_search','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Contact Us','tiki-contact.php',20,'feature_contact,feature_messages','','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Stats','tiki-stats.php',23,'feature_stats','tiki_p_view_stats','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Categories','tiki-browse_categories.php',25,'feature_categories','tiki_p_view_categories','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Freetags','tiki-browse_freetags.php',27,'feature_freetags','tiki_p_view_freetags','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Games','tiki-list_games.php',30,'feature_games','tiki_p_play_games','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Calendar','tiki-calendar.php',35,'feature_calendar','tiki_p_view_calendar','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Users Map','tiki-gmap_usermap.php',36,'feature_gmap','','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tiki Calendar','tiki-action_calendar.php',37,'feature_action_calendar','tiki_p_view_tiki_calendar','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Mobile','tiki-mobile.php',37,'feature_mobile','','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','(debug)','javascript:toggle(\'debugconsole\')',40,'feature_debug_console','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','MyTiki','tiki-my_tiki.php',50,'feature_mytiki','','Registered',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','MyTiki Home','tiki-my_tiki.php',51,'feature_mytiki','','Registered',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Preferences','tiki-user_preferences.php',55,'feature_mytiki,feature_userPreferences','','Registered',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Messages','messu-mailbox.php',60,'feature_mytiki,feature_messages','tiki_p_messages','Registered',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tasks','tiki-user_tasks.php',65,'feature_mytiki,feature_tasks','tiki_p_tasks','Registered',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Bookmarks','tiki-user_bookmarks.php',70,'feature_mytiki,feature_user_bookmarks','tiki_p_create_bookmarks','Registered',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Modules','tiki-user_assigned_modules.php',75,'feature_mytiki,user_assigned_modules','tiki_p_configure_modules','Registered',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Newsreader','tiki-newsreader_servers.php',80,'feature_mytiki,feature_newsreader','tiki_p_newsreader','Registered',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Webmail','tiki-webmail.php',85,'feature_mytiki,feature_webmail','tiki_p_use_webmail','Registered',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Contacts','tiki-contacts.php',87,'feature_mytiki,feature_contacts','','Registered',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Notepad','tiki-notepad_list.php',90,'feature_mytiki,feature_notepad','tiki_p_notepad','Registered',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','My Files','tiki-userfiles.php',95,'feature_mytiki,feature_userfiles','tiki_p_userfiles','Registered',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','User Menu','tiki-usermenu.php',100,'feature_mytiki,feature_usermenu','tiki_p_usermenu','Registered',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Mini Calendar','tiki-minical.php',105,'feature_mytiki,feature_minical','tiki_p_minical','Registered',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','My Watches','tiki-user_watches.php',110,'feature_mytiki,feature_user_watches','','Registered',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Workflow','tiki-g-user_processes.php',150,'feature_workflow','tiki_p_use_workflow','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Processes','tiki-g-admin_processes.php',155,'feature_workflow','tiki_p_admin_workflow','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Monitor Processes','tiki-g-monitor_processes.php',160,'feature_workflow','tiki_p_admin_workflow','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Monitor Activities','tiki-g-monitor_activities.php',165,'feature_workflow','tiki_p_admin_workflow','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Monitor Instances','tiki-g-monitor_instances.php',170,'feature_workflow','tiki_p_admin_workflow','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','User Processes','tiki-g-user_processes.php',175,'feature_workflow','tiki_p_use_workflow','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','User activities','tiki-g-user_activities.php',180,'feature_workflow','tiki_p_use_workflow','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','User instances','tiki-g-user_instances.php',185,'feature_workflow','tiki_p_use_workflow','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Community','tiki-list_users.php',187,'feature_friends','tiki_p_list_users','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','User List','tiki-list_users.php',188,'feature_friends','tiki_p_list_users','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Friendship Network','tiki-friends.php',189,'feature_friends','','Registered',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Wiki','tiki-index.php',200,'feature_wiki','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Wiki Home','tiki-index.php',202,'feature_wiki','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Last Changes','tiki-lastchanges.php',205,'feature_wiki,feature_lastChanges','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Dump','dump/new.tar',210,'feature_wiki,feature_dump','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Rankings','tiki-wiki_rankings.php',215,'feature_wiki,feature_wiki_rankings','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Pages','tiki-listpages.php',220,'feature_wiki,feature_listPages','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Orphan Pages','tiki-orphan_pages.php',225,'feature_wiki,feature_listorphanPages','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Sandbox','tiki-editpage.php?page=sandbox',230,'feature_wiki,feature_sandbox','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Multiple Print','tiki-print_pages.php',235,'feature_wiki,feature_wiki_multiprint','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Send Pages','tiki-send_objects.php',240,'feature_wiki,feature_comm','tiki_p_view,tiki_p_send_pages','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Received Pages','tiki-received_pages.php',245,'feature_wiki,feature_comm','tiki_p_view,tiki_p_admin_received_pages','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Structures','tiki-admin_structures.php',250,'feature_wiki,feature_wiki_structure','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Mind Map','tiki-mindmap.php',255,'feature_wiki_mindmap','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Image Galleries','tiki-galleries.php',300,'feature_galleries','tiki_p_view_image_gallery','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Galleries','tiki-galleries.php',305,'feature_galleries','tiki_p_list_image_galleries','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Rankings','tiki-galleries_rankings.php',310,'feature_galleries,feature_gal_rankings','tiki_p_list_image_galleries','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Upload Image','tiki-upload_image.php',315,'feature_galleries','tiki_p_upload_images','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Directory Batch','tiki-batch_upload.php',318,'feature_galleries,feature_gal_batch','tiki_p_batch_upload','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','System Gallery','tiki-list_gallery.php?galleryId=0',320,'feature_galleries','tiki_p_admin_galleries','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Articles','tiki-view_articles.php',350,'feature_articles','tiki_p_read_article','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Articles','tiki-view_articles.php',350,'feature_articles','tiki_p_articles_read_heading','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Articles Home','tiki-view_articles.php',355,'feature_articles','tiki_p_read_article','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Articles Home','tiki-view_articles.php',355,'feature_articles','tiki_p_articles_read_heading','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Articles','tiki-list_articles.php',360,'feature_articles','tiki_p_read_article','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Articles','tiki-list_articles.php',360,'feature_articles','tiki_p_articles_read_heading','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Rankings','tiki-cms_rankings.php',365,'feature_articles,feature_cms_rankings','tiki_p_read_article','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Submit Article','tiki-edit_submission.php',370,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_submit_article','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','View submissions','tiki-list_submissions.php',375,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_submit_article','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','View submissions','tiki-list_submissions.php',375,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_approve_submission','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','View Submissions','tiki-list_submissions.php',375,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_remove_submission','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','New Article','tiki-edit_article.php',380,'feature_articles','tiki_p_read_article,tiki_p_edit_article','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Send Articles','tiki-send_objects.php',385,'feature_articles,feature_comm','tiki_p_read_article,tiki_p_send_articles','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Received Articles','tiki-received_articles.php',385,'feature_articles,feature_comm','tiki_p_read_article,tiki_p_admin_received_articles','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Types','tiki-article_types.php',395,'feature_articles','tiki_p_articles_admin_types','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Topics','tiki-admin_topics.php',390,'feature_articles','tiki_p_articles_admin_topics','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Blogs','tiki-list_blogs.php',450,'feature_blogs','tiki_p_read_blog','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Blogs','tiki-list_blogs.php',455,'feature_blogs','tiki_p_read_blog','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Rankings','tiki-blog_rankings.php',460,'feature_blogs,feature_blog_rankings','tiki_p_read_blog','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Create/Edit Blog','tiki-edit_blog.php',465,'feature_blogs','tiki_p_read_blog,tiki_p_create_blogs','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Post','tiki-blog_post.php',470,'feature_blogs','tiki_p_read_blog,tiki_p_blog_post','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Posts','tiki-list_posts.php',475,'feature_blogs','tiki_p_read_blog,tiki_p_blog_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Forums','tiki-forums.php',500,'feature_forums','tiki_p_forum_read','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Forums','tiki-forums.php',505,'feature_forums','tiki_p_forum_read','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Rankings','tiki-forum_rankings.php',510,'feature_forums,feature_forum_rankings','tiki_p_forum_read','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Forums','tiki-admin_forums.php',515,'feature_forums','tiki_p_forum_read,tiki_p_admin_forum','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Directory','tiki-directory_browse.php',550,'feature_directory','tiki_p_view_directory','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Submit a new link','tiki-directory_add_site.php',555,'feature_directory','tiki_p_submit_link','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Browse Directory','tiki-directory_browse.php',560,'feature_directory','tiki_p_view_directory','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_admin_directory_cats','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_admin_directory_sites','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_validate_links','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','File Galleries','tiki-list_file_gallery.php',600,'feature_file_galleries','tiki-list_file_gallery.php|tiki_p_view_file_gallery|tiki_p_upload_files','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Galleries','tiki-list_file_gallery.php',605,'feature_file_galleries','tiki_p_list_file_galleries','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Rankings','tiki-file_galleries_rankings.php',610,'feature_file_galleries,feature_file_galleries_rankings','tiki_p_list_file_galleries','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Upload File','tiki-upload_file.php',615,'feature_file_galleries','tiki_p_upload_files','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Directory batch','tiki-batch_upload_files.php',617,'feature_file_galleries_batch','tiki_p_batch_upload_file_dir','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','FAQs','tiki-list_faqs.php',650,'feature_faqs','tiki_p_view_faqs','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List FAQs','tiki-list_faqs.php',665,'feature_faqs','tiki_p_view_faqs','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin FAQs','tiki-list_faqs.php',660,'feature_faqs','tiki_p_admin_faqs','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Maps','tiki-map.php',700,'feature_maps','tiki_p_map_view','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Mapfiles','tiki-map_edit.php',705,'feature_maps','tiki_p_map_view','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Layer Management','tiki-map_upload.php',710,'feature_maps','tiki_p_map_edit','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Quizzes','tiki-list_quizzes.php',750,'feature_quizzes','tiki_p_take_quiz','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Quizzes','tiki-list_quizzes.php',755,'feature_quizzes','tiki_p_take_quiz','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Quiz Stats','tiki-quiz_stats.php',760,'feature_quizzes','tiki_p_view_quiz_stats','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Quizzes','tiki-edit_quiz.php',765,'feature_quizzes','tiki_p_admin_quizzes','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','TikiSheet','tiki-sheets.php',780,'feature_sheet','tiki_p_view_sheet','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List TikiSheets','tiki-sheets.php',782,'feature_sheet','tiki_p_view_sheet','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Trackers','tiki-list_trackers.php',800,'feature_trackers','tiki_p_view_trackers','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Trackers','tiki-list_trackers.php',805,'feature_trackers','tiki_p_view_trackers','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Trackers','tiki-admin_trackers.php',810,'feature_trackers','tiki_p_admin_trackers','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Surveys','tiki-list_surveys.php',850,'feature_surveys','tiki_p_take_survey','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','List Surveys','tiki-list_surveys.php',855,'feature_surveys','tiki_p_take_survey','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Stats','tiki-survey_stats.php',860,'feature_surveys','tiki_p_view_survey_stats','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Surveys','tiki-admin_surveys.php',865,'feature_surveys','tiki_p_admin_surveys','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_subscribe_newsletters','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_send_newsletters','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_admin_newsletters','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_list_newsletters','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Send Newsletters','tiki-send_newsletters.php',905,'feature_newsletters','tiki_p_send_newsletters','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Newsletters','tiki-admin_newsletters.php',910,'feature_newsletters','tiki_p_admin_newsletters','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'s','Charts','tiki-charts.php',1000,'feature_charts','tiki_p_view_chart','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Charts','tiki-admin_charts.php',1005,'feature_charts','tiki_p_admin_charts','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_categories','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_banners','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_templates','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_cookies','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_dynamic','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_mailin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_content_templates','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_html_pages','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_view_referer_stats','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_drawings','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_shoutbox','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_live_support_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','user_is_operator','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'feature_integrator','tiki_p_admin_integrator','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'feature_edit_templates','tiki_p_edit_templates','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'feature_view_tpl','tiki_p_edit_templates','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'feature_editcss','tiki_p_create_css','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (130,42,'o','Admin Home','tiki-admin.php',1051,'','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (131,42,'o','Live Support','tiki-live_support_admin.php',1055,'feature_live_support','tiki_p_live_support_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (132,42,'o','Live Support','tiki-live_support_admin.php',1055,'feature_live_support','user_is_operator','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (133,42,'o','Banning','tiki-admin_banning.php',1060,'feature_banning','tiki_p_admin_banning','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (134,42,'o','Calendar','tiki-admin_calendars.php',1065,'feature_calendar','tiki_p_admin_calendar','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (135,42,'o','Users','tiki-adminusers.php',1070,'','tiki_p_admin_users','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (136,42,'o','Groups','tiki-admingroups.php',1075,'','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (189,42,'o','Wiki Cache','tiki-list_cache.php',1080,'cachepages','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (138,42,'o','Modules','tiki-admin_modules.php',1085,'','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (139,42,'o','Hotwords','tiki-admin_hotwords.php',1095,'feature_hotwords','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (140,42,'o','RSS Modules','tiki-admin_rssmodules.php',1100,'','tiki_p_admin_rssmodules','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (141,42,'o','Menus','tiki-admin_menus.php',1105,'','tiki_p_edit_menu','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (142,42,'o','Polls','tiki-admin_polls.php',1110,'feature_polls','tiki_p_admin_polls','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (143,42,'o','Mail Notifications','tiki-admin_notifications.php',1120,'','tiki_p_admin_notifications','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (182,42,'o','Search Stats','tiki-search_stats.php',1125,'feature_search_stats','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (145,42,'o','Theme Control','tiki-theme_control.php',1130,'feature_theme_control','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (183,42,'o','QuickTags','tiki-admin_quicktags.php',1135,'','tiki_p_admin_quicktags','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (148,42,'o','Categories','tiki-admin_categories.php',1145,'feature_categories','tiki_p_admin_categories','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (149,42,'o','Banners','tiki-list_banners.php',1150,'feature_banners','tiki_p_admin_banners','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (150,42,'o','Edit Templates','tiki-edit_templates.php',1155,'feature_edit_templates','tiki_p_edit_templates','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (147,42,'o','View Templates','tiki-edit_templates.php',1155,'feature_view_tpl','tiki_p_edit_templates','',2);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (146,42,'o','Edit CSS','tiki-edit_css.php',1158,'feature_editcss','tiki_p_create_css','',2);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (151,42,'o','Drawings','tiki-admin_drawings.php',1160,'feature_drawings','tiki_p_admin_drawings','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (152,42,'o','Dynamic content','tiki-list_contents.php',1165,'feature_dynamic_content','tiki_p_admin_dynamic','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (153,42,'o','Mail-in','tiki-admin_mailin.php',1175,'feature_mailin','tiki_p_admin_mailin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (154,42,'o','HTML Pages','tiki-admin_html_pages.php',1185,'feature_html_pages','tiki_p_edit_html_pages','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (155,42,'o','Shoutbox','tiki-shoutbox.php',1190,'feature_shoutbox','tiki_p_admin_shoutbox','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (156,42,'o','Shoutbox Words','tiki-admin_shoutbox_words.php',1191,'feature_shoutbox','tiki_p_admin_shoutbox','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (157,42,'o','Referer Stats','tiki-referer_stats.php',1195,'feature_referer_stats','tiki_p_view_referer_stats','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (158,42,'o','Integrator','tiki-admin_integrator.php',1205,'feature_integrator','tiki_p_admin_integrator','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (159,42,'o','phpinfo','tiki-phpinfo.php',1215,'','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (163,42,'o','Tiki Logs','tiki-syslog.php',1245,'','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (164,42,'o','Security Admin','tiki-admin_security.php',1250,'','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (165,42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (166,42,'o','Comments','tiki-list_comments.php',1260,'feature_wiki_comments','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (167,42,'o','Comments','tiki-list_comments.php',1260,'feature_article_comments','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (168,42,'o','Comments','tiki-list_comments.php',1260,'feature_blog_comments','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (169,42,'o','Comments','tiki-list_comments.php',1260,'feature_file_galleries_comments','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (170,42,'o','Comments','tiki-list_comments.php',1260,'feature_image_galleries_comments','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (171,42,'o','Comments','tiki-list_comments.php',1260,'feature_poll_comments','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (172,42,'o','Comments','tiki-list_comments.php',1260,'feature_faq_comments','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (173,42,'o','Freetags','tiki-browse_freetags.php',27,'feature_freetags','tiki_p_view_freetags','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (174,42,'r','Admin','',1050,'','tiki_p_admin_contribution','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (175,42,'o','Contribution','tiki-admin_contribution.php',1265,'feature_contribution','tiki_p_admin_contribution','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (176,42,'o','List TikiSheets','tiki-sheets.php',782,'feature_sheet','tiki_p_view_sheet','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (177,42,'o','Directory batch','tiki-batch_upload_files.php',617,'feature_file_galleries_batch','tiki_p_batch_upload_file_dir','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (178,42,'o','Contacts','tiki-contacts.php',87,'feature_mytiki,feature_contacts','','Registered',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (179,42,'o','Tiki Calendar','tiki-action_calendar.php',36,'feature_action_calendar','tiki_p_view_tiki_calendar','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (180,42,'r','Admin','',1050,'','tiki_p_admin_users','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES 
-(187,42,'o','Search','tiki-searchresults.php',13,'feature_search','tiki_p_search','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (184,42,'r','Admin','',1050,'','tiki_p_admin_quicktags','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (185,42,'r','Admin','',1050,'','tiki_p_edit_menu','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (188,42,'o','Tiki Cache/Sys Admin','tiki-admin_system.php',1230,'','tiki_p_clean_cache','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (186,42,'r','Admin','',1050,'','tiki_p_clean_cache','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (190,42,'s','Articles','tiki-view_articles.php',350,'feature_articles','tiki_p_articles_read_heading','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (191,42,'o','Articles Home','tiki-view_articles.php',355,'feature_articles','tiki_p_articles_read_heading','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (192,42,'o','List Articles','tiki-list_articles.php',360,'feature_articles','tiki_p_articles_read_heading','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (193,42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_view_actionlog','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (194,42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_view_actionlog_owngroups','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_contribution','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_users','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_quicktags','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_menu','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_clean_cache','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Admin Home','tiki-admin.php',1051,'','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Live Support','tiki-live_support_admin.php',1055,'feature_live_support','tiki_p_live_support_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Live Support','tiki-live_support_admin.php',1055,'feature_live_support','user_is_operator','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Banning','tiki-admin_banning.php',1060,'feature_banning','tiki_p_admin_banning','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Calendar','tiki-admin_calendars.php',1065,'feature_calendar','tiki_p_admin_calendar','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Users','tiki-adminusers.php',1070,'','tiki_p_admin_users','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Groups','tiki-admingroups.php',1075,'','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Wiki Cache','tiki-list_cache.php',1080,'cachepages','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Modules','tiki-admin_modules.php',1085,'','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Hotwords','tiki-admin_hotwords.php',1095,'feature_hotwords','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','RSS Modules','tiki-admin_rssmodules.php',1100,'','tiki_p_admin_rssmodules','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Menus','tiki-admin_menus.php',1105,'','tiki_p_edit_menu','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Polls','tiki-admin_polls.php',1110,'feature_polls','tiki_p_admin_polls','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Mail Notifications','tiki-admin_notifications.php',1120,'','tiki_p_admin_notifications','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Search Stats','tiki-search_stats.php',1125,'feature_search_stats','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Theme Control','tiki-theme_control.php',1130,'feature_theme_control','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','QuickTags','tiki-admin_quicktags.php',1135,'','tiki_p_admin_quicktags','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Categories','tiki-admin_categories.php',1145,'feature_categories','tiki_p_admin_categories','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Banners','tiki-list_banners.php',1150,'feature_banners','tiki_p_admin_banners','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Edit Templates','tiki-edit_templates.php',1155,'feature_edit_templates','tiki_p_edit_templates','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','View Templates','tiki-edit_templates.php',1155,'feature_view_tpl','tiki_p_edit_templates','',2);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Edit CSS','tiki-edit_css.php',1158,'feature_editcss','tiki_p_create_css','',2);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Drawings','tiki-admin_drawings.php',1160,'feature_drawings','tiki_p_admin_drawings','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Dynamic content','tiki-list_contents.php',1165,'feature_dynamic_content','tiki_p_admin_dynamic','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Mail-in','tiki-admin_mailin.php',1175,'feature_mailin','tiki_p_admin_mailin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','HTML Pages','tiki-admin_html_pages.php',1185,'feature_html_pages','tiki_p_edit_html_pages','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Shoutbox','tiki-shoutbox.php',1190,'feature_shoutbox','tiki_p_admin_shoutbox','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Shoutbox Words','tiki-admin_shoutbox_words.php',1191,'feature_shoutbox','tiki_p_admin_shoutbox','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Referer Stats','tiki-referer_stats.php',1195,'feature_referer_stats','tiki_p_view_referer_stats','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Integrator','tiki-admin_integrator.php',1205,'feature_integrator','tiki_p_admin_integrator','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','phpinfo','tiki-phpinfo.php',1215,'','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tiki Cache/Sys Admin','tiki-admin_system.php',1230,'','tiki_p_clean_cache','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tiki Importer','tiki-importer.php',1240,'','tiki_p_admin_importer','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tiki Logs','tiki-syslog.php',1245,'','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Security Admin','tiki-admin_security.php',1250,'','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_view_actionlog','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_view_actionlog_owngroups','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Content Templates','tiki-admin_content_templates.php',1256,'','tiki_p_edit_content_templates','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tiki Importer','tiki-importer.php',1240,'','tiki_p_admin_importer','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_wiki_comments','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_article_comments','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_blog_comments','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_file_galleries_comments','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_image_galleries_comments','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_poll_comments','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_faq_comments','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Contribution','tiki-admin_contribution.php',1265,'feature_contribution','tiki_p_admin_contribution','',0);
 
+
+
 DROP TABLE IF EXISTS `tiki_menus`;
 CREATE TABLE `tiki_menus` (
   `menuId` int(8) NOT NULL auto_increment,

------------------------------------------------------------------------
r20450 | kissaki | 2009-07-31 19:24:34 -0400 (sex, 31 jul 2009) | 1 line

updated pgsql convert script

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20449)
+++ tiki.sql	(revision 20450)
@@ -2128,7 +2128,7 @@
   `tikihost` varchar(200) default NULL,
   PRIMARY KEY (`sessionId`),
   KEY `user` (user),
-  KEY `timestamp` (timestamp)
+  KEY `timestamp` (`timestamp`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_sheet_layout`;
@@ -2139,7 +2139,7 @@
   `headerRow` int(4) NOT NULL default '0',
   `footerRow` int(4) NOT NULL default '0',
   `className` varchar(64) default NULL,
-  UNIQUE KEY `sheetId` (sheetId,begin)
+  UNIQUE KEY `sheetId` (`sheetId`, `begin`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_sheet_values`;

------------------------------------------------------------------------
r20448 | kissaki | 2009-07-31 18:53:58 -0400 (sex, 31 jul 2009) | 1 line

column-quotes on keys

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20447)
+++ tiki.sql	(revision 20448)
@@ -135,7 +135,7 @@
   `isFlagged` char(1) default NULL,
   `priority` int(2) default NULL,
   PRIMARY KEY (`msgId`),
-  KEY userIsRead (user, isRead)
+  KEY `userIsRead` (user, isRead)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `messu_archive`;
@@ -185,7 +185,7 @@
   `expireref` varchar(64),
   `data` text NOT NULL,
   PRIMARY KEY (`sesskey`),
-  KEY expiry (expiry)
+  KEY `expiry` (`expiry`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_actionlog`;
@@ -200,8 +200,8 @@
   `comment` varchar(200) default NULL,
   `categId` int(12) NOT NULL default '0',
   PRIMARY KEY (`actionId`),
-  KEY lastModif(lastModif),
-  KEY object(object(100), objectType, action(100))
+  KEY `lastModif` (`lastModif`),
+  KEY `object` (`object`(100), `objectType`, `action`(100))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_actionlog_params`;
@@ -209,8 +209,8 @@
   `actionId` int(8) NOT NULL,
   `name` varchar(40) NOT NULL,
   `value` text,
-  KEY actionIDIndex (actionId),
-  KEY nameValue (name, value(200))
+  KEY `actionIDIndex` (`actionId`),
+  KEY `nameValue` (`name`, `value`(200))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_articles`;
@@ -248,16 +248,16 @@
   `rating` decimal(3,2) default NULL,
   `isfloat` char(1) default NULL,
   PRIMARY KEY (`articleId`),
-  KEY title (title),
-  KEY heading (heading(255)),
-  KEY body (body(255)),
-  KEY nbreads (nbreads),
-  KEY author (author(32)),
-  KEY topicId (topicId),
-  KEY publishDate (publishDate),
-  KEY expireDate (expireDate),
-  KEY type (type),
-  FULLTEXT KEY ft (title,heading,body)
+  KEY `title` (`title`),
+  KEY `heading` (`heading`(255)),
+  KEY `body` (`body`(255)),
+  KEY `nbreads` (`nbreads`),
+  KEY `author` (`author`(32)),
+  KEY `topicId` (`topicId`),
+  KEY `publishDate` (`publishDate`),
+  KEY `expireDate` (`expireDate`),
+  KEY `type` (`type`),
+  FULLTEXT KEY `ft` (`title`, `heading`, `body`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_article_types`;
@@ -283,8 +283,8 @@
   `creator_edit` varchar(1) default NULL,
   `comment_can_rate_article` char(1) default NULL,
   PRIMARY KEY (`type`),
-  KEY show_pre_publ (show_pre_publ),
-  KEY show_post_expire (show_post_expire)
+  KEY `show_pre_publ` (`show_pre_publ`),
+  KEY `show_post_expire` (`show_post_expire`)
 ) ENGINE=MyISAM ;
 
 INSERT IGNORE INTO tiki_article_types(type) VALUES ('Article');
@@ -375,10 +375,10 @@
   `title` varchar(255) default NULL,
   `priv` varchar(1) default NULL,
   PRIMARY KEY (`postId`),
-  KEY data (data(255)),
-  KEY blogId (blogId),
-  KEY created (created),
-  FULLTEXT KEY ft (data,title)
+  KEY `data` (`data`(255)),
+  KEY `blogId` (`blogId`),
+  KEY `created` (`created`),
+  FULLTEXT KEY `ft` (`data`, `title`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_blog_posts_images`;
@@ -413,10 +413,10 @@
   `allow_comments` char(1) default NULL,
   `show_avatar` char(1) default NULL,
   PRIMARY KEY (`blogId`),
-  KEY title (title),
-  KEY description (description(255)),
-  KEY hits (hits),
-  FULLTEXT KEY ft (title,description)
+  KEY `title` (`title`),
+  KEY `description` (`description`(255)),
+  KEY `hits` (`hits`),
+  FULLTEXT KEY `ft` (`title`, `description`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_calendar_categories`;
@@ -425,7 +425,7 @@
   `calendarId` int(14) NOT NULL default '0',
   `name` varchar(255) NOT NULL default '',
   PRIMARY KEY (`calcatId`),
-  UNIQUE KEY catname (calendarId,name(16))
+  UNIQUE KEY `catname` (`calendarId`, `name`(16))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_calendar_recurrence`;
@@ -457,7 +457,7 @@
   `created` int(14) NOT NULL default '0',
   `lastmodif` int(14) NOT NULL default '0',
   PRIMARY KEY (`recurrenceId`),
-  KEY calendarId (calendarId)
+  KEY `calendarId` (`calendarId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_calendar_items`;
@@ -482,8 +482,8 @@
   `lastmodif` int(14) NOT NULL default '0',
   `allday` tinyint(1) NOT NULL default '0',
   PRIMARY KEY (`calitemId`),
-  KEY calendarId (calendarId),
-  FULLTEXT KEY ft (`name`,`description`),
+  KEY `calendarId` (`calendarId`),
+  FULLTEXT KEY `ft` (`name`,`description`),
   CONSTRAINT `fk_calitems_recurrence`
 	FOREIGN KEY (`recurrenceId`) REFERENCES `tiki_calendar_recurrence`(`recurrenceId`)
 	ON UPDATE CASCADE ON DELETE SET NULL
@@ -496,7 +496,7 @@
   `name` varchar(255) NOT NULL default '',
   `description` blob,
   PRIMARY KEY (`callocId`),
-  UNIQUE KEY locname (calendarId,name(16))
+  UNIQUE KEY `locname` (`calendarId`, `name`(16))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_calendar_roles`;
@@ -556,8 +556,8 @@
   `hits` int(8) default NULL,
   `comments_locked` char(1) NOT NULL default 'n',
   PRIMARY KEY (`objectId`),
-  KEY (type, objectId),
-  KEY (itemId, type)
+  KEY (`type`, `objectId`),
+  KEY (`itemId`, `type`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_categorized_objects`;
@@ -703,15 +703,15 @@
   `approved` char(1) NOT NULL default 'y',
   `locked` char(1) NOT NULL default 'n',
   PRIMARY KEY (`threadId`),
-  UNIQUE KEY no_repeats (parentId, userName(40), title(100), commentDate, message_id(40), in_reply_to(40)),
-  KEY title (title),
-  KEY data (data(255)),
-  KEY hits (hits),
-  KEY tc_pi (parentId),
-  KEY objectType (object, objectType),
-  KEY commentDate (commentDate),
-  KEY threaded (message_id, in_reply_to, parentId),
-  FULLTEXT KEY ft (title,data)
+  UNIQUE KEY `no_repeats` (parentId, userName(40), title(100), commentDate, message_id(40), in_reply_to(40)),
+  KEY `title` (title),
+  KEY `data` (data(255)),
+  KEY `hits` (hits),
+  KEY `tc_pi` (parentId),
+  KEY `objectType` (object, objectType),
+  KEY `commentDate` (commentDate),
+  KEY `threaded` (message_id, in_reply_to, parentId),
+  FULLTEXT KEY `ft` (title,data)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_content`;
@@ -796,7 +796,7 @@
   PRIMARY KEY (`siteId`),
   KEY (isValid),
   KEY (url),
-  FULLTEXT KEY ft (name,description)
+  FULLTEXT KEY `ft` (name,description)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_drawings`;
@@ -842,10 +842,10 @@
   `question` text,
   `answer` text,
   PRIMARY KEY (`questionId`),
-  KEY faqId (faqId),
-  KEY question (question(255)),
-  KEY answer (answer(255)),
-  FULLTEXT KEY ft (question,answer)
+  KEY `faqId` (faqId),
+  KEY `question` (question(255)),
+  KEY `answer` (answer(255)),
+  FULLTEXT KEY `ft` (question,answer)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_faqs`;
@@ -858,10 +858,10 @@
   `hits` int(8) default NULL,
   `canSuggest` char(1) default NULL,
   PRIMARY KEY (`faqId`),
-  KEY title (title),
-  KEY description (description(255)),
-  KEY hits (hits),
-  FULLTEXT KEY ft (title,description)
+  KEY `title` (title),
+  KEY `description` (description(255)),
+  KEY `hits` (hits),
+  FULLTEXT KEY `ft` (title,description)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_featured_links`;
@@ -944,13 +944,13 @@
   `comment` varchar(200) default NULL,
   `archiveId` int(14) default 0,
   PRIMARY KEY (`fileId`),
-  KEY name (name),
-  KEY description (description(255)),
-  KEY created (created),
-  KEY archiveId (archiveId),
-  KEY galleryId (galleryId),
-  KEY hits (hits),
-  FULLTEXT KEY ft (name,description,search_data,filename)
+  KEY `name` (name),
+  KEY `description` (description(255)),
+  KEY `created` (created),
+  KEY `archiveId` (archiveId),
+  KEY `galleryId` (galleryId),
+  KEY `hits` (hits),
+  FULLTEXT KEY `ft` (name,description,search_data,filename)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_forum_attachments`;
@@ -967,7 +967,7 @@
   `created` int(14) default NULL,
   `path` varchar(250) default NULL,
   PRIMARY KEY (`attId`),
-  KEY threadId (threadId)
+  KEY `threadId` (threadId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_forum_reads`;
@@ -1106,12 +1106,12 @@
   `defaultscale` varchar(10) NOT NULL DEFAULT 'o',
   `showcategories` char(1) NOT NULL default 'n', 
   PRIMARY KEY (`galleryId`),
-  KEY name (name),
-  KEY description (description(255)),
-  KEY hits (hits),
-  KEY parentgallery (parentgallery),
-  KEY visibleUser (visible, user),
-  FULLTEXT KEY ft (name,description)
+  KEY `name` (name),
+  KEY `description` (description(255)),
+  KEY `hits` (hits),
+  KEY `parentgallery` (parentgallery),
+  KEY `visibleUser` (visible, user),
+  FULLTEXT KEY `ft` (name,description)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_galleries_scales`;
@@ -1146,7 +1146,7 @@
   `title` varchar(250) default NULL,
   `type` varchar(200) default NULL,
   `url` varchar(250) default NULL,
-  KEY watchId (watchId),
+  KEY `watchId` (watchId),
   PRIMARY KEY (`group`(50),event,object(100))
 ) ENGINE=MyISAM;
 
@@ -1208,13 +1208,13 @@
   `hits` int(14) default NULL,
   `path` varchar(255) default NULL,
   PRIMARY KEY (`imageId`),
-  KEY name (name),
-  KEY description (description(255)),
-  KEY hits (hits),
-  KEY ti_gId (galleryId),
-  KEY ti_cr (created),
-  KEY ti_us (user),
-  FULLTEXT KEY ft (name,description)
+  KEY `name` (name),
+  KEY `description` (description(255)),
+  KEY `hits` (hits),
+  KEY `ti_gId` (galleryId),
+  KEY `ti_cr` (created),
+  KEY `ti_us` (user),
+  FULLTEXT KEY `ft` (name,description)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_images_data`;
@@ -1229,7 +1229,7 @@
   `data` longblob,
   `etag` varchar(32) default NULL,
   PRIMARY KEY (`imageId`,`xsize`,`ysize`,`type`),
-  KEY t_i_d_it (imageId,type)
+  KEY `t_i_d_it` (imageId,type)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_language`;
@@ -1256,7 +1256,7 @@
   `data` longblob,
   `refresh` int(14) default NULL,
   PRIMARY KEY (`cacheId`),
-  KEY url (url)
+  KEY `url` (url)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 CREATE INDEX urlindex ON tiki_link_cache (url(250));
 
@@ -1266,7 +1266,7 @@
   `toPage` varchar(160) NOT NULL default '',
   `reltype` varchar(50),
   PRIMARY KEY (`fromPage`,`toPage`),
-  KEY toPage (toPage)
+  KEY `toPage` (toPage)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_live_support_events`;
@@ -1367,7 +1367,7 @@
   `logclient` text NOT NULL,
   `logtime` int(14) NOT NULL,
   PRIMARY KEY (`logId`),
-  KEY logtype (logtype)
+  KEY `logtype` (logtype)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_mail_events`;
@@ -1420,7 +1420,7 @@
   `userlevel` int(4) default 0,
   `icon` varchar(200),
   PRIMARY KEY (`optionId`),
-  UNIQUE KEY uniq_menu (menuId,name(30),url(50),position,section(60),perm(50),groupname(50))
+  UNIQUE KEY `uniq_menu` (menuId,name(30),url(50),position,section(60),perm(50),groupname(50))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (1,42,'o','Home','./',10,'','','',0);
@@ -1671,8 +1671,8 @@
   `params` varchar(255) default NULL,
   `groups` text,
   PRIMARY KEY (`name`(100), `position`, `ord`, `params`(140)),
-  KEY positionType (position, type),
-  KEY moduleId (moduleId)
+  KEY `positionType` (position, type),
+  KEY `moduleId` (moduleId)
 ) ENGINE=MyISAM;
 
 INSERT INTO tiki_modules (name,position,ord,cache_time,params,groups) VALUES ('mnu_application_menu','l',30,0,'flip=y','a:1:{i:0;s:10:"Registered";}');
@@ -1779,11 +1779,11 @@
   `wysiwyg` char(1) default NULL,
   `wiki_authors_style` varchar(20) default '',
   PRIMARY KEY (`page_id`),
-  UNIQUE KEY pageName (pageName),
-  KEY data (data(255)),
-  KEY pageRank (pageRank),
-  FULLTEXT KEY ft (pageName,description,data),
-  KEY lastModif(lastModif)
+  UNIQUE KEY `pageName` (pageName),
+  KEY `data` (data(255)),
+  KEY `pageRank` (pageRank),
+  FULLTEXT KEY `ft` (pageName,description,data),
+  KEY `lastModif`(lastModif)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
 DROP TABLE IF EXISTS `tiki_page_drafts`;
@@ -2000,7 +2000,7 @@
   `page_alias` varchar(250) default '',
   `pos` int(4) default NULL,
   PRIMARY KEY (`receivedPageId`),
-  KEY structureName (structureName)
+  KEY `structureName` (structureName)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_referer_stats`;
@@ -2030,7 +2030,7 @@
   `showPubDate` char(1) default 'n',
   `content` longblob,
   PRIMARY KEY (`rssId`),
-  KEY name (name)
+  KEY `name` (name)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_rss_feeds`;
@@ -2051,8 +2051,8 @@
   `count` int(11) NOT NULL default '1',
   `last_update` int(11) NOT NULL default '0',
   PRIMARY KEY (`searchword`,`location`,`page`(80)),
-  KEY last_update (last_update),
-  KEY location (location(50), page(200))
+  KEY `last_update` (last_update),
+  KEY `location` (location(50), page(200))
 ) ENGINE=MyISAM;
 
 -- LRU (last recently used) list for searching parts of words
@@ -2062,7 +2062,7 @@
   `lastUsed` int(11) NOT NULL default '0',
   `lastUpdated` int(11) NOT NULL default '0',
   PRIMARY KEY (`syllable`),
-  KEY lastUsed (lastUsed)
+  KEY `lastUsed` (lastUsed)
 ) ENGINE=MyISAM;
 
 -- searchword caching table for search syllables
@@ -2087,7 +2087,7 @@
   `tiki_version` varchar(60) NOT NULL,
   `severity` int(4) NOT NULL default '0',
   PRIMARY KEY (`md5_value`,`filename`(100),`tiki_version`),
-  KEY sdb_fn (filename)
+  KEY `sdb_fn` (filename)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_semaphores`;
@@ -2127,8 +2127,8 @@
   `timestamp` int(14) default NULL,
   `tikihost` varchar(200) default NULL,
   PRIMARY KEY (`sessionId`),
-  KEY user (user),
-  KEY timestamp (timestamp)
+  KEY `user` (user),
+  KEY `timestamp` (timestamp)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_sheet_layout`;
@@ -2139,7 +2139,7 @@
   `headerRow` int(4) NOT NULL default '0',
   `footerRow` int(4) NOT NULL default '0',
   `className` varchar(64) default NULL,
-  UNIQUE KEY sheetId (sheetId,begin)
+  UNIQUE KEY `sheetId` (sheetId,begin)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_sheet_values`;
@@ -2155,8 +2155,8 @@
   `height` int(4) NOT NULL default '1',
   `format` varchar(255) default NULL,
   `user` varchar(200) default '',
-  UNIQUE KEY sheetId (sheetId,begin,rowIndex,columnIndex),
-  KEY sheetId_2 (sheetId,rowIndex,columnIndex)
+  UNIQUE KEY `sheetId` (sheetId,begin,rowIndex,columnIndex),
+  KEY `sheetId_2` (sheetId,rowIndex,columnIndex)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_sheets`;
@@ -2202,8 +2202,8 @@
   `page_alias` varchar(240) NOT NULL default '',
   `pos` int(4) default NULL,
   PRIMARY KEY (`page_ref_id`),
-  KEY pidpaid (page_id,parent_id),
-  KEY page_id (page_id)
+  KEY `pidpaid` (page_id,parent_id),
+  KEY `page_id` (page_id)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_submissions`;
@@ -2410,7 +2410,7 @@
   INDEX fieldId (fieldId),
   INDEX value (value(250)),
   INDEX lang (lang),
-  FULLTEXT KEY ft (value)
+  FULLTEXT KEY `ft` (value)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_tracker_items`;
@@ -2458,8 +2458,8 @@
   `source` tinyblob NOT NULL,
   `lang` char(16) NOT NULL default '',
   PRIMARY KEY (`source`(255),`lang`),
-  UNIQUE KEY id (id),
-  KEY id_2 (id)
+  UNIQUE KEY `id` (id),
+  KEY `id_2` (id)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_user_answers`;
@@ -2656,8 +2656,8 @@
   `optionId` int(10) NOT NULL default 0,
   `time` int(14) NOT NULL default 0,
   KEY (`user`(100),id(100)),
-  KEY ip (`ip`),
-  KEY id (`id`)
+  KEY `ip` (`ip`),
+  KEY `id` (`id`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_user_watches`;
@@ -2670,7 +2670,7 @@
   `type` varchar(200) default NULL,
   `url` varchar(250) default NULL,
   `email` varchar(200) default NULL,
-  KEY watchId (watchId),
+  KEY `watchId` (watchId),
   PRIMARY KEY (`user`(50),event,object(100),email(50))
 ) ENGINE=MyISAM;
 
@@ -2750,7 +2750,7 @@
   `created` int(14) default NULL,
   `comment` varchar(250) default NULL,
   PRIMARY KEY (`attId`),
-  KEY page (page)
+  KEY `page` (page)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_zones`;
@@ -2768,10 +2768,10 @@
   `date` int(14) NOT NULL default '0',
   `IP` varchar(50) NOT NULL default '',
   PRIMARY KEY (`id`),
-  KEY object (object,userId,type),
-  KEY userId (userId),
-  KEY type (type),
-  KEY date (date)
+  KEY `object` (object,userId,type),
+  KEY `userId` (userId),
+  KEY `type` (type),
+  KEY `date` (date)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `users_grouppermissions`;
@@ -2802,7 +2802,7 @@
   `groupTheme` varchar(255) default '',
   `isExternal` char(1) default 'n',
   PRIMARY KEY (`id`),
-  UNIQUE KEY groupName (groupName)
+  UNIQUE KEY `groupName` (groupName)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
 DROP TABLE IF EXISTS `users_objectpermissions`;
@@ -2823,7 +2823,7 @@
   `admin` varchar(1) default NULL,
   `feature_check` VARCHAR(50) NULL,
   PRIMARY KEY (`permName`),
-  KEY type (type)
+  KEY `type` (type)
 ) ENGINE=MyISAM;
 
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_calendar', 'Can create/admin calendars', 'admin', 'calendar', 'y');
@@ -3181,10 +3181,10 @@
   `openid_url` varchar(255) default NULL,
   `waiting` char(1) default NULL,
   PRIMARY KEY (`userId`),
-  KEY score (score),
-  KEY login (login),
-  KEY registrationDate (registrationDate),
-  KEY openid_url (openid_url)
+  KEY `score` (score),
+  KEY `login` (login),
+  KEY `registrationDate` (registrationDate),
+  KEY `openid_url` (openid_url)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 -- Administrator account
@@ -3223,7 +3223,7 @@
   `enabled` char(1) NOT NULL default 'n',
   `description` text NOT NULL,
   PRIMARY KEY (`ruleID`),
-  KEY repID (repID)
+  KEY `repID` (repID)
 ) ENGINE=MyISAM;
 
 INSERT INTO tiki_integrator_rules VALUES ('1','1','1','.*<body[^>]*?>(.*?)</body.*','\1','y','n','i','y','Extract code between <body> and </body> tags');
@@ -3238,8 +3238,8 @@
   `tagicon` varchar(255) default NULL,
   `tagcategory` varchar(255) default NULL,
   PRIMARY KEY (`tagId`),
-  KEY tagcategory (tagcategory),
-  KEY taglabel (taglabel)
+  KEY `tagcategory` (tagcategory),
+  KEY `taglabel` (taglabel)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 -- wiki
@@ -3428,7 +3428,7 @@
   `objId` varchar(255) NOT NULL,
   `lang` varchar(16) default NULL,
   PRIMARY KEY (`type`, `objId`),
-  KEY traId ( traId )
+  KEY `traId` ( traId )
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
 DROP TABLE IF EXISTS `tiki_friends`;
@@ -3492,7 +3492,7 @@
   `expire` int(14) NOT NULL default '0',
   `tstamp` timestamp(14) NOT NULL,
   PRIMARY KEY (`user`(110),`event_id`(110)),
-  KEY user (user(110),event_id(110),expire)
+  KEY `user` (user(110),event_id(110),expire)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_file_handlers`;
@@ -3868,7 +3868,7 @@
   `last_update` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
   `last_objectType` VARCHAR(20) NOT NULL,
   `last_objectId` VARCHAR(200) NOT NULL,
-  KEY last_object (last_objectType, last_objectId)
+  KEY `last_object` (last_objectType, last_objectId)
 );
 
 DROP TABLE IF EXISTS `tiki_user_reports`;

------------------------------------------------------------------------
r20444 | kissaki | 2009-07-31 17:26:50 -0400 (sex, 31 jul 2009) | 1 line

quote table names in PRIMARY KEY definitions with `

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20443)
+++ tiki.sql	(revision 20444)
@@ -15,7 +15,7 @@
   `lastModif` int(14) default NULL,
   `description` text,
   `expirationTime` int(6) unsigned NOT NULL default '0',
-  PRIMARY KEY (activityId)
+  PRIMARY KEY (`activityId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `galaxia_activity_roles`;
@@ -22,7 +22,7 @@
 CREATE TABLE `galaxia_activity_roles` (
   `activityId` int(14) NOT NULL default '0',
   `roleId` int(14) NOT NULL default '0',
-  PRIMARY KEY (activityId,roleId)
+  PRIMARY KEY (`activityId`,`roleId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `galaxia_instance_activities`;
@@ -33,7 +33,7 @@
   `ended` int(14) NOT NULL default '0',
   `user` varchar(200) default '',
   `status` enum('running','completed') default NULL,
-  PRIMARY KEY (instanceId,activityId)
+  PRIMARY KEY (`instanceId`,`activityId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `galaxia_instance_comments`;
@@ -47,7 +47,7 @@
   `comment` text,
   `activity` varchar(80) default NULL,
   `timestamp` int(14) default NULL,
-  PRIMARY KEY (cId)
+  PRIMARY KEY (`cId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `galaxia_instances`;
@@ -62,7 +62,7 @@
   `ended` int(14) default NULL,
   `status` enum('active','exception','aborted','completed') default NULL,
   `properties` longblob,
-  PRIMARY KEY (instanceId)
+  PRIMARY KEY (`instanceId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `galaxia_processes`;
@@ -75,7 +75,7 @@
   `description` text,
   `lastModif` int(14) default NULL,
   `normalized_name` varchar(80) default NULL,
-  PRIMARY KEY (pId)
+  PRIMARY KEY (`pId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `galaxia_roles`;
@@ -85,7 +85,7 @@
   `lastModif` int(14) default NULL,
   `name` varchar(80) default NULL,
   `description` text,
-  PRIMARY KEY (roleId)
+  PRIMARY KEY (`roleId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `galaxia_transitions`;
@@ -93,7 +93,7 @@
   `pId` int(14) NOT NULL default '0',
   `actFromId` int(14) NOT NULL default '0',
   `actToId` int(14) NOT NULL default '0',
-  PRIMARY KEY (actFromId,actToId)
+  PRIMARY KEY (`actFromId`,`actToId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `galaxia_user_roles`;
@@ -114,7 +114,7 @@
   `started` int(14) default NULL,
   `ended` int(14) default NULL,
   `user` varchar(200) default '',
-  PRIMARY KEY (itemId)
+  PRIMARY KEY (`itemId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `messu_messages`;
@@ -134,7 +134,7 @@
   `isReplied` char(1) default NULL,
   `isFlagged` char(1) default NULL,
   `priority` int(2) default NULL,
-  PRIMARY KEY (msgId),
+  PRIMARY KEY (`msgId`),
   KEY userIsRead (user, isRead)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -155,7 +155,7 @@
   `isReplied` char(1) default NULL,
   `isFlagged` char(1) default NULL,
   `priority` int(2) default NULL,
-  PRIMARY KEY (msgId)
+  PRIMARY KEY (`msgId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `messu_sent`;
@@ -175,7 +175,7 @@
   `isReplied` char(1) default NULL,
   `isFlagged` char(1) default NULL,
   `priority` int(2) default NULL,
-  PRIMARY KEY (msgId)
+  PRIMARY KEY (`msgId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `sessions`;
@@ -184,7 +184,7 @@
   `expiry` int(11) unsigned NOT NULL,
   `expireref` varchar(64),
   `data` text NOT NULL,
-  PRIMARY KEY (sesskey),
+  PRIMARY KEY (`sesskey`),
   KEY expiry (expiry)
 ) ENGINE=MyISAM;
 
@@ -199,7 +199,7 @@
   `ip` varchar(15) default NULL,
   `comment` varchar(200) default NULL,
   `categId` int(12) NOT NULL default '0',
-  PRIMARY KEY (actionId),
+  PRIMARY KEY (`actionId`),
   KEY lastModif(lastModif),
   KEY object(object(100), objectType, action(100))
 ) ENGINE=MyISAM;
@@ -247,7 +247,7 @@
   `type` varchar(50) default NULL,
   `rating` decimal(3,2) default NULL,
   `isfloat` char(1) default NULL,
-  PRIMARY KEY (articleId),
+  PRIMARY KEY (`articleId`),
   KEY title (title),
   KEY heading (heading(255)),
   KEY body (body(255)),
@@ -282,7 +282,7 @@
   `show_lang` varchar(1) default 'n',
   `creator_edit` varchar(1) default NULL,
   `comment_can_rate_article` char(1) default NULL,
-  PRIMARY KEY (type),
+  PRIMARY KEY (`type`),
   KEY show_pre_publ (show_pre_publ),
   KEY show_post_expire (show_post_expire)
 ) ENGINE=MyISAM ;
@@ -325,7 +325,7 @@
   `maxClicks` int(8) default NULL,
   `clicks` int(8) default NULL,
   `zone` varchar(40) default NULL,
-  PRIMARY KEY (bannerId),
+  PRIMARY KEY (`bannerId`),
   INDEX ban1(zone,useDates,impressions,maxImpressions,hourFrom,hourTo,fromDate,toDate,mon,tue,wed,thu,fri,sat,sun)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -344,7 +344,7 @@
   `use_dates` char(1) default NULL,
   `created` int(14) default NULL,
   `message` text,
-  PRIMARY KEY (banId)
+  PRIMARY KEY (`banId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_banning_sections`;
@@ -351,7 +351,7 @@
 CREATE TABLE `tiki_banning_sections` (
   `banId` int(12) NOT NULL default '0',
   `section` varchar(100) NOT NULL default '',
-  PRIMARY KEY (banId,section)
+  PRIMARY KEY (`banId`,`section`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_blog_activity`;
@@ -359,7 +359,7 @@
   `blogId` int(8) NOT NULL default '0',
   `day` int(14) NOT NULL default '0',
   `posts` int(8) default NULL,
-  PRIMARY KEY (blogId,day)
+  PRIMARY KEY (`blogId`,`day`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_blog_posts`;
@@ -374,7 +374,7 @@
   `trackbacks_from` text,
   `title` varchar(255) default NULL,
   `priv` varchar(1) default NULL,
-  PRIMARY KEY (postId),
+  PRIMARY KEY (`postId`),
   KEY data (data(255)),
   KEY blogId (blogId),
   KEY created (created),
@@ -389,7 +389,7 @@
   `filetype` varchar(80) default NULL,
   `filesize` int(14) default NULL,
   `data` longblob,
-  PRIMARY KEY (imgId)
+  PRIMARY KEY (`imgId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_blogs`;
@@ -412,7 +412,7 @@
   `add_poster` char(1) default NULL,
   `allow_comments` char(1) default NULL,
   `show_avatar` char(1) default NULL,
-  PRIMARY KEY (blogId),
+  PRIMARY KEY (`blogId`),
   KEY title (title),
   KEY description (description(255)),
   KEY hits (hits),
@@ -424,7 +424,7 @@
   `calcatId` int(11) NOT NULL auto_increment,
   `calendarId` int(14) NOT NULL default '0',
   `name` varchar(255) NOT NULL default '',
-  PRIMARY KEY (calcatId),
+  PRIMARY KEY (`calcatId`),
   UNIQUE KEY catname (calendarId,name(16))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -456,7 +456,7 @@
   `user` varchar(200) default '',
   `created` int(14) NOT NULL default '0',
   `lastmodif` int(14) NOT NULL default '0',
-  PRIMARY KEY (recurrenceId),
+  PRIMARY KEY (`recurrenceId`),
   KEY calendarId (calendarId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -481,7 +481,7 @@
   `created` int(14) NOT NULL default '0',
   `lastmodif` int(14) NOT NULL default '0',
   `allday` tinyint(1) NOT NULL default '0',
-  PRIMARY KEY (calitemId),
+  PRIMARY KEY (`calitemId`),
   KEY calendarId (calendarId),
   FULLTEXT KEY ft (`name`,`description`),
   CONSTRAINT `fk_calitems_recurrence`
@@ -495,7 +495,7 @@
   `calendarId` int(14) NOT NULL default '0',
   `name` varchar(255) NOT NULL default '',
   `description` blob,
-  PRIMARY KEY (callocId),
+  PRIMARY KEY (`callocId`),
   UNIQUE KEY locname (calendarId,name(16))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -504,7 +504,7 @@
   `calitemId` int(14) NOT NULL default '0',
   `username` varchar(200) NOT NULL default '',
   `role` enum('0','1','2','3','6') NOT NULL default '0',
-  PRIMARY KEY (calitemId,username(16),role)
+  PRIMARY KEY (`calitemId`,`username`(16),`role`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_calendars`;
@@ -523,7 +523,7 @@
   `created` int(14) NOT NULL default '0',
   `lastmodif` int(14) NOT NULL default '0',
   `personal` enum ('n', 'y') NOT NULL default 'n',
-  PRIMARY KEY (calendarId)
+  PRIMARY KEY (`calendarId`)
 ) ENGINE=MyISAM ;
 
 DROP TABLE IF EXISTS `tiki_calendar_options`;
@@ -531,7 +531,7 @@
 	calendarId int(14) NOT NULL default 0,
 	optionName varchar(120) NOT NULL default '',
 	value varchar(255),
-	PRIMARY KEY (calendarId,optionName)
+	PRIMARY KEY (`calendarId`,`optionName`)
 ) ENGINE=MyISAM ;
 
 DROP TABLE IF EXISTS `tiki_categories`;
@@ -541,7 +541,7 @@
   `description` varchar(250) default NULL,
   `parentId` int(12) default NULL,
   `hits` int(8) default NULL,
-  PRIMARY KEY (categId)
+  PRIMARY KEY (`categId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_objects`;
@@ -555,7 +555,7 @@
   `href` varchar(200) default NULL,
   `hits` int(8) default NULL,
   `comments_locked` char(1) NOT NULL default 'n',
-  PRIMARY KEY (objectId),
+  PRIMARY KEY (`objectId`),
   KEY (type, objectId),
   KEY (itemId, type)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -570,7 +570,7 @@
 CREATE TABLE `tiki_category_objects` (
   `catObjectId` int(12) NOT NULL default '0',
   `categId` int(12) NOT NULL default '0',
-  PRIMARY KEY (catObjectId,categId)
+  PRIMARY KEY (`catObjectId`,`categId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_object_ratings`;
@@ -577,7 +577,7 @@
 CREATE TABLE `tiki_object_ratings` (
   `catObjectId` int(12) NOT NULL default '0',
   `pollId` int(12) NOT NULL default '0',
-  PRIMARY KEY (catObjectId,pollId)
+  PRIMARY KEY (`catObjectId`,`pollId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_category_sites`;
@@ -584,7 +584,7 @@
 CREATE TABLE `tiki_category_sites` (
   `categId` int(10) NOT NULL default '0',
   `siteId` int(14) NOT NULL default '0',
-  PRIMARY KEY (categId,siteId)
+  PRIMARY KEY (`categId`,`siteId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_chart_items`;
@@ -598,7 +598,7 @@
   `votes` int(14) default NULL,
   `points` int(14) default NULL,
   `average` decimal(4,2) default NULL,
-  PRIMARY KEY (itemId)
+  PRIMARY KEY (`itemId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_charts`;
@@ -621,7 +621,7 @@
   `lastChart` int(14) default NULL,
   `voteAgainAfter` int(14) default NULL,
   `created` int(14) default NULL,
-  PRIMARY KEY (chartId)
+  PRIMARY KEY (`chartId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_charts_rankings`;
@@ -634,7 +634,7 @@
   `period` int(14) NOT NULL default '0',
   `rvotes` int(14) NOT NULL default '0',
   `raverage` decimal(4,2) NOT NULL default '0.00',
-  PRIMARY KEY (chartId,itemId,period)
+  PRIMARY KEY (`chartId`,`itemId`,`period`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_charts_votes`;
@@ -643,7 +643,7 @@
   `itemId` int(14) NOT NULL default '0',
   `timestamp` int(14) default NULL,
   `chartId` int(14) default NULL,
-  PRIMARY KEY (user,itemId)
+  PRIMARY KEY (`user`,`itemId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_chat_channels`;
@@ -656,7 +656,7 @@
   `moderator` varchar(200) default NULL,
   `active` char(1) default NULL,
   `refresh` int(6) default NULL,
-  PRIMARY KEY (channelId)
+  PRIMARY KEY (`channelId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_chat_messages`;
@@ -666,7 +666,7 @@
   `data` varchar(255) default NULL,
   `poster` varchar(200) NOT NULL default 'anonymous',
   `timestamp` int(14) default NULL,
-  PRIMARY KEY (messageId)
+  PRIMARY KEY (`messageId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_chat_users`;
@@ -674,7 +674,7 @@
   `nickname` varchar(200) NOT NULL default '',
   `channelId` int(8) NOT NULL default '0',
   `timestamp` int(14) default NULL,
-  PRIMARY KEY (nickname,channelId)
+  PRIMARY KEY (`nickname`,`channelId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_comments`;
@@ -702,7 +702,7 @@
   `archived` char(1) default NULL,
   `approved` char(1) NOT NULL default 'y',
   `locked` char(1) NOT NULL default 'n',
-  PRIMARY KEY (threadId),
+  PRIMARY KEY (`threadId`),
   UNIQUE KEY no_repeats (parentId, userName(40), title(100), commentDate, message_id(40), in_reply_to(40)),
   KEY title (title),
   KEY data (data(255)),
@@ -719,7 +719,7 @@
   `contentId` int(8) NOT NULL auto_increment,
   `description` text,
   `contentLabel` varchar(255) NOT NULL default '',
-  PRIMARY KEY (contentId)
+  PRIMARY KEY (`contentId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_content_templates`;
@@ -728,7 +728,7 @@
   `content` longblob,
   `name` varchar(200) default NULL,
   `created` int(14) default NULL,
-  PRIMARY KEY (templateId)
+  PRIMARY KEY (`templateId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_content_templates_sections`;
@@ -735,7 +735,7 @@
 CREATE TABLE `tiki_content_templates_sections` (
   `templateId` int(10) NOT NULL default '0',
   `section` varchar(250) NOT NULL default '',
-  PRIMARY KEY (templateId,section)
+  PRIMARY KEY (`templateId`,`section`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_cookies`;
@@ -742,7 +742,7 @@
 CREATE TABLE `tiki_cookies` (
   `cookieId` int(10) NOT NULL auto_increment,
   `cookie` text,
-  PRIMARY KEY (cookieId)
+  PRIMARY KEY (`cookieId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_copyrights`;
@@ -754,7 +754,7 @@
   `authors` varchar(200) default NULL,
   `copyright_order` int(11) default NULL,
   `userName` varchar(200) default '',
-  PRIMARY KEY (copyrightId)
+  PRIMARY KEY (`copyrightId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_directory_categories`;
@@ -770,7 +770,7 @@
   `showCount` char(1) default NULL,
   `editorGroup` varchar(200) default NULL,
   `hits` int(12) default NULL,
-  PRIMARY KEY (categId)
+  PRIMARY KEY (`categId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_directory_search`;
@@ -777,7 +777,7 @@
 CREATE TABLE `tiki_directory_search` (
   `term` varchar(250) NOT NULL default '',
   `hits` int(14) default NULL,
-  PRIMARY KEY (term)
+  PRIMARY KEY (`term`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_directory_sites`;
@@ -793,7 +793,7 @@
   `lastModif` int(14) default NULL,
   `cache` longblob,
   `cache_timestamp` int(14) default NULL,
-  PRIMARY KEY (siteId),
+  PRIMARY KEY (`siteId`),
   KEY (isValid),
   KEY (url),
   FULLTEXT KEY ft (name,description)
@@ -808,7 +808,7 @@
   `filename_pad` varchar(250) default NULL,
   `timestamp` int(14) default NULL,
   `user` varchar(200) default '',
-  PRIMARY KEY (drawId)
+  PRIMARY KEY (`drawId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_dsn`;
@@ -816,7 +816,7 @@
   `dsnId` int(12) NOT NULL auto_increment,
   `name` varchar(200) NOT NULL default '',
   `dsn` varchar(255) default NULL,
-  PRIMARY KEY (dsnId)
+  PRIMARY KEY (`dsnId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_dynamic_variables`;
@@ -823,7 +823,7 @@
 CREATE TABLE `tiki_dynamic_variables` (
   `name` varchar(40) NOT NULL,
   `data` text,
-  PRIMARY KEY (name)
+  PRIMARY KEY (`name`)
 );
 
 DROP TABLE IF EXISTS `tiki_extwiki`;
@@ -831,7 +831,7 @@
   `extwikiId` int(12) NOT NULL auto_increment,
   `name` varchar(200) NOT NULL default '',
   `extwiki` varchar(255) default NULL,
-  PRIMARY KEY (extwikiId)
+  PRIMARY KEY (`extwikiId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_faq_questions`;
@@ -841,7 +841,7 @@
   `position` int(4) default NULL,
   `question` text,
   `answer` text,
-  PRIMARY KEY (questionId),
+  PRIMARY KEY (`questionId`),
   KEY faqId (faqId),
   KEY question (question(255)),
   KEY answer (answer(255)),
@@ -857,7 +857,7 @@
   `questions` int(5) default NULL,
   `hits` int(8) default NULL,
   `canSuggest` char(1) default NULL,
-  PRIMARY KEY (faqId),
+  PRIMARY KEY (`faqId`),
   KEY title (title),
   KEY description (description(255)),
   KEY hits (hits),
@@ -872,7 +872,7 @@
   `hits` int(8) default NULL,
   `position` int(6) default NULL,
   `type` char(1) default NULL,
-  PRIMARY KEY (url)
+  PRIMARY KEY (`url`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_file_galleries`;
@@ -914,7 +914,7 @@
   `show_path` char(1) default NULL,
   `show_slideshow` char(1) default NULL,
   `default_view` varchar(20) default NULL,
-  PRIMARY KEY (galleryId)
+  PRIMARY KEY (`galleryId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_files`;
@@ -943,7 +943,7 @@
   `lockedby` varchar(200) default '',
   `comment` varchar(200) default NULL,
   `archiveId` int(14) default 0,
-  PRIMARY KEY (fileId),
+  PRIMARY KEY (`fileId`),
   KEY name (name),
   KEY description (description(255)),
   KEY created (created),
@@ -966,7 +966,7 @@
   `dir` varchar(200) default NULL,
   `created` int(14) default NULL,
   `path` varchar(250) default NULL,
-  PRIMARY KEY (attId),
+  PRIMARY KEY (`attId`),
   KEY threadId (threadId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -976,7 +976,7 @@
   `threadId` int(14) NOT NULL default '0',
   `forumId` int(14) default NULL,
   `timestamp` int(14) default NULL,
-  PRIMARY KEY (user,threadId)
+  PRIMARY KEY (`user`,`threadId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_forums`;
@@ -1038,7 +1038,7 @@
   `commentsPerPage` varchar(100) default NULL,
   `is_flat` char(1) default NULL,
   `mandatory_contribution` char(1) default NULL,
-  PRIMARY KEY (forumId)
+  PRIMARY KEY (`forumId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_forums_queue`;
@@ -1059,7 +1059,7 @@
   `in_reply_to` varchar(128) default NULL,
   `tags` varchar(255) default NULL,
   `email` varchar(255) default NULL,
-  PRIMARY KEY (qId)
+  PRIMARY KEY (`qId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_forums_reported`;
@@ -1070,7 +1070,7 @@
   `user` varchar(200) default '',
   `timestamp` int(14) default NULL,
   `reason` varchar(250) default NULL,
-  PRIMARY KEY (threadId)
+  PRIMARY KEY (`threadId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_galleries`;
@@ -1105,7 +1105,7 @@
   `showfilename` char(1) NOT NULL default 'n',
   `defaultscale` varchar(10) NOT NULL DEFAULT 'o',
   `showcategories` char(1) NOT NULL default 'n', 
-  PRIMARY KEY (galleryId),
+  PRIMARY KEY (`galleryId`),
   KEY name (name),
   KEY description (description(255)),
   KEY hits (hits),
@@ -1118,7 +1118,7 @@
 CREATE TABLE `tiki_galleries_scales` (
   `galleryId` int(14) NOT NULL default '0',
   `scale` int(11) NOT NULL default '0',
-  PRIMARY KEY (galleryId,scale)
+  PRIMARY KEY (`galleryId`,`scale`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_games`;
@@ -1127,7 +1127,7 @@
   `hits` int(8) default NULL,
   `votes` int(8) default NULL,
   `points` int(8) default NULL,
-  PRIMARY KEY (gameName)
+  PRIMARY KEY (`gameName`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_group_inclusion`;
@@ -1134,7 +1134,7 @@
 CREATE TABLE `tiki_group_inclusion` (
   `groupName` varchar(255) NOT NULL default '',
   `includeGroup` varchar(255) NOT NULL default '',
-  PRIMARY KEY (groupName(30),includeGroup(30))
+  PRIMARY KEY (`groupName`(30),`includeGroup`(30))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_group_watches`;
@@ -1164,7 +1164,7 @@
   `data` longblob,
   `type` varchar(50) default NULL,
   `is_html` TINYINT(1) NOT NULL DEFAULT 0,
-  PRIMARY KEY (pageName,version),
+  PRIMARY KEY (`pageName`,`version`),
   KEY `user` (`user`),
   KEY(historyId)
 ) ENGINE=MyISAM;
@@ -1173,7 +1173,7 @@
 CREATE TABLE `tiki_hotwords` (
   `word` varchar(40) NOT NULL default '',
   `url` varchar(255) NOT NULL default '',
-  PRIMARY KEY (word)
+  PRIMARY KEY (`word`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_html_pages`;
@@ -1183,7 +1183,7 @@
   `refresh` int(10) default NULL,
   `type` char(1) default NULL,
   `created` int(14) default NULL,
-  PRIMARY KEY (pageName)
+  PRIMARY KEY (`pageName`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_html_pages_dynamic_zones`;
@@ -1192,7 +1192,7 @@
   `zone` varchar(80) NOT NULL default '',
   `type` char(2) default NULL,
   `content` text,
-  PRIMARY KEY (pageName,zone)
+  PRIMARY KEY (`pageName`,`zone`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_images`;
@@ -1207,7 +1207,7 @@
   `user` varchar(200) default '',
   `hits` int(14) default NULL,
   `path` varchar(255) default NULL,
-  PRIMARY KEY (imageId),
+  PRIMARY KEY (`imageId`),
   KEY name (name),
   KEY description (description(255)),
   KEY hits (hits),
@@ -1228,7 +1228,7 @@
   `filename` varchar(80) default NULL,
   `data` longblob,
   `etag` varchar(32) default NULL,
-  PRIMARY KEY (imageId,xsize,ysize,type),
+  PRIMARY KEY (`imageId`,`xsize`,`ysize`,`type`),
   KEY t_i_d_it (imageId,type)
 ) ENGINE=MyISAM;
 
@@ -1237,7 +1237,7 @@
   `source` tinyblob NOT NULL,
   `lang` char(16) NOT NULL default '',
   `tran` tinyblob,
-  PRIMARY KEY (source(255),lang)
+  PRIMARY KEY (`source`(255),`lang`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_languages`;
@@ -1244,7 +1244,7 @@
 CREATE TABLE `tiki_languages` (
   `lang` char(16) NOT NULL default '',
   `language` varchar(255) default NULL,
-  PRIMARY KEY (lang)
+  PRIMARY KEY (`lang`)
 ) ENGINE=MyISAM;
 
 INSERT INTO tiki_languages(lang, language) VALUES('en','English');
@@ -1255,7 +1255,7 @@
   `url` varchar(250) default NULL,
   `data` longblob,
   `refresh` int(14) default NULL,
-  PRIMARY KEY (cacheId),
+  PRIMARY KEY (`cacheId`),
   KEY url (url)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 CREATE INDEX urlindex ON tiki_link_cache (url(250));
@@ -1265,7 +1265,7 @@
   `fromPage` varchar(160) NOT NULL default '',
   `toPage` varchar(160) NOT NULL default '',
   `reltype` varchar(50),
-  PRIMARY KEY (fromPage,toPage),
+  PRIMARY KEY (`fromPage`,`toPage`),
   KEY toPage (toPage)
 ) ENGINE=MyISAM;
 
@@ -1278,7 +1278,7 @@
   `senderId` varchar(32) default NULL,
   `data` text,
   `timestamp` int(14) default NULL,
-  PRIMARY KEY (eventId)
+  PRIMARY KEY (`eventId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_live_support_message_comments`;
@@ -1287,7 +1287,7 @@
   `msgId` int(12) default NULL,
   `data` text,
   `timestamp` int(14) default NULL,
-  PRIMARY KEY (cId)
+  PRIMARY KEY (`cId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_live_support_messages`;
@@ -1304,7 +1304,7 @@
   `title` varchar(200) default NULL,
   `module` int(4) default NULL,
   `email` varchar(250) default NULL,
-  PRIMARY KEY (msgId)
+  PRIMARY KEY (`msgId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_live_support_modules`;
@@ -1311,7 +1311,7 @@
 CREATE TABLE `tiki_live_support_modules` (
   `modId` int(4) NOT NULL auto_increment,
   `name` varchar(90) default NULL,
-  PRIMARY KEY (modId)
+  PRIMARY KEY (`modId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 INSERT INTO tiki_live_support_modules(name) VALUES('wiki');
@@ -1335,7 +1335,7 @@
   `votes` int(10) default NULL,
   `points` int(10) default NULL,
   `status_since` int(14) default NULL,
-  PRIMARY KEY (user)
+  PRIMARY KEY (`user`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_live_support_requests`;
@@ -1354,7 +1354,7 @@
   `resolution` varchar(40) default NULL,
   `chat_started` int(14) default NULL,
   `chat_ended` int(14) default NULL,
-  PRIMARY KEY (reqId)
+  PRIMARY KEY (`reqId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_logs`;
@@ -1366,7 +1366,7 @@
   `logip` varchar(200),
   `logclient` text NOT NULL,
   `logtime` int(14) NOT NULL,
-  PRIMARY KEY (logId),
+  PRIMARY KEY (`logId`),
   KEY logtype (logtype)
 ) ENGINE=MyISAM;
 
@@ -1396,7 +1396,7 @@
   `article_topicId` int(4) default NULL,
   `article_type` varchar(50) default NULL,
   `discard_after` varchar(255) default NULL,
-  PRIMARY KEY (accountId)
+  PRIMARY KEY (`accountId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_menu_languages`;
@@ -1403,7 +1403,7 @@
 CREATE TABLE `tiki_menu_languages` (
   `menuId` int(8) NOT NULL auto_increment,
   `language` char(16) NOT NULL default '',
-  PRIMARY KEY (menuId,language)
+  PRIMARY KEY (`menuId`,`language`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_menu_options`;
@@ -1419,7 +1419,7 @@
   `groupname` text default NULL,
   `userlevel` int(4) default 0,
   `icon` varchar(200),
-  PRIMARY KEY (optionId),
+  PRIMARY KEY (`optionId`),
   UNIQUE KEY uniq_menu (menuId,name(30),url(50),position,section(60),perm(50),groupname(50))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -1624,7 +1624,7 @@
   `type` char(1) default NULL,
   `icon` varchar(200) default NULL,
   `use_items_icons` char(1) NOT NULL DEFAULT 'n',
-  PRIMARY KEY (menuId)
+  PRIMARY KEY (`menuId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 INSERT INTO tiki_menus (menuId,name,description,type) VALUES ('42','Application menu','Main extensive navigation menu','d');
@@ -1641,7 +1641,7 @@
   `duration` int(3) default NULL,
   `topicId` int(12) default NULL,
   `reminded` char(1) default NULL,
-  PRIMARY KEY (eventId)
+  PRIMARY KEY (`eventId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_minical_topics`;
@@ -1655,7 +1655,7 @@
   `data` longblob,
   `path` varchar(250) default NULL,
   `isIcon` char(1) default NULL,
-  PRIMARY KEY (topicId)
+  PRIMARY KEY (`topicId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_modules`;
@@ -1670,7 +1670,7 @@
   `rows` int(4) default NULL,
   `params` varchar(255) default NULL,
   `groups` text,
-  PRIMARY KEY (name(100), position, ord, params(140)),
+  PRIMARY KEY (`name`(100), `position`, `ord`, `params`(140)),
   KEY positionType (position, type),
   KEY moduleId (moduleId)
 ) ENGINE=MyISAM;
@@ -1686,7 +1686,7 @@
   `subscribed` int(14) default NULL,
   `isUser` char(1) NOT NULL default 'n',
   `included` char(1) NOT NULL default 'n',
-  PRIMARY KEY (nlId,email,isUser)
+  PRIMARY KEY (`nlId`,`email`,`isUser`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_newsletter_groups`;
@@ -1694,7 +1694,7 @@
   `nlId` int(12) NOT NULL default '0',
   `groupName` varchar(255) NOT NULL default '',
   `code` varchar(32) default NULL,
-  PRIMARY KEY (nlId,groupName)
+  PRIMARY KEY (`nlId`,`groupName`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_newsletter_included`;
@@ -1701,7 +1701,7 @@
 CREATE TABLE `tiki_newsletter_included` (
   `nlId` int(12) NOT NULL default '0',
   `includedId` int(12) NOT NULL default '0',
-  PRIMARY KEY (nlId,includedId)
+  PRIMARY KEY (`nlId`,`includedId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_newsletters`;
@@ -1720,7 +1720,7 @@
   `frequency` int(14) default NULL,
   `allowTxt` char(1) default 'y',
   `author` varchar(200) default NULL,
-  PRIMARY KEY (nlId)
+  PRIMARY KEY (`nlId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_newsreader_marks`;
@@ -1740,7 +1740,7 @@
   `port` int(4) default NULL,
   `username` varchar(200) default NULL,
   `password` varchar(200) default NULL,
-  PRIMARY KEY (serverId)
+  PRIMARY KEY (`serverId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_page_footnotes`;
@@ -1778,7 +1778,7 @@
   `created` int(14),
   `wysiwyg` char(1) default NULL,
   `wiki_authors_style` varchar(20) default '',
-  PRIMARY KEY (page_id),
+  PRIMARY KEY (`page_id`),
   UNIQUE KEY pageName (pageName),
   KEY data (data(255)),
   KEY pageRank (pageRank),
@@ -1794,7 +1794,7 @@
   `description` varchar(200) default NULL,
   `comment` varchar(200) default NULL,
   `lastModif` int(14) default NULL,
-  PRIMARY KEY (pageName(120), `user`(120))
+  PRIMARY KEY (`pageName`(120), `user`(120))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_pageviews`;
@@ -1801,7 +1801,7 @@
 CREATE TABLE `tiki_pageviews` (
   `day` int(14) NOT NULL default '0',
   `pageviews` int(14) default NULL,
-  PRIMARY KEY (day)
+  PRIMARY KEY (`day`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_poll_objects`;
@@ -1819,7 +1819,7 @@
   `title` varchar(200) default NULL,
   `position` int(4) NOT NULL default '0',
   `votes` int(8) default NULL,
-  PRIMARY KEY (optionId)
+  PRIMARY KEY (`optionId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_polls`;
@@ -1830,7 +1830,7 @@
   `active` char(1) default NULL,
   `publishDate` int(14) default NULL,
   `voteConsiderationSpan` int(4) default 0,
-  PRIMARY KEY (pollId)
+  PRIMARY KEY (`pollId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_preferences`;
@@ -1859,7 +1859,7 @@
   `contentId` int(8) NOT NULL default '0',
   `publishDate` int(14) NOT NULL default '0',
   `data` text,
-  PRIMARY KEY (pId)
+  PRIMARY KEY (`pId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_quiz_question_options`;
@@ -1868,7 +1868,7 @@
   `questionId` int(10) default NULL,
   `optionText` text,
   `points` int(4) default NULL,
-  PRIMARY KEY (optionId)
+  PRIMARY KEY (`optionId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_quiz_questions`;
@@ -1879,7 +1879,7 @@
   `position` int(4) default NULL,
   `type` char(1) default NULL,
   `maxPoints` int(4) default NULL,
-  PRIMARY KEY (questionId)
+  PRIMARY KEY (`questionId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_quiz_results`;
@@ -1889,7 +1889,7 @@
   `fromPoints` int(4) default NULL,
   `toPoints` int(4) default NULL,
   `answer` text,
-  PRIMARY KEY (resultId)
+  PRIMARY KEY (`resultId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_quiz_stats`;
@@ -1898,7 +1898,7 @@
   `questionId` int(10) NOT NULL default '0',
   `optionId` int(10) NOT NULL default '0',
   `votes` int(10) default NULL,
-  PRIMARY KEY (quizId,questionId,optionId)
+  PRIMARY KEY (`quizId`,`questionId`,`optionId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_quiz_stats_sum`;
@@ -1909,7 +1909,7 @@
   `avgpoints` decimal(5,2) default NULL,
   `avgavg` decimal(5,2) default NULL,
   `avgtime` decimal(5,2) default NULL,
-  PRIMARY KEY (quizId)
+  PRIMARY KEY (`quizId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_quizzes`;
@@ -1951,7 +1951,7 @@
   `sData` text,
   `sEpilogue` text,
   `passingperct` int(4) default 0,
-  PRIMARY KEY (quizId, nVersion)
+  PRIMARY KEY (`quizId`, `nVersion`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_received_articles`;
@@ -1979,7 +1979,7 @@
   `author` varchar(200) default NULL,
   `type` varchar(50) default NULL,
   `rating` decimal(3,2) default NULL,
-  PRIMARY KEY (receivedArticleId)
+  PRIMARY KEY (`receivedArticleId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_received_pages`;
@@ -1999,7 +1999,7 @@
   `parentName` varchar(250) default NULL,
   `page_alias` varchar(250) default '',
   `pos` int(4) default NULL,
-  PRIMARY KEY (receivedPageId),
+  PRIMARY KEY (`receivedPageId`),
   KEY structureName (structureName)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -2008,7 +2008,7 @@
   `referer` varchar(255) NOT NULL default '',
   `hits` int(10) default NULL,
   `last` int(14) default NULL,
-  PRIMARY KEY (referer)
+  PRIMARY KEY (`referer`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_related_categories`;
@@ -2015,7 +2015,7 @@
 CREATE TABLE `tiki_related_categories` (
   `categId` int(10) NOT NULL default '0',
   `relatedTo` int(10) NOT NULL default '0',
-  PRIMARY KEY (categId,relatedTo)
+  PRIMARY KEY (`categId`,`relatedTo`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_rss_modules`;
@@ -2029,7 +2029,7 @@
   `showTitle` char(1) default 'n',
   `showPubDate` char(1) default 'n',
   `content` longblob,
-  PRIMARY KEY (rssId),
+  PRIMARY KEY (`rssId`),
   KEY name (name)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -2040,7 +2040,7 @@
   `refresh` int(8) default '300',
   `lastUpdated` int(14) default NULL,
   `cache` longblob,
-  PRIMARY KEY (name,rssVer)
+  PRIMARY KEY (`name`,`rssVer`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_searchindex`;
@@ -2050,7 +2050,7 @@
   `page` varchar(255) NOT NULL default '',
   `count` int(11) NOT NULL default '1',
   `last_update` int(11) NOT NULL default '0',
-  PRIMARY KEY (searchword,location,page(80)),
+  PRIMARY KEY (`searchword`,`location`,`page`(80)),
   KEY last_update (last_update),
   KEY location (location(50), page(200))
 ) ENGINE=MyISAM;
@@ -2061,7 +2061,7 @@
   `syllable` varchar(80) NOT NULL default '',
   `lastUsed` int(11) NOT NULL default '0',
   `lastUpdated` int(11) NOT NULL default '0',
-  PRIMARY KEY (syllable),
+  PRIMARY KEY (`syllable`),
   KEY lastUsed (lastUsed)
 ) ENGINE=MyISAM;
 
@@ -2070,7 +2070,7 @@
 CREATE TABLE tiki_searchwords(
   `syllable` varchar(80) NOT NULL default '',
   `searchword` varchar(80) NOT NULL default '',
-  PRIMARY KEY (syllable,searchword)
+  PRIMARY KEY (`syllable`,`searchword`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_search_stats`;
@@ -2077,7 +2077,7 @@
 CREATE TABLE `tiki_search_stats` (
   `term` varchar(50) NOT NULL default '',
   `hits` int(10) default NULL,
-  PRIMARY KEY (term)
+  PRIMARY KEY (`term`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_secdb`;
@@ -2086,7 +2086,7 @@
   `filename` varchar(250) NOT NULL,
   `tiki_version` varchar(60) NOT NULL,
   `severity` int(4) NOT NULL default '0',
-  PRIMARY KEY (md5_value,filename(100),tiki_version),
+  PRIMARY KEY (`md5_value`,`filename`(100),`tiki_version`),
   KEY sdb_fn (filename)
 ) ENGINE=MyISAM;
 
@@ -2096,7 +2096,7 @@
   `objectType` varchar(20) default 'wiki page',
   `user` varchar(200) NOT NULL default '',
   `timestamp` int(14) default NULL,
-  PRIMARY KEY (semName)
+  PRIMARY KEY (`semName`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_sent_newsletters`;
@@ -2108,7 +2108,7 @@
   `subject` varchar(200) default NULL,
   `data` longblob,
   `datatxt` longblob,
-  PRIMARY KEY (editionId)
+  PRIMARY KEY (`editionId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_sent_newsletters_errors`;
@@ -2126,7 +2126,7 @@
   `user` varchar(200) default '',
   `timestamp` int(14) default NULL,
   `tikihost` varchar(200) default NULL,
-  PRIMARY KEY (sessionId),
+  PRIMARY KEY (`sessionId`),
   KEY user (user),
   KEY timestamp (timestamp)
 ) ENGINE=MyISAM;
@@ -2165,7 +2165,7 @@
   `title` varchar(200) NOT NULL default '',
   `description` text,
   `author` varchar(200) NOT NULL default '',
-  PRIMARY KEY (sheetId)
+  PRIMARY KEY (`sheetId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_shoutbox`;
@@ -2175,7 +2175,7 @@
   `timestamp` int(14) default NULL,
   `user` varchar(200) NULL default '',
   `hash` varchar(32) default NULL,
-  PRIMARY KEY (msgId)
+  PRIMARY KEY (`msgId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_shoutbox_words`;
@@ -2182,7 +2182,7 @@
 CREATE TABLE `tiki_shoutbox_words` (
   `word` VARCHAR( 40 ) NOT NULL ,
   `qty` INT DEFAULT '0' NOT NULL ,
-  PRIMARY KEY (word)
+  PRIMARY KEY (`word`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_structure_versions`;
@@ -2189,7 +2189,7 @@
 CREATE TABLE `tiki_structure_versions` (
   `structure_id` int(14) NOT NULL auto_increment,
   `version` int(14) default NULL,
-  PRIMARY KEY (structure_id)
+  PRIMARY KEY (`structure_id`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_structures`;
@@ -2201,7 +2201,7 @@
   `page_version` int(8) default NULL,
   `page_alias` varchar(240) NOT NULL default '',
   `pos` int(4) default NULL,
-  PRIMARY KEY (page_ref_id),
+  PRIMARY KEY (`page_ref_id`),
   KEY pidpaid (page_id,parent_id),
   KEY page_id (page_id)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -2241,7 +2241,7 @@
   `type` varchar(50) default NULL,
   `rating` decimal(3,2) default NULL,
   `isfloat` char(1) default NULL,
-  PRIMARY KEY (subId)
+  PRIMARY KEY (`subId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_suggested_faq_questions`;
@@ -2252,7 +2252,7 @@
   `answer` text,
   `created` int(14) default NULL,
   `user` varchar(200) NOT NULL default '',
-  PRIMARY KEY (sfqId)
+  PRIMARY KEY (`sfqId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_survey_question_options`;
@@ -2261,7 +2261,7 @@
   `questionId` int(12) NOT NULL default '0',
   `qoption` text,
   `votes` int(10) default NULL,
-  PRIMARY KEY (optionId)
+  PRIMARY KEY (`optionId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_survey_questions`;
@@ -2278,7 +2278,7 @@
   `mandatory` char(1) NOT NULL default 'n',
   `max_answers` int(5) NOT NULL default 0,
   `min_answers` int(5) NOT NULL default 0,
-  PRIMARY KEY (questionId)
+  PRIMARY KEY (`questionId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_surveys`;
@@ -2290,7 +2290,7 @@
   `lastTaken` int(14) default NULL,
   `created` int(14) default NULL,
   `status` char(1) default NULL,
-  PRIMARY KEY (surveyId)
+  PRIMARY KEY (`surveyId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_tags`;
@@ -2306,7 +2306,7 @@
   `user` varchar(200) NOT NULL default '',
   `ip` varchar(15) default NULL,
   `flag` char(1) default NULL,
-  PRIMARY KEY (tagName,pageName)
+  PRIMARY KEY (`tagName`,`pageName`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_theme_control_categs`;
@@ -2313,7 +2313,7 @@
 CREATE TABLE `tiki_theme_control_categs` (
   `categId` int(12) NOT NULL default '0',
   `theme` varchar(250) NOT NULL default '',
-  PRIMARY KEY (categId)
+  PRIMARY KEY (`categId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_theme_control_objects`;
@@ -2322,7 +2322,7 @@
   `type` varchar(250) NOT NULL default '',
   `name` varchar(250) NOT NULL default '',
   `theme` varchar(250) NOT NULL default '',
-  PRIMARY KEY (objId(100), type(100))
+  PRIMARY KEY (`objId`(100), `type`(100))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_theme_control_sections`;
@@ -2329,7 +2329,7 @@
 CREATE TABLE `tiki_theme_control_sections` (
   `section` varchar(250) NOT NULL default '',
   `theme` varchar(250) NOT NULL default '',
-  PRIMARY KEY (section)
+  PRIMARY KEY (`section`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_topics`;
@@ -2342,7 +2342,7 @@
   `image_data` longblob,
   `active` char(1) default NULL,
   `created` int(14) default NULL,
-  PRIMARY KEY (topicId)
+  PRIMARY KEY (`topicId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_tracker_fields`;
@@ -2366,7 +2366,7 @@
   `visibleBy` text,
   `editableBy` text,
   `descriptionIsParsed` char(1) default 'n',
-  PRIMARY KEY (fieldId),
+  PRIMARY KEY (`fieldId`),
   INDEX trackerId (trackerId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -2385,7 +2385,7 @@
   `comment` varchar(250) default NULL,
   `longdesc` blob,
   `version` varchar(40) default NULL,
-  PRIMARY KEY (attId),
+  PRIMARY KEY (`attId`),
   INDEX itemId (itemId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -2397,7 +2397,7 @@
   `data` text,
   `title` varchar(200) default NULL,
   `posted` int(14) default NULL,
-  PRIMARY KEY (commentId)
+  PRIMARY KEY (`commentId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_tracker_item_fields`;
@@ -2406,7 +2406,7 @@
   `fieldId` int(12) NOT NULL default '0',
   `value` text,
   `lang` char(16) default NULL,
-  PRIMARY KEY (itemId,fieldId,lang),
+  PRIMARY KEY (`itemId`,`fieldId`,`lang`),
   INDEX fieldId (fieldId),
   INDEX value (value(250)),
   INDEX lang (lang),
@@ -2420,7 +2420,7 @@
   `created` int(14) default NULL,
   `status` char(1) default NULL,
   `lastModif` int(14) default NULL,
-  PRIMARY KEY (itemId),
+  PRIMARY KEY (`itemId`),
   INDEX trackerId (trackerId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -2429,7 +2429,7 @@
   `trackerId` int(12) NOT NULL default '0',
   `name` varchar(80) NOT NULL default '',
   `value` text default NULL,
-  PRIMARY KEY (trackerId,name(30))
+  PRIMARY KEY (`trackerId`,`name`(30))
 ) ENGINE=MyISAM ;
 
 DROP TABLE IF EXISTS `tiki_trackers`;
@@ -2449,7 +2449,7 @@
   `items` int(10) default NULL,
   `showComments` char(1) default NULL,
   `orderAttachments` varchar(255) NOT NULL default 'filename,created,filesize,hits,desc',
-  PRIMARY KEY (trackerId)
+  PRIMARY KEY (`trackerId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_untranslated`;
@@ -2457,7 +2457,7 @@
   `id` int(14) NOT NULL auto_increment,
   `source` tinyblob NOT NULL,
   `lang` char(16) NOT NULL default '',
-  PRIMARY KEY (source(255),lang),
+  PRIMARY KEY (`source`(255),`lang`),
   UNIQUE KEY id (id),
   KEY id_2 (id)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -2468,7 +2468,7 @@
   `quizId` int(10) NOT NULL default '0',
   `questionId` int(10) NOT NULL default '0',
   `optionId` int(10) NOT NULL default '0',
-  PRIMARY KEY (userResultId,quizId,questionId,optionId)
+  PRIMARY KEY (`userResultId`,`quizId`,`questionId`,`optionId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_user_answers_uploads`;
@@ -2480,7 +2480,7 @@
   `filetype` varchar(64) NOT NULL default '',
   `filesize` varchar(255) NOT NULL default '',
   `filecontent` longblob NOT NULL,
-  PRIMARY KEY (answerUploadId)
+  PRIMARY KEY (`answerUploadId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_user_assigned_modules`;
@@ -2491,7 +2491,7 @@
   `ord` int(4) default NULL,
   `type` char(1) default NULL,
   `user` varchar(200) NOT NULL default '',
-  PRIMARY KEY (name(30),user,position, ord)
+  PRIMARY KEY (`name`(30),`user`,`position`, `ord`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_user_bookmarks_folders`;
@@ -2500,7 +2500,7 @@
   `parentId` int(12) default NULL,
   `user` varchar(200) NOT NULL default '',
   `name` varchar(30) default NULL,
-  PRIMARY KEY (user,folderId)
+  PRIMARY KEY (`user`,`folderId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_user_bookmarks_urls`;
@@ -2512,7 +2512,7 @@
   `lastUpdated` int(14) default NULL,
   `folderId` int(12) NOT NULL default '0',
   `user` varchar(200) NOT NULL default '',
-  PRIMARY KEY (urlId)
+  PRIMARY KEY (`urlId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_user_mail_accounts`;
@@ -2535,7 +2535,7 @@
   `mbox` varchar( 255 ) default NULL,
   `maildir` varchar( 255 ) default NULL,
   `useSSL` char( 1 ) NOT NULL default 'n',
-  PRIMARY KEY (accountId)
+  PRIMARY KEY (`accountId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_user_menus`;
@@ -2546,7 +2546,7 @@
   `name` varchar(40) default NULL,
   `position` int(4) default NULL,
   `mode` char(1) default NULL,
-  PRIMARY KEY (menuId)
+  PRIMARY KEY (`menuId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_user_modules`;
@@ -2555,7 +2555,7 @@
   `title` varchar(40) default NULL,
   `data` longblob,
   `parse` char(1) default NULL,
-  PRIMARY KEY (name)
+  PRIMARY KEY (`name`)
 ) ENGINE=MyISAM;
 
 INSERT INTO tiki_user_modules (name, title, data, parse) VALUES ('mnu_application_menu', 'Menu', '{menu id=42}', 'n');
@@ -2570,7 +2570,7 @@
   `data` text,
   `size` int(14) default NULL,
   `parse_mode` varchar(20) default NULL,
-  PRIMARY KEY (noteId)
+  PRIMARY KEY (`noteId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_user_postings`;
@@ -2580,7 +2580,7 @@
   `last` int(14) default NULL,
   `first` int(14) default NULL,
   `level` int(8) default NULL,
-  PRIMARY KEY (user)
+  PRIMARY KEY (`user`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_user_preferences`;
@@ -2588,7 +2588,7 @@
   `user` varchar(200) NOT NULL default '',
   `prefName` varchar(40) NOT NULL default '',
   `value` varchar(250) default NULL,
-  PRIMARY KEY (user,prefName)
+  PRIMARY KEY (`user`,`prefName`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_user_quizzes`;
@@ -2601,7 +2601,7 @@
   `maxPoints` int(12) default NULL,
   `resultId` int(10) default NULL,
   `userResultId` int(10) NOT NULL auto_increment,
-  PRIMARY KEY (userResultId)
+  PRIMARY KEY (`userResultId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_user_taken_quizzes`;
@@ -2608,7 +2608,7 @@
 CREATE TABLE `tiki_user_taken_quizzes` (
   `user` varchar(200) NOT NULL default '',
   `quizId` varchar(255) NOT NULL default '',
-  PRIMARY KEY (user,quizId(50))
+  PRIMARY KEY (`user`,`quizId`(50))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_user_tasks_history`;
@@ -2628,7 +2628,7 @@
   `percentage` int(4) DEFAULT NULL,
   `accepted_creator` char(1) DEFAULT NULL,             -- y - yes, n - no, null - waiting
   `accepted_user` char(1) DEFAULT NULL,                -- y - yes, n - no, null - waiting
-  PRIMARY KEY (belongs_to, task_version)
+  PRIMARY KEY (`belongs_to`, `task_version`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_user_tasks`;
@@ -2644,7 +2644,7 @@
   `priority` int(2) default NULL,
   `completed` int(14) default NULL,
   `percentage` int(4) default NULL,
-  PRIMARY KEY (taskId),
+  PRIMARY KEY (`taskId`),
   UNIQUE(creator, created)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
@@ -2687,7 +2687,7 @@
   `isFile` char(1) default NULL,
   `path` varchar(255) default NULL,
   `created` int(14) default NULL,
-  PRIMARY KEY (fileId)
+  PRIMARY KEY (`fileId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_userpoints`;
@@ -2703,7 +2703,7 @@
   `password` varchar(40) default NULL,
   `email` varchar(200) default NULL,
   `lastLogin` int(14) default NULL,
-  PRIMARY KEY (user)
+  PRIMARY KEY (`user`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_webmail_contacts`;
@@ -2714,7 +2714,7 @@
   `email` varchar(250) default NULL,
   `nickname` varchar(200) default NULL,
   `user` varchar(200) NOT NULL default '',
-  PRIMARY KEY (contactId)
+  PRIMARY KEY (`contactId`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS `tiki_webmail_contacts_groups`;
@@ -2721,7 +2721,7 @@
 CREATE TABLE `tiki_webmail_contacts_groups` (
   `contactId` int(12) NOT NULL,
   `groupName` varchar(255) NOT NULL,
-  PRIMARY KEY (contactId,groupName(200))
+  PRIMARY KEY (`contactId`,`groupName`(200))
 ) ENGINE=MyISAM ;
 
 DROP TABLE IF EXISTS `tiki_webmail_messages`;
@@ -2733,7 +2733,7 @@
   `isReplied` char(1) default NULL,
   `isFlagged` char(1) default NULL,
   `flaggedMsg` varchar(50) default '',
-  PRIMARY KEY (accountId,mailId)
+  PRIMARY KEY (`accountId`,`mailId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_wiki_attachments`;
@@ -2749,7 +2749,7 @@
   `hits` int(10) default NULL,
   `created` int(14) default NULL,
   `comment` varchar(250) default NULL,
-  PRIMARY KEY (attId),
+  PRIMARY KEY (`attId`),
   KEY page (page)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -2756,7 +2756,7 @@
 DROP TABLE IF EXISTS `tiki_zones`;
 CREATE TABLE `tiki_zones` (
   `zone` varchar(40) NOT NULL default '',
-  PRIMARY KEY (zone)
+  PRIMARY KEY (`zone`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_download`;
@@ -2767,7 +2767,7 @@
   `type` varchar(20) NOT NULL default '',
   `date` int(14) NOT NULL default '0',
   `IP` varchar(50) NOT NULL default '',
-  PRIMARY KEY (id),
+  PRIMARY KEY (`id`),
   KEY object (object,userId,type),
   KEY userId (userId),
   KEY type (type),
@@ -2779,7 +2779,7 @@
   `groupName` varchar(255) NOT NULL default '',
   `permName` varchar(40) NOT NULL default '',
   `value` char(1) default '',
-  PRIMARY KEY (groupName(30),permName)
+  PRIMARY KEY (`groupName`(30),`permName`)
 ) ENGINE=MyISAM;
 
 
@@ -2801,7 +2801,7 @@
   `groupDefCat` int(12) default 0,
   `groupTheme` varchar(255) default '',
   `isExternal` char(1) default 'n',
-  PRIMARY KEY (id),
+  PRIMARY KEY (`id`),
   UNIQUE KEY groupName (groupName)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
@@ -2811,7 +2811,7 @@
   `permName` varchar(40) NOT NULL default '',
   `objectType` varchar(20) NOT NULL default '',
   `objectId` varchar(32) NOT NULL default '',
-  PRIMARY KEY (objectId, objectType, groupName(30),permName)
+  PRIMARY KEY (`objectId`, `objectType`, `groupName`(30),`permName`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `users_permissions`;
@@ -2822,7 +2822,7 @@
   `type` varchar(20) default NULL,
   `admin` varchar(1) default NULL,
   `feature_check` VARCHAR(50) NULL,
-  PRIMARY KEY (permName),
+  PRIMARY KEY (`permName`),
   KEY type (type)
 ) ENGINE=MyISAM;
 
@@ -3146,7 +3146,7 @@
 CREATE TABLE `users_usergroups` (
   `userId` int(8) NOT NULL default '0',
   `groupName` varchar(255) NOT NULL default '',
-  PRIMARY KEY (userId,groupName(30))
+  PRIMARY KEY (`userId`,`groupName`(30))
 ) ENGINE=MyISAM;
 
 INSERT INTO users_groups (groupName,groupDesc) VALUES ('Anonymous','Public users not logged');
@@ -3180,7 +3180,7 @@
   `unsuccessful_logins` int(14) default 0,
   `openid_url` varchar(255) default NULL,
   `waiting` char(1) default NULL,
-  PRIMARY KEY (userId),
+  PRIMARY KEY (`userId`),
   KEY score (score),
   KEY login (login),
   KEY registrationDate (registrationDate),
@@ -3205,7 +3205,7 @@
   `cacheable` char(1) NOT NULL default 'y',
   `expiration` int(11) NOT NULL default '0',
   `description` text NOT NULL,
-  PRIMARY KEY (repID)
+  PRIMARY KEY (`repID`)
 ) ENGINE=MyISAM;
 
 INSERT INTO tiki_integrator_reps VALUES ('1','Doxygened (1.3.4) Documentation','','index.html','doxygen.css','n','y','0','Use this repository as rule source for all your repositories based on doxygened docs. To setup yours just add new repository and copy rules from this repository :)');
@@ -3222,7 +3222,7 @@
   `rxmod` varchar(20) NOT NULL default '',
   `enabled` char(1) NOT NULL default 'n',
   `description` text NOT NULL,
-  PRIMARY KEY (ruleID),
+  PRIMARY KEY (`ruleID`),
   KEY repID (repID)
 ) ENGINE=MyISAM;
 
@@ -3237,7 +3237,7 @@
   `taginsert` text,
   `tagicon` varchar(255) default NULL,
   `tagcategory` varchar(255) default NULL,
-  PRIMARY KEY (tagId),
+  PRIMARY KEY (`tagId`),
   KEY tagcategory (tagcategory),
   KEY taglabel (taglabel)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -3427,7 +3427,7 @@
   `type` varchar(50) NOT NULL,
   `objId` varchar(255) NOT NULL,
   `lang` varchar(16) default NULL,
-  PRIMARY KEY (type, objId),
+  PRIMARY KEY (`type`, `objId`),
   KEY traId ( traId )
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
@@ -3443,7 +3443,7 @@
   `userFrom` varchar(200) NOT NULL default '',
   `userTo` varchar(200) NOT NULL default '',
   `tstamp` timestamp(14) NOT NULL,
-  PRIMARY KEY (userFrom(120),userTo(120))
+  PRIMARY KEY (`userFrom`(120),`userTo`(120))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_score`;
@@ -3451,7 +3451,7 @@
   event varchar(40) NOT NULL default '',
   score int(11) NOT NULL default '0',
   expiration int(11) NOT NULL default '0',
-  PRIMARY KEY (event)
+  PRIMARY KEY (`event`)
 ) ENGINE=MyISAM;
 
 INSERT INTO tiki_score (event, score, expiration) VALUES ('login',1,0);
@@ -3491,7 +3491,7 @@
   `event_id` char(200) NOT NULL default '',
   `expire` int(14) NOT NULL default '0',
   `tstamp` timestamp(14) NOT NULL,
-  PRIMARY KEY (user(110),event_id(110)),
+  PRIMARY KEY (`user`(110),`event_id`(110)),
   KEY user (user(110),event_id(110),expire)
 ) ENGINE=MyISAM;
 
@@ -3507,7 +3507,7 @@
   `type` varchar(20) NOT NULL default '',
   `day` int(14) NOT NULL default '0',
   `hits` int(14) NOT NULL default '0',
-  PRIMARY KEY (object(200),type,day)
+  PRIMARY KEY (`object`(200),`type`,`day`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_events`;
@@ -3518,7 +3518,7 @@
   `file` varchar(200) NOT NULL default '',
   `object` varchar(200) NOT NULL default '',
   `method` varchar(200) NOT NULL default '',
-  PRIMARY KEY (callback_type,`order`)
+  PRIMARY KEY (`callback_type`,`order`)
 ) ENGINE=MyISAM;
 
 INSERT IGNORE INTO tiki_events(callback_type,`order`,event,file,object,method) VALUES ('1', '20', 'user_registers', 'lib/registration/registrationlib.php', 'registrationlib', 'callback_tikiwiki_setup_custom_fields');
@@ -3535,7 +3535,7 @@
   `type` varchar(255) NOT NULL default 'text',
   `show` tinyint(1) NOT NULL default '1',
   `size` varchar(10) default '10',
-  PRIMARY KEY (id)
+  PRIMARY KEY (`id`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_actionlog_conf`;
@@ -3544,7 +3544,7 @@
   `action` varchar(32) NOT NULL default '',
   `objectType` varchar(32) NOT NULL default '',
   `status` char(1) default '',
-  PRIMARY KEY (action, objectType),
+  PRIMARY KEY (`action`, `objectType`),
   KEY (id)
 ) ENGINE=MyISAM;
 
@@ -3592,7 +3592,7 @@
   `tag` varchar(30) NOT NULL default '',
   `raw_tag` varchar(50) NOT NULL default '',
   `lang` varchar(16) NULL,
-  PRIMARY KEY (tagId)
+  PRIMARY KEY (`tagId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_freetagged_objects`;
@@ -3601,7 +3601,7 @@
   `objectId` int(11) NOT NULL default 0,
   `user` varchar(200) default '',
   `created` int(14) NOT NULL default '0',
-  PRIMARY KEY (tagId,user,objectId),
+  PRIMARY KEY (`tagId`,`user`,`objectId`),
   KEY (tagId),
   KEY (user),
   KEY (objectId)
@@ -3612,7 +3612,7 @@
   `contributionId` int(12) NOT NULL auto_increment,
   `name` varchar(100) default NULL,
   `description` varchar(250) default NULL,
-  PRIMARY KEY (contributionId)
+  PRIMARY KEY (`contributionId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_contributions_assigned`;
@@ -3619,7 +3619,7 @@
 CREATE TABLE `tiki_contributions_assigned` (
   `contributionId` int(12) NOT NULL,
   `objectId` int(12) NOT NULL,
-  PRIMARY KEY (objectId, contributionId)
+  PRIMARY KEY (`objectId`, `contributionId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_webmail_contacts_ext`;
@@ -3753,7 +3753,7 @@
   `objectType` varchar( 20 ) NOT NULL default '',
   `objectId` varchar(10) NOT NULL default '',
   `displayEachuser` char( 1 ) default NULL ,
-  PRIMARY KEY ( objectType,objectId )
+  PRIMARY KEY ( `objectType`, `objectId` )
 ) ENGINE=MyISAM ;
 
 DROP TABLE IF EXISTS `tiki_sent_newsletters_files`;

------------------------------------------------------------------------
r20443 | kissaki | 2009-07-31 17:00:18 -0400 (sex, 31 jul 2009) | 1 line

[FIX] rev 20434 did specify a primary key twice in a table

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20442)
+++ tiki.sql	(revision 20443)
@@ -1530,7 +1530,7 @@
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (105,42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_subscribe_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (106,42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_send_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (107,42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_admin_newsletters','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (107,42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_list_newsletters','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (110,42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_list_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (108,42,'o','Send Newsletters','tiki-send_newsletters.php',905,'feature_newsletters','tiki_p_send_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (109,42,'o','Admin Newsletters','tiki-admin_newsletters.php',910,'feature_newsletters','tiki_p_admin_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (112,42,'s','Charts','tiki-charts.php',1000,'feature_charts','tiki_p_view_chart','',0);

------------------------------------------------------------------------
r20442 | kissaki | 2009-07-31 16:40:09 -0400 (sex, 31 jul 2009) | 1 line

add `s to CREATE TABLE and DROP TABLE statements

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20441)
+++ tiki.sql	(revision 20442)
@@ -36,8 +36,8 @@
   PRIMARY KEY (instanceId,activityId)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS galaxia_instance_comments;
-CREATE TABLE galaxia_instance_comments (
+DROP TABLE IF EXISTS `galaxia_instance_comments`;
+CREATE TABLE `galaxia_instance_comments` (
   `cId` int(14) NOT NULL auto_increment,
   `instanceId` int(14) NOT NULL default '0',
   `user` varchar(200) default '',
@@ -78,8 +78,8 @@
   PRIMARY KEY (pId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS galaxia_roles;
-CREATE TABLE galaxia_roles (
+DROP TABLE IF EXISTS `galaxia_roles`;
+CREATE TABLE `galaxia_roles` (
   `roleId` int(14) NOT NULL auto_increment,
   `pId` int(14) NOT NULL default '0',
   `lastModif` int(14) default NULL,
@@ -88,8 +88,8 @@
   PRIMARY KEY (roleId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS galaxia_transitions;
-CREATE TABLE galaxia_transitions (
+DROP TABLE IF EXISTS `galaxia_transitions`;
+CREATE TABLE `galaxia_transitions` (
   `pId` int(14) NOT NULL default '0',
   `actFromId` int(14) NOT NULL default '0',
   `actToId` int(14) NOT NULL default '0',
@@ -96,8 +96,8 @@
   PRIMARY KEY (actFromId,actToId)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS galaxia_user_roles;
-CREATE TABLE galaxia_user_roles (
+DROP TABLE IF EXISTS `galaxia_user_roles`;
+CREATE TABLE `galaxia_user_roles` (
   `pId` int(14) NOT NULL default '0',
   `roleId` int(14) NOT NULL auto_increment,
   `user` varchar(200) NOT NULL default '',
@@ -104,8 +104,8 @@
   PRIMARY KEY (`roleId`, `user`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS galaxia_workitems;
-CREATE TABLE galaxia_workitems (
+DROP TABLE IF EXISTS `galaxia_workitems`;
+CREATE TABLE `galaxia_workitems` (
   `itemId` int(14) NOT NULL auto_increment,
   `instanceId` int(14) NOT NULL default '0',
   `orderId` int(14) NOT NULL default '0',
@@ -117,8 +117,8 @@
   PRIMARY KEY (itemId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS messu_messages;
-CREATE TABLE messu_messages (
+DROP TABLE IF EXISTS `messu_messages`;
+CREATE TABLE `messu_messages` (
   `msgId` int(14) NOT NULL auto_increment,
   `user` varchar(200) NOT NULL default '',
   `user_from` varchar(200) NOT NULL default '',
@@ -138,8 +138,8 @@
   KEY userIsRead (user, isRead)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS messu_archive;
-CREATE TABLE messu_archive (
+DROP TABLE IF EXISTS `messu_archive`;
+CREATE TABLE `messu_archive` (
   `msgId` int(14) NOT NULL auto_increment,
   `user` varchar(40) NOT NULL default '',
   `user_from` varchar(40) NOT NULL default '',
@@ -158,8 +158,8 @@
   PRIMARY KEY (msgId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS messu_sent;
-CREATE TABLE messu_sent (
+DROP TABLE IF EXISTS `messu_sent`;
+CREATE TABLE `messu_sent` (
   `msgId` int(14) NOT NULL auto_increment,
   `user` varchar(40) NOT NULL default '',
   `user_from` varchar(40) NOT NULL default '',
@@ -178,7 +178,7 @@
   PRIMARY KEY (msgId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS sessions;
+DROP TABLE IF EXISTS `sessions`;
 CREATE TABLE sessions(
   `sesskey` char(32) NOT NULL,
   `expiry` int(11) unsigned NOT NULL,
@@ -188,8 +188,8 @@
   KEY expiry (expiry)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_actionlog;
-CREATE TABLE tiki_actionlog (
+DROP TABLE IF EXISTS `tiki_actionlog`;
+CREATE TABLE `tiki_actionlog` (
   `actionId` int(8) NOT NULL auto_increment,
   `action` varchar(255) NOT NULL default '',
   `lastModif` int(14) default NULL,
@@ -204,8 +204,8 @@
   KEY object(object(100), objectType, action(100))
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_actionlog_params;
-CREATE TABLE tiki_actionlog_params (
+DROP TABLE IF EXISTS `tiki_actionlog_params`;
+CREATE TABLE `tiki_actionlog_params` (
   `actionId` int(8) NOT NULL,
   `name` varchar(40) NOT NULL,
   `value` text,
@@ -213,8 +213,8 @@
   KEY nameValue (name, value(200))
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_articles;
-CREATE TABLE tiki_articles (
+DROP TABLE IF EXISTS `tiki_articles`;
+CREATE TABLE `tiki_articles` (
   `articleId` int(8) NOT NULL auto_increment,
   `topline` varchar(255) default NULL,
   `title` varchar(255) default NULL,
@@ -260,8 +260,8 @@
   FULLTEXT KEY ft (title,heading,body)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_article_types;
-CREATE TABLE tiki_article_types (
+DROP TABLE IF EXISTS `tiki_article_types`;
+CREATE TABLE `tiki_article_types` (
   `type` varchar(50) NOT NULL,
   `use_ratings` varchar(1) default NULL,
   `show_pre_publ` varchar(1) default NULL,
@@ -292,8 +292,8 @@
 INSERT IGNORE INTO tiki_article_types(type,show_post_expire) VALUES ('Event','n');
 INSERT IGNORE INTO tiki_article_types(type,show_post_expire,heading_only,allow_comments) VALUES ('Classified','n','y','n');
 
-DROP TABLE IF EXISTS tiki_banners;
-CREATE TABLE tiki_banners (
+DROP TABLE IF EXISTS `tiki_banners`;
+CREATE TABLE `tiki_banners` (
   `bannerId` int(12) NOT NULL auto_increment,
   `client` varchar(200) NOT NULL default '',
   `url` varchar(255) default NULL,
@@ -329,8 +329,8 @@
   INDEX ban1(zone,useDates,impressions,maxImpressions,hourFrom,hourTo,fromDate,toDate,mon,tue,wed,thu,fri,sat,sun)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_banning;
-CREATE TABLE tiki_banning (
+DROP TABLE IF EXISTS `tiki_banning`;
+CREATE TABLE `tiki_banning` (
   `banId` int(12) NOT NULL auto_increment,
   `mode` enum('user','ip') default NULL,
   `title` varchar(200) default NULL,
@@ -347,15 +347,15 @@
   PRIMARY KEY (banId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_banning_sections;
-CREATE TABLE tiki_banning_sections (
+DROP TABLE IF EXISTS `tiki_banning_sections`;
+CREATE TABLE `tiki_banning_sections` (
   `banId` int(12) NOT NULL default '0',
   `section` varchar(100) NOT NULL default '',
   PRIMARY KEY (banId,section)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_blog_activity;
-CREATE TABLE tiki_blog_activity (
+DROP TABLE IF EXISTS `tiki_blog_activity`;
+CREATE TABLE `tiki_blog_activity` (
   `blogId` int(8) NOT NULL default '0',
   `day` int(14) NOT NULL default '0',
   `posts` int(8) default NULL,
@@ -362,8 +362,8 @@
   PRIMARY KEY (blogId,day)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_blog_posts;
-CREATE TABLE tiki_blog_posts (
+DROP TABLE IF EXISTS `tiki_blog_posts`;
+CREATE TABLE `tiki_blog_posts` (
   `postId` int(8) NOT NULL auto_increment,
   `blogId` int(8) NOT NULL default '0',
   `data` text,
@@ -381,8 +381,8 @@
   FULLTEXT KEY ft (data,title)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_blog_posts_images;
-CREATE TABLE tiki_blog_posts_images (
+DROP TABLE IF EXISTS `tiki_blog_posts_images`;
+CREATE TABLE `tiki_blog_posts_images` (
   `imgId` int(14) NOT NULL auto_increment,
   `postId` int(14) NOT NULL default '0',
   `filename` varchar(80) default NULL,
@@ -392,8 +392,8 @@
   PRIMARY KEY (imgId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_blogs;
-CREATE TABLE tiki_blogs (
+DROP TABLE IF EXISTS `tiki_blogs`;
+CREATE TABLE `tiki_blogs` (
   `blogId` int(8) NOT NULL auto_increment,
   `created` int(14) default NULL,
   `lastModif` int(14) default NULL,
@@ -419,8 +419,8 @@
   FULLTEXT KEY ft (title,description)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_calendar_categories;
-CREATE TABLE tiki_calendar_categories (
+DROP TABLE IF EXISTS `tiki_calendar_categories`;
+CREATE TABLE `tiki_calendar_categories` (
   `calcatId` int(11) NOT NULL auto_increment,
   `calendarId` int(14) NOT NULL default '0',
   `name` varchar(255) NOT NULL default '',
@@ -428,8 +428,8 @@
   UNIQUE KEY catname (calendarId,name(16))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_calendar_recurrence;
-CREATE TABLE tiki_calendar_recurrence (
+DROP TABLE IF EXISTS `tiki_calendar_recurrence`;
+CREATE TABLE `tiki_calendar_recurrence` (
   `recurrenceId` int(14) NOT NULL auto_increment,
   `calendarId` int(14) NOT NULL default '0',
   `start` int(4) NOT NULL default '0',
@@ -489,8 +489,8 @@
 	ON UPDATE CASCADE ON DELETE SET NULL
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_calendar_locations;
-CREATE TABLE tiki_calendar_locations (
+DROP TABLE IF EXISTS `tiki_calendar_locations`;
+CREATE TABLE `tiki_calendar_locations` (
   `callocId` int(14) NOT NULL auto_increment,
   `calendarId` int(14) NOT NULL default '0',
   `name` varchar(255) NOT NULL default '',
@@ -499,8 +499,8 @@
   UNIQUE KEY locname (calendarId,name(16))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_calendar_roles;
-CREATE TABLE tiki_calendar_roles (
+DROP TABLE IF EXISTS `tiki_calendar_roles`;
+CREATE TABLE `tiki_calendar_roles` (
   `calitemId` int(14) NOT NULL default '0',
   `username` varchar(200) NOT NULL default '',
   `role` enum('0','1','2','3','6') NOT NULL default '0',
@@ -507,8 +507,8 @@
   PRIMARY KEY (calitemId,username(16),role)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_calendars;
-CREATE TABLE tiki_calendars (
+DROP TABLE IF EXISTS `tiki_calendars`;
+CREATE TABLE `tiki_calendars` (
   `calendarId` int(14) NOT NULL auto_increment,
   `name` varchar(80) NOT NULL default '',
   `description` varchar(255) default NULL,
@@ -526,8 +526,8 @@
   PRIMARY KEY (calendarId)
 ) ENGINE=MyISAM ;
 
-DROP TABLE IF EXISTS tiki_calendar_options;
-CREATE TABLE tiki_calendar_options (
+DROP TABLE IF EXISTS `tiki_calendar_options`;
+CREATE TABLE `tiki_calendar_options` (
 	calendarId int(14) NOT NULL default 0,
 	optionName varchar(120) NOT NULL default '',
 	value varchar(255),
@@ -534,8 +534,8 @@
 	PRIMARY KEY (calendarId,optionName)
 ) ENGINE=MyISAM ;
 
-DROP TABLE IF EXISTS tiki_categories;
-CREATE TABLE tiki_categories (
+DROP TABLE IF EXISTS `tiki_categories`;
+CREATE TABLE `tiki_categories` (
   `categId` int(12) NOT NULL auto_increment,
   `name` varchar(100) default NULL,
   `description` varchar(250) default NULL,
@@ -544,8 +544,8 @@
   PRIMARY KEY (categId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_objects;
-CREATE TABLE tiki_objects (
+DROP TABLE IF EXISTS `tiki_objects`;
+CREATE TABLE `tiki_objects` (
   `objectId` int(12) NOT NULL auto_increment,
   `type` varchar(50) default NULL,
   `itemId` varchar(255) default NULL,
@@ -566,29 +566,29 @@
   PRIMARY KEY (`catObjectId`)
 ) ENGINE=MyISAM ;
 
-DROP TABLE IF EXISTS tiki_category_objects;
-CREATE TABLE tiki_category_objects (
+DROP TABLE IF EXISTS `tiki_category_objects`;
+CREATE TABLE `tiki_category_objects` (
   `catObjectId` int(12) NOT NULL default '0',
   `categId` int(12) NOT NULL default '0',
   PRIMARY KEY (catObjectId,categId)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_object_ratings;
-CREATE TABLE tiki_object_ratings (
+DROP TABLE IF EXISTS `tiki_object_ratings`;
+CREATE TABLE `tiki_object_ratings` (
   `catObjectId` int(12) NOT NULL default '0',
   `pollId` int(12) NOT NULL default '0',
   PRIMARY KEY (catObjectId,pollId)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_category_sites;
-CREATE TABLE tiki_category_sites (
+DROP TABLE IF EXISTS `tiki_category_sites`;
+CREATE TABLE `tiki_category_sites` (
   `categId` int(10) NOT NULL default '0',
   `siteId` int(14) NOT NULL default '0',
   PRIMARY KEY (categId,siteId)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_chart_items;
-CREATE TABLE tiki_chart_items (
+DROP TABLE IF EXISTS `tiki_chart_items`;
+CREATE TABLE `tiki_chart_items` (
   `itemId` int(14) NOT NULL auto_increment,
   `title` varchar(250) default NULL,
   `description` text,
@@ -601,8 +601,8 @@
   PRIMARY KEY (itemId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_charts;
-CREATE TABLE tiki_charts (
+DROP TABLE IF EXISTS `tiki_charts`;
+CREATE TABLE `tiki_charts` (
   `chartId` int(14) NOT NULL auto_increment,
   `title` varchar(250) default NULL,
   `description` text,
@@ -624,8 +624,8 @@
   PRIMARY KEY (chartId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_charts_rankings;
-CREATE TABLE tiki_charts_rankings (
+DROP TABLE IF EXISTS `tiki_charts_rankings`;
+CREATE TABLE `tiki_charts_rankings` (
   `chartId` int(14) NOT NULL default '0',
   `itemId` int(14) NOT NULL default '0',
   `position` int(14) NOT NULL default '0',
@@ -637,8 +637,8 @@
   PRIMARY KEY (chartId,itemId,period)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_charts_votes;
-CREATE TABLE tiki_charts_votes (
+DROP TABLE IF EXISTS `tiki_charts_votes`;
+CREATE TABLE `tiki_charts_votes` (
   `user` varchar(200) NOT NULL default '',
   `itemId` int(14) NOT NULL default '0',
   `timestamp` int(14) default NULL,
@@ -646,8 +646,8 @@
   PRIMARY KEY (user,itemId)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_chat_channels;
-CREATE TABLE tiki_chat_channels (
+DROP TABLE IF EXISTS `tiki_chat_channels`;
+CREATE TABLE `tiki_chat_channels` (
   `channelId` int(8) NOT NULL auto_increment,
   `name` varchar(30) default NULL,
   `description` varchar(250) default NULL,
@@ -659,8 +659,8 @@
   PRIMARY KEY (channelId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_chat_messages;
-CREATE TABLE tiki_chat_messages (
+DROP TABLE IF EXISTS `tiki_chat_messages`;
+CREATE TABLE `tiki_chat_messages` (
   `messageId` int(8) NOT NULL auto_increment,
   `channelId` int(8) NOT NULL default '0',
   `data` varchar(255) default NULL,
@@ -669,8 +669,8 @@
   PRIMARY KEY (messageId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_chat_users;
-CREATE TABLE tiki_chat_users (
+DROP TABLE IF EXISTS `tiki_chat_users`;
+CREATE TABLE `tiki_chat_users` (
   `nickname` varchar(200) NOT NULL default '',
   `channelId` int(8) NOT NULL default '0',
   `timestamp` int(14) default NULL,
@@ -677,8 +677,8 @@
   PRIMARY KEY (nickname,channelId)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_comments;
-CREATE TABLE tiki_comments (
+DROP TABLE IF EXISTS `tiki_comments`;
+CREATE TABLE `tiki_comments` (
   `threadId` int(14) NOT NULL auto_increment,
   `object` varchar(255) NOT NULL default '',
   `objectType` varchar(32) NOT NULL default '',
@@ -714,8 +714,8 @@
   FULLTEXT KEY ft (title,data)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_content;
-CREATE TABLE tiki_content (
+DROP TABLE IF EXISTS `tiki_content`;
+CREATE TABLE `tiki_content` (
   `contentId` int(8) NOT NULL auto_increment,
   `description` text,
   `contentLabel` varchar(255) NOT NULL default '',
@@ -722,8 +722,8 @@
   PRIMARY KEY (contentId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_content_templates;
-CREATE TABLE tiki_content_templates (
+DROP TABLE IF EXISTS `tiki_content_templates`;
+CREATE TABLE `tiki_content_templates` (
   `templateId` int(10) NOT NULL auto_increment,
   `content` longblob,
   `name` varchar(200) default NULL,
@@ -731,22 +731,22 @@
   PRIMARY KEY (templateId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_content_templates_sections;
-CREATE TABLE tiki_content_templates_sections (
+DROP TABLE IF EXISTS `tiki_content_templates_sections`;
+CREATE TABLE `tiki_content_templates_sections` (
   `templateId` int(10) NOT NULL default '0',
   `section` varchar(250) NOT NULL default '',
   PRIMARY KEY (templateId,section)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_cookies;
-CREATE TABLE tiki_cookies (
+DROP TABLE IF EXISTS `tiki_cookies`;
+CREATE TABLE `tiki_cookies` (
   `cookieId` int(10) NOT NULL auto_increment,
   `cookie` text,
   PRIMARY KEY (cookieId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_copyrights;
-CREATE TABLE tiki_copyrights (
+DROP TABLE IF EXISTS `tiki_copyrights`;
+CREATE TABLE `tiki_copyrights` (
   `copyrightId` int(12) NOT NULL auto_increment,
   `page` varchar(200) default NULL,
   `title` varchar(200) default NULL,
@@ -757,8 +757,8 @@
   PRIMARY KEY (copyrightId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_directory_categories;
-CREATE TABLE tiki_directory_categories (
+DROP TABLE IF EXISTS `tiki_directory_categories`;
+CREATE TABLE `tiki_directory_categories` (
   `categId` int(10) NOT NULL auto_increment,
   `parent` int(10) default NULL,
   `name` varchar(240) default NULL,
@@ -773,15 +773,15 @@
   PRIMARY KEY (categId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_directory_search;
-CREATE TABLE tiki_directory_search (
+DROP TABLE IF EXISTS `tiki_directory_search`;
+CREATE TABLE `tiki_directory_search` (
   `term` varchar(250) NOT NULL default '',
   `hits` int(14) default NULL,
   PRIMARY KEY (term)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_directory_sites;
-CREATE TABLE tiki_directory_sites (
+DROP TABLE IF EXISTS `tiki_directory_sites`;
+CREATE TABLE `tiki_directory_sites` (
   `siteId` int(14) NOT NULL auto_increment,
   `name` varchar(240) default NULL,
   `description` text,
@@ -799,8 +799,8 @@
   FULLTEXT KEY ft (name,description)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_drawings;
-CREATE TABLE tiki_drawings (
+DROP TABLE IF EXISTS `tiki_drawings`;
+CREATE TABLE `tiki_drawings` (
   `drawId` int(12) NOT NULL auto_increment,
   `version` int(8) default NULL,
   `name` varchar(250) default NULL,
@@ -811,8 +811,8 @@
   PRIMARY KEY (drawId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_dsn;
-CREATE TABLE tiki_dsn (
+DROP TABLE IF EXISTS `tiki_dsn`;
+CREATE TABLE `tiki_dsn` (
   `dsnId` int(12) NOT NULL auto_increment,
   `name` varchar(200) NOT NULL default '',
   `dsn` varchar(255) default NULL,
@@ -819,15 +819,15 @@
   PRIMARY KEY (dsnId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_dynamic_variables;
-CREATE TABLE tiki_dynamic_variables (
+DROP TABLE IF EXISTS `tiki_dynamic_variables`;
+CREATE TABLE `tiki_dynamic_variables` (
   `name` varchar(40) NOT NULL,
   `data` text,
   PRIMARY KEY (name)
 );
 
-DROP TABLE IF EXISTS tiki_extwiki;
-CREATE TABLE tiki_extwiki (
+DROP TABLE IF EXISTS `tiki_extwiki`;
+CREATE TABLE `tiki_extwiki` (
   `extwikiId` int(12) NOT NULL auto_increment,
   `name` varchar(200) NOT NULL default '',
   `extwiki` varchar(255) default NULL,
@@ -834,8 +834,8 @@
   PRIMARY KEY (extwikiId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_faq_questions;
-CREATE TABLE tiki_faq_questions (
+DROP TABLE IF EXISTS `tiki_faq_questions`;
+CREATE TABLE `tiki_faq_questions` (
   `questionId` int(10) NOT NULL auto_increment,
   `faqId` int(10) default NULL,
   `position` int(4) default NULL,
@@ -848,8 +848,8 @@
   FULLTEXT KEY ft (question,answer)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_faqs;
-CREATE TABLE tiki_faqs (
+DROP TABLE IF EXISTS `tiki_faqs`;
+CREATE TABLE `tiki_faqs` (
   `faqId` int(10) NOT NULL auto_increment,
   `title` varchar(200) default NULL,
   `description` text,
@@ -864,8 +864,8 @@
   FULLTEXT KEY ft (title,description)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_featured_links;
-CREATE TABLE tiki_featured_links (
+DROP TABLE IF EXISTS `tiki_featured_links`;
+CREATE TABLE `tiki_featured_links` (
   `url` varchar(200) NOT NULL default '',
   `title` varchar(200) default NULL,
   `description` text,
@@ -875,8 +875,8 @@
   PRIMARY KEY (url)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_file_galleries;
-CREATE TABLE tiki_file_galleries (
+DROP TABLE IF EXISTS `tiki_file_galleries`;
+CREATE TABLE `tiki_file_galleries` (
   `galleryId` int(14) NOT NULL auto_increment,
   `name` varchar(80) NOT NULL default '',
   `type` varchar(20) NOT NULL default 'default',
@@ -917,8 +917,8 @@
   PRIMARY KEY (galleryId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_files;
-CREATE TABLE tiki_files (
+DROP TABLE IF EXISTS `tiki_files`;
+CREATE TABLE `tiki_files` (
   `fileId` int(14) NOT NULL auto_increment,
   `galleryId` int(14) NOT NULL default '0',
   `name` varchar(200) NOT NULL default '',
@@ -953,8 +953,8 @@
   FULLTEXT KEY ft (name,description,search_data,filename)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_forum_attachments;
-CREATE TABLE tiki_forum_attachments (
+DROP TABLE IF EXISTS `tiki_forum_attachments`;
+CREATE TABLE `tiki_forum_attachments` (
   `attId` int(14) NOT NULL auto_increment,
   `threadId` int(14) NOT NULL default '0',
   `qId` int(14) NOT NULL default '0',
@@ -970,8 +970,8 @@
   KEY threadId (threadId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_forum_reads;
-CREATE TABLE tiki_forum_reads (
+DROP TABLE IF EXISTS `tiki_forum_reads`;
+CREATE TABLE `tiki_forum_reads` (
   `user` varchar(200) NOT NULL default '',
   `threadId` int(14) NOT NULL default '0',
   `forumId` int(14) default NULL,
@@ -979,8 +979,8 @@
   PRIMARY KEY (user,threadId)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_forums;
-CREATE TABLE tiki_forums (
+DROP TABLE IF EXISTS `tiki_forums`;
+CREATE TABLE `tiki_forums` (
   `forumId` int(8) NOT NULL auto_increment,
   `name` varchar(255) default NULL,
   `description` text,
@@ -1041,8 +1041,8 @@
   PRIMARY KEY (forumId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_forums_queue;
-CREATE TABLE tiki_forums_queue (
+DROP TABLE IF EXISTS `tiki_forums_queue`;
+CREATE TABLE `tiki_forums_queue` (
   `qId` int(14) NOT NULL auto_increment,
   `object` varchar(32) default NULL,
   `parentId` int(14) default NULL,
@@ -1062,8 +1062,8 @@
   PRIMARY KEY (qId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_forums_reported;
-CREATE TABLE tiki_forums_reported (
+DROP TABLE IF EXISTS `tiki_forums_reported`;
+CREATE TABLE `tiki_forums_reported` (
   `threadId` int(12) NOT NULL default '0',
   `forumId` int(12) NOT NULL default '0',
   `parentId` int(12) NOT NULL default '0',
@@ -1073,8 +1073,8 @@
   PRIMARY KEY (threadId)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_galleries;
-CREATE TABLE tiki_galleries (
+DROP TABLE IF EXISTS `tiki_galleries`;
+CREATE TABLE `tiki_galleries` (
   `galleryId` int(14) NOT NULL auto_increment,
   `name` varchar(80) NOT NULL default '',
   `description` text,
@@ -1114,15 +1114,15 @@
   FULLTEXT KEY ft (name,description)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_galleries_scales;
-CREATE TABLE tiki_galleries_scales (
+DROP TABLE IF EXISTS `tiki_galleries_scales`;
+CREATE TABLE `tiki_galleries_scales` (
   `galleryId` int(14) NOT NULL default '0',
   `scale` int(11) NOT NULL default '0',
   PRIMARY KEY (galleryId,scale)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_games;
-CREATE TABLE tiki_games (
+DROP TABLE IF EXISTS `tiki_games`;
+CREATE TABLE `tiki_games` (
   `gameName` varchar(200) NOT NULL default '',
   `hits` int(8) default NULL,
   `votes` int(8) default NULL,
@@ -1130,15 +1130,15 @@
   PRIMARY KEY (gameName)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_group_inclusion;
-CREATE TABLE tiki_group_inclusion (
+DROP TABLE IF EXISTS `tiki_group_inclusion`;
+CREATE TABLE `tiki_group_inclusion` (
   `groupName` varchar(255) NOT NULL default '',
   `includeGroup` varchar(255) NOT NULL default '',
   PRIMARY KEY (groupName(30),includeGroup(30))
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_group_watches;
-CREATE TABLE tiki_group_watches (
+DROP TABLE IF EXISTS `tiki_group_watches`;
+CREATE TABLE `tiki_group_watches` (
   `watchId` int(12) NOT NULL auto_increment,
   `group` varchar(200) NOT NULL default '',
   `event` varchar(40) NOT NULL default '',
@@ -1150,8 +1150,8 @@
   PRIMARY KEY (`group`(50),event,object(100))
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_history;
-CREATE TABLE tiki_history (
+DROP TABLE IF EXISTS `tiki_history`;
+CREATE TABLE `tiki_history` (
   `historyId` int(12) NOT NULL auto_increment,
   `pageName` varchar(160) NOT NULL default '',
   `version` int(8) NOT NULL default '0',
@@ -1169,15 +1169,15 @@
   KEY(historyId)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_hotwords;
-CREATE TABLE tiki_hotwords (
+DROP TABLE IF EXISTS `tiki_hotwords`;
+CREATE TABLE `tiki_hotwords` (
   `word` varchar(40) NOT NULL default '',
   `url` varchar(255) NOT NULL default '',
   PRIMARY KEY (word)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_html_pages;
-CREATE TABLE tiki_html_pages (
+DROP TABLE IF EXISTS `tiki_html_pages`;
+CREATE TABLE `tiki_html_pages` (
   `pageName` varchar(200) NOT NULL default '',
   `content` longblob,
   `refresh` int(10) default NULL,
@@ -1186,8 +1186,8 @@
   PRIMARY KEY (pageName)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_html_pages_dynamic_zones;
-CREATE TABLE tiki_html_pages_dynamic_zones (
+DROP TABLE IF EXISTS `tiki_html_pages_dynamic_zones`;
+CREATE TABLE `tiki_html_pages_dynamic_zones` (
   `pageName` varchar(40) NOT NULL default '',
   `zone` varchar(80) NOT NULL default '',
   `type` char(2) default NULL,
@@ -1195,8 +1195,8 @@
   PRIMARY KEY (pageName,zone)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_images;
-CREATE TABLE tiki_images (
+DROP TABLE IF EXISTS `tiki_images`;
+CREATE TABLE `tiki_images` (
   `imageId` int(14) NOT NULL auto_increment,
   `galleryId` int(14) NOT NULL default '0',
   `name` varchar(200) NOT NULL default '',
@@ -1217,8 +1217,8 @@
   FULLTEXT KEY ft (name,description)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_images_data;
-CREATE TABLE tiki_images_data (
+DROP TABLE IF EXISTS `tiki_images_data`;
+CREATE TABLE `tiki_images_data` (
   `imageId` int(14) NOT NULL default '0',
   `xsize` int(8) NOT NULL default '0',
   `ysize` int(8) NOT NULL default '0',
@@ -1232,8 +1232,8 @@
   KEY t_i_d_it (imageId,type)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_language;
-CREATE TABLE tiki_language (
+DROP TABLE IF EXISTS `tiki_language`;
+CREATE TABLE `tiki_language` (
   `source` tinyblob NOT NULL,
   `lang` char(16) NOT NULL default '',
   `tran` tinyblob,
@@ -1240,8 +1240,8 @@
   PRIMARY KEY (source(255),lang)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_languages;
-CREATE TABLE tiki_languages (
+DROP TABLE IF EXISTS `tiki_languages`;
+CREATE TABLE `tiki_languages` (
   `lang` char(16) NOT NULL default '',
   `language` varchar(255) default NULL,
   PRIMARY KEY (lang)
@@ -1249,8 +1249,8 @@
 
 INSERT INTO tiki_languages(lang, language) VALUES('en','English');
 
-DROP TABLE IF EXISTS tiki_link_cache;
-CREATE TABLE tiki_link_cache (
+DROP TABLE IF EXISTS `tiki_link_cache`;
+CREATE TABLE `tiki_link_cache` (
   `cacheId` int(14) NOT NULL auto_increment,
   `url` varchar(250) default NULL,
   `data` longblob,
@@ -1260,8 +1260,8 @@
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 CREATE INDEX urlindex ON tiki_link_cache (url(250));
 
-DROP TABLE IF EXISTS tiki_links;
-CREATE TABLE tiki_links (
+DROP TABLE IF EXISTS `tiki_links`;
+CREATE TABLE `tiki_links` (
   `fromPage` varchar(160) NOT NULL default '',
   `toPage` varchar(160) NOT NULL default '',
   `reltype` varchar(50),
@@ -1269,8 +1269,8 @@
   KEY toPage (toPage)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_live_support_events;
-CREATE TABLE tiki_live_support_events (
+DROP TABLE IF EXISTS `tiki_live_support_events`;
+CREATE TABLE `tiki_live_support_events` (
   `eventId` int(14) NOT NULL auto_increment,
   `reqId` varchar(32) NOT NULL default '',
   `type` varchar(40) default NULL,
@@ -1281,8 +1281,8 @@
   PRIMARY KEY (eventId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_live_support_message_comments;
-CREATE TABLE tiki_live_support_message_comments (
+DROP TABLE IF EXISTS `tiki_live_support_message_comments`;
+CREATE TABLE `tiki_live_support_message_comments` (
   `cId` int(12) NOT NULL auto_increment,
   `msgId` int(12) default NULL,
   `data` text,
@@ -1290,8 +1290,8 @@
   PRIMARY KEY (cId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_live_support_messages;
-CREATE TABLE tiki_live_support_messages (
+DROP TABLE IF EXISTS `tiki_live_support_messages`;
+CREATE TABLE `tiki_live_support_messages` (
   `msgId` int(12) NOT NULL auto_increment,
   `data` text,
   `timestamp` int(14) default NULL,
@@ -1307,8 +1307,8 @@
   PRIMARY KEY (msgId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_live_support_modules;
-CREATE TABLE tiki_live_support_modules (
+DROP TABLE IF EXISTS `tiki_live_support_modules`;
+CREATE TABLE `tiki_live_support_modules` (
   `modId` int(4) NOT NULL auto_increment,
   `name` varchar(90) default NULL,
   PRIMARY KEY (modId)
@@ -1322,8 +1322,8 @@
 INSERT INTO tiki_live_support_modules(name) VALUES('workflow');
 INSERT INTO tiki_live_support_modules(name) VALUES('charts');
 
-DROP TABLE IF EXISTS tiki_live_support_operators;
-CREATE TABLE tiki_live_support_operators (
+DROP TABLE IF EXISTS `tiki_live_support_operators`;
+CREATE TABLE `tiki_live_support_operators` (
   `user` varchar(200) NOT NULL default '',
   `accepted_requests` int(10) default NULL,
   `status` varchar(20) default NULL,
@@ -1338,8 +1338,8 @@
   PRIMARY KEY (user)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_live_support_requests;
-CREATE TABLE tiki_live_support_requests (
+DROP TABLE IF EXISTS `tiki_live_support_requests`;
+CREATE TABLE `tiki_live_support_requests` (
   `reqId` varchar(32) NOT NULL default '',
   `user` varchar(200) NOT NULL default '',
   `tiki_user` varchar(200) default NULL,
@@ -1357,8 +1357,8 @@
   PRIMARY KEY (reqId)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_logs;
-CREATE TABLE tiki_logs (
+DROP TABLE IF EXISTS `tiki_logs`;
+CREATE TABLE `tiki_logs` (
   `logId` int(8) NOT NULL auto_increment,
   `logtype` varchar(20) NOT NULL,
   `logmessage` text NOT NULL,
@@ -1370,15 +1370,15 @@
   KEY logtype (logtype)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_mail_events;
-CREATE TABLE tiki_mail_events (
+DROP TABLE IF EXISTS `tiki_mail_events`;
+CREATE TABLE `tiki_mail_events` (
   `event` varchar(200) default NULL,
   `object` varchar(200) default NULL,
   `email` varchar(200) default NULL
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_mailin_accounts;
-CREATE TABLE tiki_mailin_accounts (
+DROP TABLE IF EXISTS `tiki_mailin_accounts`;
+CREATE TABLE `tiki_mailin_accounts` (
   `accountId` int(12) NOT NULL auto_increment,
   `user` varchar(200) NOT NULL default '',
   `account` varchar(50) NOT NULL default '',
@@ -1399,15 +1399,15 @@
   PRIMARY KEY (accountId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_menu_languages;
-CREATE TABLE tiki_menu_languages (
+DROP TABLE IF EXISTS `tiki_menu_languages`;
+CREATE TABLE `tiki_menu_languages` (
   `menuId` int(8) NOT NULL auto_increment,
   `language` char(16) NOT NULL default '',
   PRIMARY KEY (menuId,language)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_menu_options;
-CREATE TABLE tiki_menu_options (
+DROP TABLE IF EXISTS `tiki_menu_options`;
+CREATE TABLE `tiki_menu_options` (
   `optionId` int(8) NOT NULL auto_increment,
   `menuId` int(8) default NULL,
   `type` char(1) default NULL,
@@ -1616,8 +1616,8 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Content Templates','tiki-admin_content_templates.php',1256,'','tiki_p_edit_content_templates','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tiki Importer','tiki-importer.php',1240,'','tiki_p_admin_importer','',0);
 
-DROP TABLE IF EXISTS tiki_menus;
-CREATE TABLE tiki_menus (
+DROP TABLE IF EXISTS `tiki_menus`;
+CREATE TABLE `tiki_menus` (
   `menuId` int(8) NOT NULL auto_increment,
   `name` varchar(200) NOT NULL default '',
   `description` text,
@@ -1629,8 +1629,8 @@
 
 INSERT INTO tiki_menus (menuId,name,description,type) VALUES ('42','Application menu','Main extensive navigation menu','d');
 
-DROP TABLE IF EXISTS tiki_minical_events;
-CREATE TABLE tiki_minical_events (
+DROP TABLE IF EXISTS `tiki_minical_events`;
+CREATE TABLE `tiki_minical_events` (
   `user` varchar(200) default '',
   `eventId` int(12) NOT NULL auto_increment,
   `title` varchar(250) default NULL,
@@ -1644,8 +1644,8 @@
   PRIMARY KEY (eventId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_minical_topics;
-CREATE TABLE tiki_minical_topics (
+DROP TABLE IF EXISTS `tiki_minical_topics`;
+CREATE TABLE `tiki_minical_topics` (
   `user` varchar(200) default '',
   `topicId` int(12) NOT NULL auto_increment,
   `name` varchar(250) default NULL,
@@ -1658,8 +1658,8 @@
   PRIMARY KEY (topicId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_modules;
-CREATE TABLE tiki_modules (
+DROP TABLE IF EXISTS `tiki_modules`;
+CREATE TABLE `tiki_modules` (
   `moduleId` int(8) NOT NULL auto_increment,
   `name` varchar(200) NOT NULL default '',
   `position` char(1) default NULL,
@@ -1677,8 +1677,8 @@
 
 INSERT INTO tiki_modules (name,position,ord,cache_time,params,groups) VALUES ('mnu_application_menu','l',30,0,'flip=y','a:1:{i:0;s:10:"Registered";}');
 
-DROP TABLE IF EXISTS tiki_newsletter_subscriptions;
-CREATE TABLE tiki_newsletter_subscriptions (
+DROP TABLE IF EXISTS `tiki_newsletter_subscriptions`;
+CREATE TABLE `tiki_newsletter_subscriptions` (
   `nlId` int(12) NOT NULL default '0',
   `email` varchar(255) NOT NULL default '',
   `code` varchar(32) default NULL,
@@ -1689,8 +1689,8 @@
   PRIMARY KEY (nlId,email,isUser)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_newsletter_groups;
-CREATE TABLE tiki_newsletter_groups (
+DROP TABLE IF EXISTS `tiki_newsletter_groups`;
+CREATE TABLE `tiki_newsletter_groups` (
   `nlId` int(12) NOT NULL default '0',
   `groupName` varchar(255) NOT NULL default '',
   `code` varchar(32) default NULL,
@@ -1697,15 +1697,15 @@
   PRIMARY KEY (nlId,groupName)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_newsletter_included;
-CREATE TABLE tiki_newsletter_included (
+DROP TABLE IF EXISTS `tiki_newsletter_included`;
+CREATE TABLE `tiki_newsletter_included` (
   `nlId` int(12) NOT NULL default '0',
   `includedId` int(12) NOT NULL default '0',
   PRIMARY KEY (nlId,includedId)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_newsletters;
-CREATE TABLE tiki_newsletters (
+DROP TABLE IF EXISTS `tiki_newsletters`;
+CREATE TABLE `tiki_newsletters` (
   `nlId` int(12) NOT NULL auto_increment,
   `name` varchar(200) default NULL,
   `description` text,
@@ -1723,8 +1723,8 @@
   PRIMARY KEY (nlId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_newsreader_marks;
-CREATE TABLE tiki_newsreader_marks (
+DROP TABLE IF EXISTS `tiki_newsreader_marks`;
+CREATE TABLE `tiki_newsreader_marks` (
   `user` varchar(200) NOT NULL default '',
   `serverId` int(12) NOT NULL default '0',
   `groupName` varchar(255) NOT NULL default '',
@@ -1732,8 +1732,8 @@
   PRIMARY KEY (`user`(100),serverId,groupName(100))
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_newsreader_servers;
-CREATE TABLE tiki_newsreader_servers (
+DROP TABLE IF EXISTS `tiki_newsreader_servers`;
+CREATE TABLE `tiki_newsreader_servers` (
   `user` varchar(200) NOT NULL default '',
   `serverId` int(12) NOT NULL auto_increment,
   `server` varchar(250) default NULL,
@@ -1743,8 +1743,8 @@
   PRIMARY KEY (serverId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_page_footnotes;
-CREATE TABLE tiki_page_footnotes (
+DROP TABLE IF EXISTS `tiki_page_footnotes`;
+CREATE TABLE `tiki_page_footnotes` (
   `user` varchar(200) NOT NULL default '',
   `pageName` varchar(250) NOT NULL default '',
   `data` text,
@@ -1751,8 +1751,8 @@
   PRIMARY KEY (`user`(150),pageName(100))
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_pages;
-CREATE TABLE tiki_pages (
+DROP TABLE IF EXISTS `tiki_pages`;
+CREATE TABLE `tiki_pages` (
   `page_id` int(14) NOT NULL auto_increment,
   `pageName` varchar(160) NOT NULL default '',
   `hits` int(8) default NULL,
@@ -1786,8 +1786,8 @@
   KEY lastModif(lastModif)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
-DROP TABLE IF EXISTS tiki_page_drafts;
-CREATE TABLE tiki_page_drafts (
+DROP TABLE IF EXISTS `tiki_page_drafts`;
+CREATE TABLE `tiki_page_drafts` (
   `user` varchar(200) default '',
   `pageName` varchar(255) NOT NULL,
   `data` mediumtext,
@@ -1797,14 +1797,14 @@
   PRIMARY KEY (pageName(120), `user`(120))
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_pageviews;
-CREATE TABLE tiki_pageviews (
+DROP TABLE IF EXISTS `tiki_pageviews`;
+CREATE TABLE `tiki_pageviews` (
   `day` int(14) NOT NULL default '0',
   `pageviews` int(14) default NULL,
   PRIMARY KEY (day)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_poll_objects;
+DROP TABLE IF EXISTS `tiki_poll_objects`;
 CREATE TABLE `tiki_poll_objects` (
   `catObjectId` int(11) NOT NULL default '0',
   `pollId` int(11) NOT NULL default '0',
@@ -1812,8 +1812,8 @@
   PRIMARY KEY (`catObjectId`,`pollId`)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_poll_options;
-CREATE TABLE tiki_poll_options (
+DROP TABLE IF EXISTS `tiki_poll_options`;
+CREATE TABLE `tiki_poll_options` (
   `pollId` int(8) NOT NULL default '0',
   `optionId` int(8) NOT NULL auto_increment,
   `title` varchar(200) default NULL,
@@ -1822,8 +1822,8 @@
   PRIMARY KEY (optionId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_polls;
-CREATE TABLE tiki_polls (
+DROP TABLE IF EXISTS `tiki_polls`;
+CREATE TABLE `tiki_polls` (
   `pollId` int(8) NOT NULL auto_increment,
   `title` varchar(200) default NULL,
   `votes` int(8) default NULL,
@@ -1833,15 +1833,15 @@
   PRIMARY KEY (pollId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_preferences;
-CREATE TABLE tiki_preferences (
+DROP TABLE IF EXISTS `tiki_preferences`;
+CREATE TABLE `tiki_preferences` (
   `name` varchar(40) NOT NULL default '',
   `value` text,
   PRIMARY KEY (`name`)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_private_messages;
-CREATE TABLE tiki_private_messages (
+DROP TABLE IF EXISTS `tiki_private_messages`;
+CREATE TABLE `tiki_private_messages` (
   `messageId` int(8) NOT NULL auto_increment,
   `toNickname` varchar(200) NOT NULL default '',
   `poster` varchar(200) NOT NULL default 'anonymous',
@@ -1853,8 +1853,8 @@
   KEY (`timestamp`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_programmed_content;
-CREATE TABLE tiki_programmed_content (
+DROP TABLE IF EXISTS `tiki_programmed_content`;
+CREATE TABLE `tiki_programmed_content` (
   `pId` int(8) NOT NULL auto_increment,
   `contentId` int(8) NOT NULL default '0',
   `publishDate` int(14) NOT NULL default '0',
@@ -1862,8 +1862,8 @@
   PRIMARY KEY (pId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_quiz_question_options;
-CREATE TABLE tiki_quiz_question_options (
+DROP TABLE IF EXISTS `tiki_quiz_question_options`;
+CREATE TABLE `tiki_quiz_question_options` (
   `optionId` int(10) NOT NULL auto_increment,
   `questionId` int(10) default NULL,
   `optionText` text,
@@ -1871,8 +1871,8 @@
   PRIMARY KEY (optionId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_quiz_questions;
-CREATE TABLE tiki_quiz_questions (
+DROP TABLE IF EXISTS `tiki_quiz_questions`;
+CREATE TABLE `tiki_quiz_questions` (
   `questionId` int(10) NOT NULL auto_increment,
   `quizId` int(10) default NULL,
   `question` text,
@@ -1882,8 +1882,8 @@
   PRIMARY KEY (questionId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_quiz_results;
-CREATE TABLE tiki_quiz_results (
+DROP TABLE IF EXISTS `tiki_quiz_results`;
+CREATE TABLE `tiki_quiz_results` (
   `resultId` int(10) NOT NULL auto_increment,
   `quizId` int(10) default NULL,
   `fromPoints` int(4) default NULL,
@@ -1892,8 +1892,8 @@
   PRIMARY KEY (resultId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_quiz_stats;
-CREATE TABLE tiki_quiz_stats (
+DROP TABLE IF EXISTS `tiki_quiz_stats`;
+CREATE TABLE `tiki_quiz_stats` (
   `quizId` int(10) NOT NULL default '0',
   `questionId` int(10) NOT NULL default '0',
   `optionId` int(10) NOT NULL default '0',
@@ -1901,8 +1901,8 @@
   PRIMARY KEY (quizId,questionId,optionId)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_quiz_stats_sum;
-CREATE TABLE tiki_quiz_stats_sum (
+DROP TABLE IF EXISTS `tiki_quiz_stats_sum`;
+CREATE TABLE `tiki_quiz_stats_sum` (
   `quizId` int(10) NOT NULL default '0',
   `quizName` varchar(255) default NULL,
   `timesTaken` int(10) default NULL,
@@ -1912,8 +1912,8 @@
   PRIMARY KEY (quizId)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_quizzes;
-CREATE TABLE tiki_quizzes (
+DROP TABLE IF EXISTS `tiki_quizzes`;
+CREATE TABLE `tiki_quizzes` (
   `quizId` int(10) NOT NULL auto_increment,
   `name` varchar(255) default NULL,
   `description` text,
@@ -1954,8 +1954,8 @@
   PRIMARY KEY (quizId, nVersion)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_received_articles;
-CREATE TABLE tiki_received_articles (
+DROP TABLE IF EXISTS `tiki_received_articles`;
+CREATE TABLE `tiki_received_articles` (
   `receivedArticleId` int(14) NOT NULL auto_increment,
   `receivedFromSite` varchar(200) default NULL,
   `receivedFromUser` varchar(200) default NULL,
@@ -1982,8 +1982,8 @@
   PRIMARY KEY (receivedArticleId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_received_pages;
-CREATE TABLE tiki_received_pages (
+DROP TABLE IF EXISTS `tiki_received_pages`;
+CREATE TABLE `tiki_received_pages` (
   `receivedPageId` int(14) NOT NULL auto_increment,
   `pageName` varchar(160) NOT NULL default '',
   `data` longblob,
@@ -2003,8 +2003,8 @@
   KEY structureName (structureName)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_referer_stats;
-CREATE TABLE tiki_referer_stats (
+DROP TABLE IF EXISTS `tiki_referer_stats`;
+CREATE TABLE `tiki_referer_stats` (
   `referer` varchar(255) NOT NULL default '',
   `hits` int(10) default NULL,
   `last` int(14) default NULL,
@@ -2011,15 +2011,15 @@
   PRIMARY KEY (referer)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_related_categories;
-CREATE TABLE tiki_related_categories (
+DROP TABLE IF EXISTS `tiki_related_categories`;
+CREATE TABLE `tiki_related_categories` (
   `categId` int(10) NOT NULL default '0',
   `relatedTo` int(10) NOT NULL default '0',
   PRIMARY KEY (categId,relatedTo)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_rss_modules;
-CREATE TABLE tiki_rss_modules (
+DROP TABLE IF EXISTS `tiki_rss_modules`;
+CREATE TABLE `tiki_rss_modules` (
   `rssId` int(8) NOT NULL auto_increment,
   `name` varchar(30) NOT NULL default '',
   `description` text,
@@ -2033,8 +2033,8 @@
   KEY name (name)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_rss_feeds;
-CREATE TABLE tiki_rss_feeds (
+DROP TABLE IF EXISTS `tiki_rss_feeds`;
+CREATE TABLE `tiki_rss_feeds` (
   `name` varchar(30) NOT NULL default '',
   `rssVer` char(1) NOT NULL default '1',
   `refresh` int(8) default '300',
@@ -2043,7 +2043,7 @@
   PRIMARY KEY (name,rssVer)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_searchindex;
+DROP TABLE IF EXISTS `tiki_searchindex`;
 CREATE TABLE tiki_searchindex(
   `searchword` varchar(80) NOT NULL default '',
   `location` varchar(80) NOT NULL default '',
@@ -2056,7 +2056,7 @@
 ) ENGINE=MyISAM;
 
 -- LRU (last recently used) list for searching parts of words
-DROP TABLE IF EXISTS tiki_searchsyllable;
+DROP TABLE IF EXISTS `tiki_searchsyllable`;
 CREATE TABLE tiki_searchsyllable(
   `syllable` varchar(80) NOT NULL default '',
   `lastUsed` int(11) NOT NULL default '0',
@@ -2066,7 +2066,7 @@
 ) ENGINE=MyISAM;
 
 -- searchword caching table for search syllables
-DROP TABLE IF EXISTS tiki_searchwords;
+DROP TABLE IF EXISTS `tiki_searchwords`;
 CREATE TABLE tiki_searchwords(
   `syllable` varchar(80) NOT NULL default '',
   `searchword` varchar(80) NOT NULL default '',
@@ -2073,14 +2073,14 @@
   PRIMARY KEY (syllable,searchword)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_search_stats;
-CREATE TABLE tiki_search_stats (
+DROP TABLE IF EXISTS `tiki_search_stats`;
+CREATE TABLE `tiki_search_stats` (
   `term` varchar(50) NOT NULL default '',
   `hits` int(10) default NULL,
   PRIMARY KEY (term)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_secdb;
+DROP TABLE IF EXISTS `tiki_secdb`;
 CREATE TABLE tiki_secdb(
   `md5_value` varchar(32) NOT NULL,
   `filename` varchar(250) NOT NULL,
@@ -2090,8 +2090,8 @@
   KEY sdb_fn (filename)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_semaphores;
-CREATE TABLE tiki_semaphores (
+DROP TABLE IF EXISTS `tiki_semaphores`;
+CREATE TABLE `tiki_semaphores` (
   `semName` varchar(250) NOT NULL default '',
   `objectType` varchar(20) default 'wiki page',
   `user` varchar(200) NOT NULL default '',
@@ -2099,8 +2099,8 @@
   PRIMARY KEY (semName)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_sent_newsletters;
-CREATE TABLE tiki_sent_newsletters (
+DROP TABLE IF EXISTS `tiki_sent_newsletters`;
+CREATE TABLE `tiki_sent_newsletters` (
   `editionId` int(12) NOT NULL auto_increment,
   `nlId` int(12) NOT NULL default '0',
   `users` int(10) default NULL,
@@ -2111,8 +2111,8 @@
   PRIMARY KEY (editionId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_sent_newsletters_errors;
-CREATE TABLE tiki_sent_newsletters_errors (
+DROP TABLE IF EXISTS `tiki_sent_newsletters_errors`;
+CREATE TABLE `tiki_sent_newsletters_errors` (
   `editionId` int(12),
   `email` varchar(255),
   `login` varchar(40) default '',
@@ -2120,8 +2120,8 @@
   KEY (editionId)
 ) ENGINE=MyISAM ;
 
-DROP TABLE IF EXISTS tiki_sessions;
-CREATE TABLE tiki_sessions (
+DROP TABLE IF EXISTS `tiki_sessions`;
+CREATE TABLE `tiki_sessions` (
   `sessionId` varchar(32) NOT NULL default '',
   `user` varchar(200) default '',
   `timestamp` int(14) default NULL,
@@ -2131,8 +2131,8 @@
   KEY timestamp (timestamp)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_sheet_layout;
-CREATE TABLE tiki_sheet_layout (
+DROP TABLE IF EXISTS `tiki_sheet_layout`;
+CREATE TABLE `tiki_sheet_layout` (
   `sheetId` int(8) NOT NULL default '0',
   `begin` int(10) NOT NULL default '0',
   `end` int(10) default NULL,
@@ -2142,8 +2142,8 @@
   UNIQUE KEY sheetId (sheetId,begin)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_sheet_values;
-CREATE TABLE tiki_sheet_values (
+DROP TABLE IF EXISTS `tiki_sheet_values`;
+CREATE TABLE `tiki_sheet_values` (
   `sheetId` int(8) NOT NULL default '0',
   `begin` int(10) NOT NULL default '0',
   `end` int(10) default NULL,
@@ -2159,8 +2159,8 @@
   KEY sheetId_2 (sheetId,rowIndex,columnIndex)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_sheets;
-CREATE TABLE tiki_sheets (
+DROP TABLE IF EXISTS `tiki_sheets`;
+CREATE TABLE `tiki_sheets` (
   `sheetId` int(8) NOT NULL auto_increment,
   `title` varchar(200) NOT NULL default '',
   `description` text,
@@ -2168,8 +2168,8 @@
   PRIMARY KEY (sheetId)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_shoutbox;
-CREATE TABLE tiki_shoutbox (
+DROP TABLE IF EXISTS `tiki_shoutbox`;
+CREATE TABLE `tiki_shoutbox` (
   `msgId` int(10) NOT NULL auto_increment,
   `message` varchar(255) default NULL,
   `timestamp` int(14) default NULL,
@@ -2178,22 +2178,22 @@
   PRIMARY KEY (msgId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_shoutbox_words;
-CREATE TABLE tiki_shoutbox_words (
+DROP TABLE IF EXISTS `tiki_shoutbox_words`;
+CREATE TABLE `tiki_shoutbox_words` (
   `word` VARCHAR( 40 ) NOT NULL ,
   `qty` INT DEFAULT '0' NOT NULL ,
   PRIMARY KEY (word)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_structure_versions;
-CREATE TABLE tiki_structure_versions (
+DROP TABLE IF EXISTS `tiki_structure_versions`;
+CREATE TABLE `tiki_structure_versions` (
   `structure_id` int(14) NOT NULL auto_increment,
   `version` int(14) default NULL,
   PRIMARY KEY (structure_id)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_structures;
-CREATE TABLE tiki_structures (
+DROP TABLE IF EXISTS `tiki_structures`;
+CREATE TABLE `tiki_structures` (
   `page_ref_id` int(14) NOT NULL auto_increment,
   `structure_id` int(14) NOT NULL,
   `parent_id` int(14) default NULL,
@@ -2206,8 +2206,8 @@
   KEY page_id (page_id)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_submissions;
-CREATE TABLE tiki_submissions (
+DROP TABLE IF EXISTS `tiki_submissions`;
+CREATE TABLE `tiki_submissions` (
   `subId` int(8) NOT NULL auto_increment,
   `topline` varchar(255) default NULL,
   `title` varchar(255) default NULL,
@@ -2244,8 +2244,8 @@
   PRIMARY KEY (subId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_suggested_faq_questions;
-CREATE TABLE tiki_suggested_faq_questions (
+DROP TABLE IF EXISTS `tiki_suggested_faq_questions`;
+CREATE TABLE `tiki_suggested_faq_questions` (
   `sfqId` int(10) NOT NULL auto_increment,
   `faqId` int(10) NOT NULL default '0',
   `question` text,
@@ -2255,8 +2255,8 @@
   PRIMARY KEY (sfqId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_survey_question_options;
-CREATE TABLE tiki_survey_question_options (
+DROP TABLE IF EXISTS `tiki_survey_question_options`;
+CREATE TABLE `tiki_survey_question_options` (
   `optionId` int(12) NOT NULL auto_increment,
   `questionId` int(12) NOT NULL default '0',
   `qoption` text,
@@ -2264,8 +2264,8 @@
   PRIMARY KEY (optionId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_survey_questions;
-CREATE TABLE tiki_survey_questions (
+DROP TABLE IF EXISTS `tiki_survey_questions`;
+CREATE TABLE `tiki_survey_questions` (
   `questionId` int(12) NOT NULL auto_increment,
   `surveyId` int(12) NOT NULL default '0',
   `question` text,
@@ -2281,8 +2281,8 @@
   PRIMARY KEY (questionId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_surveys;
-CREATE TABLE tiki_surveys (
+DROP TABLE IF EXISTS `tiki_surveys`;
+CREATE TABLE `tiki_surveys` (
   `surveyId` int(12) NOT NULL auto_increment,
   `name` varchar(200) default NULL,
   `description` text,
@@ -2293,8 +2293,8 @@
   PRIMARY KEY (surveyId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_tags;
-CREATE TABLE tiki_tags (
+DROP TABLE IF EXISTS `tiki_tags`;
+CREATE TABLE `tiki_tags` (
   `tagName` varchar(80) NOT NULL default '',
   `pageName` varchar(160) NOT NULL default '',
   `hits` int(8) default NULL,
@@ -2309,15 +2309,15 @@
   PRIMARY KEY (tagName,pageName)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_theme_control_categs;
-CREATE TABLE tiki_theme_control_categs (
+DROP TABLE IF EXISTS `tiki_theme_control_categs`;
+CREATE TABLE `tiki_theme_control_categs` (
   `categId` int(12) NOT NULL default '0',
   `theme` varchar(250) NOT NULL default '',
   PRIMARY KEY (categId)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_theme_control_objects;
-CREATE TABLE tiki_theme_control_objects (
+DROP TABLE IF EXISTS `tiki_theme_control_objects`;
+CREATE TABLE `tiki_theme_control_objects` (
   `objId` varchar(250) NOT NULL default '',
   `type` varchar(250) NOT NULL default '',
   `name` varchar(250) NOT NULL default '',
@@ -2325,15 +2325,15 @@
   PRIMARY KEY (objId(100), type(100))
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_theme_control_sections;
-CREATE TABLE tiki_theme_control_sections (
+DROP TABLE IF EXISTS `tiki_theme_control_sections`;
+CREATE TABLE `tiki_theme_control_sections` (
   `section` varchar(250) NOT NULL default '',
   `theme` varchar(250) NOT NULL default '',
   PRIMARY KEY (section)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_topics;
-CREATE TABLE tiki_topics (
+DROP TABLE IF EXISTS `tiki_topics`;
+CREATE TABLE `tiki_topics` (
   `topicId` int(14) NOT NULL auto_increment,
   `name` varchar(40) default NULL,
   `image_name` varchar(80) default NULL,
@@ -2345,8 +2345,8 @@
   PRIMARY KEY (topicId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_tracker_fields;
-CREATE TABLE tiki_tracker_fields (
+DROP TABLE IF EXISTS `tiki_tracker_fields`;
+CREATE TABLE `tiki_tracker_fields` (
   `fieldId` int(12) NOT NULL auto_increment,
   `trackerId` int(12) NOT NULL default '0',
   `name` varchar(255) default NULL,
@@ -2370,8 +2370,8 @@
   INDEX trackerId (trackerId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_tracker_item_attachments;
-CREATE TABLE tiki_tracker_item_attachments (
+DROP TABLE IF EXISTS `tiki_tracker_item_attachments`;
+CREATE TABLE `tiki_tracker_item_attachments` (
   `attId` int(12) NOT NULL auto_increment,
   `itemId` int(12) NOT NULL default 0,
   `filename` varchar(80) default NULL,
@@ -2389,8 +2389,8 @@
   INDEX itemId (itemId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_tracker_item_comments;
-CREATE TABLE tiki_tracker_item_comments (
+DROP TABLE IF EXISTS `tiki_tracker_item_comments`;
+CREATE TABLE `tiki_tracker_item_comments` (
   `commentId` int(12) NOT NULL auto_increment,
   `itemId` int(12) NOT NULL default '0',
   `user` varchar(200) default NULL,
@@ -2400,8 +2400,8 @@
   PRIMARY KEY (commentId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_tracker_item_fields;
-CREATE TABLE tiki_tracker_item_fields (
+DROP TABLE IF EXISTS `tiki_tracker_item_fields`;
+CREATE TABLE `tiki_tracker_item_fields` (
   `itemId` int(12) NOT NULL default '0',
   `fieldId` int(12) NOT NULL default '0',
   `value` text,
@@ -2413,8 +2413,8 @@
   FULLTEXT KEY ft (value)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_tracker_items;
-CREATE TABLE tiki_tracker_items (
+DROP TABLE IF EXISTS `tiki_tracker_items`;
+CREATE TABLE `tiki_tracker_items` (
   `itemId` int(12) NOT NULL auto_increment,
   `trackerId` int(12) NOT NULL default '0',
   `created` int(14) default NULL,
@@ -2424,8 +2424,8 @@
   INDEX trackerId (trackerId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_tracker_options;
-CREATE TABLE tiki_tracker_options (
+DROP TABLE IF EXISTS `tiki_tracker_options`;
+CREATE TABLE `tiki_tracker_options` (
   `trackerId` int(12) NOT NULL default '0',
   `name` varchar(80) NOT NULL default '',
   `value` text default NULL,
@@ -2432,8 +2432,8 @@
   PRIMARY KEY (trackerId,name(30))
 ) ENGINE=MyISAM ;
 
-DROP TABLE IF EXISTS tiki_trackers;
-CREATE TABLE tiki_trackers (
+DROP TABLE IF EXISTS `tiki_trackers`;
+CREATE TABLE `tiki_trackers` (
   `trackerId` int(12) NOT NULL auto_increment,
   `name` varchar(255) default NULL,
   `description` text,
@@ -2452,8 +2452,8 @@
   PRIMARY KEY (trackerId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_untranslated;
-CREATE TABLE tiki_untranslated (
+DROP TABLE IF EXISTS `tiki_untranslated`;
+CREATE TABLE `tiki_untranslated` (
   `id` int(14) NOT NULL auto_increment,
   `source` tinyblob NOT NULL,
   `lang` char(16) NOT NULL default '',
@@ -2462,8 +2462,8 @@
   KEY id_2 (id)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_user_answers;
-CREATE TABLE tiki_user_answers (
+DROP TABLE IF EXISTS `tiki_user_answers`;
+CREATE TABLE `tiki_user_answers` (
   `userResultId` int(10) NOT NULL default '0',
   `quizId` int(10) NOT NULL default '0',
   `questionId` int(10) NOT NULL default '0',
@@ -2471,8 +2471,8 @@
   PRIMARY KEY (userResultId,quizId,questionId,optionId)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_user_answers_uploads;
-CREATE TABLE tiki_user_answers_uploads (
+DROP TABLE IF EXISTS `tiki_user_answers_uploads`;
+CREATE TABLE `tiki_user_answers_uploads` (
   `answerUploadId` int(4) NOT NULL auto_increment,
   `userResultId` int(11) NOT NULL default '0',
   `questionId` int(11) NOT NULL default '0',
@@ -2483,8 +2483,8 @@
   PRIMARY KEY (answerUploadId)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_user_assigned_modules;
-CREATE TABLE tiki_user_assigned_modules (
+DROP TABLE IF EXISTS `tiki_user_assigned_modules`;
+CREATE TABLE `tiki_user_assigned_modules` (
   `moduleId` int(8) NOT NULL,
   `name` varchar(200) NOT NULL default '',
   `position` char(1) default NULL,
@@ -2494,8 +2494,8 @@
   PRIMARY KEY (name(30),user,position, ord)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_user_bookmarks_folders;
-CREATE TABLE tiki_user_bookmarks_folders (
+DROP TABLE IF EXISTS `tiki_user_bookmarks_folders`;
+CREATE TABLE `tiki_user_bookmarks_folders` (
   `folderId` int(12) NOT NULL auto_increment,
   `parentId` int(12) default NULL,
   `user` varchar(200) NOT NULL default '',
@@ -2503,8 +2503,8 @@
   PRIMARY KEY (user,folderId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_user_bookmarks_urls;
-CREATE TABLE tiki_user_bookmarks_urls (
+DROP TABLE IF EXISTS `tiki_user_bookmarks_urls`;
+CREATE TABLE `tiki_user_bookmarks_urls` (
   `urlId` int(12) NOT NULL auto_increment,
   `name` varchar(30) default NULL,
   `url` varchar(250) default NULL,
@@ -2515,8 +2515,8 @@
   PRIMARY KEY (urlId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_user_mail_accounts;
-CREATE TABLE tiki_user_mail_accounts (
+DROP TABLE IF EXISTS `tiki_user_mail_accounts`;
+CREATE TABLE `tiki_user_mail_accounts` (
   `accountId` int(12) NOT NULL auto_increment,
   `user` varchar(200) NOT NULL default '',
   `account` varchar(50) NOT NULL default '',
@@ -2538,8 +2538,8 @@
   PRIMARY KEY (accountId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_user_menus;
-CREATE TABLE tiki_user_menus (
+DROP TABLE IF EXISTS `tiki_user_menus`;
+CREATE TABLE `tiki_user_menus` (
   `user` varchar(200) NOT NULL default '',
   `menuId` int(12) NOT NULL auto_increment,
   `url` varchar(250) default NULL,
@@ -2549,8 +2549,8 @@
   PRIMARY KEY (menuId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_user_modules;
-CREATE TABLE tiki_user_modules (
+DROP TABLE IF EXISTS `tiki_user_modules`;
+CREATE TABLE `tiki_user_modules` (
   `name` varchar(200) NOT NULL default '',
   `title` varchar(40) default NULL,
   `data` longblob,
@@ -2560,8 +2560,8 @@
 
 INSERT INTO tiki_user_modules (name, title, data, parse) VALUES ('mnu_application_menu', 'Menu', '{menu id=42}', 'n');
 
-DROP TABLE IF EXISTS tiki_user_notes;
-CREATE TABLE tiki_user_notes (
+DROP TABLE IF EXISTS `tiki_user_notes`;
+CREATE TABLE `tiki_user_notes` (
   `user` varchar(200) NOT NULL default '',
   `noteId` int(12) NOT NULL auto_increment,
   `created` int(14) default NULL,
@@ -2573,8 +2573,8 @@
   PRIMARY KEY (noteId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_user_postings;
-CREATE TABLE tiki_user_postings (
+DROP TABLE IF EXISTS `tiki_user_postings`;
+CREATE TABLE `tiki_user_postings` (
   `user` varchar(200) NOT NULL default '',
   `posts` int(12) default NULL,
   `last` int(14) default NULL,
@@ -2583,8 +2583,8 @@
   PRIMARY KEY (user)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_user_preferences;
-CREATE TABLE tiki_user_preferences (
+DROP TABLE IF EXISTS `tiki_user_preferences`;
+CREATE TABLE `tiki_user_preferences` (
   `user` varchar(200) NOT NULL default '',
   `prefName` varchar(40) NOT NULL default '',
   `value` varchar(250) default NULL,
@@ -2591,8 +2591,8 @@
   PRIMARY KEY (user,prefName)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_user_quizzes;
-CREATE TABLE tiki_user_quizzes (
+DROP TABLE IF EXISTS `tiki_user_quizzes`;
+CREATE TABLE `tiki_user_quizzes` (
   `user` varchar(200) default '',
   `quizId` int(10) default NULL,
   `timestamp` int(14) default NULL,
@@ -2604,15 +2604,15 @@
   PRIMARY KEY (userResultId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_user_taken_quizzes;
-CREATE TABLE tiki_user_taken_quizzes (
+DROP TABLE IF EXISTS `tiki_user_taken_quizzes`;
+CREATE TABLE `tiki_user_taken_quizzes` (
   `user` varchar(200) NOT NULL default '',
   `quizId` varchar(255) NOT NULL default '',
   PRIMARY KEY (user,quizId(50))
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_user_tasks_history;
-CREATE TABLE tiki_user_tasks_history (
+DROP TABLE IF EXISTS `tiki_user_tasks_history`;
+CREATE TABLE `tiki_user_tasks_history` (
   `belongs_to` integer(14) NOT NULL,                   -- the first task in a history it has the same id as the task id
   `task_version` integer(4) NOT NULL DEFAULT 0,        -- version number for the history it starts with 0
   `title` varchar(250) NOT NULL,                       -- title
@@ -2631,8 +2631,8 @@
   PRIMARY KEY (belongs_to, task_version)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_user_tasks;
-CREATE TABLE tiki_user_tasks (
+DROP TABLE IF EXISTS `tiki_user_tasks`;
+CREATE TABLE `tiki_user_tasks` (
   `taskId` integer(14) NOT NULL auto_increment,        -- task id
   `last_version` integer(4) NOT NULL DEFAULT 0,        -- last version of the task starting with 0
   `user` varchar(200) NOT NULL DEFAULT '',              -- task user
@@ -2648,8 +2648,8 @@
   UNIQUE(creator, created)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
-DROP TABLE IF EXISTS tiki_user_votings;
-CREATE TABLE tiki_user_votings (
+DROP TABLE IF EXISTS `tiki_user_votings`;
+CREATE TABLE `tiki_user_votings` (
   `user` varchar(200) default '',
   `ip` varchar(15) default NULL,
   `id` varchar(255) NOT NULL default '',
@@ -2660,8 +2660,8 @@
   KEY id (`id`)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_user_watches;
-CREATE TABLE tiki_user_watches (
+DROP TABLE IF EXISTS `tiki_user_watches`;
+CREATE TABLE `tiki_user_watches` (
   `watchId` int(12) NOT NULL auto_increment,
   `user` varchar(200) NOT NULL default '',
   `event` varchar(40) NOT NULL default '',
@@ -2674,8 +2674,8 @@
   PRIMARY KEY (`user`(50),event,object(100),email(50))
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_userfiles;
-CREATE TABLE tiki_userfiles (
+DROP TABLE IF EXISTS `tiki_userfiles`;
+CREATE TABLE `tiki_userfiles` (
   `user` varchar(200) NOT NULL default '',
   `fileId` int(12) NOT NULL auto_increment,
   `name` varchar(200) default NULL,
@@ -2690,15 +2690,15 @@
   PRIMARY KEY (fileId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_userpoints;
-CREATE TABLE tiki_userpoints (
+DROP TABLE IF EXISTS `tiki_userpoints`;
+CREATE TABLE `tiki_userpoints` (
   `user` varchar(200) NOT NULL default '',
   `points` decimal(8,2) default NULL,
   `voted` int(8) default NULL
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_users;
-CREATE TABLE tiki_users (
+DROP TABLE IF EXISTS `tiki_users`;
+CREATE TABLE `tiki_users` (
   `user` varchar(200) NOT NULL default '',
   `password` varchar(40) default NULL,
   `email` varchar(200) default NULL,
@@ -2706,8 +2706,8 @@
   PRIMARY KEY (user)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_webmail_contacts;
-CREATE TABLE tiki_webmail_contacts (
+DROP TABLE IF EXISTS `tiki_webmail_contacts`;
+CREATE TABLE `tiki_webmail_contacts` (
   `contactId` int(12) NOT NULL auto_increment,
   `firstName` varchar(80) default NULL,
   `lastName` varchar(80) default NULL,
@@ -2717,15 +2717,15 @@
   PRIMARY KEY (contactId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_webmail_contacts_groups;
-CREATE TABLE tiki_webmail_contacts_groups (
+DROP TABLE IF EXISTS `tiki_webmail_contacts_groups`;
+CREATE TABLE `tiki_webmail_contacts_groups` (
   `contactId` int(12) NOT NULL,
   `groupName` varchar(255) NOT NULL,
   PRIMARY KEY (contactId,groupName(200))
 ) ENGINE=MyISAM ;
 
-DROP TABLE IF EXISTS tiki_webmail_messages;
-CREATE TABLE tiki_webmail_messages (
+DROP TABLE IF EXISTS `tiki_webmail_messages`;
+CREATE TABLE `tiki_webmail_messages` (
   `accountId` int(12) NOT NULL default '0',
   `mailId` varchar(255) NOT NULL default '',
   `user` varchar(200) NOT NULL default '',
@@ -2736,8 +2736,8 @@
   PRIMARY KEY (accountId,mailId)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_wiki_attachments;
-CREATE TABLE tiki_wiki_attachments (
+DROP TABLE IF EXISTS `tiki_wiki_attachments`;
+CREATE TABLE `tiki_wiki_attachments` (
   `attId` int(12) NOT NULL auto_increment,
   `page` varchar(200) NOT NULL default '',
   `filename` varchar(80) default NULL,
@@ -2753,14 +2753,14 @@
   KEY page (page)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_zones;
-CREATE TABLE tiki_zones (
+DROP TABLE IF EXISTS `tiki_zones`;
+CREATE TABLE `tiki_zones` (
   `zone` varchar(40) NOT NULL default '',
   PRIMARY KEY (zone)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_download;
-CREATE TABLE tiki_download (
+DROP TABLE IF EXISTS `tiki_download`;
+CREATE TABLE `tiki_download` (
   `id` int(11) NOT NULL auto_increment,
   `object` varchar(255) NOT NULL default '',
   `userId` int(8) NOT NULL default '0',
@@ -2774,8 +2774,8 @@
   KEY date (date)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS users_grouppermissions;
-CREATE TABLE users_grouppermissions (
+DROP TABLE IF EXISTS `users_grouppermissions`;
+CREATE TABLE `users_grouppermissions` (
   `groupName` varchar(255) NOT NULL default '',
   `permName` varchar(40) NOT NULL default '',
   `value` char(1) default '',
@@ -2785,8 +2785,8 @@
 
 INSERT INTO users_grouppermissions (groupName,permName) VALUES('Anonymous','tiki_p_view');
 
-DROP TABLE IF EXISTS users_groups;
-CREATE TABLE users_groups (
+DROP TABLE IF EXISTS `users_groups`;
+CREATE TABLE `users_groups` (
   `id` int(11) NOT NULL auto_increment,
   `groupName` varchar(255) NOT NULL default '',
   `groupDesc` varchar(255) default NULL,
@@ -2805,8 +2805,8 @@
   UNIQUE KEY groupName (groupName)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
-DROP TABLE IF EXISTS users_objectpermissions;
-CREATE TABLE users_objectpermissions (
+DROP TABLE IF EXISTS `users_objectpermissions`;
+CREATE TABLE `users_objectpermissions` (
   `groupName` varchar(255) NOT NULL default '',
   `permName` varchar(40) NOT NULL default '',
   `objectType` varchar(20) NOT NULL default '',
@@ -2814,8 +2814,8 @@
   PRIMARY KEY (objectId, objectType, groupName(30),permName)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS users_permissions;
-CREATE TABLE users_permissions (
+DROP TABLE IF EXISTS `users_permissions`;
+CREATE TABLE `users_permissions` (
   `permName` varchar(40) NOT NULL default '',
   `permDesc` varchar(250) default NULL,
   `level` varchar(80) default NULL,
@@ -3142,8 +3142,8 @@
 
 
 
-DROP TABLE IF EXISTS users_usergroups;
-CREATE TABLE users_usergroups (
+DROP TABLE IF EXISTS `users_usergroups`;
+CREATE TABLE `users_usergroups` (
   `userId` int(8) NOT NULL default '0',
   `groupName` varchar(255) NOT NULL default '',
   PRIMARY KEY (userId,groupName(30))
@@ -3153,8 +3153,8 @@
 INSERT INTO users_groups (groupName,groupDesc) VALUES ('Registered','Users logged into the system');
 INSERT INTO users_groups (groupName,groupDesc) VALUES ('Admins','Administrator and accounts managers.');
 
-DROP TABLE IF EXISTS users_users;
-CREATE TABLE users_users (
+DROP TABLE IF EXISTS `users_users`;
+CREATE TABLE `users_users` (
   `userId` int(8) NOT NULL auto_increment,
   `email` varchar(200) default NULL,
   `login` varchar(200) NOT NULL default '',
@@ -3194,8 +3194,8 @@
 INSERT INTO users_usergroups (userId, groupName) VALUES(1,'Admins');
 INSERT INTO users_grouppermissions (groupName, permName) VALUES ('Admins','tiki_p_admin');
 
-DROP TABLE IF EXISTS tiki_integrator_reps;
-CREATE TABLE tiki_integrator_reps (
+DROP TABLE IF EXISTS `tiki_integrator_reps`;
+CREATE TABLE `tiki_integrator_reps` (
   `repID` int(11) NOT NULL auto_increment,
   `name` varchar(255) NOT NULL default '',
   `path` varchar(255) NOT NULL default '',
@@ -3210,8 +3210,8 @@
 
 INSERT INTO tiki_integrator_reps VALUES ('1','Doxygened (1.3.4) Documentation','','index.html','doxygen.css','n','y','0','Use this repository as rule source for all your repositories based on doxygened docs. To setup yours just add new repository and copy rules from this repository :)');
 
-DROP TABLE IF EXISTS tiki_integrator_rules;
-CREATE TABLE tiki_integrator_rules (
+DROP TABLE IF EXISTS `tiki_integrator_rules`;
+CREATE TABLE `tiki_integrator_rules` (
   `ruleID` int(11) NOT NULL auto_increment,
   `repID` int(11) NOT NULL default '0',
   `ord` int(2) unsigned NOT NULL default '0',
@@ -3230,8 +3230,8 @@
 INSERT INTO tiki_integrator_rules VALUES ('2','1','2','img src=(\"|\')(?!http://)','img src=\1{path}/','y','n','i','y','Fix image paths');
 INSERT INTO tiki_integrator_rules VALUES ('3','1','3','href=(\"|\')(?!(#|(http|ftp)://))','href=\1tiki-integrator.php?repID={repID}&file=','y','n','i','y','Replace internal links to integrator. Don\'t touch an external link.');
 
-DROP TABLE IF EXISTS tiki_quicktags;
-CREATE TABLE tiki_quicktags (
+DROP TABLE IF EXISTS `tiki_quicktags`;
+CREATE TABLE `tiki_quicktags` (
   `tagId` int(4) unsigned NOT NULL auto_increment,
   `taglabel` varchar(255) default NULL,
   `taginsert` text,
@@ -3421,8 +3421,8 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('flash','popup_plugin_form("flash")','pics/icons/page_white_actionscript.png','forums');
 
 -- Translated objects table
-DROP TABLE IF EXISTS tiki_translated_objects;
-CREATE TABLE tiki_translated_objects (
+DROP TABLE IF EXISTS `tiki_translated_objects`;
+CREATE TABLE `tiki_translated_objects` (
   `traId` int(14) NOT NULL auto_increment,
   `type` varchar(50) NOT NULL,
   `objId` varchar(255) NOT NULL,
@@ -3431,15 +3431,15 @@
   KEY traId ( traId )
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
-DROP TABLE IF EXISTS tiki_friends;
-CREATE TABLE tiki_friends (
+DROP TABLE IF EXISTS `tiki_friends`;
+CREATE TABLE `tiki_friends` (
   `user` varchar(200) NOT NULL default '',
   `friend` varchar(200) NOT NULL default '',
   PRIMARY KEY (`user`(120),friend(120))
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_friendship_requests;
-CREATE TABLE tiki_friendship_requests (
+DROP TABLE IF EXISTS `tiki_friendship_requests`;
+CREATE TABLE `tiki_friendship_requests` (
   `userFrom` varchar(200) NOT NULL default '',
   `userTo` varchar(200) NOT NULL default '',
   `tstamp` timestamp(14) NOT NULL,
@@ -3446,8 +3446,8 @@
   PRIMARY KEY (userFrom(120),userTo(120))
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_score;
-CREATE TABLE tiki_score (
+DROP TABLE IF EXISTS `tiki_score`;
+CREATE TABLE `tiki_score` (
   event varchar(40) NOT NULL default '',
   score int(11) NOT NULL default '0',
   expiration int(11) NOT NULL default '0',
@@ -3485,8 +3485,8 @@
 INSERT INTO tiki_score (event, score, expiration) VALUES ('wiki_edit',5,0);
 INSERT INTO tiki_score (event, score, expiration) VALUES ('wiki_attach_file',3,0);
 
-DROP TABLE IF EXISTS tiki_users_score;
-CREATE TABLE tiki_users_score (
+DROP TABLE IF EXISTS `tiki_users_score`;
+CREATE TABLE `tiki_users_score` (
   `user` char(200) NOT NULL default '',
   `event_id` char(200) NOT NULL default '',
   `expire` int(14) NOT NULL default '0',
@@ -3495,14 +3495,14 @@
   KEY user (user(110),event_id(110),expire)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_file_handlers;
-CREATE TABLE tiki_file_handlers (
+DROP TABLE IF EXISTS `tiki_file_handlers`;
+CREATE TABLE `tiki_file_handlers` (
   `mime_type` varchar(64) default NULL,
   `cmd` varchar(238) default NULL
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_stats;
-CREATE TABLE tiki_stats (
+DROP TABLE IF EXISTS `tiki_stats`;
+CREATE TABLE `tiki_stats` (
   `object` varchar(255) NOT NULL default '',
   `type` varchar(20) NOT NULL default '',
   `day` int(14) NOT NULL default '0',
@@ -3510,8 +3510,8 @@
   PRIMARY KEY (object(200),type,day)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_events;
-CREATE TABLE tiki_events (
+DROP TABLE IF EXISTS `tiki_events`;
+CREATE TABLE `tiki_events` (
   `callback_type` int(1) NOT NULL default '3',
   `order` int(2) NOT NULL default '50',
   `event` varchar(200) NOT NULL default '',
@@ -3527,8 +3527,8 @@
 INSERT IGNORE INTO tiki_events(callback_type,`order`,event,file,object,method) VALUES ('5', '25', 'user_registers', 'lib/registration/registrationlib.php', 'registrationlib', 'callback_tikiwiki_send_email');
 INSERT IGNORE INTO tiki_events(callback_type,`order`,event,file,object,method) VALUES ('5', '30', 'user_registers', 'lib/registration/registrationlib.php', 'registrationlib', 'callback_tikimail_user_registers');
 
-DROP TABLE IF EXISTS tiki_registration_fields;
-CREATE TABLE tiki_registration_fields (
+DROP TABLE IF EXISTS `tiki_registration_fields`;
+CREATE TABLE `tiki_registration_fields` (
   `id` int(11) NOT NULL auto_increment,
   `field` varchar(255) NOT NULL default '',
   `name` varchar(255) default NULL,
@@ -3538,8 +3538,8 @@
   PRIMARY KEY (id)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_actionlog_conf;
-CREATE TABLE tiki_actionlog_conf (
+DROP TABLE IF EXISTS `tiki_actionlog_conf`;
+CREATE TABLE `tiki_actionlog_conf` (
   `id` int(11) NOT NULL auto_increment,
   `action` varchar(32) NOT NULL default '',
   `objectType` varchar(32) NOT NULL default '',
@@ -3586,8 +3586,8 @@
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Removed', 'file', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Viewed', 'article', 'n');
 
-DROP TABLE IF EXISTS tiki_freetags;
-CREATE TABLE tiki_freetags (
+DROP TABLE IF EXISTS `tiki_freetags`;
+CREATE TABLE `tiki_freetags` (
   `tagId` int(10) unsigned NOT NULL auto_increment,
   `tag` varchar(30) NOT NULL default '',
   `raw_tag` varchar(50) NOT NULL default '',
@@ -3595,8 +3595,8 @@
   PRIMARY KEY (tagId)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_freetagged_objects;
-CREATE TABLE tiki_freetagged_objects (
+DROP TABLE IF EXISTS `tiki_freetagged_objects`;
+CREATE TABLE `tiki_freetagged_objects` (
   `tagId` int(12) NOT NULL auto_increment,
   `objectId` int(11) NOT NULL default 0,
   `user` varchar(200) default '',
@@ -3607,8 +3607,8 @@
   KEY (objectId)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_contributions;
-CREATE TABLE tiki_contributions (
+DROP TABLE IF EXISTS `tiki_contributions`;
+CREATE TABLE `tiki_contributions` (
   `contributionId` int(12) NOT NULL auto_increment,
   `name` varchar(100) default NULL,
   `description` varchar(250) default NULL,
@@ -3615,14 +3615,14 @@
   PRIMARY KEY (contributionId)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_contributions_assigned;
-CREATE TABLE tiki_contributions_assigned (
+DROP TABLE IF EXISTS `tiki_contributions_assigned`;
+CREATE TABLE `tiki_contributions_assigned` (
   `contributionId` int(12) NOT NULL,
   `objectId` int(12) NOT NULL,
   PRIMARY KEY (objectId, contributionId)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_webmail_contacts_ext;
+DROP TABLE IF EXISTS `tiki_webmail_contacts_ext`;
 CREATE TABLE `tiki_webmail_contacts_ext` (
   `contactId` int(11) NOT NULL,
   `value` varchar(255) NOT NULL,
@@ -3631,7 +3631,7 @@
   KEY `contactId` (`contactId`)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_webmail_contacts_fields;
+DROP TABLE IF EXISTS `tiki_webmail_contacts_fields`;
 CREATE TABLE `tiki_webmail_contacts_fields` (
   `user` VARCHAR( 200 ) NOT NULL ,
   `fieldname` VARCHAR( 255 ) NOT NULL ,
@@ -3642,7 +3642,7 @@
   INDEX ( `user` )
 ) ENGINE = MyISAM ;
 
-DROP TABLE IF EXISTS tiki_pages_translation_bits;
+DROP TABLE IF EXISTS `tiki_pages_translation_bits`;
 CREATE TABLE `tiki_pages_translation_bits` (
   `translation_bit_id` int(14) NOT NULL auto_increment,
   `page_id` int(14) NOT NULL,
@@ -3656,8 +3656,8 @@
   KEY(`source_translation_bit`)
 );
 
-DROP TABLE IF EXISTS tiki_pages_changes;
-CREATE TABLE tiki_pages_changes (
+DROP TABLE IF EXISTS `tiki_pages_changes`;
+CREATE TABLE `tiki_pages_changes` (
   `page_id` int(14),
   `version` int(10),
   `segments_added` int(10),
@@ -3666,7 +3666,7 @@
   PRIMARY KEY(page_id, version)
 );
 
-DROP TABLE IF EXISTS tiki_minichat;
+DROP TABLE IF EXISTS `tiki_minichat`;
 CREATE TABLE `tiki_minichat` (
   `id` int(10) unsigned NOT NULL auto_increment,
   `channel` varchar(31),
@@ -3678,8 +3678,8 @@
   KEY `channel` (`channel`)
 );
 
-DROP TABLE IF EXISTS tiki_profile_symbols;
-CREATE TABLE tiki_profile_symbols (
+DROP TABLE IF EXISTS `tiki_profile_symbols`;
+CREATE TABLE `tiki_profile_symbols` (
   `domain` VARCHAR(50) NOT NULL,
   `profile` VARCHAR(50) NOT NULL,
   `object` VARCHAR(50) NOT NULL,
@@ -3691,7 +3691,7 @@
   INDEX(`named`)
 );
 
-DROP TABLE IF EXISTS tiki_feature;
+DROP TABLE IF EXISTS `tiki_feature`;
 CREATE TABLE `tiki_feature` (
   `feature_id` mediumint(9) NOT NULL auto_increment,
   `feature_name` varchar(150) NOT NULL,
@@ -3710,14 +3710,14 @@
   PRIMARY KEY (`feature_id`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
-DROP TABLE IF EXISTS tiki_schema;
-CREATE TABLE tiki_schema (
+DROP TABLE IF EXISTS `tiki_schema`;
+CREATE TABLE `tiki_schema` (
   `patch_name` VARCHAR(100) PRIMARY KEY,
   `install_date` TIMESTAMP
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS tiki_semantic_tokens;
-CREATE TABLE tiki_semantic_tokens (
+DROP TABLE IF EXISTS `tiki_semantic_tokens`;
+CREATE TABLE `tiki_semantic_tokens` (
   `token` VARCHAR(15) PRIMARY KEY,
   `label` VARCHAR(25) NOT NULL,
   `invert_token` VARCHAR(15)
@@ -3726,8 +3726,8 @@
 INSERT INTO tiki_semantic_tokens (token, label) VALUES('alias', 'Page Alias');
 
 
-DROP TABLE IF EXISTS tiki_webservice;
-CREATE TABLE tiki_webservice (
+DROP TABLE IF EXISTS `tiki_webservice`;
+CREATE TABLE `tiki_webservice` (
   `service` VARCHAR(25) NOT NULL PRIMARY KEY,
   `url` VARCHAR(250),
   `body` TEXT,
@@ -3735,8 +3735,8 @@
   `schema_documentation` VARCHAR(250)
 ) ENGINE=MyISAM ;
 
-DROP TABLE IF EXISTS tiki_webservice_template;
-CREATE TABLE tiki_webservice_template (
+DROP TABLE IF EXISTS `tiki_webservice_template`;
+CREATE TABLE `tiki_webservice_template` (
   `service` VARCHAR(25) NOT NULL,
   `template` VARCHAR(25) NOT NULL,
   `engine` VARCHAR(15) NOT NULL,
@@ -3746,9 +3746,9 @@
   PRIMARY KEY( service, template )
 ) ENGINE=MyISAM ;
 
-DROP TABLE IF EXISTS tiki_groupalert;
+DROP TABLE IF EXISTS `tiki_groupalert`;
 
-CREATE TABLE tiki_groupalert (
+CREATE TABLE `tiki_groupalert` (
   `groupName` varchar(255) NOT NULL default '',
   `objectType` varchar( 20 ) NOT NULL default '',
   `objectId` varchar(10) NOT NULL default '',
@@ -3860,8 +3860,8 @@
 UPDATE tiki_menu_options SET icon = '' WHERE name = 'Charts';
 UPDATE tiki_menus SET use_items_icons='y' WHERE menuId=42;
 
-DROP TABLE IF EXISTS tiki_plugin_security;
-CREATE TABLE tiki_plugin_security (
+DROP TABLE IF EXISTS `tiki_plugin_security`;
+CREATE TABLE `tiki_plugin_security` (
   `fingerprint` VARCHAR(200) NOT NULL PRIMARY KEY,
   `status` VARCHAR(10) NOT NULL,
   `approval_by` VARCHAR(200) NULL,
@@ -3895,7 +3895,7 @@
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_perspectives`;
-CREATE TABLE tiki_perspectives (
+CREATE TABLE `tiki_perspectives` (
   `perspectiveId` int NOT NULL AUTO_INCREMENT,
   `name` varchar(100) NOT NULL,
   PRIMARY KEY( perspectiveId )
@@ -3902,7 +3902,7 @@
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_perspective_preferences`;
-CREATE TABLE tiki_perspective_preferences (
+CREATE TABLE `tiki_perspective_preferences` (
   `perspectiveId` int NOT NULL,
   `pref` varchar(40) NOT NULL,
   `value` text,

------------------------------------------------------------------------
r20434 | sylvieg | 2009-07-30 20:03:03 -0400 (qui, 30 jul 2009) | 1 line

[MOD]newsletter: new perm tiki_p_list_newsletters

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20433)
+++ tiki.sql	(revision 20434)
@@ -1530,6 +1530,7 @@
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (105,42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_subscribe_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (106,42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_send_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (107,42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_admin_newsletters','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (107,42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_list_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (108,42,'o','Send Newsletters','tiki-send_newsletters.php',905,'feature_newsletters','tiki_p_send_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (109,42,'o','Admin Newsletters','tiki-admin_newsletters.php',910,'feature_newsletters','tiki_p_admin_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (112,42,'s','Charts','tiki-charts.php',1000,'feature_charts','tiki_p_view_chart','',0);
@@ -2959,6 +2960,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_send_newsletters', 'Can send newsletters', 'editors', 'newsletters');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_subscribe_email', 'Can subscribe any email to newsletters', 'editors', 'newsletters');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_subscribe_newsletters', 'Can subscribe to newsletters', 'basic', 'newsletters');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_newsletters', 'Can list newsletters', 'basic', 'newsletters');
 
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_polls','Can admin polls', 'admin', 'polls', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_poll_results', 'Can view poll results', 'basic', 'polls');

------------------------------------------------------------------------
r20433 | kissaki | 2009-07-30 19:02:21 -0400 (qui, 30 jul 2009) | 2 lines

pgsql conversation script updated â getting closer
base sql still missing `

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20432)
+++ tiki.sql	(revision 20433)
@@ -101,7 +101,7 @@
   `pId` int(14) NOT NULL default '0',
   `roleId` int(14) NOT NULL auto_increment,
   `user` varchar(200) NOT NULL default '',
-  PRIMARY KEY (roleId, user)
+  PRIMARY KEY (`roleId`, `user`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS galaxia_workitems;

------------------------------------------------------------------------
r20430 | kissaki | 2009-07-30 16:29:02 -0400 (qui, 30 jul 2009) | 2 lines

add ` to table and column names to ease conversion and make it explicit
more work on pgsql script

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20429)
+++ tiki.sql	(revision 20430)
@@ -2,138 +2,138 @@
 -- Database : tikiwiki
 -- --------------------------------------------------------
 
-DROP TABLE IF EXISTS galaxia_activities;
-CREATE TABLE galaxia_activities (
-  activityId int(14) NOT NULL auto_increment,
-  name varchar(80) default NULL,
-  normalized_name varchar(80) default NULL,
-  pId int(14) NOT NULL default '0',
-  type enum('start','end','split','switch','join','activity','standalone') default NULL,
-  isAutoRouted char(1) default NULL,
-  flowNum int(10) default NULL,
-  isInteractive char(1) default NULL,
-  lastModif int(14) default NULL,
-  description text,
-  expirationTime int(6) unsigned NOT NULL default '0',
+DROP TABLE IF EXISTS `galaxia_activities`;
+CREATE TABLE `galaxia_activities` (
+  `activityId` int(14) NOT NULL auto_increment,
+  `name` varchar(80) default NULL,
+  `normalized_name` varchar(80) default NULL,
+  `pId` int(14) NOT NULL default '0',
+  `type` enum('start','end','split','switch','join','activity','standalone') default NULL,
+  `isAutoRouted` char(1) default NULL,
+  `flowNum` int(10) default NULL,
+  `isInteractive` char(1) default NULL,
+  `lastModif` int(14) default NULL,
+  `description` text,
+  `expirationTime` int(6) unsigned NOT NULL default '0',
   PRIMARY KEY (activityId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS galaxia_activity_roles;
-CREATE TABLE galaxia_activity_roles (
-  activityId int(14) NOT NULL default '0',
-  roleId int(14) NOT NULL default '0',
+DROP TABLE IF EXISTS `galaxia_activity_roles`;
+CREATE TABLE `galaxia_activity_roles` (
+  `activityId` int(14) NOT NULL default '0',
+  `roleId` int(14) NOT NULL default '0',
   PRIMARY KEY (activityId,roleId)
 ) ENGINE=MyISAM;
 
-DROP TABLE IF EXISTS galaxia_instance_activities;
-CREATE TABLE galaxia_instance_activities (
-  instanceId int(14) NOT NULL default '0',
-  activityId int(14) NOT NULL default '0',
-  started int(14) NOT NULL default '0',
-  ended int(14) NOT NULL default '0',
-  user varchar(200) default '',
-  status enum('running','completed') default NULL,
+DROP TABLE IF EXISTS `galaxia_instance_activities`;
+CREATE TABLE `galaxia_instance_activities` (
+  `instanceId` int(14) NOT NULL default '0',
+  `activityId` int(14) NOT NULL default '0',
+  `started` int(14) NOT NULL default '0',
+  `ended` int(14) NOT NULL default '0',
+  `user` varchar(200) default '',
+  `status` enum('running','completed') default NULL,
   PRIMARY KEY (instanceId,activityId)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS galaxia_instance_comments;
 CREATE TABLE galaxia_instance_comments (
-  cId int(14) NOT NULL auto_increment,
-  instanceId int(14) NOT NULL default '0',
-  user varchar(200) default '',
-  activityId int(14) default NULL,
-  hash varchar(34) default NULL,
-  title varchar(250) default NULL,
-  comment text,
-  activity varchar(80) default NULL,
-  timestamp int(14) default NULL,
+  `cId` int(14) NOT NULL auto_increment,
+  `instanceId` int(14) NOT NULL default '0',
+  `user` varchar(200) default '',
+  `activityId` int(14) default NULL,
+  `hash` varchar(34) default NULL,
+  `title` varchar(250) default NULL,
+  `comment` text,
+  `activity` varchar(80) default NULL,
+  `timestamp` int(14) default NULL,
   PRIMARY KEY (cId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS galaxia_instances;
-CREATE TABLE galaxia_instances (
-  instanceId int(14) NOT NULL auto_increment,
-  pId int(14) NOT NULL default '0',
-  started int(14) default NULL,
-  name varchar(200) NOT NULL default 'No Name',
-  owner varchar(200) default NULL,
-  nextActivity int(14) default NULL,
-  nextUser varchar(200) default NULL,
-  ended int(14) default NULL,
-  status enum('active','exception','aborted','completed') default NULL,
-  properties longblob,
+DROP TABLE IF EXISTS `galaxia_instances`;
+CREATE TABLE `galaxia_instances` (
+  `instanceId` int(14) NOT NULL auto_increment,
+  `pId` int(14) NOT NULL default '0',
+  `started` int(14) default NULL,
+  `name` varchar(200) NOT NULL default 'No Name',
+  `owner` varchar(200) default NULL,
+  `nextActivity` int(14) default NULL,
+  `nextUser` varchar(200) default NULL,
+  `ended` int(14) default NULL,
+  `status` enum('active','exception','aborted','completed') default NULL,
+  `properties` longblob,
   PRIMARY KEY (instanceId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS galaxia_processes;
-CREATE TABLE galaxia_processes (
-  pId int(14) NOT NULL auto_increment,
-  name varchar(80) default NULL,
-  isValid char(1) default NULL,
-  isActive char(1) default NULL,
-  version varchar(12) default NULL,
-  description text,
-  lastModif int(14) default NULL,
-  normalized_name varchar(80) default NULL,
+DROP TABLE IF EXISTS `galaxia_processes`;
+CREATE TABLE `galaxia_processes` (
+  `pId` int(14) NOT NULL auto_increment,
+  `name` varchar(80) default NULL,
+  `isValid` char(1) default NULL,
+  `isActive` char(1) default NULL,
+  `version` varchar(12) default NULL,
+  `description` text,
+  `lastModif` int(14) default NULL,
+  `normalized_name` varchar(80) default NULL,
   PRIMARY KEY (pId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS galaxia_roles;
 CREATE TABLE galaxia_roles (
-  roleId int(14) NOT NULL auto_increment,
-  pId int(14) NOT NULL default '0',
-  lastModif int(14) default NULL,
-  name varchar(80) default NULL,
-  description text,
+  `roleId` int(14) NOT NULL auto_increment,
+  `pId` int(14) NOT NULL default '0',
+  `lastModif` int(14) default NULL,
+  `name` varchar(80) default NULL,
+  `description` text,
   PRIMARY KEY (roleId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS galaxia_transitions;
 CREATE TABLE galaxia_transitions (
-  pId int(14) NOT NULL default '0',
-  actFromId int(14) NOT NULL default '0',
-  actToId int(14) NOT NULL default '0',
+  `pId` int(14) NOT NULL default '0',
+  `actFromId` int(14) NOT NULL default '0',
+  `actToId` int(14) NOT NULL default '0',
   PRIMARY KEY (actFromId,actToId)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS galaxia_user_roles;
 CREATE TABLE galaxia_user_roles (
-  pId int(14) NOT NULL default '0',
-  roleId int(14) NOT NULL auto_increment,
-  user varchar(200) NOT NULL default '',
-  PRIMARY KEY (roleId,user)
+  `pId` int(14) NOT NULL default '0',
+  `roleId` int(14) NOT NULL auto_increment,
+  `user` varchar(200) NOT NULL default '',
+  PRIMARY KEY (roleId, user)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS galaxia_workitems;
 CREATE TABLE galaxia_workitems (
-  itemId int(14) NOT NULL auto_increment,
-  instanceId int(14) NOT NULL default '0',
-  orderId int(14) NOT NULL default '0',
-  activityId int(14) NOT NULL default '0',
-  properties longblob,
-  started int(14) default NULL,
-  ended int(14) default NULL,
-  user varchar(200) default '',
+  `itemId` int(14) NOT NULL auto_increment,
+  `instanceId` int(14) NOT NULL default '0',
+  `orderId` int(14) NOT NULL default '0',
+  `activityId` int(14) NOT NULL default '0',
+  `properties` longblob,
+  `started` int(14) default NULL,
+  `ended` int(14) default NULL,
+  `user` varchar(200) default '',
   PRIMARY KEY (itemId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS messu_messages;
 CREATE TABLE messu_messages (
-  msgId int(14) NOT NULL auto_increment,
-  user varchar(200) NOT NULL default '',
-  user_from varchar(200) NOT NULL default '',
-  user_to text,
-  user_cc text,
-  user_bcc text,
-  subject varchar(255) default NULL,
-  body text,
-  hash varchar(32) default NULL,
-  replyto_hash varchar(32) default NULL,
-  date int(14) default NULL,
-  isRead char(1) default NULL,
-  isReplied char(1) default NULL,
-  isFlagged char(1) default NULL,
-  priority int(2) default NULL,
+  `msgId` int(14) NOT NULL auto_increment,
+  `user` varchar(200) NOT NULL default '',
+  `user_from` varchar(200) NOT NULL default '',
+  `user_to` text,
+  `user_cc` text,
+  `user_bcc` text,
+  `subject` varchar(255) default NULL,
+  `body` text,
+  `hash` varchar(32) default NULL,
+  `replyto_hash` varchar(32) default NULL,
+  `date` int(14) default NULL,
+  `isRead` char(1) default NULL,
+  `isReplied` char(1) default NULL,
+  `isFlagged` char(1) default NULL,
+  `priority` int(2) default NULL,
   PRIMARY KEY (msgId),
   KEY userIsRead (user, isRead)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -140,50 +140,50 @@
 
 DROP TABLE IF EXISTS messu_archive;
 CREATE TABLE messu_archive (
-  msgId int(14) NOT NULL auto_increment,
-  user varchar(40) NOT NULL default '',
-  user_from varchar(40) NOT NULL default '',
-  user_to text,
-  user_cc text,
-  user_bcc text,
-  subject varchar(255) default NULL,
-  body text,
-  hash varchar(32) default NULL,
-  replyto_hash varchar(32) default NULL,
-  date int(14) default NULL,
-  isRead char(1) default NULL,
-  isReplied char(1) default NULL,
-  isFlagged char(1) default NULL,
-  priority int(2) default NULL,
+  `msgId` int(14) NOT NULL auto_increment,
+  `user` varchar(40) NOT NULL default '',
+  `user_from` varchar(40) NOT NULL default '',
+  `user_to` text,
+  `user_cc` text,
+  `user_bcc` text,
+  `subject` varchar(255) default NULL,
+  `body` text,
+  `hash` varchar(32) default NULL,
+  `replyto_hash` varchar(32) default NULL,
+  `date` int(14) default NULL,
+  `isRead` char(1) default NULL,
+  `isReplied` char(1) default NULL,
+  `isFlagged` char(1) default NULL,
+  `priority` int(2) default NULL,
   PRIMARY KEY (msgId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS messu_sent;
 CREATE TABLE messu_sent (
-  msgId int(14) NOT NULL auto_increment,
-  user varchar(40) NOT NULL default '',
-  user_from varchar(40) NOT NULL default '',
-  user_to text,
-  user_cc text,
-  user_bcc text,
-  subject varchar(255) default NULL,
-  body text,
-  hash varchar(32) default NULL,
-  replyto_hash varchar(32) default NULL,
-  date int(14) default NULL,
-  isRead char(1) default NULL,
-  isReplied char(1) default NULL,
-  isFlagged char(1) default NULL,
-  priority int(2) default NULL,
+  `msgId` int(14) NOT NULL auto_increment,
+  `user` varchar(40) NOT NULL default '',
+  `user_from` varchar(40) NOT NULL default '',
+  `user_to` text,
+  `user_cc` text,
+  `user_bcc` text,
+  `subject` varchar(255) default NULL,
+  `body` text,
+  `hash` varchar(32) default NULL,
+  `replyto_hash` varchar(32) default NULL,
+  `date` int(14) default NULL,
+  `isRead` char(1) default NULL,
+  `isReplied` char(1) default NULL,
+  `isFlagged` char(1) default NULL,
+  `priority` int(2) default NULL,
   PRIMARY KEY (msgId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS sessions;
 CREATE TABLE sessions(
-  sesskey char(32) NOT NULL,
-  expiry int(11) unsigned NOT NULL,
-  expireref varchar(64),
-  data text NOT NULL,
+  `sesskey` char(32) NOT NULL,
+  `expiry` int(11) unsigned NOT NULL,
+  `expireref` varchar(64),
+  `data` text NOT NULL,
   PRIMARY KEY (sesskey),
   KEY expiry (expiry)
 ) ENGINE=MyISAM;
@@ -190,15 +190,15 @@
 
 DROP TABLE IF EXISTS tiki_actionlog;
 CREATE TABLE tiki_actionlog (
-  actionId int(8) NOT NULL auto_increment,
-  action varchar(255) NOT NULL default '',
-  lastModif int(14) default NULL,
-  object varchar(255) default NULL,
-  objectType varchar(32) NOT NULL default '',
-  user varchar(200) default '',
-  ip varchar(15) default NULL,
-  comment varchar(200) default NULL,
-  categId int(12) NOT NULL default '0',
+  `actionId` int(8) NOT NULL auto_increment,
+  `action` varchar(255) NOT NULL default '',
+  `lastModif` int(14) default NULL,
+  `object` varchar(255) default NULL,
+  `objectType` varchar(32) NOT NULL default '',
+  `user` varchar(200) default '',
+  `ip` varchar(15) default NULL,
+  `comment` varchar(200) default NULL,
+  `categId` int(12) NOT NULL default '0',
   PRIMARY KEY (actionId),
   KEY lastModif(lastModif),
   KEY object(object(100), objectType, action(100))
@@ -206,47 +206,47 @@
 
 DROP TABLE IF EXISTS tiki_actionlog_params;
 CREATE TABLE tiki_actionlog_params (
-  actionId int(8) NOT NULL,
-  name varchar(40) NOT NULL,
-  value text,
-  KEY (actionId),
+  `actionId` int(8) NOT NULL,
+  `name` varchar(40) NOT NULL,
+  `value` text,
+  KEY actionIDIndex (actionId),
   KEY nameValue (name, value(200))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_articles;
 CREATE TABLE tiki_articles (
-  articleId int(8) NOT NULL auto_increment,
-  topline varchar(255) default NULL,
-  title varchar(255) default NULL,
-  subtitle varchar(255) default NULL,
-  linkto varchar(255) default NULL,
-  lang varchar(16) default NULL,
-  state char(1) default 's',
-  authorName varchar(60) default NULL,
-  topicId int(14) default NULL,
-  topicName varchar(40) default NULL,
-  size int(12) default NULL,
-  useImage char(1) default NULL,
-  image_name varchar(80) default NULL,
-  image_caption text default NULL,
-  image_type varchar(80) default NULL,
-  image_size int(14) default NULL,
-  image_x int(4) default NULL,
-  image_y int(4) default NULL,
-  image_data longblob,
-  publishDate int(14) default NULL,
-  expireDate int(14) default NULL,
-  created int(14) default NULL,
-  heading text,
-  body text,
-  hash varchar(32) default NULL,
-  author varchar(200) default NULL,
-  nbreads int(14) default NULL,
-  votes int(8) default NULL,
-  points int(14) default NULL,
-  type varchar(50) default NULL,
-  rating decimal(3,2) default NULL,
-  isfloat char(1) default NULL,
+  `articleId` int(8) NOT NULL auto_increment,
+  `topline` varchar(255) default NULL,
+  `title` varchar(255) default NULL,
+  `subtitle` varchar(255) default NULL,
+  `linkto` varchar(255) default NULL,
+  `lang` varchar(16) default NULL,
+  `state` char(1) default 's',
+  `authorName` varchar(60) default NULL,
+  `topicId` int(14) default NULL,
+  `topicName` varchar(40) default NULL,
+  `size` int(12) default NULL,
+  `useImage` char(1) default NULL,
+  `image_name` varchar(80) default NULL,
+  `image_caption` text default NULL,
+  `image_type` varchar(80) default NULL,
+  `image_size` int(14) default NULL,
+  `image_x` int(4) default NULL,
+  `image_y` int(4) default NULL,
+  `image_data` longblob,
+  `publishDate` int(14) default NULL,
+  `expireDate` int(14) default NULL,
+  `created` int(14) default NULL,
+  `heading` text,
+  `body` text,
+  `hash` varchar(32) default NULL,
+  `author` varchar(200) default NULL,
+  `nbreads` int(14) default NULL,
+  `votes` int(8) default NULL,
+  `points` int(14) default NULL,
+  `type` varchar(50) default NULL,
+  `rating` decimal(3,2) default NULL,
+  `isfloat` char(1) default NULL,
   PRIMARY KEY (articleId),
   KEY title (title),
   KEY heading (heading(255)),
@@ -262,26 +262,26 @@
 
 DROP TABLE IF EXISTS tiki_article_types;
 CREATE TABLE tiki_article_types (
-  type varchar(50) NOT NULL,
-  use_ratings varchar(1) default NULL,
-  show_pre_publ varchar(1) default NULL,
-  show_post_expire varchar(1) default 'y',
-  heading_only varchar(1) default NULL,
-  allow_comments varchar(1) default 'y',
-  show_image varchar(1) default 'y',
-  show_avatar varchar(1) default NULL,
-  show_author varchar(1) default 'y',
-  show_pubdate varchar(1) default 'y',
-  show_expdate varchar(1) default NULL,
-  show_reads varchar(1) default 'y',
-  show_size varchar(1) default 'n',
-  show_topline varchar(1) default 'n',
-  show_subtitle varchar(1) default 'n',
-  show_linkto varchar(1) default 'n',
-  show_image_caption varchar(1) default 'n',
-  show_lang varchar(1) default 'n',
-  creator_edit varchar(1) default NULL,
-  comment_can_rate_article char(1) default NULL,
+  `type` varchar(50) NOT NULL,
+  `use_ratings` varchar(1) default NULL,
+  `show_pre_publ` varchar(1) default NULL,
+  `show_post_expire` varchar(1) default 'y',
+  `heading_only` varchar(1) default NULL,
+  `allow_comments` varchar(1) default 'y',
+  `show_image` varchar(1) default 'y',
+  `show_avatar` varchar(1) default NULL,
+  `show_author` varchar(1) default 'y',
+  `show_pubdate` varchar(1) default 'y',
+  `show_expdate` varchar(1) default NULL,
+  `show_reads` varchar(1) default 'y',
+  `show_size` varchar(1) default 'n',
+  `show_topline` varchar(1) default 'n',
+  `show_subtitle` varchar(1) default 'n',
+  `show_linkto` varchar(1) default 'n',
+  `show_image_caption` varchar(1) default 'n',
+  `show_lang` varchar(1) default 'n',
+  `creator_edit` varchar(1) default NULL,
+  `comment_can_rate_article` char(1) default NULL,
   PRIMARY KEY (type),
   KEY show_pre_publ (show_pre_publ),
   KEY show_post_expire (show_post_expire)
@@ -294,37 +294,37 @@
 
 DROP TABLE IF EXISTS tiki_banners;
 CREATE TABLE tiki_banners (
-  bannerId int(12) NOT NULL auto_increment,
-  client varchar(200) NOT NULL default '',
-  url varchar(255) default NULL,
-  title varchar(255) default NULL,
-  alt varchar(250) default NULL,
-  which varchar(50) default NULL,
-  imageData longblob,
-  imageType varchar(200) default NULL,
-  imageName varchar(100) default NULL,
-  HTMLData text,
-  fixedURLData varchar(255) default NULL,
-  textData text,
-  fromDate int(14) default NULL,
-  toDate int(14) default NULL,
-  useDates char(1) default NULL,
-  mon char(1) default NULL,
-  tue char(1) default NULL,
-  wed char(1) default NULL,
-  thu char(1) default NULL,
-  fri char(1) default NULL,
-  sat char(1) default NULL,
-  sun char(1) default NULL,
-  hourFrom varchar(4) default NULL,
-  hourTo varchar(4) default NULL,
-  created int(14) default NULL,
-  maxImpressions int(8) default NULL,
-  impressions int(8) default NULL,
-  maxUserImpressions int(8) default -1,
-  maxClicks int(8) default NULL,
-  clicks int(8) default NULL,
-  zone varchar(40) default NULL,
+  `bannerId` int(12) NOT NULL auto_increment,
+  `client` varchar(200) NOT NULL default '',
+  `url` varchar(255) default NULL,
+  `title` varchar(255) default NULL,
+  `alt` varchar(250) default NULL,
+  `which` varchar(50) default NULL,
+  `imageData` longblob,
+  `imageType` varchar(200) default NULL,
+  `imageName` varchar(100) default NULL,
+  `HTMLData` text,
+  `fixedURLData` varchar(255) default NULL,
+  `textData` text,
+  `fromDate` int(14) default NULL,
+  `toDate` int(14) default NULL,
+  `useDates` char(1) default NULL,
+  `mon` char(1) default NULL,
+  `tue` char(1) default NULL,
+  `wed` char(1) default NULL,
+  `thu` char(1) default NULL,
+  `fri` char(1) default NULL,
+  `sat` char(1) default NULL,
+  `sun` char(1) default NULL,
+  `hourFrom` varchar(4) default NULL,
+  `hourTo` varchar(4) default NULL,
+  `created` int(14) default NULL,
+  `maxImpressions` int(8) default NULL,
+  `impressions` int(8) default NULL,
+  `maxUserImpressions` int(8) default -1,
+  `maxClicks` int(8) default NULL,
+  `clicks` int(8) default NULL,
+  `zone` varchar(40) default NULL,
   PRIMARY KEY (bannerId),
   INDEX ban1(zone,useDates,impressions,maxImpressions,hourFrom,hourTo,fromDate,toDate,mon,tue,wed,thu,fri,sat,sun)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -331,49 +331,49 @@
 
 DROP TABLE IF EXISTS tiki_banning;
 CREATE TABLE tiki_banning (
-  banId int(12) NOT NULL auto_increment,
-  mode enum('user','ip') default NULL,
-  title varchar(200) default NULL,
-  ip1 char(3) default NULL,
-  ip2 char(3) default NULL,
-  ip3 char(3) default NULL,
-  ip4 char(3) default NULL,
-  user varchar(200) default '',
-  date_from timestamp(14) NOT NULL,
-  date_to timestamp(14) NOT NULL,
-  use_dates char(1) default NULL,
-  created int(14) default NULL,
-  message text,
+  `banId` int(12) NOT NULL auto_increment,
+  `mode` enum('user','ip') default NULL,
+  `title` varchar(200) default NULL,
+  `ip1` char(3) default NULL,
+  `ip2` char(3) default NULL,
+  `ip3` char(3) default NULL,
+  `ip4` char(3) default NULL,
+  `user` varchar(200) default '',
+  `date_from` timestamp(14) NOT NULL,
+  `date_to` timestamp(14) NOT NULL,
+  `use_dates` char(1) default NULL,
+  `created` int(14) default NULL,
+  `message` text,
   PRIMARY KEY (banId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_banning_sections;
 CREATE TABLE tiki_banning_sections (
-  banId int(12) NOT NULL default '0',
-  section varchar(100) NOT NULL default '',
+  `banId` int(12) NOT NULL default '0',
+  `section` varchar(100) NOT NULL default '',
   PRIMARY KEY (banId,section)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_blog_activity;
 CREATE TABLE tiki_blog_activity (
-  blogId int(8) NOT NULL default '0',
-  day int(14) NOT NULL default '0',
-  posts int(8) default NULL,
+  `blogId` int(8) NOT NULL default '0',
+  `day` int(14) NOT NULL default '0',
+  `posts` int(8) default NULL,
   PRIMARY KEY (blogId,day)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_blog_posts;
 CREATE TABLE tiki_blog_posts (
-  postId int(8) NOT NULL auto_increment,
-  blogId int(8) NOT NULL default '0',
-  data text,
-  data_size int(11) unsigned NOT NULL default '0',
-  created int(14) default NULL,
-  user varchar(200) default '',
-  trackbacks_to text,
-  trackbacks_from text,
-  title varchar(255) default NULL,
-  priv varchar(1) default NULL,
+  `postId` int(8) NOT NULL auto_increment,
+  `blogId` int(8) NOT NULL default '0',
+  `data` text,
+  `data_size` int(11) unsigned NOT NULL default '0',
+  `created` int(14) default NULL,
+  `user` varchar(200) default '',
+  `trackbacks_to` text,
+  `trackbacks_from` text,
+  `title` varchar(255) default NULL,
+  `priv` varchar(1) default NULL,
   PRIMARY KEY (postId),
   KEY data (data(255)),
   KEY blogId (blogId),
@@ -383,35 +383,35 @@
 
 DROP TABLE IF EXISTS tiki_blog_posts_images;
 CREATE TABLE tiki_blog_posts_images (
-  imgId int(14) NOT NULL auto_increment,
-  postId int(14) NOT NULL default '0',
-  filename varchar(80) default NULL,
-  filetype varchar(80) default NULL,
-  filesize int(14) default NULL,
-  data longblob,
+  `imgId` int(14) NOT NULL auto_increment,
+  `postId` int(14) NOT NULL default '0',
+  `filename` varchar(80) default NULL,
+  `filetype` varchar(80) default NULL,
+  `filesize` int(14) default NULL,
+  `data` longblob,
   PRIMARY KEY (imgId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_blogs;
 CREATE TABLE tiki_blogs (
-  blogId int(8) NOT NULL auto_increment,
-  created int(14) default NULL,
-  lastModif int(14) default NULL,
-  title varchar(200) default NULL,
-  description text,
-  user varchar(200) default '',
-  public char(1) default NULL,
-  posts int(8) default NULL,
-  maxPosts int(8) default NULL,
-  hits int(8) default NULL,
-  activity decimal(4,2) default NULL,
-  heading text,
-  use_find char(1) default NULL,
-  use_title char(1) default NULL,
-  add_date char(1) default NULL,
-  add_poster char(1) default NULL,
-  allow_comments char(1) default NULL,
-  show_avatar char(1) default NULL,
+  `blogId` int(8) NOT NULL auto_increment,
+  `created` int(14) default NULL,
+  `lastModif` int(14) default NULL,
+  `title` varchar(200) default NULL,
+  `description` text,
+  `user` varchar(200) default '',
+  `public` char(1) default NULL,
+  `posts` int(8) default NULL,
+  `maxPosts` int(8) default NULL,
+  `hits` int(8) default NULL,
+  `activity` decimal(4,2) default NULL,
+  `heading` text,
+  `use_find` char(1) default NULL,
+  `use_title` char(1) default NULL,
+  `add_date` char(1) default NULL,
+  `add_poster` char(1) default NULL,
+  `allow_comments` char(1) default NULL,
+  `show_avatar` char(1) default NULL,
   PRIMARY KEY (blogId),
   KEY title (title),
   KEY description (description(255)),
@@ -421,9 +421,9 @@
 
 DROP TABLE IF EXISTS tiki_calendar_categories;
 CREATE TABLE tiki_calendar_categories (
-  calcatId int(11) NOT NULL auto_increment,
-  calendarId int(14) NOT NULL default '0',
-  name varchar(255) NOT NULL default '',
+  `calcatId` int(11) NOT NULL auto_increment,
+  `calendarId` int(14) NOT NULL default '0',
+  `name` varchar(255) NOT NULL default '',
   PRIMARY KEY (calcatId),
   UNIQUE KEY catname (calendarId,name(16))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -430,71 +430,71 @@
 
 DROP TABLE IF EXISTS tiki_calendar_recurrence;
 CREATE TABLE tiki_calendar_recurrence (
-  recurrenceId int(14) NOT NULL auto_increment,
-  calendarId int(14) NOT NULL default '0',
-  start int(4) NOT NULL default '0',
-  end int(4) NOT NULL default '2359',
-  allday tinyint(1) NOT NULL default '0',
-  locationId int(14) default NULL,
-  categoryId int(14) default NULL,
-  nlId int(12) NOT NULL default '0',
-  priority enum('1','2','3','4','5','6','7','8','9') NOT NULL default '1',
-  status enum('0','1','2') NOT NULL default '0',
-  url varchar(255) default NULL,
-  lang char(16) NOT NULL default 'en',
-  name varchar(255) NOT NULL default '',
-  description blob,
-  weekly tinyint(1) default '0',
-  weekday tinyint(1),
-  monthly tinyint(1) default '0',
-  dayOfMonth int(2),
-  yearly tinyint(1) default '0',
-  dateOfYear int(4),
-  nbRecurrences int(8),
-  startPeriod int(14),
-  endPeriod int(14),
-  user varchar(200) default '',
-  created int(14) NOT NULL default '0',
-  lastmodif int(14) NOT NULL default '0',
+  `recurrenceId` int(14) NOT NULL auto_increment,
+  `calendarId` int(14) NOT NULL default '0',
+  `start` int(4) NOT NULL default '0',
+  `end` int(4) NOT NULL default '2359',
+  `allday` tinyint(1) NOT NULL default '0',
+  `locationId` int(14) default NULL,
+  `categoryId` int(14) default NULL,
+  `nlId` int(12) NOT NULL default '0',
+  `priority` enum('1','2','3','4','5','6','7','8','9') NOT NULL default '1',
+  `status` enum('0','1','2') NOT NULL default '0',
+  `url` varchar(255) default NULL,
+  `lang` char(16) NOT NULL default 'en',
+  `name` varchar(255) NOT NULL default '',
+  `description` blob,
+  `weekly` tinyint(1) default '0',
+  `weekday` tinyint(1),
+  `monthly` tinyint(1) default '0',
+  `dayOfMonth` int(2),
+  `yearly` tinyint(1) default '0',
+  `dateOfYear` int(4),
+  `nbRecurrences` int(8),
+  `startPeriod` int(14),
+  `endPeriod` int(14),
+  `user` varchar(200) default '',
+  `created` int(14) NOT NULL default '0',
+  `lastmodif` int(14) NOT NULL default '0',
   PRIMARY KEY (recurrenceId),
   KEY calendarId (calendarId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS tiki_calendar_items;
-CREATE TABLE tiki_calendar_items (
-  calitemId int(14) NOT NULL auto_increment,
-  calendarId int(14) NOT NULL default '0',
-  start int(14) NOT NULL default '0',
-  end int(14) NOT NULL default '0',
-  locationId int(14) default NULL,
-  categoryId int(14) default NULL,
-  nlId int(12) NOT NULL default '0',
-  priority enum('0', '1','2','3','4','5','6','7','8','9') default '0',
-  status enum('0','1','2') NOT NULL default '0',
-  url varchar(255) default NULL,
-  lang char(16) NOT NULL default 'en',
-  name varchar(255) NOT NULL default '',
-  description text,
-  recurrenceId int(14),
-  changed tinyint(1) DEFAULT '0',
-  user varchar(200) default '',
-  created int(14) NOT NULL default '0',
-  lastmodif int(14) NOT NULL default '0',
-  allday tinyint(1) NOT NULL default '0',
+DROP TABLE IF EXISTS `tiki_calendar_items`;
+CREATE TABLE `tiki_calendar_items` (
+  `calitemId` int(14) NOT NULL auto_increment,
+  `calendarId` int(14) NOT NULL default '0',
+  `start` int(14) NOT NULL default '0',
+  `end` int(14) NOT NULL default '0',
+  `locationId` int(14) default NULL,
+  `categoryId` int(14) default NULL,
+  `nlId` int(12) NOT NULL default '0',
+  `priority` enum('0', '1','2','3','4','5','6','7','8','9') default '0',
+  `status` enum('0','1','2') NOT NULL default '0',
+  `url` varchar(255) default NULL,
+  `lang` char(16) NOT NULL default 'en',
+  `name` varchar(255) NOT NULL default '',
+  `description` text,
+  `recurrenceId` int(14),
+  `changed` tinyint(1) DEFAULT '0',
+  `user` varchar(200) default '',
+  `created` int(14) NOT NULL default '0',
+  `lastmodif` int(14) NOT NULL default '0',
+  `allday` tinyint(1) NOT NULL default '0',
   PRIMARY KEY (calitemId),
   KEY calendarId (calendarId),
-  FULLTEXT KEY ft (name,description),
-  CONSTRAINT fk_calitems_recurrence
-	FOREIGN KEY (recurrenceId) REFERENCES tiki_calendar_recurrence(recurrenceId)
+  FULLTEXT KEY ft (`name`,`description`),
+  CONSTRAINT `fk_calitems_recurrence`
+	FOREIGN KEY (`recurrenceId`) REFERENCES `tiki_calendar_recurrence`(`recurrenceId`)
 	ON UPDATE CASCADE ON DELETE SET NULL
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_calendar_locations;
 CREATE TABLE tiki_calendar_locations (
-  callocId int(14) NOT NULL auto_increment,
-  calendarId int(14) NOT NULL default '0',
-  name varchar(255) NOT NULL default '',
-  description blob,
+  `callocId` int(14) NOT NULL auto_increment,
+  `calendarId` int(14) NOT NULL default '0',
+  `name` varchar(255) NOT NULL default '',
+  `description` blob,
   PRIMARY KEY (callocId),
   UNIQUE KEY locname (calendarId,name(16))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -501,28 +501,28 @@
 
 DROP TABLE IF EXISTS tiki_calendar_roles;
 CREATE TABLE tiki_calendar_roles (
-  calitemId int(14) NOT NULL default '0',
-  username varchar(200) NOT NULL default '',
-  role enum('0','1','2','3','6') NOT NULL default '0',
+  `calitemId` int(14) NOT NULL default '0',
+  `username` varchar(200) NOT NULL default '',
+  `role` enum('0','1','2','3','6') NOT NULL default '0',
   PRIMARY KEY (calitemId,username(16),role)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_calendars;
 CREATE TABLE tiki_calendars (
-  calendarId int(14) NOT NULL auto_increment,
-  name varchar(80) NOT NULL default '',
-  description varchar(255) default NULL,
-  user varchar(200) NOT NULL default '',
-  customlocations enum('n','y') NOT NULL default 'n',
-  customcategories enum('n','y') NOT NULL default 'n',
-  customlanguages enum('n','y') NOT NULL default 'n',
-  custompriorities enum('n','y') NOT NULL default 'n',
-  customparticipants enum('n','y') NOT NULL default 'n',
-  customsubscription enum('n','y') NOT NULL default 'n',
-  customstatus enum('n','y') NOT NULL default 'y',
-  created int(14) NOT NULL default '0',
-  lastmodif int(14) NOT NULL default '0',
-  personal enum ('n', 'y') NOT NULL default 'n',
+  `calendarId` int(14) NOT NULL auto_increment,
+  `name` varchar(80) NOT NULL default '',
+  `description` varchar(255) default NULL,
+  `user` varchar(200) NOT NULL default '',
+  `customlocations` enum('n','y') NOT NULL default 'n',
+  `customcategories` enum('n','y') NOT NULL default 'n',
+  `customlanguages` enum('n','y') NOT NULL default 'n',
+  `custompriorities` enum('n','y') NOT NULL default 'n',
+  `customparticipants` enum('n','y') NOT NULL default 'n',
+  `customsubscription` enum('n','y') NOT NULL default 'n',
+  `customstatus` enum('n','y') NOT NULL default 'y',
+  `created` int(14) NOT NULL default '0',
+  `lastmodif` int(14) NOT NULL default '0',
+  `personal` enum ('n', 'y') NOT NULL default 'n',
   PRIMARY KEY (calendarId)
 ) ENGINE=MyISAM ;
 
@@ -536,25 +536,25 @@
 
 DROP TABLE IF EXISTS tiki_categories;
 CREATE TABLE tiki_categories (
-  categId int(12) NOT NULL auto_increment,
-  name varchar(100) default NULL,
-  description varchar(250) default NULL,
-  parentId int(12) default NULL,
-  hits int(8) default NULL,
+  `categId` int(12) NOT NULL auto_increment,
+  `name` varchar(100) default NULL,
+  `description` varchar(250) default NULL,
+  `parentId` int(12) default NULL,
+  `hits` int(8) default NULL,
   PRIMARY KEY (categId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_objects;
 CREATE TABLE tiki_objects (
-  objectId int(12) NOT NULL auto_increment,
-  type varchar(50) default NULL,
-  itemId varchar(255) default NULL,
-  description text,
-  created int(14) default NULL,
-  name varchar(200) default NULL,
-  href varchar(200) default NULL,
-  hits int(8) default NULL,
-  comments_locked char(1) NOT NULL default 'n',
+  `objectId` int(12) NOT NULL auto_increment,
+  `type` varchar(50) default NULL,
+  `itemId` varchar(255) default NULL,
+  `description` text,
+  `created` int(14) default NULL,
+  `name` varchar(200) default NULL,
+  `href` varchar(200) default NULL,
+  `hits` int(8) default NULL,
+  `comments_locked` char(1) NOT NULL default 'n',
   PRIMARY KEY (objectId),
   KEY (type, objectId),
   KEY (itemId, type)
@@ -568,140 +568,140 @@
 
 DROP TABLE IF EXISTS tiki_category_objects;
 CREATE TABLE tiki_category_objects (
-  catObjectId int(12) NOT NULL default '0',
-  categId int(12) NOT NULL default '0',
+  `catObjectId` int(12) NOT NULL default '0',
+  `categId` int(12) NOT NULL default '0',
   PRIMARY KEY (catObjectId,categId)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_object_ratings;
 CREATE TABLE tiki_object_ratings (
-  catObjectId int(12) NOT NULL default '0',
-  pollId int(12) NOT NULL default '0',
+  `catObjectId` int(12) NOT NULL default '0',
+  `pollId` int(12) NOT NULL default '0',
   PRIMARY KEY (catObjectId,pollId)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_category_sites;
 CREATE TABLE tiki_category_sites (
-  categId int(10) NOT NULL default '0',
-  siteId int(14) NOT NULL default '0',
+  `categId` int(10) NOT NULL default '0',
+  `siteId` int(14) NOT NULL default '0',
   PRIMARY KEY (categId,siteId)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_chart_items;
 CREATE TABLE tiki_chart_items (
-  itemId int(14) NOT NULL auto_increment,
-  title varchar(250) default NULL,
-  description text,
-  chartId int(14) NOT NULL default '0',
-  created int(14) default NULL,
-  URL varchar(250) default NULL,
-  votes int(14) default NULL,
-  points int(14) default NULL,
-  average decimal(4,2) default NULL,
+  `itemId` int(14) NOT NULL auto_increment,
+  `title` varchar(250) default NULL,
+  `description` text,
+  `chartId` int(14) NOT NULL default '0',
+  `created` int(14) default NULL,
+  `URL` varchar(250) default NULL,
+  `votes` int(14) default NULL,
+  `points` int(14) default NULL,
+  `average` decimal(4,2) default NULL,
   PRIMARY KEY (itemId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_charts;
 CREATE TABLE tiki_charts (
-  chartId int(14) NOT NULL auto_increment,
-  title varchar(250) default NULL,
-  description text,
-  hits int(14) default NULL,
-  singleItemVotes char(1) default NULL,
-  singleChartVotes char(1) default NULL,
-  suggestions char(1) default NULL,
-  autoValidate char(1) default NULL,
-  topN int(6) default NULL,
-  maxVoteValue int(4) default NULL,
-  frequency int(14) default NULL,
-  showAverage char(1) default NULL,
-  isActive char(1) default NULL,
-  showVotes char(1) default NULL,
-  useCookies char(1) default NULL,
-  lastChart int(14) default NULL,
-  voteAgainAfter int(14) default NULL,
-  created int(14) default NULL,
+  `chartId` int(14) NOT NULL auto_increment,
+  `title` varchar(250) default NULL,
+  `description` text,
+  `hits` int(14) default NULL,
+  `singleItemVotes` char(1) default NULL,
+  `singleChartVotes` char(1) default NULL,
+  `suggestions` char(1) default NULL,
+  `autoValidate` char(1) default NULL,
+  `topN` int(6) default NULL,
+  `maxVoteValue` int(4) default NULL,
+  `frequency` int(14) default NULL,
+  `showAverage` char(1) default NULL,
+  `isActive` char(1) default NULL,
+  `showVotes` char(1) default NULL,
+  `useCookies` char(1) default NULL,
+  `lastChart` int(14) default NULL,
+  `voteAgainAfter` int(14) default NULL,
+  `created` int(14) default NULL,
   PRIMARY KEY (chartId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_charts_rankings;
 CREATE TABLE tiki_charts_rankings (
-  chartId int(14) NOT NULL default '0',
-  itemId int(14) NOT NULL default '0',
-  position int(14) NOT NULL default '0',
-  timestamp int(14) NOT NULL default '0',
-  lastPosition int(14) NOT NULL default '0',
-  period int(14) NOT NULL default '0',
-  rvotes int(14) NOT NULL default '0',
-  raverage decimal(4,2) NOT NULL default '0.00',
+  `chartId` int(14) NOT NULL default '0',
+  `itemId` int(14) NOT NULL default '0',
+  `position` int(14) NOT NULL default '0',
+  `timestamp` int(14) NOT NULL default '0',
+  `lastPosition` int(14) NOT NULL default '0',
+  `period` int(14) NOT NULL default '0',
+  `rvotes` int(14) NOT NULL default '0',
+  `raverage` decimal(4,2) NOT NULL default '0.00',
   PRIMARY KEY (chartId,itemId,period)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_charts_votes;
 CREATE TABLE tiki_charts_votes (
-  user varchar(200) NOT NULL default '',
-  itemId int(14) NOT NULL default '0',
-  timestamp int(14) default NULL,
-  chartId int(14) default NULL,
+  `user` varchar(200) NOT NULL default '',
+  `itemId` int(14) NOT NULL default '0',
+  `timestamp` int(14) default NULL,
+  `chartId` int(14) default NULL,
   PRIMARY KEY (user,itemId)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_chat_channels;
 CREATE TABLE tiki_chat_channels (
-  channelId int(8) NOT NULL auto_increment,
-  name varchar(30) default NULL,
-  description varchar(250) default NULL,
-  max_users int(8) default NULL,
-  mode char(1) default NULL,
-  moderator varchar(200) default NULL,
-  active char(1) default NULL,
-  refresh int(6) default NULL,
+  `channelId` int(8) NOT NULL auto_increment,
+  `name` varchar(30) default NULL,
+  `description` varchar(250) default NULL,
+  `max_users` int(8) default NULL,
+  `mode` char(1) default NULL,
+  `moderator` varchar(200) default NULL,
+  `active` char(1) default NULL,
+  `refresh` int(6) default NULL,
   PRIMARY KEY (channelId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_chat_messages;
 CREATE TABLE tiki_chat_messages (
-  messageId int(8) NOT NULL auto_increment,
-  channelId int(8) NOT NULL default '0',
-  data varchar(255) default NULL,
-  poster varchar(200) NOT NULL default 'anonymous',
-  timestamp int(14) default NULL,
+  `messageId` int(8) NOT NULL auto_increment,
+  `channelId` int(8) NOT NULL default '0',
+  `data` varchar(255) default NULL,
+  `poster` varchar(200) NOT NULL default 'anonymous',
+  `timestamp` int(14) default NULL,
   PRIMARY KEY (messageId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_chat_users;
 CREATE TABLE tiki_chat_users (
-  nickname varchar(200) NOT NULL default '',
-  channelId int(8) NOT NULL default '0',
-  timestamp int(14) default NULL,
+  `nickname` varchar(200) NOT NULL default '',
+  `channelId` int(8) NOT NULL default '0',
+  `timestamp` int(14) default NULL,
   PRIMARY KEY (nickname,channelId)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_comments;
 CREATE TABLE tiki_comments (
-  threadId int(14) NOT NULL auto_increment,
-  object varchar(255) NOT NULL default '',
-  objectType varchar(32) NOT NULL default '',
-  parentId int(14) default NULL,
-  userName varchar(200) default '',
-  commentDate int(14) default NULL,
-  hits int(8) default NULL,
-  type char(1) default NULL,
-  points decimal(8,2) default NULL,
-  votes int(8) default NULL,
-  average decimal(8,4) default NULL,
-  title varchar(255) default NULL,
-  data text,
-  hash varchar(32) default NULL,
-  user_ip varchar(15) default NULL,
-  summary varchar(240) default NULL,
-  smiley varchar(80) default NULL,
-  message_id varchar(128) default NULL,
-  in_reply_to varchar(128) default NULL,
-  comment_rating tinyint(2) default NULL,
-  archived char(1) default NULL,
-  approved char(1) NOT NULL default 'y',
-  locked char(1) NOT NULL default 'n',
+  `threadId` int(14) NOT NULL auto_increment,
+  `object` varchar(255) NOT NULL default '',
+  `objectType` varchar(32) NOT NULL default '',
+  `parentId` int(14) default NULL,
+  `userName` varchar(200) default '',
+  `commentDate` int(14) default NULL,
+  `hits` int(8) default NULL,
+  `type` char(1) default NULL,
+  `points` decimal(8,2) default NULL,
+  `votes` int(8) default NULL,
+  `average` decimal(8,4) default NULL,
+  `title` varchar(255) default NULL,
+  `data` text,
+  `hash` varchar(32) default NULL,
+  `user_ip` varchar(15) default NULL,
+  `summary` varchar(240) default NULL,
+  `smiley` varchar(80) default NULL,
+  `message_id` varchar(128) default NULL,
+  `in_reply_to` varchar(128) default NULL,
+  `comment_rating` tinyint(2) default NULL,
+  `archived` char(1) default NULL,
+  `approved` char(1) NOT NULL default 'y',
+  `locked` char(1) NOT NULL default 'n',
   PRIMARY KEY (threadId),
   UNIQUE KEY no_repeats (parentId, userName(40), title(100), commentDate, message_id(40), in_reply_to(40)),
   KEY title (title),
@@ -716,83 +716,83 @@
 
 DROP TABLE IF EXISTS tiki_content;
 CREATE TABLE tiki_content (
-  contentId int(8) NOT NULL auto_increment,
-  description text,
-  contentLabel varchar(255) NOT NULL default '',
+  `contentId` int(8) NOT NULL auto_increment,
+  `description` text,
+  `contentLabel` varchar(255) NOT NULL default '',
   PRIMARY KEY (contentId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_content_templates;
 CREATE TABLE tiki_content_templates (
-  templateId int(10) NOT NULL auto_increment,
-  content longblob,
-  name varchar(200) default NULL,
-  created int(14) default NULL,
+  `templateId` int(10) NOT NULL auto_increment,
+  `content` longblob,
+  `name` varchar(200) default NULL,
+  `created` int(14) default NULL,
   PRIMARY KEY (templateId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_content_templates_sections;
 CREATE TABLE tiki_content_templates_sections (
-  templateId int(10) NOT NULL default '0',
-  section varchar(250) NOT NULL default '',
+  `templateId` int(10) NOT NULL default '0',
+  `section` varchar(250) NOT NULL default '',
   PRIMARY KEY (templateId,section)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_cookies;
 CREATE TABLE tiki_cookies (
-  cookieId int(10) NOT NULL auto_increment,
-  cookie text,
+  `cookieId` int(10) NOT NULL auto_increment,
+  `cookie` text,
   PRIMARY KEY (cookieId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_copyrights;
 CREATE TABLE tiki_copyrights (
-  copyrightId int(12) NOT NULL auto_increment,
-  page varchar(200) default NULL,
-  title varchar(200) default NULL,
-  year int(11) default NULL,
-  authors varchar(200) default NULL,
-  copyright_order int(11) default NULL,
-  userName varchar(200) default '',
+  `copyrightId` int(12) NOT NULL auto_increment,
+  `page` varchar(200) default NULL,
+  `title` varchar(200) default NULL,
+  `year` int(11) default NULL,
+  `authors` varchar(200) default NULL,
+  `copyright_order` int(11) default NULL,
+  `userName` varchar(200) default '',
   PRIMARY KEY (copyrightId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_directory_categories;
 CREATE TABLE tiki_directory_categories (
-  categId int(10) NOT NULL auto_increment,
-  parent int(10) default NULL,
-  name varchar(240) default NULL,
-  description text,
-  childrenType char(1) default NULL,
-  sites int(10) default NULL,
-  viewableChildren int(4) default NULL,
-  allowSites char(1) default NULL,
-  showCount char(1) default NULL,
-  editorGroup varchar(200) default NULL,
-  hits int(12) default NULL,
+  `categId` int(10) NOT NULL auto_increment,
+  `parent` int(10) default NULL,
+  `name` varchar(240) default NULL,
+  `description` text,
+  `childrenType` char(1) default NULL,
+  `sites` int(10) default NULL,
+  `viewableChildren` int(4) default NULL,
+  `allowSites` char(1) default NULL,
+  `showCount` char(1) default NULL,
+  `editorGroup` varchar(200) default NULL,
+  `hits` int(12) default NULL,
   PRIMARY KEY (categId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_directory_search;
 CREATE TABLE tiki_directory_search (
-  term varchar(250) NOT NULL default '',
-  hits int(14) default NULL,
+  `term` varchar(250) NOT NULL default '',
+  `hits` int(14) default NULL,
   PRIMARY KEY (term)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_directory_sites;
 CREATE TABLE tiki_directory_sites (
-  siteId int(14) NOT NULL auto_increment,
-  name varchar(240) default NULL,
-  description text,
-  url varchar(255) default NULL,
-  country varchar(255) default NULL,
-  hits int(12) default NULL,
-  isValid char(1) default NULL,
-  created int(14) default NULL,
-  lastModif int(14) default NULL,
-  cache longblob,
-  cache_timestamp int(14) default NULL,
+  `siteId` int(14) NOT NULL auto_increment,
+  `name` varchar(240) default NULL,
+  `description` text,
+  `url` varchar(255) default NULL,
+  `country` varchar(255) default NULL,
+  `hits` int(12) default NULL,
+  `isValid` char(1) default NULL,
+  `created` int(14) default NULL,
+  `lastModif` int(14) default NULL,
+  `cache` longblob,
+  `cache_timestamp` int(14) default NULL,
   PRIMARY KEY (siteId),
   KEY (isValid),
   KEY (url),
@@ -801,46 +801,46 @@
 
 DROP TABLE IF EXISTS tiki_drawings;
 CREATE TABLE tiki_drawings (
-  drawId int(12) NOT NULL auto_increment,
-  version int(8) default NULL,
-  name varchar(250) default NULL,
-  filename_draw varchar(250) default NULL,
-  filename_pad varchar(250) default NULL,
-  timestamp int(14) default NULL,
-  user varchar(200) default '',
+  `drawId` int(12) NOT NULL auto_increment,
+  `version` int(8) default NULL,
+  `name` varchar(250) default NULL,
+  `filename_draw` varchar(250) default NULL,
+  `filename_pad` varchar(250) default NULL,
+  `timestamp` int(14) default NULL,
+  `user` varchar(200) default '',
   PRIMARY KEY (drawId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_dsn;
 CREATE TABLE tiki_dsn (
-  dsnId int(12) NOT NULL auto_increment,
-  name varchar(200) NOT NULL default '',
-  dsn varchar(255) default NULL,
+  `dsnId` int(12) NOT NULL auto_increment,
+  `name` varchar(200) NOT NULL default '',
+  `dsn` varchar(255) default NULL,
   PRIMARY KEY (dsnId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_dynamic_variables;
 CREATE TABLE tiki_dynamic_variables (
-  name varchar(40) NOT NULL,
-  data text,
+  `name` varchar(40) NOT NULL,
+  `data` text,
   PRIMARY KEY (name)
 );
 
 DROP TABLE IF EXISTS tiki_extwiki;
 CREATE TABLE tiki_extwiki (
-  extwikiId int(12) NOT NULL auto_increment,
-  name varchar(200) NOT NULL default '',
-  extwiki varchar(255) default NULL,
+  `extwikiId` int(12) NOT NULL auto_increment,
+  `name` varchar(200) NOT NULL default '',
+  `extwiki` varchar(255) default NULL,
   PRIMARY KEY (extwikiId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_faq_questions;
 CREATE TABLE tiki_faq_questions (
-  questionId int(10) NOT NULL auto_increment,
-  faqId int(10) default NULL,
-  position int(4) default NULL,
-  question text,
-  answer text,
+  `questionId` int(10) NOT NULL auto_increment,
+  `faqId` int(10) default NULL,
+  `position` int(4) default NULL,
+  `question` text,
+  `answer` text,
   PRIMARY KEY (questionId),
   KEY faqId (faqId),
   KEY question (question(255)),
@@ -850,13 +850,13 @@
 
 DROP TABLE IF EXISTS tiki_faqs;
 CREATE TABLE tiki_faqs (
-  faqId int(10) NOT NULL auto_increment,
-  title varchar(200) default NULL,
-  description text,
-  created int(14) default NULL,
-  questions int(5) default NULL,
-  hits int(8) default NULL,
-  canSuggest char(1) default NULL,
+  `faqId` int(10) NOT NULL auto_increment,
+  `title` varchar(200) default NULL,
+  `description` text,
+  `created` int(14) default NULL,
+  `questions` int(5) default NULL,
+  `hits` int(8) default NULL,
+  `canSuggest` char(1) default NULL,
   PRIMARY KEY (faqId),
   KEY title (title),
   KEY description (description(255)),
@@ -866,83 +866,83 @@
 
 DROP TABLE IF EXISTS tiki_featured_links;
 CREATE TABLE tiki_featured_links (
-  url varchar(200) NOT NULL default '',
-  title varchar(200) default NULL,
-  description text,
-  hits int(8) default NULL,
-  position int(6) default NULL,
-  type char(1) default NULL,
+  `url` varchar(200) NOT NULL default '',
+  `title` varchar(200) default NULL,
+  `description` text,
+  `hits` int(8) default NULL,
+  `position` int(6) default NULL,
+  `type` char(1) default NULL,
   PRIMARY KEY (url)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_file_galleries;
 CREATE TABLE tiki_file_galleries (
-  galleryId int(14) NOT NULL auto_increment,
-  name varchar(80) NOT NULL default '',
-  type varchar(20) NOT NULL default 'default',
-  description text,
-  created int(14) default NULL,
-  visible char(1) default NULL,
-  lastModif int(14) default NULL,
-  user varchar(200) default '',
-  hits int(14) default NULL,
-  votes int(8) default NULL,
-  points decimal(8,2) default NULL,
-  maxRows int(10) default NULL,
-  public char(1) default NULL,
-  show_id char(1) default NULL,
-  show_icon char(1) default NULL,
-  show_name char(1) default NULL,
-  show_size char(1) default NULL,
-  show_description char(1) default NULL,
-  max_desc int(8) default NULL,
-  show_created char(1) default NULL,
-  show_hits char(1) default NULL,
-  parentId int(14) NOT NULL default -1,
-  lockable char(1) default 'n',
-  show_lockedby char(1) default NULL,
-  archives int(4) default -1,
-  sort_mode char(20) default NULL,
-  show_modified char(1) default NULL,
-  show_author char(1) default NULL,
-  show_creator char(1) default NULL,
-  subgal_conf varchar(200) default NULL,
-  show_last_user char(1) default NULL,
-  show_comment char(1) default NULL,
-  show_files char(1) default NULL,
-  show_explorer char(1) default NULL,
-  show_path char(1) default NULL,
-  show_slideshow char(1) default NULL,
-  default_view varchar(20) default NULL,
+  `galleryId` int(14) NOT NULL auto_increment,
+  `name` varchar(80) NOT NULL default '',
+  `type` varchar(20) NOT NULL default 'default',
+  `description` text,
+  `created` int(14) default NULL,
+  `visible` char(1) default NULL,
+  `lastModif` int(14) default NULL,
+  `user` varchar(200) default '',
+  `hits` int(14) default NULL,
+  `votes` int(8) default NULL,
+  `points` decimal(8,2) default NULL,
+  `maxRows` int(10) default NULL,
+  `public` char(1) default NULL,
+  `show_id` char(1) default NULL,
+  `show_icon` char(1) default NULL,
+  `show_name` char(1) default NULL,
+  `show_size` char(1) default NULL,
+  `show_description` char(1) default NULL,
+  `max_desc` int(8) default NULL,
+  `show_created` char(1) default NULL,
+  `show_hits` char(1) default NULL,
+  `parentId` int(14) NOT NULL default -1,
+  `lockable` char(1) default 'n',
+  `show_lockedby` char(1) default NULL,
+  `archives` int(4) default -1,
+  `sort_mode` char(20) default NULL,
+  `show_modified` char(1) default NULL,
+  `show_author` char(1) default NULL,
+  `show_creator` char(1) default NULL,
+  `subgal_conf` varchar(200) default NULL,
+  `show_last_user` char(1) default NULL,
+  `show_comment` char(1) default NULL,
+  `show_files` char(1) default NULL,
+  `show_explorer` char(1) default NULL,
+  `show_path` char(1) default NULL,
+  `show_slideshow` char(1) default NULL,
+  `default_view` varchar(20) default NULL,
   PRIMARY KEY (galleryId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_files;
 CREATE TABLE tiki_files (
-  fileId int(14) NOT NULL auto_increment,
-  galleryId int(14) NOT NULL default '0',
-  name varchar(200) NOT NULL default '',
-  description text,
-  created int(14) default NULL,
-  filename varchar(80) default NULL,
-  filesize int(14) default NULL,
-  filetype varchar(250) default NULL,
-  data longblob,
-  user varchar(200) default '',
-  author varchar(40) default NULL,
-  hits int(14) default NULL,
-  votes int(8) default NULL,
-  points decimal(8,2) default NULL,
-  path varchar(255) default NULL,
-  reference_url varchar(250) default NULL,
-  is_reference char(1) default NULL,
-  hash varchar(32) default NULL,
-  search_data longtext,
-  lastModif integer(14) DEFAULT NULL,
-  lastModifUser varchar(200) DEFAULT NULL,
-  lockedby varchar(200) default '',
-  comment varchar(200) default NULL,
-  archiveId int(14) default 0,
+  `fileId` int(14) NOT NULL auto_increment,
+  `galleryId` int(14) NOT NULL default '0',
+  `name` varchar(200) NOT NULL default '',
+  `description` text,
+  `created` int(14) default NULL,
+  `filename` varchar(80) default NULL,
+  `filesize` int(14) default NULL,
+  `filetype` varchar(250) default NULL,
+  `data` longblob,
+  `user` varchar(200) default '',
+  `author` varchar(40) default NULL,
+  `hits` int(14) default NULL,
+  `votes` int(8) default NULL,
+  `points` decimal(8,2) default NULL,
+  `path` varchar(255) default NULL,
+  `reference_url` varchar(250) default NULL,
+  `is_reference` char(1) default NULL,
+  `hash` varchar(32) default NULL,
+  `search_data` longtext,
+  `lastModif` integer(14) DEFAULT NULL,
+  `lastModifUser` varchar(200) DEFAULT NULL,
+  `lockedby` varchar(200) default '',
+  `comment` varchar(200) default NULL,
+  `archiveId` int(14) default 0,
   PRIMARY KEY (fileId),
   KEY name (name),
   KEY description (description(255)),
@@ -955,17 +955,17 @@
 
 DROP TABLE IF EXISTS tiki_forum_attachments;
 CREATE TABLE tiki_forum_attachments (
-  attId int(14) NOT NULL auto_increment,
-  threadId int(14) NOT NULL default '0',
-  qId int(14) NOT NULL default '0',
-  forumId int(14) default NULL,
-  filename varchar(250) default NULL,
-  filetype varchar(250) default NULL,
-  filesize int(12) default NULL,
-  data longblob,
-  dir varchar(200) default NULL,
-  created int(14) default NULL,
-  path varchar(250) default NULL,
+  `attId` int(14) NOT NULL auto_increment,
+  `threadId` int(14) NOT NULL default '0',
+  `qId` int(14) NOT NULL default '0',
+  `forumId` int(14) default NULL,
+  `filename` varchar(250) default NULL,
+  `filetype` varchar(250) default NULL,
+  `filesize` int(12) default NULL,
+  `data` longblob,
+  `dir` varchar(200) default NULL,
+  `created` int(14) default NULL,
+  `path` varchar(250) default NULL,
   PRIMARY KEY (attId),
   KEY threadId (threadId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -972,139 +972,139 @@
 
 DROP TABLE IF EXISTS tiki_forum_reads;
 CREATE TABLE tiki_forum_reads (
-  user varchar(200) NOT NULL default '',
-  threadId int(14) NOT NULL default '0',
-  forumId int(14) default NULL,
-  timestamp int(14) default NULL,
+  `user` varchar(200) NOT NULL default '',
+  `threadId` int(14) NOT NULL default '0',
+  `forumId` int(14) default NULL,
+  `timestamp` int(14) default NULL,
   PRIMARY KEY (user,threadId)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_forums;
 CREATE TABLE tiki_forums (
-  forumId int(8) NOT NULL auto_increment,
-  name varchar(255) default NULL,
-  description text,
-  created int(14) default NULL,
-  lastPost int(14) default NULL,
-  threads int(8) default NULL,
-  comments int(8) default NULL,
-  controlFlood char(1) default NULL,
-  floodInterval int(8) default NULL,
-  moderator varchar(200) default NULL,
-  hits int(8) default NULL,
-  mail varchar(200) default NULL,
-  useMail char(1) default NULL,
-  section varchar(200) default NULL,
-  usePruneUnreplied char(1) default NULL,
-  pruneUnrepliedAge int(8) default NULL,
-  usePruneOld char(1) default NULL,
-  pruneMaxAge int(8) default NULL,
-  topicsPerPage int(6) default NULL,
-  topicOrdering varchar(100) default NULL,
-  threadOrdering varchar(100) default NULL,
-  att varchar(80) default NULL,
-  att_store varchar(4) default NULL,
-  att_store_dir varchar(250) default NULL,
-  att_max_size int(12) default NULL,
-  ui_level char(1) default NULL,
-  forum_password varchar(32) default NULL,
-  forum_use_password char(1) default NULL,
-  moderator_group varchar(200) default NULL,
-  approval_type varchar(20) default NULL,
-  outbound_address varchar(250) default NULL,
-  outbound_mails_for_inbound_mails char(1) default NULL,
-  outbound_mails_reply_link char(1) default NULL,
-  outbound_from varchar(250) default NULL,
-  inbound_pop_server varchar(250) default NULL,
-  inbound_pop_port int(4) default NULL,
-  inbound_pop_user varchar(200) default NULL,
-  inbound_pop_password varchar(80) default NULL,
-  topic_smileys char(1) default NULL,
-  ui_avatar char(1) default NULL,
-  ui_flag char(1) default NULL,
-  ui_posts char(1) default NULL,
-  ui_email char(1) default NULL,
-  ui_online char(1) default NULL,
-  topic_summary char(1) default NULL,
-  show_description char(1) default NULL,
-  topics_list_replies char(1) default NULL,
-  topics_list_reads char(1) default NULL,
-  topics_list_pts char(1) default NULL,
-  topics_list_lastpost char(1) default NULL,
-  topics_list_author char(1) default NULL,
-  vote_threads char(1) default NULL,
-  forum_last_n int(2) default 0,
-  threadStyle varchar(100) default NULL,
-  commentsPerPage varchar(100) default NULL,
-  is_flat char(1) default NULL,
-  mandatory_contribution char(1) default NULL,
+  `forumId` int(8) NOT NULL auto_increment,
+  `name` varchar(255) default NULL,
+  `description` text,
+  `created` int(14) default NULL,
+  `lastPost` int(14) default NULL,
+  `threads` int(8) default NULL,
+  `comments` int(8) default NULL,
+  `controlFlood` char(1) default NULL,
+  `floodInterval` int(8) default NULL,
+  `moderator` varchar(200) default NULL,
+  `hits` int(8) default NULL,
+  `mail` varchar(200) default NULL,
+  `useMail` char(1) default NULL,
+  `section` varchar(200) default NULL,
+  `usePruneUnreplied` char(1) default NULL,
+  `pruneUnrepliedAge` int(8) default NULL,
+  `usePruneOld` char(1) default NULL,
+  `pruneMaxAge` int(8) default NULL,
+  `topicsPerPage` int(6) default NULL,
+  `topicOrdering` varchar(100) default NULL,
+  `threadOrdering` varchar(100) default NULL,
+  `att` varchar(80) default NULL,
+  `att_store` varchar(4) default NULL,
+  `att_store_dir` varchar(250) default NULL,
+  `att_max_size` int(12) default NULL,
+  `ui_level` char(1) default NULL,
+  `forum_password` varchar(32) default NULL,
+  `forum_use_password` char(1) default NULL,
+  `moderator_group` varchar(200) default NULL,
+  `approval_type` varchar(20) default NULL,
+  `outbound_address` varchar(250) default NULL,
+  `outbound_mails_for_inbound_mails` char(1) default NULL,
+  `outbound_mails_reply_link` char(1) default NULL,
+  `outbound_from` varchar(250) default NULL,
+  `inbound_pop_server` varchar(250) default NULL,
+  `inbound_pop_port` int(4) default NULL,
+  `inbound_pop_user` varchar(200) default NULL,
+  `inbound_pop_password` varchar(80) default NULL,
+  `topic_smileys` char(1) default NULL,
+  `ui_avatar` char(1) default NULL,
+  `ui_flag` char(1) default NULL,
+  `ui_posts` char(1) default NULL,
+  `ui_email` char(1) default NULL,
+  `ui_online` char(1) default NULL,
+  `topic_summary` char(1) default NULL,
+  `show_description` char(1) default NULL,
+  `topics_list_replies` char(1) default NULL,
+  `topics_list_reads` char(1) default NULL,
+  `topics_list_pts` char(1) default NULL,
+  `topics_list_lastpost` char(1) default NULL,
+  `topics_list_author` char(1) default NULL,
+  `vote_threads` char(1) default NULL,
+  `forum_last_n` int(2) default 0,
+  `threadStyle` varchar(100) default NULL,
+  `commentsPerPage` varchar(100) default NULL,
+  `is_flat` char(1) default NULL,
+  `mandatory_contribution` char(1) default NULL,
   PRIMARY KEY (forumId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_forums_queue;
 CREATE TABLE tiki_forums_queue (
-  qId int(14) NOT NULL auto_increment,
-  object varchar(32) default NULL,
-  parentId int(14) default NULL,
-  forumId int(14) default NULL,
-  timestamp int(14) default NULL,
-  user varchar(200) default '',
-  title varchar(240) default NULL,
-  data text,
-  type varchar(60) default NULL,
-  hash varchar(32) default NULL,
-  topic_smiley varchar(80) default NULL,
-  topic_title varchar(240) default NULL,
-  summary varchar(240) default NULL,
-  in_reply_to varchar(128) default NULL,
-  tags varchar(255) default NULL,
-  email varchar(255) default NULL,
+  `qId` int(14) NOT NULL auto_increment,
+  `object` varchar(32) default NULL,
+  `parentId` int(14) default NULL,
+  `forumId` int(14) default NULL,
+  `timestamp` int(14) default NULL,
+  `user` varchar(200) default '',
+  `title` varchar(240) default NULL,
+  `data` text,
+  `type` varchar(60) default NULL,
+  `hash` varchar(32) default NULL,
+  `topic_smiley` varchar(80) default NULL,
+  `topic_title` varchar(240) default NULL,
+  `summary` varchar(240) default NULL,
+  `in_reply_to` varchar(128) default NULL,
+  `tags` varchar(255) default NULL,
+  `email` varchar(255) default NULL,
   PRIMARY KEY (qId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_forums_reported;
 CREATE TABLE tiki_forums_reported (
-  threadId int(12) NOT NULL default '0',
-  forumId int(12) NOT NULL default '0',
-  parentId int(12) NOT NULL default '0',
-  user varchar(200) default '',
-  timestamp int(14) default NULL,
-  reason varchar(250) default NULL,
+  `threadId` int(12) NOT NULL default '0',
+  `forumId` int(12) NOT NULL default '0',
+  `parentId` int(12) NOT NULL default '0',
+  `user` varchar(200) default '',
+  `timestamp` int(14) default NULL,
+  `reason` varchar(250) default NULL,
   PRIMARY KEY (threadId)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_galleries;
 CREATE TABLE tiki_galleries (
-  galleryId int(14) NOT NULL auto_increment,
-  name varchar(80) NOT NULL default '',
-  description text,
-  created int(14) default NULL,
-  lastModif int(14) default NULL,
-  visible char(1) default NULL,
-  geographic char(1) default NULL,
-  theme varchar(60) default NULL,
-  user varchar(200) default '',
-  hits int(14) default NULL,
-  maxRows int(10) default NULL,
-  rowImages int(10) default NULL,
-  thumbSizeX int(10) default NULL,
-  thumbSizeY int(10) default NULL,
-  public char(1) default NULL,
-  sortorder varchar(20) NOT NULL default 'created',
-  sortdirection varchar(4) NOT NULL default 'desc',
-  galleryimage varchar(20) NOT NULL default 'first',
-  parentgallery int(14) NOT NULL default -1,
-  showname char(1) NOT NULL default 'y',
-  showimageid char(1) NOT NULL default 'n',
-  showdescription char(1) NOT NULL default 'n',
-  showcreated char(1) NOT NULL default 'n',
-  showuser char(1) NOT NULL default 'n',
-  showhits char(1) NOT NULL default 'y',
-  showxysize char(1) NOT NULL default 'y',
-  showfilesize char(1) NOT NULL default 'n',
-  showfilename char(1) NOT NULL default 'n',
-  defaultscale varchar(10) NOT NULL DEFAULT 'o',
-  showcategories char(1) NOT NULL default 'n', 
+  `galleryId` int(14) NOT NULL auto_increment,
+  `name` varchar(80) NOT NULL default '',
+  `description` text,
+  `created` int(14) default NULL,
+  `lastModif` int(14) default NULL,
+  `visible` char(1) default NULL,
+  `geographic` char(1) default NULL,
+  `theme` varchar(60) default NULL,
+  `user` varchar(200) default '',
+  `hits` int(14) default NULL,
+  `maxRows` int(10) default NULL,
+  `rowImages` int(10) default NULL,
+  `thumbSizeX` int(10) default NULL,
+  `thumbSizeY` int(10) default NULL,
+  `public` char(1) default NULL,
+  `sortorder` varchar(20) NOT NULL default 'created',
+  `sortdirection` varchar(4) NOT NULL default 'desc',
+  `galleryimage` varchar(20) NOT NULL default 'first',
+  `parentgallery` int(14) NOT NULL default -1,
+  `showname` char(1) NOT NULL default 'y',
+  `showimageid` char(1) NOT NULL default 'n',
+  `showdescription` char(1) NOT NULL default 'n',
+  `showcreated` char(1) NOT NULL default 'n',
+  `showuser` char(1) NOT NULL default 'n',
+  `showhits` char(1) NOT NULL default 'y',
+  `showxysize` char(1) NOT NULL default 'y',
+  `showfilesize` char(1) NOT NULL default 'n',
+  `showfilename` char(1) NOT NULL default 'n',
+  `defaultscale` varchar(10) NOT NULL DEFAULT 'o',
+  `showcategories` char(1) NOT NULL default 'n', 
   PRIMARY KEY (galleryId),
   KEY name (name),
   KEY description (description(255)),
@@ -1116,36 +1116,36 @@
 
 DROP TABLE IF EXISTS tiki_galleries_scales;
 CREATE TABLE tiki_galleries_scales (
-  galleryId int(14) NOT NULL default '0',
-  scale int(11) NOT NULL default '0',
+  `galleryId` int(14) NOT NULL default '0',
+  `scale` int(11) NOT NULL default '0',
   PRIMARY KEY (galleryId,scale)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_games;
 CREATE TABLE tiki_games (
-  gameName varchar(200) NOT NULL default '',
-  hits int(8) default NULL,
-  votes int(8) default NULL,
-  points int(8) default NULL,
+  `gameName` varchar(200) NOT NULL default '',
+  `hits` int(8) default NULL,
+  `votes` int(8) default NULL,
+  `points` int(8) default NULL,
   PRIMARY KEY (gameName)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_group_inclusion;
 CREATE TABLE tiki_group_inclusion (
-  groupName varchar(255) NOT NULL default '',
-  includeGroup varchar(255) NOT NULL default '',
+  `groupName` varchar(255) NOT NULL default '',
+  `includeGroup` varchar(255) NOT NULL default '',
   PRIMARY KEY (groupName(30),includeGroup(30))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_group_watches;
 CREATE TABLE tiki_group_watches (
-  watchId int(12) NOT NULL auto_increment,
+  `watchId` int(12) NOT NULL auto_increment,
   `group` varchar(200) NOT NULL default '',
-  event varchar(40) NOT NULL default '',
-  object varchar(200) NOT NULL default '',
-  title varchar(250) default NULL,
-  type varchar(200) default NULL,
-  url varchar(250) default NULL,
+  `event` varchar(40) NOT NULL default '',
+  `object` varchar(200) NOT NULL default '',
+  `title` varchar(250) default NULL,
+  `type` varchar(200) default NULL,
+  `url` varchar(250) default NULL,
   KEY watchId (watchId),
   PRIMARY KEY (`group`(50),event,object(100))
 ) ENGINE=MyISAM;
@@ -1152,18 +1152,18 @@
 
 DROP TABLE IF EXISTS tiki_history;
 CREATE TABLE tiki_history (
-  historyId int(12) NOT NULL auto_increment,
-  pageName varchar(160) NOT NULL default '',
-  version int(8) NOT NULL default '0',
-  version_minor int(8) NOT NULL default '0',
-  lastModif int(14) default NULL,
-  description varchar(200) default NULL,
-  user varchar(200) not null default '',
-  ip varchar(15) default NULL,
-  comment varchar(200) default NULL,
-  data longblob,
-  type varchar(50) default NULL,
-  is_html TINYINT(1) NOT NULL DEFAULT 0,
+  `historyId` int(12) NOT NULL auto_increment,
+  `pageName` varchar(160) NOT NULL default '',
+  `version` int(8) NOT NULL default '0',
+  `version_minor` int(8) NOT NULL default '0',
+  `lastModif` int(14) default NULL,
+  `description` varchar(200) default NULL,
+  `user` varchar(200) not null default '',
+  `ip` varchar(15) default NULL,
+  `comment` varchar(200) default NULL,
+  `data` longblob,
+  `type` varchar(50) default NULL,
+  `is_html` TINYINT(1) NOT NULL DEFAULT 0,
   PRIMARY KEY (pageName,version),
   KEY `user` (`user`),
   KEY(historyId)
@@ -1171,42 +1171,42 @@
 
 DROP TABLE IF EXISTS tiki_hotwords;
 CREATE TABLE tiki_hotwords (
-  word varchar(40) NOT NULL default '',
-  url varchar(255) NOT NULL default '',
+  `word` varchar(40) NOT NULL default '',
+  `url` varchar(255) NOT NULL default '',
   PRIMARY KEY (word)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_html_pages;
 CREATE TABLE tiki_html_pages (
-  pageName varchar(200) NOT NULL default '',
-  content longblob,
-  refresh int(10) default NULL,
-  type char(1) default NULL,
-  created int(14) default NULL,
+  `pageName` varchar(200) NOT NULL default '',
+  `content` longblob,
+  `refresh` int(10) default NULL,
+  `type` char(1) default NULL,
+  `created` int(14) default NULL,
   PRIMARY KEY (pageName)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_html_pages_dynamic_zones;
 CREATE TABLE tiki_html_pages_dynamic_zones (
-  pageName varchar(40) NOT NULL default '',
-  zone varchar(80) NOT NULL default '',
-  type char(2) default NULL,
-  content text,
+  `pageName` varchar(40) NOT NULL default '',
+  `zone` varchar(80) NOT NULL default '',
+  `type` char(2) default NULL,
+  `content` text,
   PRIMARY KEY (pageName,zone)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_images;
 CREATE TABLE tiki_images (
-  imageId int(14) NOT NULL auto_increment,
-  galleryId int(14) NOT NULL default '0',
-  name varchar(200) NOT NULL default '',
-  description text,
-  lon float default NULL,
-  lat float default NULL,
-  created int(14) default NULL,
-  user varchar(200) default '',
-  hits int(14) default NULL,
-  path varchar(255) default NULL,
+  `imageId` int(14) NOT NULL auto_increment,
+  `galleryId` int(14) NOT NULL default '0',
+  `name` varchar(200) NOT NULL default '',
+  `description` text,
+  `lon` float default NULL,
+  `lat` float default NULL,
+  `created` int(14) default NULL,
+  `user` varchar(200) default '',
+  `hits` int(14) default NULL,
+  `path` varchar(255) default NULL,
   PRIMARY KEY (imageId),
   KEY name (name),
   KEY description (description(255)),
@@ -1219,15 +1219,15 @@
 
 DROP TABLE IF EXISTS tiki_images_data;
 CREATE TABLE tiki_images_data (
-  imageId int(14) NOT NULL default '0',
-  xsize int(8) NOT NULL default '0',
-  ysize int(8) NOT NULL default '0',
-  type char(1) NOT NULL default '',
-  filesize int(14) default NULL,
-  filetype varchar(80) default NULL,
-  filename varchar(80) default NULL,
-  data longblob,
-  etag varchar(32) default NULL,
+  `imageId` int(14) NOT NULL default '0',
+  `xsize` int(8) NOT NULL default '0',
+  `ysize` int(8) NOT NULL default '0',
+  `type` char(1) NOT NULL default '',
+  `filesize` int(14) default NULL,
+  `filetype` varchar(80) default NULL,
+  `filename` varchar(80) default NULL,
+  `data` longblob,
+  `etag` varchar(32) default NULL,
   PRIMARY KEY (imageId,xsize,ysize,type),
   KEY t_i_d_it (imageId,type)
 ) ENGINE=MyISAM;
@@ -1234,16 +1234,16 @@
 
 DROP TABLE IF EXISTS tiki_language;
 CREATE TABLE tiki_language (
-  source tinyblob NOT NULL,
-  lang char(16) NOT NULL default '',
-  tran tinyblob,
+  `source` tinyblob NOT NULL,
+  `lang` char(16) NOT NULL default '',
+  `tran` tinyblob,
   PRIMARY KEY (source(255),lang)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_languages;
 CREATE TABLE tiki_languages (
-  lang char(16) NOT NULL default '',
-  language varchar(255) default NULL,
+  `lang` char(16) NOT NULL default '',
+  `language` varchar(255) default NULL,
   PRIMARY KEY (lang)
 ) ENGINE=MyISAM;
 
@@ -1251,10 +1251,10 @@
 
 DROP TABLE IF EXISTS tiki_link_cache;
 CREATE TABLE tiki_link_cache (
-  cacheId int(14) NOT NULL auto_increment,
-  url varchar(250) default NULL,
-  data longblob,
-  refresh int(14) default NULL,
+  `cacheId` int(14) NOT NULL auto_increment,
+  `url` varchar(250) default NULL,
+  `data` longblob,
+  `refresh` int(14) default NULL,
   PRIMARY KEY (cacheId),
   KEY url (url)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -1262,9 +1262,9 @@
 
 DROP TABLE IF EXISTS tiki_links;
 CREATE TABLE tiki_links (
-  fromPage varchar(160) NOT NULL default '',
-  toPage varchar(160) NOT NULL default '',
-  reltype varchar(50),
+  `fromPage` varchar(160) NOT NULL default '',
+  `toPage` varchar(160) NOT NULL default '',
+  `reltype` varchar(50),
   PRIMARY KEY (fromPage,toPage),
   KEY toPage (toPage)
 ) ENGINE=MyISAM;
@@ -1271,46 +1271,46 @@
 
 DROP TABLE IF EXISTS tiki_live_support_events;
 CREATE TABLE tiki_live_support_events (
-  eventId int(14) NOT NULL auto_increment,
-  reqId varchar(32) NOT NULL default '',
-  type varchar(40) default NULL,
-  seqId int(14) default NULL,
-  senderId varchar(32) default NULL,
-  data text,
-  timestamp int(14) default NULL,
+  `eventId` int(14) NOT NULL auto_increment,
+  `reqId` varchar(32) NOT NULL default '',
+  `type` varchar(40) default NULL,
+  `seqId` int(14) default NULL,
+  `senderId` varchar(32) default NULL,
+  `data` text,
+  `timestamp` int(14) default NULL,
   PRIMARY KEY (eventId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_live_support_message_comments;
 CREATE TABLE tiki_live_support_message_comments (
-  cId int(12) NOT NULL auto_increment,
-  msgId int(12) default NULL,
-  data text,
-  timestamp int(14) default NULL,
+  `cId` int(12) NOT NULL auto_increment,
+  `msgId` int(12) default NULL,
+  `data` text,
+  `timestamp` int(14) default NULL,
   PRIMARY KEY (cId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_live_support_messages;
 CREATE TABLE tiki_live_support_messages (
-  msgId int(12) NOT NULL auto_increment,
-  data text,
-  timestamp int(14) default NULL,
-  user varchar(200) not null default '',
-  username varchar(200) default NULL,
-  priority int(2) default NULL,
-  status char(1) default NULL,
-  assigned_to varchar(200) default NULL,
-  resolution varchar(100) default NULL,
-  title varchar(200) default NULL,
-  module int(4) default NULL,
-  email varchar(250) default NULL,
+  `msgId` int(12) NOT NULL auto_increment,
+  `data` text,
+  `timestamp` int(14) default NULL,
+  `user` varchar(200) not null default '',
+  `username` varchar(200) default NULL,
+  `priority` int(2) default NULL,
+  `status` char(1) default NULL,
+  `assigned_to` varchar(200) default NULL,
+  `resolution` varchar(100) default NULL,
+  `title` varchar(200) default NULL,
+  `module` int(4) default NULL,
+  `email` varchar(250) default NULL,
   PRIMARY KEY (msgId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_live_support_modules;
 CREATE TABLE tiki_live_support_modules (
-  modId int(4) NOT NULL auto_increment,
-  name varchar(90) default NULL,
+  `modId` int(4) NOT NULL auto_increment,
+  `name` varchar(90) default NULL,
   PRIMARY KEY (modId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -1324,48 +1324,48 @@
 
 DROP TABLE IF EXISTS tiki_live_support_operators;
 CREATE TABLE tiki_live_support_operators (
-  user varchar(200) NOT NULL default '',
-  accepted_requests int(10) default NULL,
-  status varchar(20) default NULL,
-  longest_chat int(10) default NULL,
-  shortest_chat int(10) default NULL,
-  average_chat int(10) default NULL,
-  last_chat int(14) default NULL,
-  time_online int(10) default NULL,
-  votes int(10) default NULL,
-  points int(10) default NULL,
-  status_since int(14) default NULL,
+  `user` varchar(200) NOT NULL default '',
+  `accepted_requests` int(10) default NULL,
+  `status` varchar(20) default NULL,
+  `longest_chat` int(10) default NULL,
+  `shortest_chat` int(10) default NULL,
+  `average_chat` int(10) default NULL,
+  `last_chat` int(14) default NULL,
+  `time_online` int(10) default NULL,
+  `votes` int(10) default NULL,
+  `points` int(10) default NULL,
+  `status_since` int(14) default NULL,
   PRIMARY KEY (user)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_live_support_requests;
 CREATE TABLE tiki_live_support_requests (
-  reqId varchar(32) NOT NULL default '',
-  user varchar(200) NOT NULL default '',
-  tiki_user varchar(200) default NULL,
-  email varchar(200) default NULL,
-  operator varchar(200) default NULL,
-  operator_id varchar(32) default NULL,
-  user_id varchar(32) default NULL,
-  reason text,
-  req_timestamp int(14) default NULL,
-  timestamp int(14) default NULL,
-  status varchar(40) default NULL,
-  resolution varchar(40) default NULL,
-  chat_started int(14) default NULL,
-  chat_ended int(14) default NULL,
+  `reqId` varchar(32) NOT NULL default '',
+  `user` varchar(200) NOT NULL default '',
+  `tiki_user` varchar(200) default NULL,
+  `email` varchar(200) default NULL,
+  `operator` varchar(200) default NULL,
+  `operator_id` varchar(32) default NULL,
+  `user_id` varchar(32) default NULL,
+  `reason` text,
+  `req_timestamp` int(14) default NULL,
+  `timestamp` int(14) default NULL,
+  `status` varchar(40) default NULL,
+  `resolution` varchar(40) default NULL,
+  `chat_started` int(14) default NULL,
+  `chat_ended` int(14) default NULL,
   PRIMARY KEY (reqId)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_logs;
 CREATE TABLE tiki_logs (
-  logId int(8) NOT NULL auto_increment,
-  logtype varchar(20) NOT NULL,
-  logmessage text NOT NULL,
-  loguser varchar(40) NOT NULL,
-  logip varchar(200),
-  logclient text NOT NULL,
-  logtime int(14) NOT NULL,
+  `logId` int(8) NOT NULL auto_increment,
+  `logtype` varchar(20) NOT NULL,
+  `logmessage` text NOT NULL,
+  `loguser` varchar(40) NOT NULL,
+  `logip` varchar(200),
+  `logclient` text NOT NULL,
+  `logtime` int(14) NOT NULL,
   PRIMARY KEY (logId),
   KEY logtype (logtype)
 ) ENGINE=MyISAM;
@@ -1372,53 +1372,53 @@
 
 DROP TABLE IF EXISTS tiki_mail_events;
 CREATE TABLE tiki_mail_events (
-  event varchar(200) default NULL,
-  object varchar(200) default NULL,
-  email varchar(200) default NULL
+  `event` varchar(200) default NULL,
+  `object` varchar(200) default NULL,
+  `email` varchar(200) default NULL
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_mailin_accounts;
 CREATE TABLE tiki_mailin_accounts (
-  accountId int(12) NOT NULL auto_increment,
-  user varchar(200) NOT NULL default '',
-  account varchar(50) NOT NULL default '',
-  pop varchar(255) default NULL,
-  port int(4) default NULL,
-  username varchar(100) default NULL,
-  pass varchar(100) default NULL,
-  active char(1) default NULL,
-  type varchar(40) default NULL,
-  smtp varchar(255) default NULL,
-  useAuth char(1) default NULL,
-  smtpPort int(4) default NULL,
-  anonymous char(1) NOT NULL default 'y',
-  attachments char(1) NOT NULL default 'n',
-  article_topicId int(4) default NULL,
-  article_type varchar(50) default NULL,
-  discard_after varchar(255) default NULL,
+  `accountId` int(12) NOT NULL auto_increment,
+  `user` varchar(200) NOT NULL default '',
+  `account` varchar(50) NOT NULL default '',
+  `pop` varchar(255) default NULL,
+  `port` int(4) default NULL,
+  `username` varchar(100) default NULL,
+  `pass` varchar(100) default NULL,
+  `active` char(1) default NULL,
+  `type` varchar(40) default NULL,
+  `smtp` varchar(255) default NULL,
+  `useAuth` char(1) default NULL,
+  `smtpPort` int(4) default NULL,
+  `anonymous` char(1) NOT NULL default 'y',
+  `attachments` char(1) NOT NULL default 'n',
+  `article_topicId` int(4) default NULL,
+  `article_type` varchar(50) default NULL,
+  `discard_after` varchar(255) default NULL,
   PRIMARY KEY (accountId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_menu_languages;
 CREATE TABLE tiki_menu_languages (
-  menuId int(8) NOT NULL auto_increment,
-  language char(16) NOT NULL default '',
+  `menuId` int(8) NOT NULL auto_increment,
+  `language` char(16) NOT NULL default '',
   PRIMARY KEY (menuId,language)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_menu_options;
 CREATE TABLE tiki_menu_options (
-  optionId int(8) NOT NULL auto_increment,
-  menuId int(8) default NULL,
-  type char(1) default NULL,
-  name varchar(200) default NULL,
-  url varchar(255) default NULL,
-  position int(4) default NULL,
-  section text default NULL,
-  perm text default NULL,
-  groupname text default NULL,
-  userlevel int(4) default 0,
-  icon varchar(200),
+  `optionId` int(8) NOT NULL auto_increment,
+  `menuId` int(8) default NULL,
+  `type` char(1) default NULL,
+  `name` varchar(200) default NULL,
+  `url` varchar(255) default NULL,
+  `position` int(4) default NULL,
+  `section` text default NULL,
+  `perm` text default NULL,
+  `groupname` text default NULL,
+  `userlevel` int(4) default 0,
+  `icon` varchar(200),
   PRIMARY KEY (optionId),
   UNIQUE KEY uniq_menu (menuId,name(30),url(50),position,section(60),perm(50),groupname(50))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -1617,12 +1617,12 @@
 
 DROP TABLE IF EXISTS tiki_menus;
 CREATE TABLE tiki_menus (
-  menuId int(8) NOT NULL auto_increment,
-  name varchar(200) NOT NULL default '',
-  description text,
-  type char(1) default NULL,
-  icon varchar(200) default NULL,
-  use_items_icons char(1) NOT NULL DEFAULT 'n',
+  `menuId` int(8) NOT NULL auto_increment,
+  `name` varchar(200) NOT NULL default '',
+  `description` text,
+  `type` char(1) default NULL,
+  `icon` varchar(200) default NULL,
+  `use_items_icons` char(1) NOT NULL DEFAULT 'n',
   PRIMARY KEY (menuId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -1630,45 +1630,45 @@
 
 DROP TABLE IF EXISTS tiki_minical_events;
 CREATE TABLE tiki_minical_events (
-  user varchar(200) default '',
-  eventId int(12) NOT NULL auto_increment,
-  title varchar(250) default NULL,
-  description text,
-  start int(14) default NULL,
-  end int(14) default NULL,
-  security char(1) default NULL,
-  duration int(3) default NULL,
-  topicId int(12) default NULL,
-  reminded char(1) default NULL,
+  `user` varchar(200) default '',
+  `eventId` int(12) NOT NULL auto_increment,
+  `title` varchar(250) default NULL,
+  `description` text,
+  `start` int(14) default NULL,
+  `end` int(14) default NULL,
+  `security` char(1) default NULL,
+  `duration` int(3) default NULL,
+  `topicId` int(12) default NULL,
+  `reminded` char(1) default NULL,
   PRIMARY KEY (eventId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_minical_topics;
 CREATE TABLE tiki_minical_topics (
-  user varchar(200) default '',
-  topicId int(12) NOT NULL auto_increment,
-  name varchar(250) default NULL,
-  filename varchar(200) default NULL,
-  filetype varchar(200) default NULL,
-  filesize varchar(200) default NULL,
-  data longblob,
-  path varchar(250) default NULL,
-  isIcon char(1) default NULL,
+  `user` varchar(200) default '',
+  `topicId` int(12) NOT NULL auto_increment,
+  `name` varchar(250) default NULL,
+  `filename` varchar(200) default NULL,
+  `filetype` varchar(200) default NULL,
+  `filesize` varchar(200) default NULL,
+  `data` longblob,
+  `path` varchar(250) default NULL,
+  `isIcon` char(1) default NULL,
   PRIMARY KEY (topicId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_modules;
 CREATE TABLE tiki_modules (
-  moduleId int(8) NOT NULL auto_increment,
-  name varchar(200) NOT NULL default '',
-  position char(1) default NULL,
-  ord int(4) default NULL,
-  type char(1) default NULL,
-  title varchar(255) default NULL,
-  cache_time int(14) default NULL,
-  rows int(4) default NULL,
-  params varchar(255) default NULL,
-  groups text,
+  `moduleId` int(8) NOT NULL auto_increment,
+  `name` varchar(200) NOT NULL default '',
+  `position` char(1) default NULL,
+  `ord` int(4) default NULL,
+  `type` char(1) default NULL,
+  `title` varchar(255) default NULL,
+  `cache_time` int(14) default NULL,
+  `rows` int(4) default NULL,
+  `params` varchar(255) default NULL,
+  `groups` text,
   PRIMARY KEY (name(100), position, ord, params(140)),
   KEY positionType (position, type),
   KEY moduleId (moduleId)
@@ -1678,105 +1678,105 @@
 
 DROP TABLE IF EXISTS tiki_newsletter_subscriptions;
 CREATE TABLE tiki_newsletter_subscriptions (
-  nlId int(12) NOT NULL default '0',
-  email varchar(255) NOT NULL default '',
-  code varchar(32) default NULL,
-  valid char(1) default NULL,
-  subscribed int(14) default NULL,
-  isUser char(1) NOT NULL default 'n',
-  included char(1) NOT NULL default 'n',
+  `nlId` int(12) NOT NULL default '0',
+  `email` varchar(255) NOT NULL default '',
+  `code` varchar(32) default NULL,
+  `valid` char(1) default NULL,
+  `subscribed` int(14) default NULL,
+  `isUser` char(1) NOT NULL default 'n',
+  `included` char(1) NOT NULL default 'n',
   PRIMARY KEY (nlId,email,isUser)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_newsletter_groups;
 CREATE TABLE tiki_newsletter_groups (
-  nlId int(12) NOT NULL default '0',
-  groupName varchar(255) NOT NULL default '',
-  code varchar(32) default NULL,
+  `nlId` int(12) NOT NULL default '0',
+  `groupName` varchar(255) NOT NULL default '',
+  `code` varchar(32) default NULL,
   PRIMARY KEY (nlId,groupName)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_newsletter_included;
 CREATE TABLE tiki_newsletter_included (
-  nlId int(12) NOT NULL default '0',
-  includedId int(12) NOT NULL default '0',
+  `nlId` int(12) NOT NULL default '0',
+  `includedId` int(12) NOT NULL default '0',
   PRIMARY KEY (nlId,includedId)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_newsletters;
 CREATE TABLE tiki_newsletters (
-  nlId int(12) NOT NULL auto_increment,
-  name varchar(200) default NULL,
-  description text,
-  created int(14) default NULL,
-  lastSent int(14) default NULL,
-  editions int(10) default NULL,
-  users int(10) default NULL,
-  allowUserSub char(1) default 'y',
-  allowAnySub char(1) default NULL,
-  unsubMsg char(1) default 'y',
-  validateAddr char(1) default 'y',
-  frequency int(14) default NULL,
-  allowTxt char(1) default 'y',
-	author varchar(200) default NULL,
+  `nlId` int(12) NOT NULL auto_increment,
+  `name` varchar(200) default NULL,
+  `description` text,
+  `created` int(14) default NULL,
+  `lastSent` int(14) default NULL,
+  `editions` int(10) default NULL,
+  `users` int(10) default NULL,
+  `allowUserSub` char(1) default 'y',
+  `allowAnySub` char(1) default NULL,
+  `unsubMsg` char(1) default 'y',
+  `validateAddr` char(1) default 'y',
+  `frequency` int(14) default NULL,
+  `allowTxt` char(1) default 'y',
+  `author` varchar(200) default NULL,
   PRIMARY KEY (nlId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_newsreader_marks;
 CREATE TABLE tiki_newsreader_marks (
-  user varchar(200) NOT NULL default '',
-  serverId int(12) NOT NULL default '0',
-  groupName varchar(255) NOT NULL default '',
-  timestamp int(14) NOT NULL default '0',
+  `user` varchar(200) NOT NULL default '',
+  `serverId` int(12) NOT NULL default '0',
+  `groupName` varchar(255) NOT NULL default '',
+  `timestamp` int(14) NOT NULL default '0',
   PRIMARY KEY (`user`(100),serverId,groupName(100))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_newsreader_servers;
 CREATE TABLE tiki_newsreader_servers (
-  user varchar(200) NOT NULL default '',
-  serverId int(12) NOT NULL auto_increment,
-  server varchar(250) default NULL,
-  port int(4) default NULL,
-  username varchar(200) default NULL,
-  password varchar(200) default NULL,
+  `user` varchar(200) NOT NULL default '',
+  `serverId` int(12) NOT NULL auto_increment,
+  `server` varchar(250) default NULL,
+  `port` int(4) default NULL,
+  `username` varchar(200) default NULL,
+  `password` varchar(200) default NULL,
   PRIMARY KEY (serverId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_page_footnotes;
 CREATE TABLE tiki_page_footnotes (
-  user varchar(200) NOT NULL default '',
-  pageName varchar(250) NOT NULL default '',
-  data text,
+  `user` varchar(200) NOT NULL default '',
+  `pageName` varchar(250) NOT NULL default '',
+  `data` text,
   PRIMARY KEY (`user`(150),pageName(100))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_pages;
 CREATE TABLE tiki_pages (
-  page_id int(14) NOT NULL auto_increment,
-  pageName varchar(160) NOT NULL default '',
-  hits int(8) default NULL,
-  data mediumtext,
-  description varchar(200) default NULL,
-  lastModif int(14) default NULL,
-  comment varchar(200) default NULL,
-  version int(8) NOT NULL default '0',
-  user varchar(200) default '',
-  ip varchar(15) default NULL,
-  flag char(1) default NULL,
-  points int(8) default NULL,
-  votes int(8) default NULL,
-  cache longtext,
-  wiki_cache int(10) default NULL,
-  cache_timestamp int(14) default NULL,
-  pageRank decimal(4,3) default NULL,
-  creator varchar(200) default NULL,
-  page_size int(10) unsigned default '0',
-  lang varchar(16) default NULL,
-  lockedby varchar(200) default NULL,
-  is_html tinyint(1) default 0,
-  created int(14),
-  wysiwyg char(1) default NULL,
-  wiki_authors_style varchar(20) default '',
+  `page_id` int(14) NOT NULL auto_increment,
+  `pageName` varchar(160) NOT NULL default '',
+  `hits` int(8) default NULL,
+  `data` mediumtext,
+  `description` varchar(200) default NULL,
+  `lastModif` int(14) default NULL,
+  `comment` varchar(200) default NULL,
+  `version` int(8) NOT NULL default '0',
+  `user` varchar(200) default '',
+  `ip` varchar(15) default NULL,
+  `flag` char(1) default NULL,
+  `points` int(8) default NULL,
+  `votes` int(8) default NULL,
+  `cache` longtext,
+  `wiki_cache` int(10) default NULL,
+  `cache_timestamp` int(14) default NULL,
+  `pageRank` decimal(4,3) default NULL,
+  `creator` varchar(200) default NULL,
+  `page_size` int(10) unsigned default '0',
+  `lang` varchar(16) default NULL,
+  `lockedby` varchar(200) default NULL,
+  `is_html` tinyint(1) default 0,
+  `created` int(14),
+  `wysiwyg` char(1) default NULL,
+  `wiki_authors_style` varchar(20) default '',
   PRIMARY KEY (page_id),
   UNIQUE KEY pageName (pageName),
   KEY data (data(255)),
@@ -1787,19 +1787,19 @@
 
 DROP TABLE IF EXISTS tiki_page_drafts;
 CREATE TABLE tiki_page_drafts (
-  user varchar(200) default '',
-  pageName varchar(255) NOT NULL,
-  data mediumtext,
-  description varchar(200) default NULL,
-  comment varchar(200) default NULL,
-  lastModif int(14) default NULL,
+  `user` varchar(200) default '',
+  `pageName` varchar(255) NOT NULL,
+  `data` mediumtext,
+  `description` varchar(200) default NULL,
+  `comment` varchar(200) default NULL,
+  `lastModif` int(14) default NULL,
   PRIMARY KEY (pageName(120), `user`(120))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_pageviews;
 CREATE TABLE tiki_pageviews (
-  day int(14) NOT NULL default '0',
-  pageviews int(14) default NULL,
+  `day` int(14) NOT NULL default '0',
+  `pageviews` int(14) default NULL,
   PRIMARY KEY (day)
 ) ENGINE=MyISAM;
 
@@ -1813,191 +1813,191 @@
 
 DROP TABLE IF EXISTS tiki_poll_options;
 CREATE TABLE tiki_poll_options (
-  pollId int(8) NOT NULL default '0',
-  optionId int(8) NOT NULL auto_increment,
-  title varchar(200) default NULL,
-  position int(4) NOT NULL default '0',
-  votes int(8) default NULL,
+  `pollId` int(8) NOT NULL default '0',
+  `optionId` int(8) NOT NULL auto_increment,
+  `title` varchar(200) default NULL,
+  `position` int(4) NOT NULL default '0',
+  `votes` int(8) default NULL,
   PRIMARY KEY (optionId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_polls;
 CREATE TABLE tiki_polls (
-  pollId int(8) NOT NULL auto_increment,
-  title varchar(200) default NULL,
-  votes int(8) default NULL,
-  active char(1) default NULL,
-  publishDate int(14) default NULL,
-  voteConsiderationSpan int(4) default 0,
+  `pollId` int(8) NOT NULL auto_increment,
+  `title` varchar(200) default NULL,
+  `votes` int(8) default NULL,
+  `active` char(1) default NULL,
+  `publishDate` int(14) default NULL,
+  `voteConsiderationSpan` int(4) default 0,
   PRIMARY KEY (pollId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_preferences;
 CREATE TABLE tiki_preferences (
-  name varchar(40) NOT NULL default '',
-  value text,
-  PRIMARY KEY (name)
+  `name` varchar(40) NOT NULL default '',
+  `value` text,
+  PRIMARY KEY (`name`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_private_messages;
 CREATE TABLE tiki_private_messages (
-  messageId int(8) NOT NULL auto_increment,
-  toNickname varchar(200) NOT NULL default '',
-  poster varchar(200) NOT NULL default 'anonymous',
-  timestamp int(14) default NULL,
-  received tinyint(1) not null default 0,
-  message varchar(255) default NULL,
-  key(received),
-  key(timestamp),
-  PRIMARY KEY (messageId)
+  `messageId` int(8) NOT NULL auto_increment,
+  `toNickname` varchar(200) NOT NULL default '',
+  `poster` varchar(200) NOT NULL default 'anonymous',
+  `timestamp` int(14) default NULL,
+  `received` tinyint(1) not null default 0,
+  `message` varchar(255) default NULL,
+  PRIMARY KEY (`messageId`),
+  KEY (`received`),
+  KEY (`timestamp`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_programmed_content;
 CREATE TABLE tiki_programmed_content (
-  pId int(8) NOT NULL auto_increment,
-  contentId int(8) NOT NULL default '0',
-  publishDate int(14) NOT NULL default '0',
-  data text,
+  `pId` int(8) NOT NULL auto_increment,
+  `contentId` int(8) NOT NULL default '0',
+  `publishDate` int(14) NOT NULL default '0',
+  `data` text,
   PRIMARY KEY (pId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_quiz_question_options;
 CREATE TABLE tiki_quiz_question_options (
-  optionId int(10) NOT NULL auto_increment,
-  questionId int(10) default NULL,
-  optionText text,
-  points int(4) default NULL,
+  `optionId` int(10) NOT NULL auto_increment,
+  `questionId` int(10) default NULL,
+  `optionText` text,
+  `points` int(4) default NULL,
   PRIMARY KEY (optionId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_quiz_questions;
 CREATE TABLE tiki_quiz_questions (
-  questionId int(10) NOT NULL auto_increment,
-  quizId int(10) default NULL,
-  question text,
-  position int(4) default NULL,
-  type char(1) default NULL,
-  maxPoints int(4) default NULL,
+  `questionId` int(10) NOT NULL auto_increment,
+  `quizId` int(10) default NULL,
+  `question` text,
+  `position` int(4) default NULL,
+  `type` char(1) default NULL,
+  `maxPoints` int(4) default NULL,
   PRIMARY KEY (questionId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_quiz_results;
 CREATE TABLE tiki_quiz_results (
-  resultId int(10) NOT NULL auto_increment,
-  quizId int(10) default NULL,
-  fromPoints int(4) default NULL,
-  toPoints int(4) default NULL,
-  answer text,
+  `resultId` int(10) NOT NULL auto_increment,
+  `quizId` int(10) default NULL,
+  `fromPoints` int(4) default NULL,
+  `toPoints` int(4) default NULL,
+  `answer` text,
   PRIMARY KEY (resultId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_quiz_stats;
 CREATE TABLE tiki_quiz_stats (
-  quizId int(10) NOT NULL default '0',
-  questionId int(10) NOT NULL default '0',
-  optionId int(10) NOT NULL default '0',
-  votes int(10) default NULL,
+  `quizId` int(10) NOT NULL default '0',
+  `questionId` int(10) NOT NULL default '0',
+  `optionId` int(10) NOT NULL default '0',
+  `votes` int(10) default NULL,
   PRIMARY KEY (quizId,questionId,optionId)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_quiz_stats_sum;
 CREATE TABLE tiki_quiz_stats_sum (
-  quizId int(10) NOT NULL default '0',
-  quizName varchar(255) default NULL,
-  timesTaken int(10) default NULL,
-  avgpoints decimal(5,2) default NULL,
-  avgavg decimal(5,2) default NULL,
-  avgtime decimal(5,2) default NULL,
+  `quizId` int(10) NOT NULL default '0',
+  `quizName` varchar(255) default NULL,
+  `timesTaken` int(10) default NULL,
+  `avgpoints` decimal(5,2) default NULL,
+  `avgavg` decimal(5,2) default NULL,
+  `avgtime` decimal(5,2) default NULL,
   PRIMARY KEY (quizId)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_quizzes;
 CREATE TABLE tiki_quizzes (
-  quizId int(10) NOT NULL auto_increment,
-  name varchar(255) default NULL,
-  description text,
-  canRepeat char(1) default NULL,
-  storeResults char(1) default NULL,
-  questionsPerPage int(4) default NULL,
-  timeLimited char(1) default NULL,
-  timeLimit int(14) default NULL,
-  created int(14) default NULL,
-  taken int(10) default NULL,
-  immediateFeedback char(1) default NULL,
-  showAnswers char(1) default NULL,
-  shuffleQuestions char(1) default NULL,
-  shuffleAnswers char(1) default NULL,
-  publishDate int(14) default NULL,
-  expireDate int(14) default NULL,
-  bDeleted char(1) default NULL,
-  nVersion int(4) NOT NULL,
-  nAuthor int(4) default NULL,
-  bOnline char(1) default NULL,
-  bRandomQuestions char(1) default NULL,
-  nRandomQuestions tinyint(4) default NULL,
-  bLimitQuestionsPerPage char(1) default NULL,
-  nLimitQuestionsPerPage tinyint(4) default NULL,
-  bMultiSession char(1) default NULL,
-  nCanRepeat tinyint(4) default NULL,
-  sGradingMethod varchar(80) default NULL,
-  sShowScore varchar(80) default NULL,
-  sShowCorrectAnswers varchar(80) default NULL,
-  sPublishStats varchar(80) default NULL,
-  bAdditionalQuestions char(1) default NULL,
-  bForum char(1) default NULL,
-  sForum varchar(80) default NULL,
-  sPrologue text,
-  sData text,
-  sEpilogue text,
-  passingperct int(4) default 0,
+  `quizId` int(10) NOT NULL auto_increment,
+  `name` varchar(255) default NULL,
+  `description` text,
+  `canRepeat` char(1) default NULL,
+  `storeResults` char(1) default NULL,
+  `questionsPerPage` int(4) default NULL,
+  `timeLimited` char(1) default NULL,
+  `timeLimit` int(14) default NULL,
+  `created` int(14) default NULL,
+  `taken` int(10) default NULL,
+  `immediateFeedback` char(1) default NULL,
+  `showAnswers` char(1) default NULL,
+  `shuffleQuestions` char(1) default NULL,
+  `shuffleAnswers` char(1) default NULL,
+  `publishDate` int(14) default NULL,
+  `expireDate` int(14) default NULL,
+  `bDeleted` char(1) default NULL,
+  `nVersion` int(4) NOT NULL,
+  `nAuthor` int(4) default NULL,
+  `bOnline` char(1) default NULL,
+  `bRandomQuestions` char(1) default NULL,
+  `nRandomQuestions` tinyint(4) default NULL,
+  `bLimitQuestionsPerPage` char(1) default NULL,
+  `nLimitQuestionsPerPage` tinyint(4) default NULL,
+  `bMultiSession` char(1) default NULL,
+  `nCanRepeat` tinyint(4) default NULL,
+  `sGradingMethod` varchar(80) default NULL,
+  `sShowScore` varchar(80) default NULL,
+  `sShowCorrectAnswers` varchar(80) default NULL,
+  `sPublishStats` varchar(80) default NULL,
+  `bAdditionalQuestions` char(1) default NULL,
+  `bForum` char(1) default NULL,
+  `sForum` varchar(80) default NULL,
+  `sPrologue` text,
+  `sData` text,
+  `sEpilogue` text,
+  `passingperct` int(4) default 0,
   PRIMARY KEY (quizId, nVersion)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_received_articles;
 CREATE TABLE tiki_received_articles (
-  receivedArticleId int(14) NOT NULL auto_increment,
-  receivedFromSite varchar(200) default NULL,
-  receivedFromUser varchar(200) default NULL,
-  receivedDate int(14) default NULL,
-  title varchar(80) default NULL,
-  authorName varchar(60) default NULL,
-  size int(12) default NULL,
-  useImage char(1) default NULL,
-  image_name varchar(80) default NULL,
-  image_type varchar(80) default NULL,
-  image_size int(14) default NULL,
-  image_x int(4) default NULL,
-  image_y int(4) default NULL,
-  image_data longblob,
-  publishDate int(14) default NULL,
-  expireDate int(14) default NULL,
-  created int(14) default NULL,
-  heading text,
-  body longblob,
-  hash varchar(32) default NULL,
-  author varchar(200) default NULL,
-  type varchar(50) default NULL,
-  rating decimal(3,2) default NULL,
+  `receivedArticleId` int(14) NOT NULL auto_increment,
+  `receivedFromSite` varchar(200) default NULL,
+  `receivedFromUser` varchar(200) default NULL,
+  `receivedDate` int(14) default NULL,
+  `title` varchar(80) default NULL,
+  `authorName` varchar(60) default NULL,
+  `size` int(12) default NULL,
+  `useImage` char(1) default NULL,
+  `image_name` varchar(80) default NULL,
+  `image_type` varchar(80) default NULL,
+  `image_size` int(14) default NULL,
+  `image_x` int(4) default NULL,
+  `image_y` int(4) default NULL,
+  `image_data` longblob,
+  `publishDate` int(14) default NULL,
+  `expireDate` int(14) default NULL,
+  `created` int(14) default NULL,
+  `heading` text,
+  `body` longblob,
+  `hash` varchar(32) default NULL,
+  `author` varchar(200) default NULL,
+  `type` varchar(50) default NULL,
+  `rating` decimal(3,2) default NULL,
   PRIMARY KEY (receivedArticleId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_received_pages;
 CREATE TABLE tiki_received_pages (
-  receivedPageId int(14) NOT NULL auto_increment,
-  pageName varchar(160) NOT NULL default '',
-  data longblob,
-  description varchar(200) default NULL,
-  comment varchar(200) default NULL,
-  receivedFromSite varchar(200) default NULL,
-  receivedFromUser varchar(200) default NULL,
-  receivedDate int(14) default NULL,
-  parent varchar(255) default NULL,
-  position tinyint(3) unsigned default NULL,
-  alias varchar(255) default NULL,
-  structureName varchar(250) default NULL,
-  parentName varchar(250) default NULL,
-  page_alias varchar(250) default '',
-  pos int(4) default NULL,
+  `receivedPageId` int(14) NOT NULL auto_increment,
+  `pageName` varchar(160) NOT NULL default '',
+  `data` longblob,
+  `description` varchar(200) default NULL,
+  `comment` varchar(200) default NULL,
+  `receivedFromSite` varchar(200) default NULL,
+  `receivedFromUser` varchar(200) default NULL,
+  `receivedDate` int(14) default NULL,
+  `parent` varchar(255) default NULL,
+  `position` tinyint(3) unsigned default NULL,
+  `alias` varchar(255) default NULL,
+  `structureName` varchar(250) default NULL,
+  `parentName` varchar(250) default NULL,
+  `page_alias` varchar(250) default '',
+  `pos` int(4) default NULL,
   PRIMARY KEY (receivedPageId),
   KEY structureName (structureName)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -2004,30 +2004,30 @@
 
 DROP TABLE IF EXISTS tiki_referer_stats;
 CREATE TABLE tiki_referer_stats (
-  referer varchar(255) NOT NULL default '',
-  hits int(10) default NULL,
-  last int(14) default NULL,
+  `referer` varchar(255) NOT NULL default '',
+  `hits` int(10) default NULL,
+  `last` int(14) default NULL,
   PRIMARY KEY (referer)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_related_categories;
 CREATE TABLE tiki_related_categories (
-  categId int(10) NOT NULL default '0',
-  relatedTo int(10) NOT NULL default '0',
+  `categId` int(10) NOT NULL default '0',
+  `relatedTo` int(10) NOT NULL default '0',
   PRIMARY KEY (categId,relatedTo)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_rss_modules;
 CREATE TABLE tiki_rss_modules (
-  rssId int(8) NOT NULL auto_increment,
-  name varchar(30) NOT NULL default '',
-  description text,
-  url varchar(255) NOT NULL default '',
-  refresh int(8) default NULL,
-  lastUpdated int(14) default NULL,
-  showTitle char(1) default 'n',
-  showPubDate char(1) default 'n',
-  content longblob,
+  `rssId` int(8) NOT NULL auto_increment,
+  `name` varchar(30) NOT NULL default '',
+  `description` text,
+  `url` varchar(255) NOT NULL default '',
+  `refresh` int(8) default NULL,
+  `lastUpdated` int(14) default NULL,
+  `showTitle` char(1) default 'n',
+  `showPubDate` char(1) default 'n',
+  `content` longblob,
   PRIMARY KEY (rssId),
   KEY name (name)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -2034,21 +2034,21 @@
 
 DROP TABLE IF EXISTS tiki_rss_feeds;
 CREATE TABLE tiki_rss_feeds (
-  name varchar(30) NOT NULL default '',
-  rssVer char(1) NOT NULL default '1',
-  refresh int(8) default '300',
-  lastUpdated int(14) default NULL,
-  cache longblob,
+  `name` varchar(30) NOT NULL default '',
+  `rssVer` char(1) NOT NULL default '1',
+  `refresh` int(8) default '300',
+  `lastUpdated` int(14) default NULL,
+  `cache` longblob,
   PRIMARY KEY (name,rssVer)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_searchindex;
 CREATE TABLE tiki_searchindex(
-  searchword varchar(80) NOT NULL default '',
-  location varchar(80) NOT NULL default '',
-  page varchar(255) NOT NULL default '',
-  count int(11) NOT NULL default '1',
-  last_update int(11) NOT NULL default '0',
+  `searchword` varchar(80) NOT NULL default '',
+  `location` varchar(80) NOT NULL default '',
+  `page` varchar(255) NOT NULL default '',
+  `count` int(11) NOT NULL default '1',
+  `last_update` int(11) NOT NULL default '0',
   PRIMARY KEY (searchword,location,page(80)),
   KEY last_update (last_update),
   KEY location (location(50), page(200))
@@ -2057,9 +2057,9 @@
 -- LRU (last recently used) list for searching parts of words
 DROP TABLE IF EXISTS tiki_searchsyllable;
 CREATE TABLE tiki_searchsyllable(
-  syllable varchar(80) NOT NULL default '',
-  lastUsed int(11) NOT NULL default '0',
-  lastUpdated int(11) NOT NULL default '0',
+  `syllable` varchar(80) NOT NULL default '',
+  `lastUsed` int(11) NOT NULL default '0',
+  `lastUpdated` int(11) NOT NULL default '0',
   PRIMARY KEY (syllable),
   KEY lastUsed (lastUsed)
 ) ENGINE=MyISAM;
@@ -2067,24 +2067,24 @@
 -- searchword caching table for search syllables
 DROP TABLE IF EXISTS tiki_searchwords;
 CREATE TABLE tiki_searchwords(
-  syllable varchar(80) NOT NULL default '',
-  searchword varchar(80) NOT NULL default '',
+  `syllable` varchar(80) NOT NULL default '',
+  `searchword` varchar(80) NOT NULL default '',
   PRIMARY KEY (syllable,searchword)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_search_stats;
 CREATE TABLE tiki_search_stats (
-  term varchar(50) NOT NULL default '',
-  hits int(10) default NULL,
+  `term` varchar(50) NOT NULL default '',
+  `hits` int(10) default NULL,
   PRIMARY KEY (term)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_secdb;
 CREATE TABLE tiki_secdb(
-  md5_value varchar(32) NOT NULL,
-  filename varchar(250) NOT NULL,
-  tiki_version varchar(60) NOT NULL,
-  severity int(4) NOT NULL default '0',
+  `md5_value` varchar(32) NOT NULL,
+  `filename` varchar(250) NOT NULL,
+  `tiki_version` varchar(60) NOT NULL,
+  `severity` int(4) NOT NULL default '0',
   PRIMARY KEY (md5_value,filename(100),tiki_version),
   KEY sdb_fn (filename)
 ) ENGINE=MyISAM;
@@ -2091,40 +2091,40 @@
 
 DROP TABLE IF EXISTS tiki_semaphores;
 CREATE TABLE tiki_semaphores (
-  semName varchar(250) NOT NULL default '',
-  objectType varchar(20) default 'wiki page',
-  user varchar(200) NOT NULL default '',
-  timestamp int(14) default NULL,
+  `semName` varchar(250) NOT NULL default '',
+  `objectType` varchar(20) default 'wiki page',
+  `user` varchar(200) NOT NULL default '',
+  `timestamp` int(14) default NULL,
   PRIMARY KEY (semName)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_sent_newsletters;
 CREATE TABLE tiki_sent_newsletters (
-  editionId int(12) NOT NULL auto_increment,
-  nlId int(12) NOT NULL default '0',
-  users int(10) default NULL,
-  sent int(14) default NULL,
-  subject varchar(200) default NULL,
-  data longblob,
-  datatxt longblob,
+  `editionId` int(12) NOT NULL auto_increment,
+  `nlId` int(12) NOT NULL default '0',
+  `users` int(10) default NULL,
+  `sent` int(14) default NULL,
+  `subject` varchar(200) default NULL,
+  `data` longblob,
+  `datatxt` longblob,
   PRIMARY KEY (editionId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_sent_newsletters_errors;
 CREATE TABLE tiki_sent_newsletters_errors (
-  editionId int(12),
-  email varchar(255),
-  login varchar(40) default '',
-  error char(1) default '',
+  `editionId` int(12),
+  `email` varchar(255),
+  `login` varchar(40) default '',
+  `error` char(1) default '',
   KEY (editionId)
 ) ENGINE=MyISAM ;
 
 DROP TABLE IF EXISTS tiki_sessions;
 CREATE TABLE tiki_sessions (
-  sessionId varchar(32) NOT NULL default '',
-  user varchar(200) default '',
-  timestamp int(14) default NULL,
-  tikihost varchar(200) default NULL,
+  `sessionId` varchar(32) NOT NULL default '',
+  `user` varchar(200) default '',
+  `timestamp` int(14) default NULL,
+  `tikihost` varchar(200) default NULL,
   PRIMARY KEY (sessionId),
   KEY user (user),
   KEY timestamp (timestamp)
@@ -2132,28 +2132,28 @@
 
 DROP TABLE IF EXISTS tiki_sheet_layout;
 CREATE TABLE tiki_sheet_layout (
-  sheetId int(8) NOT NULL default '0',
-  begin int(10) NOT NULL default '0',
-  end int(10) default NULL,
-  headerRow int(4) NOT NULL default '0',
-  footerRow int(4) NOT NULL default '0',
-  className varchar(64) default NULL,
+  `sheetId` int(8) NOT NULL default '0',
+  `begin` int(10) NOT NULL default '0',
+  `end` int(10) default NULL,
+  `headerRow` int(4) NOT NULL default '0',
+  `footerRow` int(4) NOT NULL default '0',
+  `className` varchar(64) default NULL,
   UNIQUE KEY sheetId (sheetId,begin)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_sheet_values;
 CREATE TABLE tiki_sheet_values (
-  sheetId int(8) NOT NULL default '0',
-  begin int(10) NOT NULL default '0',
-  end int(10) default NULL,
-  rowIndex int(4) NOT NULL default '0',
-  columnIndex int(4) NOT NULL default '0',
-  value varchar(255) default NULL,
-  calculation varchar(255) default NULL,
-  width int(4) NOT NULL default '1',
-  height int(4) NOT NULL default '1',
-  format varchar(255) default NULL,
-  user varchar(200) default '',
+  `sheetId` int(8) NOT NULL default '0',
+  `begin` int(10) NOT NULL default '0',
+  `end` int(10) default NULL,
+  `rowIndex` int(4) NOT NULL default '0',
+  `columnIndex` int(4) NOT NULL default '0',
+  `value` varchar(255) default NULL,
+  `calculation` varchar(255) default NULL,
+  `width` int(4) NOT NULL default '1',
+  `height` int(4) NOT NULL default '1',
+  `format` varchar(255) default NULL,
+  `user` varchar(200) default '',
   UNIQUE KEY sheetId (sheetId,begin,rowIndex,columnIndex),
   KEY sheetId_2 (sheetId,rowIndex,columnIndex)
 ) ENGINE=MyISAM;
@@ -2160,46 +2160,46 @@
 
 DROP TABLE IF EXISTS tiki_sheets;
 CREATE TABLE tiki_sheets (
-  sheetId int(8) NOT NULL auto_increment,
-  title varchar(200) NOT NULL default '',
-  description text,
-  author varchar(200) NOT NULL default '',
+  `sheetId` int(8) NOT NULL auto_increment,
+  `title` varchar(200) NOT NULL default '',
+  `description` text,
+  `author` varchar(200) NOT NULL default '',
   PRIMARY KEY (sheetId)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_shoutbox;
 CREATE TABLE tiki_shoutbox (
-  msgId int(10) NOT NULL auto_increment,
-  message varchar(255) default NULL,
-  timestamp int(14) default NULL,
-  user varchar(200) NULL default '',
-  hash varchar(32) default NULL,
+  `msgId` int(10) NOT NULL auto_increment,
+  `message` varchar(255) default NULL,
+  `timestamp` int(14) default NULL,
+  `user` varchar(200) NULL default '',
+  `hash` varchar(32) default NULL,
   PRIMARY KEY (msgId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_shoutbox_words;
 CREATE TABLE tiki_shoutbox_words (
-  word VARCHAR( 40 ) NOT NULL ,
-  qty INT DEFAULT '0' NOT NULL ,
+  `word` VARCHAR( 40 ) NOT NULL ,
+  `qty` INT DEFAULT '0' NOT NULL ,
   PRIMARY KEY (word)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_structure_versions;
 CREATE TABLE tiki_structure_versions (
-  structure_id int(14) NOT NULL auto_increment,
-  version int(14) default NULL,
+  `structure_id` int(14) NOT NULL auto_increment,
+  `version` int(14) default NULL,
   PRIMARY KEY (structure_id)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_structures;
 CREATE TABLE tiki_structures (
-  page_ref_id int(14) NOT NULL auto_increment,
-  structure_id int(14) NOT NULL,
-  parent_id int(14) default NULL,
-  page_id int(14) NOT NULL,
-  page_version int(8) default NULL,
-  page_alias varchar(240) NOT NULL default '',
-  pos int(4) default NULL,
+  `page_ref_id` int(14) NOT NULL auto_increment,
+  `structure_id` int(14) NOT NULL,
+  `parent_id` int(14) default NULL,
+  `page_id` int(14) NOT NULL,
+  `page_version` int(8) default NULL,
+  `page_alias` varchar(240) NOT NULL default '',
+  `pos` int(4) default NULL,
   PRIMARY KEY (page_ref_id),
   KEY pidpaid (page_id,parent_id),
   KEY page_id (page_id)
@@ -2207,164 +2207,164 @@
 
 DROP TABLE IF EXISTS tiki_submissions;
 CREATE TABLE tiki_submissions (
-  subId int(8) NOT NULL auto_increment,
-  topline varchar(255) default NULL,
-  title varchar(255) default NULL,
-  subtitle varchar(255) default NULL,
-  linkto varchar(255) default NULL,
-  lang varchar(16) default NULL,
-  authorName varchar(60) default NULL,
-  topicId int(14) default NULL,
-  topicName varchar(40) default NULL,
-  size int(12) default NULL,
-  useImage char(1) default NULL,
-  image_name varchar(80) default NULL,
-  image_caption text default NULL,
-  image_type varchar(80) default NULL,
-  image_size int(14) default NULL,
-  image_x int(4) default NULL,
-  image_y int(4) default NULL,
-  image_data longblob,
-  publishDate int(14) default NULL,
-  expireDate int(14) default NULL,
-  created int(14) default NULL,
-  bibliographical_references text,
-  resume text,
-  heading text,
-  body text,
-  hash varchar(32) default NULL,
-  author varchar(200) NOT NULL default '',
-  nbreads int(14) default NULL,
-  votes int(8) default NULL,
-  points int(14) default NULL,
-  type varchar(50) default NULL,
-  rating decimal(3,2) default NULL,
-  isfloat char(1) default NULL,
+  `subId` int(8) NOT NULL auto_increment,
+  `topline` varchar(255) default NULL,
+  `title` varchar(255) default NULL,
+  `subtitle` varchar(255) default NULL,
+  `linkto` varchar(255) default NULL,
+  `lang` varchar(16) default NULL,
+  `authorName` varchar(60) default NULL,
+  `topicId` int(14) default NULL,
+  `topicName` varchar(40) default NULL,
+  `size` int(12) default NULL,
+  `useImage` char(1) default NULL,
+  `image_name` varchar(80) default NULL,
+  `image_caption` text default NULL,
+  `image_type` varchar(80) default NULL,
+  `image_size` int(14) default NULL,
+  `image_x` int(4) default NULL,
+  `image_y` int(4) default NULL,
+  `image_data` longblob,
+  `publishDate` int(14) default NULL,
+  `expireDate` int(14) default NULL,
+  `created` int(14) default NULL,
+  `bibliographical_references` text,
+  `resume` text,
+  `heading` text,
+  `body` text,
+  `hash` varchar(32) default NULL,
+  `author` varchar(200) NOT NULL default '',
+  `nbreads` int(14) default NULL,
+  `votes` int(8) default NULL,
+  `points` int(14) default NULL,
+  `type` varchar(50) default NULL,
+  `rating` decimal(3,2) default NULL,
+  `isfloat` char(1) default NULL,
   PRIMARY KEY (subId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_suggested_faq_questions;
 CREATE TABLE tiki_suggested_faq_questions (
-  sfqId int(10) NOT NULL auto_increment,
-  faqId int(10) NOT NULL default '0',
-  question text,
-  answer text,
-  created int(14) default NULL,
-  user varchar(200) NOT NULL default '',
+  `sfqId` int(10) NOT NULL auto_increment,
+  `faqId` int(10) NOT NULL default '0',
+  `question` text,
+  `answer` text,
+  `created` int(14) default NULL,
+  `user` varchar(200) NOT NULL default '',
   PRIMARY KEY (sfqId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_survey_question_options;
 CREATE TABLE tiki_survey_question_options (
-  optionId int(12) NOT NULL auto_increment,
-  questionId int(12) NOT NULL default '0',
-  qoption text,
-  votes int(10) default NULL,
+  `optionId` int(12) NOT NULL auto_increment,
+  `questionId` int(12) NOT NULL default '0',
+  `qoption` text,
+  `votes` int(10) default NULL,
   PRIMARY KEY (optionId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_survey_questions;
 CREATE TABLE tiki_survey_questions (
-  questionId int(12) NOT NULL auto_increment,
-  surveyId int(12) NOT NULL default '0',
-  question text,
-  options text,
-  type char(1) default NULL,
-  position int(5) default NULL,
-  votes int(10) default NULL,
-  value int(10) default NULL,
-  average decimal(4,2) default NULL,
-  mandatory char(1) NOT NULL default 'n',
-  max_answers int(5) NOT NULL default 0,
-  min_answers int(5) NOT NULL default 0,
+  `questionId` int(12) NOT NULL auto_increment,
+  `surveyId` int(12) NOT NULL default '0',
+  `question` text,
+  `options` text,
+  `type` char(1) default NULL,
+  `position` int(5) default NULL,
+  `votes` int(10) default NULL,
+  `value` int(10) default NULL,
+  `average` decimal(4,2) default NULL,
+  `mandatory` char(1) NOT NULL default 'n',
+  `max_answers` int(5) NOT NULL default 0,
+  `min_answers` int(5) NOT NULL default 0,
   PRIMARY KEY (questionId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_surveys;
 CREATE TABLE tiki_surveys (
-  surveyId int(12) NOT NULL auto_increment,
-  name varchar(200) default NULL,
-  description text,
-  taken int(10) default NULL,
-  lastTaken int(14) default NULL,
-  created int(14) default NULL,
-  status char(1) default NULL,
+  `surveyId` int(12) NOT NULL auto_increment,
+  `name` varchar(200) default NULL,
+  `description` text,
+  `taken` int(10) default NULL,
+  `lastTaken` int(14) default NULL,
+  `created` int(14) default NULL,
+  `status` char(1) default NULL,
   PRIMARY KEY (surveyId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_tags;
 CREATE TABLE tiki_tags (
-  tagName varchar(80) NOT NULL default '',
-  pageName varchar(160) NOT NULL default '',
-  hits int(8) default NULL,
-  description varchar(200) default NULL,
-  data longblob,
-  lastModif int(14) default NULL,
-  comment varchar(200) default NULL,
-  version int(8) NOT NULL default '0',
-  user varchar(200) NOT NULL default '',
-  ip varchar(15) default NULL,
-  flag char(1) default NULL,
+  `tagName` varchar(80) NOT NULL default '',
+  `pageName` varchar(160) NOT NULL default '',
+  `hits` int(8) default NULL,
+  `description` varchar(200) default NULL,
+  `data` longblob,
+  `lastModif` int(14) default NULL,
+  `comment` varchar(200) default NULL,
+  `version` int(8) NOT NULL default '0',
+  `user` varchar(200) NOT NULL default '',
+  `ip` varchar(15) default NULL,
+  `flag` char(1) default NULL,
   PRIMARY KEY (tagName,pageName)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_theme_control_categs;
 CREATE TABLE tiki_theme_control_categs (
-  categId int(12) NOT NULL default '0',
-  theme varchar(250) NOT NULL default '',
+  `categId` int(12) NOT NULL default '0',
+  `theme` varchar(250) NOT NULL default '',
   PRIMARY KEY (categId)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_theme_control_objects;
 CREATE TABLE tiki_theme_control_objects (
-  objId varchar(250) NOT NULL default '',
-  type varchar(250) NOT NULL default '',
-  name varchar(250) NOT NULL default '',
-  theme varchar(250) NOT NULL default '',
+  `objId` varchar(250) NOT NULL default '',
+  `type` varchar(250) NOT NULL default '',
+  `name` varchar(250) NOT NULL default '',
+  `theme` varchar(250) NOT NULL default '',
   PRIMARY KEY (objId(100), type(100))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_theme_control_sections;
 CREATE TABLE tiki_theme_control_sections (
-  section varchar(250) NOT NULL default '',
-  theme varchar(250) NOT NULL default '',
+  `section` varchar(250) NOT NULL default '',
+  `theme` varchar(250) NOT NULL default '',
   PRIMARY KEY (section)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_topics;
 CREATE TABLE tiki_topics (
-  topicId int(14) NOT NULL auto_increment,
-  name varchar(40) default NULL,
-  image_name varchar(80) default NULL,
-  image_type varchar(80) default NULL,
-  image_size int(14) default NULL,
-  image_data longblob,
-  active char(1) default NULL,
-  created int(14) default NULL,
+  `topicId` int(14) NOT NULL auto_increment,
+  `name` varchar(40) default NULL,
+  `image_name` varchar(80) default NULL,
+  `image_type` varchar(80) default NULL,
+  `image_size` int(14) default NULL,
+  `image_data` longblob,
+  `active` char(1) default NULL,
+  `created` int(14) default NULL,
   PRIMARY KEY (topicId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_tracker_fields;
 CREATE TABLE tiki_tracker_fields (
-  fieldId int(12) NOT NULL auto_increment,
-  trackerId int(12) NOT NULL default '0',
-  name varchar(255) default NULL,
-  options text,
-  type varchar(15) default NULL,
-  isMain char(1) default NULL,
-  isTblVisible char(1) default NULL,
-  position int(4) default NULL,
-  isSearchable char(1) NOT NULL default 'y',
-  isPublic char(1) NOT NULL default 'n',
-  isHidden char(1) NOT NULL default 'n',
-  isMandatory char(1) NOT NULL default 'n',
-  description text,
-  isMultilingual char(1) default 'n',
-  itemChoices text,
-  errorMsg text,
-  visibleBy text,
-  editableBy text,
-  descriptionIsParsed char(1) default 'n',
+  `fieldId` int(12) NOT NULL auto_increment,
+  `trackerId` int(12) NOT NULL default '0',
+  `name` varchar(255) default NULL,
+  `options` text,
+  `type` varchar(15) default NULL,
+  `isMain` char(1) default NULL,
+  `isTblVisible` char(1) default NULL,
+  `position` int(4) default NULL,
+  `isSearchable` char(1) NOT NULL default 'y',
+  `isPublic` char(1) NOT NULL default 'n',
+  `isHidden` char(1) NOT NULL default 'n',
+  `isMandatory` char(1) NOT NULL default 'n',
+  `description` text,
+  `isMultilingual` char(1) default 'n',
+  `itemChoices` text,
+  `errorMsg` text,
+  `visibleBy` text,
+  `editableBy` text,
+  `descriptionIsParsed` char(1) default 'n',
   PRIMARY KEY (fieldId),
   INDEX trackerId (trackerId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -2371,19 +2371,19 @@
 
 DROP TABLE IF EXISTS tiki_tracker_item_attachments;
 CREATE TABLE tiki_tracker_item_attachments (
-  attId int(12) NOT NULL auto_increment,
-  itemId int(12) NOT NULL default 0,
-  filename varchar(80) default NULL,
-  filetype varchar(80) default NULL,
-  filesize int(14) default NULL,
-  user varchar(200) default NULL,
-  data longblob,
-  path varchar(255) default NULL,
-  hits int(10) default NULL,
-  created int(14) default NULL,
-  comment varchar(250) default NULL,
-  longdesc blob,
-  version varchar(40) default NULL,
+  `attId` int(12) NOT NULL auto_increment,
+  `itemId` int(12) NOT NULL default 0,
+  `filename` varchar(80) default NULL,
+  `filetype` varchar(80) default NULL,
+  `filesize` int(14) default NULL,
+  `user` varchar(200) default NULL,
+  `data` longblob,
+  `path` varchar(255) default NULL,
+  `hits` int(10) default NULL,
+  `created` int(14) default NULL,
+  `comment` varchar(250) default NULL,
+  `longdesc` blob,
+  `version` varchar(40) default NULL,
   PRIMARY KEY (attId),
   INDEX itemId (itemId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -2390,21 +2390,21 @@
 
 DROP TABLE IF EXISTS tiki_tracker_item_comments;
 CREATE TABLE tiki_tracker_item_comments (
-  commentId int(12) NOT NULL auto_increment,
-  itemId int(12) NOT NULL default '0',
-  user varchar(200) default NULL,
-  data text,
-  title varchar(200) default NULL,
-  posted int(14) default NULL,
+  `commentId` int(12) NOT NULL auto_increment,
+  `itemId` int(12) NOT NULL default '0',
+  `user` varchar(200) default NULL,
+  `data` text,
+  `title` varchar(200) default NULL,
+  `posted` int(14) default NULL,
   PRIMARY KEY (commentId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_tracker_item_fields;
 CREATE TABLE tiki_tracker_item_fields (
-  itemId int(12) NOT NULL default '0',
-  fieldId int(12) NOT NULL default '0',
-  value text,
-  lang char(16) default NULL,
+  `itemId` int(12) NOT NULL default '0',
+  `fieldId` int(12) NOT NULL default '0',
+  `value` text,
+  `lang` char(16) default NULL,
   PRIMARY KEY (itemId,fieldId,lang),
   INDEX fieldId (fieldId),
   INDEX value (value(250)),
@@ -2414,11 +2414,11 @@
 
 DROP TABLE IF EXISTS tiki_tracker_items;
 CREATE TABLE tiki_tracker_items (
-  itemId int(12) NOT NULL auto_increment,
-  trackerId int(12) NOT NULL default '0',
-  created int(14) default NULL,
-  status char(1) default NULL,
-  lastModif int(14) default NULL,
+  `itemId` int(12) NOT NULL auto_increment,
+  `trackerId` int(12) NOT NULL default '0',
+  `created` int(14) default NULL,
+  `status` char(1) default NULL,
+  `lastModif` int(14) default NULL,
   PRIMARY KEY (itemId),
   INDEX trackerId (trackerId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -2425,37 +2425,37 @@
 
 DROP TABLE IF EXISTS tiki_tracker_options;
 CREATE TABLE tiki_tracker_options (
-  trackerId int(12) NOT NULL default '0',
-  name varchar(80) NOT NULL default '',
-  value text default NULL,
+  `trackerId` int(12) NOT NULL default '0',
+  `name` varchar(80) NOT NULL default '',
+  `value` text default NULL,
   PRIMARY KEY (trackerId,name(30))
 ) ENGINE=MyISAM ;
 
 DROP TABLE IF EXISTS tiki_trackers;
 CREATE TABLE tiki_trackers (
-  trackerId int(12) NOT NULL auto_increment,
-  name varchar(255) default NULL,
-  description text,
-  descriptionIsParsed varchar(1) NULL default '0',
-  created int(14) default NULL,
-  lastModif int(14) default NULL,
-  showCreated char(1) default NULL,
-  showStatus char(1) default NULL,
-  showLastModif char(1) default NULL,
-  useComments char(1) default NULL,
-  useAttachments char(1) default NULL,
-  showAttachments char(1) default NULL,
-  items int(10) default NULL,
-  showComments char(1) default NULL,
-  orderAttachments varchar(255) NOT NULL default 'filename,created,filesize,hits,desc',
+  `trackerId` int(12) NOT NULL auto_increment,
+  `name` varchar(255) default NULL,
+  `description` text,
+  `descriptionIsParsed` varchar(1) NULL default '0',
+  `created` int(14) default NULL,
+  `lastModif` int(14) default NULL,
+  `showCreated` char(1) default NULL,
+  `showStatus` char(1) default NULL,
+  `showLastModif` char(1) default NULL,
+  `useComments` char(1) default NULL,
+  `useAttachments` char(1) default NULL,
+  `showAttachments` char(1) default NULL,
+  `items` int(10) default NULL,
+  `showComments` char(1) default NULL,
+  `orderAttachments` varchar(255) NOT NULL default 'filename,created,filesize,hits,desc',
   PRIMARY KEY (trackerId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_untranslated;
 CREATE TABLE tiki_untranslated (
-  id int(14) NOT NULL auto_increment,
-  source tinyblob NOT NULL,
-  lang char(16) NOT NULL default '',
+  `id` int(14) NOT NULL auto_increment,
+  `source` tinyblob NOT NULL,
+  `lang` char(16) NOT NULL default '',
   PRIMARY KEY (source(255),lang),
   UNIQUE KEY id (id),
   KEY id_2 (id)
@@ -2463,97 +2463,97 @@
 
 DROP TABLE IF EXISTS tiki_user_answers;
 CREATE TABLE tiki_user_answers (
-  userResultId int(10) NOT NULL default '0',
-  quizId int(10) NOT NULL default '0',
-  questionId int(10) NOT NULL default '0',
-  optionId int(10) NOT NULL default '0',
+  `userResultId` int(10) NOT NULL default '0',
+  `quizId` int(10) NOT NULL default '0',
+  `questionId` int(10) NOT NULL default '0',
+  `optionId` int(10) NOT NULL default '0',
   PRIMARY KEY (userResultId,quizId,questionId,optionId)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_user_answers_uploads;
 CREATE TABLE tiki_user_answers_uploads (
-  answerUploadId int(4) NOT NULL auto_increment,
-  userResultId int(11) NOT NULL default '0',
-  questionId int(11) NOT NULL default '0',
-  filename varchar(255) NOT NULL default '',
-  filetype varchar(64) NOT NULL default '',
-  filesize varchar(255) NOT NULL default '',
-  filecontent longblob NOT NULL,
+  `answerUploadId` int(4) NOT NULL auto_increment,
+  `userResultId` int(11) NOT NULL default '0',
+  `questionId` int(11) NOT NULL default '0',
+  `filename` varchar(255) NOT NULL default '',
+  `filetype` varchar(64) NOT NULL default '',
+  `filesize` varchar(255) NOT NULL default '',
+  `filecontent` longblob NOT NULL,
   PRIMARY KEY (answerUploadId)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_user_assigned_modules;
 CREATE TABLE tiki_user_assigned_modules (
-  moduleId int(8) NOT NULL,
-  name varchar(200) NOT NULL default '',
-  position char(1) default NULL,
-  ord int(4) default NULL,
-  type char(1) default NULL,
-  user varchar(200) NOT NULL default '',
+  `moduleId` int(8) NOT NULL,
+  `name` varchar(200) NOT NULL default '',
+  `position` char(1) default NULL,
+  `ord` int(4) default NULL,
+  `type` char(1) default NULL,
+  `user` varchar(200) NOT NULL default '',
   PRIMARY KEY (name(30),user,position, ord)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_user_bookmarks_folders;
 CREATE TABLE tiki_user_bookmarks_folders (
-  folderId int(12) NOT NULL auto_increment,
-  parentId int(12) default NULL,
-  user varchar(200) NOT NULL default '',
-  name varchar(30) default NULL,
+  `folderId` int(12) NOT NULL auto_increment,
+  `parentId` int(12) default NULL,
+  `user` varchar(200) NOT NULL default '',
+  `name` varchar(30) default NULL,
   PRIMARY KEY (user,folderId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_user_bookmarks_urls;
 CREATE TABLE tiki_user_bookmarks_urls (
-  urlId int(12) NOT NULL auto_increment,
-  name varchar(30) default NULL,
-  url varchar(250) default NULL,
-  data longblob,
-  lastUpdated int(14) default NULL,
-  folderId int(12) NOT NULL default '0',
-  user varchar(200) NOT NULL default '',
+  `urlId` int(12) NOT NULL auto_increment,
+  `name` varchar(30) default NULL,
+  `url` varchar(250) default NULL,
+  `data` longblob,
+  `lastUpdated` int(14) default NULL,
+  `folderId` int(12) NOT NULL default '0',
+  `user` varchar(200) NOT NULL default '',
   PRIMARY KEY (urlId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_user_mail_accounts;
 CREATE TABLE tiki_user_mail_accounts (
-  accountId int(12) NOT NULL auto_increment,
-  user varchar(200) NOT NULL default '',
-  account varchar(50) NOT NULL default '',
-  pop varchar(255) default NULL,
-  current char(1) default NULL,
-  port int(4) default NULL,
-  username varchar(100) default NULL,
-  pass varchar(100) default NULL,
-  msgs int(4) default NULL,
-  smtp varchar(255) default NULL,
-  useAuth char(1) default NULL,
-  smtpPort int(4) default NULL,
-  flagsPublic char(1) default 'n',				-- COMMENT 'MatWho - Shared Group Mail box if y',
-  autoRefresh int(4) NOT NULL default 0,		-- COMMENT 'seconds for mail list to refresh, 0 = none',
-  imap varchar( 255 ) default NULL,
-  mbox varchar( 255 ) default NULL,
-  maildir varchar( 255 ) default NULL,
-  useSSL char( 1 ) NOT NULL default 'n',
+  `accountId` int(12) NOT NULL auto_increment,
+  `user` varchar(200) NOT NULL default '',
+  `account` varchar(50) NOT NULL default '',
+  `pop` varchar(255) default NULL,
+  `current` char(1) default NULL,
+  `port` int(4) default NULL,
+  `username` varchar(100) default NULL,
+  `pass` varchar(100) default NULL,
+  `msgs` int(4) default NULL,
+  `smtp` varchar(255) default NULL,
+  `useAuth` char(1) default NULL,
+  `smtpPort` int(4) default NULL,
+  `flagsPublic` char(1) default 'n',				-- COMMENT 'MatWho - Shared Group Mail box if y',
+  `autoRefresh` int(4) NOT NULL default 0,		-- COMMENT 'seconds for mail list to refresh, 0 = none',
+  `imap` varchar( 255 ) default NULL,
+  `mbox` varchar( 255 ) default NULL,
+  `maildir` varchar( 255 ) default NULL,
+  `useSSL` char( 1 ) NOT NULL default 'n',
   PRIMARY KEY (accountId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_user_menus;
 CREATE TABLE tiki_user_menus (
-  user varchar(200) NOT NULL default '',
-  menuId int(12) NOT NULL auto_increment,
-  url varchar(250) default NULL,
-  name varchar(40) default NULL,
-  position int(4) default NULL,
-  mode char(1) default NULL,
+  `user` varchar(200) NOT NULL default '',
+  `menuId` int(12) NOT NULL auto_increment,
+  `url` varchar(250) default NULL,
+  `name` varchar(40) default NULL,
+  `position` int(4) default NULL,
+  `mode` char(1) default NULL,
   PRIMARY KEY (menuId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_user_modules;
 CREATE TABLE tiki_user_modules (
-  name varchar(200) NOT NULL default '',
-  title varchar(40) default NULL,
-  data longblob,
-  parse char(1) default NULL,
+  `name` varchar(200) NOT NULL default '',
+  `title` varchar(40) default NULL,
+  `data` longblob,
+  `parse` char(1) default NULL,
   PRIMARY KEY (name)
 ) ENGINE=MyISAM;
 
@@ -2561,90 +2561,88 @@
 
 DROP TABLE IF EXISTS tiki_user_notes;
 CREATE TABLE tiki_user_notes (
-  user varchar(200) NOT NULL default '',
-  noteId int(12) NOT NULL auto_increment,
-  created int(14) default NULL,
-  name varchar(255) default NULL,
-  lastModif int(14) default NULL,
-  data text,
-  size int(14) default NULL,
-  parse_mode varchar(20) default NULL,
+  `user` varchar(200) NOT NULL default '',
+  `noteId` int(12) NOT NULL auto_increment,
+  `created` int(14) default NULL,
+  `name` varchar(255) default NULL,
+  `lastModif` int(14) default NULL,
+  `data` text,
+  `size` int(14) default NULL,
+  `parse_mode` varchar(20) default NULL,
   PRIMARY KEY (noteId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_user_postings;
 CREATE TABLE tiki_user_postings (
-  user varchar(200) NOT NULL default '',
-  posts int(12) default NULL,
-  last int(14) default NULL,
-  first int(14) default NULL,
-  level int(8) default NULL,
+  `user` varchar(200) NOT NULL default '',
+  `posts` int(12) default NULL,
+  `last` int(14) default NULL,
+  `first` int(14) default NULL,
+  `level` int(8) default NULL,
   PRIMARY KEY (user)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_user_preferences;
 CREATE TABLE tiki_user_preferences (
-  user varchar(200) NOT NULL default '',
-  prefName varchar(40) NOT NULL default '',
-  value varchar(250) default NULL,
+  `user` varchar(200) NOT NULL default '',
+  `prefName` varchar(40) NOT NULL default '',
+  `value` varchar(250) default NULL,
   PRIMARY KEY (user,prefName)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_user_quizzes;
 CREATE TABLE tiki_user_quizzes (
-  user varchar(200) default '',
-  quizId int(10) default NULL,
-  timestamp int(14) default NULL,
-  timeTaken int(14) default NULL,
-  points int(12) default NULL,
-  maxPoints int(12) default NULL,
-  resultId int(10) default NULL,
-  userResultId int(10) NOT NULL auto_increment,
+  `user` varchar(200) default '',
+  `quizId` int(10) default NULL,
+  `timestamp` int(14) default NULL,
+  `timeTaken` int(14) default NULL,
+  `points` int(12) default NULL,
+  `maxPoints` int(12) default NULL,
+  `resultId` int(10) default NULL,
+  `userResultId` int(10) NOT NULL auto_increment,
   PRIMARY KEY (userResultId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_user_taken_quizzes;
 CREATE TABLE tiki_user_taken_quizzes (
-  user varchar(200) NOT NULL default '',
-  quizId varchar(255) NOT NULL default '',
+  `user` varchar(200) NOT NULL default '',
+  `quizId` varchar(255) NOT NULL default '',
   PRIMARY KEY (user,quizId(50))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_user_tasks_history;
 CREATE TABLE tiki_user_tasks_history (
-  belongs_to integer(14) NOT NULL,                   -- the first task in a history it has the same id as the task id
-  task_version integer(4) NOT NULL DEFAULT 0,        -- version number for the history it starts with 0
-  title varchar(250) NOT NULL,                       -- title
-  description text DEFAULT NULL,                     -- description
-  start integer(14) DEFAULT NULL,                    -- date of the starting, if it is not set than there is no starting date
-  end integer(14) DEFAULT NULL,                      -- date of the end, if it is not set than there is not dealine
-  lasteditor varchar(200) NOT NULL,                  -- lasteditor: username of last editior
-  lastchanges integer(14) NOT NULL,                  -- date of last changes
-  priority integer(2) NOT NULL DEFAULT 3,                     -- priority
-  completed integer(14) DEFAULT NULL,                -- date of the completation if it is null it is not yet completed
-  deleted integer(14) DEFAULT NULL,                  -- date of the deleteation it it is null it is not deleted
-  status char(1) DEFAULT NULL,                       -- null := waiting,
-                                                     -- o := open / in progress,
-                                                     -- c := completed -> (percentage = 100)
-  percentage int(4) DEFAULT NULL,
-  accepted_creator char(1) DEFAULT NULL,             -- y - yes, n - no, null - waiting
-  accepted_user char(1) DEFAULT NULL,                -- y - yes, n - no, null - waiting
+  `belongs_to` integer(14) NOT NULL,                   -- the first task in a history it has the same id as the task id
+  `task_version` integer(4) NOT NULL DEFAULT 0,        -- version number for the history it starts with 0
+  `title` varchar(250) NOT NULL,                       -- title
+  `description` text DEFAULT NULL,                     -- description
+  `start` integer(14) DEFAULT NULL,                    -- date of the starting, if it is not set than there is no starting date
+  `end` integer(14) DEFAULT NULL,                      -- date of the end, if it is not set than there is not dealine
+  `lasteditor` varchar(200) NOT NULL,                  -- lasteditor: username of last editior
+  `lastchanges` integer(14) NOT NULL,                  -- date of last changes
+  `priority` integer(2) NOT NULL DEFAULT 3,                     -- priority
+  `completed` integer(14) DEFAULT NULL,                -- date of the completation if it is null it is not yet completed
+  `deleted` integer(14) DEFAULT NULL,                  -- date of the deleteation it it is null it is not deleted
+  `status` char(1) DEFAULT NULL,                       -- null := waiting, o := open / in progress, c := completed -> (percentage = 100)
+  `percentage` int(4) DEFAULT NULL,
+  `accepted_creator` char(1) DEFAULT NULL,             -- y - yes, n - no, null - waiting
+  `accepted_user` char(1) DEFAULT NULL,                -- y - yes, n - no, null - waiting
   PRIMARY KEY (belongs_to, task_version)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_user_tasks;
 CREATE TABLE tiki_user_tasks (
-  taskId integer(14) NOT NULL auto_increment,        -- task id
-  last_version integer(4) NOT NULL DEFAULT 0,        -- last version of the task starting with 0
-  user varchar(200) NOT NULL DEFAULT '',              -- task user
-  creator varchar(200) NOT NULL,                     -- username of creator
-  public_for_group varchar(30) DEFAULT NULL,         -- this group can also view the task, if it is null it is not public
-  rights_by_creator char(1) DEFAULT NULL,            -- null the user can delete the task,
-  created integer(14) NOT NULL,                      -- date of the creation
-  status char(1) default NULL,
-  priority int(2) default NULL,
-  completed int(14) default NULL,
-  percentage int(4) default NULL,
+  `taskId` integer(14) NOT NULL auto_increment,        -- task id
+  `last_version` integer(4) NOT NULL DEFAULT 0,        -- last version of the task starting with 0
+  `user` varchar(200) NOT NULL DEFAULT '',              -- task user
+  `creator` varchar(200) NOT NULL,                     -- username of creator
+  `public_for_group` varchar(30) DEFAULT NULL,         -- this group can also view the task, if it is null it is not public
+  `rights_by_creator` char(1) DEFAULT NULL,            -- null the user can delete the task,
+  `created` integer(14) NOT NULL,                      -- date of the creation
+  `status` char(1) default NULL,
+  `priority` int(2) default NULL,
+  `completed` int(14) default NULL,
+  `percentage` int(4) default NULL,
   PRIMARY KEY (taskId),
   UNIQUE(creator, created)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
@@ -2651,11 +2649,11 @@
 
 DROP TABLE IF EXISTS tiki_user_votings;
 CREATE TABLE tiki_user_votings (
-  user varchar(200) default '',
-  ip varchar(15) default NULL,
-  id varchar(255) NOT NULL default '',
-  optionId int(10) NOT NULL default 0,
-  time int(14) NOT NULL default 0,
+  `user` varchar(200) default '',
+  `ip` varchar(15) default NULL,
+  `id` varchar(255) NOT NULL default '',
+  `optionId` int(10) NOT NULL default 0,
+  `time` int(14) NOT NULL default 0,
   KEY (`user`(100),id(100)),
   KEY ip (`ip`),
   KEY id (`id`)
@@ -2663,14 +2661,14 @@
 
 DROP TABLE IF EXISTS tiki_user_watches;
 CREATE TABLE tiki_user_watches (
-  watchId int(12) NOT NULL auto_increment,
-  user varchar(200) NOT NULL default '',
-  event varchar(40) NOT NULL default '',
-  object varchar(200) NOT NULL default '',
-  title varchar(250) default NULL,
-  type varchar(200) default NULL,
-  url varchar(250) default NULL,
-  email varchar(200) default NULL,
+  `watchId` int(12) NOT NULL auto_increment,
+  `user` varchar(200) NOT NULL default '',
+  `event` varchar(40) NOT NULL default '',
+  `object` varchar(200) NOT NULL default '',
+  `title` varchar(250) default NULL,
+  `type` varchar(200) default NULL,
+  `url` varchar(250) default NULL,
+  `email` varchar(200) default NULL,
   KEY watchId (watchId),
   PRIMARY KEY (`user`(50),event,object(100),email(50))
 ) ENGINE=MyISAM;
@@ -2677,79 +2675,79 @@
 
 DROP TABLE IF EXISTS tiki_userfiles;
 CREATE TABLE tiki_userfiles (
-  user varchar(200) NOT NULL default '',
-  fileId int(12) NOT NULL auto_increment,
-  name varchar(200) default NULL,
-  filename varchar(200) default NULL,
-  filetype varchar(200) default NULL,
-  filesize varchar(200) default NULL,
-  data longblob,
-  hits int(8) default NULL,
-  isFile char(1) default NULL,
-  path varchar(255) default NULL,
-  created int(14) default NULL,
+  `user` varchar(200) NOT NULL default '',
+  `fileId` int(12) NOT NULL auto_increment,
+  `name` varchar(200) default NULL,
+  `filename` varchar(200) default NULL,
+  `filetype` varchar(200) default NULL,
+  `filesize` varchar(200) default NULL,
+  `data` longblob,
+  `hits` int(8) default NULL,
+  `isFile` char(1) default NULL,
+  `path` varchar(255) default NULL,
+  `created` int(14) default NULL,
   PRIMARY KEY (fileId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_userpoints;
 CREATE TABLE tiki_userpoints (
-  user varchar(200) NOT NULL default '',
-  points decimal(8,2) default NULL,
-  voted int(8) default NULL
+  `user` varchar(200) NOT NULL default '',
+  `points` decimal(8,2) default NULL,
+  `voted` int(8) default NULL
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_users;
 CREATE TABLE tiki_users (
-  user varchar(200) NOT NULL default '',
-  password varchar(40) default NULL,
-  email varchar(200) default NULL,
-  lastLogin int(14) default NULL,
+  `user` varchar(200) NOT NULL default '',
+  `password` varchar(40) default NULL,
+  `email` varchar(200) default NULL,
+  `lastLogin` int(14) default NULL,
   PRIMARY KEY (user)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_webmail_contacts;
 CREATE TABLE tiki_webmail_contacts (
-  contactId int(12) NOT NULL auto_increment,
-  firstName varchar(80) default NULL,
-  lastName varchar(80) default NULL,
-  email varchar(250) default NULL,
-  nickname varchar(200) default NULL,
-  user varchar(200) NOT NULL default '',
+  `contactId` int(12) NOT NULL auto_increment,
+  `firstName` varchar(80) default NULL,
+  `lastName` varchar(80) default NULL,
+  `email` varchar(250) default NULL,
+  `nickname` varchar(200) default NULL,
+  `user` varchar(200) NOT NULL default '',
   PRIMARY KEY (contactId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_webmail_contacts_groups;
 CREATE TABLE tiki_webmail_contacts_groups (
-  contactId int(12) NOT NULL,
-  groupName varchar(255) NOT NULL,
+  `contactId` int(12) NOT NULL,
+  `groupName` varchar(255) NOT NULL,
   PRIMARY KEY (contactId,groupName(200))
 ) ENGINE=MyISAM ;
 
 DROP TABLE IF EXISTS tiki_webmail_messages;
 CREATE TABLE tiki_webmail_messages (
-  accountId int(12) NOT NULL default '0',
-  mailId varchar(255) NOT NULL default '',
-  user varchar(200) NOT NULL default '',
-  isRead char(1) default NULL,
-  isReplied char(1) default NULL,
-  isFlagged char(1) default NULL,
-  flaggedMsg varchar(50) default '',
+  `accountId` int(12) NOT NULL default '0',
+  `mailId` varchar(255) NOT NULL default '',
+  `user` varchar(200) NOT NULL default '',
+  `isRead` char(1) default NULL,
+  `isReplied` char(1) default NULL,
+  `isFlagged` char(1) default NULL,
+  `flaggedMsg` varchar(50) default '',
   PRIMARY KEY (accountId,mailId)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_wiki_attachments;
 CREATE TABLE tiki_wiki_attachments (
-  attId int(12) NOT NULL auto_increment,
-  page varchar(200) NOT NULL default '',
-  filename varchar(80) default NULL,
-  filetype varchar(80) default NULL,
-  filesize int(14) default NULL,
-  user varchar(200) NOT NULL default '',
-  data longblob,
-  path varchar(255) default NULL,
-  hits int(10) default NULL,
-  created int(14) default NULL,
-  comment varchar(250) default NULL,
+  `attId` int(12) NOT NULL auto_increment,
+  `page` varchar(200) NOT NULL default '',
+  `filename` varchar(80) default NULL,
+  `filetype` varchar(80) default NULL,
+  `filesize` int(14) default NULL,
+  `user` varchar(200) NOT NULL default '',
+  `data` longblob,
+  `path` varchar(255) default NULL,
+  `hits` int(10) default NULL,
+  `created` int(14) default NULL,
+  `comment` varchar(250) default NULL,
   PRIMARY KEY (attId),
   KEY page (page)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -2756,18 +2754,18 @@
 
 DROP TABLE IF EXISTS tiki_zones;
 CREATE TABLE tiki_zones (
-  zone varchar(40) NOT NULL default '',
+  `zone` varchar(40) NOT NULL default '',
   PRIMARY KEY (zone)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_download;
 CREATE TABLE tiki_download (
-  id int(11) NOT NULL auto_increment,
-  object varchar(255) NOT NULL default '',
-  userId int(8) NOT NULL default '0',
-  type varchar(20) NOT NULL default '',
-  date int(14) NOT NULL default '0',
-  IP varchar(50) NOT NULL default '',
+  `id` int(11) NOT NULL auto_increment,
+  `object` varchar(255) NOT NULL default '',
+  `userId` int(8) NOT NULL default '0',
+  `type` varchar(20) NOT NULL default '',
+  `date` int(14) NOT NULL default '0',
+  `IP` varchar(50) NOT NULL default '',
   PRIMARY KEY (id),
   KEY object (object,userId,type),
   KEY userId (userId),
@@ -2777,9 +2775,9 @@
 
 DROP TABLE IF EXISTS users_grouppermissions;
 CREATE TABLE users_grouppermissions (
-  groupName varchar(255) NOT NULL default '',
-  permName varchar(40) NOT NULL default '',
-  value char(1) default '',
+  `groupName` varchar(255) NOT NULL default '',
+  `permName` varchar(40) NOT NULL default '',
+  `value` char(1) default '',
   PRIMARY KEY (groupName(30),permName)
 ) ENGINE=MyISAM;
 
@@ -2788,20 +2786,20 @@
 
 DROP TABLE IF EXISTS users_groups;
 CREATE TABLE users_groups (
-  id int(11) NOT NULL auto_increment,
-  groupName varchar(255) NOT NULL default '',
-  groupDesc varchar(255) default NULL,
-  groupHome varchar(255),
-  usersTrackerId int(11),
-  groupTrackerId int(11),
-  usersFieldId int(11),
-  groupFieldId int(11),
-  registrationChoice char(1) default NULL,
-  registrationUsersFieldIds text,
-  userChoice char(1) default NULL,
-  groupDefCat int(12) default 0,
-  groupTheme varchar(255) default '',
-  isExternal char(1) default 'n',
+  `id` int(11) NOT NULL auto_increment,
+  `groupName` varchar(255) NOT NULL default '',
+  `groupDesc` varchar(255) default NULL,
+  `groupHome` varchar(255),
+  `usersTrackerId` int(11),
+  `groupTrackerId` int(11),
+  `usersFieldId` int(11),
+  `groupFieldId` int(11),
+  `registrationChoice` char(1) default NULL,
+  `registrationUsersFieldIds` text,
+  `userChoice` char(1) default NULL,
+  `groupDefCat` int(12) default 0,
+  `groupTheme` varchar(255) default '',
+  `isExternal` char(1) default 'n',
   PRIMARY KEY (id),
   UNIQUE KEY groupName (groupName)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
@@ -2808,21 +2806,21 @@
 
 DROP TABLE IF EXISTS users_objectpermissions;
 CREATE TABLE users_objectpermissions (
-  groupName varchar(255) NOT NULL default '',
-  permName varchar(40) NOT NULL default '',
-  objectType varchar(20) NOT NULL default '',
-  objectId varchar(32) NOT NULL default '',
+  `groupName` varchar(255) NOT NULL default '',
+  `permName` varchar(40) NOT NULL default '',
+  `objectType` varchar(20) NOT NULL default '',
+  `objectId` varchar(32) NOT NULL default '',
   PRIMARY KEY (objectId, objectType, groupName(30),permName)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS users_permissions;
 CREATE TABLE users_permissions (
-  permName varchar(40) NOT NULL default '',
-  permDesc varchar(250) default NULL,
-  level varchar(80) default NULL,
-  type varchar(20) default NULL,
-  admin varchar(1) default NULL,
-  feature_check VARCHAR(50) NULL,
+  `permName` varchar(40) NOT NULL default '',
+  `permDesc` varchar(250) default NULL,
+  `level` varchar(80) default NULL,
+  `type` varchar(20) default NULL,
+  `admin` varchar(1) default NULL,
+  `feature_check` VARCHAR(50) NULL,
   PRIMARY KEY (permName),
   KEY type (type)
 ) ENGINE=MyISAM;
@@ -3144,8 +3142,8 @@
 
 DROP TABLE IF EXISTS users_usergroups;
 CREATE TABLE users_usergroups (
-  userId int(8) NOT NULL default '0',
-  groupName varchar(255) NOT NULL default '',
+  `userId` int(8) NOT NULL default '0',
+  `groupName` varchar(255) NOT NULL default '',
   PRIMARY KEY (userId,groupName(30))
 ) ENGINE=MyISAM;
 
@@ -3155,31 +3153,31 @@
 
 DROP TABLE IF EXISTS users_users;
 CREATE TABLE users_users (
-  userId int(8) NOT NULL auto_increment,
-  email varchar(200) default NULL,
-  login varchar(200) NOT NULL default '',
-  password varchar(30) default '',
-  provpass varchar(30) default NULL,
-  default_group varchar(255),
-  lastLogin int(14) default NULL,
-  currentLogin int(14) default NULL,
-  registrationDate int(14) default NULL,
-  challenge varchar(32) default NULL,
-  pass_confirm int(14) default NULL,
-  email_confirm int(14) default NULL,
-  hash varchar(34) default NULL,
-  created int(14) default NULL,
-  avatarName varchar(80) default NULL,
-  avatarSize int(14) default NULL,
-  avatarFileType varchar(250) default NULL,
-  avatarData longblob,
-  avatarLibName varchar(200) default NULL,
-  avatarType char(1) default NULL,
-  score int(11) NOT NULL default 0,
-  valid varchar(32) default NULL,
-  unsuccessful_logins int(14) default 0,
-  openid_url varchar(255) default NULL,
-  waiting char(1) default NULL,
+  `userId` int(8) NOT NULL auto_increment,
+  `email` varchar(200) default NULL,
+  `login` varchar(200) NOT NULL default '',
+  `password` varchar(30) default '',
+  `provpass` varchar(30) default NULL,
+  `default_group` varchar(255),
+  `lastLogin` int(14) default NULL,
+  `currentLogin` int(14) default NULL,
+  `registrationDate` int(14) default NULL,
+  `challenge` varchar(32) default NULL,
+  `pass_confirm` int(14) default NULL,
+  `email_confirm` int(14) default NULL,
+  `hash` varchar(34) default NULL,
+  `created` int(14) default NULL,
+  `avatarName` varchar(80) default NULL,
+  `avatarSize` int(14) default NULL,
+  `avatarFileType` varchar(250) default NULL,
+  `avatarData` longblob,
+  `avatarLibName` varchar(200) default NULL,
+  `avatarType` char(1) default NULL,
+  `score` int(11) NOT NULL default 0,
+  `valid` varchar(32) default NULL,
+  `unsuccessful_logins` int(14) default 0,
+  `openid_url` varchar(255) default NULL,
+  `waiting` char(1) default NULL,
   PRIMARY KEY (userId),
   KEY score (score),
   KEY login (login),
@@ -3196,15 +3194,15 @@
 
 DROP TABLE IF EXISTS tiki_integrator_reps;
 CREATE TABLE tiki_integrator_reps (
-  repID int(11) NOT NULL auto_increment,
-  name varchar(255) NOT NULL default '',
-  path varchar(255) NOT NULL default '',
-  start_page varchar(255) NOT NULL default '',
-  css_file varchar(255) NOT NULL default '',
-  visibility char(1) NOT NULL default 'y',
-  cacheable char(1) NOT NULL default 'y',
-  expiration int(11) NOT NULL default '0',
-  description text NOT NULL,
+  `repID` int(11) NOT NULL auto_increment,
+  `name` varchar(255) NOT NULL default '',
+  `path` varchar(255) NOT NULL default '',
+  `start_page` varchar(255) NOT NULL default '',
+  `css_file` varchar(255) NOT NULL default '',
+  `visibility` char(1) NOT NULL default 'y',
+  `cacheable` char(1) NOT NULL default 'y',
+  `expiration` int(11) NOT NULL default '0',
+  `description` text NOT NULL,
   PRIMARY KEY (repID)
 ) ENGINE=MyISAM;
 
@@ -3212,16 +3210,16 @@
 
 DROP TABLE IF EXISTS tiki_integrator_rules;
 CREATE TABLE tiki_integrator_rules (
-  ruleID int(11) NOT NULL auto_increment,
-  repID int(11) NOT NULL default '0',
-  ord int(2) unsigned NOT NULL default '0',
-  srch blob NOT NULL,
-  repl blob NOT NULL,
-  type char(1) NOT NULL default 'n',
-  casesense char(1) NOT NULL default 'y',
-  rxmod varchar(20) NOT NULL default '',
-  enabled char(1) NOT NULL default 'n',
-  description text NOT NULL,
+  `ruleID` int(11) NOT NULL auto_increment,
+  `repID` int(11) NOT NULL default '0',
+  `ord` int(2) unsigned NOT NULL default '0',
+  `srch` blob NOT NULL,
+  `repl` blob NOT NULL,
+  `type` char(1) NOT NULL default 'n',
+  `casesense` char(1) NOT NULL default 'y',
+  `rxmod` varchar(20) NOT NULL default '',
+  `enabled` char(1) NOT NULL default 'n',
+  `description` text NOT NULL,
   PRIMARY KEY (ruleID),
   KEY repID (repID)
 ) ENGINE=MyISAM;
@@ -3232,11 +3230,11 @@
 
 DROP TABLE IF EXISTS tiki_quicktags;
 CREATE TABLE tiki_quicktags (
-  tagId int(4) unsigned NOT NULL auto_increment,
-  taglabel varchar(255) default NULL,
-  taginsert text,
-  tagicon varchar(255) default NULL,
-  tagcategory varchar(255) default NULL,
+  `tagId` int(4) unsigned NOT NULL auto_increment,
+  `taglabel` varchar(255) default NULL,
+  `taginsert` text,
+  `tagicon` varchar(255) default NULL,
+  `tagcategory` varchar(255) default NULL,
   PRIMARY KEY (tagId),
   KEY tagcategory (tagcategory),
   KEY taglabel (taglabel)
@@ -3423,10 +3421,10 @@
 -- Translated objects table
 DROP TABLE IF EXISTS tiki_translated_objects;
 CREATE TABLE tiki_translated_objects (
-  traId int(14) NOT NULL auto_increment,
-  type varchar(50) NOT NULL,
-  objId varchar(255) NOT NULL,
-  lang varchar(16) default NULL,
+  `traId` int(14) NOT NULL auto_increment,
+  `type` varchar(50) NOT NULL,
+  `objId` varchar(255) NOT NULL,
+  `lang` varchar(16) default NULL,
   PRIMARY KEY (type, objId),
   KEY traId ( traId )
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
@@ -3433,16 +3431,16 @@
 
 DROP TABLE IF EXISTS tiki_friends;
 CREATE TABLE tiki_friends (
-  user varchar(200) NOT NULL default '',
-  friend varchar(200) NOT NULL default '',
+  `user` varchar(200) NOT NULL default '',
+  `friend` varchar(200) NOT NULL default '',
   PRIMARY KEY (`user`(120),friend(120))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_friendship_requests;
 CREATE TABLE tiki_friendship_requests (
-  userFrom varchar(200) NOT NULL default '',
-  userTo varchar(200) NOT NULL default '',
-  tstamp timestamp(14) NOT NULL,
+  `userFrom` varchar(200) NOT NULL default '',
+  `userTo` varchar(200) NOT NULL default '',
+  `tstamp` timestamp(14) NOT NULL,
   PRIMARY KEY (userFrom(120),userTo(120))
 ) ENGINE=MyISAM;
 
@@ -3487,10 +3485,10 @@
 
 DROP TABLE IF EXISTS tiki_users_score;
 CREATE TABLE tiki_users_score (
-  user char(200) NOT NULL default '',
-  event_id char(200) NOT NULL default '',
-  expire int(14) NOT NULL default '0',
-  tstamp timestamp(14) NOT NULL,
+  `user` char(200) NOT NULL default '',
+  `event_id` char(200) NOT NULL default '',
+  `expire` int(14) NOT NULL default '0',
+  `tstamp` timestamp(14) NOT NULL,
   PRIMARY KEY (user(110),event_id(110)),
   KEY user (user(110),event_id(110),expire)
 ) ENGINE=MyISAM;
@@ -3497,27 +3495,27 @@
 
 DROP TABLE IF EXISTS tiki_file_handlers;
 CREATE TABLE tiki_file_handlers (
-	mime_type varchar(64) default NULL,
-	cmd varchar(238) default NULL
+  `mime_type` varchar(64) default NULL,
+  `cmd` varchar(238) default NULL
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_stats;
 CREATE TABLE tiki_stats (
-  object varchar(255) NOT NULL default '',
-  type varchar(20) NOT NULL default '',
-  day int(14) NOT NULL default '0',
-  hits int(14) NOT NULL default '0',
+  `object` varchar(255) NOT NULL default '',
+  `type` varchar(20) NOT NULL default '',
+  `day` int(14) NOT NULL default '0',
+  `hits` int(14) NOT NULL default '0',
   PRIMARY KEY (object(200),type,day)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_events;
 CREATE TABLE tiki_events (
-  callback_type int(1) NOT NULL default '3',
+  `callback_type` int(1) NOT NULL default '3',
   `order` int(2) NOT NULL default '50',
-  event varchar(200) NOT NULL default '',
-  file varchar(200) NOT NULL default '',
-  object varchar(200) NOT NULL default '',
-  method varchar(200) NOT NULL default '',
+  `event` varchar(200) NOT NULL default '',
+  `file` varchar(200) NOT NULL default '',
+  `object` varchar(200) NOT NULL default '',
+  `method` varchar(200) NOT NULL default '',
   PRIMARY KEY (callback_type,`order`)
 ) ENGINE=MyISAM;
 
@@ -3529,23 +3527,23 @@
 
 DROP TABLE IF EXISTS tiki_registration_fields;
 CREATE TABLE tiki_registration_fields (
-  id int(11) NOT NULL auto_increment,
-  field varchar(255) NOT NULL default '',
-  name varchar(255) default NULL,
-  type varchar(255) NOT NULL default 'text',
+  `id` int(11) NOT NULL auto_increment,
+  `field` varchar(255) NOT NULL default '',
+  `name` varchar(255) default NULL,
+  `type` varchar(255) NOT NULL default 'text',
   `show` tinyint(1) NOT NULL default '1',
-  size varchar(10) default '10',
+  `size` varchar(10) default '10',
   PRIMARY KEY (id)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_actionlog_conf;
 CREATE TABLE tiki_actionlog_conf (
- id int(11) NOT NULL auto_increment,
- action varchar(32) NOT NULL default '',
- objectType varchar(32) NOT NULL default '',
- `status` char(1) default '',
-PRIMARY KEY (action, objectType),
-KEY (id)
+  `id` int(11) NOT NULL auto_increment,
+  `action` varchar(32) NOT NULL default '',
+  `objectType` varchar(32) NOT NULL default '',
+  `status` char(1) default '',
+  PRIMARY KEY (action, objectType),
+  KEY (id)
 ) ENGINE=MyISAM;
 
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Created', 'wiki page', 'y');
@@ -3588,19 +3586,19 @@
 
 DROP TABLE IF EXISTS tiki_freetags;
 CREATE TABLE tiki_freetags (
-  tagId int(10) unsigned NOT NULL auto_increment,
-  tag varchar(30) NOT NULL default '',
-  raw_tag varchar(50) NOT NULL default '',
-  lang varchar(16) NULL,
+  `tagId` int(10) unsigned NOT NULL auto_increment,
+  `tag` varchar(30) NOT NULL default '',
+  `raw_tag` varchar(50) NOT NULL default '',
+  `lang` varchar(16) NULL,
   PRIMARY KEY (tagId)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_freetagged_objects;
 CREATE TABLE tiki_freetagged_objects (
-  tagId int(12) NOT NULL auto_increment,
-  objectId int(11) NOT NULL default 0,
-  user varchar(200) default '',
-  created int(14) NOT NULL default '0',
+  `tagId` int(12) NOT NULL auto_increment,
+  `objectId` int(11) NOT NULL default 0,
+  `user` varchar(200) default '',
+  `created` int(14) NOT NULL default '0',
   PRIMARY KEY (tagId,user,objectId),
   KEY (tagId),
   KEY (user),
@@ -3609,16 +3607,16 @@
 
 DROP TABLE IF EXISTS tiki_contributions;
 CREATE TABLE tiki_contributions (
-  contributionId int(12) NOT NULL auto_increment,
-  name varchar(100) default NULL,
-  description varchar(250) default NULL,
+  `contributionId` int(12) NOT NULL auto_increment,
+  `name` varchar(100) default NULL,
+  `description` varchar(250) default NULL,
   PRIMARY KEY (contributionId)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_contributions_assigned;
 CREATE TABLE tiki_contributions_assigned (
-  contributionId int(12) NOT NULL,
-  objectId int(12) NOT NULL,
+  `contributionId` int(12) NOT NULL,
+  `objectId` int(12) NOT NULL,
   PRIMARY KEY (objectId, contributionId)
 ) ENGINE=MyISAM;
 
@@ -3658,12 +3656,12 @@
 
 DROP TABLE IF EXISTS tiki_pages_changes;
 CREATE TABLE tiki_pages_changes (
-	page_id int(14),
-	version int(10),
-	segments_added int(10),
-	segments_removed int(10),
-	segments_total int(10),
-	PRIMARY KEY(page_id, version)
+  `page_id` int(14),
+  `version` int(10),
+  `segments_added` int(10),
+  `segments_removed` int(10),
+  `segments_total` int(10),
+  PRIMARY KEY(page_id, version)
 );
 
 DROP TABLE IF EXISTS tiki_minichat;
@@ -3680,15 +3678,15 @@
 
 DROP TABLE IF EXISTS tiki_profile_symbols;
 CREATE TABLE tiki_profile_symbols (
-	`domain` VARCHAR(50) NOT NULL,
-	`profile` VARCHAR(50) NOT NULL,
-	`object` VARCHAR(50) NOT NULL,
-	`type` VARCHAR(20) NOT NULL,
-	`value` VARCHAR(50) NOT NULL,
-	`named` ENUM('y','n') NOT NULL,
-	`creation_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
-	PRIMARY KEY ( `domain`, `profile`, `object` ),
-	INDEX(`named`)
+  `domain` VARCHAR(50) NOT NULL,
+  `profile` VARCHAR(50) NOT NULL,
+  `object` VARCHAR(50) NOT NULL,
+  `type` VARCHAR(20) NOT NULL,
+  `value` VARCHAR(50) NOT NULL,
+  `named` ENUM('y','n') NOT NULL,
+  `creation_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
+  PRIMARY KEY ( `domain`, `profile`, `object` ),
+  INDEX(`named`)
 );
 
 DROP TABLE IF EXISTS tiki_feature;
@@ -3712,15 +3710,15 @@
 
 DROP TABLE IF EXISTS tiki_schema;
 CREATE TABLE tiki_schema (
-	patch_name VARCHAR(100) PRIMARY KEY,
-	install_date TIMESTAMP
+  `patch_name` VARCHAR(100) PRIMARY KEY,
+  `install_date` TIMESTAMP
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_semantic_tokens;
 CREATE TABLE tiki_semantic_tokens (
-	token VARCHAR(15) PRIMARY KEY,
-	label VARCHAR(25) NOT NULL,
-	invert_token VARCHAR(15)
+  `token` VARCHAR(15) PRIMARY KEY,
+  `label` VARCHAR(25) NOT NULL,
+  `invert_token` VARCHAR(15)
 ) ENGINE=MyISAM ;
 
 INSERT INTO tiki_semantic_tokens (token, label) VALUES('alias', 'Page Alias');
@@ -3728,32 +3726,32 @@
 
 DROP TABLE IF EXISTS tiki_webservice;
 CREATE TABLE tiki_webservice (
-	service VARCHAR(25) NOT NULL PRIMARY KEY,
-	url VARCHAR(250),
-	body TEXT,
-	schema_version VARCHAR(5),
-	schema_documentation VARCHAR(250)
+  `service` VARCHAR(25) NOT NULL PRIMARY KEY,
+  `url` VARCHAR(250),
+  `body` TEXT,
+  `schema_version` VARCHAR(5),
+  `schema_documentation` VARCHAR(250)
 ) ENGINE=MyISAM ;
 
 DROP TABLE IF EXISTS tiki_webservice_template;
 CREATE TABLE tiki_webservice_template (
-	service VARCHAR(25) NOT NULL,
-	template VARCHAR(25) NOT NULL,
-	engine VARCHAR(15) NOT NULL,
-	output VARCHAR(15) NOT NULL,
-	content TEXT NOT NULL,
-	last_modif INT,
-	PRIMARY KEY( service, template )
+  `service` VARCHAR(25) NOT NULL,
+  `template` VARCHAR(25) NOT NULL,
+  `engine` VARCHAR(15) NOT NULL,
+  `output` VARCHAR(15) NOT NULL,
+  `content` TEXT NOT NULL,
+  `last_modif` INT,
+  PRIMARY KEY( service, template )
 ) ENGINE=MyISAM ;
 
 DROP TABLE IF EXISTS tiki_groupalert;
 
 CREATE TABLE tiki_groupalert (
-	groupName varchar(255) NOT NULL default '',
-	objectType varchar( 20 ) NOT NULL default '',
-	objectId  varchar(10) NOT NULL default '',
-	displayEachuser  char( 1 ) default NULL ,
-	PRIMARY KEY ( objectType,objectId )
+  `groupName` varchar(255) NOT NULL default '',
+  `objectType` varchar( 20 ) NOT NULL default '',
+  `objectId` varchar(10) NOT NULL default '',
+  `displayEachuser` char( 1 ) default NULL ,
+  PRIMARY KEY ( objectType,objectId )
 ) ENGINE=MyISAM ;
 
 DROP TABLE IF EXISTS `tiki_sent_newsletters_files`;
@@ -3862,13 +3860,13 @@
 
 DROP TABLE IF EXISTS tiki_plugin_security;
 CREATE TABLE tiki_plugin_security (
-	fingerprint VARCHAR(200) NOT NULL PRIMARY KEY,
-	status VARCHAR(10) NOT NULL,
-	approval_by VARCHAR(200) NULL,
-	last_update TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
-	last_objectType VARCHAR(20) NOT NULL,
-	last_objectId VARCHAR(200) NOT NULL,
-	KEY last_object (last_objectType, last_objectId)
+  `fingerprint` VARCHAR(200) NOT NULL PRIMARY KEY,
+  `status` VARCHAR(10) NOT NULL,
+  `approval_by` VARCHAR(200) NULL,
+  `last_update` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
+  `last_objectType` VARCHAR(20) NOT NULL,
+  `last_objectId` VARCHAR(200) NOT NULL,
+  KEY last_object (last_objectType, last_objectId)
 );
 
 DROP TABLE IF EXISTS `tiki_user_reports`;
@@ -3896,16 +3894,16 @@
 
 DROP TABLE IF EXISTS `tiki_perspectives`;
 CREATE TABLE tiki_perspectives (
-	perspectiveId int NOT NULL AUTO_INCREMENT,
-	name varchar(100) NOT NULL,
-	PRIMARY KEY( perspectiveId )
+  `perspectiveId` int NOT NULL AUTO_INCREMENT,
+  `name` varchar(100) NOT NULL,
+  PRIMARY KEY( perspectiveId )
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS `tiki_perspective_preferences`;
 CREATE TABLE tiki_perspective_preferences (
-	perspectiveId int NOT NULL,
-	pref varchar(40) NOT NULL,
-	value text,
-	PRIMARY KEY( perspectiveId, pref )
+  `perspectiveId` int NOT NULL,
+  `pref` varchar(40) NOT NULL,
+  `value` text,
+  PRIMARY KEY( perspectiveId, pref )
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r20427 | kissaki | 2009-07-30 10:31:12 -0400 (qui, 30 jul 2009) | 2 lines

code formatting
add previously removed unique key with a lower indexing limit

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20426)
+++ tiki.sql	(revision 20427)
@@ -3779,6 +3779,7 @@
   `comment` varchar(256),
   `order` int(11) NULL default 0,
   PRIMARY KEY(`id`),
+  UNIQUE KEY `left` (`left`(128)),
   INDEX `idx1` (silent, type, feature(30))
 );
 

------------------------------------------------------------------------
r20414 | kissaki | 2009-07-29 18:39:19 -0400 (qua, 29 jul 2009) | 2 lines

Since 3.23.3 MySQL understands the SQL standard comment prefix '--'.
As that's SQL standard and also used by PostgreSQL and SQLite, change # to --

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20413)
+++ tiki.sql	(revision 20414)
@@ -1,6 +1,6 @@
-# --------------------------------------------------------
-# Database : tikiwiki
-# --------------------------------------------------------
+-- --------------------------------------------------------
+-- Database : tikiwiki
+-- --------------------------------------------------------
 
 DROP TABLE IF EXISTS galaxia_activities;
 CREATE TABLE galaxia_activities (
@@ -2054,7 +2054,7 @@
   KEY location (location(50), page(200))
 ) ENGINE=MyISAM;
 
-# LRU (last recently used) list for searching parts of words
+-- LRU (last recently used) list for searching parts of words
 DROP TABLE IF EXISTS tiki_searchsyllable;
 CREATE TABLE tiki_searchsyllable(
   syllable varchar(80) NOT NULL default '',
@@ -2064,7 +2064,7 @@
   KEY lastUsed (lastUsed)
 ) ENGINE=MyISAM;
 
-# searchword caching table for search syllables
+-- searchword caching table for search syllables
 DROP TABLE IF EXISTS tiki_searchwords;
 CREATE TABLE tiki_searchwords(
   syllable varchar(80) NOT NULL default '',
@@ -3132,8 +3132,6 @@
 UPDATE users_permissions SET feature_check = 'feature_wiki_ratings' WHERE permName = 'tiki_p_wiki_view_ratings';
 UPDATE users_permissions SET feature_check = 'feature_wiki_ratings' WHERE permName = 'tiki_p_wiki_vote_ratings';
 UPDATE users_permissions SET feature_check = 'feature_wiki_comments' WHERE permName = 'tiki_p_wiki_view_comments';
-
-#Added 20081018
 UPDATE users_permissions SET feature_check = 'feature_wiki_export' WHERE permName = 'tiki_p_export_wiki';
 UPDATE users_permissions SET feature_check = 'feature_history' WHERE permName = 'tiki_p_wiki_view_history';
 UPDATE users_permissions SET feature_check = 'feature_wiki_attachments' WHERE permName = 'tiki_p_wiki_attach_files';
@@ -3189,7 +3187,7 @@
   KEY openid_url (openid_url)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-### Administrator account
+-- Administrator account
 INSERT INTO users_users(email,login,password,hash) VALUES ('','admin','admin',md5('adminadmin'));
 UPDATE users_users set currentLogin=lastLogin, registrationDate=lastLogin;
 INSERT INTO tiki_user_preferences (user,prefName,value) VALUES ('admin','realName','System Administrator');
@@ -3244,7 +3242,7 @@
   KEY taglabel (taglabel)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-# wiki
+-- wiki
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, bold','__text__','pics/icons/text_bold.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, italic','\'\'text\'\'','pics/icons/text_italic.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, underline','===text===','pics/icons/text_underline.png','wiki');
@@ -3268,7 +3266,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('code','popup_plugin_form("code")','pics/icons/page_white_code.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('flash','popup_plugin_form("flash")','pics/icons/page_white_actionscript.png','wiki');
 
-# maps
+-- maps
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New wms Metadata','METADATA\r\n		\"wms_name\" \"myname\"\r\n 	"wms_srs" "EPSG:4326"\r\n 	"wms_server_version" " "\r\n 	"wms_layers" "mylayers"\r\n 	"wms_request" "myrequest"\r\n 	"wms_format" " "\r\n 	"wms_time" " "\r\n END', 'pics/icons/tag_blue_add.png','maps');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Class', 'CLASS\r\n EXPRESSION ()\r\n SYMBOL 0\r\n OUTLINECOLOR\r\n COLOR\r\n NAME "myclass" \r\nEND #end of class', 'pics/icons/application_add.png','maps');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Projection','PROJECTION\r\n "init=epsg:4326"\r\nEND','pics/icons/image_add.png','maps');
@@ -3282,7 +3280,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Outputformat','OUTPUTFORMAT\r\n NAME\r\n DRIVER " "\r\n MIMETYPE "myimagetype"\r\n IMAGEMODE RGB\r\n EXTENSION "png"\r\nEND','pics/icons/newspaper_go.png','maps');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Mapfile','#\r\n# Start of mapfile\r\n#\r\nNAME MYMAPFLE\r\n STATUS ON\r\nSIZE \r\nEXTENT\r\nUNITS \r\nSHAPEPATH " "\r\nIMAGETYPE " "\r\nFONTSET " "\r\nIMAGECOLOR -1 -1 -1\r\n\r\n#remove this text and add objects here\r\n\r\nEND # end of mapfile','pics/icons/world_add.png','maps');
 
-# newsletters
+-- newsletters
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, bold','__text__','pics/icons/text_bold.png','newsletters');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, italic','\'\'text\'\'','pics/icons/text_italic.png','newsletters');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, underline','===text===','pics/icons/text_underline.png','newsletters');
@@ -3296,7 +3294,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','popup_plugin_form("img")','pics/icons/picture.png','newsletters');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' deleted','--text--','pics/icons/text_strikethrough.png','newsletters');
 
-# trackers
+-- trackers
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, bold','__text__','pics/icons/text_bold.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, italic','\'\'text\'\'','pics/icons/text_italic.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, underline','===text===','pics/icons/text_underline.png','trackers');
@@ -3318,7 +3316,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('code','popup_plugin_form("code")','pics/icons/page_white_code.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('flash','popup_plugin_form("flash")','pics/icons/page_white_actionscript.png','trackers');
 
-# blogs
+-- blogs
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, bold','__text__','pics/icons/text_bold.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, italic','\'\'text\'\'','pics/icons/text_italic.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, underline','===text===','pics/icons/text_underline.png','blogs');
@@ -3340,7 +3338,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('code','popup_plugin_form("code")','pics/icons/page_white_code.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('flash','popup_plugin_form("flash")','pics/icons/page_white_actionscript.png','blogs');
 
-# calendar
+-- calendar
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, bold','__text__','pics/icons/text_bold.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, italic','\'\'text\'\'','pics/icons/text_italic.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, underline','===text===','pics/icons/text_underline.png','calendar');
@@ -3359,7 +3357,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','popup_plugin_form("img")','pics/icons/picture.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' deleted','--text--','pics/icons/text_strikethrough.png','calendar');
 
-# articles
+-- articles
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, bold','__text__','pics/icons/text_bold.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, italic','\'\'text\'\'','pics/icons/text_italic.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, underline','===text===','pics/icons/text_underline.png','articles');
@@ -3381,7 +3379,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('code','popup_plugin_form("code")','pics/icons/page_white_code.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('flash','popup_plugin_form("flash")','pics/icons/page_white_actionscript.png','articles');
 
-# faqs
+-- faqs
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, bold','__text__','pics/icons/text_bold.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, italic','\'\'text\'\'','pics/icons/text_italic.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, underline','===text===','pics/icons/text_underline.png','faqs');
@@ -3400,7 +3398,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','popup_plugin_form("img")','pics/icons/picture.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' deleted','--text--','pics/icons/text_strikethrough.png','faqs');
 
-# forums
+-- forums
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, bold','__text__','pics/icons/text_bold.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, italic','\'\'text\'\'','pics/icons/text_italic.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, underline','===text===','pics/icons/text_underline.png','forums');
@@ -3422,7 +3420,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('code','popup_plugin_form("code")','pics/icons/page_white_code.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('flash','popup_plugin_form("flash")','pics/icons/page_white_actionscript.png','forums');
 
-# Translated objects table
+-- Translated objects table
 DROP TABLE IF EXISTS tiki_translated_objects;
 CREATE TABLE tiki_translated_objects (
   traId int(14) NOT NULL auto_increment,

------------------------------------------------------------------------
r20412 | kissaki | 2009-07-29 17:50:26 -0400 (qua, 29 jul 2009) | 4 lines

[FIX] remove UNIQUE KEY on tiki_sefurl_regex_out
otherwise would fail
this should maintain datatypes/structure, thus unique is to be checked in code for now.
reported as trackerId=5&itemId=2559

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20411)
+++ tiki.sql	(revision 20412)
@@ -3769,6 +3769,7 @@
   PRIMARY KEY  (`id`),
   KEY `editionId` (`editionId`)
 );
+
 DROP TABLE IF EXISTS `tiki_sefurl_regex_out`;
 CREATE TABLE `tiki_sefurl_regex_out` (
   `id` int(11) NOT NULL auto_increment,
@@ -3780,9 +3781,9 @@
   `comment` varchar(256),
   `order` int(11) NULL default 0,
   PRIMARY KEY(`id`),
-  UNIQUE KEY `left` (`left`(256)),
   INDEX `idx1` (silent, type, feature(30))
 );
+
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-index.php\\?page=(.+)', '$1', 'wiki', 'feature_wiki');
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-slideshow.php\\?page=(.+)', 'show:$1', '', 'feature_wiki');
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-read_article.php\\?articleId=(\\d+)', 'article$1', 'article', 'feature_articles');

------------------------------------------------------------------------
r20394 | lphuberdeau | 2009-07-28 13:38:37 -0400 (ter, 28 jul 2009) | 1 line

[FIX] Missing drop tables

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20393)
+++ tiki.sql	(revision 20394)
@@ -3894,6 +3894,7 @@
   PRIMARY KEY (`id`)
 ) ENGINE=MyISAM;
 
+DROP TABLE IF EXISTS `tiki_perspectives`;
 CREATE TABLE tiki_perspectives (
 	perspectiveId int NOT NULL AUTO_INCREMENT,
 	name varchar(100) NOT NULL,
@@ -3900,6 +3901,7 @@
 	PRIMARY KEY( perspectiveId )
 ) ENGINE=MyISAM;
 
+DROP TABLE IF EXISTS `tiki_perspective_preferences`;
 CREATE TABLE tiki_perspective_preferences (
 	perspectiveId int NOT NULL,
 	pref varchar(40) NOT NULL,

------------------------------------------------------------------------
r20355 | sylvieg | 2009-07-27 12:41:28 -0400 (seg, 27 jul 2009) | 1 line

[FIX]voting: user+id is not unique - acn have 2 IPs

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20354)
+++ tiki.sql	(revision 20355)
@@ -2656,7 +2656,7 @@
   id varchar(255) NOT NULL default '',
   optionId int(10) NOT NULL default 0,
   time int(14) NOT NULL default 0,
-  PRIMARY KEY (`user`(100),id(100)),
+  KEY (`user`(100),id(100)),
   KEY ip (`ip`),
   KEY id (`id`)
 ) ENGINE=MyISAM;

------------------------------------------------------------------------
r20241 | lphuberdeau | 2009-07-20 10:20:41 -0400 (seg, 20 jul 2009) | 1 line

[NEW]Â Support for perspectives

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20240)
+++ tiki.sql	(revision 20241)
@@ -3893,3 +3893,17 @@
   `time` datetime NOT NULL,
   PRIMARY KEY (`id`)
 ) ENGINE=MyISAM;
+
+CREATE TABLE tiki_perspectives (
+	perspectiveId int NOT NULL AUTO_INCREMENT,
+	name varchar(100) NOT NULL,
+	PRIMARY KEY( perspectiveId )
+) ENGINE=MyISAM;
+
+CREATE TABLE tiki_perspective_preferences (
+	perspectiveId int NOT NULL,
+	pref varchar(40) NOT NULL,
+	value text,
+	PRIMARY KEY( perspectiveId, pref )
+) ENGINE=MyISAM;
+

------------------------------------------------------------------------
r20221 | jonnybradley | 2009-07-19 10:32:54 -0400 (dom, 19 jul 2009) | 7 lines

[ENH] Add sefurl rules and implementation for file gallery files (thumbnail, preview and display).
Add these (and "file" mode for download) to sefurl smarty modifier.
Also:
  Truncate file name or title on browse gallery to avoid word wrap causing layout issues (currently hard-coded to 16 chars)
  Top and last files modudles now display images using shadowbox if enabled
  A few notices fixed


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20220)
+++ tiki.sql	(revision 20221)
@@ -3795,6 +3795,9 @@
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-view_faq.php\\?faqId=(\\d+)', 'faq$1', 'faq', 'feature_faqs');
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-list_file_gallery.php\\?galleryId=(\\d+)', 'file$1', 'file', 'feature_file_galleries');
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-download_file.php\\?fileId=(\\d+)', 'dl$1', 'file', 'feature_file_galleries');
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-download_file.php\\?fileId=(\\d+)&amp;thumbnail', 'thumbnail$1', 'thumbnail', 'feature_file_galleries');
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-download_file.php\\?fileId=(\\d+)&amp;display', 'display$1', 'display', 'feature_file_galleries');
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-download_file.php\\?fileId=(\\d+)&amp;preview', 'preview$1', 'preview', 'feature_file_galleries');
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-view_forum.php\\?forumId=(\\d+)', 'forum$1', 'forum', 'feature_forums');
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-browse_gallery.php\\?galleryId=(\\d+)', 'gallery$1', 'gallery', 'feature_galleries');
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('show_image.php\\?id=(\\d+)', 'image$1', 'image', 'feature_galleries');

------------------------------------------------------------------------
r20082 | sampaioprimo | 2009-07-13 07:34:38 -0400 (seg, 13 jul 2009) | 2 lines

[NEW] permission and menu entry for the Tiki Importer


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 20081)
+++ tiki.sql	(revision 20082)
@@ -1613,6 +1613,7 @@
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (193,42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_view_actionlog','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (194,42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_view_actionlog_owngroups','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Content Templates','tiki-admin_content_templates.php',1256,'','tiki_p_edit_content_templates','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Tiki Importer','tiki-importer.php',1240,'','tiki_p_admin_importer','',0);
 
 DROP TABLE IF EXISTS tiki_menus;
 CREATE TABLE tiki_menus (
@@ -3105,6 +3106,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_notifications', 'Can admin mail notifications', 'editors', 'mail notifications');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_invite', 'Can invite user in groups', 'editors', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_delete_account', 'Can delete his own account', 'admin', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_importer', 'Can use the Tiki Importer', 'admin', 'tiki', 'y');
 
 UPDATE users_permissions SET feature_check = 'feature_wiki' WHERE permName IN(
 	'tiki_p_admin_wiki',

------------------------------------------------------------------------
r19979 | sylvieg | 2009-07-07 11:34:28 -0400 (ter, 07 jul 2009) | 1 line

[NEW]user: option to delete his own account (with a perm)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 19978)
+++ tiki.sql	(revision 19979)
@@ -3104,6 +3104,7 @@
 
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_notifications', 'Can admin mail notifications', 'editors', 'mail notifications');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_invite', 'Can invite user in groups', 'editors', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_delete_account', 'Can delete his own account', 'admin', 'tiki');
 
 UPDATE users_permissions SET feature_check = 'feature_wiki' WHERE permName IN(
 	'tiki_p_admin_wiki',

------------------------------------------------------------------------
r19827 | redflo | 2009-06-26 17:33:13 -0400 (sex, 26 jun 2009) | 5 lines

Rework of LDAP Authentication. Dropped PEAR::Auth_LDAP to get more
information from the directory. Added support for User information and
ldap group replication. Added support for ssl (ldaps), tls and redundant LDAP
server configuration.


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 19826)
+++ tiki.sql	(revision 19827)
@@ -2800,6 +2800,7 @@
   userChoice char(1) default NULL,
   groupDefCat int(12) default 0,
   groupTheme varchar(255) default '',
+  isExternal char(1) default 'n',
   PRIMARY KEY (id),
   UNIQUE KEY groupName (groupName)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
@@ -3885,4 +3886,4 @@
   `data` text COLLATE latin1_general_ci NOT NULL,
   `time` datetime NOT NULL,
   PRIMARY KEY (`id`)
-) ENGINE=MyISAM;
\ No newline at end of file
+) ENGINE=MyISAM;

------------------------------------------------------------------------
r19756 | sylvieg | 2009-06-23 19:17:40 -0400 (ter, 23 jun 2009) | 1 line

[MOD]actionlog: record article view

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 19755)
+++ tiki.sql	(revision 19756)
@@ -3582,6 +3582,7 @@
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Updated', 'blog', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Removed', 'blog', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Removed', 'file', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Viewed', 'article', 'n');
 
 DROP TABLE IF EXISTS tiki_freetags;
 CREATE TABLE tiki_freetags (

------------------------------------------------------------------------
r19634 | floh1111 | 2009-06-16 15:34:47 -0400 (ter, 16 jun 2009) | 1 line

Factorized the code and translated comments to englisch (Nyloth), added more transaltion an added SQL-Querrys to tiki.sql but the conversionscript does not work

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 19633)
+++ tiki.sql	(revision 19634)
@@ -3863,3 +3863,25 @@
 	KEY last_object (last_objectType, last_objectId)
 );
 
+DROP TABLE IF EXISTS `tiki_user_reports`;
+CREATE TABLE IF NOT EXISTS `tiki_user_reports` (
+  `id` int(11) NOT NULL AUTO_INCREMENT,
+  `user` varchar(200) COLLATE latin1_general_ci NOT NULL,
+  `interval` varchar(20) COLLATE latin1_general_ci NOT NULL,
+  `view` varchar(8) COLLATE latin1_general_ci NOT NULL,
+  `type` varchar(5) COLLATE latin1_general_ci NOT NULL,
+  `time_to_send` datetime NOT NULL,
+  `always_email` tinyint(1) NOT NULL,
+  `last_report` datetime NOT NULL,
+  PRIMARY KEY (`id`)
+) ENGINE=MyISAM;
+
+DROP TABLE IF EXISTS `tiki_user_reports_cache`;
+CREATE TABLE IF NOT EXISTS `tiki_user_reports_cache` (
+  `id` int(11) NOT NULL AUTO_INCREMENT,
+  `user` varchar(200) COLLATE latin1_general_ci NOT NULL,
+  `event` varchar(200) COLLATE latin1_general_ci NOT NULL,
+  `data` text COLLATE latin1_general_ci NOT NULL,
+  `time` datetime NOT NULL,
+  PRIMARY KEY (`id`)
+) ENGINE=MyISAM;
\ No newline at end of file

------------------------------------------------------------------------
r19360 | sylvieg | 2009-06-06 18:30:31 -0400 (sÃ¡b, 06 jun 2009) | 1 line

[MOD]tracker: new perms tiki_p_modify_tracker_items_pending tiki_p_modify_tracker_items_closed

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 19359)
+++ tiki.sql	(revision 19360)
@@ -2992,6 +2992,8 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_create_tracker_items', 'Can create new items for trackers', 'registered', 'trackers');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_trackers', 'Can list trackers', 'basic', 'trackers');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_modify_tracker_items', 'Can change tracker items', 'registered', 'trackers');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_modify_tracker_items_pending', 'Can change tracker pending items', 'registered', 'trackers');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_modify_tracker_items_closed', 'Can change tracker closed items', 'registered', 'trackers');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tracker_view_ratings', 'Can view rating result for tracker items', 'basic', 'trackers');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tracker_vote_ratings', 'Can vote a rating for tracker items', 'registered', 'trackers');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_trackers', 'Can view trackers', 'basic', 'trackers');

------------------------------------------------------------------------
r19347 | jonnybradley | 2009-06-05 11:10:47 -0400 (sex, 05 jun 2009) | 2 lines

[FIX] Missing SQL additions from r19297 (new GroupMail protocols)


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 19346)
+++ tiki.sql	(revision 19347)
@@ -2529,6 +2529,10 @@
   smtpPort int(4) default NULL,
   flagsPublic char(1) default 'n',				-- COMMENT 'MatWho - Shared Group Mail box if y',
   autoRefresh int(4) NOT NULL default 0,		-- COMMENT 'seconds for mail list to refresh, 0 = none',
+  imap varchar( 255 ) default NULL,
+  mbox varchar( 255 ) default NULL,
+  maildir varchar( 255 ) default NULL,
+  useSSL char( 1 ) NOT NULL default 'n',
   PRIMARY KEY (accountId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r19038 | nyloth | 2009-05-22 15:15:57 -0400 (sex, 22 mai 2009) | 1 line

[FIX] tiki.sql was not updated when new db schema patches has been added in revision 18746

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 19037)
+++ tiki.sql	(revision 19038)
@@ -2349,7 +2349,7 @@
   trackerId int(12) NOT NULL default '0',
   name varchar(255) default NULL,
   options text,
-  type char(15) default NULL,
+  type varchar(15) default NULL,
   isMain char(1) default NULL,
   isTblVisible char(1) default NULL,
   position int(4) default NULL,

------------------------------------------------------------------------
r19033 | nyloth | 2009-05-22 13:04:21 -0400 (sex, 22 mai 2009) | 1 line

[FIX] db schema: fix typo for primary key declaration of table users_groups + update all db files to include last changes

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 19032)
+++ tiki.sql	(revision 19033)
@@ -2796,7 +2796,7 @@
   userChoice char(1) default NULL,
   groupDefCat int(12) default 0,
   groupTheme varchar(255) default '',
-  PRIMARY KEY id,
+  PRIMARY KEY (id),
   UNIQUE KEY groupName (groupName)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 

------------------------------------------------------------------------
r19031 | sylvieg | 2009-05-22 12:44:20 -0400 (sex, 22 mai 2009) | 1 line

syntax - thx nyloth

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 19030)
+++ tiki.sql	(revision 19031)
@@ -2798,7 +2798,7 @@
   groupTheme varchar(255) default '',
   PRIMARY KEY id,
   UNIQUE KEY groupName (groupName)
-) ENGINE=MyISAM, AUTO_INCREMENT=1;
+) ENGINE=MyISAM AUTO_INCREMENT=1;
 
 DROP TABLE IF EXISTS users_objectpermissions;
 CREATE TABLE users_objectpermissions (

------------------------------------------------------------------------
r18766 | sylvieg | 2009-05-14 07:58:50 -0400 (qui, 14 mai 2009) | 1 line

[MRG] Automatic merge, branches/3.0 18695 to 18765

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 18765)
+++ tiki.sql	(revision 18766)
@@ -1673,7 +1673,7 @@
   KEY moduleId (moduleId)
 ) ENGINE=MyISAM;
 
-INSERT INTO tiki_modules (name,position,ord,cache_time,params,groups) VALUES ('mnu_application_menu','l',1,0,'flip=y','a:2:{i:0;s:10:"Registered";i:1;s:9:"Anonymous";}');
+INSERT INTO tiki_modules (name,position,ord,cache_time,params,groups) VALUES ('mnu_application_menu','l',30,0,'flip=y','a:1:{i:0;s:10:"Registered";}');
 
 DROP TABLE IF EXISTS tiki_newsletter_subscriptions;
 CREATE TABLE tiki_newsletter_subscriptions (
@@ -3246,7 +3246,6 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading3','!!!text','pics/icons/text_heading_3.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/database_refresh.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' horizontal rule','---','pics/icons/page.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','wiki');
@@ -3299,7 +3298,6 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading3','!!!text','pics/icons/text_heading_3.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/database_refresh.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' horizontal rule','---','pics/icons/page.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','trackers');
@@ -3322,7 +3320,6 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading3','!!!text','pics/icons/text_heading_3.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/database_refresh.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' horizontal rule','---','pics/icons/page.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','blogs');
@@ -3345,7 +3342,6 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading3','!!!text','pics/icons/text_heading_3.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/database_refresh.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' horizontal rule','---','pics/icons/page.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','calendar');
@@ -3365,7 +3361,6 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading3','!!!text','pics/icons/text_heading_3.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/database_refresh.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' horizontal rule','---','pics/icons/page.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','articles');
@@ -3388,7 +3383,6 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading3','!!!text','pics/icons/text_heading_3.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/database_refresh.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' horizontal rule','---','pics/icons/page.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','faqs');
@@ -3408,7 +3402,6 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading3','!!!text','pics/icons/text_heading_3.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/database_refresh.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' horizontal rule','---','pics/icons/page.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','forums');

------------------------------------------------------------------------
r18746 | wggley | 2009-05-13 18:20:16 -0400 (qua, 13 mai 2009) | 1 line

[ENH]wiki: Created the view similar wiki page permission.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 18745)
+++ tiki.sql	(revision 18746)
@@ -3021,6 +3021,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_view_ratings', 'Can view rating of wiki pages', 'basic', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_view_source', 'Can view source of wiki pages', 'basic', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_vote_ratings', 'Can participate to rating of wiki pages', 'registered', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_view_similar', 'Can view similar wiki pages', 'registered', 'wiki');
 
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_workflow', 'Can admin workflow processes', 'admin', 'workflow', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_abort_instance', 'Can abort a process instance', 'editors', 'workflow');

------------------------------------------------------------------------
r18714 | sylvieg | 2009-05-13 07:43:27 -0400 (qua, 13 mai 2009) | 1 line

[FIX]calendar: priority can be null and cause on error on some mysql - bug 1988

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 18713)
+++ tiki.sql	(revision 18714)
@@ -469,7 +469,7 @@
   locationId int(14) default NULL,
   categoryId int(14) default NULL,
   nlId int(12) NOT NULL default '0',
-  priority enum('1','2','3','4','5','6','7','8','9') NOT NULL default '1',
+  priority enum('0', '1','2','3','4','5','6','7','8','9') default '0',
   status enum('0','1','2') NOT NULL default '0',
   url varchar(255) default NULL,
   lang char(16) NOT NULL default 'en',

------------------------------------------------------------------------
r18481 | sylvieg | 2009-05-05 11:01:40 -0400 (ter, 05 mai 2009) | 1 line

[MRG] Automatic merge, branches/3.0 18299 to 18473

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 18480)
+++ tiki.sql	(revision 18481)
@@ -1673,10 +1673,7 @@
   KEY moduleId (moduleId)
 ) ENGINE=MyISAM;
 
-INSERT INTO tiki_modules (name,position,ord,cache_time,groups) VALUES ('login_box','r',1,0,'a:2:{i:0;s:10:"Registered";i:1;s:9:"Anonymous";}');
 INSERT INTO tiki_modules (name,position,ord,cache_time,params,groups) VALUES ('mnu_application_menu','l',1,0,'flip=y','a:2:{i:0;s:10:"Registered";i:1;s:9:"Anonymous";}');
-INSERT INTO tiki_modules (name,position,ord,cache_time,groups) VALUES ('quick_edit','l',2,0,'a:1:{i:0;s:6:\"Admins\";}');
-INSERT INTO tiki_modules (name,position,ord,cache_time,groups) VALUES ('since_last_visit_new','r',40,0,'a:1:{i:0;s:6:\"Admins\";}');
 
 DROP TABLE IF EXISTS tiki_newsletter_subscriptions;
 CREATE TABLE tiki_newsletter_subscriptions (

------------------------------------------------------------------------
r18324 | sylvieg | 2009-04-30 10:14:43 -0400 (qui, 30 abr 2009) | 1 line

[FIX]group: add an id to group - to facilate dev of future features

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 18323)
+++ tiki.sql	(revision 18324)
@@ -2786,6 +2786,7 @@
 
 DROP TABLE IF EXISTS users_groups;
 CREATE TABLE users_groups (
+  id int(11) NOT NULL auto_increment,
   groupName varchar(255) NOT NULL default '',
   groupDesc varchar(255) default NULL,
   groupHome varchar(255),
@@ -2798,8 +2799,9 @@
   userChoice char(1) default NULL,
   groupDefCat int(12) default 0,
   groupTheme varchar(255) default '',
-  PRIMARY KEY (groupName(30))
-) ENGINE=MyISAM;
+  PRIMARY KEY id,
+  UNIQUE KEY groupName (groupName)
+) ENGINE=MyISAM, AUTO_INCREMENT=1;
 
 DROP TABLE IF EXISTS users_objectpermissions;
 CREATE TABLE users_objectpermissions (

------------------------------------------------------------------------
r18270 | sylvieg | 2009-04-28 11:36:34 -0400 (ter, 28 abr 2009) | 1 line

[MRG] Automatic merge, branches/3.0 18227 to 18268

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 18269)
+++ tiki.sql	(revision 18270)
@@ -912,6 +912,8 @@
   show_files char(1) default NULL,
   show_explorer char(1) default NULL,
   show_path char(1) default NULL,
+  show_slideshow char(1) default NULL,
+  default_view varchar(20) default NULL,
   PRIMARY KEY (galleryId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r18075 | sylvieg | 2009-04-17 19:26:59 -0400 (sex, 17 abr 2009) | 1 line

[MRG] Automatic merge, branches/3.0 18022 to 18074

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 18074)
+++ tiki.sql	(revision 18075)
@@ -3249,13 +3249,13 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/database_gear.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','popup_plugin_form("img")','pics/icons/picture.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('list bullets', '*text', 'pics/icons/text_list_bullets.png', 'wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('list numbers', '#text', 'pics/icons/text_list_numbers.png', 'wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' deleted','--text--','pics/icons/text_strikethrough.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('quote','{QUOTE(replyto= )}\ntext\n{QUOTE}\n','pics/icons/quotes.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('code','{CODE( caption= wrap= colors= ln= wiki= rtl= ishtml=)}\ntext\n{CODE}\n','pics/icons/page_white_code.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('flash','{flash movie= width= height= quality= }\n','pics/icons/page_white_actionscript.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('quote','popup_plugin_form("quote")','pics/icons/quotes.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('code','popup_plugin_form("code")','pics/icons/page_white_code.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('flash','popup_plugin_form("flash")','pics/icons/page_white_actionscript.png','wiki');
 
 # maps
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New wms Metadata','METADATA\r\n		\"wms_name\" \"myname\"\r\n 	"wms_srs" "EPSG:4326"\r\n 	"wms_server_version" " "\r\n 	"wms_layers" "mylayers"\r\n 	"wms_request" "myrequest"\r\n 	"wms_format" " "\r\n 	"wms_time" " "\r\n END', 'pics/icons/tag_blue_add.png','maps');
@@ -3282,7 +3282,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' horizontal rule', '---', 'pics/icons/page.png', 'newsletters');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','newsletters');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','newsletters');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','newsletters');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','popup_plugin_form("img")','pics/icons/picture.png','newsletters');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' deleted','--text--','pics/icons/text_strikethrough.png','newsletters');
 
 # trackers
@@ -3302,11 +3302,11 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/database_gear.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','popup_plugin_form("img")','pics/icons/picture.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' deleted','--text--','pics/icons/text_strikethrough.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('quote','{QUOTE(replyto= )}\ntext\n{QUOTE}\n','pics/icons/quotes.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('code','{CODE( caption= wrap= colors= ln= wiki= rtl= ishtml=)}\ntext\n{CODE}\n','pics/icons/page_white_code.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('flash','{flash movie= width= height= quality= }\n','pics/icons/page_white_actionscript.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('quote','popup_plugin_form("quote")','pics/icons/quotes.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('code','popup_plugin_form("code")','pics/icons/page_white_code.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('flash','popup_plugin_form("flash")','pics/icons/page_white_actionscript.png','trackers');
 
 # blogs
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, bold','__text__','pics/icons/text_bold.png','blogs');
@@ -3325,11 +3325,11 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/database_gear.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','popup_plugin_form("img")','pics/icons/picture.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' deleted','--text--','pics/icons/text_strikethrough.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('quote','{QUOTE(replyto= )}\ntext\n{QUOTE}\n','pics/icons/quotes.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('code','{CODE( caption= wrap= colors= ln= wiki= rtl= ishtml=)}\ntext\n{CODE}\n','pics/icons/page_white_code.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('flash','{flash movie= width= height= quality= }\n','pics/icons/page_white_actionscript.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('quote','popup_plugin_form("quote")','pics/icons/quotes.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('code','popup_plugin_form("code")','pics/icons/page_white_code.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('flash','popup_plugin_form("flash")','pics/icons/page_white_actionscript.png','blogs');
 
 # calendar
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, bold','__text__','pics/icons/text_bold.png','calendar');
@@ -3348,7 +3348,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/database_gear.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','popup_plugin_form("img")','pics/icons/picture.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' deleted','--text--','pics/icons/text_strikethrough.png','calendar');
 
 # articles
@@ -3368,11 +3368,11 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/database_gear.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','popup_plugin_form("img")','pics/icons/picture.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' deleted','--text--','pics/icons/text_strikethrough.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('quote','{QUOTE(replyto= )}\ntext\n{QUOTE}\n','pics/icons/quotes.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('code','{CODE( caption= wrap= colors= ln= wiki= rtl= ishtml=)}\ntext\n{CODE}\n','pics/icons/page_white_code.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('flash','{flash movie= width= height= quality= }\n','pics/icons/page_white_actionscript.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('quote','popup_plugin_form("quote")','pics/icons/quotes.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('code','popup_plugin_form("code")','pics/icons/page_white_code.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('flash','popup_plugin_form("flash")','pics/icons/page_white_actionscript.png','articles');
 
 # faqs
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, bold','__text__','pics/icons/text_bold.png','faqs');
@@ -3391,7 +3391,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/database_gear.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','popup_plugin_form("img")','pics/icons/picture.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' deleted','--text--','pics/icons/text_strikethrough.png','faqs');
 
 # forums
@@ -3411,11 +3411,11 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/database_gear.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','popup_plugin_form("img")','pics/icons/picture.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' deleted','--text--','pics/icons/text_strikethrough.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('quote','{QUOTE(replyto= )}\ntext\n{QUOTE}\n','pics/icons/quotes.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('code','{CODE( caption= wrap= colors= ln= wiki= rtl= ishtml=)}\ntext\n{CODE}\n','pics/icons/page_white_code.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('flash','{flash movie= width= height= quality= }\n','pics/icons/page_white_actionscript.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('quote','popup_plugin_form("quote")','pics/icons/quotes.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('code','popup_plugin_form("code")','pics/icons/page_white_code.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('flash','popup_plugin_form("flash")','pics/icons/page_white_actionscript.png','forums');
 
 # Translated objects table
 DROP TABLE IF EXISTS tiki_translated_objects;
@@ -3850,3 +3850,15 @@
 UPDATE tiki_menu_options SET icon = '' WHERE name = 'Workflow';
 UPDATE tiki_menu_options SET icon = '' WHERE name = 'Charts';
 UPDATE tiki_menus SET use_items_icons='y' WHERE menuId=42;
+
+DROP TABLE IF EXISTS tiki_plugin_security;
+CREATE TABLE tiki_plugin_security (
+	fingerprint VARCHAR(200) NOT NULL PRIMARY KEY,
+	status VARCHAR(10) NOT NULL,
+	approval_by VARCHAR(200) NULL,
+	last_update TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
+	last_objectType VARCHAR(20) NOT NULL,
+	last_objectId VARCHAR(200) NOT NULL,
+	KEY last_object (last_objectType, last_objectId)
+);
+

------------------------------------------------------------------------
r17850 | sylvieg | 2009-04-08 08:57:35 -0400 (qua, 08 abr 2009) | 1 line

[MRG] Automatic merge, branches/3.0 17798 to 17843

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 17849)
+++ tiki.sql	(revision 17850)
@@ -3233,26 +3233,29 @@
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 # wiki
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('text, bold','__text__','pics/icons/text_bold.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('text, italic','\'\'text\'\'','pics/icons/text_italic.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('text, underline','===text===','pics/icons/text_underline.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, bold','__text__','pics/icons/text_bold.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, italic','\'\'text\'\'','pics/icons/text_italic.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, underline','===text===','pics/icons/text_underline.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2|r1c3\nr2c1|r2c2|r2c3\nr3c1|r3c2|r3c3||','pics/icons/table.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('link, external','[http://example.com|text]','pics/icons/world_link.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('link, wiki','((text))','pics/icons/page_link.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading1','!text','pics/icons/text_heading_1.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading2','!!text','pics/icons/text_heading_2.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading1','!text','pics/icons/text_heading_1.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading2','!!text','pics/icons/text_heading_2.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading3','!!!text','pics/icons/text_heading_3.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/database_refresh.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','pics/icons/page.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' horizontal rule','---','pics/icons/page.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/database_gear.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('list bullets', '*text', 'pics/icons/text_list_bullets.png', 'wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('list numbers', '#text', 'pics/icons/text_list_numbers.png', 'wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Deleted','--text--','pics/icons/text_strikethrough.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' deleted','--text--','pics/icons/text_strikethrough.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('quote','{QUOTE(replyto= )}\ntext\n{QUOTE}\n','pics/icons/quotes.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('code','{CODE( caption= wrap= colors= ln= wiki= rtl= ishtml=)}\ntext\n{CODE}\n','pics/icons/page_white_code.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('flash','{flash movie= width= height= quality= }\n','pics/icons/page_white_actionscript.png','wiki');
 
 # maps
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New wms Metadata','METADATA\r\n		\"wms_name\" \"myname\"\r\n 	"wms_srs" "EPSG:4326"\r\n 	"wms_server_version" " "\r\n 	"wms_layers" "mylayers"\r\n 	"wms_request" "myrequest"\r\n 	"wms_format" " "\r\n 	"wms_time" " "\r\n END', 'pics/icons/tag_blue_add.png','maps');
@@ -3269,138 +3272,150 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Mapfile','#\r\n# Start of mapfile\r\n#\r\nNAME MYMAPFLE\r\n STATUS ON\r\nSIZE \r\nEXTENT\r\nUNITS \r\nSHAPEPATH " "\r\nIMAGETYPE " "\r\nFONTSET " "\r\nIMAGECOLOR -1 -1 -1\r\n\r\n#remove this text and add objects here\r\n\r\nEND # end of mapfile','pics/icons/world_add.png','maps');
 
 # newsletters
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','newsletters');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','newsletters');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','newsletters');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, bold','__text__','pics/icons/text_bold.png','newsletters');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, italic','\'\'text\'\'','pics/icons/text_italic.png','newsletters');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, underline','===text===','pics/icons/text_underline.png','newsletters');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text|nocache]','pics/icons/world_link.png','newsletters');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading1','!text','pics/icons/text_heading_1.png','newsletters');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading2','!!text','pics/icons/text_heading_2.png','newsletters');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','newsletters');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr', '---', 'pics/icons/page.png', 'newsletters');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading1','!text','pics/icons/text_heading_1.png','newsletters');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading2','!!text','pics/icons/text_heading_2.png','newsletters');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading3','!!!text','pics/icons/text_heading_3.png','newsletters');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' horizontal rule', '---', 'pics/icons/page.png', 'newsletters');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','newsletters');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','newsletters');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','newsletters');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','newsletters');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Deleted','--text--','pics/icons/text_strikethrough.png','newsletters');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' deleted','--text--','pics/icons/text_strikethrough.png','newsletters');
 
 # trackers
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, bold','__text__','pics/icons/text_bold.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, italic','\'\'text\'\'','pics/icons/text_italic.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, underline','===text===','pics/icons/text_underline.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2|r1c3\nr2c1|r2c2|r2c3\nr3c1|r3c2|r3c3||','pics/icons/table.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/world_link.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','pics/icons/page_link.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading1','!text','pics/icons/text_heading_1.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading2','!!text','pics/icons/text_heading_2.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading1','!text','pics/icons/text_heading_1.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading2','!!text','pics/icons/text_heading_2.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading3','!!!text','pics/icons/text_heading_3.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/database_refresh.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','pics/icons/page.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' horizontal rule','---','pics/icons/page.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/database_gear.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Deleted','--text--','pics/icons/text_strikethrough.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' deleted','--text--','pics/icons/text_strikethrough.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('quote','{QUOTE(replyto= )}\ntext\n{QUOTE}\n','pics/icons/quotes.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('code','{CODE( caption= wrap= colors= ln= wiki= rtl= ishtml=)}\ntext\n{CODE}\n','pics/icons/page_white_code.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('flash','{flash movie= width= height= quality= }\n','pics/icons/page_white_actionscript.png','trackers');
 
 # blogs
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, bold','__text__','pics/icons/text_bold.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, italic','\'\'text\'\'','pics/icons/text_italic.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, underline','===text===','pics/icons/text_underline.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2|r1c3\nr2c1|r2c2|r2c3\nr3c1|r3c2|r3c3||','pics/icons/table.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/world_link.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','pics/icons/page_link.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading1','!text','pics/icons/text_heading_1.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading2','!!text','pics/icons/text_heading_2.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading1','!text','pics/icons/text_heading_1.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading2','!!text','pics/icons/text_heading_2.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading3','!!!text','pics/icons/text_heading_3.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/database_refresh.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','pics/icons/page.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' horizontal rule','---','pics/icons/page.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/database_gear.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Deleted','--text--','pics/icons/text_strikethrough.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' deleted','--text--','pics/icons/text_strikethrough.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('quote','{QUOTE(replyto= )}\ntext\n{QUOTE}\n','pics/icons/quotes.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('code','{CODE( caption= wrap= colors= ln= wiki= rtl= ishtml=)}\ntext\n{CODE}\n','pics/icons/page_white_code.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('flash','{flash movie= width= height= quality= }\n','pics/icons/page_white_actionscript.png','blogs');
 
 # calendar
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, bold','__text__','pics/icons/text_bold.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, italic','\'\'text\'\'','pics/icons/text_italic.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, underline','===text===','pics/icons/text_underline.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2|r1c3\nr2c1|r2c2|r2c3\nr3c1|r3c2|r3c3||','pics/icons/table.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/world_link.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','pics/icons/page_link.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading1','!text','pics/icons/text_heading_1.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading2','!!text','pics/icons/text_heading_2.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading1','!text','pics/icons/text_heading_1.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading2','!!text','pics/icons/text_heading_2.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading3','!!!text','pics/icons/text_heading_3.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/database_refresh.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','pics/icons/page.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' horizontal rule','---','pics/icons/page.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/database_gear.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Deleted','--text--','pics/icons/text_strikethrough.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' deleted','--text--','pics/icons/text_strikethrough.png','calendar');
 
 # articles
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, bold','__text__','pics/icons/text_bold.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, italic','\'\'text\'\'','pics/icons/text_italic.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, underline','===text===','pics/icons/text_underline.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2|r1c3\nr2c1|r2c2|r2c3\nr3c1|r3c2|r3c3||','pics/icons/table.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/world_link.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','pics/icons/page_link.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading1','!text','pics/icons/text_heading_1.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading2','!!text','pics/icons/text_heading_2.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading1','!text','pics/icons/text_heading_1.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading2','!!text','pics/icons/text_heading_2.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading3','!!!text','pics/icons/text_heading_3.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/database_refresh.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','pics/icons/page.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' horizontal rule','---','pics/icons/page.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/database_gear.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Deleted','--text--','pics/icons/text_strikethrough.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' deleted','--text--','pics/icons/text_strikethrough.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('quote','{QUOTE(replyto= )}\ntext\n{QUOTE}\n','pics/icons/quotes.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('code','{CODE( caption= wrap= colors= ln= wiki= rtl= ishtml=)}\ntext\n{CODE}\n','pics/icons/page_white_code.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('flash','{flash movie= width= height= quality= }\n','pics/icons/page_white_actionscript.png','articles');
 
 # faqs
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, bold','__text__','pics/icons/text_bold.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, italic','\'\'text\'\'','pics/icons/text_italic.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, underline','===text===','pics/icons/text_underline.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2|r1c3\nr2c1|r2c2|r2c3\nr3c1|r3c2|r3c3||','pics/icons/table.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/world_link.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','pics/icons/page_link.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading1','!text','pics/icons/text_heading_1.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading2','!!text','pics/icons/text_heading_2.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading1','!text','pics/icons/text_heading_1.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading2','!!text','pics/icons/text_heading_2.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading3','!!!text','pics/icons/text_heading_3.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/database_refresh.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','pics/icons/page.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' horizontal rule','---','pics/icons/page.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/database_gear.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Deleted','--text--','pics/icons/text_strikethrough.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' deleted','--text--','pics/icons/text_strikethrough.png','faqs');
 
 # forums
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, bold','__text__','pics/icons/text_bold.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, italic','\'\'text\'\'','pics/icons/text_italic.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('  text, underline','===text===','pics/icons/text_underline.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2|r1c3\nr2c1|r2c2|r2c3\nr3c1|r3c2|r3c3||','pics/icons/table.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/world_link.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','pics/icons/page_link.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading1','!text','pics/icons/text_heading_1.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading2','!!text','pics/icons/text_heading_2.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading1','!text','pics/icons/text_heading_1.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading2','!!text','pics/icons/text_heading_2.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' heading3','!!!text','pics/icons/text_heading_3.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/database_refresh.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','pics/icons/page.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' horizontal rule','---','pics/icons/page.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' colored text','~~#FF0000:text~~','pics/icons/palette.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/database_gear.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Deleted','--text--','pics/icons/text_strikethrough.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES (' deleted','--text--','pics/icons/text_strikethrough.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('quote','{QUOTE(replyto= )}\ntext\n{QUOTE}\n','pics/icons/quotes.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('code','{CODE( caption= wrap= colors= ln= wiki= rtl= ishtml=)}\ntext\n{CODE}\n','pics/icons/page_white_code.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('flash','{flash movie= width= height= quality= }\n','pics/icons/page_white_actionscript.png','forums');
 
 # Translated objects table
 DROP TABLE IF EXISTS tiki_translated_objects;

------------------------------------------------------------------------
r17744 | nyloth | 2009-04-01 10:01:26 -0400 (qua, 01 abr 2009) | 6 lines

[FIX] newsletters:
        * fix a bug that was unsubscribing a user from all newsletters instead of the newsletter corresponding to its unsubscription code. This was occuringwhen the user was added through a group of users
        * fix unsubscription codes that were changing on each newsletter sending, which implied that a user was only able to unsubscribe itself using the last mail of the newsletter
        * also keep subscribers from included newsletters in database for the newsletter, in order to have a different unsubscription code for each newsletter. This should also fix the number of subscribers which now includes those subscribers



Index: tiki.sql
===================================================================
--- tiki.sql	(revision 17743)
+++ tiki.sql	(revision 17744)
@@ -1684,6 +1684,7 @@
   valid char(1) default NULL,
   subscribed int(14) default NULL,
   isUser char(1) NOT NULL default 'n',
+  included char(1) NOT NULL default 'n',
   PRIMARY KEY (nlId,email,isUser)
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r17573 | sylvieg | 2009-03-23 13:39:58 -0400 (seg, 23 mar 2009) | 1 line

[MOD]banner: setting maxUserImpression to limit via a cookie the number of times a user sees a banner in the banner lifetime or 90 days

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 17572)
+++ tiki.sql	(revision 17573)
@@ -321,6 +321,7 @@
   created int(14) default NULL,
   maxImpressions int(8) default NULL,
   impressions int(8) default NULL,
+  maxUserImpressions int(8) default -1,
   maxClicks int(8) default NULL,
   clicks int(8) default NULL,
   zone varchar(40) default NULL,

------------------------------------------------------------------------
r17572 | sylvieg | 2009-03-23 11:25:44 -0400 (seg, 23 mar 2009) | 1 line

[MRG] Automatic merge, branches/3.0 17495 to 17567

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 17571)
+++ tiki.sql	(revision 17572)
@@ -3250,7 +3250,6 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('list bullets', '*text', 'pics/icons/text_list_bullets.png', 'wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('list numbers', '#text', 'pics/icons/text_list_numbers.png', 'wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Email Address','[mailto:text|text]','pics/icons/email.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Deleted','--text--','pics/icons/text_strikethrough.png','wiki');
 
 # maps
@@ -3299,7 +3298,6 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Email Address','[mailto:text|text]','pics/icons/email.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Deleted','--text--','pics/icons/text_strikethrough.png','trackers');
 
 # blogs
@@ -3320,7 +3318,6 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Email Address','[mailto:text|text]','pics/icons/email.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Deleted','--text--','pics/icons/text_strikethrough.png','blogs');
 
 # calendar
@@ -3361,7 +3358,6 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Email Address','[mailto:text|text]','pics/icons/email.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Deleted','--text--','pics/icons/text_strikethrough.png','articles');
 
 # faqs
@@ -3382,7 +3378,6 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Email Address','[mailto:text|text]','pics/icons/email.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Deleted','--text--','pics/icons/text_strikethrough.png','faqs');
 
 # forums
@@ -3403,7 +3398,6 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Email Address','[mailto:text|text]','pics/icons/email.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Deleted','--text--','pics/icons/text_strikethrough.png','forums');
 
 # Translated objects table

------------------------------------------------------------------------
r17488 | nyloth | 2009-03-20 14:31:36 -0400 (sex, 20 mar 2009) | 12 lines

[MOD] menus vertical flipping: handle left and right sides separately + some css fixes/enhancements
[MOD] css: create new transition styles for 4.x (and change default transition version start to 3.0)

+ Some backports from experimental/ui-revamp2:

[FIX] [BP-17002] enable the icons for menu 42 by default (the admin still need to enable the global feature) + fix default icons for menu 42 for new installs
[FIX] [BP-16999][BP-17000][BP-17001] fix missing sql definitions + some sql fixes from sylvieg
[NEW] [BP-16731] modules: new module control to partially flip modules vertically (currently only fully supported by left modules containing a standard menu, a css menu or a phplayer menu)
[ENH] [BP-16730] menus: new feature/option to choose an icon for each menu items + define icons for menu 42
[NEW] [BP-16729] new smarty function 'cookie_jar' to get the value of one cookie from the cookie jar
[MOD] [BP-16728] smarty icon plugin: add a default icon (a green question mark) when no _id is specified


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 17487)
+++ tiki.sql	(revision 17488)
@@ -1415,6 +1415,7 @@
   perm text default NULL,
   groupname text default NULL,
   userlevel int(4) default 0,
+  icon varchar(200),
   PRIMARY KEY (optionId),
   UNIQUE KEY uniq_menu (menuId,name(30),url(50),position,section(60),perm(50),groupname(50))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -1617,6 +1618,7 @@
   description text,
   type char(1) default NULL,
   icon varchar(200) default NULL,
+  use_items_icons char(1) NOT NULL DEFAULT 'n',
   PRIMARY KEY (menuId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -3814,3 +3816,26 @@
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-list_trackers.php', 'trackers', '', 'feature_trackers', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-mobile.php', 'mobile', '', 'feature_mobile', 200);
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-sheets.php', 'sheets', '', 'feature_sheet', 200);
+
+UPDATE tiki_menu_options SET icon = 'icon-configuration48x48' WHERE name = 'Admin';
+UPDATE tiki_menu_options SET icon = 'xfce4-appfinder48x48' WHERE name = 'Search';
+UPDATE tiki_menu_options SET icon = 'wikipages48x48' WHERE name = 'Wiki';
+UPDATE tiki_menu_options SET icon = 'blogs48x48' WHERE name = 'Blogs';
+UPDATE tiki_menu_options SET icon = 'stock_select-color48x48' WHERE name = 'Image Galleries';
+UPDATE tiki_menu_options SET icon = 'file-manager48x48' WHERE name = 'File Galleries';
+UPDATE tiki_menu_options SET icon = 'stock_bold48x48' WHERE name = 'Articles';
+UPDATE tiki_menu_options SET icon = 'stock_index48x48' WHERE name = 'Forums';
+UPDATE tiki_menu_options SET icon = 'gnome-settings-font48x48' WHERE name = 'Trackers';
+UPDATE tiki_menu_options SET icon = 'users48x48' WHERE name = 'Community';
+UPDATE tiki_menu_options SET icon = 'stock_dialog_question48x48' WHERE name = 'FAQs';
+UPDATE tiki_menu_options SET icon = 'maps48x48' WHERE name = 'Maps';
+UPDATE tiki_menu_options SET icon = 'messages48x48' WHERE name = 'Newsletters';
+UPDATE tiki_menu_options SET icon = 'vcard48x48' WHERE name = 'Freetags';
+UPDATE tiki_menu_options SET icon = 'date48x48' WHERE name = 'Calendar' AND url = 'tiki-calendar.php';
+UPDATE tiki_menu_options SET icon = 'userfiles48x48' WHERE name = 'MyTiki';
+UPDATE tiki_menu_options SET icon = '' WHERE name = 'Quizzes';
+UPDATE tiki_menu_options SET icon = '' WHERE name = 'Surveys';
+UPDATE tiki_menu_options SET icon = '' WHERE name = 'TikiSheet';
+UPDATE tiki_menu_options SET icon = '' WHERE name = 'Workflow';
+UPDATE tiki_menu_options SET icon = '' WHERE name = 'Charts';
+UPDATE tiki_menus SET use_items_icons='y' WHERE menuId=42;

------------------------------------------------------------------------
r17461 | nyloth | 2009-03-19 10:48:34 -0400 (qui, 19 mar 2009) | 25 lines

[FIX] comments and forums: replace some wrong/unknown variables by $this in $commentslib->post_in_forum() and $commentslib->post_in_object()
[MOD] change $TWV->cvs into $TWV->svn (and CVS into SVN in some places)

+ Some backports (BP-svnrevision) from experimental/coe branch, listed below:

[FIX] [BP-16748] many features: new TikiWiki version of parse_str, that:
 - uses a workaround for a bug in PHP 5.2.0
 - Handle the value of magic_quotes_gpc to stripslashes when needed (as already done for GET/POST/... in tiki-setup_base.php)

This fixes bugs in multiple places where the buggy parse_str was used (for example in smarty button, which caused problems when editing/renaming/... a wiki page that includes a ' in its name. Same problem occured, for example, when changing language of such a wiki page, ...).

Please now use TikiLib::parse_str() instead of parse_str().

[DEL] [BP-16742] remove useless empty dirs
[FIX] [BP-16741] missing icon for locks
[NEW] [BP-16740] forum and comments: New locking feature
[FIX] [BP-16739] survey wiki plugin: fix missing global
[ENH] [BP-16738] javascript detection: use cookies instead of session vars to avoid problems due to session timeout + try to better detect using an additionnal setcookie()
[FIX] [BP-16737] magic: small css class fix
[MOD] [BP-16735] setup: remove useless PHP5 check, since Tiki 3.0 is not PHP4 compatible
[MOD] [BP-16734] blogs: add a 'Cancel' button when writing a post
[NEW] [BP-16733] youtube module: new YouTube module to display some videos + an optionnal link to the videos of a YouTube user
[DEL][MOD] [BP-16732] cleaning: Remove useless files and fix related docs + Move some icons to a better place



Index: tiki.sql
===================================================================
--- tiki.sql	(revision 17460)
+++ tiki.sql	(revision 17461)
@@ -553,6 +553,7 @@
   name varchar(200) default NULL,
   href varchar(200) default NULL,
   hits int(8) default NULL,
+  comments_locked char(1) NOT NULL default 'n',
   PRIMARY KEY (objectId),
   KEY (type, objectId),
   KEY (itemId, type)
@@ -699,6 +700,7 @@
   comment_rating tinyint(2) default NULL,
   archived char(1) default NULL,
   approved char(1) NOT NULL default 'y',
+  locked char(1) NOT NULL default 'n',
   PRIMARY KEY (threadId),
   UNIQUE KEY no_repeats (parentId, userName(40), title(100), commentDate, message_id(40), in_reply_to(40)),
   KEY title (title),

------------------------------------------------------------------------
r17392 | sylvieg | 2009-03-17 08:44:30 -0400 (ter, 17 mar 2009) | 1 line

[MRG] Automatic merge, branches/3.0 17317 to 17385

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 17391)
+++ tiki.sql	(revision 17392)
@@ -199,7 +199,9 @@
   ip varchar(15) default NULL,
   comment varchar(200) default NULL,
   categId int(12) NOT NULL default '0',
-  PRIMARY KEY (actionId)
+  PRIMARY KEY (actionId),
+  KEY lastModif(lastModif),
+  KEY object(object(100), objectType, action(100))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_actionlog_params;
@@ -2738,7 +2740,8 @@
   hits int(10) default NULL,
   created int(14) default NULL,
   comment varchar(250) default NULL,
-  PRIMARY KEY (attId)
+  PRIMARY KEY (attId),
+  KEY page (page)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_zones;

------------------------------------------------------------------------
r17289 | sylvieg | 2009-03-11 22:27:34 -0400 (qua, 11 mar 2009) | 1 line

[MRG] Automatic merge, branches/3.0 17263 to 17288

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 17288)
+++ tiki.sql	(revision 17289)
@@ -1416,7 +1416,7 @@
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (1,42,'o','Home','./',10,'','','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (3,42,'o','Contact Us','tiki-contact.php',20,'feature_contact','','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (3,42,'o','Contact Us','tiki-contact.php',20,'feature_contact,feature_messages','','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (4,42,'o','Stats','tiki-stats.php',23,'feature_stats','tiki_p_view_stats','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (5,42,'o','Categories','tiki-browse_categories.php',25,'feature_categories','tiki_p_view_categories','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (6,42,'o','Games','tiki-list_games.php',30,'feature_games','tiki_p_play_games','',0);

------------------------------------------------------------------------
r17238 | sylvieg | 2009-03-09 11:42:03 -0400 (seg, 09 mar 2009) | 1 line

[MRG] Automatic merge, branches/3.0 17198 to 17237

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 17237)
+++ tiki.sql	(revision 17238)
@@ -1407,9 +1407,9 @@
   name varchar(200) default NULL,
   url varchar(255) default NULL,
   position int(4) default NULL,
-  section varchar(255) default NULL,
-  perm varchar(255) default NULL,
-  groupname varchar(255) default NULL,
+  section text default NULL,
+  perm text default NULL,
+  groupname text default NULL,
   userlevel int(4) default 0,
   PRIMARY KEY (optionId),
   UNIQUE KEY uniq_menu (menuId,name(30),url(50),position,section(60),perm(50),groupname(50))
@@ -1497,10 +1497,10 @@
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (80,42,'o','Admin Directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_admin_directory_cats','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (81,42,'o','Admin Directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_admin_directory_sites','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (82,42,'o','Admin Directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_validate_links','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (83,42,'s','File Galleries','tiki-list_file_gallery.php',600,'feature_file_galleries','tiki_p_view_file_gallery','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (83,42,'s','File Galleries','tiki-list_file_gallery.php',600,'feature_file_galleries','tiki-list_file_gallery.php|tiki_p_view_file_gallery|tiki_p_upload_files','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (84,42,'o','List Galleries','tiki-list_file_gallery.php',605,'feature_file_galleries','tiki_p_list_file_galleries','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (85,42,'o','Rankings','tiki-file_galleries_rankings.php',610,'feature_file_galleries,feature_file_galleries_rankings','tiki_p_list_file_galleries','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (86,42,'o','Upload File','tiki-upload_file.php',615,'feature_file_galleries','tiki_p_view_file_gallery,tiki_p_upload_files','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (86,42,'o','Upload File','tiki-upload_file.php',615,'feature_file_galleries','tiki_p_upload_files','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (87,42,'s','FAQs','tiki-list_faqs.php',650,'feature_faqs','tiki_p_view_faqs','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (88,42,'o','List FAQs','tiki-list_faqs.php',665,'feature_faqs','tiki_p_view_faqs','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (89,42,'o','Admin FAQs','tiki-list_faqs.php',660,'feature_faqs','tiki_p_admin_faqs','',0);

------------------------------------------------------------------------
r17201 | sylvieg | 2009-03-05 20:17:30 -0400 (qui, 05 mar 2009) | 1 line

[MEW]INVITE: plugin to invite a user or an email to one of the group the user belongs. Send a mail to inform + link to change password for a new user

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 17200)
+++ tiki.sql	(revision 17201)
@@ -3085,6 +3085,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_backlink', 'View page backlinks', 'basic', 'wiki');
 
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_notifications', 'Can admin mail notifications', 'editors', 'mail notifications');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_invite', 'Can invite user in groups', 'editors', 'tiki');
 
 UPDATE users_permissions SET feature_check = 'feature_wiki' WHERE permName IN(
 	'tiki_p_admin_wiki',

------------------------------------------------------------------------
r17151 | sylvieg | 2009-03-03 19:16:30 -0400 (ter, 03 mar 2009) | 1 line

[MRG] Automatic merge, branches/3.0 17062 to 17150

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 17150)
+++ tiki.sql	(revision 17151)
@@ -1667,7 +1667,6 @@
 INSERT INTO tiki_modules (name,position,ord,cache_time,groups) VALUES ('login_box','r',1,0,'a:2:{i:0;s:10:"Registered";i:1;s:9:"Anonymous";}');
 INSERT INTO tiki_modules (name,position,ord,cache_time,params,groups) VALUES ('mnu_application_menu','l',1,0,'flip=y','a:2:{i:0;s:10:"Registered";i:1;s:9:"Anonymous";}');
 INSERT INTO tiki_modules (name,position,ord,cache_time,groups) VALUES ('quick_edit','l',2,0,'a:1:{i:0;s:6:\"Admins\";}');
-INSERT INTO tiki_modules (name,position,ord,cache_time,groups) VALUES ('assistant','l',10,0,'a:2:{i:0;s:10:"Registered";i:1;s:9:"Anonymous";}');
 INSERT INTO tiki_modules (name,position,ord,cache_time,groups) VALUES ('since_last_visit_new','r',40,0,'a:1:{i:0;s:6:\"Admins\";}');
 
 DROP TABLE IF EXISTS tiki_newsletter_subscriptions;

------------------------------------------------------------------------
r17033 | sylvieg | 2009-03-01 17:22:45 -0400 (dom, 01 mar 2009) | 1 line

[FIX]application menu: add tiki-admin.php on each Admin option to have a link like others section to the main page and not a javascript toggle

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 17032)
+++ tiki.sql	(revision 17033)
@@ -1527,23 +1527,23 @@
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (112,42,'s','Charts','tiki-charts.php',1000,'feature_charts','tiki_p_view_chart','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (113,42,'o','Admin Charts','tiki-admin_charts.php',1005,'feature_charts','tiki_p_admin_charts','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (114,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (116,42,'r','Admin','',1050,'','tiki_p_admin_categories','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (117,42,'r','Admin','',1050,'','tiki_p_admin_banners','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (118,42,'r','Admin','',1050,'','tiki_p_edit_templates','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (119,42,'r','Admin','',1050,'','tiki_p_edit_cookies','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (120,42,'r','Admin','',1050,'','tiki_p_admin_dynamic','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (121,42,'r','Admin','',1050,'','tiki_p_admin_mailin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (122,42,'r','Admin','',1050,'','tiki_p_edit_content_templates','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (123,42,'r','Admin','',1050,'','tiki_p_edit_html_pages','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (124,42,'r','Admin','',1050,'','tiki_p_view_referer_stats','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (125,42,'r','Admin','',1050,'','tiki_p_admin_drawings','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (126,42,'r','Admin','',1050,'','tiki_p_admin_shoutbox','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (127,42,'r','Admin','',1050,'','tiki_p_live_support_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (128,42,'r','Admin','',1050,'','user_is_operator','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (129,42,'r','Admin','',1050,'feature_integrator','tiki_p_admin_integrator','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','',1050,'feature_edit_templates','tiki_p_edit_templates','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','',1050,'feature_view_tpl','tiki_p_edit_templates','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','',1050,'feature_editcss','tiki_p_create_css','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (116,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_categories','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (117,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_banners','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (118,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_templates','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (119,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_cookies','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (120,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_dynamic','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (121,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_mailin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (122,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_content_templates','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (123,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_html_pages','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (124,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_view_referer_stats','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (125,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_drawings','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (126,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_shoutbox','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (127,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_live_support_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (128,42,'r','Admin','tiki-admin.php',1050,'','user_is_operator','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (129,42,'r','Admin','tiki-admin.php',1050,'feature_integrator','tiki_p_admin_integrator','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'feature_edit_templates','tiki_p_edit_templates','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'feature_view_tpl','tiki_p_edit_templates','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'feature_editcss','tiki_p_create_css','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (130,42,'o','Admin Home','tiki-admin.php',1051,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (131,42,'o','Live Support','tiki-live_support_admin.php',1055,'feature_live_support','tiki_p_live_support_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (132,42,'o','Live Support','tiki-live_support_admin.php',1055,'feature_live_support','user_is_operator','',0);

------------------------------------------------------------------------
r16844 | Jyhem | 2009-02-20 12:44:22 -0400 (sex, 20 fev 2009) | 1 line

[FIX] Only show link to tiki-admin.php to tiki_p_admin

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 16843)
+++ tiki.sql	(revision 16844)
@@ -1527,23 +1527,23 @@
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (112,42,'s','Charts','tiki-charts.php',1000,'feature_charts','tiki_p_view_chart','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (113,42,'o','Admin Charts','tiki-admin_charts.php',1005,'feature_charts','tiki_p_admin_charts','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (114,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (116,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_categories','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (117,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_banners','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (118,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_templates','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (119,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_cookies','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (120,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_dynamic','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (121,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_mailin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (122,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_content_templates','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (123,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_html_pages','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (124,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_view_referer_stats','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (125,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_drawings','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (126,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_shoutbox','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (127,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_live_support_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (128,42,'r','Admin','tiki-admin.php',1050,'','user_is_operator','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (129,42,'r','Admin','tiki-admin.php',1050,'feature_integrator','tiki_p_admin_integrator','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'feature_edit_templates','tiki_p_edit_templates','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'feature_view_tpl','tiki_p_edit_templates','',0);
-INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'feature_editcss','tiki_p_create_css','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (116,42,'r','Admin','',1050,'','tiki_p_admin_categories','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (117,42,'r','Admin','',1050,'','tiki_p_admin_banners','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (118,42,'r','Admin','',1050,'','tiki_p_edit_templates','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (119,42,'r','Admin','',1050,'','tiki_p_edit_cookies','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (120,42,'r','Admin','',1050,'','tiki_p_admin_dynamic','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (121,42,'r','Admin','',1050,'','tiki_p_admin_mailin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (122,42,'r','Admin','',1050,'','tiki_p_edit_content_templates','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (123,42,'r','Admin','',1050,'','tiki_p_edit_html_pages','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (124,42,'r','Admin','',1050,'','tiki_p_view_referer_stats','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (125,42,'r','Admin','',1050,'','tiki_p_admin_drawings','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (126,42,'r','Admin','',1050,'','tiki_p_admin_shoutbox','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (127,42,'r','Admin','',1050,'','tiki_p_live_support_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (128,42,'r','Admin','',1050,'','user_is_operator','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (129,42,'r','Admin','',1050,'feature_integrator','tiki_p_admin_integrator','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','',1050,'feature_edit_templates','tiki_p_edit_templates','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','',1050,'feature_view_tpl','tiki_p_edit_templates','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','',1050,'feature_editcss','tiki_p_create_css','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (130,42,'o','Admin Home','tiki-admin.php',1051,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (131,42,'o','Live Support','tiki-live_support_admin.php',1055,'feature_live_support','tiki_p_live_support_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (132,42,'o','Live Support','tiki-live_support_admin.php',1055,'feature_live_support','user_is_operator','',0);
@@ -1586,19 +1586,19 @@
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (171,42,'o','Comments','tiki-list_comments.php',1260,'feature_poll_comments','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (172,42,'o','Comments','tiki-list_comments.php',1260,'feature_faq_comments','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (173,42,'o','Freetags','tiki-browse_freetags.php',27,'feature_freetags','tiki_p_view_freetags','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (174,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_contribution','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (174,42,'r','Admin','',1050,'','tiki_p_admin_contribution','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (175,42,'o','Contribution','tiki-admin_contribution.php',1265,'feature_contribution','tiki_p_admin_contribution','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (176,42,'o','List TikiSheets','tiki-sheets.php',782,'feature_sheet','tiki_p_view_sheet','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (177,42,'o','Directory batch','tiki-batch_upload_files.php',617,'feature_file_galleries_batch','tiki_p_batch_upload_file_dir','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (178,42,'o','Contacts','tiki-contacts.php',87,'feature_mytiki,feature_contacts','','Registered',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (179,42,'o','Tiki Calendar','tiki-action_calendar.php',36,'feature_action_calendar','tiki_p_view_tiki_calendar','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (180,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_users','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (180,42,'r','Admin','',1050,'','tiki_p_admin_users','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES 
 (187,42,'o','Search','tiki-searchresults.php',13,'feature_search','tiki_p_search','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (184,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_quicktags','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (185,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_menu','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (184,42,'r','Admin','',1050,'','tiki_p_admin_quicktags','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (185,42,'r','Admin','',1050,'','tiki_p_edit_menu','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (188,42,'o','Tiki Cache/Sys Admin','tiki-admin_system.php',1230,'','tiki_p_clean_cache','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (186,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_clean_cache','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (186,42,'r','Admin','',1050,'','tiki_p_clean_cache','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (190,42,'s','Articles','tiki-view_articles.php',350,'feature_articles','tiki_p_articles_read_heading','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (191,42,'o','Articles Home','tiki-view_articles.php',355,'feature_articles','tiki_p_articles_read_heading','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (192,42,'o','List Articles','tiki-list_articles.php',360,'feature_articles','tiki_p_articles_read_heading','',0);

------------------------------------------------------------------------
r16760 | sylvieg | 2009-02-13 16:52:55 -0400 (sex, 13 fev 2009) | 1 line

[MOD]poll: from sumo: each poll can have a vote consideration span= last days nb for which statitics are computed + can choose the time span results are displayed + perm to see the poll voters (REPLACE THE FEATURE POLL IS PUBLIC + DISABLE LOCAL VOTERS LIST (as the option was already there - rollback 15708)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 16759)
+++ tiki.sql	(revision 16760)
@@ -1821,7 +1821,7 @@
   votes int(8) default NULL,
   active char(1) default NULL,
   publishDate int(14) default NULL,
-  anonym enum( 'a', 'u', 'i', 'c' ) NOT NULL DEFAULT 'u',
+  voteConsiderationSpan int(4) default 0,
   PRIMARY KEY (pollId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -2950,6 +2950,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_polls','Can admin polls', 'admin', 'polls', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_poll_results', 'Can view poll results', 'basic', 'polls');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_vote_poll', 'Can vote polls', 'basic', 'polls');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_poll_voters', 'Can view poll voters', 'basic', 'polls');
 
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_quicktags', 'Can admin quicktags', 'admin', 'quicktags', 'y');
 

------------------------------------------------------------------------
r16727 | sylvieg | 2009-02-12 15:27:18 -0400 (qui, 12 fev 2009) | 1 line

[MOD]forum topic: from sumo: anonymous can give email at topic post for notification + fix approval topic post with attachment/anonymous name,mail/tags + take away duplicate code in topic post

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 16726)
+++ tiki.sql	(revision 16727)
@@ -1050,6 +1050,8 @@
   topic_title varchar(240) default NULL,
   summary varchar(240) default NULL,
   in_reply_to varchar(128) default NULL,
+  tags varchar(255) default NULL,
+  email varchar(255) default NULL,
   PRIMARY KEY (qId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -3574,7 +3576,7 @@
 CREATE TABLE tiki_freetagged_objects (
   tagId int(12) NOT NULL auto_increment,
   objectId int(11) NOT NULL default 0,
-  user varchar(200) NOT NULL default '',
+  user varchar(200) default '',
   created int(14) NOT NULL default '0',
   PRIMARY KEY (tagId,user,objectId),
   KEY (tagId),

------------------------------------------------------------------------
r16708 | pkdille | 2009-02-11 16:29:23 -0400 (qua, 11 fev 2009) | 1 line

[NEW] mail notifications: add a perm "tiki_p_admin_notifications" in order to be able to delegate this activity to a user which has not tiki_p_admin

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 16707)
+++ tiki.sql	(revision 16708)
@@ -1555,7 +1555,7 @@
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (140,42,'o','RSS Modules','tiki-admin_rssmodules.php',1100,'','tiki_p_admin_rssmodules','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (141,42,'o','Menus','tiki-admin_menus.php',1105,'','tiki_p_edit_menu','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (142,42,'o','Polls','tiki-admin_polls.php',1110,'feature_polls','tiki_p_admin_polls','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (143,42,'o','Mail Notifications','tiki-admin_notifications.php',1120,'','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (143,42,'o','Mail Notifications','tiki-admin_notifications.php',1120,'','tiki_p_admin_notifications','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (182,42,'o','Search Stats','tiki-search_stats.php',1125,'feature_search_stats','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (145,42,'o','Theme Control','tiki-theme_control.php',1130,'feature_theme_control','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (183,42,'o','QuickTags','tiki-admin_quicktags.php',1135,'','tiki_p_admin_quicktags','',0);
@@ -3082,6 +3082,8 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_trust_input', 'Trust all user inputs (no security checks)', 'admin', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_backlink', 'View page backlinks', 'basic', 'wiki');
 
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_notifications', 'Can admin mail notifications', 'editors', 'mail notifications');
+
 UPDATE users_permissions SET feature_check = 'feature_wiki' WHERE permName IN(
 	'tiki_p_admin_wiki',
 	'tiki_p_assign_perm_wiki_page',

------------------------------------------------------------------------
r16688 | sylvieg | 2009-02-11 08:02:08 -0400 (qua, 11 fev 2009) | 1 line

syntax

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 16687)
+++ tiki.sql	(revision 16688)
@@ -2642,7 +2642,7 @@
   ip varchar(15) default NULL,
   id varchar(255) NOT NULL default '',
   optionId int(10) NOT NULL default 0,
-  time int(14) NOT NULL default 
+  time int(14) NOT NULL default 0,
   PRIMARY KEY (`user`(100),id(100)),
   KEY ip (`ip`),
   KEY id (`id`)

------------------------------------------------------------------------
r16681 | marclaporte | 2009-02-10 23:28:46 -0400 (ter, 10 fev 2009) | 1 line

[MOD] Making ListOrphans page optional, and turned off on clean installs. Wiki orphan pages is a concept more useful when there is no menu. Most TikiWiki sites use a menu.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 16680)
+++ tiki.sql	(revision 16681)
@@ -1453,7 +1453,7 @@
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (39,42,'o','Dump','dump/new.tar',210,'feature_wiki,feature_dump','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (40,42,'o','Rankings','tiki-wiki_rankings.php',215,'feature_wiki,feature_wiki_rankings','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (41,42,'o','List Pages','tiki-listpages.php',220,'feature_wiki,feature_listPages','tiki_p_view','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,42,'o','Orphan Pages','tiki-orphan_pages.php',225,'feature_wiki,feature_listPages','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,42,'o','Orphan Pages','tiki-orphan_pages.php',225,'feature_wiki,feature_listorphanPages','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (43,42,'o','Sandbox','tiki-editpage.php?page=sandbox',230,'feature_wiki,feature_sandbox','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (44,42,'o','Multiple Print','tiki-print_pages.php',235,'feature_wiki,feature_wiki_multiprint','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (45,42,'o','Send Pages','tiki-send_objects.php',240,'feature_wiki,feature_comm','tiki_p_view,tiki_p_send_pages','',0);

------------------------------------------------------------------------
r16672 | marclaporte | 2009-02-10 22:13:57 -0400 (ter, 10 fev 2009) | 1 line

[FIX] Changing search link in menu to be the same at searching in top bar (Site Identity)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 16671)
+++ tiki.sql	(revision 16672)
@@ -1591,7 +1591,8 @@
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (178,42,'o','Contacts','tiki-contacts.php',87,'feature_mytiki,feature_contacts','','Registered',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (179,42,'o','Tiki Calendar','tiki-action_calendar.php',36,'feature_action_calendar','tiki_p_view_tiki_calendar','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (180,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_users','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (187,42,'o','Search','tiki-searchindex.php',13,'feature_search','tiki_p_search','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES 
+(187,42,'o','Search','tiki-searchresults.php',13,'feature_search','tiki_p_search','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (184,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_quicktags','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (185,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_menu','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (188,42,'o','Tiki Cache/Sys Admin','tiki-admin_system.php',1230,'','tiki_p_clean_cache','',0);

------------------------------------------------------------------------
r16658 | marclaporte | 2009-02-10 20:00:14 -0400 (ter, 10 fev 2009) | 1 line

[MOD] On new installs, removing obvious link to mods, as admins can find via tiki-admin.php and there are many errors in mods. http://twitter.com/afahad/statuses/1173416234

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 16657)
+++ tiki.sql	(revision 16658)
@@ -1573,7 +1573,6 @@
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (157,42,'o','Referer Stats','tiki-referer_stats.php',1195,'feature_referer_stats','tiki_p_view_referer_stats','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (158,42,'o','Integrator','tiki-admin_integrator.php',1205,'feature_integrator','tiki_p_admin_integrator','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (159,42,'o','phpinfo','tiki-phpinfo.php',1215,'','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (162,42,'o','Admin Mods','tiki-mods.php',1240,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (163,42,'o','Tiki Logs','tiki-syslog.php',1245,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (164,42,'o','Security Admin','tiki-admin_security.php',1250,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (165,42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_admin','',0);

------------------------------------------------------------------------
r16610 | sylvieg | 2009-02-07 19:42:46 -0400 (sÃ¡b, 07 fev 2009) | 1 line

[FIX]poll: revert partially 15709. keep the date use by sumo - put back the vote in the generic rating table tiki_user_votings(because the new implementation was not preserving the existing - the old ratings were ignored) + add a cookie to control anonymous voting + avoid in a same session anonymous voting + user voting + better anonymous voting control for the lucky ones that have an intranet with fix IP(to preserve the 15709 commit) + wysiwyg

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 16609)
+++ tiki.sql	(revision 16610)
@@ -1823,16 +1823,6 @@
   PRIMARY KEY (pollId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-DROP TABLE IF EXISTS `tiki_poll_votes`;
-CREATE TABLE IF NOT EXISTS `tiki_poll_votes` (
-  `pollId` int(11) NOT NULL,
-  `optionId` int(11) NOT NULL,
-  `voteId` int(11) NOT NULL auto_increment,
-  `identification` varchar(300) NOT NULL,
-  `time` int(11) NOT NULL,
-  PRIMARY KEY  (`voteId`)
-) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-
 DROP TABLE IF EXISTS tiki_preferences;
 CREATE TABLE tiki_preferences (
   name varchar(40) NOT NULL default '',
@@ -2648,10 +2638,14 @@
 
 DROP TABLE IF EXISTS tiki_user_votings;
 CREATE TABLE tiki_user_votings (
-  user varchar(200) NOT NULL default '',
+  user varchar(200) default '',
+  ip varchar(15) default NULL,
   id varchar(255) NOT NULL default '',
   optionId int(10) NOT NULL default 0,
-  PRIMARY KEY (`user`(100),id(100))
+  time int(14) NOT NULL default 
+  PRIMARY KEY (`user`(100),id(100)),
+  KEY ip (`ip`),
+  KEY id (`id`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_user_watches;

------------------------------------------------------------------------
r16594 | sylvieg | 2009-02-06 12:20:39 -0400 (sex, 06 fev 2009) | 1 line

[FIX]menu: content template was in tiki1.8, tiki1.9 - and was lost in tiki2

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 16593)
+++ tiki.sql	(revision 16594)
@@ -1602,6 +1602,7 @@
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (192,42,'o','List Articles','tiki-list_articles.php',360,'feature_articles','tiki_p_articles_read_heading','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (193,42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_view_actionlog','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (194,42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_view_actionlog_owngroups','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'o','Content Templates','tiki-admin_content_templates.php',1256,'','tiki_p_edit_content_templates','',0);
 
 DROP TABLE IF EXISTS tiki_menus;
 CREATE TABLE tiki_menus (

------------------------------------------------------------------------
r16577 | sylvieg | 2009-02-05 11:53:28 -0400 (qui, 05 fev 2009) | 1 line

[FIX]menu: case in menu

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 16576)
+++ tiki.sql	(revision 16577)
@@ -1414,16 +1414,16 @@
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (1,42,'o','Home','./',10,'','','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (3,42,'o','Contact us','tiki-contact.php',20,'feature_contact','','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (3,42,'o','Contact Us','tiki-contact.php',20,'feature_contact','','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (4,42,'o','Stats','tiki-stats.php',23,'feature_stats','tiki_p_view_stats','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (5,42,'o','Categories','tiki-browse_categories.php',25,'feature_categories','tiki_p_view_categories','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (6,42,'o','Games','tiki-list_games.php',30,'feature_games','tiki_p_play_games','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (7,42,'o','Calendar','tiki-calendar.php',35,'feature_calendar','tiki_p_view_calendar','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (8,42,'o','Users map','tiki-gmap_usermap.php',36,'feature_gmap','','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (8,42,'o','Users Map','tiki-gmap_usermap.php',36,'feature_gmap','','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (9,42,'o','Mobile','tiki-mobile.php',37,'feature_mobile','','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (10,42,'o','(debug)','javascript:toggle(\'debugconsole\')',40,'feature_debug_console','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (11,42,'s','MyTiki','tiki-my_tiki.php',50,'feature_mytiki','','Registered',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (12,42,'o','MyTiki home','tiki-my_tiki.php',51,'feature_mytiki','','Registered',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (12,42,'o','MyTiki Home','tiki-my_tiki.php',51,'feature_mytiki','','Registered',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (13,42,'o','Preferences','tiki-user_preferences.php',55,'feature_mytiki,feature_userPreferences','','Registered',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (14,42,'o','Messages','messu-mailbox.php',60,'feature_mytiki,feature_messages','tiki_p_messages','Registered',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (15,42,'o','Tasks','tiki-user_tasks.php',65,'feature_mytiki,feature_tasks','tiki_p_tasks','Registered',0);
@@ -1432,20 +1432,20 @@
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (18,42,'o','Newsreader','tiki-newsreader_servers.php',80,'feature_mytiki,feature_newsreader','tiki_p_newsreader','Registered',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (19,42,'o','Webmail','tiki-webmail.php',85,'feature_mytiki,feature_webmail','tiki_p_use_webmail','Registered',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (20,42,'o','Notepad','tiki-notepad_list.php',90,'feature_mytiki,feature_notepad','tiki_p_notepad','Registered',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (21,42,'o','My files','tiki-userfiles.php',95,'feature_mytiki,feature_userfiles','tiki_p_userfiles','Registered',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (22,42,'o','User menu','tiki-usermenu.php',100,'feature_mytiki,feature_usermenu','tiki_p_usermenu','Registered',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (23,42,'o','Mini calendar','tiki-minical.php',105,'feature_mytiki,feature_minical','tiki_p_minical','Registered',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (24,42,'o','My watches','tiki-user_watches.php',110,'feature_mytiki,feature_user_watches','','Registered',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (21,42,'o','My Files','tiki-userfiles.php',95,'feature_mytiki,feature_userfiles','tiki_p_userfiles','Registered',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (22,42,'o','User Menu','tiki-usermenu.php',100,'feature_mytiki,feature_usermenu','tiki_p_usermenu','Registered',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (23,42,'o','Mini Calendar','tiki-minical.php',105,'feature_mytiki,feature_minical','tiki_p_minical','Registered',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (24,42,'o','My Watches','tiki-user_watches.php',110,'feature_mytiki,feature_user_watches','','Registered',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (25,42,'s','Workflow','tiki-g-user_processes.php',150,'feature_workflow','tiki_p_use_workflow','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (26,42,'o','Admin processes','tiki-g-admin_processes.php',155,'feature_workflow','tiki_p_admin_workflow','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (27,42,'o','Monitor processes','tiki-g-monitor_processes.php',160,'feature_workflow','tiki_p_admin_workflow','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (28,42,'o','Monitor activities','tiki-g-monitor_activities.php',165,'feature_workflow','tiki_p_admin_workflow','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (29,42,'o','Monitor instances','tiki-g-monitor_instances.php',170,'feature_workflow','tiki_p_admin_workflow','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (30,42,'o','User processes','tiki-g-user_processes.php',175,'feature_workflow','tiki_p_use_workflow','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (26,42,'o','Admin Processes','tiki-g-admin_processes.php',155,'feature_workflow','tiki_p_admin_workflow','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (27,42,'o','Monitor Processes','tiki-g-monitor_processes.php',160,'feature_workflow','tiki_p_admin_workflow','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (28,42,'o','Monitor Activities','tiki-g-monitor_activities.php',165,'feature_workflow','tiki_p_admin_workflow','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (29,42,'o','Monitor Instances','tiki-g-monitor_instances.php',170,'feature_workflow','tiki_p_admin_workflow','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (30,42,'o','User Processes','tiki-g-user_processes.php',175,'feature_workflow','tiki_p_use_workflow','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (31,42,'o','User activities','tiki-g-user_activities.php',180,'feature_workflow','tiki_p_use_workflow','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (32,42,'o','User instances','tiki-g-user_instances.php',185,'feature_workflow','tiki_p_use_workflow','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (33,42,'s','Community','tiki-list_users.php',187,'feature_friends','tiki_p_list_users','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (34,42,'o','User list','tiki-list_users.php',188,'feature_friends','tiki_p_list_users','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (34,42,'o','User List','tiki-list_users.php',188,'feature_friends','tiki_p_list_users','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (35,42,'o','Friendship Network','tiki-friends.php',189,'feature_friends','','Registered',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (36,42,'s','Wiki','tiki-index.php',200,'feature_wiki','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (37,42,'o','Wiki Home','tiki-index.php',202,'feature_wiki','tiki_p_view','',0);
@@ -1452,78 +1452,78 @@
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (38,42,'o','Last Changes','tiki-lastchanges.php',205,'feature_wiki,feature_lastChanges','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (39,42,'o','Dump','dump/new.tar',210,'feature_wiki,feature_dump','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (40,42,'o','Rankings','tiki-wiki_rankings.php',215,'feature_wiki,feature_wiki_rankings','tiki_p_view','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (41,42,'o','List pages','tiki-listpages.php',220,'feature_wiki,feature_listPages','tiki_p_view','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,42,'o','Orphan pages','tiki-orphan_pages.php',225,'feature_wiki,feature_listPages','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (41,42,'o','List Pages','tiki-listpages.php',220,'feature_wiki,feature_listPages','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,42,'o','Orphan Pages','tiki-orphan_pages.php',225,'feature_wiki,feature_listPages','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (43,42,'o','Sandbox','tiki-editpage.php?page=sandbox',230,'feature_wiki,feature_sandbox','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (44,42,'o','Multiple Print','tiki-print_pages.php',235,'feature_wiki,feature_wiki_multiprint','tiki_p_view','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (45,42,'o','Send pages','tiki-send_objects.php',240,'feature_wiki,feature_comm','tiki_p_view,tiki_p_send_pages','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (46,42,'o','Received pages','tiki-received_pages.php',245,'feature_wiki,feature_comm','tiki_p_view,tiki_p_admin_received_pages','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (45,42,'o','Send Pages','tiki-send_objects.php',240,'feature_wiki,feature_comm','tiki_p_view,tiki_p_send_pages','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (46,42,'o','Received Pages','tiki-received_pages.php',245,'feature_wiki,feature_comm','tiki_p_view,tiki_p_admin_received_pages','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (47,42,'o','Structures','tiki-admin_structures.php',250,'feature_wiki,feature_wiki_structure','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (197,42,'o','Mind Map','tiki-mindmap.php',255,'feature_wiki_mindmap','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (48,42,'s','Image Galleries','tiki-galleries.php',300,'feature_galleries','tiki_p_view_image_gallery','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (49,42,'o','Galleries','tiki-galleries.php',305,'feature_galleries','tiki_p_list_image_galleries','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (50,42,'o','Rankings','tiki-galleries_rankings.php',310,'feature_galleries,feature_gal_rankings','tiki_p_list_image_galleries','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (51,42,'o','Upload image','tiki-upload_image.php',315,'feature_galleries','tiki_p_upload_images','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (52,42,'o','Directory batch','tiki-batch_upload.php',318,'feature_galleries,feature_gal_batch','tiki_p_batch_upload','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (53,42,'o','System gallery','tiki-list_gallery.php?galleryId=0',320,'feature_galleries','tiki_p_admin_galleries','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (51,42,'o','Upload Image','tiki-upload_image.php',315,'feature_galleries','tiki_p_upload_images','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (52,42,'o','Directory Batch','tiki-batch_upload.php',318,'feature_galleries,feature_gal_batch','tiki_p_batch_upload','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (53,42,'o','System Gallery','tiki-list_gallery.php?galleryId=0',320,'feature_galleries','tiki_p_admin_galleries','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (54,42,'s','Articles','tiki-view_articles.php',350,'feature_articles','tiki_p_read_article','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (55,42,'o','Articles home','tiki-view_articles.php',355,'feature_articles','tiki_p_read_article','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (56,42,'o','List articles','tiki-list_articles.php',360,'feature_articles','tiki_p_read_article','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (55,42,'o','Articles Home','tiki-view_articles.php',355,'feature_articles','tiki_p_read_article','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (56,42,'o','List Articles','tiki-list_articles.php',360,'feature_articles','tiki_p_read_article','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (57,42,'o','Rankings','tiki-cms_rankings.php',365,'feature_articles,feature_cms_rankings','tiki_p_read_article','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (58,42,'o','Submit article','tiki-edit_submission.php',370,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_submit_article','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (58,42,'o','Submit Article','tiki-edit_submission.php',370,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_submit_article','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (59,42,'o','View submissions','tiki-list_submissions.php',375,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_submit_article','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (60,42,'o','View submissions','tiki-list_submissions.php',375,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_approve_submission','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (61,42,'o','View submissions','tiki-list_submissions.php',375,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_remove_submission','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (62,42,'o','New article','tiki-edit_article.php',380,'feature_articles','tiki_p_read_article,tiki_p_edit_article','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (63,42,'o','Send articles','tiki-send_objects.php',385,'feature_articles,feature_comm','tiki_p_read_article,tiki_p_send_articles','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (64,42,'o','Received articles','tiki-received_articles.php',385,'feature_articles,feature_comm','tiki_p_read_article,tiki_p_admin_received_articles','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (196,42,'o','Admin types','tiki-article_types.php',395,'feature_articles','tiki_p_articles_admin_types','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (195,42,'o','Admin topics','tiki-admin_topics.php',390,'feature_articles','tiki_p_articles_admin_topics','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (61,42,'o','View Submissions','tiki-list_submissions.php',375,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_remove_submission','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (62,42,'o','New Article','tiki-edit_article.php',380,'feature_articles','tiki_p_read_article,tiki_p_edit_article','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (63,42,'o','Send Articles','tiki-send_objects.php',385,'feature_articles,feature_comm','tiki_p_read_article,tiki_p_send_articles','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (64,42,'o','Received Articles','tiki-received_articles.php',385,'feature_articles,feature_comm','tiki_p_read_article,tiki_p_admin_received_articles','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (196,42,'o','Admin Types','tiki-article_types.php',395,'feature_articles','tiki_p_articles_admin_types','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (195,42,'o','Admin Topics','tiki-admin_topics.php',390,'feature_articles','tiki_p_articles_admin_topics','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (67,42,'s','Blogs','tiki-list_blogs.php',450,'feature_blogs','tiki_p_read_blog','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (68,42,'o','List blogs','tiki-list_blogs.php',455,'feature_blogs','tiki_p_read_blog','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (68,42,'o','List Blogs','tiki-list_blogs.php',455,'feature_blogs','tiki_p_read_blog','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (69,42,'o','Rankings','tiki-blog_rankings.php',460,'feature_blogs,feature_blog_rankings','tiki_p_read_blog','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (70,42,'o','Create/Edit blog','tiki-edit_blog.php',465,'feature_blogs','tiki_p_read_blog,tiki_p_create_blogs','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (70,42,'o','Create/Edit Blog','tiki-edit_blog.php',465,'feature_blogs','tiki_p_read_blog,tiki_p_create_blogs','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (71,42,'o','Post','tiki-blog_post.php',470,'feature_blogs','tiki_p_read_blog,tiki_p_blog_post','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (72,42,'o','Admin posts','tiki-list_posts.php',475,'feature_blogs','tiki_p_read_blog,tiki_p_blog_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (72,42,'o','Admin Posts','tiki-list_posts.php',475,'feature_blogs','tiki_p_read_blog,tiki_p_blog_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (73,42,'s','Forums','tiki-forums.php',500,'feature_forums','tiki_p_forum_read','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (74,42,'o','List forums','tiki-forums.php',505,'feature_forums','tiki_p_forum_read','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (74,42,'o','List Forums','tiki-forums.php',505,'feature_forums','tiki_p_forum_read','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (75,42,'o','Rankings','tiki-forum_rankings.php',510,'feature_forums,feature_forum_rankings','tiki_p_forum_read','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (76,42,'o','Admin forums','tiki-admin_forums.php',515,'feature_forums','tiki_p_forum_read,tiki_p_admin_forum','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (76,42,'o','Admin Forums','tiki-admin_forums.php',515,'feature_forums','tiki_p_forum_read,tiki_p_admin_forum','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (77,42,'s','Directory','tiki-directory_browse.php',550,'feature_directory','tiki_p_view_directory','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (78,42,'o','Submit a new link','tiki-directory_add_site.php',555,'feature_directory','tiki_p_submit_link','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (79,42,'o','Browse directory','tiki-directory_browse.php',560,'feature_directory','tiki_p_view_directory','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (80,42,'o','Admin directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_admin_directory_cats','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (81,42,'o','Admin directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_admin_directory_sites','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (82,42,'o','Admin directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_validate_links','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (79,42,'o','Browse Directory','tiki-directory_browse.php',560,'feature_directory','tiki_p_view_directory','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (80,42,'o','Admin Directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_admin_directory_cats','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (81,42,'o','Admin Directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_admin_directory_sites','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (82,42,'o','Admin Directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_validate_links','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (83,42,'s','File Galleries','tiki-list_file_gallery.php',600,'feature_file_galleries','tiki_p_view_file_gallery','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (84,42,'o','List galleries','tiki-list_file_gallery.php',605,'feature_file_galleries','tiki_p_list_file_galleries','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (84,42,'o','List Galleries','tiki-list_file_gallery.php',605,'feature_file_galleries','tiki_p_list_file_galleries','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (85,42,'o','Rankings','tiki-file_galleries_rankings.php',610,'feature_file_galleries,feature_file_galleries_rankings','tiki_p_list_file_galleries','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (86,42,'o','Upload file','tiki-upload_file.php',615,'feature_file_galleries','tiki_p_view_file_gallery,tiki_p_upload_files','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (86,42,'o','Upload File','tiki-upload_file.php',615,'feature_file_galleries','tiki_p_view_file_gallery,tiki_p_upload_files','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (87,42,'s','FAQs','tiki-list_faqs.php',650,'feature_faqs','tiki_p_view_faqs','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (88,42,'o','List FAQs','tiki-list_faqs.php',665,'feature_faqs','tiki_p_view_faqs','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (89,42,'o','Admin FAQs','tiki-list_faqs.php',660,'feature_faqs','tiki_p_admin_faqs','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (90,42,'s','Maps','tiki-map.php',700,'feature_maps','tiki_p_map_view','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (91,42,'o','Mapfiles','tiki-map_edit.php',705,'feature_maps','tiki_p_map_view','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (92,42,'o','Layer management','tiki-map_upload.php',710,'feature_maps','tiki_p_map_edit','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (92,42,'o','Layer Management','tiki-map_upload.php',710,'feature_maps','tiki_p_map_edit','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (93,42,'s','Quizzes','tiki-list_quizzes.php',750,'feature_quizzes','tiki_p_take_quiz','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (94,42,'o','List quizzes','tiki-list_quizzes.php',755,'feature_quizzes','tiki_p_take_quiz','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (95,42,'o','Quiz stats','tiki-quiz_stats.php',760,'feature_quizzes','tiki_p_view_quiz_stats','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (96,42,'o','Admin quiz','tiki-edit_quiz.php',765,'feature_quizzes','tiki_p_admin_quizzes','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (94,42,'o','List Quizzes','tiki-list_quizzes.php',755,'feature_quizzes','tiki_p_take_quiz','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (95,42,'o','Quiz Stats','tiki-quiz_stats.php',760,'feature_quizzes','tiki_p_view_quiz_stats','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (96,42,'o','Admin Quizzes','tiki-edit_quiz.php',765,'feature_quizzes','tiki_p_admin_quizzes','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (97,42,'s','TikiSheet','tiki-sheets.php',780,'feature_sheet','tiki_p_view_sheet','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (98,42,'s','Trackers','tiki-list_trackers.php',800,'feature_trackers','tiki_p_view_trackers','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (99,42,'o','List trackers','tiki-list_trackers.php',805,'feature_trackers','tiki_p_view_trackers','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (100,42,'o','Admin trackers','tiki-admin_trackers.php',810,'feature_trackers','tiki_p_admin_trackers','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (99,42,'o','List Trackers','tiki-list_trackers.php',805,'feature_trackers','tiki_p_view_trackers','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (100,42,'o','Admin Trackers','tiki-admin_trackers.php',810,'feature_trackers','tiki_p_admin_trackers','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (101,42,'s','Surveys','tiki-list_surveys.php',850,'feature_surveys','tiki_p_take_survey','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (102,42,'o','List surveys','tiki-list_surveys.php',855,'feature_surveys','tiki_p_take_survey','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (102,42,'o','List Surveys','tiki-list_surveys.php',855,'feature_surveys','tiki_p_take_survey','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (103,42,'o','Stats','tiki-survey_stats.php',860,'feature_surveys','tiki_p_view_survey_stats','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (104,42,'o','Admin surveys','tiki-admin_surveys.php',865,'feature_surveys','tiki_p_admin_surveys','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (104,42,'o','Admin Surveys','tiki-admin_surveys.php',865,'feature_surveys','tiki_p_admin_surveys','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (105,42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_subscribe_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (106,42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_send_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (107,42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_admin_newsletters','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (108,42,'o','Send newsletters','tiki-send_newsletters.php',905,'feature_newsletters','tiki_p_send_newsletters','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (109,42,'o','Admin newsletters','tiki-admin_newsletters.php',910,'feature_newsletters','tiki_p_admin_newsletters','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (108,42,'o','Send Newsletters','tiki-send_newsletters.php',905,'feature_newsletters','tiki_p_send_newsletters','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (109,42,'o','Admin Newsletters','tiki-admin_newsletters.php',910,'feature_newsletters','tiki_p_admin_newsletters','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (112,42,'s','Charts','tiki-charts.php',1000,'feature_charts','tiki_p_view_chart','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (113,42,'o','Admin charts','tiki-admin_charts.php',1005,'feature_charts','tiki_p_admin_charts','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (113,42,'o','Admin Charts','tiki-admin_charts.php',1005,'feature_charts','tiki_p_admin_charts','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (114,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (116,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_categories','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (117,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_banners','',0);
@@ -1542,9 +1542,9 @@
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'feature_edit_templates','tiki_p_edit_templates','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'feature_view_tpl','tiki_p_edit_templates','',0);
 INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'feature_editcss','tiki_p_create_css','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (130,42,'o','Admin home','tiki-admin.php',1051,'','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (131,42,'o','Live support','tiki-live_support_admin.php',1055,'feature_live_support','tiki_p_live_support_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (132,42,'o','Live support','tiki-live_support_admin.php',1055,'feature_live_support','user_is_operator','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (130,42,'o','Admin Home','tiki-admin.php',1051,'','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (131,42,'o','Live Support','tiki-live_support_admin.php',1055,'feature_live_support','tiki_p_live_support_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (132,42,'o','Live Support','tiki-live_support_admin.php',1055,'feature_live_support','user_is_operator','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (133,42,'o','Banning','tiki-admin_banning.php',1060,'feature_banning','tiki_p_admin_banning','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (134,42,'o','Calendar','tiki-admin_calendars.php',1065,'feature_calendar','tiki_p_admin_calendar','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (135,42,'o','Users','tiki-adminusers.php',1070,'','tiki_p_admin_users','',0);
@@ -1552,28 +1552,28 @@
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (189,42,'o','Wiki Cache','tiki-list_cache.php',1080,'cachepages','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (138,42,'o','Modules','tiki-admin_modules.php',1085,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (139,42,'o','Hotwords','tiki-admin_hotwords.php',1095,'feature_hotwords','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (140,42,'o','RSS modules','tiki-admin_rssmodules.php',1100,'','tiki_p_admin_rssmodules','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (140,42,'o','RSS Modules','tiki-admin_rssmodules.php',1100,'','tiki_p_admin_rssmodules','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (141,42,'o','Menus','tiki-admin_menus.php',1105,'','tiki_p_edit_menu','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (142,42,'o','Polls','tiki-admin_polls.php',1110,'feature_polls','tiki_p_admin_polls','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (143,42,'o','Mail notifications','tiki-admin_notifications.php',1120,'','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (182,42,'o','Search stats','tiki-search_stats.php',1125,'feature_search_stats','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (145,42,'o','Theme control','tiki-theme_control.php',1130,'feature_theme_control','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (143,42,'o','Mail Notifications','tiki-admin_notifications.php',1120,'','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (182,42,'o','Search Stats','tiki-search_stats.php',1125,'feature_search_stats','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (145,42,'o','Theme Control','tiki-theme_control.php',1130,'feature_theme_control','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (183,42,'o','QuickTags','tiki-admin_quicktags.php',1135,'','tiki_p_admin_quicktags','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (148,42,'o','Categories','tiki-admin_categories.php',1145,'feature_categories','tiki_p_admin_categories','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (149,42,'o','Banners','tiki-list_banners.php',1150,'feature_banners','tiki_p_admin_banners','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (150,42,'o','Edit templates','tiki-edit_templates.php',1155,'feature_edit_templates','tiki_p_edit_templates','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (150,42,'o','Edit Templates','tiki-edit_templates.php',1155,'feature_edit_templates','tiki_p_edit_templates','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (147,42,'o','View Templates','tiki-edit_templates.php',1155,'feature_view_tpl','tiki_p_edit_templates','',2);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (146,42,'o','Edit CSS','tiki-edit_css.php',1158,'feature_editcss','tiki_p_create_css','',2);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (151,42,'o','Drawings','tiki-admin_drawings.php',1160,'feature_drawings','tiki_p_admin_drawings','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (152,42,'o','Dynamic content','tiki-list_contents.php',1165,'feature_dynamic_content','tiki_p_admin_dynamic','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (153,42,'o','Mail-in','tiki-admin_mailin.php',1175,'feature_mailin','tiki_p_admin_mailin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (154,42,'o','HTML pages','tiki-admin_html_pages.php',1185,'feature_html_pages','tiki_p_edit_html_pages','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (154,42,'o','HTML Pages','tiki-admin_html_pages.php',1185,'feature_html_pages','tiki_p_edit_html_pages','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (155,42,'o','Shoutbox','tiki-shoutbox.php',1190,'feature_shoutbox','tiki_p_admin_shoutbox','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (156,42,'o','Shoutbox Words','tiki-admin_shoutbox_words.php',1191,'feature_shoutbox','tiki_p_admin_shoutbox','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (157,42,'o','Referer stats','tiki-referer_stats.php',1195,'feature_referer_stats','tiki_p_view_referer_stats','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (157,42,'o','Referer Stats','tiki-referer_stats.php',1195,'feature_referer_stats','tiki_p_view_referer_stats','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (158,42,'o','Integrator','tiki-admin_integrator.php',1205,'feature_integrator','tiki_p_admin_integrator','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (159,42,'o','phpinfo','tiki-phpinfo.php',1215,'','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (162,42,'o','Admin mods','tiki-mods.php',1240,'','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (162,42,'o','Admin Mods','tiki-mods.php',1240,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (163,42,'o','Tiki Logs','tiki-syslog.php',1245,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (164,42,'o','Security Admin','tiki-admin_security.php',1250,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (165,42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_admin','',0);
@@ -1598,8 +1598,8 @@
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (188,42,'o','Tiki Cache/Sys Admin','tiki-admin_system.php',1230,'','tiki_p_clean_cache','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (186,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_clean_cache','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (190,42,'s','Articles','tiki-view_articles.php',350,'feature_articles','tiki_p_articles_read_heading','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (191,42,'o','Articles home','tiki-view_articles.php',355,'feature_articles','tiki_p_articles_read_heading','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (192,42,'o','List articles','tiki-list_articles.php',360,'feature_articles','tiki_p_articles_read_heading','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (191,42,'o','Articles Home','tiki-view_articles.php',355,'feature_articles','tiki_p_articles_read_heading','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (192,42,'o','List Articles','tiki-list_articles.php',360,'feature_articles','tiki_p_articles_read_heading','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (193,42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_view_actionlog','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (194,42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_view_actionlog_owngroups','',0);
 

------------------------------------------------------------------------
r16510 | sylvieg | 2009-02-03 15:18:29 -0400 (ter, 03 fev 2009) | 1 line

[FIX]schema: no reason to say not null for an optional value

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 16509)
+++ tiki.sql	(revision 16510)
@@ -1766,7 +1766,7 @@
   is_html tinyint(1) default 0,
   created int(14),
   wysiwyg char(1) default NULL,
-  wiki_authors_style varchar(20) NOT NULL default '',
+  wiki_authors_style varchar(20) default '',
   PRIMARY KEY (page_id),
   UNIQUE KEY pageName (pageName),
   KEY data (data(255)),

------------------------------------------------------------------------
r16473 | sept_7 | 2009-01-30 11:46:58 -0400 (sex, 30 jan 2009) | 9 lines

[ENH] Search :
      o change in the database to allow Full Text Search on Calendar Items
      o for tiki-searchresult add search on date based on lastModif 
        (All, or 1 month... 11 monthes)
      o for tiki-searchresult add {add_help} for Advanced Search (aka boolean)
      o for tiki-searchresult rework of the layout to match searchindex
      o for tikisearch*.tpl use of buttons
   


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 16472)
+++ tiki.sql	(revision 16473)
@@ -471,7 +471,7 @@
   url varchar(255) default NULL,
   lang char(16) NOT NULL default 'en',
   name varchar(255) NOT NULL default '',
-  description blob,
+  description text,
   recurrenceId int(14),
   changed tinyint(1) DEFAULT '0',
   user varchar(200) default '',
@@ -480,6 +480,7 @@
   allday tinyint(1) NOT NULL default '0',
   PRIMARY KEY (calitemId),
   KEY calendarId (calendarId),
+  FULLTEXT KEY ft (name,description),
   CONSTRAINT fk_calitems_recurrence
 	FOREIGN KEY (recurrenceId) REFERENCES tiki_calendar_recurrence(recurrenceId)
 	ON UPDATE CASCADE ON DELETE SET NULL

------------------------------------------------------------------------
r16384 | sylvieg | 2009-01-23 11:23:35 -0400 (sex, 23 jan 2009) | 1 line

[FIX] for mysql4

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 16383)
+++ tiki.sql	(revision 16384)
@@ -3755,7 +3755,7 @@
   `comment` varchar(256),
   `order` int(11) NULL default 0,
   PRIMARY KEY(`id`),
-  UNIQUE KEY (`left`),
+  UNIQUE KEY `left` (`left`(256)),
   INDEX `idx1` (silent, type, feature(30))
 );
 INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-index.php\\?page=(.+)', '$1', 'wiki', 'feature_wiki');

------------------------------------------------------------------------
r16355 | sylvieg | 2009-01-21 09:20:44 -0400 (qua, 21 jan 2009) | 1 line

[MOD]sefurl: use rule in database in the smarty modifier or the smarty output filter

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 16354)
+++ tiki.sql	(revision 16355)
@@ -3744,3 +3744,67 @@
   PRIMARY KEY  (`id`),
   KEY `editionId` (`editionId`)
 );
+DROP TABLE IF EXISTS `tiki_sefurl_regex_out`;
+CREATE TABLE `tiki_sefurl_regex_out` (
+  `id` int(11) NOT NULL auto_increment,
+  `left` varchar(256) NOT NULL,
+  `right` varchar(256) NULL default NULL,
+  `type` varchar(32) NULL default NULL,
+  `silent` char(1) NULL default 'n',
+  `feature` varchar(256) NULL default NULL,
+  `comment` varchar(256),
+  `order` int(11) NULL default 0,
+  PRIMARY KEY(`id`),
+  UNIQUE KEY (`left`),
+  INDEX `idx1` (silent, type, feature(30))
+);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-index.php\\?page=(.+)', '$1', 'wiki', 'feature_wiki');
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-slideshow.php\\?page=(.+)', 'show:$1', '', 'feature_wiki');
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-read_article.php\\?articleId=(\\d+)', 'article$1', 'article', 'feature_articles');
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-browse_categories.php\\?parentId=(\\d+)', 'cat$1', 'category', 'feature_categories');
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-view_blog.php\\?blogId=(\\d+)', 'blog$1', 'blog', 'feature_blogs');
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-view_blog_post.php\\?postId=(\\d+)', 'blogpost$1', 'blogpost', 'feature_blogs');
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-browse_image.php\\?imageId=(\\d+)', 'browseimage$1', 'image', 'feature_galleries');
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-view_chart.php\\?chartId=(\\d+)', 'chart$1', 'chart', 'feature_charts');
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-directory_browse.php\\?parent=(\\d+)', 'directory$1', 'directory', 'feature_directory');
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-view_faq.php\\?faqId=(\\d+)', 'faq$1', 'faq', 'feature_faqs');
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-list_file_gallery.php\\?galleryId=(\\d+)', 'file$1', 'file', 'feature_file_galleries');
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-download_file.php\\?fileId=(\\d+)', 'dl$1', 'file', 'feature_file_galleries');
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-view_forum.php\\?forumId=(\\d+)', 'forum$1', 'forum', 'feature_forums');
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-browse_gallery.php\\?galleryId=(\\d+)', 'gallery$1', 'gallery', 'feature_galleries');
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('show_image.php\\?id=(\\d+)', 'image$1', 'image', 'feature_galleries');
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('show_image.php\\?id=(\\d+)&scalesize=(\\d+)', 'imagescale$1/$2', 'image', 'feature_galleries');
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-newsletters.php\\?nlId=(\\d+)', 'newsletter$1', 'newsletter', 'feature_newsletters');
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-take_quiz.php\\?quizId=(\\d+)', 'quiz$1', 'quiz', 'feature_quizzes');
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-take_survey.php\\?surveyId=(\\d+)', 'survey$1', 'survey', 'feature_surveys');
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-view_tracker.php\\?trackerId=(\\d+)', 'tracker$1', 'tracker', 'feature_trackers');
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-integrator.php\\?repID=(\\d+)', 'int$1', '', 'feature_integrator');
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-view_sheets.php\\?sheetId=(\\d+)', 'sheet$1', 'sheet', 'feature_sheet');
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`) VALUES('tiki-directory_redirect.php\\?siteId=(\\d+)', 'dirlink$1', 'directory', 'feature_directory');
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `comment`, `type`, `feature`, `order`) VALUES('tiki-calendar.php\\?calIds\\[\\]=(\\d+)\&calIds\\[\\]=(\\d+)\&callIds\\[\\](\\d+)\&callIds\\[\\](\\d+)\&callIds\\[\\](\\d+)\&callIds\\[\\](\\d+)\&callIds\\[\\](\\d+)', 'cal$1,$2,$3,$4,$5,$6,$7', '7', 'calendar', 'feature_calendar', 100);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `comment`, `type`, `feature`, `order`) VALUES('tiki-calendar.php\\?calIds\\[\\]=(\\d+)\&calIds\\[\\]=(\\d+)\&callIds\\[\\](\\d+)\&callIds\\[\\](\\d+)\&callIds\\[\\](\\d+)\&callIds\\[\\](\\d+)', 'cal$1,$2,$3,$4,$5,$6', '6', 'calendar', 'feature_calendar', 101);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `comment`, `type`, `feature`, `order`) VALUES('tiki-calendar.php\\?calIds\\[\\]=(\\d+)\&calIds\\[\\]=(\\d+)\&callIds\\[\\](\\d+)\&callIds\\[\\](\\d+)\&callIds\\[\\](\\d+)', 'cal$1,$2,$3,$4,$5', '5', 'calendar', 'feature_calendar', 102);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `comment`, `type`, `feature`, `order`) VALUES('tiki-calendar.php\\?calIds\\[\\]=(\\d+)\&calIds\\[\\]=(\\d+)\&callIds\\[\\](\\d+)\&callIds\\[\\](\\d+)', 'cal$1,$2,$3,$4', '4', 'calendar', 'feature_calendar', 103);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `comment`, `type`, `feature`, `order`) VALUES('tiki-calendar.php\\?calIds\\[\\]=(\\d+)\&calIds\\[\\]=(\\d+)\&callIds\\[\\](\\d+)', 'cal$1,$2,$3', '3', 'calendar', 'feature_calendar', 104);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `comment`, `type`, `feature`, `order`) VALUES('tiki-calendar.php\\?calIds\\[\\]=(\\d+)&calIds\\[\\]=(\\d+)', 'cal$1,$2', '2', 'calendar', 'feature_calendar', 105);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `comment`, `type`, `feature`, `order`) VALUES('tiki-calendar.php\\?calIds\\[\\]=(\\d+)', 'cal$1', '1', 'calendar', 'feature_calendar', 106);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-calendar.php', 'calendar', 'calendar', 'feature_calendar', 200);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-view_articles.php', 'articles', '', 'feature_articles', 200);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-list_blogs.php', 'blogs', '', 'feature_blogs', 200);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-browse_categories.php', 'categories', '', 'feature_categories', 200);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-list_charts.php', 'charts', '', 'feature_charts', 200);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-contact.php', 'contact', '', 'feature_contact', 200);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-directory_browse.php', 'directories', '', 'feature_directory', 200);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-list_faqs.php', 'faqs', '', 'feature_faqs', 200);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-file_galleries.php', 'files', '', 'feature_file_galleries', 200);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-forums.php', 'forums', '', 'feature_forums', 200);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-galleries.php', 'galleries', '', 'feature_galleries', 200);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-login_scr.php', 'login', '', '', 200);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-my_tiki.php', 'my', '', '', 200);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-newsletters.php', 'newsletters', 'newsletter', 'feature_newsletters', 200);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-list_quizzes.php', 'quizzes', '', 'feature_quizzes', 200);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-stats.php', 'stats', '', 'feature_stats', 200);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-list_surveys.php', 'surveys', '', 'feature_surveys', 200);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-list_trackers.php', 'trackers', '', 'feature_trackers', 200);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-mobile.php', 'mobile', '', 'feature_mobile', 200);
+INSERT INTO `tiki_sefurl_regex_out` (`left`, `right`, `type`, `feature`, `order`) VALUES('tiki-sheets.php', 'sheets', '', 'feature_sheet', 200);

------------------------------------------------------------------------
r16325 | sylvieg | 2009-01-20 09:51:03 -0400 (ter, 20 jan 2009) | 1 line

[FIX] tiki_p_search_categorized 

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 16324)
+++ tiki.sql	(revision 16325)
@@ -2825,6 +2825,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_categorized', 'Can edit items in categories', 'registered', 'category');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_categories', 'Can view categories', 'basic', 'category');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_categorized', 'Can view categorized items', 'basic', 'category');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_search_categorized', 'Can search on objects of this category', 'basic', 'category');
 
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_charts', 'Can admin charts', 'admin', 'charts', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_autoval_chart_suggestio', 'Autovalidate suggestions', 'editors', 'charts');

------------------------------------------------------------------------
r16187 | lphuberdeau | 2009-01-06 13:18:33 -0400 (ter, 06 jan 2009) | 1 line

[NEW] Support for group watches, UI still to come

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 16186)
+++ tiki.sql	(revision 16187)
@@ -1127,6 +1127,19 @@
   PRIMARY KEY (groupName(30),includeGroup(30))
 ) ENGINE=MyISAM;
 
+DROP TABLE IF EXISTS tiki_group_watches;
+CREATE TABLE tiki_group_watches (
+  watchId int(12) NOT NULL auto_increment,
+  `group` varchar(200) NOT NULL default '',
+  event varchar(40) NOT NULL default '',
+  object varchar(200) NOT NULL default '',
+  title varchar(250) default NULL,
+  type varchar(200) default NULL,
+  url varchar(250) default NULL,
+  KEY watchId (watchId),
+  PRIMARY KEY (`group`(50),event,object(100))
+) ENGINE=MyISAM;
+
 DROP TABLE IF EXISTS tiki_history;
 CREATE TABLE tiki_history (
   historyId int(12) NOT NULL auto_increment,

------------------------------------------------------------------------
r16039 | lphuberdeau | 2008-12-14 17:00:40 -0400 (dom, 14 dez 2008) | 1 line

[MOD] Missing alter in the table

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 16038)
+++ tiki.sql	(revision 16039)
@@ -3693,6 +3693,7 @@
 CREATE TABLE tiki_webservice (
 	service VARCHAR(25) NOT NULL PRIMARY KEY,
 	url VARCHAR(250),
+	body TEXT,
 	schema_version VARCHAR(5),
 	schema_documentation VARCHAR(250)
 ) ENGINE=MyISAM ;

------------------------------------------------------------------------
r16023 | sylvieg | 2008-12-12 16:13:14 -0400 (sex, 12 dez 2008) | 1 line

[MOD]perm: view backlink perm

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 16022)
+++ tiki.sql	(revision 16023)
@@ -3070,6 +3070,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_plugin_preview', 'Can execute unapproved plugin', 'registered', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_plugin_approve', 'Can approve plugin execution', 'editors', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_trust_input', 'Trust all user inputs (no security checks)', 'admin', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_backlink', 'View page backlinks', 'basic', 'wiki');
 
 UPDATE users_permissions SET feature_check = 'feature_wiki' WHERE permName IN(
 	'tiki_p_admin_wiki',

------------------------------------------------------------------------
r16007 | sylvieg | 2008-12-11 17:09:52 -0400 (qui, 11 dez 2008) | 1 line

[FIX]Score: only accessible from admin pannel

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 16006)
+++ tiki.sql	(revision 16007)
@@ -1559,7 +1559,6 @@
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (157,42,'o','Referer stats','tiki-referer_stats.php',1195,'feature_referer_stats','tiki_p_view_referer_stats','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (158,42,'o','Integrator','tiki-admin_integrator.php',1205,'feature_integrator','tiki_p_admin_integrator','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (159,42,'o','phpinfo','tiki-phpinfo.php',1215,'','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (161,42,'o','Score','tiki-admin_include_score.php',1235,'feature_score','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (162,42,'o','Admin mods','tiki-mods.php',1240,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (163,42,'o','Tiki Logs','tiki-syslog.php',1245,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (164,42,'o','Security Admin','tiki-admin_security.php',1250,'','tiki_p_admin','',0);

------------------------------------------------------------------------
r15997 | niclone | 2008-12-11 11:23:17 -0400 (qui, 11 dez 2008) | 1 line

[FIX] newsletters: sql files..

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15996)
+++ tiki.sql	(revision 15997)
@@ -3717,3 +3717,15 @@
 	displayEachuser  char( 1 ) default NULL ,
 	PRIMARY KEY ( objectType,objectId )
 ) ENGINE=MyISAM ;
+
+DROP TABLE IF EXISTS `tiki_sent_newsletters_files`;
+CREATE TABLE `tiki_sent_newsletters_files` (
+  `id` int(11) NOT NULL auto_increment,
+  `editionId` int(11) NOT NULL,
+  `name` varchar(256) NOT NULL,
+  `type` varchar(64) NOT NULL,
+  `size` int(11) NOT NULL,
+  `filename` varchar(256) NOT NULL,
+  PRIMARY KEY  (`id`),
+  KEY `editionId` (`editionId`)
+);

------------------------------------------------------------------------
r15918 | nyloth | 2008-12-05 14:01:25 -0400 (sex, 05 dez 2008) | 13 lines

[NEW][MOD] calendars: revamping of calendars + new features

* New look of calendars in every views, especially in week view which is now displayed with hours details. Events on multiple days are also better displayed. In week view, when there is more than 3 events, a special zone will be displayed and the overbox will contain all details,

* New recurrence feature to have the same event each week/month/year between two dates or for X occurences. An event from an occurence can be modified later. When modifying an event from a recurrence, TikiWiki will ask the user if he wants to change only the current event, all the events of the recurence, or events of the recurence which were not already modified,

* New iCal export feature,

* New option to choose the calendars to display by default. Also keep in database the user last calendar choices in order to keep use the same filter when he comes back,

* New "standard colors" when creating a calendar to ease the choice of calendar colors



Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15917)
+++ tiki.sql	(revision 15918)
@@ -425,6 +425,38 @@
   UNIQUE KEY catname (calendarId,name(16))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
+DROP TABLE IF EXISTS tiki_calendar_recurrence;
+CREATE TABLE tiki_calendar_recurrence (
+  recurrenceId int(14) NOT NULL auto_increment,
+  calendarId int(14) NOT NULL default '0',
+  start int(4) NOT NULL default '0',
+  end int(4) NOT NULL default '2359',
+  allday tinyint(1) NOT NULL default '0',
+  locationId int(14) default NULL,
+  categoryId int(14) default NULL,
+  nlId int(12) NOT NULL default '0',
+  priority enum('1','2','3','4','5','6','7','8','9') NOT NULL default '1',
+  status enum('0','1','2') NOT NULL default '0',
+  url varchar(255) default NULL,
+  lang char(16) NOT NULL default 'en',
+  name varchar(255) NOT NULL default '',
+  description blob,
+  weekly tinyint(1) default '0',
+  weekday tinyint(1),
+  monthly tinyint(1) default '0',
+  dayOfMonth int(2),
+  yearly tinyint(1) default '0',
+  dateOfYear int(4),
+  nbRecurrences int(8),
+  startPeriod int(14),
+  endPeriod int(14),
+  user varchar(200) default '',
+  created int(14) NOT NULL default '0',
+  lastmodif int(14) NOT NULL default '0',
+  PRIMARY KEY (recurrenceId),
+  KEY calendarId (calendarId)
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
+
 DROP TABLE IF EXISTS tiki_calendar_items;
 CREATE TABLE tiki_calendar_items (
   calitemId int(14) NOT NULL auto_increment,
@@ -440,13 +472,18 @@
   lang char(16) NOT NULL default 'en',
   name varchar(255) NOT NULL default '',
   description blob,
+  recurrenceId int(14),
+  changed tinyint(1) DEFAULT '0',
   user varchar(200) default '',
   created int(14) NOT NULL default '0',
   lastmodif int(14) NOT NULL default '0',
   allday tinyint(1) NOT NULL default '0',
   PRIMARY KEY (calitemId),
-  KEY calendarId (calendarId)
-) ENGINE=MyISAM AUTO_INCREMENT=1;
+  KEY calendarId (calendarId),
+  CONSTRAINT fk_calitems_recurrence
+	FOREIGN KEY (recurrenceId) REFERENCES tiki_calendar_recurrence(recurrenceId)
+	ON UPDATE CASCADE ON DELETE SET NULL
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_calendar_locations;
 CREATE TABLE tiki_calendar_locations (

------------------------------------------------------------------------
r15840 | sylvieg | 2008-12-01 09:38:57 -0400 (seg, 01 dez 2008) | 1 line

typo

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15839)
+++ tiki.sql	(revision 15840)
@@ -2316,7 +2316,7 @@
   editableBy text,
   descriptionIsParsed char(1) default 'n',
   PRIMARY KEY (fieldId),
-  INDEX trackerId (trackerId),
+  INDEX trackerId (trackerId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_tracker_item_attachments;

------------------------------------------------------------------------
r15833 | gillesm | 2008-11-30 18:48:47 -0400 (dom, 30 nov 2008) | 1 line

[ENH] object user permissions for menus

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15832)
+++ tiki.sql	(revision 15833)
@@ -2832,8 +2832,8 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_detach_translation', 'Can remove association between two pages in a translation set', 'registered', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_cookies', 'Can admin cookies', 'editors', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_languages', 'Can edit translations and create new languages', 'editors', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_menu', 'Can edit menu', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_menu_option', 'Can edit menu option', 'admin', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_menu', 'Can edit menu', 'admin', 'menus');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_menu_option', 'Can edit menu option', 'admin', 'menus');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_templates', 'Can edit site templates', 'admin', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_search', 'Can search', 'basic', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_site_report', 'Can report a link to the webmaster', 'basic', 'tiki');

------------------------------------------------------------------------
r15756 | kerrnel22 | 2008-11-25 17:10:19 -0400 (ter, 25 nov 2008) | 1 line

[MOD] Changed tracker type field to 15 char length to accommodate more descriptive types and to facilitate moving to more descriptive standard.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15755)
+++ tiki.sql	(revision 15756)
@@ -2300,7 +2300,7 @@
   trackerId int(12) NOT NULL default '0',
   name varchar(255) default NULL,
   options text,
-  type char(1) default NULL,
+  type char(15) default NULL,
   isMain char(1) default NULL,
   isTblVisible char(1) default NULL,
   position int(4) default NULL,

------------------------------------------------------------------------
r15721 | rook1666 | 2008-11-21 15:17:23 -0400 (sex, 21 nov 2008) | 1 line

[FIX] Added field 'allday' tinyint(1) to tiki_calendar_items for allday-support

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15720)
+++ tiki.sql	(revision 15721)
@@ -446,7 +446,7 @@
   allday tinyint(1) NOT NULL default '0',
   PRIMARY KEY (calitemId),
   KEY calendarId (calendarId)
-) ENGINE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1;
 
 DROP TABLE IF EXISTS tiki_calendar_locations;
 CREATE TABLE tiki_calendar_locations (

------------------------------------------------------------------------
r15720 | aproulx | 2008-11-21 14:10:35 -0400 (sex, 21 nov 2008) | 1 line

updating code for categories in imags Galleries

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15719)
+++ tiki.sql	(revision 15720)
@@ -1049,7 +1049,6 @@
   parentgallery int(14) NOT NULL default -1,
   showname char(1) NOT NULL default 'y',
   showimageid char(1) NOT NULL default 'n',
-  showcategories char(1) NOT NULL default 'n',
   showdescription char(1) NOT NULL default 'n',
   showcreated char(1) NOT NULL default 'n',
   showuser char(1) NOT NULL default 'n',
@@ -1058,6 +1057,7 @@
   showfilesize char(1) NOT NULL default 'n',
   showfilename char(1) NOT NULL default 'n',
   defaultscale varchar(10) NOT NULL DEFAULT 'o',
+  showcategories char(1) NOT NULL default 'n', 
   PRIMARY KEY (galleryId),
   KEY name (name),
   KEY description (description(255)),

------------------------------------------------------------------------
r15709 | johannesmoser | 2008-11-20 18:58:29 -0400 (qui, 20 nov 2008) | 12 lines

Added additional functionality to the tikiwiki polls
* better usability
* settings for vote authenticy
* better layout for polls in wiki pages

database
* new table for votes
* new column in tiki_polls 

minor changes
* load data -> update database race condition
* shows titles of polloptions

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15708)
+++ tiki.sql	(revision 15709)
@@ -1768,9 +1768,20 @@
   votes int(8) default NULL,
   active char(1) default NULL,
   publishDate int(14) default NULL,
+  anonym enum( 'a', 'u', 'i', 'c' ) NOT NULL DEFAULT 'u',
   PRIMARY KEY (pollId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
+DROP TABLE IF EXISTS `tiki_poll_votes`;
+CREATE TABLE IF NOT EXISTS `tiki_poll_votes` (
+  `pollId` int(11) NOT NULL,
+  `optionId` int(11) NOT NULL,
+  `voteId` int(11) NOT NULL auto_increment,
+  `identification` varchar(300) NOT NULL,
+  `time` int(11) NOT NULL,
+  PRIMARY KEY  (`voteId`)
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
+
 DROP TABLE IF EXISTS tiki_preferences;
 CREATE TABLE tiki_preferences (
   name varchar(40) NOT NULL default '',

------------------------------------------------------------------------
r15704 | aproulx | 2008-11-20 16:22:08 -0400 (qui, 20 nov 2008) | 1 line

[MOD] add checkbox categories in tiki-gallery form and updating imagegallib

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15703)
+++ tiki.sql	(revision 15704)
@@ -1049,6 +1049,7 @@
   parentgallery int(14) NOT NULL default -1,
   showname char(1) NOT NULL default 'y',
   showimageid char(1) NOT NULL default 'n',
+  showcategories char(1) NOT NULL default 'n',
   showdescription char(1) NOT NULL default 'n',
   showcreated char(1) NOT NULL default 'n',
   showuser char(1) NOT NULL default 'n',

------------------------------------------------------------------------
r15703 | sylvieg | 2008-11-20 13:54:41 -0400 (qui, 20 nov 2008) | 1 line

[MOD]tracker: move export from admin to view tracker page + new perm to export + some fix on perm when exporting field with special perms

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15702)
+++ tiki.sql	(revision 15703)
@@ -2924,6 +2924,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_trackers_closed', 'Can view trackers closed items', 'registered', 'trackers');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_trackers_pending', 'Can view trackers pending items', 'editors', 'trackers');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_watch_trackers', 'Can watch tracker', 'registered', 'trackers');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_export_tracker', 'Can export tracker items', 'registered', 'trackers');
 
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_wiki', 'Can admin the wiki', 'editors', 'wiki', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_wiki_page', 'Can assign perms to wiki pages', 'admin', 'wiki');

------------------------------------------------------------------------
r15641 | gillesm | 2008-11-14 13:12:08 -0400 (sex, 14 nov 2008) | 3 lines

[NEW] You can now specify a maxclicks for each banner and not only a max impression



Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15640)
+++ tiki.sql	(revision 15641)
@@ -319,6 +319,7 @@
   created int(14) default NULL,
   maxImpressions int(8) default NULL,
   impressions int(8) default NULL,
+  maxClicks int(8) default NULL,
   clicks int(8) default NULL,
   zone varchar(40) default NULL,
   PRIMARY KEY (bannerId),
@@ -868,7 +869,6 @@
   show_files char(1) default NULL,
   show_explorer char(1) default NULL,
   show_path char(1) default NULL,
-  groupforAlert varchar(255) default NULL,
   PRIMARY KEY (galleryId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -2385,7 +2385,6 @@
   showAttachments char(1) default NULL,
   items int(10) default NULL,
   showComments char(1) default NULL,
-  groupforAlert varchar(255) default NULL,
   orderAttachments varchar(255) NOT NULL default 'filename,created,filesize,hits,desc',
   PRIMARY KEY (trackerId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;

------------------------------------------------------------------------
r15627 | sylvieg | 2008-11-12 13:01:12 -0400 (qua, 12 nov 2008) | 1 line

[NEW]tracker: permission view_comments

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15626)
+++ tiki.sql	(revision 15627)
@@ -2915,6 +2915,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_trackers', 'Can admin trackers', 'editors', 'trackers', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_attach_trackers', 'Can attach files to tracker items', 'registered', 'trackers');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_comment_tracker_items', 'Can insert comments for tracker items', 'basic', 'trackers');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tracker_view_comments', 'Can view tracker items comments', 'basic', 'trackers');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_create_tracker_items', 'Can create new items for trackers', 'registered', 'trackers');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_trackers', 'Can list trackers', 'basic', 'trackers');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_modify_tracker_items', 'Can change tracker items', 'registered', 'trackers');

------------------------------------------------------------------------
r15565 | sylvieg | 2008-11-07 12:47:25 -0400 (sex, 07 nov 2008) | 1 line

[FIX]menu: show the admin section if perm on edit css/tpl

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15564)
+++ tiki.sql	(revision 15565)
@@ -1487,6 +1487,9 @@
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (127,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_live_support_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (128,42,'r','Admin','tiki-admin.php',1050,'','user_is_operator','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (129,42,'r','Admin','tiki-admin.php',1050,'feature_integrator','tiki_p_admin_integrator','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'feature_edit_templates','tiki_p_edit_templates','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'feature_view_tpl','tiki_p_edit_templates','',0);
+INSERT INTO `tiki_menu_options` (`menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,'r','Admin','tiki-admin.php',1050,'feature_editcss','tiki_p_create_css','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (130,42,'o','Admin home','tiki-admin.php',1051,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (131,42,'o','Live support','tiki-live_support_admin.php',1055,'feature_live_support','tiki_p_live_support_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (132,42,'o','Live support','tiki-live_support_admin.php',1055,'feature_live_support','user_is_operator','',0);

------------------------------------------------------------------------
r15563 | sylvieg | 2008-11-07 12:30:04 -0400 (sex, 07 nov 2008) | 1 line

[MOD]menu: add View Templates and Edit Css in menu 42 as it can be given to people without tiki_p_admin

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15562)
+++ tiki.sql	(revision 15563)
@@ -1507,6 +1507,8 @@
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (148,42,'o','Categories','tiki-admin_categories.php',1145,'feature_categories','tiki_p_admin_categories','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (149,42,'o','Banners','tiki-list_banners.php',1150,'feature_banners','tiki_p_admin_banners','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (150,42,'o','Edit templates','tiki-edit_templates.php',1155,'feature_edit_templates','tiki_p_edit_templates','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (147,42,'o','View Templates','tiki-edit_templates.php',1155,'feature_view_tpl','tiki_p_edit_templates','',2);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (146,42,'o','Edit CSS','tiki-edit_css.php',1158,'feature_editcss','tiki_p_create_css','',2);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (151,42,'o','Drawings','tiki-admin_drawings.php',1160,'feature_drawings','tiki_p_admin_drawings','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (152,42,'o','Dynamic content','tiki-list_contents.php',1165,'feature_dynamic_content','tiki_p_admin_dynamic','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (153,42,'o','Mail-in','tiki-admin_mailin.php',1175,'feature_mailin','tiki_p_admin_mailin','',0);

------------------------------------------------------------------------
r15528 | rook1666 | 2008-11-05 15:50:56 -0400 (qua, 05 nov 2008) | 1 line

Added field 'allday' tinyint(1) to tiki_calendar_items for allday-support

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15527)
+++ tiki.sql	(revision 15528)
@@ -442,6 +442,7 @@
   user varchar(200) default '',
   created int(14) NOT NULL default '0',
   lastmodif int(14) NOT NULL default '0',
+  allday tinyint(1) NOT NULL default '0',
   PRIMARY KEY (calitemId),
   KEY calendarId (calendarId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;

------------------------------------------------------------------------
r15411 | sylvieg | 2008-10-30 10:53:54 -0400 (qui, 30 out 2008) | 1 line

index

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15410)
+++ tiki.sql	(revision 15411)
@@ -2297,7 +2297,8 @@
   visibleBy text,
   editableBy text,
   descriptionIsParsed char(1) default 'n',
-  PRIMARY KEY (fieldId)
+  PRIMARY KEY (fieldId),
+  INDEX trackerId (trackerId),
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_tracker_item_attachments;
@@ -2315,7 +2316,8 @@
   comment varchar(250) default NULL,
   longdesc blob,
   version varchar(40) default NULL,
-  PRIMARY KEY (attId)
+  PRIMARY KEY (attId),
+  INDEX itemId (itemId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_tracker_item_comments;
@@ -2349,7 +2351,8 @@
   created int(14) default NULL,
   status char(1) default NULL,
   lastModif int(14) default NULL,
-  PRIMARY KEY (itemId)
+  PRIMARY KEY (itemId),
+  INDEX trackerId (trackerId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_tracker_options;

------------------------------------------------------------------------
r15390 | lphuberdeau | 2008-10-29 09:43:44 -0400 (qua, 29 out 2008) | 1 line

[FIX]Â Forgot to update tiki.sql last time

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15389)
+++ tiki.sql	(revision 15390)
@@ -1101,6 +1101,7 @@
   comment varchar(200) default NULL,
   data longblob,
   type varchar(50) default NULL,
+  is_html TINYINT(1) NOT NULL DEFAULT 0,
   PRIMARY KEY (pageName,version),
   KEY `user` (`user`),
   KEY(historyId)

------------------------------------------------------------------------
r15350 | nyloth | 2008-10-28 06:09:22 -0400 (ter, 28 out 2008) | 1 line

[FIX] oops - wrong table for new columns in tiki.sql

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15349)
+++ tiki.sql	(revision 15350)
@@ -2191,9 +2191,6 @@
   questionId int(12) NOT NULL default '0',
   qoption text,
   votes int(10) default NULL,
-  mandatory char(1) NOT NULL default 'n',
-  max_answers int(5) NOT NULL default 0,
-  min_answers int(5) NOT NULL default 0,
   PRIMARY KEY (optionId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
@@ -2208,6 +2205,9 @@
   votes int(10) default NULL,
   value int(10) default NULL,
   average decimal(4,2) default NULL,
+  mandatory char(1) NOT NULL default 'n',
+  max_answers int(5) NOT NULL default 0,
+  min_answers int(5) NOT NULL default 0,
   PRIMARY KEY (questionId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r15347 | gillesm | 2008-10-28 05:28:43 -0400 (ter, 28 out 2008) | 3 lines

[FIX] Use of a table for groupforalert, implementation in trackers



Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15346)
+++ tiki.sql	(revision 15347)
@@ -3648,3 +3648,12 @@
 	PRIMARY KEY( service, template )
 ) ENGINE=MyISAM ;
 
+DROP TABLE IF EXISTS tiki_groupalert;
+
+CREATE TABLE tiki_groupalert (
+	groupName varchar(255) NOT NULL default '',
+	objectType varchar( 20 ) NOT NULL default '',
+	objectId  varchar(10) NOT NULL default '',
+	displayEachuser  char( 1 ) default NULL ,
+	PRIMARY KEY ( objectType,objectId )
+) ENGINE=MyISAM ;

------------------------------------------------------------------------
r15342 | nyloth | 2008-10-27 19:48:40 -0400 (seg, 27 out 2008) | 13 lines

[ENH] surveys: 
  * new question type 'Multiple choices of thumbnails from a file gallery' ('g') to be able to make a multiple choice question using thumbnails from a file gallery (e.g. for voting the best 3 images of a gallery, ...),
  * new checkbox to specify if a question is mandatory,
  * new params to specify, for multiple choices questions, the minimum and maximum number of required answers (+ error message when needed),
  * fix bad vote check and reset votes values after question edit for options of type 'text',
  * deploy auto_query_args + smarty self_link / button / icon,
  * remove useless comments in some places,
  * remove some redondancy in some templates titles/subtitles,
  * avoid useless tests on $questions[ix].type value in 'tiki-take_survey.tpl',
  * new 'Create New Survey' button in 'tiki-list_surveys.tpl' navbar,
  * use famfamfam icons instead of old ones in 'tiki-list_surveys.tpl',
  * translate of 'Vote' string in 'tiki-survey_stats_survey.tpl'


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15341)
+++ tiki.sql	(revision 15342)
@@ -2191,6 +2191,9 @@
   questionId int(12) NOT NULL default '0',
   qoption text,
   votes int(10) default NULL,
+  mandatory char(1) NOT NULL default 'n',
+  max_answers int(5) NOT NULL default 0,
+  min_answers int(5) NOT NULL default 0,
   PRIMARY KEY (optionId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r15312 | gillesm | 2008-10-27 08:22:19 -0400 (seg, 27 out 2008) | 2 lines

[NEW] file gallery has a preferred group to allow to alert by Mail users of this group. The feature is not added yet but ready to be set.


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15311)
+++ tiki.sql	(revision 15312)
@@ -867,6 +867,7 @@
   show_files char(1) default NULL,
   show_explorer char(1) default NULL,
   show_path char(1) default NULL,
+  groupforAlert varchar(255) default NULL,
   PRIMARY KEY (galleryId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r15298 | gillesm | 2008-10-26 12:32:21 -0400 (dom, 26 out 2008) | 3 lines

Preparation for the new feature : groupforAlert, which is group assigned by traocker to allow user who modify a tracker record, to choose people of group to alert by email about change/add.



Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15297)
+++ tiki.sql	(revision 15298)
@@ -2371,6 +2371,7 @@
   showAttachments char(1) default NULL,
   items int(10) default NULL,
   showComments char(1) default NULL,
+  groupforAlert varchar(255) default NULL,
   orderAttachments varchar(255) NOT NULL default 'filename,created,filesize,hits,desc',
   PRIMARY KEY (trackerId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -2453,7 +2454,7 @@
   useAuth char(1) default NULL,
   smtpPort int(4) default NULL,
   flagsPublic char(1) default 'n',				-- COMMENT 'MatWho - Shared Group Mail box if y',
-  autoRefresh int(4) NOT NULL default 0,		-- COMMENT 'seconds for mail list to refresh, 0 = none', 
+  autoRefresh int(4) NOT NULL default 0,		-- COMMENT 'seconds for mail list to refresh, 0 = none',
   PRIMARY KEY (accountId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r15284 | sylvieg | 2008-10-24 11:23:09 -0400 (sex, 24 out 2008) | 1 line

[FIX]fgal: add also the filename in the fulltext index

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15283)
+++ tiki.sql	(revision 15284)
@@ -903,7 +903,7 @@
   KEY archiveId (archiveId),
   KEY galleryId (galleryId),
   KEY hits (hits),
-  FULLTEXT KEY ft (name,description,search_data)
+  FULLTEXT KEY ft (name,description,search_data,filename)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_forum_attachments;

------------------------------------------------------------------------
r15256 | pkdille | 2008-10-22 03:30:39 -0400 (qua, 22 out 2008) | 1 line

[FIX] application menu: structure option (in wiki section) has to be showed only if feature_wiki AND feature_wiki_structure are both active

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15255)
+++ tiki.sql	(revision 15256)
@@ -1403,7 +1403,7 @@
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (44,42,'o','Multiple Print','tiki-print_pages.php',235,'feature_wiki,feature_wiki_multiprint','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (45,42,'o','Send pages','tiki-send_objects.php',240,'feature_wiki,feature_comm','tiki_p_view,tiki_p_send_pages','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (46,42,'o','Received pages','tiki-received_pages.php',245,'feature_wiki,feature_comm','tiki_p_view,tiki_p_admin_received_pages','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (47,42,'o','Structures','tiki-admin_structures.php',250,'feature_wiki_structure','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (47,42,'o','Structures','tiki-admin_structures.php',250,'feature_wiki,feature_wiki_structure','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (197,42,'o','Mind Map','tiki-mindmap.php',255,'feature_wiki_mindmap','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (48,42,'s','Image Galleries','tiki-galleries.php',300,'feature_galleries','tiki_p_view_image_gallery','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (49,42,'o','Galleries','tiki-galleries.php',305,'feature_galleries','tiki_p_list_image_galleries','',0);

------------------------------------------------------------------------
r15222 | sylvieg | 2008-10-19 10:28:32 -0400 (dom, 19 out 2008) | 1 line

[FIX]score: event_id was too short

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15221)
+++ tiki.sql	(revision 15222)
@@ -3387,11 +3387,11 @@
 DROP TABLE IF EXISTS tiki_users_score;
 CREATE TABLE tiki_users_score (
   user char(200) NOT NULL default '',
-  event_id char(40) NOT NULL default '',
+  event_id char(200) NOT NULL default '',
   expire int(14) NOT NULL default '0',
   tstamp timestamp(14) NOT NULL,
-  PRIMARY KEY (user,event_id),
-  KEY user (user,event_id,expire)
+  PRIMARY KEY (user(110),event_id(110)),
+  KEY user (user(110),event_id(110),expire)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_file_handlers;

------------------------------------------------------------------------
r15215 | marclaporte | 2008-10-18 10:34:47 -0400 (sÃ¡b, 18 out 2008) | 1 line

[MOD] Some corrections and some new feature checks on permissions : http://dev.tikiwiki.org/wish2081 

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15214)
+++ tiki.sql	(revision 15215)
@@ -3011,16 +3011,14 @@
 	'tiki_p_admin_wiki',
 	'tiki_p_assign_perm_wiki_page',
 	'tiki_p_edit',
-	'tiki_p_export_wiki',
 	'tiki_p_lock',
 	'tiki_p_minor',
 	'tiki_p_remove',
 	'tiki_p_rename',
 	'tiki_p_rollback',
-	'tiki_p_view',
-	'tiki_p_view_history',
-	'tiki_p_view_source'
+	'tiki_p_view'
 );
+
 UPDATE users_permissions SET feature_check = 'wiki_feature_copyrights' WHERE permName = 'tiki_p_edit_copyrights';
 UPDATE users_permissions SET feature_check = 'feature_wiki_structure' WHERE permName = 'tiki_p_edit_structures';
 UPDATE users_permissions SET feature_check = 'feature_wiki_structure' WHERE permName = 'tiki_p_watch_structure';
@@ -3034,6 +3032,17 @@
 UPDATE users_permissions SET feature_check = 'feature_wiki_ratings' WHERE permName = 'tiki_p_wiki_vote_ratings';
 UPDATE users_permissions SET feature_check = 'feature_wiki_comments' WHERE permName = 'tiki_p_wiki_view_comments';
 
+#Added 20081018
+UPDATE users_permissions SET feature_check = 'feature_wiki_export' WHERE permName = 'tiki_p_export_wiki';
+UPDATE users_permissions SET feature_check = 'feature_history' WHERE permName = 'tiki_p_wiki_view_history';
+UPDATE users_permissions SET feature_check = 'feature_wiki_attachments' WHERE permName = 'tiki_p_wiki_attach_files';
+UPDATE users_permissions SET feature_check = 'feature_wiki_attachments' WHERE permName = 'tiki_p_wiki_admin_attachments';
+UPDATE users_permissions SET feature_check = 'feature_wiki_ratings' WHERE permName = 'tiki_p_wiki_admin_ratings';
+UPDATE users_permissions SET feature_check = 'feature_source' WHERE permName = 'tiki_p_wiki_view_source';
+
+
+
+
 DROP TABLE IF EXISTS users_usergroups;
 CREATE TABLE users_usergroups (
   userId int(8) NOT NULL default '0',

------------------------------------------------------------------------
r15207 | marclaporte | 2008-10-18 04:18:52 -0400 (sÃ¡b, 18 out 2008) | 1 line

[FIX] Adding missing drop tables for a clean install

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15206)
+++ tiki.sql	(revision 15207)
@@ -3599,11 +3599,13 @@
   PRIMARY KEY (`feature_id`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
+DROP TABLE IF EXISTS tiki_schema;
 CREATE TABLE tiki_schema (
 	patch_name VARCHAR(100) PRIMARY KEY,
 	install_date TIMESTAMP
 ) ENGINE=MyISAM;
 
+DROP TABLE IF EXISTS tiki_semantic_tokens;
 CREATE TABLE tiki_semantic_tokens (
 	token VARCHAR(15) PRIMARY KEY,
 	label VARCHAR(25) NOT NULL,
@@ -3612,6 +3614,8 @@
 
 INSERT INTO tiki_semantic_tokens (token, label) VALUES('alias', 'Page Alias');
 
+
+DROP TABLE IF EXISTS tiki_webservice;
 CREATE TABLE tiki_webservice (
 	service VARCHAR(25) NOT NULL PRIMARY KEY,
 	url VARCHAR(250),
@@ -3619,6 +3623,7 @@
 	schema_documentation VARCHAR(250)
 ) ENGINE=MyISAM ;
 
+DROP TABLE IF EXISTS tiki_webservice_template;
 CREATE TABLE tiki_webservice_template (
 	service VARCHAR(25) NOT NULL,
 	template VARCHAR(25) NOT NULL,

------------------------------------------------------------------------
r15132 | nyloth | 2008-10-13 18:57:46 -0400 (seg, 13 out 2008) | 1 line

[NEW] security: new 'tiki_p_trust_input' perm to bypass the security checks (varcheck and sanitizer) in order to avoid annoyances for trusted users and improve performances too. + move mb_internal_encoding definition to lib/setup/compat.php and disable it since it should not be useful anymore (keep it just in case, for the moment).

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15131)
+++ tiki.sql	(revision 15132)
@@ -3005,6 +3005,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_plugin_viewdetail', 'Can view unapproved plugin details', 'registered', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_plugin_preview', 'Can execute unapproved plugin', 'registered', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_plugin_approve', 'Can approve plugin execution', 'editors', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_trust_input', 'Trust all user inputs (no security checks)', 'admin', 'tiki');
 
 UPDATE users_permissions SET feature_check = 'feature_wiki' WHERE permName IN(
 	'tiki_p_admin_wiki',

------------------------------------------------------------------------
r15091 | lphuberdeau | 2008-10-10 16:12:49 -0400 (sex, 10 out 2008) | 1 line

[NEW]Â Filter permissions for which underlying feature is not enabled

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15090)
+++ tiki.sql	(revision 15091)
@@ -2734,6 +2734,7 @@
   level varchar(80) default NULL,
   type varchar(20) default NULL,
   admin varchar(1) default NULL,
+  feature_check VARCHAR(50) NULL,
   PRIMARY KEY (permName),
   KEY type (type)
 ) ENGINE=MyISAM;
@@ -3005,6 +3006,33 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_plugin_preview', 'Can execute unapproved plugin', 'registered', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_plugin_approve', 'Can approve plugin execution', 'editors', 'wiki');
 
+UPDATE users_permissions SET feature_check = 'feature_wiki' WHERE permName IN(
+	'tiki_p_admin_wiki',
+	'tiki_p_assign_perm_wiki_page',
+	'tiki_p_edit',
+	'tiki_p_export_wiki',
+	'tiki_p_lock',
+	'tiki_p_minor',
+	'tiki_p_remove',
+	'tiki_p_rename',
+	'tiki_p_rollback',
+	'tiki_p_view',
+	'tiki_p_view_history',
+	'tiki_p_view_source'
+);
+UPDATE users_permissions SET feature_check = 'wiki_feature_copyrights' WHERE permName = 'tiki_p_edit_copyrights';
+UPDATE users_permissions SET feature_check = 'feature_wiki_structure' WHERE permName = 'tiki_p_edit_structures';
+UPDATE users_permissions SET feature_check = 'feature_wiki_structure' WHERE permName = 'tiki_p_watch_structure';
+UPDATE users_permissions SET feature_check = 'feature_wiki_pictures' WHERE permName = 'tiki_p_upload_picture';
+UPDATE users_permissions SET feature_check = 'feature_wiki_templates' WHERE permName = 'tiki_p_use_as_template';
+UPDATE users_permissions SET feature_check = 'feature_wiki_attachments' WHERE permName = 'tiki_p_admin_attachments';
+UPDATE users_permissions SET feature_check = 'feature_wiki_attachments' WHERE permName = 'tiki_p_attach_files';
+UPDATE users_permissions SET feature_check = 'feature_wiki_attachments' WHERE permName = 'tiki_p_wiki_view_attachments';
+UPDATE users_permissions SET feature_check = 'feature_wiki_ratings' WHERE permName = 'tiki_p_admin_ratings';
+UPDATE users_permissions SET feature_check = 'feature_wiki_ratings' WHERE permName = 'tiki_p_wiki_view_ratings';
+UPDATE users_permissions SET feature_check = 'feature_wiki_ratings' WHERE permName = 'tiki_p_wiki_vote_ratings';
+UPDATE users_permissions SET feature_check = 'feature_wiki_comments' WHERE permName = 'tiki_p_wiki_view_comments';
+
 DROP TABLE IF EXISTS users_usergroups;
 CREATE TABLE users_usergroups (
   userId int(8) NOT NULL default '0',

------------------------------------------------------------------------
r15044 | lphuberdeau | 2008-10-08 11:40:26 -0400 (qua, 08 out 2008) | 1 line

[FIX] Making field nullable for compatibility between PDO and AdoDB

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15043)
+++ tiki.sql	(revision 15044)
@@ -3509,7 +3509,7 @@
   `version` int(8) NOT NULL,
   `source_translation_bit` int(10) NULL,
   `original_translation_bit` int(10) NULL,
-  `flags` SET('critical') NOT NULL DEFAULT '',
+  `flags` SET('critical') NULL DEFAULT '',
   PRIMARY KEY (`translation_bit_id`),
   KEY(`page_id`),
   KEY(`original_translation_bit`),

------------------------------------------------------------------------
r15009 | lphuberdeau | 2008-10-06 12:21:23 -0400 (seg, 06 out 2008) | 1 line

[FIX]Â Fresh install broken on some new features

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 15008)
+++ tiki.sql	(revision 15009)
@@ -1200,6 +1200,7 @@
 CREATE TABLE tiki_links (
   fromPage varchar(160) NOT NULL default '',
   toPage varchar(160) NOT NULL default '',
+  reltype varchar(50),
   PRIMARY KEY (fromPage,toPage),
   KEY toPage (toPage)
 ) ENGINE=MyISAM;
@@ -3574,3 +3575,28 @@
 	install_date TIMESTAMP
 ) ENGINE=MyISAM;
 
+CREATE TABLE tiki_semantic_tokens (
+	token VARCHAR(15) PRIMARY KEY,
+	label VARCHAR(25) NOT NULL,
+	invert_token VARCHAR(15)
+) ENGINE=MyISAM ;
+
+INSERT INTO tiki_semantic_tokens (token, label) VALUES('alias', 'Page Alias');
+
+CREATE TABLE tiki_webservice (
+	service VARCHAR(25) NOT NULL PRIMARY KEY,
+	url VARCHAR(250),
+	schema_version VARCHAR(5),
+	schema_documentation VARCHAR(250)
+) ENGINE=MyISAM ;
+
+CREATE TABLE tiki_webservice_template (
+	service VARCHAR(25) NOT NULL,
+	template VARCHAR(25) NOT NULL,
+	engine VARCHAR(15) NOT NULL,
+	output VARCHAR(15) NOT NULL,
+	content TEXT NOT NULL,
+	last_modif INT,
+	PRIMARY KEY( service, template )
+) ENGINE=MyISAM ;
+

------------------------------------------------------------------------
r14991 | nyloth | 2008-10-05 19:50:40 -0400 (dom, 05 out 2008) | 33 lines

[NEW] comments: new 'feature_comments_moderation' to allow users with 'tiki_p_admin_comments' perm to approve (or reject) comments.

If this feature is enabled, comments are queued for the moderator and are not published until it's approbation. The moderator can approve or reject comments either directly on the comments of the object (wiki page, blog post, ...), either on the 'Admin Comments' page.

Users without 'tiki_p_admin_comments' perm won't see rejected and queued comments. They will also have the following comment: 'Your comment will have to be approved by the moderator before it's publication.'

Rewrite tiki-list_comments.php to:
	* handle table column headers (e.g. if there is only one type, 'ObjectType' is not shown anymore and 'Object' is renamed to the real type name),
	* use the global $sections* arrays,
	* add a new 'types_section' param to limit the interface to only one section (i.e. blogs, faqs, ...)

Also partially rewrite tiki-list_comments.tpl to:
	* use find.tpl,
	* better use smarty self_link,
	* add a new 'Approval' column, to approve/reject comments or see their final status (approved / rejected),
	* add a new 'Actions' column, to display/edit/delete each comments,
	* rename 'Data' column into 'Comment'

Note that it's not possible to reply to (or vote for) a comment that has not been approved, even by the moderator.

+ Add a new param 'types_tag' to find.tpl, to allow a multiple selection of types, using checkboxes (types_tag='checkbox')

+ Some CSS addons to:
	* display a "double red" left border for rejected comments,
	* display a "dotted blue" left border for queued comments (those waiting for moderation),
	* add some opacity for both rejected and queued comments,
	* fix some themes to avoid scrollbars inside comments headers/titles

+ Delete unused smarty_tiki 'ucfirst' modifier and list it in the list of php allowed functions for smarty security

+ Propagate smarty 'query', 'remarksbox', ...



Index: tiki.sql
===================================================================
--- tiki.sql	(revision 14990)
+++ tiki.sql	(revision 14991)
@@ -656,6 +656,7 @@
   in_reply_to varchar(128) default NULL,
   comment_rating tinyint(2) default NULL,
   archived char(1) default NULL,
+  approved char(1) NOT NULL default 'y',
   PRIMARY KEY (threadId),
   UNIQUE KEY no_repeats (parentId, userName(40), title(100), commentDate, message_id(40), in_reply_to(40)),
   KEY title (title),

------------------------------------------------------------------------
r14986 | lphuberdeau | 2008-10-04 14:20:27 -0400 (sÃ¡b, 04 out 2008) | 1 line

[NEW] Add wiki mind map feature

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 14985)
+++ tiki.sql	(revision 14986)
@@ -1402,6 +1402,7 @@
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (45,42,'o','Send pages','tiki-send_objects.php',240,'feature_wiki,feature_comm','tiki_p_view,tiki_p_send_pages','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (46,42,'o','Received pages','tiki-received_pages.php',245,'feature_wiki,feature_comm','tiki_p_view,tiki_p_admin_received_pages','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (47,42,'o','Structures','tiki-admin_structures.php',250,'feature_wiki_structure','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (197,42,'o','Mind Map','tiki-mindmap.php',255,'feature_wiki_mindmap','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (48,42,'s','Image Galleries','tiki-galleries.php',300,'feature_galleries','tiki_p_view_image_gallery','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (49,42,'o','Galleries','tiki-galleries.php',305,'feature_galleries','tiki_p_list_image_galleries','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (50,42,'o','Rankings','tiki-galleries_rankings.php',310,'feature_galleries,feature_gal_rankings','tiki_p_list_image_galleries','',0);

------------------------------------------------------------------------
r14900 | matwho | 2008-09-29 19:28:54 -0400 (seg, 29 set 2008) | 1 line

[MOD] and [FIX] Added some new permissions for webmail to control who can use ond/or create mail accounts. Fixed lost of other errors in webmail. Improved error reports when connecting to POP server.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 14899)
+++ tiki.sql	(revision 14900)
@@ -2992,6 +2992,12 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_map_view_mapfiles', 'Can view contents of mapfiles', 'registered', 'maps');
 
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_webmail', 'Can use webmail', 'registered', 'webmail');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_group_webmail', 'Can use group webmail', 'registered', 'webmail');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_group_webmail', 'Can administrate group webmail accounts', 'registered', 'webmail');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_personal_webmail', 'Can use personal webmail accounts', 'registered', 'webmail');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_personal_webmail', 'Can administrate personal webmail accounts', 'registered', 'webmail');
+
+
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_plugin_viewdetail', 'Can view unapproved plugin details', 'registered', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_plugin_preview', 'Can execute unapproved plugin', 'registered', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_plugin_approve', 'Can approve plugin execution', 'editors', 'wiki');

------------------------------------------------------------------------
r14876 | sylvieg | 2008-09-26 12:02:28 -0400 (sex, 26 set 2008) | 1 line

index on tiki_banners

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 14875)
+++ tiki.sql	(revision 14876)
@@ -321,7 +321,8 @@
   impressions int(8) default NULL,
   clicks int(8) default NULL,
   zone varchar(40) default NULL,
-  PRIMARY KEY (bannerId)
+  PRIMARY KEY (bannerId),
+  INDEX ban1(zone,useDates,impressions,maxImpressions,hourFrom,hourTo,fromDate,toDate,mon,tue,wed,thu,fri,sat,sun)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 DROP TABLE IF EXISTS tiki_banning;

------------------------------------------------------------------------
r14842 | lphuberdeau | 2008-09-24 10:20:42 -0400 (qua, 24 set 2008) | 1 line

[FIX]Â Field was too short

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 14841)
+++ tiki.sql	(revision 14842)
@@ -3561,7 +3561,7 @@
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
 CREATE TABLE tiki_schema (
-	patch_name VARCHAR(30) PRIMARY KEY,
+	patch_name VARCHAR(100) PRIMARY KEY,
 	install_date TIMESTAMP
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r14837 | lphuberdeau | 2008-09-24 09:55:50 -0400 (qua, 24 set 2008) | 1 line

[MOD] Database upgrade script revamp (from branches/experimental/upgrade)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 14836)
+++ tiki.sql	(revision 14837)
@@ -3558,4 +3558,10 @@
   `feature_count` mediumint(9) NOT NULL default '0',
   `feature_path` varchar(20) NOT NULL default '0',
   PRIMARY KEY (`feature_id`)
-) ENGINE=MyISAM AUTO_INCREMENT=1;
\ No newline at end of file
+) ENGINE=MyISAM AUTO_INCREMENT=1;
+
+CREATE TABLE tiki_schema (
+	patch_name VARCHAR(30) PRIMARY KEY,
+	install_date TIMESTAMP
+) ENGINE=MyISAM;
+

------------------------------------------------------------------------
r14814 | matwho | 2008-09-22 23:07:07 -0400 (seg, 22 set 2008) | 1 line

[MOD] and [FIX] Added click on flag to toggle, Flag/Un-flag icons on mail mesages in group mail accounts, added a flag message field to make it easy to see who and when a flag was set, added an admin option to turn flags on/off.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 14813)
+++ tiki.sql	(revision 14814)
@@ -2645,6 +2645,7 @@
   isRead char(1) default NULL,
   isReplied char(1) default NULL,
   isFlagged char(1) default NULL,
+  flaggedMsg varchar(50) default '',
   PRIMARY KEY (accountId,mailId)
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r14802 | sylvieg | 2008-09-22 13:35:41 -0400 (seg, 22 set 2008) | 1 line

[MOD]calendar: status can be optional + status can be displayed or not in calendar view mode + sttaus can be displayed or not in popup + fix default status

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 14801)
+++ tiki.sql	(revision 14802)
@@ -475,6 +475,7 @@
   custompriorities enum('n','y') NOT NULL default 'n',
   customparticipants enum('n','y') NOT NULL default 'n',
   customsubscription enum('n','y') NOT NULL default 'n',
+  customstatus enum('n','y') NOT NULL default 'y',
   created int(14) NOT NULL default '0',
   lastmodif int(14) NOT NULL default '0',
   personal enum ('n', 'y') NOT NULL default 'n',

------------------------------------------------------------------------
r14761 | matwho | 2008-09-19 06:31:14 -0400 (sex, 19 set 2008) | 1 line

[ENH] Added 2 fields to allow for group/shared email inboxes in webmail

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 14760)
+++ tiki.sql	(revision 14761)
@@ -2447,6 +2447,8 @@
   smtp varchar(255) default NULL,
   useAuth char(1) default NULL,
   smtpPort int(4) default NULL,
+  flagsPublic char(1) default 'n',				-- COMMENT 'MatWho - Shared Group Mail box if y',
+  autoRefresh int(4) NOT NULL default 0,		-- COMMENT 'seconds for mail list to refresh, 0 = none', 
   PRIMARY KEY (accountId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r14692 | ricks99 | 2008-09-12 12:06:37 -0400 (sex, 12 set 2008) | 1 line

[FIX]Better ordering labeling of quicktags  [Bug 1621]

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 14691)
+++ tiki.sql	(revision 14692)
@@ -3092,12 +3092,12 @@
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 # wiki
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('text, bold','__text__','pics/icons/text_bold.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('text, italic','\'\'text\'\'','pics/icons/text_italic.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('text, underline','===text===','pics/icons/text_underline.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/world_link.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','pics/icons/page_link.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('link, external','[http://example.com|text]','pics/icons/world_link.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('link, wiki','((text))','pics/icons/page_link.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading1','!text','pics/icons/text_heading_1.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading2','!!text','pics/icons/text_heading_2.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','wiki');

------------------------------------------------------------------------
r14623 | bitey | 2008-09-05 17:43:22 -0400 (sex, 05 set 2008) | 1 line

[ENH] Magic is now even magicer.  Items in the feature table can now have an associated tip.  I may have untabbed the interface (sorry lph).  Headings are now more distinct.  The header bar now includes a link to configure features if you are using a feature.  Changes to configuration now appear in the syslog.  Dropdowns with multi-select are also supported.  Everybody Dance!

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 14622)
+++ tiki.sql	(revision 14623)
@@ -3537,7 +3537,7 @@
 	INDEX(`named`)
 );
 
-DROP TABLE IF EXISTS `tiki_feature`;
+DROP TABLE IF EXISTS tiki_feature;
 CREATE TABLE `tiki_feature` (
   `feature_id` mediumint(9) NOT NULL auto_increment,
   `feature_name` varchar(150) NOT NULL,
@@ -3544,13 +3544,14 @@
   `parent_id` mediumint(9) NOT NULL,
   `status` varchar(12) NOT NULL default 'active',
   `setting_name` varchar(50) default NULL,
-  `feature_type` varchar(20) NOT NULL default 'feature',
+  `feature_type` varchar(30) NOT NULL default 'feature',
   `template` varchar(50) default NULL,
   `permission` varchar(50) default NULL,
   `ordinal` mediumint(9) NOT NULL default '1',
   `depends_on` mediumint(9) default NULL,
   `keyword` varchar(30) default NULL,
+  `tip` text NULL,
   `feature_count` mediumint(9) NOT NULL default '0',
   `feature_path` varchar(20) NOT NULL default '0',
   PRIMARY KEY (`feature_id`)
-) ENGINE=MyISAM AUTO_INCREMENT=1;
+) ENGINE=MyISAM AUTO_INCREMENT=1;
\ No newline at end of file

------------------------------------------------------------------------
r14620 | lphuberdeau | 2008-09-05 16:03:06 -0400 (sex, 05 set 2008) | 1 line

[FIX] Fields lengths to install on windows mysql (strict settings by default)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 14619)
+++ tiki.sql	(revision 14620)
@@ -3549,7 +3549,7 @@
   `permission` varchar(50) default NULL,
   `ordinal` mediumint(9) NOT NULL default '1',
   `depends_on` mediumint(9) default NULL,
-  `keyword` varchar(20) default NULL,
+  `keyword` varchar(30) default NULL,
   `feature_count` mediumint(9) NOT NULL default '0',
   `feature_path` varchar(20) NOT NULL default '0',
   PRIMARY KEY (`feature_id`)

------------------------------------------------------------------------
r14585 | sylvieg | 2008-09-02 15:42:36 -0400 (ter, 02 set 2008) | 1 line

[MOD]tracker: option to parse a description (a little redondant with static text but sometimes the parsed info really needs to be attached

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 14584)
+++ tiki.sql	(revision 14585)
@@ -2286,6 +2286,7 @@
   errorMsg text,
   visibleBy text,
   editableBy text,
+  descriptionIsParsed char(1) default 'n',
   PRIMARY KEY (fieldId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 

------------------------------------------------------------------------
r14568 | lphuberdeau | 2008-09-01 10:52:24 -0400 (seg, 01 set 2008) | 1 line

[MOD] Changing required permissions for plugin viewdetails and preview to registered

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 14567)
+++ tiki.sql	(revision 14568)
@@ -2986,8 +2986,8 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_map_view_mapfiles', 'Can view contents of mapfiles', 'registered', 'maps');
 
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_webmail', 'Can use webmail', 'registered', 'webmail');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_plugin_viewdetail', 'Can view unapproved plugin details', 'editors', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_plugin_preview', 'Can execute unapproved plugin', 'editors', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_plugin_viewdetail', 'Can view unapproved plugin details', 'registered', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_plugin_preview', 'Can execute unapproved plugin', 'registered', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_plugin_approve', 'Can approve plugin execution', 'editors', 'wiki');
 
 DROP TABLE IF EXISTS users_usergroups;

------------------------------------------------------------------------
r14553 | lphuberdeau | 2008-08-29 16:46:27 -0400 (sex, 29 ago 2008) | 1 line

[NEW] Begun work on secure plugins (nothing affected yet)

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 14552)
+++ tiki.sql	(revision 14553)
@@ -2986,6 +2986,9 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_map_view_mapfiles', 'Can view contents of mapfiles', 'registered', 'maps');
 
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_webmail', 'Can use webmail', 'registered', 'webmail');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_plugin_viewdetail', 'Can view unapproved plugin details', 'editors', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_plugin_preview', 'Can execute unapproved plugin', 'editors', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_plugin_approve', 'Can approve plugin execution', 'editors', 'wiki');
 
 DROP TABLE IF EXISTS users_usergroups;
 CREATE TABLE users_usergroups (

------------------------------------------------------------------------
r14441 | pkdille | 2008-08-20 17:20:08 -0400 (qua, 20 ago 2008) | 1 line

[MOD] tiki.sql: no changes. Deleting useless comments

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 14440)
+++ tiki.sql	(revision 14441)
@@ -1,25 +1,7 @@
-# $Rev$
-# $Date: 2008-03-16 00:06:59 $
-# $Author: nyloth $
-# $Name: not supported by cvs2svn $
-# phpMyAdmin MySQL-Dump
-# version 2.5.1
-# http://www.phpmyadmin.net/ (download page)
-#
-# Host: localhost
-# Generation Time: Jul 13, 2003 at 02:09 AM
-# Server version: 4.0.13
-# PHP Version: 4.2.3
+# --------------------------------------------------------
 # Database : tikiwiki
 # --------------------------------------------------------
 
-#
-# Table structure for table galaxia_activities
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS galaxia_activities;
 CREATE TABLE galaxia_activities (
   activityId int(14) NOT NULL auto_increment,
@@ -35,15 +17,7 @@
   expirationTime int(6) unsigned NOT NULL default '0',
   PRIMARY KEY (activityId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table galaxia_activity_roles
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS galaxia_activity_roles;
 CREATE TABLE galaxia_activity_roles (
   activityId int(14) NOT NULL default '0',
@@ -50,15 +24,7 @@
   roleId int(14) NOT NULL default '0',
   PRIMARY KEY (activityId,roleId)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table galaxia_instance_activities
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS galaxia_instance_activities;
 CREATE TABLE galaxia_instance_activities (
   instanceId int(14) NOT NULL default '0',
@@ -69,15 +35,7 @@
   status enum('running','completed') default NULL,
   PRIMARY KEY (instanceId,activityId)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table galaxia_instance_comments
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS galaxia_instance_comments;
 CREATE TABLE galaxia_instance_comments (
   cId int(14) NOT NULL auto_increment,
@@ -91,15 +49,7 @@
   timestamp int(14) default NULL,
   PRIMARY KEY (cId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table galaxia_instances
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS galaxia_instances;
 CREATE TABLE galaxia_instances (
   instanceId int(14) NOT NULL auto_increment,
@@ -114,15 +64,7 @@
   properties longblob,
   PRIMARY KEY (instanceId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table galaxia_processes
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS galaxia_processes;
 CREATE TABLE galaxia_processes (
   pId int(14) NOT NULL auto_increment,
@@ -135,15 +77,7 @@
   normalized_name varchar(80) default NULL,
   PRIMARY KEY (pId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table galaxia_roles
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS galaxia_roles;
 CREATE TABLE galaxia_roles (
   roleId int(14) NOT NULL auto_increment,
@@ -153,15 +87,7 @@
   description text,
   PRIMARY KEY (roleId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table galaxia_transitions
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS galaxia_transitions;
 CREATE TABLE galaxia_transitions (
   pId int(14) NOT NULL default '0',
@@ -169,15 +95,7 @@
   actToId int(14) NOT NULL default '0',
   PRIMARY KEY (actFromId,actToId)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table galaxia_user_roles
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS galaxia_user_roles;
 CREATE TABLE galaxia_user_roles (
   pId int(14) NOT NULL default '0',
@@ -185,15 +103,7 @@
   user varchar(200) NOT NULL default '',
   PRIMARY KEY (roleId,user)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table galaxia_workitems
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS galaxia_workitems;
 CREATE TABLE galaxia_workitems (
   itemId int(14) NOT NULL auto_increment,
@@ -206,15 +116,7 @@
   user varchar(200) default '',
   PRIMARY KEY (itemId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table messu_messages
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 08:29 PM
-#
-
 DROP TABLE IF EXISTS messu_messages;
 CREATE TABLE messu_messages (
   msgId int(14) NOT NULL auto_increment,
@@ -235,16 +137,7 @@
   PRIMARY KEY (msgId),
   KEY userIsRead (user, isRead)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table messu_archive (same structure as messu_messages)
-# desc: user may archive his messages to this table to speed up default msg handling
-#
-# Creation: Feb 26, 2005 at 03:00 PM
-# Last update: Feb 26, 2005 at 03:00 PM
-#
-
 DROP TABLE IF EXISTS messu_archive;
 CREATE TABLE messu_archive (
   msgId int(14) NOT NULL auto_increment,
@@ -264,16 +157,7 @@
   priority int(2) default NULL,
   PRIMARY KEY (msgId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table messu_sent (same structure as messu_messages)
-# desc: user may archive his messages to this table to speed up default msg handling
-#
-# Creation: Feb 26, 2005 at 11:00 PM
-# Last update: Feb 26, 2005 at 11:00 PM
-#
-
 DROP TABLE IF EXISTS messu_sent;
 CREATE TABLE messu_sent (
   msgId int(14) NOT NULL auto_increment,
@@ -293,7 +177,6 @@
   priority int(2) default NULL,
   PRIMARY KEY (msgId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
 DROP TABLE IF EXISTS sessions;
 CREATE TABLE sessions(
@@ -305,13 +188,6 @@
   KEY expiry (expiry)
 ) ENGINE=MyISAM;
 
-#
-# Table structure for table tiki_actionlog
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 13, 2003 at 12:29 AM
-#
-
 DROP TABLE IF EXISTS tiki_actionlog;
 CREATE TABLE tiki_actionlog (
   actionId int(8) NOT NULL auto_increment,
@@ -334,16 +210,7 @@
   KEY (actionId),
   KEY nameValue (name, value(200))
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_articles
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Nov 27, 2006 at 21:53 PM
-# Last check: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_articles;
 CREATE TABLE tiki_articles (
   articleId int(8) NOT NULL auto_increment,
@@ -390,7 +257,6 @@
   KEY type (type),
   FULLTEXT KEY ft (title,heading,body)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
 DROP TABLE IF EXISTS tiki_article_types;
 CREATE TABLE tiki_article_types (
@@ -424,13 +290,6 @@
 INSERT IGNORE INTO tiki_article_types(type,show_post_expire) VALUES ('Event','n');
 INSERT IGNORE INTO tiki_article_types(type,show_post_expire,heading_only,allow_comments) VALUES ('Classified','n','y','n');
 
-#
-# Table structure for table tiki_banners
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_banners;
 CREATE TABLE tiki_banners (
   bannerId int(12) NOT NULL auto_increment,
@@ -464,15 +323,7 @@
   zone varchar(40) default NULL,
   PRIMARY KEY (bannerId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_banning
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_banning;
 CREATE TABLE tiki_banning (
   banId int(12) NOT NULL auto_increment,
@@ -490,15 +341,7 @@
   message text,
   PRIMARY KEY (banId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_banning_sections
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_banning_sections;
 CREATE TABLE tiki_banning_sections (
   banId int(12) NOT NULL default '0',
@@ -505,15 +348,7 @@
   section varchar(100) NOT NULL default '',
   PRIMARY KEY (banId,section)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_blog_activity
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 04:52 PM
-#
-
 DROP TABLE IF EXISTS tiki_blog_activity;
 CREATE TABLE tiki_blog_activity (
   blogId int(8) NOT NULL default '0',
@@ -521,16 +356,7 @@
   posts int(8) default NULL,
   PRIMARY KEY (blogId,day)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_blog_posts
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 04:52 PM
-# Last check: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_blog_posts;
 CREATE TABLE tiki_blog_posts (
   postId int(8) NOT NULL auto_increment,
@@ -549,15 +375,7 @@
   KEY created (created),
   FULLTEXT KEY ft (data,title)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_blog_posts_images
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_blog_posts_images;
 CREATE TABLE tiki_blog_posts_images (
   imgId int(14) NOT NULL auto_increment,
@@ -568,16 +386,7 @@
   data longblob,
   PRIMARY KEY (imgId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_blogs
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 13, 2003 at 01:07 AM
-# Last check: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_blogs;
 CREATE TABLE tiki_blogs (
   blogId int(8) NOT NULL auto_increment,
@@ -604,15 +413,7 @@
   KEY hits (hits),
   FULLTEXT KEY ft (title,description)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_calendar_categories
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 07:05 AM
-#
-
 DROP TABLE IF EXISTS tiki_calendar_categories;
 CREATE TABLE tiki_calendar_categories (
   calcatId int(11) NOT NULL auto_increment,
@@ -621,15 +422,7 @@
   PRIMARY KEY (calcatId),
   UNIQUE KEY catname (calendarId,name(16))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_calendar_items
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 07:43 AM
-#
-
 DROP TABLE IF EXISTS tiki_calendar_items;
 CREATE TABLE tiki_calendar_items (
   calitemId int(14) NOT NULL auto_increment,
@@ -651,15 +444,7 @@
   PRIMARY KEY (calitemId),
   KEY calendarId (calendarId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_calendar_locations
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 07:05 AM
-#
-
 DROP TABLE IF EXISTS tiki_calendar_locations;
 CREATE TABLE tiki_calendar_locations (
   callocId int(14) NOT NULL auto_increment,
@@ -669,15 +454,7 @@
   PRIMARY KEY (callocId),
   UNIQUE KEY locname (calendarId,name(16))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_calendar_roles
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_calendar_roles;
 CREATE TABLE tiki_calendar_roles (
   calitemId int(14) NOT NULL default '0',
@@ -685,15 +462,7 @@
   role enum('0','1','2','3','6') NOT NULL default '0',
   PRIMARY KEY (calitemId,username(16),role)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_calendars
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 05, 2003 at 02:03 PM
-#
-
 DROP TABLE IF EXISTS tiki_calendars;
 CREATE TABLE tiki_calendars (
   calendarId int(14) NOT NULL auto_increment,
@@ -711,7 +480,6 @@
   personal enum ('n', 'y') NOT NULL default 'n',
   PRIMARY KEY (calendarId)
 ) ENGINE=MyISAM ;
-# --------------------------------------------------------
 
 DROP TABLE IF EXISTS tiki_calendar_options;
 CREATE TABLE tiki_calendar_options (
@@ -720,13 +488,6 @@
 	value varchar(255),
 	PRIMARY KEY (calendarId,optionName)
 ) ENGINE=MyISAM ;
-# --------------------------------------------------------
-#
-# Table structure for table tiki_categories
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 04, 2003 at 09:47 PM
-#
 
 DROP TABLE IF EXISTS tiki_categories;
 CREATE TABLE tiki_categories (
@@ -737,15 +498,7 @@
   hits int(8) default NULL,
   PRIMARY KEY (categId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_categorized_objects
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Dec 06, 2005 
-#
-
 DROP TABLE IF EXISTS tiki_objects;
 CREATE TABLE tiki_objects (
   objectId int(12) NOT NULL auto_increment,
@@ -760,11 +513,7 @@
   KEY (type, objectId),
   KEY (itemId, type)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-# Table structure for table `tiki_categorized_objects`
-#
-
 DROP TABLE IF EXISTS `tiki_categorized_objects`;
 CREATE TABLE `tiki_categorized_objects` (
   `catObjectId` int(11) NOT NULL default '0',
@@ -771,14 +520,6 @@
   PRIMARY KEY (`catObjectId`)
 ) ENGINE=MyISAM ;
 
-
-#
-# Table structure for table tiki_category_objects
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 13, 2003 at 01:09 AM
-#
-
 DROP TABLE IF EXISTS tiki_category_objects;
 CREATE TABLE tiki_category_objects (
   catObjectId int(12) NOT NULL default '0',
@@ -785,15 +526,7 @@
   categId int(12) NOT NULL default '0',
   PRIMARY KEY (catObjectId,categId)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_category_sites
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 07, 2003 at 01:53 AM
-#
-
 DROP TABLE IF EXISTS tiki_object_ratings;
 CREATE TABLE tiki_object_ratings (
   catObjectId int(12) NOT NULL default '0',
@@ -800,15 +533,7 @@
   pollId int(12) NOT NULL default '0',
   PRIMARY KEY (catObjectId,pollId)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_category_sites
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 07, 2003 at 01:53 AM
-#
-
 DROP TABLE IF EXISTS tiki_category_sites;
 CREATE TABLE tiki_category_sites (
   categId int(10) NOT NULL default '0',
@@ -815,15 +540,7 @@
   siteId int(14) NOT NULL default '0',
   PRIMARY KEY (categId,siteId)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_chart_items
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_chart_items;
 CREATE TABLE tiki_chart_items (
   itemId int(14) NOT NULL auto_increment,
@@ -837,15 +554,7 @@
   average decimal(4,2) default NULL,
   PRIMARY KEY (itemId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_charts
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 06, 2003 at 08:14 AM
-#
-
 DROP TABLE IF EXISTS tiki_charts;
 CREATE TABLE tiki_charts (
   chartId int(14) NOT NULL auto_increment,
@@ -868,15 +577,7 @@
   created int(14) default NULL,
   PRIMARY KEY (chartId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_charts_rankings
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_charts_rankings;
 CREATE TABLE tiki_charts_rankings (
   chartId int(14) NOT NULL default '0',
@@ -889,15 +590,7 @@
   raverage decimal(4,2) NOT NULL default '0.00',
   PRIMARY KEY (chartId,itemId,period)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_charts_votes
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_charts_votes;
 CREATE TABLE tiki_charts_votes (
   user varchar(200) NOT NULL default '',
@@ -906,15 +599,7 @@
   chartId int(14) default NULL,
   PRIMARY KEY (user,itemId)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_chat_channels
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_chat_channels;
 CREATE TABLE tiki_chat_channels (
   channelId int(8) NOT NULL auto_increment,
@@ -927,15 +612,7 @@
   refresh int(6) default NULL,
   PRIMARY KEY (channelId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_chat_messages
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_chat_messages;
 CREATE TABLE tiki_chat_messages (
   messageId int(8) NOT NULL auto_increment,
@@ -945,15 +622,7 @@
   timestamp int(14) default NULL,
   PRIMARY KEY (messageId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_chat_users
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_chat_users;
 CREATE TABLE tiki_chat_users (
   nickname varchar(200) NOT NULL default '',
@@ -961,16 +630,7 @@
   timestamp int(14) default NULL,
   PRIMARY KEY (nickname,channelId)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_comments
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 10:56 PM
-# Last check: Jul 11, 2003 at 01:52 AM
-#
-
 DROP TABLE IF EXISTS tiki_comments;
 CREATE TABLE tiki_comments (
   threadId int(14) NOT NULL auto_increment,
@@ -1005,15 +665,7 @@
   KEY threaded (message_id, in_reply_to, parentId),
   FULLTEXT KEY ft (title,data)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_content
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_content;
 CREATE TABLE tiki_content (
   contentId int(8) NOT NULL auto_increment,
@@ -1021,15 +673,7 @@
   contentLabel varchar(255) NOT NULL default '',
   PRIMARY KEY (contentId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_content_templates
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 12:37 AM
-#
-
 DROP TABLE IF EXISTS tiki_content_templates;
 CREATE TABLE tiki_content_templates (
   templateId int(10) NOT NULL auto_increment,
@@ -1038,15 +682,7 @@
   created int(14) default NULL,
   PRIMARY KEY (templateId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_content_templates_sections
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 12:37 AM
-#
-
 DROP TABLE IF EXISTS tiki_content_templates_sections;
 CREATE TABLE tiki_content_templates_sections (
   templateId int(10) NOT NULL default '0',
@@ -1053,15 +689,7 @@
   section varchar(250) NOT NULL default '',
   PRIMARY KEY (templateId,section)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_cookies
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 10, 2003 at 04:00 AM
-#
-
 DROP TABLE IF EXISTS tiki_cookies;
 CREATE TABLE tiki_cookies (
   cookieId int(10) NOT NULL auto_increment,
@@ -1068,15 +696,7 @@
   cookie text,
   PRIMARY KEY (cookieId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_copyrights
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_copyrights;
 CREATE TABLE tiki_copyrights (
   copyrightId int(12) NOT NULL auto_increment,
@@ -1088,15 +708,7 @@
   userName varchar(200) default '',
   PRIMARY KEY (copyrightId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_directory_categories
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 08:59 PM
-#
-
 DROP TABLE IF EXISTS tiki_directory_categories;
 CREATE TABLE tiki_directory_categories (
   categId int(10) NOT NULL auto_increment,
@@ -1112,15 +724,7 @@
   hits int(12) default NULL,
   PRIMARY KEY (categId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_directory_search
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_directory_search;
 CREATE TABLE tiki_directory_search (
   term varchar(250) NOT NULL default '',
@@ -1127,15 +731,7 @@
   hits int(14) default NULL,
   PRIMARY KEY (term)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_directory_sites
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 07:32 PM
-#
-
 DROP TABLE IF EXISTS tiki_directory_sites;
 CREATE TABLE tiki_directory_sites (
   siteId int(14) NOT NULL auto_increment,
@@ -1154,15 +750,7 @@
   KEY (url),
   FULLTEXT KEY ft (name,description)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_drawings
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 08, 2003 at 05:02 AM
-#
-
 DROP TABLE IF EXISTS tiki_drawings;
 CREATE TABLE tiki_drawings (
   drawId int(12) NOT NULL auto_increment,
@@ -1174,15 +762,7 @@
   user varchar(200) default '',
   PRIMARY KEY (drawId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_dsn
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_dsn;
 CREATE TABLE tiki_dsn (
   dsnId int(12) NOT NULL auto_increment,
@@ -1190,9 +770,7 @@
   dsn varchar(255) default NULL,
   PRIMARY KEY (dsnId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-
 DROP TABLE IF EXISTS tiki_dynamic_variables;
 CREATE TABLE tiki_dynamic_variables (
   name varchar(40) NOT NULL,
@@ -1200,14 +778,6 @@
   PRIMARY KEY (name)
 );
 
-# --------------------------------------------------------
-#
-# Table structure for table tiki_extwiki
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_extwiki;
 CREATE TABLE tiki_extwiki (
   extwikiId int(12) NOT NULL auto_increment,
@@ -1215,16 +785,7 @@
   extwiki varchar(255) default NULL,
   PRIMARY KEY (extwikiId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_faq_questions
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-# Last check: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_faq_questions;
 CREATE TABLE tiki_faq_questions (
   questionId int(10) NOT NULL auto_increment,
@@ -1238,16 +799,7 @@
   KEY answer (answer(255)),
   FULLTEXT KEY ft (question,answer)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_faqs
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 09:09 PM
-# Last check: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_faqs;
 CREATE TABLE tiki_faqs (
   faqId int(10) NOT NULL auto_increment,
@@ -1263,15 +815,7 @@
   KEY hits (hits),
   FULLTEXT KEY ft (title,description)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_featured_links
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 11:08 PM
-#
-
 DROP TABLE IF EXISTS tiki_featured_links;
 CREATE TABLE tiki_featured_links (
   url varchar(200) NOT NULL default '',
@@ -1282,12 +826,6 @@
   type char(1) default NULL,
   PRIMARY KEY (url)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
-# Table structure for table tiki_file_galleries
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 13, 2003 at 01:13 AM
-#
 
 DROP TABLE IF EXISTS tiki_file_galleries;
 CREATE TABLE tiki_file_galleries (
@@ -1328,16 +866,7 @@
   show_path char(1) default NULL,
   PRIMARY KEY (galleryId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_files
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Nov 02, 2004 at 05:59 PM
-# Last check: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_files;
 CREATE TABLE tiki_files (
   fileId int(14) NOT NULL auto_increment,
@@ -1373,15 +902,7 @@
   KEY hits (hits),
   FULLTEXT KEY ft (name,description,search_data)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_forum_attachments
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_forum_attachments;
 CREATE TABLE tiki_forum_attachments (
   attId int(14) NOT NULL auto_increment,
@@ -1398,15 +919,7 @@
   PRIMARY KEY (attId),
   KEY threadId (threadId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_forum_reads
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 07:17 PM
-#
-
 DROP TABLE IF EXISTS tiki_forum_reads;
 CREATE TABLE tiki_forum_reads (
   user varchar(200) NOT NULL default '',
@@ -1415,15 +928,7 @@
   timestamp int(14) default NULL,
   PRIMARY KEY (user,threadId)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_forums
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 11:14 PM
-#
-
 DROP TABLE IF EXISTS tiki_forums;
 CREATE TABLE tiki_forums (
   forumId int(8) NOT NULL auto_increment,
@@ -1485,15 +990,7 @@
   mandatory_contribution char(1) default NULL,
   PRIMARY KEY (forumId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_forums_queue
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_forums_queue;
 CREATE TABLE tiki_forums_queue (
   qId int(14) NOT NULL auto_increment,
@@ -1512,15 +1009,7 @@
   in_reply_to varchar(128) default NULL,
   PRIMARY KEY (qId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_forums_reported
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_forums_reported;
 CREATE TABLE tiki_forums_reported (
   threadId int(12) NOT NULL default '0',
@@ -1531,16 +1020,7 @@
   reason varchar(250) default NULL,
   PRIMARY KEY (threadId)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_galleries
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Sep 18, 2004 at 11:56 PM
-# Last check: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_galleries;
 CREATE TABLE tiki_galleries (
   galleryId int(14) NOT NULL auto_increment,
@@ -1580,15 +1060,7 @@
   KEY visibleUser (visible, user),
   FULLTEXT KEY ft (name,description)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_galleries_scales
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_galleries_scales;
 CREATE TABLE tiki_galleries_scales (
   galleryId int(14) NOT NULL default '0',
@@ -1595,15 +1067,7 @@
   scale int(11) NOT NULL default '0',
   PRIMARY KEY (galleryId,scale)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_games
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 05, 2003 at 08:23 PM
-#
-
 DROP TABLE IF EXISTS tiki_games;
 CREATE TABLE tiki_games (
   gameName varchar(200) NOT NULL default '',
@@ -1612,15 +1076,7 @@
   points int(8) default NULL,
   PRIMARY KEY (gameName)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_group_inclusion
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 05, 2003 at 02:03 AM
-#
-
 DROP TABLE IF EXISTS tiki_group_inclusion;
 CREATE TABLE tiki_group_inclusion (
   groupName varchar(255) NOT NULL default '',
@@ -1627,15 +1083,7 @@
   includeGroup varchar(255) NOT NULL default '',
   PRIMARY KEY (groupName(30),includeGroup(30))
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_history
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Mar 30, 2005 at 10:21 PM
-#
-
 DROP TABLE IF EXISTS tiki_history;
 CREATE TABLE tiki_history (
   historyId int(12) NOT NULL auto_increment,
@@ -1653,15 +1101,7 @@
   KEY `user` (`user`),
   KEY(historyId)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_hotwords
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 10, 2003 at 11:04 PM
-#
-
 DROP TABLE IF EXISTS tiki_hotwords;
 CREATE TABLE tiki_hotwords (
   word varchar(40) NOT NULL default '',
@@ -1668,15 +1108,7 @@
   url varchar(255) NOT NULL default '',
   PRIMARY KEY (word)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_html_pages
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_html_pages;
 CREATE TABLE tiki_html_pages (
   pageName varchar(200) NOT NULL default '',
@@ -1686,15 +1118,7 @@
   created int(14) default NULL,
   PRIMARY KEY (pageName)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_html_pages_dynamic_zones
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_html_pages_dynamic_zones;
 CREATE TABLE tiki_html_pages_dynamic_zones (
   pageName varchar(40) NOT NULL default '',
@@ -1703,16 +1127,7 @@
   content text,
   PRIMARY KEY (pageName,zone)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_images
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Sep 18, 2004 at 08:29 PM
-# Last check: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_images;
 CREATE TABLE tiki_images (
   imageId int(14) NOT NULL auto_increment,
@@ -1734,16 +1149,7 @@
   KEY ti_us (user),
   FULLTEXT KEY ft (name,description)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_images_data
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 12:49 PM
-# Last check: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_images_data;
 CREATE TABLE tiki_images_data (
   imageId int(14) NOT NULL default '0',
@@ -1758,15 +1164,7 @@
   PRIMARY KEY (imageId,xsize,ysize,type),
   KEY t_i_d_it (imageId,type)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_language
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_language;
 CREATE TABLE tiki_language (
   source tinyblob NOT NULL,
@@ -1774,15 +1172,7 @@
   tran tinyblob,
   PRIMARY KEY (source(255),lang)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_languages
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_languages;
 CREATE TABLE tiki_languages (
   lang char(16) NOT NULL default '',
@@ -1789,17 +1179,9 @@
   language varchar(255) default NULL,
   PRIMARY KEY (lang)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
+
 INSERT INTO tiki_languages(lang, language) VALUES('en','English');
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_link_cache
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 06:06 PM
-#
-
 DROP TABLE IF EXISTS tiki_link_cache;
 CREATE TABLE tiki_link_cache (
   cacheId int(14) NOT NULL auto_increment,
@@ -1810,15 +1192,7 @@
   KEY url (url)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 CREATE INDEX urlindex ON tiki_link_cache (url(250));
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_links
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 11:39 PM
-#
-
 DROP TABLE IF EXISTS tiki_links;
 CREATE TABLE tiki_links (
   fromPage varchar(160) NOT NULL default '',
@@ -1826,15 +1200,7 @@
   PRIMARY KEY (fromPage,toPage),
   KEY toPage (toPage)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_live_support_events
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_live_support_events;
 CREATE TABLE tiki_live_support_events (
   eventId int(14) NOT NULL auto_increment,
@@ -1846,15 +1212,7 @@
   timestamp int(14) default NULL,
   PRIMARY KEY (eventId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_live_support_message_comments
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_live_support_message_comments;
 CREATE TABLE tiki_live_support_message_comments (
   cId int(12) NOT NULL auto_increment,
@@ -1863,15 +1221,7 @@
   timestamp int(14) default NULL,
   PRIMARY KEY (cId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_live_support_messages
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_live_support_messages;
 CREATE TABLE tiki_live_support_messages (
   msgId int(12) NOT NULL auto_increment,
@@ -1888,15 +1238,7 @@
   email varchar(250) default NULL,
   PRIMARY KEY (msgId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_live_support_modules
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_live_support_modules;
 CREATE TABLE tiki_live_support_modules (
   modId int(4) NOT NULL auto_increment,
@@ -1903,7 +1245,7 @@
   name varchar(90) default NULL,
   PRIMARY KEY (modId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
+
 INSERT INTO tiki_live_support_modules(name) VALUES('wiki');
 INSERT INTO tiki_live_support_modules(name) VALUES('forums');
 INSERT INTO tiki_live_support_modules(name) VALUES('image galleries');
@@ -1911,15 +1253,7 @@
 INSERT INTO tiki_live_support_modules(name) VALUES('directory');
 INSERT INTO tiki_live_support_modules(name) VALUES('workflow');
 INSERT INTO tiki_live_support_modules(name) VALUES('charts');
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_live_support_operators
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_live_support_operators;
 CREATE TABLE tiki_live_support_operators (
   user varchar(200) NOT NULL default '',
@@ -1935,15 +1269,7 @@
   status_since int(14) default NULL,
   PRIMARY KEY (user)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_live_support_requests
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_live_support_requests;
 CREATE TABLE tiki_live_support_requests (
   reqId varchar(32) NOT NULL default '',
@@ -1962,15 +1288,7 @@
   chat_ended int(14) default NULL,
   PRIMARY KEY (reqId)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_logs
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_logs;
 CREATE TABLE tiki_logs (
   logId int(8) NOT NULL auto_increment,
@@ -1984,15 +1302,6 @@
   KEY logtype (logtype)
 ) ENGINE=MyISAM;
 
-# --------------------------------------------------------
-
-#
-# Table structure for table tiki_mail_events
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 11, 2003 at 05:28 AM
-#
-
 DROP TABLE IF EXISTS tiki_mail_events;
 CREATE TABLE tiki_mail_events (
   event varchar(200) default NULL,
@@ -1999,15 +1308,7 @@
   object varchar(200) default NULL,
   email varchar(200) default NULL
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_mailin_accounts
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jun 17, 2004 at 03:06 PM EST
-#
-
 DROP TABLE IF EXISTS tiki_mailin_accounts;
 CREATE TABLE tiki_mailin_accounts (
   accountId int(12) NOT NULL auto_increment,
@@ -2029,15 +1330,7 @@
   discard_after varchar(255) default NULL,
   PRIMARY KEY (accountId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_menu_languages
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_menu_languages;
 CREATE TABLE tiki_menu_languages (
   menuId int(8) NOT NULL auto_increment,
@@ -2044,15 +1337,7 @@
   language char(16) NOT NULL default '',
   PRIMARY KEY (menuId,language)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_menu_options
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Nov 21, 2003 at 07:05 AM
-#
-
 DROP TABLE IF EXISTS tiki_menu_options;
 CREATE TABLE tiki_menu_options (
   optionId int(8) NOT NULL auto_increment,
@@ -2068,7 +1353,7 @@
   PRIMARY KEY (optionId),
   UNIQUE KEY uniq_menu (menuId,name(30),url(50),position,section(60),perm(50),groupname(50))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
+
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (1,42,'o','Home','./',10,'','','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (3,42,'o','Contact us','tiki-contact.php',20,'feature_contact','','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (4,42,'o','Stats','tiki-stats.php',23,'feature_stats','tiki_p_view_stats','',0);
@@ -2253,15 +1538,7 @@
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (192,42,'o','List articles','tiki-list_articles.php',360,'feature_articles','tiki_p_articles_read_heading','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (193,42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_view_actionlog','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (194,42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_view_actionlog_owngroups','',0);
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_menus
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_menus;
 CREATE TABLE tiki_menus (
   menuId int(8) NOT NULL auto_increment,
@@ -2271,17 +1548,9 @@
   icon varchar(200) default NULL,
   PRIMARY KEY (menuId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
+
 INSERT INTO tiki_menus (menuId,name,description,type) VALUES ('42','Application menu','Main extensive navigation menu','d');
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_minical_events
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 09, 2003 at 04:06 AM
-#
-
 DROP TABLE IF EXISTS tiki_minical_events;
 CREATE TABLE tiki_minical_events (
   user varchar(200) default '',
@@ -2296,15 +1565,7 @@
   reminded char(1) default NULL,
   PRIMARY KEY (eventId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_minical_topics
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_minical_topics;
 CREATE TABLE tiki_minical_topics (
   user varchar(200) default '',
@@ -2318,15 +1579,7 @@
   isIcon char(1) default NULL,
   PRIMARY KEY (topicId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_modules
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 11:44 PM
-#
-
 DROP TABLE IF EXISTS tiki_modules;
 CREATE TABLE tiki_modules (
   moduleId int(8) NOT NULL auto_increment,
@@ -2343,21 +1596,13 @@
   KEY positionType (position, type),
   KEY moduleId (moduleId)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
+
 INSERT INTO tiki_modules (name,position,ord,cache_time,groups) VALUES ('login_box','r',1,0,'a:2:{i:0;s:10:"Registered";i:1;s:9:"Anonymous";}');
 INSERT INTO tiki_modules (name,position,ord,cache_time,params,groups) VALUES ('mnu_application_menu','l',1,0,'flip=y','a:2:{i:0;s:10:"Registered";i:1;s:9:"Anonymous";}');
 INSERT INTO tiki_modules (name,position,ord,cache_time,groups) VALUES ('quick_edit','l',2,0,'a:1:{i:0;s:6:\"Admins\";}');
 INSERT INTO tiki_modules (name,position,ord,cache_time,groups) VALUES ('assistant','l',10,0,'a:2:{i:0;s:10:"Registered";i:1;s:9:"Anonymous";}');
 INSERT INTO tiki_modules (name,position,ord,cache_time,groups) VALUES ('since_last_visit_new','r',40,0,'a:1:{i:0;s:6:\"Admins\";}');
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_newsletter_subscriptions
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_newsletter_subscriptions;
 CREATE TABLE tiki_newsletter_subscriptions (
   nlId int(12) NOT NULL default '0',
@@ -2368,15 +1613,7 @@
   isUser char(1) NOT NULL default 'n',
   PRIMARY KEY (nlId,email,isUser)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_newsletter_groups
-#
-# Creation: Jan 18, 2005
-# Last update: Jan 18, 2005
-#
-
 DROP TABLE IF EXISTS tiki_newsletter_groups;
 CREATE TABLE tiki_newsletter_groups (
   nlId int(12) NOT NULL default '0',
@@ -2384,15 +1621,7 @@
   code varchar(32) default NULL,
   PRIMARY KEY (nlId,groupName)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_newsletter_included
-#
-# Creation: Sep 25, 2007
-# Last update: Sep 25, 2007
-#
-
 DROP TABLE IF EXISTS tiki_newsletter_included;
 CREATE TABLE tiki_newsletter_included (
   nlId int(12) NOT NULL default '0',
@@ -2399,15 +1628,7 @@
   includedId int(12) NOT NULL default '0',
   PRIMARY KEY (nlId,includedId)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_newsletters
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_newsletters;
 CREATE TABLE tiki_newsletters (
   nlId int(12) NOT NULL auto_increment,
@@ -2426,15 +1647,7 @@
 	author varchar(200) default NULL,
   PRIMARY KEY (nlId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_newsreader_marks
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_newsreader_marks;
 CREATE TABLE tiki_newsreader_marks (
   user varchar(200) NOT NULL default '',
@@ -2443,15 +1656,7 @@
   timestamp int(14) NOT NULL default '0',
   PRIMARY KEY (`user`(100),serverId,groupName(100))
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_newsreader_servers
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_newsreader_servers;
 CREATE TABLE tiki_newsreader_servers (
   user varchar(200) NOT NULL default '',
@@ -2462,16 +1667,7 @@
   password varchar(200) default NULL,
   PRIMARY KEY (serverId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_page_footnotes
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 10:00 AM
-# Last check: Jul 12, 2003 at 10:00 AM
-#
-
 DROP TABLE IF EXISTS tiki_page_footnotes;
 CREATE TABLE tiki_page_footnotes (
   user varchar(200) NOT NULL default '',
@@ -2479,16 +1675,7 @@
   data text,
   PRIMARY KEY (`user`(150),pageName(100))
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_pages
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 13, 2003 at 01:52 AM
-# Last check: Jul 12, 2003 at 10:01 AM
-#
-
 DROP TABLE IF EXISTS tiki_pages;
 CREATE TABLE tiki_pages (
   page_id int(14) NOT NULL auto_increment,
@@ -2523,14 +1710,7 @@
   FULLTEXT KEY ft (pageName,description,data),
   KEY lastModif(lastModif)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_page_drafts
-#
-# Creation: March 12, 2006 at 
-#
-
 DROP TABLE IF EXISTS tiki_page_drafts;
 CREATE TABLE tiki_page_drafts (
   user varchar(200) default '',
@@ -2541,15 +1721,7 @@
   lastModif int(14) default NULL,
   PRIMARY KEY (pageName(120), `user`(120))
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_pageviews
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 13, 2003 at 01:52 AM
-#
-
 DROP TABLE IF EXISTS tiki_pageviews;
 CREATE TABLE tiki_pageviews (
   day int(14) NOT NULL default '0',
@@ -2556,12 +1728,7 @@
   pageviews int(14) default NULL,
   PRIMARY KEY (day)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_poll_objects
-#
-
 DROP TABLE IF EXISTS tiki_poll_objects;
 CREATE TABLE `tiki_poll_objects` (
   `catObjectId` int(11) NOT NULL default '0',
@@ -2569,15 +1736,7 @@
   `title` varchar(255) default NULL,
   PRIMARY KEY (`catObjectId`,`pollId`)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_poll_options
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 06, 2003 at 07:57 PM
-#
-
 DROP TABLE IF EXISTS tiki_poll_options;
 CREATE TABLE tiki_poll_options (
   pollId int(8) NOT NULL default '0',
@@ -2587,15 +1746,7 @@
   votes int(8) default NULL,
   PRIMARY KEY (optionId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_polls
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 06, 2003 at 07:57 PM
-#
-
 DROP TABLE IF EXISTS tiki_polls;
 CREATE TABLE tiki_polls (
   pollId int(8) NOT NULL auto_increment,
@@ -2605,15 +1756,7 @@
   publishDate int(14) default NULL,
   PRIMARY KEY (pollId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_preferences
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 12:04 PM
-#
-
 DROP TABLE IF EXISTS tiki_preferences;
 CREATE TABLE tiki_preferences (
   name varchar(40) NOT NULL default '',
@@ -2620,15 +1763,7 @@
   value text,
   PRIMARY KEY (name)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_private_messages
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_private_messages;
 CREATE TABLE tiki_private_messages (
   messageId int(8) NOT NULL auto_increment,
@@ -2641,15 +1776,7 @@
   key(timestamp),
   PRIMARY KEY (messageId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_programmed_content
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_programmed_content;
 CREATE TABLE tiki_programmed_content (
   pId int(8) NOT NULL auto_increment,
@@ -2658,15 +1785,7 @@
   data text,
   PRIMARY KEY (pId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_quiz_question_options
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_quiz_question_options;
 CREATE TABLE tiki_quiz_question_options (
   optionId int(10) NOT NULL auto_increment,
@@ -2675,15 +1794,7 @@
   points int(4) default NULL,
   PRIMARY KEY (optionId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_quiz_questions
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_quiz_questions;
 CREATE TABLE tiki_quiz_questions (
   questionId int(10) NOT NULL auto_increment,
@@ -2694,15 +1805,7 @@
   maxPoints int(4) default NULL,
   PRIMARY KEY (questionId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_quiz_results
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_quiz_results;
 CREATE TABLE tiki_quiz_results (
   resultId int(10) NOT NULL auto_increment,
@@ -2712,15 +1815,7 @@
   answer text,
   PRIMARY KEY (resultId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_quiz_stats
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_quiz_stats;
 CREATE TABLE tiki_quiz_stats (
   quizId int(10) NOT NULL default '0',
@@ -2729,15 +1824,7 @@
   votes int(10) default NULL,
   PRIMARY KEY (quizId,questionId,optionId)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_quiz_stats_sum
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_quiz_stats_sum;
 CREATE TABLE tiki_quiz_stats_sum (
   quizId int(10) NOT NULL default '0',
@@ -2748,15 +1835,7 @@
   avgtime decimal(5,2) default NULL,
   PRIMARY KEY (quizId)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_quizzes
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: April 29, 2004
-#
-
 DROP TABLE IF EXISTS tiki_quizzes;
 CREATE TABLE tiki_quizzes (
   quizId int(10) NOT NULL auto_increment,
@@ -2798,15 +1877,7 @@
   passingperct int(4) default 0,
   PRIMARY KEY (quizId, nVersion)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_received_articles
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_received_articles;
 CREATE TABLE tiki_received_articles (
   receivedArticleId int(14) NOT NULL auto_increment,
@@ -2834,15 +1905,7 @@
   rating decimal(3,2) default NULL,
   PRIMARY KEY (receivedArticleId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_received_pages
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 09, 2003 at 03:56 AM
-#
-
 DROP TABLE IF EXISTS tiki_received_pages;
 CREATE TABLE tiki_received_pages (
   receivedPageId int(14) NOT NULL auto_increment,
@@ -2856,22 +1919,14 @@
   parent varchar(255) default NULL,
   position tinyint(3) unsigned default NULL,
   alias varchar(255) default NULL,
-  structureName  varchar(250) default NULL,
-  parentName  varchar(250) default NULL,
+  structureName varchar(250) default NULL,
+  parentName varchar(250) default NULL,
   page_alias varchar(250) default '',
   pos int(4) default NULL,
   PRIMARY KEY (receivedPageId),
   KEY structureName (structureName)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_referer_stats
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 13, 2003 at 01:30 AM
-#
-
 DROP TABLE IF EXISTS tiki_referer_stats;
 CREATE TABLE tiki_referer_stats (
   referer varchar(255) NOT NULL default '',
@@ -2879,15 +1934,7 @@
   last int(14) default NULL,
   PRIMARY KEY (referer)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_related_categories
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_related_categories;
 CREATE TABLE tiki_related_categories (
   categId int(10) NOT NULL default '0',
@@ -2894,15 +1941,7 @@
   relatedTo int(10) NOT NULL default '0',
   PRIMARY KEY (categId,relatedTo)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_rss_modules
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 10:19 AM
-#
-
 DROP TABLE IF EXISTS tiki_rss_modules;
 CREATE TABLE tiki_rss_modules (
   rssId int(8) NOT NULL auto_increment,
@@ -2917,15 +1956,7 @@
   PRIMARY KEY (rssId),
   KEY name (name)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_rss_feeds
-#
-# Creation: Oct 14, 2003 at 20:34 PM
-# Last update: Oct 14, 2003 at 20:34 PM
-#
-
 DROP TABLE IF EXISTS tiki_rss_feeds;
 CREATE TABLE tiki_rss_feeds (
   name varchar(30) NOT NULL default '',
@@ -2935,7 +1966,6 @@
   cache longblob,
   PRIMARY KEY (name,rssVer)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
 DROP TABLE IF EXISTS tiki_searchindex;
 CREATE TABLE tiki_searchindex(
@@ -2967,13 +1997,6 @@
   PRIMARY KEY (syllable,searchword)
 ) ENGINE=MyISAM;
 
-#
-# Table structure for table tiki_search_stats
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 10:55 PM
-#
-
 DROP TABLE IF EXISTS tiki_search_stats;
 CREATE TABLE tiki_search_stats (
   term varchar(50) NOT NULL default '',
@@ -2980,13 +2003,7 @@
   hits int(10) default NULL,
   PRIMARY KEY (term)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_secdb
-#
-#
-
 DROP TABLE IF EXISTS tiki_secdb;
 CREATE TABLE tiki_secdb(
   md5_value varchar(32) NOT NULL,
@@ -2997,13 +2014,6 @@
   KEY sdb_fn (filename)
 ) ENGINE=MyISAM;
 
-#
-# Table structure for table tiki_semaphores
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 13, 2003 at 01:52 AM
-#
-
 DROP TABLE IF EXISTS tiki_semaphores;
 CREATE TABLE tiki_semaphores (
   semName varchar(250) NOT NULL default '',
@@ -3012,15 +2022,7 @@
   timestamp int(14) default NULL,
   PRIMARY KEY (semName)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_sent_newsletters
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_sent_newsletters;
 CREATE TABLE tiki_sent_newsletters (
   editionId int(12) NOT NULL auto_increment,
@@ -3032,12 +2034,7 @@
   datatxt longblob,
   PRIMARY KEY (editionId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_sent_newsletters_errors
-#
-
 DROP TABLE IF EXISTS tiki_sent_newsletters_errors;
 CREATE TABLE tiki_sent_newsletters_errors (
   editionId int(12),
@@ -3046,16 +2043,7 @@
   error char(1) default '',
   KEY (editionId)
 ) ENGINE=MyISAM ;
-# --------------------------------------------------------
 
-
-#
-# Table structure for table tiki_sessions
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 13, 2003 at 01:52 AM
-#
-
 DROP TABLE IF EXISTS tiki_sessions;
 CREATE TABLE tiki_sessions (
   sessionId varchar(32) NOT NULL default '',
@@ -3066,9 +2054,7 @@
   KEY user (user),
   KEY timestamp (timestamp)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-# Tables for TikiSheet
 DROP TABLE IF EXISTS tiki_sheet_layout;
 CREATE TABLE tiki_sheet_layout (
   sheetId int(8) NOT NULL default '0',
@@ -3106,13 +2092,6 @@
   PRIMARY KEY (sheetId)
 ) ENGINE=MyISAM;
 
-#
-# Table structure for table tiki_shoutbox
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 08:21 PM
-#
-
 DROP TABLE IF EXISTS tiki_shoutbox;
 CREATE TABLE tiki_shoutbox (
   msgId int(10) NOT NULL auto_increment,
@@ -3122,12 +2101,7 @@
   hash varchar(32) default NULL,
   PRIMARY KEY (msgId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_shoutbox_words
-#
-
 DROP TABLE IF EXISTS tiki_shoutbox_words;
 CREATE TABLE tiki_shoutbox_words (
   word VARCHAR( 40 ) NOT NULL ,
@@ -3134,15 +2108,7 @@
   qty INT DEFAULT '0' NOT NULL ,
   PRIMARY KEY (word)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_structure_versions
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_structure_versions;
 CREATE TABLE tiki_structure_versions (
   structure_id int(14) NOT NULL auto_increment,
@@ -3149,15 +2115,7 @@
   version int(14) default NULL,
   PRIMARY KEY (structure_id)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_structures
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_structures;
 CREATE TABLE tiki_structures (
   page_ref_id int(14) NOT NULL auto_increment,
@@ -3171,15 +2129,7 @@
   KEY pidpaid (page_id,parent_id),
   KEY page_id (page_id)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_submissions
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Nov 29, 2006 at 08:46 PM
-#
-
 DROP TABLE IF EXISTS tiki_submissions;
 CREATE TABLE tiki_submissions (
   subId int(8) NOT NULL auto_increment,
@@ -3217,15 +2167,7 @@
   isfloat char(1) default NULL,
   PRIMARY KEY (subId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_suggested_faq_questions
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 11, 2003 at 08:52 PM
-#
-
 DROP TABLE IF EXISTS tiki_suggested_faq_questions;
 CREATE TABLE tiki_suggested_faq_questions (
   sfqId int(10) NOT NULL auto_increment,
@@ -3236,15 +2178,7 @@
   user varchar(200) NOT NULL default '',
   PRIMARY KEY (sfqId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_survey_question_options
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 11, 2003 at 12:55 AM
-#
-
 DROP TABLE IF EXISTS tiki_survey_question_options;
 CREATE TABLE tiki_survey_question_options (
   optionId int(12) NOT NULL auto_increment,
@@ -3253,15 +2187,7 @@
   votes int(10) default NULL,
   PRIMARY KEY (optionId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_survey_questions
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 11, 2003 at 11:55 PM
-#
-
 DROP TABLE IF EXISTS tiki_survey_questions;
 CREATE TABLE tiki_survey_questions (
   questionId int(12) NOT NULL auto_increment,
@@ -3275,15 +2201,7 @@
   average decimal(4,2) default NULL,
   PRIMARY KEY (questionId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_surveys
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 07:40 PM
-#
-
 DROP TABLE IF EXISTS tiki_surveys;
 CREATE TABLE tiki_surveys (
   surveyId int(12) NOT NULL auto_increment,
@@ -3295,15 +2213,7 @@
   status char(1) default NULL,
   PRIMARY KEY (surveyId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_tags
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 06, 2003 at 02:58 AM
-#
-
 DROP TABLE IF EXISTS tiki_tags;
 CREATE TABLE tiki_tags (
   tagName varchar(80) NOT NULL default '',
@@ -3319,15 +2229,7 @@
   flag char(1) default NULL,
   PRIMARY KEY (tagName,pageName)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_theme_control_categs
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_theme_control_categs;
 CREATE TABLE tiki_theme_control_categs (
   categId int(12) NOT NULL default '0',
@@ -3334,15 +2236,7 @@
   theme varchar(250) NOT NULL default '',
   PRIMARY KEY (categId)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_theme_control_objects
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_theme_control_objects;
 CREATE TABLE tiki_theme_control_objects (
   objId varchar(250) NOT NULL default '',
@@ -3351,15 +2245,7 @@
   theme varchar(250) NOT NULL default '',
   PRIMARY KEY (objId(100), type(100))
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_theme_control_sections
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_theme_control_sections;
 CREATE TABLE tiki_theme_control_sections (
   section varchar(250) NOT NULL default '',
@@ -3366,15 +2252,7 @@
   theme varchar(250) NOT NULL default '',
   PRIMARY KEY (section)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_topics
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 04, 2003 at 10:10 PM
-#
-
 DROP TABLE IF EXISTS tiki_topics;
 CREATE TABLE tiki_topics (
   topicId int(14) NOT NULL auto_increment,
@@ -3387,15 +2265,7 @@
   created int(14) default NULL,
   PRIMARY KEY (topicId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_tracker_fields
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 08, 2003 at 01:48 PM
-#
-
 DROP TABLE IF EXISTS tiki_tracker_fields;
 CREATE TABLE tiki_tracker_fields (
   fieldId int(12) NOT NULL auto_increment,
@@ -3418,15 +2288,7 @@
   editableBy text,
   PRIMARY KEY (fieldId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_tracker_item_attachments
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_tracker_item_attachments;
 CREATE TABLE tiki_tracker_item_attachments (
   attId int(12) NOT NULL auto_increment,
@@ -3444,15 +2306,7 @@
   version varchar(40) default NULL,
   PRIMARY KEY (attId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_tracker_item_comments
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 08:12 AM
-#
-
 DROP TABLE IF EXISTS tiki_tracker_item_comments;
 CREATE TABLE tiki_tracker_item_comments (
   commentId int(12) NOT NULL auto_increment,
@@ -3463,15 +2317,7 @@
   posted int(14) default NULL,
   PRIMARY KEY (commentId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_tracker_item_fields
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 08:26 AM
-#
-
 DROP TABLE IF EXISTS tiki_tracker_item_fields;
 CREATE TABLE tiki_tracker_item_fields (
   itemId int(12) NOT NULL default '0',
@@ -3484,15 +2330,7 @@
   INDEX lang (lang),
   FULLTEXT KEY ft (value)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_tracker_items
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 08:26 AM
-#
-
 DROP TABLE IF EXISTS tiki_tracker_items;
 CREATE TABLE tiki_tracker_items (
   itemId int(12) NOT NULL auto_increment,
@@ -3502,15 +2340,7 @@
   lastModif int(14) default NULL,
   PRIMARY KEY (itemId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_tracker_options
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 08, 2003 at 01:48 PM
-#
-
 DROP TABLE IF EXISTS tiki_tracker_options;
 CREATE TABLE tiki_tracker_options (
   trackerId int(12) NOT NULL default '0',
@@ -3518,16 +2348,7 @@
   value text default NULL,
   PRIMARY KEY (trackerId,name(30))
 ) ENGINE=MyISAM ;
-# --------------------------------------------------------
 
-
-#
-# Table structure for table tiki_trackers
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 08:26 AM
-#
-
 DROP TABLE IF EXISTS tiki_trackers;
 CREATE TABLE tiki_trackers (
   trackerId int(12) NOT NULL auto_increment,
@@ -3547,15 +2368,7 @@
   orderAttachments varchar(255) NOT NULL default 'filename,created,filesize,hits,desc',
   PRIMARY KEY (trackerId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_untranslated
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_untranslated;
 CREATE TABLE tiki_untranslated (
   id int(14) NOT NULL auto_increment,
@@ -3565,15 +2378,7 @@
   UNIQUE KEY id (id),
   KEY id_2 (id)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_user_answers
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_user_answers;
 CREATE TABLE tiki_user_answers (
   userResultId int(10) NOT NULL default '0',
@@ -3582,17 +2387,7 @@
   optionId int(10) NOT NULL default '0',
   PRIMARY KEY (userResultId,quizId,questionId,optionId)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-
-#
-# Table structure for table tiki_user_answers_uploads
-#
-# Creation: Jan 25, 2005 at 07:42 PM
-# Last update: Jan 25, 2005 at 07:42 PM
-#
-
-
 DROP TABLE IF EXISTS tiki_user_answers_uploads;
 CREATE TABLE tiki_user_answers_uploads (
   answerUploadId int(4) NOT NULL auto_increment,
@@ -3605,14 +2400,6 @@
   PRIMARY KEY (answerUploadId)
 ) ENGINE=MyISAM;
 
-
-#
-# Table structure for table tiki_user_assigned_modules
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 08:25 PM
-#
-
 DROP TABLE IF EXISTS tiki_user_assigned_modules;
 CREATE TABLE tiki_user_assigned_modules (
   moduleId int(8) NOT NULL,
@@ -3623,15 +2410,7 @@
   user varchar(200) NOT NULL default '',
   PRIMARY KEY (name(30),user,position, ord)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_user_bookmarks_folders
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 11, 2003 at 08:35 AM
-#
-
 DROP TABLE IF EXISTS tiki_user_bookmarks_folders;
 CREATE TABLE tiki_user_bookmarks_folders (
   folderId int(12) NOT NULL auto_increment,
@@ -3640,15 +2419,7 @@
   name varchar(30) default NULL,
   PRIMARY KEY (user,folderId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_user_bookmarks_urls
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 11, 2003 at 08:36 AM
-#
-
 DROP TABLE IF EXISTS tiki_user_bookmarks_urls;
 CREATE TABLE tiki_user_bookmarks_urls (
   urlId int(12) NOT NULL auto_increment,
@@ -3660,15 +2431,7 @@
   user varchar(200) NOT NULL default '',
   PRIMARY KEY (urlId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_user_mail_accounts
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_user_mail_accounts;
 CREATE TABLE tiki_user_mail_accounts (
   accountId int(12) NOT NULL auto_increment,
@@ -3685,15 +2448,7 @@
   smtpPort int(4) default NULL,
   PRIMARY KEY (accountId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_user_menus
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 11, 2003 at 10:58 PM
-#
-
 DROP TABLE IF EXISTS tiki_user_menus;
 CREATE TABLE tiki_user_menus (
   user varchar(200) NOT NULL default '',
@@ -3704,15 +2459,7 @@
   mode char(1) default NULL,
   PRIMARY KEY (menuId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_user_modules
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 05, 2003 at 03:16 AM
-#
-
 DROP TABLE IF EXISTS tiki_user_modules;
 CREATE TABLE tiki_user_modules (
   name varchar(200) NOT NULL default '',
@@ -3721,16 +2468,9 @@
   parse char(1) default NULL,
   PRIMARY KEY (name)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
+
 INSERT INTO tiki_user_modules (name, title, data, parse) VALUES ('mnu_application_menu', 'Menu', '{menu id=42}', 'n');
 
-#
-# Table structure for table tiki_user_notes
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 07:52 AM
-#
-
 DROP TABLE IF EXISTS tiki_user_notes;
 CREATE TABLE tiki_user_notes (
   user varchar(200) NOT NULL default '',
@@ -3743,15 +2483,7 @@
   parse_mode varchar(20) default NULL,
   PRIMARY KEY (noteId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_user_postings
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 13, 2003 at 01:12 AM
-#
-
 DROP TABLE IF EXISTS tiki_user_postings;
 CREATE TABLE tiki_user_postings (
   user varchar(200) NOT NULL default '',
@@ -3761,15 +2493,7 @@
   level int(8) default NULL,
   PRIMARY KEY (user)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_user_preferences
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 13, 2003 at 01:09 AM
-#
-
 DROP TABLE IF EXISTS tiki_user_preferences;
 CREATE TABLE tiki_user_preferences (
   user varchar(200) NOT NULL default '',
@@ -3777,15 +2501,7 @@
   value varchar(250) default NULL,
   PRIMARY KEY (user,prefName)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_user_quizzes
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_user_quizzes;
 CREATE TABLE tiki_user_quizzes (
   user varchar(200) default '',
@@ -3798,15 +2514,7 @@
   userResultId int(10) NOT NULL auto_increment,
   PRIMARY KEY (userResultId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_user_taken_quizzes
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_user_taken_quizzes;
 CREATE TABLE tiki_user_taken_quizzes (
   user varchar(200) NOT NULL default '',
@@ -3813,22 +2521,14 @@
   quizId varchar(255) NOT NULL default '',
   PRIMARY KEY (user,quizId(50))
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-
-#
-# Table structure for table tiki_user_tasks_history
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jan 25, 2005 by sir-b & moresun
-#
 DROP TABLE IF EXISTS tiki_user_tasks_history;
 CREATE TABLE tiki_user_tasks_history (
-  belongs_to integer(14) NOT NULL,                   -- the fist task in a history it has the same id as the task id
+  belongs_to integer(14) NOT NULL,                   -- the first task in a history it has the same id as the task id
   task_version integer(4) NOT NULL DEFAULT 0,        -- version number for the history it starts with 0
   title varchar(250) NOT NULL,                       -- title
   description text DEFAULT NULL,                     -- description
-  start integer(14) DEFAULT NULL,                    -- date of the starting, if it is not set than there is not starting date
+  start integer(14) DEFAULT NULL,                    -- date of the starting, if it is not set than there is no starting date
   end integer(14) DEFAULT NULL,                      -- date of the end, if it is not set than there is not dealine
   lasteditor varchar(200) NOT NULL,                  -- lasteditor: username of last editior
   lastchanges integer(14) NOT NULL,                  -- date of last changes
@@ -3835,9 +2535,9 @@
   priority integer(2) NOT NULL DEFAULT 3,                     -- priority
   completed integer(14) DEFAULT NULL,                -- date of the completation if it is null it is not yet completed
   deleted integer(14) DEFAULT NULL,                  -- date of the deleteation it it is null it is not deleted
-  status char(1) DEFAULT NULL,                       -- null := waiting, 
-                                                     -- o := open / in progress, 
-                                                     -- c := completed -> (percentage = 100) 
+  status char(1) DEFAULT NULL,                       -- null := waiting,
+                                                     -- o := open / in progress,
+                                                     -- c := completed -> (percentage = 100)
   percentage int(4) DEFAULT NULL,
   accepted_creator char(1) DEFAULT NULL,             -- y - yes, n - no, null - waiting
   accepted_user char(1) DEFAULT NULL,                -- y - yes, n - no, null - waiting
@@ -3844,13 +2544,6 @@
   PRIMARY KEY (belongs_to, task_version)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
-
-#
-# Table structure for table tiki_user_tasks
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jan 25, 2005 by sir-b & moresun
-#
 DROP TABLE IF EXISTS tiki_user_tasks;
 CREATE TABLE tiki_user_tasks (
   taskId integer(14) NOT NULL auto_increment,        -- task id
@@ -3858,7 +2551,7 @@
   user varchar(200) NOT NULL DEFAULT '',              -- task user
   creator varchar(200) NOT NULL,                     -- username of creator
   public_for_group varchar(30) DEFAULT NULL,         -- this group can also view the task, if it is null it is not public
-  rights_by_creator char(1) DEFAULT NULL,            -- null the user can delete the task, 
+  rights_by_creator char(1) DEFAULT NULL,            -- null the user can delete the task,
   created integer(14) NOT NULL,                      -- date of the creation
   status char(1) default NULL,
   priority int(2) default NULL,
@@ -3868,15 +2561,6 @@
   UNIQUE(creator, created)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
-# --------------------------------------------------------
-
-#
-# Table structure for table tiki_user_votings
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 11, 2003 at 11:55 PM
-#
-
 DROP TABLE IF EXISTS tiki_user_votings;
 CREATE TABLE tiki_user_votings (
   user varchar(200) NOT NULL default '',
@@ -3884,15 +2568,7 @@
   optionId int(10) NOT NULL default 0,
   PRIMARY KEY (`user`(100),id(100))
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_user_watches
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 08:07 AM
-#
-
 DROP TABLE IF EXISTS tiki_user_watches;
 CREATE TABLE tiki_user_watches (
   watchId int(12) NOT NULL auto_increment,
@@ -3906,15 +2582,7 @@
   KEY watchId (watchId),
   PRIMARY KEY (`user`(50),event,object(100),email(50))
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_userfiles
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_userfiles;
 CREATE TABLE tiki_userfiles (
   user varchar(200) NOT NULL default '',
@@ -3930,15 +2598,7 @@
   created int(14) default NULL,
   PRIMARY KEY (fileId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_userpoints
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 11, 2003 at 05:47 AM
-#
-
 DROP TABLE IF EXISTS tiki_userpoints;
 CREATE TABLE tiki_userpoints (
   user varchar(200) NOT NULL default '',
@@ -3945,15 +2605,7 @@
   points decimal(8,2) default NULL,
   voted int(8) default NULL
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_users
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_users;
 CREATE TABLE tiki_users (
   user varchar(200) NOT NULL default '',
@@ -3962,15 +2614,7 @@
   lastLogin int(14) default NULL,
   PRIMARY KEY (user)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_webmail_contacts
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_webmail_contacts;
 CREATE TABLE tiki_webmail_contacts (
   contactId int(12) NOT NULL auto_increment,
@@ -3981,7 +2625,6 @@
   user varchar(200) NOT NULL default '',
   PRIMARY KEY (contactId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
 DROP TABLE IF EXISTS tiki_webmail_contacts_groups;
 CREATE TABLE tiki_webmail_contacts_groups (
@@ -3989,15 +2632,7 @@
   groupName varchar(255) NOT NULL,
   PRIMARY KEY (contactId,groupName(200))
 ) ENGINE=MyISAM ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_webmail_messages
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_webmail_messages;
 CREATE TABLE tiki_webmail_messages (
   accountId int(12) NOT NULL default '0',
@@ -4008,15 +2643,7 @@
   isFlagged char(1) default NULL,
   PRIMARY KEY (accountId,mailId)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_wiki_attachments
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_wiki_attachments;
 CREATE TABLE tiki_wiki_attachments (
   attId int(12) NOT NULL auto_increment,
@@ -4032,27 +2659,12 @@
   comment varchar(250) default NULL,
   PRIMARY KEY (attId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
 
-#
-# Table structure for table tiki_zones
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 07:42 PM
-#
-
 DROP TABLE IF EXISTS tiki_zones;
 CREATE TABLE tiki_zones (
   zone varchar(40) NOT NULL default '',
   PRIMARY KEY (zone)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
-#
-# Table structure for table tiki_download
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Apr 15 2004 at 07:42 PM
-#
 
 DROP TABLE IF EXISTS tiki_download;
 CREATE TABLE tiki_download (
@@ -4068,15 +2680,7 @@
   KEY type (type),
   KEY date (date)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table users_grouppermissions
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 11, 2003 at 07:22 AM
-#
-
 DROP TABLE IF EXISTS users_grouppermissions;
 CREATE TABLE users_grouppermissions (
   groupName varchar(255) NOT NULL default '',
@@ -4084,16 +2688,9 @@
   value char(1) default '',
   PRIMARY KEY (groupName(30),permName)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-insert into users_grouppermissions (groupName,permName) values('Anonymous','tiki_p_view');
 
-#
-# Table structure for table users_groups
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 03, 2003 at 08:57 PM
-#
+INSERT INTO users_grouppermissions (groupName,permName) VALUES('Anonymous','tiki_p_view');
 
 DROP TABLE IF EXISTS users_groups;
 CREATE TABLE users_groups (
@@ -4108,18 +2705,10 @@
   registrationUsersFieldIds text,
   userChoice char(1) default NULL,
   groupDefCat int(12) default 0,
-  groupTheme varchar(255) default '',  
+  groupTheme varchar(255) default '',
   PRIMARY KEY (groupName(30))
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table users_objectpermissions
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 07:20 AM
-#
-
 DROP TABLE IF EXISTS users_objectpermissions;
 CREATE TABLE users_objectpermissions (
   groupName varchar(255) NOT NULL default '',
@@ -4128,15 +2717,7 @@
   objectId varchar(32) NOT NULL default '',
   PRIMARY KEY (objectId, objectType, groupName(30),permName)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
 
-#
-# Table structure for table users_permissions
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 11, 2003 at 07:22 AM
-#
-
 DROP TABLE IF EXISTS users_permissions;
 CREATE TABLE users_permissions (
   permName varchar(40) NOT NULL default '',
@@ -4147,10 +2728,7 @@
   PRIMARY KEY (permName),
   KEY type (type)
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
-# 
 
-
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_calendar', 'Can create/admin calendars', 'admin', 'calendar', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_add_events', 'Can add events in the calendar', 'registered', 'calendar');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_change_events', 'Can change events in the calendar', 'registered', 'calendar');
@@ -4408,15 +2986,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_map_view_mapfiles', 'Can view contents of mapfiles', 'registered', 'maps');
 
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_webmail', 'Can use webmail', 'registered', 'webmail');
-# --------------------------------------------------------
 
-#
-# Table structure for table users_usergroups
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 12, 2003 at 09:31 PM
-#
-
 DROP TABLE IF EXISTS users_usergroups;
 CREATE TABLE users_usergroups (
   userId int(8) NOT NULL default '0',
@@ -4423,19 +2993,11 @@
   groupName varchar(255) NOT NULL default '',
   PRIMARY KEY (userId,groupName(30))
 ) ENGINE=MyISAM;
-# --------------------------------------------------------
+
 INSERT INTO users_groups (groupName,groupDesc) VALUES ('Anonymous','Public users not logged');
 INSERT INTO users_groups (groupName,groupDesc) VALUES ('Registered','Users logged into the system');
 INSERT INTO users_groups (groupName,groupDesc) VALUES ('Admins','Administrator and accounts managers.');
-# --------------------------------------------------------
 
-#
-# Table structure for table users_users
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 13, 2003 at 01:07 AM
-#
-
 DROP TABLE IF EXISTS users_users;
 CREATE TABLE users_users (
   userId int(8) NOT NULL auto_increment,
@@ -4469,7 +3031,7 @@
   KEY registrationDate (registrationDate),
   KEY openid_url (openid_url)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
-# --------------------------------------------------------
+
 ### Administrator account
 INSERT INTO users_users(email,login,password,hash) VALUES ('','admin','admin',md5('adminadmin'));
 UPDATE users_users set currentLogin=lastLogin, registrationDate=lastLogin;
@@ -4476,12 +3038,7 @@
 INSERT INTO tiki_user_preferences (user,prefName,value) VALUES ('admin','realName','System Administrator');
 INSERT INTO users_usergroups (userId, groupName) VALUES(1,'Admins');
 INSERT INTO users_grouppermissions (groupName, permName) VALUES ('Admins','tiki_p_admin');
-# --------------------------------------------------------
-# 
 
-#
-# Table structure for table 'tiki_integrator_reps'
-#
 DROP TABLE IF EXISTS tiki_integrator_reps;
 CREATE TABLE tiki_integrator_reps (
   repID int(11) NOT NULL auto_increment,
@@ -4496,14 +3053,8 @@
   PRIMARY KEY (repID)
 ) ENGINE=MyISAM;
 
-#
-# Dumping data for table 'tiki_integrator_reps'
-#
 INSERT INTO tiki_integrator_reps VALUES ('1','Doxygened (1.3.4) Documentation','','index.html','doxygen.css','n','y','0','Use this repository as rule source for all your repositories based on doxygened docs. To setup yours just add new repository and copy rules from this repository :)');
 
-#
-# Table structure for table 'tiki_integrator_rules'
-#
 DROP TABLE IF EXISTS tiki_integrator_rules;
 CREATE TABLE tiki_integrator_rules (
   ruleID int(11) NOT NULL auto_increment,
@@ -4520,16 +3071,10 @@
   KEY repID (repID)
 ) ENGINE=MyISAM;
 
-#
-# Dumping data for table 'tiki_integrator_rules'
-#
 INSERT INTO tiki_integrator_rules VALUES ('1','1','1','.*<body[^>]*?>(.*?)</body.*','\1','y','n','i','y','Extract code between <body> and </body> tags');
 INSERT INTO tiki_integrator_rules VALUES ('2','1','2','img src=(\"|\')(?!http://)','img src=\1{path}/','y','n','i','y','Fix image paths');
 INSERT INTO tiki_integrator_rules VALUES ('3','1','3','href=(\"|\')(?!(#|(http|ftp)://))','href=\1tiki-integrator.php?repID={repID}&file=','y','n','i','y','Replace internal links to integrator. Don\'t touch an external link.');
 
-#
-# Table structures for table 'tiki_quicktags'
-# 
 DROP TABLE IF EXISTS tiki_quicktags;
 CREATE TABLE tiki_quicktags (
   tagId int(4) unsigned NOT NULL auto_increment,
@@ -4718,7 +3263,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Email Address','[mailto:text|text]','pics/icons/email.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Deleted','--text--','pics/icons/text_strikethrough.png','forums');
 
-#translated objects table
+# Translated objects table
 DROP TABLE IF EXISTS tiki_translated_objects;
 CREATE TABLE tiki_translated_objects (
   traId int(14) NOT NULL auto_increment,
@@ -4729,11 +3274,6 @@
   KEY traId ( traId )
 ) ENGINE=MyISAM AUTO_INCREMENT=1;
 
-
-#
-# Community tables begin
-#
-
 DROP TABLE IF EXISTS tiki_friends;
 CREATE TABLE tiki_friends (
   user varchar(200) NOT NULL default '',
@@ -4757,7 +3297,6 @@
   PRIMARY KEY (event)
 ) ENGINE=MyISAM;
 
-
 INSERT INTO tiki_score (event, score, expiration) VALUES ('login',1,0);
 INSERT INTO tiki_score (event, score, expiration) VALUES ('login_remain',2,60);
 INSERT INTO tiki_score (event, score, expiration) VALUES ('profile_fill',10,0);
@@ -4799,18 +3338,6 @@
   KEY user (user,event_id,expire)
 ) ENGINE=MyISAM;
 
-
-#
-# Community tables end
-#
-
-#
-# Table structure for table tiki_file_handlers
-#
-# Creation: Nov 02, 2004 at 05:59 PM
-# Last update: Nov 02, 2004 at 05:59 PM
-#
-
 DROP TABLE IF EXISTS tiki_file_handlers;
 CREATE TABLE tiki_file_handlers (
 	mime_type varchar(64) default NULL,
@@ -4817,13 +3344,6 @@
 	cmd varchar(238) default NULL
 ) ENGINE=MyISAM;
 
-#
-# Table structure for table tiki_stats
-#
-# Creation: Aug 04, 2005 at 05:59 PM
-# Last update: Aug 04, 2005 at 05:59 PM
-#
-
 DROP TABLE IF EXISTS tiki_stats;
 CREATE TABLE tiki_stats (
   object varchar(255) NOT NULL default '',
@@ -4833,13 +3353,6 @@
   PRIMARY KEY (object(200),type,day)
 ) ENGINE=MyISAM;
 
-#
-# Table structure for table tiki_events
-#
-# Creation: Aug 26, 2005 at 06:59 AM - mdavey
-# Last update: Sep 31, 2005 at 12:29 PM - mdavey
-#
-
 DROP TABLE IF EXISTS tiki_events;
 CREATE TABLE tiki_events (
   callback_type int(1) NOT NULL default '3',
@@ -4857,13 +3370,6 @@
 INSERT IGNORE INTO tiki_events(callback_type,`order`,event,file,object,method) VALUES ('5', '25', 'user_registers', 'lib/registration/registrationlib.php', 'registrationlib', 'callback_tikiwiki_send_email');
 INSERT IGNORE INTO tiki_events(callback_type,`order`,event,file,object,method) VALUES ('5', '30', 'user_registers', 'lib/registration/registrationlib.php', 'registrationlib', 'callback_tikimail_user_registers');
 
-#
-# Table structure for table tiki_registration_fields
-#
-# Creation: Aug 31, 2005 at 12:57 PM - mdavey
-# Last update: Aug 31, 2005 at 12:57 PM - mdavey
-# 
-
 DROP TABLE IF EXISTS tiki_registration_fields;
 CREATE TABLE tiki_registration_fields (
   id int(11) NOT NULL auto_increment,
@@ -4884,6 +3390,7 @@
 PRIMARY KEY (action, objectType),
 KEY (id)
 ) ENGINE=MyISAM;
+
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Created', 'wiki page', 'y');
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Updated', 'wiki page', 'y');
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Removed', 'wiki page', 'y');
@@ -4920,15 +3427,7 @@
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Updated', 'blog', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Removed', 'blog', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Removed', 'file', 'n');
-# --------------------------------------------------------
 
-
-# Table structure for folksonomy tables
-#
-# Creation: Out 16, 2005 - batawata
-# Last update: Out 16, 2005 - batawata
-# 
-
 DROP TABLE IF EXISTS tiki_freetags;
 CREATE TABLE tiki_freetags (
   tagId int(10) unsigned NOT NULL auto_increment,
@@ -4950,7 +3449,6 @@
   KEY (objectId)
 ) ENGINE=MyISAM;
 
-
 DROP TABLE IF EXISTS tiki_contributions;
 CREATE TABLE tiki_contributions (
   contributionId int(12) NOT NULL auto_increment,
@@ -5031,7 +3529,7 @@
 	`value` VARCHAR(50) NOT NULL,
 	`named` ENUM('y','n') NOT NULL,
 	`creation_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
-	PRIMARY KEY( `domain`, `profile`, `object` ),
+	PRIMARY KEY ( `domain`, `profile`, `object` ),
 	INDEX(`named`)
 );
 
@@ -5050,5 +3548,5 @@
   `keyword` varchar(20) default NULL,
   `feature_count` mediumint(9) NOT NULL default '0',
   `feature_path` varchar(20) NOT NULL default '0',
-  PRIMARY KEY  (`feature_id`)
+  PRIMARY KEY (`feature_id`)
 ) ENGINE=MyISAM AUTO_INCREMENT=1;

------------------------------------------------------------------------
r14433 | sylvieg | 2008-08-20 13:31:23 -0400 (qua, 20 ago 2008) | 1 line

please commit the modifs that are asked on dev list

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 14432)
+++ tiki.sql	(revision 14433)
@@ -5051,4 +5051,4 @@
   `feature_count` mediumint(9) NOT NULL default '0',
   `feature_path` varchar(20) NOT NULL default '0',
   PRIMARY KEY  (`feature_id`)
-) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=0 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1;

------------------------------------------------------------------------
r14326 | lphuberdeau | 2008-08-17 11:25:08 -0400 (dom, 17 ago 2008) | 1 line

[MOD] Making structures optional

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 14325)
+++ tiki.sql	(revision 14326)
@@ -2114,7 +2114,7 @@
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (44,42,'o','Multiple Print','tiki-print_pages.php',235,'feature_wiki,feature_wiki_multiprint','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (45,42,'o','Send pages','tiki-send_objects.php',240,'feature_wiki,feature_comm','tiki_p_view,tiki_p_send_pages','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (46,42,'o','Received pages','tiki-received_pages.php',245,'feature_wiki,feature_comm','tiki_p_view,tiki_p_admin_received_pages','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (47,42,'o','Structures','tiki-admin_structures.php',250,'feature_wiki','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (47,42,'o','Structures','tiki-admin_structures.php',250,'feature_wiki_structure','tiki_p_view','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (48,42,'s','Image Galleries','tiki-galleries.php',300,'feature_galleries','tiki_p_view_image_gallery','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (49,42,'o','Galleries','tiki-galleries.php',305,'feature_galleries','tiki_p_list_image_galleries','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (50,42,'o','Rankings','tiki-galleries_rankings.php',310,'feature_galleries,feature_gal_rankings','tiki_p_list_image_galleries','',0);

------------------------------------------------------------------------
r14291 | princessxine | 2008-08-16 15:17:26 -0400 (sÃ¡b, 16 ago 2008) | 1 line

It's.. Magic! Data-driven administration.  Data will surely follow..

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 14290)
+++ tiki.sql	(revision 14291)
@@ -5034,3 +5034,21 @@
 	PRIMARY KEY( `domain`, `profile`, `object` ),
 	INDEX(`named`)
 );
+
+DROP TABLE IF EXISTS `tiki_feature`;
+CREATE TABLE `tiki_feature` (
+  `feature_id` mediumint(9) NOT NULL auto_increment,
+  `feature_name` varchar(150) NOT NULL,
+  `parent_id` mediumint(9) NOT NULL,
+  `status` varchar(12) NOT NULL default 'active',
+  `setting_name` varchar(50) default NULL,
+  `feature_type` varchar(20) NOT NULL default 'feature',
+  `template` varchar(50) default NULL,
+  `permission` varchar(50) default NULL,
+  `ordinal` mediumint(9) NOT NULL default '1',
+  `depends_on` mediumint(9) default NULL,
+  `keyword` varchar(20) default NULL,
+  `feature_count` mediumint(9) NOT NULL default '0',
+  `feature_path` varchar(20) NOT NULL default '0',
+  PRIMARY KEY  (`feature_id`)
+) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=0 ;

------------------------------------------------------------------------
r14241 | sept_7 | 2008-08-14 08:27:21 -0400 (qui, 14 ago 2008) | 3 lines

[FIX] : rename tiki-file_galleries.php call site to tiki-list_file_gallery.php 
				and delete obsolete file tiki-file_galleries.php


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 14240)
+++ tiki.sql	(revision 14241)
@@ -2150,8 +2150,8 @@
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (80,42,'o','Admin directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_admin_directory_cats','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (81,42,'o','Admin directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_admin_directory_sites','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (82,42,'o','Admin directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_validate_links','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (83,42,'s','File Galleries','tiki-file_galleries.php',600,'feature_file_galleries','tiki_p_view_file_gallery','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (84,42,'o','List galleries','tiki-file_galleries.php',605,'feature_file_galleries','tiki_p_list_file_galleries','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (83,42,'s','File Galleries','tiki-list_file_gallery.php',600,'feature_file_galleries','tiki_p_view_file_gallery','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (84,42,'o','List galleries','tiki-list_file_gallery.php',605,'feature_file_galleries','tiki_p_list_file_galleries','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (85,42,'o','Rankings','tiki-file_galleries_rankings.php',610,'feature_file_galleries,feature_file_galleries_rankings','tiki_p_list_file_galleries','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (86,42,'o','Upload file','tiki-upload_file.php',615,'feature_file_galleries','tiki_p_view_file_gallery,tiki_p_upload_files','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (87,42,'s','FAQs','tiki-list_faqs.php',650,'feature_faqs','tiki_p_view_faqs','',0);

------------------------------------------------------------------------
r14239 | pkdille | 2008-08-14 05:56:03 -0400 (qui, 14 ago 2008) | 1 line

[KIL] score: delete old admin score files which are now called tiki-admin-include_score (in tiki-admin_score.php there was only a redirection). Change also menu items.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 14238)
+++ tiki.sql	(revision 14239)
@@ -2223,7 +2223,7 @@
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (157,42,'o','Referer stats','tiki-referer_stats.php',1195,'feature_referer_stats','tiki_p_view_referer_stats','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (158,42,'o','Integrator','tiki-admin_integrator.php',1205,'feature_integrator','tiki_p_admin_integrator','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (159,42,'o','phpinfo','tiki-phpinfo.php',1215,'','tiki_p_admin','',0);
-INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (161,42,'o','Score','tiki-admin_score.php',1235,'feature_score','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (161,42,'o','Score','tiki-admin_include_score.php',1235,'feature_score','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (162,42,'o','Admin mods','tiki-mods.php',1240,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (163,42,'o','Tiki Logs','tiki-syslog.php',1245,'','tiki_p_admin','',0);
 INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (164,42,'o','Security Admin','tiki-admin_security.php',1250,'','tiki_p_admin','',0);

------------------------------------------------------------------------
r14071 | sylvieg | 2008-08-05 11:14:53 -0400 (ter, 05 ago 2008) | 1 line

[MOD]quicktags: the streike/deleted text quicktags

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 14070)
+++ tiki.sql	(revision 14071)
@@ -4563,6 +4563,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('list bullets', '*text', 'pics/icons/text_list_bullets.png', 'wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('list numbers', '#text', 'pics/icons/text_list_numbers.png', 'wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Email Address','[mailto:text|text]','pics/icons/email.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Deleted','--text--','pics/icons/text_strikethrough.png','wiki');
 
 # maps
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New wms Metadata','METADATA\r\n		\"wms_name\" \"myname\"\r\n 	"wms_srs" "EPSG:4326"\r\n 	"wms_server_version" " "\r\n 	"wms_layers" "mylayers"\r\n 	"wms_request" "myrequest"\r\n 	"wms_format" " "\r\n 	"wms_time" " "\r\n END', 'pics/icons/tag_blue_add.png','maps');
@@ -4590,6 +4591,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','newsletters');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','newsletters');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','newsletters');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Deleted','--text--','pics/icons/text_strikethrough.png','newsletters');
 
 # trackers
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','trackers');
@@ -4610,6 +4612,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Email Address','[mailto:text|text]','pics/icons/email.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Deleted','--text--','pics/icons/text_strikethrough.png','trackers');
 
 # blogs
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','blogs');
@@ -4630,6 +4633,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Email Address','[mailto:text|text]','pics/icons/email.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Deleted','--text--','pics/icons/text_strikethrough.png','blogs');
 
 # calendar
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','calendar');
@@ -4649,6 +4653,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Deleted','--text--','pics/icons/text_strikethrough.png','calendar');
 
 # articles
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','articles');
@@ -4669,6 +4674,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Email Address','[mailto:text|text]','pics/icons/email.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Deleted','--text--','pics/icons/text_strikethrough.png','articles');
 
 # faqs
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','faqs');
@@ -4689,6 +4695,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Email Address','[mailto:text|text]','pics/icons/email.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Deleted','--text--','pics/icons/text_strikethrough.png','faqs');
 
 # forums
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','forums');
@@ -4709,6 +4716,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Email Address','[mailto:text|text]','pics/icons/email.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Deleted','--text--','pics/icons/text_strikethrough.png','forums');
 
 #translated objects table
 DROP TABLE IF EXISTS tiki_translated_objects;

------------------------------------------------------------------------
r13743 | lphuberdeau | 2008-07-18 19:06:43 -0400 (sex, 18 jul 2008) | 1 line

[MRG] Automatic merge, branches/2.0 13653 to 13737

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 13742)
+++ tiki.sql	(revision 13743)
@@ -2268,6 +2268,7 @@
   name varchar(200) NOT NULL default '',
   description text,
   type char(1) default NULL,
+  icon varchar(200) default NULL,
   PRIMARY KEY (menuId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------

------------------------------------------------------------------------
r13628 | lphuberdeau | 2008-07-13 10:36:41 -0400 (dom, 13 jul 2008) | 1 line

[MRG] Automatic merge, branches/1.10 13490 to 13525, branches/2.0 13525 to 13621

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 13627)
+++ tiki.sql	(revision 13628)
@@ -33,7 +33,7 @@
   lastModif int(14) default NULL,
   description text,
   expirationTime int(6) unsigned NOT NULL default '0',
-  PRIMARY KEY  (activityId)
+  PRIMARY KEY (activityId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -48,7 +48,7 @@
 CREATE TABLE galaxia_activity_roles (
   activityId int(14) NOT NULL default '0',
   roleId int(14) NOT NULL default '0',
-  PRIMARY KEY  (activityId,roleId)
+  PRIMARY KEY (activityId,roleId)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -67,7 +67,7 @@
   ended int(14) NOT NULL default '0',
   user varchar(200) default '',
   status enum('running','completed') default NULL,
-  PRIMARY KEY  (instanceId,activityId)
+  PRIMARY KEY (instanceId,activityId)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -89,7 +89,7 @@
   comment text,
   activity varchar(80) default NULL,
   timestamp int(14) default NULL,
-  PRIMARY KEY  (cId)
+  PRIMARY KEY (cId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -112,7 +112,7 @@
   ended int(14) default NULL,
   status enum('active','exception','aborted','completed') default NULL,
   properties longblob,
-  PRIMARY KEY  (instanceId)
+  PRIMARY KEY (instanceId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -133,7 +133,7 @@
   description text,
   lastModif int(14) default NULL,
   normalized_name varchar(80) default NULL,
-  PRIMARY KEY  (pId)
+  PRIMARY KEY (pId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -151,7 +151,7 @@
   lastModif int(14) default NULL,
   name varchar(80) default NULL,
   description text,
-  PRIMARY KEY  (roleId)
+  PRIMARY KEY (roleId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -167,7 +167,7 @@
   pId int(14) NOT NULL default '0',
   actFromId int(14) NOT NULL default '0',
   actToId int(14) NOT NULL default '0',
-  PRIMARY KEY  (actFromId,actToId)
+  PRIMARY KEY (actFromId,actToId)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -183,7 +183,7 @@
   pId int(14) NOT NULL default '0',
   roleId int(14) NOT NULL auto_increment,
   user varchar(200) NOT NULL default '',
-  PRIMARY KEY  (roleId,user)
+  PRIMARY KEY (roleId,user)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -204,7 +204,7 @@
   started int(14) default NULL,
   ended int(14) default NULL,
   user varchar(200) default '',
-  PRIMARY KEY  (itemId)
+  PRIMARY KEY (itemId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -232,7 +232,7 @@
   isReplied char(1) default NULL,
   isFlagged char(1) default NULL,
   priority int(2) default NULL,
-  PRIMARY KEY  (msgId),
+  PRIMARY KEY (msgId),
   KEY userIsRead (user, isRead)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
@@ -262,7 +262,7 @@
   isReplied char(1) default NULL,
   isFlagged char(1) default NULL,
   priority int(2) default NULL,
-  PRIMARY KEY  (msgId)
+  PRIMARY KEY (msgId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -291,7 +291,7 @@
   isReplied char(1) default NULL,
   isFlagged char(1) default NULL,
   priority int(2) default NULL,
-  PRIMARY KEY  (msgId)
+  PRIMARY KEY (msgId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -301,7 +301,7 @@
   expiry int(11) unsigned NOT NULL,
   expireref varchar(64),
   data text NOT NULL,
-  PRIMARY KEY  (sesskey),
+  PRIMARY KEY (sesskey),
   KEY expiry (expiry)
 ) ENGINE=MyISAM;
 
@@ -323,7 +323,7 @@
   ip varchar(15) default NULL,
   comment varchar(200) default NULL,
   categId int(12) NOT NULL default '0',
-  PRIMARY KEY  (actionId)
+  PRIMARY KEY (actionId)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_actionlog_params;
@@ -378,12 +378,12 @@
   type varchar(50) default NULL,
   rating decimal(3,2) default NULL,
   isfloat char(1) default NULL,
-  PRIMARY KEY  (articleId),
+  PRIMARY KEY (articleId),
   KEY title (title),
   KEY heading (heading(255)),
   KEY body (body(255)),
+  KEY nbreads (nbreads),
   KEY author (author(32)),
-  KEY nbreads (nbreads),
   KEY topicId (topicId),
   KEY publishDate (publishDate),
   KEY expireDate (expireDate),
@@ -414,7 +414,7 @@
   show_lang varchar(1) default 'n',
   creator_edit varchar(1) default NULL,
   comment_can_rate_article char(1) default NULL,
-  PRIMARY KEY  (type),
+  PRIMARY KEY (type),
   KEY show_pre_publ (show_pre_publ),
   KEY show_post_expire (show_post_expire)
 ) ENGINE=MyISAM ;
@@ -462,7 +462,7 @@
   impressions int(8) default NULL,
   clicks int(8) default NULL,
   zone varchar(40) default NULL,
-  PRIMARY KEY  (bannerId)
+  PRIMARY KEY (bannerId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -488,7 +488,7 @@
   use_dates char(1) default NULL,
   created int(14) default NULL,
   message text,
-  PRIMARY KEY  (banId)
+  PRIMARY KEY (banId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -503,7 +503,7 @@
 CREATE TABLE tiki_banning_sections (
   banId int(12) NOT NULL default '0',
   section varchar(100) NOT NULL default '',
-  PRIMARY KEY  (banId,section)
+  PRIMARY KEY (banId,section)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -519,7 +519,7 @@
   blogId int(8) NOT NULL default '0',
   day int(14) NOT NULL default '0',
   posts int(8) default NULL,
-  PRIMARY KEY  (blogId,day)
+  PRIMARY KEY (blogId,day)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -543,7 +543,7 @@
   trackbacks_from text,
   title varchar(255) default NULL,
   priv varchar(1) default NULL,
-  PRIMARY KEY  (postId),
+  PRIMARY KEY (postId),
   KEY data (data(255)),
   KEY blogId (blogId),
   KEY created (created),
@@ -566,7 +566,7 @@
   filetype varchar(80) default NULL,
   filesize int(14) default NULL,
   data longblob,
-  PRIMARY KEY  (imgId)
+  PRIMARY KEY (imgId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -598,7 +598,7 @@
   add_poster char(1) default NULL,
   allow_comments char(1) default NULL,
   show_avatar char(1) default NULL,
-  PRIMARY KEY  (blogId),
+  PRIMARY KEY (blogId),
   KEY title (title),
   KEY description (description(255)),
   KEY hits (hits),
@@ -618,7 +618,7 @@
   calcatId int(11) NOT NULL auto_increment,
   calendarId int(14) NOT NULL default '0',
   name varchar(255) NOT NULL default '',
-  PRIMARY KEY  (calcatId),
+  PRIMARY KEY (calcatId),
   UNIQUE KEY catname (calendarId,name(16))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
@@ -648,7 +648,7 @@
   user varchar(200) default '',
   created int(14) NOT NULL default '0',
   lastmodif int(14) NOT NULL default '0',
-  PRIMARY KEY  (calitemId),
+  PRIMARY KEY (calitemId),
   KEY calendarId (calendarId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
@@ -666,7 +666,7 @@
   calendarId int(14) NOT NULL default '0',
   name varchar(255) NOT NULL default '',
   description blob,
-  PRIMARY KEY  (callocId),
+  PRIMARY KEY (callocId),
   UNIQUE KEY locname (calendarId,name(16))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
@@ -683,7 +683,7 @@
   calitemId int(14) NOT NULL default '0',
   username varchar(200) NOT NULL default '',
   role enum('0','1','2','3','6') NOT NULL default '0',
-  PRIMARY KEY  (calitemId,username(16),role)
+  PRIMARY KEY (calitemId,username(16),role)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -709,7 +709,7 @@
   created int(14) NOT NULL default '0',
   lastmodif int(14) NOT NULL default '0',
   personal enum ('n', 'y') NOT NULL default 'n',
-  PRIMARY KEY  (calendarId)
+  PRIMARY KEY (calendarId)
 ) ENGINE=MyISAM ;
 # --------------------------------------------------------
 
@@ -735,7 +735,7 @@
   description varchar(250) default NULL,
   parentId int(12) default NULL,
   hits int(8) default NULL,
-  PRIMARY KEY  (categId)
+  PRIMARY KEY (categId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -756,7 +756,7 @@
   name varchar(200) default NULL,
   href varchar(200) default NULL,
   hits int(8) default NULL,
-  PRIMARY KEY  (objectId),
+  PRIMARY KEY (objectId),
   KEY (type, objectId),
   KEY (itemId, type)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -768,7 +768,7 @@
 DROP TABLE IF EXISTS `tiki_categorized_objects`;
 CREATE TABLE `tiki_categorized_objects` (
   `catObjectId` int(11) NOT NULL default '0',
-  PRIMARY KEY  (`catObjectId`)
+  PRIMARY KEY (`catObjectId`)
 ) ENGINE=MyISAM ;
 
 
@@ -783,7 +783,7 @@
 CREATE TABLE tiki_category_objects (
   catObjectId int(12) NOT NULL default '0',
   categId int(12) NOT NULL default '0',
-  PRIMARY KEY  (catObjectId,categId)
+  PRIMARY KEY (catObjectId,categId)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -798,7 +798,7 @@
 CREATE TABLE tiki_object_ratings (
   catObjectId int(12) NOT NULL default '0',
   pollId int(12) NOT NULL default '0',
-  PRIMARY KEY  (catObjectId,pollId)
+  PRIMARY KEY (catObjectId,pollId)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -813,7 +813,7 @@
 CREATE TABLE tiki_category_sites (
   categId int(10) NOT NULL default '0',
   siteId int(14) NOT NULL default '0',
-  PRIMARY KEY  (categId,siteId)
+  PRIMARY KEY (categId,siteId)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -835,7 +835,7 @@
   votes int(14) default NULL,
   points int(14) default NULL,
   average decimal(4,2) default NULL,
-  PRIMARY KEY  (itemId)
+  PRIMARY KEY (itemId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -866,7 +866,7 @@
   lastChart int(14) default NULL,
   voteAgainAfter int(14) default NULL,
   created int(14) default NULL,
-  PRIMARY KEY  (chartId)
+  PRIMARY KEY (chartId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -887,7 +887,7 @@
   period int(14) NOT NULL default '0',
   rvotes int(14) NOT NULL default '0',
   raverage decimal(4,2) NOT NULL default '0.00',
-  PRIMARY KEY  (chartId,itemId,period)
+  PRIMARY KEY (chartId,itemId,period)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -904,7 +904,7 @@
   itemId int(14) NOT NULL default '0',
   timestamp int(14) default NULL,
   chartId int(14) default NULL,
-  PRIMARY KEY  (user,itemId)
+  PRIMARY KEY (user,itemId)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -925,7 +925,7 @@
   moderator varchar(200) default NULL,
   active char(1) default NULL,
   refresh int(6) default NULL,
-  PRIMARY KEY  (channelId)
+  PRIMARY KEY (channelId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -943,7 +943,7 @@
   data varchar(255) default NULL,
   poster varchar(200) NOT NULL default 'anonymous',
   timestamp int(14) default NULL,
-  PRIMARY KEY  (messageId)
+  PRIMARY KEY (messageId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -959,7 +959,7 @@
   nickname varchar(200) NOT NULL default '',
   channelId int(8) NOT NULL default '0',
   timestamp int(14) default NULL,
-  PRIMARY KEY  (nickname,channelId)
+  PRIMARY KEY (nickname,channelId)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -994,14 +994,14 @@
   in_reply_to varchar(128) default NULL,
   comment_rating tinyint(2) default NULL,
   archived char(1) default NULL,
-  PRIMARY KEY  (threadId),
+  PRIMARY KEY (threadId),
   UNIQUE KEY no_repeats (parentId, userName(40), title(100), commentDate, message_id(40), in_reply_to(40)),
   KEY title (title),
   KEY data (data(255)),
+  KEY hits (hits),
   KEY tc_pi (parentId),
   KEY objectType (object, objectType),
   KEY commentDate (commentDate),
-  KEY hits (hits),
   KEY threaded (message_id, in_reply_to, parentId),
   FULLTEXT KEY ft (title,data)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -1019,7 +1019,7 @@
   contentId int(8) NOT NULL auto_increment,
   description text,
   contentLabel varchar(255) NOT NULL default '',
-  PRIMARY KEY  (contentId)
+  PRIMARY KEY (contentId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -1036,7 +1036,7 @@
   content longblob,
   name varchar(200) default NULL,
   created int(14) default NULL,
-  PRIMARY KEY  (templateId)
+  PRIMARY KEY (templateId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -1051,7 +1051,7 @@
 CREATE TABLE tiki_content_templates_sections (
   templateId int(10) NOT NULL default '0',
   section varchar(250) NOT NULL default '',
-  PRIMARY KEY  (templateId,section)
+  PRIMARY KEY (templateId,section)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -1066,7 +1066,7 @@
 CREATE TABLE tiki_cookies (
   cookieId int(10) NOT NULL auto_increment,
   cookie text,
-  PRIMARY KEY  (cookieId)
+  PRIMARY KEY (cookieId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -1086,7 +1086,7 @@
   authors varchar(200) default NULL,
   copyright_order int(11) default NULL,
   userName varchar(200) default '',
-  PRIMARY KEY  (copyrightId)
+  PRIMARY KEY (copyrightId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -1110,7 +1110,7 @@
   showCount char(1) default NULL,
   editorGroup varchar(200) default NULL,
   hits int(12) default NULL,
-  PRIMARY KEY  (categId)
+  PRIMARY KEY (categId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -1125,7 +1125,7 @@
 CREATE TABLE tiki_directory_search (
   term varchar(250) NOT NULL default '',
   hits int(14) default NULL,
-  PRIMARY KEY  (term)
+  PRIMARY KEY (term)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -1149,7 +1149,7 @@
   lastModif int(14) default NULL,
   cache longblob,
   cache_timestamp int(14) default NULL,
-  PRIMARY KEY  (siteId),
+  PRIMARY KEY (siteId),
   KEY (isValid),
   KEY (url),
   FULLTEXT KEY ft (name,description)
@@ -1172,7 +1172,7 @@
   filename_pad varchar(250) default NULL,
   timestamp int(14) default NULL,
   user varchar(200) default '',
-  PRIMARY KEY  (drawId)
+  PRIMARY KEY (drawId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -1188,7 +1188,7 @@
   dsnId int(12) NOT NULL auto_increment,
   name varchar(200) NOT NULL default '',
   dsn varchar(255) default NULL,
-  PRIMARY KEY  (dsnId)
+  PRIMARY KEY (dsnId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -1197,7 +1197,7 @@
 CREATE TABLE tiki_dynamic_variables (
   name varchar(40) NOT NULL,
   data text,
-  PRIMARY KEY  (name)
+  PRIMARY KEY (name)
 );
 
 # --------------------------------------------------------
@@ -1213,7 +1213,7 @@
   extwikiId int(12) NOT NULL auto_increment,
   name varchar(200) NOT NULL default '',
   extwiki varchar(255) default NULL,
-  PRIMARY KEY  (extwikiId)
+  PRIMARY KEY (extwikiId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -1232,7 +1232,7 @@
   position int(4) default NULL,
   question text,
   answer text,
-  PRIMARY KEY  (questionId),
+  PRIMARY KEY (questionId),
   KEY faqId (faqId),
   KEY question (question(255)),
   KEY answer (answer(255)),
@@ -1257,7 +1257,7 @@
   questions int(5) default NULL,
   hits int(8) default NULL,
   canSuggest char(1) default NULL,
-  PRIMARY KEY  (faqId),
+  PRIMARY KEY (faqId),
   KEY title (title),
   KEY description (description(255)),
   KEY hits (hits),
@@ -1280,7 +1280,7 @@
   hits int(8) default NULL,
   position int(6) default NULL,
   type char(1) default NULL,
-  PRIMARY KEY  (url)
+  PRIMARY KEY (url)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 # Table structure for table tiki_file_galleries
@@ -1326,7 +1326,7 @@
   show_files char(1) default NULL,
   show_explorer char(1) default NULL,
   show_path char(1) default NULL,
-  PRIMARY KEY  (galleryId)
+  PRIMARY KEY (galleryId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -1364,13 +1364,13 @@
   lockedby varchar(200) default '',
   comment varchar(200) default NULL,
   archiveId int(14) default 0,
-  PRIMARY KEY  (fileId),
+  PRIMARY KEY (fileId),
   KEY name (name),
   KEY description (description(255)),
-  KEY hits (hits),
   KEY created (created),
   KEY archiveId (archiveId),
   KEY galleryId (galleryId),
+  KEY hits (hits),
   FULLTEXT KEY ft (name,description,search_data)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
@@ -1395,7 +1395,7 @@
   dir varchar(200) default NULL,
   created int(14) default NULL,
   path varchar(250) default NULL,
-  PRIMARY KEY  (attId),
+  PRIMARY KEY (attId),
   KEY threadId (threadId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
@@ -1413,7 +1413,7 @@
   threadId int(14) NOT NULL default '0',
   forumId int(14) default NULL,
   timestamp int(14) default NULL,
-  PRIMARY KEY  (user,threadId)
+  PRIMARY KEY (user,threadId)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -1479,11 +1479,11 @@
   topics_list_author char(1) default NULL,
   vote_threads char(1) default NULL,
   forum_last_n int(2) default 0,
-  mandatory_contribution char(1) default NULL,
   threadStyle varchar(100) default NULL,
   commentsPerPage varchar(100) default NULL,
   is_flat char(1) default NULL,
-  PRIMARY KEY  (forumId)
+  mandatory_contribution char(1) default NULL,
+  PRIMARY KEY (forumId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -1510,7 +1510,7 @@
   topic_title varchar(240) default NULL,
   summary varchar(240) default NULL,
   in_reply_to varchar(128) default NULL,
-  PRIMARY KEY  (qId)
+  PRIMARY KEY (qId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -1529,7 +1529,7 @@
   user varchar(200) default '',
   timestamp int(14) default NULL,
   reason varchar(250) default NULL,
-  PRIMARY KEY  (threadId)
+  PRIMARY KEY (threadId)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -1572,7 +1572,7 @@
   showfilesize char(1) NOT NULL default 'n',
   showfilename char(1) NOT NULL default 'n',
   defaultscale varchar(10) NOT NULL DEFAULT 'o',
-  PRIMARY KEY  (galleryId),
+  PRIMARY KEY (galleryId),
   KEY name (name),
   KEY description (description(255)),
   KEY hits (hits),
@@ -1593,7 +1593,7 @@
 CREATE TABLE tiki_galleries_scales (
   galleryId int(14) NOT NULL default '0',
   scale int(11) NOT NULL default '0',
-  PRIMARY KEY  (galleryId,scale)
+  PRIMARY KEY (galleryId,scale)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -1610,7 +1610,7 @@
   hits int(8) default NULL,
   votes int(8) default NULL,
   points int(8) default NULL,
-  PRIMARY KEY  (gameName)
+  PRIMARY KEY (gameName)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -1625,7 +1625,7 @@
 CREATE TABLE tiki_group_inclusion (
   groupName varchar(255) NOT NULL default '',
   includeGroup varchar(255) NOT NULL default '',
-  PRIMARY KEY  (groupName(30),includeGroup(30))
+  PRIMARY KEY (groupName(30),includeGroup(30))
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -1649,7 +1649,7 @@
   comment varchar(200) default NULL,
   data longblob,
   type varchar(50) default NULL,
-  PRIMARY KEY  (pageName,version),
+  PRIMARY KEY (pageName,version),
   KEY `user` (`user`),
   KEY(historyId)
 ) ENGINE=MyISAM;
@@ -1666,7 +1666,7 @@
 CREATE TABLE tiki_hotwords (
   word varchar(40) NOT NULL default '',
   url varchar(255) NOT NULL default '',
-  PRIMARY KEY  (word)
+  PRIMARY KEY (word)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -1684,7 +1684,7 @@
   refresh int(10) default NULL,
   type char(1) default NULL,
   created int(14) default NULL,
-  PRIMARY KEY  (pageName)
+  PRIMARY KEY (pageName)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -1701,7 +1701,7 @@
   zone varchar(80) NOT NULL default '',
   type char(2) default NULL,
   content text,
-  PRIMARY KEY  (pageName,zone)
+  PRIMARY KEY (pageName,zone)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -1725,7 +1725,7 @@
   user varchar(200) default '',
   hits int(14) default NULL,
   path varchar(255) default NULL,
-  PRIMARY KEY  (imageId),
+  PRIMARY KEY (imageId),
   KEY name (name),
   KEY description (description(255)),
   KEY hits (hits),
@@ -1755,7 +1755,7 @@
   filename varchar(80) default NULL,
   data longblob,
   etag varchar(32) default NULL,
-  PRIMARY KEY  (imageId,xsize,ysize,type),
+  PRIMARY KEY (imageId,xsize,ysize,type),
   KEY t_i_d_it (imageId,type)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
@@ -1772,7 +1772,7 @@
   source tinyblob NOT NULL,
   lang char(16) NOT NULL default '',
   tran tinyblob,
-  PRIMARY KEY  (source(255),lang)
+  PRIMARY KEY (source(255),lang)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -1787,7 +1787,7 @@
 CREATE TABLE tiki_languages (
   lang char(16) NOT NULL default '',
   language varchar(255) default NULL,
-  PRIMARY KEY  (lang)
+  PRIMARY KEY (lang)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 INSERT INTO tiki_languages(lang, language) VALUES('en','English');
@@ -1806,7 +1806,7 @@
   url varchar(250) default NULL,
   data longblob,
   refresh int(14) default NULL,
-  PRIMARY KEY  (cacheId),
+  PRIMARY KEY (cacheId),
   KEY url (url)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 CREATE INDEX urlindex ON tiki_link_cache (url(250));
@@ -1823,7 +1823,7 @@
 CREATE TABLE tiki_links (
   fromPage varchar(160) NOT NULL default '',
   toPage varchar(160) NOT NULL default '',
-  PRIMARY KEY  (fromPage,toPage),
+  PRIMARY KEY (fromPage,toPage),
   KEY toPage (toPage)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
@@ -1844,7 +1844,7 @@
   senderId varchar(32) default NULL,
   data text,
   timestamp int(14) default NULL,
-  PRIMARY KEY  (eventId)
+  PRIMARY KEY (eventId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -1861,7 +1861,7 @@
   msgId int(12) default NULL,
   data text,
   timestamp int(14) default NULL,
-  PRIMARY KEY  (cId)
+  PRIMARY KEY (cId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -1886,7 +1886,7 @@
   title varchar(200) default NULL,
   module int(4) default NULL,
   email varchar(250) default NULL,
-  PRIMARY KEY  (msgId)
+  PRIMARY KEY (msgId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -1901,7 +1901,7 @@
 CREATE TABLE tiki_live_support_modules (
   modId int(4) NOT NULL auto_increment,
   name varchar(90) default NULL,
-  PRIMARY KEY  (modId)
+  PRIMARY KEY (modId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 INSERT INTO tiki_live_support_modules(name) VALUES('wiki');
@@ -1933,7 +1933,7 @@
   votes int(10) default NULL,
   points int(10) default NULL,
   status_since int(14) default NULL,
-  PRIMARY KEY  (user)
+  PRIMARY KEY (user)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -1960,7 +1960,7 @@
   resolution varchar(40) default NULL,
   chat_started int(14) default NULL,
   chat_ended int(14) default NULL,
-  PRIMARY KEY  (reqId)
+  PRIMARY KEY (reqId)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -1980,7 +1980,7 @@
   logip varchar(200),
   logclient text NOT NULL,
   logtime int(14) NOT NULL,
-  PRIMARY KEY  (logId),
+  PRIMARY KEY (logId),
   KEY logtype (logtype)
 ) ENGINE=MyISAM;
 
@@ -2027,7 +2027,7 @@
   article_topicId int(4) default NULL,
   article_type varchar(50) default NULL,
   discard_after varchar(255) default NULL,
-  PRIMARY KEY  (accountId)
+  PRIMARY KEY (accountId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -2042,7 +2042,7 @@
 CREATE TABLE tiki_menu_languages (
   menuId int(8) NOT NULL auto_increment,
   language char(16) NOT NULL default '',
-  PRIMARY KEY  (menuId,language)
+  PRIMARY KEY (menuId,language)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -2065,226 +2065,194 @@
   perm varchar(255) default NULL,
   groupname varchar(255) default NULL,
   userlevel int(4) default 0,
-  PRIMARY KEY  (optionId),
+  PRIMARY KEY (optionId),
   UNIQUE KEY uniq_menu (menuId,name(30),url(50),position,section(60),perm(50),groupname(50))
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Home','./',10,'','','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Search','tiki-searchindex.php',13,'feature_search','tiki_p_search','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Contact us','tiki-contact.php',20,'feature_contact','','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Stats','tiki-stats.php',23,'feature_stats','tiki_p_view_stats','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Categories','tiki-browse_categories.php',25,'feature_categories','tiki_p_view_categories','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Freetags','tiki-browse_freetags.php',27,'feature_freetags','tiki_p_view_freetags','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Games','tiki-list_games.php',30,'feature_games','tiki_p_play_games','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Calendar','tiki-calendar.php',35,'feature_calendar','tiki_p_view_calendar','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Tiki Calendar','tiki-action_calendar.php',36,'feature_action_calendar','tiki_p_view_tiki_calendar','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Users map','tiki-gmap_usermap.php',36,'feature_gmap','','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Mobile','tiki-mobile.php',37,'feature_mobile','','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','(debug)','javascript:toggle(\'debugconsole\')',40,'feature_debug_console','tiki_p_admin','');
-
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','MyTiki','tiki-my_tiki.php',50,'feature_mytiki','','Registered');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','MyTiki home','tiki-my_tiki.php',51,'feature_mytiki','','Registered');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Preferences','tiki-user_preferences.php',55,'feature_mytiki,feature_userPreferences','','Registered');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Messages','messu-mailbox.php',60,'feature_mytiki,feature_messages','tiki_p_messages','Registered');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Tasks','tiki-user_tasks.php',65,'feature_mytiki,feature_tasks','tiki_p_tasks','Registered');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Bookmarks','tiki-user_bookmarks.php',70,'feature_mytiki,feature_user_bookmarks','tiki_p_create_bookmarks','Registered');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Modules','tiki-user_assigned_modules.php',75,'feature_mytiki,user_assigned_modules','tiki_p_configure_modules','Registered');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Newsreader','tiki-newsreader_servers.php',80,'feature_mytiki,feature_newsreader','tiki_p_newsreader','Registered');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Webmail','tiki-webmail.php',85,'feature_mytiki,feature_webmail','tiki_p_use_webmail','Registered');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Contacts','tiki-contacts.php',87,'feature_mytiki,feature_contacts','','Registered');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Notepad','tiki-notepad_list.php',90,'feature_mytiki,feature_notepad','tiki_p_notepad','Registered');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','My files','tiki-userfiles.php',95,'feature_mytiki,feature_userfiles','tiki_p_userfiles','Registered');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','User menu','tiki-usermenu.php',100,'feature_mytiki,feature_usermenu','','Registered');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Mini calendar','tiki-minical.php',105,'feature_mytiki,feature_minical','','Registered');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','My watches','tiki-user_watches.php',110,'feature_mytiki,feature_user_watches','','Registered');
-
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Workflow','tiki-g-user_processes.php',150,'feature_workflow','tiki_p_use_workflow','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','User processes','tiki-g-user_processes.php',152,'feature_workflow','tiki_p_use_workflow','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','User activities','tiki-g-user_activities.php',153,'feature_workflow','tiki_p_use_workflow','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','User instances','tiki-g-user_instances.php',154,'feature_workflow','tiki_p_use_workflow','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin processes','tiki-g-admin_processes.php',155,'feature_workflow','tiki_p_admin_workflow','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Monitor processes','tiki-g-monitor_processes.php',160,'feature_workflow','tiki_p_admin_workflow','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Monitor activities','tiki-g-monitor_activities.php',165,'feature_workflow','tiki_p_admin_workflow','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Monitor instances','tiki-g-monitor_instances.php',170,'feature_workflow','tiki_p_admin_workflow','');
-
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Community','','187','feature_friends','tiki_p_list_users','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','User list','tiki-list_users.php','188','feature_friends','tiki_p_list_users','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Friendship Network','tiki-friends.php','189','feature_friends','','');
-
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Wiki','tiki-index.php',200,'feature_wiki','tiki_p_view','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Wiki Home','tiki-index.php',202,'feature_wiki','tiki_p_view','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Last Changes','tiki-lastchanges.php',205,'feature_wiki,feature_lastChanges','tiki_p_view','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Dump','dump/new.tar',210,'feature_wiki,feature_dump','tiki_p_view','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Rankings','tiki-wiki_rankings.php',215,'feature_wiki,feature_wiki_rankings','tiki_p_view','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List pages','tiki-listpages.php',220,'feature_wiki,feature_listPages','tiki_p_view','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Orphan pages','tiki-orphan_pages.php',225,'feature_wiki,feature_listPages','tiki_p_view','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Sandbox','tiki-editpage.php?page=sandbox',230,'feature_wiki,feature_sandbox','tiki_p_view','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Multiple Print','tiki-print_pages.php',235,'feature_wiki,feature_wiki_multiprint','tiki_p_view','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Send pages','tiki-send_objects.php',240,'feature_wiki,feature_comm','tiki_p_view,tiki_p_send_pages','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Received pages','tiki-received_pages.php',245,'feature_wiki,feature_comm','tiki_p_view,tiki_p_admin_received_pages','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Structures','tiki-admin_structures.php',250,'feature_wiki','tiki_p_view','');
-
-
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Image Galleries','tiki-galleries.php',300,'feature_galleries','tiki_p_list_image_galleries','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Galleries','tiki-galleries.php',305,'feature_galleries','tiki_p_list_image_galleries','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Rankings','tiki-galleries_rankings.php',310,'feature_galleries,feature_gal_rankings','tiki_p_list_image_galleries','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Upload image','tiki-upload_image.php',315,'feature_galleries','tiki_p_upload_images','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Directory batch','tiki-batch_upload.php',318,'feature_galleries,feature_gal_batch','tiki_p_batch_upload','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','System gallery','tiki-list_gallery.php?galleryId=0',320,'feature_galleries','tiki_p_admin_galleries','');
-
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Articles','tiki-view_articles.php',350,'feature_articles','tiki_p_read_article','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Articles','tiki-view_articles.php',350,'feature_articles','tiki_p_articles_read_heading','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Articles home','tiki-view_articles.php',355,'feature_articles','tiki_p_read_article','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Articles home','tiki-view_articles.php',355,'feature_articles','tiki_p_articles_read_heading','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List articles','tiki-list_articles.php',360,'feature_articles','tiki_p_read_article','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List articles','tiki-list_articles.php',360,'feature_articles','tiki_p_articles_read_heading','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Rankings','tiki-cms_rankings.php',365,'feature_articles,feature_cms_rankings','tiki_p_read_article','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Submit article','tiki-edit_submission.php',370,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_submit_article','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','View submissions','tiki-list_submissions.php',375,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_submit_article','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','View submissions','tiki-list_submissions.php',375,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_approve_submission','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','View submissions','tiki-list_submissions.php',375,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_remove_submission','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','New article','tiki-edit_article.php',380,'feature_articles','tiki_p_read_article,tiki_p_edit_article','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Send articles','tiki-send_objects.php',385,'feature_articles,feature_comm','tiki_p_read_article,tiki_p_send_articles','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Received articles','tiki-received_articles.php',385,'feature_articles,feature_comm','tiki_p_read_article,tiki_p_admin_received_articles','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin topics','tiki-admin_topics.php',390,'feature_articles','tiki_p_articles_admin_topics','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin types','tiki-article_types.php',395,'feature_articles','tiki_p_articles_admin_types','');
-
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Blogs','tiki-list_blogs.php',450,'feature_blogs','tiki_p_read_blog','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List blogs','tiki-list_blogs.php',455,'feature_blogs','tiki_p_read_blog','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Rankings','tiki-blog_rankings.php',460,'feature_blogs,feature_blog_rankings','tiki_p_read_blog','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Create/Edit blog','tiki-edit_blog.php',465,'feature_blogs','tiki_p_read_blog,tiki_p_create_blogs','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Post','tiki-blog_post.php',470,'feature_blogs','tiki_p_read_blog,tiki_p_blog_post','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin posts','tiki-list_posts.php',475,'feature_blogs','tiki_p_read_blog,tiki_p_blog_admin','');
-
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Forums','tiki-forums.php',500,'feature_forums','tiki_p_forum_read','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List forums','tiki-forums.php',505,'feature_forums','tiki_p_forum_read','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Rankings','tiki-forum_rankings.php',510,'feature_forums,feature_forum_rankings','tiki_p_forum_read','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin forums','tiki-admin_forums.php',515,'feature_forums','tiki_p_forum_read,tiki_p_admin_forum','');
-
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Directory','tiki-directory_browse.php',550,'feature_directory','tiki_p_view_directory','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Browse directory','tiki-directory_browse.php',552,'feature_directory','tiki_p_view_directory','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Submit a new link','tiki-directory_add_site.php',555,'feature_directory','tiki_p_submit_link','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_admin_directory_cats','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_admin_directory_sites','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_validate_links','');
-
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','File Galleries','tiki-file_galleries.php',600,'feature_file_galleries','tiki_p_view_file_gallery','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List galleries','tiki-file_galleries.php',605,'feature_file_galleries','tiki_p_list_file_galleries','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Rankings','tiki-file_galleries_rankings.php',610,'feature_file_galleries,feature_file_galleries_rankings','tiki_p_list_file_galleries','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Upload file','tiki-upload_file.php',615,'feature_file_galleries','tiki_p_view_file_gallery,tiki_p_upload_files','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Directory batch','tiki-batch_upload_files.php',617,'feature_file_galleries_batch','tiki_p_batch_upload_file_dir','');
-
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','FAQs','tiki-list_faqs.php',650,'feature_faqs','tiki_p_view_faqs','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List FAQs','tiki-list_faqs.php',665,'feature_faqs','tiki_p_view_faqs','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin FAQs','tiki-list_faqs.php',660,'feature_faqs','tiki_p_admin_faqs','');
-
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Maps','tiki-map.php',700,'feature_maps','tiki_p_map_view','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','View Maps','tiki-map.php',703,'feature_maps','tiki_p_map_view','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Mapfiles','tiki-map_edit.php',705,'feature_maps','tiki_p_map_view','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Layer management','tiki-map_upload.php',710,'feature_maps','tiki_p_map_edit','');
-
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Quizzes','tiki-list_quizzes.php',750,'feature_quizzes','','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List quizzes','tiki-list_quizzes.php',755,'feature_quizzes','','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Quiz stats','tiki-quiz_stats.php',760,'feature_quizzes','tiki_p_view_quiz_stats','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin quiz','tiki-edit_quiz.php',765,'feature_quizzes','tiki_p_admin_quizzes','');
-
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','TikiSheet','tiki-sheets.php',780,'feature_sheet','tiki_p_view_sheet','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List TikiSheets','tiki-sheets.php',782,'feature_sheet','tiki_p_view_sheet','');
-
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Trackers','tiki-list_trackers.php',800,'feature_trackers','tiki_p_list_trackers','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List trackers','tiki-list_trackers.php',805,'feature_trackers','tiki_p_list_trackers','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin trackers','tiki-admin_trackers.php',810,'feature_trackers','tiki_p_admin_trackers','');
-
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Surveys','tiki-list_surveys.php',850,'feature_surveys','','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List surveys','tiki-list_surveys.php',855,'feature_surveys','','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Stats','tiki-survey_stats.php',860,'feature_surveys','tiki_p_view_survey_stats','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin surveys','tiki-admin_surveys.php',865,'feature_surveys','tiki_p_admin_surveys','');
-
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_subscribe_newsletters','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_send_newsletters','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_admin_newsletters','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Newsletters','tiki-newsletters.php',903,'feature_newsletters','tiki_p_subscribe_newsletters','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Newsletters','tiki-newsletters.php',903,'feature_newsletters','tiki_p_send_newsletters','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Newsletters','tiki-newsletters.php',903,'feature_newsletters','tiki_p_admin_newsletters','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Send newsletters','tiki-send_newsletters.php',905,'feature_newsletters','tiki_p_send_newsletters','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin newsletters','tiki-admin_newsletters.php',910,'feature_newsletters','tiki_p_admin_newsletters','');
-
-
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Charts','tiki-charts.php',1000,'feature_charts','','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Charts','tiki-charts.php',1003,'feature_charts','','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin charts','tiki-admin_charts.php',1005,'feature_charts','tiki_p_admin_charts','');
-
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_chat','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_categories','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_banners','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_templates','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_cookies','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_dynamic','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_mailin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_content_templates','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_html_pages','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_view_referer_stats','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_drawings','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_quicktags','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_shoutbox','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_live_support_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','user_is_operator','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'feature_integrator','tiki_p_admin_integrator','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_contribution','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_users','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_menu','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_clean_cache','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin home','tiki-admin.php',1051,'','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Live support','tiki-live_support_admin.php',1055,'feature_live_support','tiki_p_live_support_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Live support','tiki-live_support_admin.php',1055,'feature_live_support','user_is_operator','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Banning','tiki-admin_banning.php',1060,'feature_banning','tiki_p_admin_banning','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Calendar','tiki-admin_calendars.php',1065,'feature_calendar','tiki_p_admin_calendar','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Users','tiki-adminusers.php',1070,'','tiki_p_admin_users','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Groups','tiki-admingroups.php',1075,'','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Wiki Cache','tiki-list_cache.php',1080,'cachepages','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Modules','tiki-admin_modules.php',1085,'','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Links','tiki-admin_links.php',1090,'feature_featuredLinks','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Hotwords','tiki-admin_hotwords.php',1095,'feature_hotwords','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','RSS modules','tiki-admin_rssmodules.php',1100,'','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Menus','tiki-admin_menus.php',1105,'','tiki_p_edit_menu','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Polls','tiki-admin_polls.php',1110,'feature_polls','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Mail notifications','tiki-admin_notifications.php',1120,'','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Search stats','tiki-search_stats.php',1125,'feature_search_stats','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Theme control','tiki-theme_control.php',1130,'feature_theme_control','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','QuickTags','tiki-admin_quicktags.php',1135,'','tiki_p_admin,tiki_p_admin_quicktags','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Categories','tiki-admin_categories.php',1145,'feature_categories','tiki_p_admin_categories','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Banners','tiki-list_banners.php',1150,'feature_banners','tiki_p_admin_banners','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Edit templates','tiki-edit_templates.php',1155,'feature_edit_templates','tiki_p_edit_templates','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Drawings','tiki-admin_drawings.php',1160,'feature_drawings','tiki_p_admin_drawings','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Dynamic content','tiki-list_contents.php',1165,'feature_dynamic_content','tiki_p_admin_dynamic','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Cookies','tiki-admin_cookies.php',1170,'','tiki_p_edit_cookies','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Mail-in','tiki-admin_mailin.php',1175,'feature_mailin','tiki_p_admin_mailin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Content templates','tiki-admin_content_templates.php',1180,'','tiki_p_edit_content_templates','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','HTML pages','tiki-admin_html_pages.php',1185,'feature_html_pages','tiki_p_edit_html_pages','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Shoutbox','tiki-shoutbox.php',1190,'feature_shoutbox','tiki_p_admin_shoutbox','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Shoutbox Words','tiki-admin_shoutbox_words.php',1191,'feature_shoutbox','tiki_p_admin_shoutbox','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Referer stats','tiki-referer_stats.php',1195,'feature_referer_stats','tiki_p_view_referer_stats','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Edit languages','tiki-edit_languages.php',1200,'lang_use_db','tiki_p_edit_languages','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Integrator','tiki-admin_integrator.php',1205,'feature_integrator','tiki_p_admin_integrator','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','phpinfo','tiki-phpinfo.php',1215,'','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Tiki Cache/Sys Admin','tiki-admin_system.php',1230,'','tiki_p_clean_cache','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Score','tiki-admin_score.php',1235,'feature_score','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin mods','tiki-mods.php',1240,'','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Tiki Logs','tiki-syslog.php',1245,'','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Security Admin','tiki-admin_security.php',1250,'','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_view_actionlog','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_view_actionlog_owngroups','');
-
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_wiki_comments','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_article_comments','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_blog_comments','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_file_galleries_comments','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_image_galleries_comments','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_poll_comments','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_faq_comments','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Contribution','tiki-admin_contribution.php',1265,'feature_contribution','tiki_p_admin_contribution','');
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (1,42,'o','Home','./',10,'','','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (3,42,'o','Contact us','tiki-contact.php',20,'feature_contact','','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (4,42,'o','Stats','tiki-stats.php',23,'feature_stats','tiki_p_view_stats','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (5,42,'o','Categories','tiki-browse_categories.php',25,'feature_categories','tiki_p_view_categories','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (6,42,'o','Games','tiki-list_games.php',30,'feature_games','tiki_p_play_games','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (7,42,'o','Calendar','tiki-calendar.php',35,'feature_calendar','tiki_p_view_calendar','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (8,42,'o','Users map','tiki-gmap_usermap.php',36,'feature_gmap','','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (9,42,'o','Mobile','tiki-mobile.php',37,'feature_mobile','','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (10,42,'o','(debug)','javascript:toggle(\'debugconsole\')',40,'feature_debug_console','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (11,42,'s','MyTiki','tiki-my_tiki.php',50,'feature_mytiki','','Registered',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (12,42,'o','MyTiki home','tiki-my_tiki.php',51,'feature_mytiki','','Registered',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (13,42,'o','Preferences','tiki-user_preferences.php',55,'feature_mytiki,feature_userPreferences','','Registered',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (14,42,'o','Messages','messu-mailbox.php',60,'feature_mytiki,feature_messages','tiki_p_messages','Registered',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (15,42,'o','Tasks','tiki-user_tasks.php',65,'feature_mytiki,feature_tasks','tiki_p_tasks','Registered',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (16,42,'o','Bookmarks','tiki-user_bookmarks.php',70,'feature_mytiki,feature_user_bookmarks','tiki_p_create_bookmarks','Registered',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (17,42,'o','Modules','tiki-user_assigned_modules.php',75,'feature_mytiki,user_assigned_modules','tiki_p_configure_modules','Registered',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (18,42,'o','Newsreader','tiki-newsreader_servers.php',80,'feature_mytiki,feature_newsreader','tiki_p_newsreader','Registered',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (19,42,'o','Webmail','tiki-webmail.php',85,'feature_mytiki,feature_webmail','tiki_p_use_webmail','Registered',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (20,42,'o','Notepad','tiki-notepad_list.php',90,'feature_mytiki,feature_notepad','tiki_p_notepad','Registered',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (21,42,'o','My files','tiki-userfiles.php',95,'feature_mytiki,feature_userfiles','tiki_p_userfiles','Registered',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (22,42,'o','User menu','tiki-usermenu.php',100,'feature_mytiki,feature_usermenu','tiki_p_usermenu','Registered',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (23,42,'o','Mini calendar','tiki-minical.php',105,'feature_mytiki,feature_minical','tiki_p_minical','Registered',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (24,42,'o','My watches','tiki-user_watches.php',110,'feature_mytiki,feature_user_watches','','Registered',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (25,42,'s','Workflow','tiki-g-user_processes.php',150,'feature_workflow','tiki_p_use_workflow','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (26,42,'o','Admin processes','tiki-g-admin_processes.php',155,'feature_workflow','tiki_p_admin_workflow','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (27,42,'o','Monitor processes','tiki-g-monitor_processes.php',160,'feature_workflow','tiki_p_admin_workflow','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (28,42,'o','Monitor activities','tiki-g-monitor_activities.php',165,'feature_workflow','tiki_p_admin_workflow','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (29,42,'o','Monitor instances','tiki-g-monitor_instances.php',170,'feature_workflow','tiki_p_admin_workflow','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (30,42,'o','User processes','tiki-g-user_processes.php',175,'feature_workflow','tiki_p_use_workflow','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (31,42,'o','User activities','tiki-g-user_activities.php',180,'feature_workflow','tiki_p_use_workflow','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (32,42,'o','User instances','tiki-g-user_instances.php',185,'feature_workflow','tiki_p_use_workflow','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (33,42,'s','Community','tiki-list_users.php',187,'feature_friends','tiki_p_list_users','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (34,42,'o','User list','tiki-list_users.php',188,'feature_friends','tiki_p_list_users','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (35,42,'o','Friendship Network','tiki-friends.php',189,'feature_friends','','Registered',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (36,42,'s','Wiki','tiki-index.php',200,'feature_wiki','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (37,42,'o','Wiki Home','tiki-index.php',202,'feature_wiki','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (38,42,'o','Last Changes','tiki-lastchanges.php',205,'feature_wiki,feature_lastChanges','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (39,42,'o','Dump','dump/new.tar',210,'feature_wiki,feature_dump','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (40,42,'o','Rankings','tiki-wiki_rankings.php',215,'feature_wiki,feature_wiki_rankings','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (41,42,'o','List pages','tiki-listpages.php',220,'feature_wiki,feature_listPages','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (42,42,'o','Orphan pages','tiki-orphan_pages.php',225,'feature_wiki,feature_listPages','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (43,42,'o','Sandbox','tiki-editpage.php?page=sandbox',230,'feature_wiki,feature_sandbox','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (44,42,'o','Multiple Print','tiki-print_pages.php',235,'feature_wiki,feature_wiki_multiprint','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (45,42,'o','Send pages','tiki-send_objects.php',240,'feature_wiki,feature_comm','tiki_p_view,tiki_p_send_pages','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (46,42,'o','Received pages','tiki-received_pages.php',245,'feature_wiki,feature_comm','tiki_p_view,tiki_p_admin_received_pages','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (47,42,'o','Structures','tiki-admin_structures.php',250,'feature_wiki','tiki_p_view','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (48,42,'s','Image Galleries','tiki-galleries.php',300,'feature_galleries','tiki_p_view_image_gallery','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (49,42,'o','Galleries','tiki-galleries.php',305,'feature_galleries','tiki_p_list_image_galleries','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (50,42,'o','Rankings','tiki-galleries_rankings.php',310,'feature_galleries,feature_gal_rankings','tiki_p_list_image_galleries','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (51,42,'o','Upload image','tiki-upload_image.php',315,'feature_galleries','tiki_p_upload_images','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (52,42,'o','Directory batch','tiki-batch_upload.php',318,'feature_galleries,feature_gal_batch','tiki_p_batch_upload','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (53,42,'o','System gallery','tiki-list_gallery.php?galleryId=0',320,'feature_galleries','tiki_p_admin_galleries','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (54,42,'s','Articles','tiki-view_articles.php',350,'feature_articles','tiki_p_read_article','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (55,42,'o','Articles home','tiki-view_articles.php',355,'feature_articles','tiki_p_read_article','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (56,42,'o','List articles','tiki-list_articles.php',360,'feature_articles','tiki_p_read_article','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (57,42,'o','Rankings','tiki-cms_rankings.php',365,'feature_articles,feature_cms_rankings','tiki_p_read_article','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (58,42,'o','Submit article','tiki-edit_submission.php',370,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_submit_article','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (59,42,'o','View submissions','tiki-list_submissions.php',375,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_submit_article','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (60,42,'o','View submissions','tiki-list_submissions.php',375,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_approve_submission','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (61,42,'o','View submissions','tiki-list_submissions.php',375,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_remove_submission','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (62,42,'o','New article','tiki-edit_article.php',380,'feature_articles','tiki_p_read_article,tiki_p_edit_article','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (63,42,'o','Send articles','tiki-send_objects.php',385,'feature_articles,feature_comm','tiki_p_read_article,tiki_p_send_articles','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (64,42,'o','Received articles','tiki-received_articles.php',385,'feature_articles,feature_comm','tiki_p_read_article,tiki_p_admin_received_articles','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (196,42,'o','Admin types','tiki-article_types.php',395,'feature_articles','tiki_p_articles_admin_types','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (195,42,'o','Admin topics','tiki-admin_topics.php',390,'feature_articles','tiki_p_articles_admin_topics','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (67,42,'s','Blogs','tiki-list_blogs.php',450,'feature_blogs','tiki_p_read_blog','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (68,42,'o','List blogs','tiki-list_blogs.php',455,'feature_blogs','tiki_p_read_blog','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (69,42,'o','Rankings','tiki-blog_rankings.php',460,'feature_blogs,feature_blog_rankings','tiki_p_read_blog','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (70,42,'o','Create/Edit blog','tiki-edit_blog.php',465,'feature_blogs','tiki_p_read_blog,tiki_p_create_blogs','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (71,42,'o','Post','tiki-blog_post.php',470,'feature_blogs','tiki_p_read_blog,tiki_p_blog_post','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (72,42,'o','Admin posts','tiki-list_posts.php',475,'feature_blogs','tiki_p_read_blog,tiki_p_blog_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (73,42,'s','Forums','tiki-forums.php',500,'feature_forums','tiki_p_forum_read','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (74,42,'o','List forums','tiki-forums.php',505,'feature_forums','tiki_p_forum_read','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (75,42,'o','Rankings','tiki-forum_rankings.php',510,'feature_forums,feature_forum_rankings','tiki_p_forum_read','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (76,42,'o','Admin forums','tiki-admin_forums.php',515,'feature_forums','tiki_p_forum_read,tiki_p_admin_forum','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (77,42,'s','Directory','tiki-directory_browse.php',550,'feature_directory','tiki_p_view_directory','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (78,42,'o','Submit a new link','tiki-directory_add_site.php',555,'feature_directory','tiki_p_submit_link','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (79,42,'o','Browse directory','tiki-directory_browse.php',560,'feature_directory','tiki_p_view_directory','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (80,42,'o','Admin directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_admin_directory_cats','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (81,42,'o','Admin directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_admin_directory_sites','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (82,42,'o','Admin directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_validate_links','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (83,42,'s','File Galleries','tiki-file_galleries.php',600,'feature_file_galleries','tiki_p_view_file_gallery','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (84,42,'o','List galleries','tiki-file_galleries.php',605,'feature_file_galleries','tiki_p_list_file_galleries','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (85,42,'o','Rankings','tiki-file_galleries_rankings.php',610,'feature_file_galleries,feature_file_galleries_rankings','tiki_p_list_file_galleries','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (86,42,'o','Upload file','tiki-upload_file.php',615,'feature_file_galleries','tiki_p_view_file_gallery,tiki_p_upload_files','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (87,42,'s','FAQs','tiki-list_faqs.php',650,'feature_faqs','tiki_p_view_faqs','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (88,42,'o','List FAQs','tiki-list_faqs.php',665,'feature_faqs','tiki_p_view_faqs','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (89,42,'o','Admin FAQs','tiki-list_faqs.php',660,'feature_faqs','tiki_p_admin_faqs','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (90,42,'s','Maps','tiki-map.php',700,'feature_maps','tiki_p_map_view','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (91,42,'o','Mapfiles','tiki-map_edit.php',705,'feature_maps','tiki_p_map_view','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (92,42,'o','Layer management','tiki-map_upload.php',710,'feature_maps','tiki_p_map_edit','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (93,42,'s','Quizzes','tiki-list_quizzes.php',750,'feature_quizzes','tiki_p_take_quiz','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (94,42,'o','List quizzes','tiki-list_quizzes.php',755,'feature_quizzes','tiki_p_take_quiz','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (95,42,'o','Quiz stats','tiki-quiz_stats.php',760,'feature_quizzes','tiki_p_view_quiz_stats','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (96,42,'o','Admin quiz','tiki-edit_quiz.php',765,'feature_quizzes','tiki_p_admin_quizzes','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (97,42,'s','TikiSheet','tiki-sheets.php',780,'feature_sheet','tiki_p_view_sheet','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (98,42,'s','Trackers','tiki-list_trackers.php',800,'feature_trackers','tiki_p_view_trackers','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (99,42,'o','List trackers','tiki-list_trackers.php',805,'feature_trackers','tiki_p_view_trackers','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (100,42,'o','Admin trackers','tiki-admin_trackers.php',810,'feature_trackers','tiki_p_admin_trackers','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (101,42,'s','Surveys','tiki-list_surveys.php',850,'feature_surveys','tiki_p_take_survey','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (102,42,'o','List surveys','tiki-list_surveys.php',855,'feature_surveys','tiki_p_take_survey','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (103,42,'o','Stats','tiki-survey_stats.php',860,'feature_surveys','tiki_p_view_survey_stats','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (104,42,'o','Admin surveys','tiki-admin_surveys.php',865,'feature_surveys','tiki_p_admin_surveys','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (105,42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_subscribe_newsletters','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (106,42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_send_newsletters','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (107,42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_admin_newsletters','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (108,42,'o','Send newsletters','tiki-send_newsletters.php',905,'feature_newsletters','tiki_p_send_newsletters','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (109,42,'o','Admin newsletters','tiki-admin_newsletters.php',910,'feature_newsletters','tiki_p_admin_newsletters','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (112,42,'s','Charts','tiki-charts.php',1000,'feature_charts','tiki_p_view_chart','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (113,42,'o','Admin charts','tiki-admin_charts.php',1005,'feature_charts','tiki_p_admin_charts','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (114,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (116,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_categories','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (117,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_banners','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (118,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_templates','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (119,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_cookies','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (120,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_dynamic','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (121,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_mailin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (122,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_content_templates','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (123,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_html_pages','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (124,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_view_referer_stats','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (125,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_drawings','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (126,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_shoutbox','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (127,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_live_support_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (128,42,'r','Admin','tiki-admin.php',1050,'','user_is_operator','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (129,42,'r','Admin','tiki-admin.php',1050,'feature_integrator','tiki_p_admin_integrator','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (130,42,'o','Admin home','tiki-admin.php',1051,'','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (131,42,'o','Live support','tiki-live_support_admin.php',1055,'feature_live_support','tiki_p_live_support_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (132,42,'o','Live support','tiki-live_support_admin.php',1055,'feature_live_support','user_is_operator','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (133,42,'o','Banning','tiki-admin_banning.php',1060,'feature_banning','tiki_p_admin_banning','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (134,42,'o','Calendar','tiki-admin_calendars.php',1065,'feature_calendar','tiki_p_admin_calendar','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (135,42,'o','Users','tiki-adminusers.php',1070,'','tiki_p_admin_users','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (136,42,'o','Groups','tiki-admingroups.php',1075,'','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (189,42,'o','Wiki Cache','tiki-list_cache.php',1080,'cachepages','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (138,42,'o','Modules','tiki-admin_modules.php',1085,'','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (139,42,'o','Hotwords','tiki-admin_hotwords.php',1095,'feature_hotwords','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (140,42,'o','RSS modules','tiki-admin_rssmodules.php',1100,'','tiki_p_admin_rssmodules','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (141,42,'o','Menus','tiki-admin_menus.php',1105,'','tiki_p_edit_menu','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (142,42,'o','Polls','tiki-admin_polls.php',1110,'feature_polls','tiki_p_admin_polls','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (143,42,'o','Mail notifications','tiki-admin_notifications.php',1120,'','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (182,42,'o','Search stats','tiki-search_stats.php',1125,'feature_search_stats','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (145,42,'o','Theme control','tiki-theme_control.php',1130,'feature_theme_control','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (183,42,'o','QuickTags','tiki-admin_quicktags.php',1135,'','tiki_p_admin_quicktags','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (148,42,'o','Categories','tiki-admin_categories.php',1145,'feature_categories','tiki_p_admin_categories','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (149,42,'o','Banners','tiki-list_banners.php',1150,'feature_banners','tiki_p_admin_banners','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (150,42,'o','Edit templates','tiki-edit_templates.php',1155,'feature_edit_templates','tiki_p_edit_templates','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (151,42,'o','Drawings','tiki-admin_drawings.php',1160,'feature_drawings','tiki_p_admin_drawings','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (152,42,'o','Dynamic content','tiki-list_contents.php',1165,'feature_dynamic_content','tiki_p_admin_dynamic','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (153,42,'o','Mail-in','tiki-admin_mailin.php',1175,'feature_mailin','tiki_p_admin_mailin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (154,42,'o','HTML pages','tiki-admin_html_pages.php',1185,'feature_html_pages','tiki_p_edit_html_pages','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (155,42,'o','Shoutbox','tiki-shoutbox.php',1190,'feature_shoutbox','tiki_p_admin_shoutbox','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (156,42,'o','Shoutbox Words','tiki-admin_shoutbox_words.php',1191,'feature_shoutbox','tiki_p_admin_shoutbox','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (157,42,'o','Referer stats','tiki-referer_stats.php',1195,'feature_referer_stats','tiki_p_view_referer_stats','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (158,42,'o','Integrator','tiki-admin_integrator.php',1205,'feature_integrator','tiki_p_admin_integrator','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (159,42,'o','phpinfo','tiki-phpinfo.php',1215,'','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (161,42,'o','Score','tiki-admin_score.php',1235,'feature_score','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (162,42,'o','Admin mods','tiki-mods.php',1240,'','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (163,42,'o','Tiki Logs','tiki-syslog.php',1245,'','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (164,42,'o','Security Admin','tiki-admin_security.php',1250,'','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (165,42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (166,42,'o','Comments','tiki-list_comments.php',1260,'feature_wiki_comments','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (167,42,'o','Comments','tiki-list_comments.php',1260,'feature_article_comments','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (168,42,'o','Comments','tiki-list_comments.php',1260,'feature_blog_comments','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (169,42,'o','Comments','tiki-list_comments.php',1260,'feature_file_galleries_comments','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (170,42,'o','Comments','tiki-list_comments.php',1260,'feature_image_galleries_comments','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (171,42,'o','Comments','tiki-list_comments.php',1260,'feature_poll_comments','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (172,42,'o','Comments','tiki-list_comments.php',1260,'feature_faq_comments','tiki_p_admin','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (173,42,'o','Freetags','tiki-browse_freetags.php',27,'feature_freetags','tiki_p_view_freetags','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (174,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_contribution','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (175,42,'o','Contribution','tiki-admin_contribution.php',1265,'feature_contribution','tiki_p_admin_contribution','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (176,42,'o','List TikiSheets','tiki-sheets.php',782,'feature_sheet','tiki_p_view_sheet','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (177,42,'o','Directory batch','tiki-batch_upload_files.php',617,'feature_file_galleries_batch','tiki_p_batch_upload_file_dir','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (178,42,'o','Contacts','tiki-contacts.php',87,'feature_mytiki,feature_contacts','','Registered',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (179,42,'o','Tiki Calendar','tiki-action_calendar.php',36,'feature_action_calendar','tiki_p_view_tiki_calendar','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (180,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_users','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (187,42,'o','Search','tiki-searchindex.php',13,'feature_search','tiki_p_search','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (184,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_quicktags','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (185,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_menu','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (188,42,'o','Tiki Cache/Sys Admin','tiki-admin_system.php',1230,'','tiki_p_clean_cache','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (186,42,'r','Admin','tiki-admin.php',1050,'','tiki_p_clean_cache','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (190,42,'s','Articles','tiki-view_articles.php',350,'feature_articles','tiki_p_articles_read_heading','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (191,42,'o','Articles home','tiki-view_articles.php',355,'feature_articles','tiki_p_articles_read_heading','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (192,42,'o','List articles','tiki-list_articles.php',360,'feature_articles','tiki_p_articles_read_heading','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (193,42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_view_actionlog','',0);
+INSERT INTO `tiki_menu_options` (`optionId`, `menuId`, `type`, `name`, `url`, `position`, `section`, `perm`, `groupname`, `userlevel`) VALUES (194,42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_view_actionlog_owngroups','',0);
 # --------------------------------------------------------
 
 #
@@ -2300,8 +2268,7 @@
   name varchar(200) NOT NULL default '',
   description text,
   type char(1) default NULL,
-  icon varchar(200) NULL default NULL,
-  PRIMARY KEY  (menuId)
+  PRIMARY KEY (menuId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 INSERT INTO tiki_menus (menuId,name,description,type) VALUES ('42','Application menu','Main extensive navigation menu','d');
@@ -2326,7 +2293,7 @@
   duration int(3) default NULL,
   topicId int(12) default NULL,
   reminded char(1) default NULL,
-  PRIMARY KEY  (eventId)
+  PRIMARY KEY (eventId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -2348,7 +2315,7 @@
   data longblob,
   path varchar(250) default NULL,
   isIcon char(1) default NULL,
-  PRIMARY KEY  (topicId)
+  PRIMARY KEY (topicId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -2371,7 +2338,7 @@
   rows int(4) default NULL,
   params varchar(255) default NULL,
   groups text,
-  PRIMARY KEY  (name(100), position, ord, params(140)),
+  PRIMARY KEY (name(100), position, ord, params(140)),
   KEY positionType (position, type),
   KEY moduleId (moduleId)
 ) ENGINE=MyISAM;
@@ -2398,7 +2365,7 @@
   valid char(1) default NULL,
   subscribed int(14) default NULL,
   isUser char(1) NOT NULL default 'n',
-  PRIMARY KEY  (nlId,email,isUser)
+  PRIMARY KEY (nlId,email,isUser)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -2414,7 +2381,7 @@
   nlId int(12) NOT NULL default '0',
   groupName varchar(255) NOT NULL default '',
   code varchar(32) default NULL,
-  PRIMARY KEY  (nlId,groupName)
+  PRIMARY KEY (nlId,groupName)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -2429,7 +2396,7 @@
 CREATE TABLE tiki_newsletter_included (
   nlId int(12) NOT NULL default '0',
   includedId int(12) NOT NULL default '0',
-  PRIMARY KEY  (nlId,includedId)
+  PRIMARY KEY (nlId,includedId)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -2450,13 +2417,13 @@
   editions int(10) default NULL,
   users int(10) default NULL,
   allowUserSub char(1) default 'y',
-  allowTxt char(1) default 'y',
   allowAnySub char(1) default NULL,
   unsubMsg char(1) default 'y',
   validateAddr char(1) default 'y',
   frequency int(14) default NULL,
+  allowTxt char(1) default 'y',
 	author varchar(200) default NULL,
-  PRIMARY KEY  (nlId)
+  PRIMARY KEY (nlId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -2473,7 +2440,7 @@
   serverId int(12) NOT NULL default '0',
   groupName varchar(255) NOT NULL default '',
   timestamp int(14) NOT NULL default '0',
-  PRIMARY KEY  (`user`(100),serverId,groupName(100))
+  PRIMARY KEY (`user`(100),serverId,groupName(100))
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -2492,7 +2459,7 @@
   port int(4) default NULL,
   username varchar(200) default NULL,
   password varchar(200) default NULL,
-  PRIMARY KEY  (serverId)
+  PRIMARY KEY (serverId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -2509,7 +2476,7 @@
   user varchar(200) NOT NULL default '',
   pageName varchar(250) NOT NULL default '',
   data text,
-  PRIMARY KEY  (`user`(150),pageName(100))
+  PRIMARY KEY (`user`(150),pageName(100))
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -2548,7 +2515,7 @@
   created int(14),
   wysiwyg char(1) default NULL,
   wiki_authors_style varchar(20) NOT NULL default '',
-  PRIMARY KEY  (page_id),
+  PRIMARY KEY (page_id),
   UNIQUE KEY pageName (pageName),
   KEY data (data(255)),
   KEY pageRank (pageRank),
@@ -2571,7 +2538,7 @@
   description varchar(200) default NULL,
   comment varchar(200) default NULL,
   lastModif int(14) default NULL,
-  PRIMARY KEY  (pageName(120), `user`(120))
+  PRIMARY KEY (pageName(120), `user`(120))
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -2586,7 +2553,7 @@
 CREATE TABLE tiki_pageviews (
   day int(14) NOT NULL default '0',
   pageviews int(14) default NULL,
-  PRIMARY KEY  (day)
+  PRIMARY KEY (day)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -2599,7 +2566,7 @@
   `catObjectId` int(11) NOT NULL default '0',
   `pollId` int(11) NOT NULL default '0',
   `title` varchar(255) default NULL,
-  PRIMARY KEY  (`catObjectId`,`pollId`)
+  PRIMARY KEY (`catObjectId`,`pollId`)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -2617,7 +2584,7 @@
   title varchar(200) default NULL,
   position int(4) NOT NULL default '0',
   votes int(8) default NULL,
-  PRIMARY KEY  (optionId)
+  PRIMARY KEY (optionId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -2635,7 +2602,7 @@
   votes int(8) default NULL,
   active char(1) default NULL,
   publishDate int(14) default NULL,
-  PRIMARY KEY  (pollId)
+  PRIMARY KEY (pollId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -2650,9 +2617,8 @@
 CREATE TABLE tiki_preferences (
   name varchar(40) NOT NULL default '',
   value text,
-  PRIMARY KEY  (name)
+  PRIMARY KEY (name)
 ) ENGINE=MyISAM;
-INSERT INTO `tiki_preferences` (name, value) VALUES ('pref_syntax', '1.10');
 # --------------------------------------------------------
 
 #
@@ -2666,13 +2632,13 @@
 CREATE TABLE tiki_private_messages (
   messageId int(8) NOT NULL auto_increment,
   toNickname varchar(200) NOT NULL default '',
-  message varchar(255) default NULL,
   poster varchar(200) NOT NULL default 'anonymous',
   timestamp int(14) default NULL,
   received tinyint(1) not null default 0,
+  message varchar(255) default NULL,
   key(received),
   key(timestamp),
-  PRIMARY KEY  (messageId)
+  PRIMARY KEY (messageId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -2689,7 +2655,7 @@
   contentId int(8) NOT NULL default '0',
   publishDate int(14) NOT NULL default '0',
   data text,
-  PRIMARY KEY  (pId)
+  PRIMARY KEY (pId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -2706,7 +2672,7 @@
   questionId int(10) default NULL,
   optionText text,
   points int(4) default NULL,
-  PRIMARY KEY  (optionId)
+  PRIMARY KEY (optionId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -2725,7 +2691,7 @@
   position int(4) default NULL,
   type char(1) default NULL,
   maxPoints int(4) default NULL,
-  PRIMARY KEY  (questionId)
+  PRIMARY KEY (questionId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -2743,7 +2709,7 @@
   fromPoints int(4) default NULL,
   toPoints int(4) default NULL,
   answer text,
-  PRIMARY KEY  (resultId)
+  PRIMARY KEY (resultId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -2760,7 +2726,7 @@
   questionId int(10) NOT NULL default '0',
   optionId int(10) NOT NULL default '0',
   votes int(10) default NULL,
-  PRIMARY KEY  (quizId,questionId,optionId)
+  PRIMARY KEY (quizId,questionId,optionId)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -2779,7 +2745,7 @@
   avgpoints decimal(5,2) default NULL,
   avgavg decimal(5,2) default NULL,
   avgtime decimal(5,2) default NULL,
-  PRIMARY KEY  (quizId)
+  PRIMARY KEY (quizId)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -2829,7 +2795,7 @@
   sData text,
   sEpilogue text,
   passingperct int(4) default 0,
-  PRIMARY KEY  (quizId, nVersion)
+  PRIMARY KEY (quizId, nVersion)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -2865,7 +2831,7 @@
   author varchar(200) default NULL,
   type varchar(50) default NULL,
   rating decimal(3,2) default NULL,
-  PRIMARY KEY  (receivedArticleId)
+  PRIMARY KEY (receivedArticleId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -2893,7 +2859,7 @@
   parentName  varchar(250) default NULL,
   page_alias varchar(250) default '',
   pos int(4) default NULL,
-  PRIMARY KEY  (receivedPageId),
+  PRIMARY KEY (receivedPageId),
   KEY structureName (structureName)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
@@ -2910,7 +2876,7 @@
   referer varchar(255) NOT NULL default '',
   hits int(10) default NULL,
   last int(14) default NULL,
-  PRIMARY KEY  (referer)
+  PRIMARY KEY (referer)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -2925,7 +2891,7 @@
 CREATE TABLE tiki_related_categories (
   categId int(10) NOT NULL default '0',
   relatedTo int(10) NOT NULL default '0',
-  PRIMARY KEY  (categId,relatedTo)
+  PRIMARY KEY (categId,relatedTo)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -2947,7 +2913,7 @@
   showTitle char(1) default 'n',
   showPubDate char(1) default 'n',
   content longblob,
-  PRIMARY KEY  (rssId),
+  PRIMARY KEY (rssId),
   KEY name (name)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
@@ -2966,7 +2932,7 @@
   refresh int(8) default '300',
   lastUpdated int(14) default NULL,
   cache longblob,
-  PRIMARY KEY  (name,rssVer)
+  PRIMARY KEY (name,rssVer)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -2977,7 +2943,7 @@
   page varchar(255) NOT NULL default '',
   count int(11) NOT NULL default '1',
   last_update int(11) NOT NULL default '0',
-  PRIMARY KEY  (searchword,location,page(80)),
+  PRIMARY KEY (searchword,location,page(80)),
   KEY last_update (last_update),
   KEY location (location(50), page(200))
 ) ENGINE=MyISAM;
@@ -2988,7 +2954,7 @@
   syllable varchar(80) NOT NULL default '',
   lastUsed int(11) NOT NULL default '0',
   lastUpdated int(11) NOT NULL default '0',
-  PRIMARY KEY  (syllable),
+  PRIMARY KEY (syllable),
   KEY lastUsed (lastUsed)
 ) ENGINE=MyISAM;
 
@@ -2997,7 +2963,7 @@
 CREATE TABLE tiki_searchwords(
   syllable varchar(80) NOT NULL default '',
   searchword varchar(80) NOT NULL default '',
-  PRIMARY KEY  (syllable,searchword)
+  PRIMARY KEY (syllable,searchword)
 ) ENGINE=MyISAM;
 
 #
@@ -3011,7 +2977,7 @@
 CREATE TABLE tiki_search_stats (
   term varchar(50) NOT NULL default '',
   hits int(10) default NULL,
-  PRIMARY KEY  (term)
+  PRIMARY KEY (term)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -3026,7 +2992,7 @@
   filename varchar(250) NOT NULL,
   tiki_version varchar(60) NOT NULL,
   severity int(4) NOT NULL default '0',
-  PRIMARY KEY  (md5_value,filename(100),tiki_version),
+  PRIMARY KEY (md5_value,filename(100),tiki_version),
   KEY sdb_fn (filename)
 ) ENGINE=MyISAM;
 
@@ -3041,9 +3007,9 @@
 CREATE TABLE tiki_semaphores (
   semName varchar(250) NOT NULL default '',
   objectType varchar(20) default 'wiki page',
-  user varchar(200) default NULL,
+  user varchar(200) NOT NULL default '',
   timestamp int(14) default NULL,
-  PRIMARY KEY  (semName)
+  PRIMARY KEY (semName)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -3063,7 +3029,7 @@
   subject varchar(200) default NULL,
   data longblob,
   datatxt longblob,
-  PRIMARY KEY  (editionId)
+  PRIMARY KEY (editionId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -3077,7 +3043,7 @@
   email varchar(255),
   login varchar(40) default '',
   error char(1) default '',
-  KEY  (editionId)
+  KEY (editionId)
 ) ENGINE=MyISAM ;
 # --------------------------------------------------------
 
@@ -3092,10 +3058,10 @@
 DROP TABLE IF EXISTS tiki_sessions;
 CREATE TABLE tiki_sessions (
   sessionId varchar(32) NOT NULL default '',
-  user varchar(200) default NULL,
+  user varchar(200) default '',
   timestamp int(14) default NULL,
   tikihost varchar(200) default NULL,
-  PRIMARY KEY  (sessionId),
+  PRIMARY KEY (sessionId),
   KEY user (user),
   KEY timestamp (timestamp)
 ) ENGINE=MyISAM;
@@ -3125,7 +3091,7 @@
   width int(4) NOT NULL default '1',
   height int(4) NOT NULL default '1',
   format varchar(255) default NULL,
-  user varchar(200) default NULL,
+  user varchar(200) default '',
   UNIQUE KEY sheetId (sheetId,begin,rowIndex,columnIndex),
   KEY sheetId_2 (sheetId,rowIndex,columnIndex)
 ) ENGINE=MyISAM;
@@ -3136,7 +3102,7 @@
   title varchar(200) NOT NULL default '',
   description text,
   author varchar(200) NOT NULL default '',
-  PRIMARY KEY  (sheetId)
+  PRIMARY KEY (sheetId)
 ) ENGINE=MyISAM;
 
 #
@@ -3151,9 +3117,9 @@
   msgId int(10) NOT NULL auto_increment,
   message varchar(255) default NULL,
   timestamp int(14) default NULL,
-  user varchar(200) default NULL,
+  user varchar(200) NULL default '',
   hash varchar(32) default NULL,
-  PRIMARY KEY  (msgId)
+  PRIMARY KEY (msgId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -3165,7 +3131,7 @@
 CREATE TABLE tiki_shoutbox_words (
   word VARCHAR( 40 ) NOT NULL ,
   qty INT DEFAULT '0' NOT NULL ,
-  PRIMARY KEY  (word)
+  PRIMARY KEY (word)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -3180,7 +3146,7 @@
 CREATE TABLE tiki_structure_versions (
   structure_id int(14) NOT NULL auto_increment,
   version int(14) default NULL,
-  PRIMARY KEY  (structure_id)
+  PRIMARY KEY (structure_id)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -3200,7 +3166,7 @@
   page_version int(8) default NULL,
   page_alias varchar(240) NOT NULL default '',
   pos int(4) default NULL,
-  PRIMARY KEY  (page_ref_id),
+  PRIMARY KEY (page_ref_id),
   KEY pidpaid (page_id,parent_id),
   KEY page_id (page_id)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -3241,14 +3207,14 @@
   heading text,
   body text,
   hash varchar(32) default NULL,
+  author varchar(200) NOT NULL default '',
   nbreads int(14) default NULL,
-  author varchar(200) default NULL,
   votes int(8) default NULL,
   points int(14) default NULL,
   type varchar(50) default NULL,
   rating decimal(3,2) default NULL,
   isfloat char(1) default NULL,
-  PRIMARY KEY  (subId)
+  PRIMARY KEY (subId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -3266,8 +3232,8 @@
   question text,
   answer text,
   created int(14) default NULL,
-  user varchar(200) default NULL,
-  PRIMARY KEY  (sfqId)
+  user varchar(200) NOT NULL default '',
+  PRIMARY KEY (sfqId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -3284,7 +3250,7 @@
   questionId int(12) NOT NULL default '0',
   qoption text,
   votes int(10) default NULL,
-  PRIMARY KEY  (optionId)
+  PRIMARY KEY (optionId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -3306,7 +3272,7 @@
   votes int(10) default NULL,
   value int(10) default NULL,
   average decimal(4,2) default NULL,
-  PRIMARY KEY  (questionId)
+  PRIMARY KEY (questionId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -3326,7 +3292,7 @@
   lastTaken int(14) default NULL,
   created int(14) default NULL,
   status char(1) default NULL,
-  PRIMARY KEY  (surveyId)
+  PRIMARY KEY (surveyId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -3347,10 +3313,10 @@
   lastModif int(14) default NULL,
   comment varchar(200) default NULL,
   version int(8) NOT NULL default '0',
-  user varchar(200) default NULL,
+  user varchar(200) NOT NULL default '',
   ip varchar(15) default NULL,
   flag char(1) default NULL,
-  PRIMARY KEY  (tagName,pageName)
+  PRIMARY KEY (tagName,pageName)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -3365,7 +3331,7 @@
 CREATE TABLE tiki_theme_control_categs (
   categId int(12) NOT NULL default '0',
   theme varchar(250) NOT NULL default '',
-  PRIMARY KEY  (categId)
+  PRIMARY KEY (categId)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -3382,7 +3348,7 @@
   type varchar(250) NOT NULL default '',
   name varchar(250) NOT NULL default '',
   theme varchar(250) NOT NULL default '',
-  PRIMARY KEY  (objId(100), type(100))
+  PRIMARY KEY (objId(100), type(100))
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -3397,7 +3363,7 @@
 CREATE TABLE tiki_theme_control_sections (
   section varchar(250) NOT NULL default '',
   theme varchar(250) NOT NULL default '',
-  PRIMARY KEY  (section)
+  PRIMARY KEY (section)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -3418,7 +3384,7 @@
   image_data longblob,
   active char(1) default NULL,
   created int(14) default NULL,
-  PRIMARY KEY  (topicId)
+  PRIMARY KEY (topicId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -3443,13 +3409,13 @@
   isPublic char(1) NOT NULL default 'n',
   isHidden char(1) NOT NULL default 'n',
   isMandatory char(1) NOT NULL default 'n',
+  description text,
   isMultilingual char(1) default 'n',
-  description text,
   itemChoices text,
   errorMsg text,
   visibleBy text,
   editableBy text,
-  PRIMARY KEY  (fieldId)
+  PRIMARY KEY (fieldId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -3475,7 +3441,7 @@
   comment varchar(250) default NULL,
   longdesc blob,
   version varchar(40) default NULL,
-  PRIMARY KEY  (attId)
+  PRIMARY KEY (attId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -3494,7 +3460,7 @@
   data text,
   title varchar(200) default NULL,
   posted int(14) default NULL,
-  PRIMARY KEY  (commentId)
+  PRIMARY KEY (commentId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -3509,9 +3475,9 @@
 CREATE TABLE tiki_tracker_item_fields (
   itemId int(12) NOT NULL default '0',
   fieldId int(12) NOT NULL default '0',
+  value text,
   lang char(16) default NULL,
-  value text,
-  PRIMARY KEY  (itemId,fieldId,lang),
+  PRIMARY KEY (itemId,fieldId,lang),
   INDEX fieldId (fieldId),
   INDEX value (value(250)),
   INDEX lang (lang),
@@ -3533,7 +3499,7 @@
   created int(14) default NULL,
   status char(1) default NULL,
   lastModif int(14) default NULL,
-  PRIMARY KEY  (itemId)
+  PRIMARY KEY (itemId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -3549,7 +3515,7 @@
   trackerId int(12) NOT NULL default '0',
   name varchar(80) NOT NULL default '',
   value text default NULL,
-  PRIMARY KEY  (trackerId,name(30))
+  PRIMARY KEY (trackerId,name(30))
 ) ENGINE=MyISAM ;
 # --------------------------------------------------------
 
@@ -3566,7 +3532,7 @@
   trackerId int(12) NOT NULL auto_increment,
   name varchar(255) default NULL,
   description text,
-  descriptionIsParsed varchar(1) default NULL,
+  descriptionIsParsed varchar(1) NULL default '0',
   created int(14) default NULL,
   lastModif int(14) default NULL,
   showCreated char(1) default NULL,
@@ -3574,11 +3540,11 @@
   showLastModif char(1) default NULL,
   useComments char(1) default NULL,
   useAttachments char(1) default NULL,
+  showAttachments char(1) default NULL,
   items int(10) default NULL,
   showComments char(1) default NULL,
-  showAttachments char(1) default NULL,
   orderAttachments varchar(255) NOT NULL default 'filename,created,filesize,hits,desc',
-  PRIMARY KEY  (trackerId)
+  PRIMARY KEY (trackerId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -3594,7 +3560,7 @@
   id int(14) NOT NULL auto_increment,
   source tinyblob NOT NULL,
   lang char(16) NOT NULL default '',
-  PRIMARY KEY  (source(255),lang),
+  PRIMARY KEY (source(255),lang),
   UNIQUE KEY id (id),
   KEY id_2 (id)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -3613,7 +3579,7 @@
   quizId int(10) NOT NULL default '0',
   questionId int(10) NOT NULL default '0',
   optionId int(10) NOT NULL default '0',
-  PRIMARY KEY  (userResultId,quizId,questionId,optionId)
+  PRIMARY KEY (userResultId,quizId,questionId,optionId)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -3635,7 +3601,7 @@
   filetype varchar(64) NOT NULL default '',
   filesize varchar(255) NOT NULL default '',
   filecontent longblob NOT NULL,
-  PRIMARY KEY  (answerUploadId)
+  PRIMARY KEY (answerUploadId)
 ) ENGINE=MyISAM;
 
 
@@ -3654,7 +3620,7 @@
   ord int(4) default NULL,
   type char(1) default NULL,
   user varchar(200) NOT NULL default '',
-  PRIMARY KEY  (name(30),user,position, ord)
+  PRIMARY KEY (name(30),user,position, ord)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -3671,7 +3637,7 @@
   parentId int(12) default NULL,
   user varchar(200) NOT NULL default '',
   name varchar(30) default NULL,
-  PRIMARY KEY  (user,folderId)
+  PRIMARY KEY (user,folderId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -3691,7 +3657,7 @@
   lastUpdated int(14) default NULL,
   folderId int(12) NOT NULL default '0',
   user varchar(200) NOT NULL default '',
-  PRIMARY KEY  (urlId)
+  PRIMARY KEY (urlId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -3716,7 +3682,7 @@
   smtp varchar(255) default NULL,
   useAuth char(1) default NULL,
   smtpPort int(4) default NULL,
-  PRIMARY KEY  (accountId)
+  PRIMARY KEY (accountId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -3735,7 +3701,7 @@
   name varchar(40) default NULL,
   position int(4) default NULL,
   mode char(1) default NULL,
-  PRIMARY KEY  (menuId)
+  PRIMARY KEY (menuId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -3752,7 +3718,7 @@
   title varchar(40) default NULL,
   data longblob,
   parse char(1) default NULL,
-  PRIMARY KEY  (name)
+  PRIMARY KEY (name)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 INSERT INTO tiki_user_modules (name, title, data, parse) VALUES ('mnu_application_menu', 'Menu', '{menu id=42}', 'n');
@@ -3774,7 +3740,7 @@
   data text,
   size int(14) default NULL,
   parse_mode varchar(20) default NULL,
-  PRIMARY KEY  (noteId)
+  PRIMARY KEY (noteId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -3792,7 +3758,7 @@
   last int(14) default NULL,
   first int(14) default NULL,
   level int(8) default NULL,
-  PRIMARY KEY  (user)
+  PRIMARY KEY (user)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -3808,7 +3774,7 @@
   user varchar(200) NOT NULL default '',
   prefName varchar(40) NOT NULL default '',
   value varchar(250) default NULL,
-  PRIMARY KEY  (user,prefName)
+  PRIMARY KEY (user,prefName)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -3829,7 +3795,7 @@
   maxPoints int(12) default NULL,
   resultId int(10) default NULL,
   userResultId int(10) NOT NULL auto_increment,
-  PRIMARY KEY  (userResultId)
+  PRIMARY KEY (userResultId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -3844,7 +3810,7 @@
 CREATE TABLE tiki_user_taken_quizzes (
   user varchar(200) NOT NULL default '',
   quizId varchar(255) NOT NULL default '',
-  PRIMARY KEY  (user,quizId(50))
+  PRIMARY KEY (user,quizId(50))
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -3915,7 +3881,7 @@
   user varchar(200) NOT NULL default '',
   id varchar(255) NOT NULL default '',
   optionId int(10) NOT NULL default 0,
-  PRIMARY KEY  (`user`(100),id(100))
+  PRIMARY KEY (`user`(100),id(100))
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -3937,7 +3903,7 @@
   url varchar(250) default NULL,
   email varchar(200) default NULL,
   KEY watchId (watchId),
-  PRIMARY KEY  (`user`(50),event,object(100),email(50))
+  PRIMARY KEY (`user`(50),event,object(100),email(50))
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -3961,7 +3927,7 @@
   isFile char(1) default NULL,
   path varchar(255) default NULL,
   created int(14) default NULL,
-  PRIMARY KEY  (fileId)
+  PRIMARY KEY (fileId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -3974,7 +3940,7 @@
 
 DROP TABLE IF EXISTS tiki_userpoints;
 CREATE TABLE tiki_userpoints (
-  user varchar(200) default NULL,
+  user varchar(200) NOT NULL default '',
   points decimal(8,2) default NULL,
   voted int(8) default NULL
 ) ENGINE=MyISAM;
@@ -3993,7 +3959,7 @@
   password varchar(40) default NULL,
   email varchar(200) default NULL,
   lastLogin int(14) default NULL,
-  PRIMARY KEY  (user)
+  PRIMARY KEY (user)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -4012,7 +3978,7 @@
   email varchar(250) default NULL,
   nickname varchar(200) default NULL,
   user varchar(200) NOT NULL default '',
-  PRIMARY KEY  (contactId)
+  PRIMARY KEY (contactId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -4020,7 +3986,7 @@
 CREATE TABLE tiki_webmail_contacts_groups (
   contactId int(12) NOT NULL,
   groupName varchar(255) NOT NULL,
-  PRIMARY KEY  (contactId,groupName(200))
+  PRIMARY KEY (contactId,groupName(200))
 ) ENGINE=MyISAM ;
 # --------------------------------------------------------
 
@@ -4039,7 +4005,7 @@
   isRead char(1) default NULL,
   isReplied char(1) default NULL,
   isFlagged char(1) default NULL,
-  PRIMARY KEY  (accountId,mailId)
+  PRIMARY KEY (accountId,mailId)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -4057,13 +4023,13 @@
   filename varchar(80) default NULL,
   filetype varchar(80) default NULL,
   filesize int(14) default NULL,
-  user varchar(200) default NULL,
+  user varchar(200) NOT NULL default '',
   data longblob,
   path varchar(255) default NULL,
   hits int(10) default NULL,
   created int(14) default NULL,
   comment varchar(250) default NULL,
-  PRIMARY KEY  (attId)
+  PRIMARY KEY (attId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -4077,7 +4043,7 @@
 DROP TABLE IF EXISTS tiki_zones;
 CREATE TABLE tiki_zones (
   zone varchar(40) NOT NULL default '',
-  PRIMARY KEY  (zone)
+  PRIMARY KEY (zone)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 #
@@ -4095,7 +4061,7 @@
   type varchar(20) NOT NULL default '',
   date int(14) NOT NULL default '0',
   IP varchar(50) NOT NULL default '',
-  PRIMARY KEY  (id),
+  PRIMARY KEY (id),
   KEY object (object,userId,type),
   KEY userId (userId),
   KEY type (type),
@@ -4115,7 +4081,7 @@
   groupName varchar(255) NOT NULL default '',
   permName varchar(40) NOT NULL default '',
   value char(1) default '',
-  PRIMARY KEY  (groupName(30),permName)
+  PRIMARY KEY (groupName(30),permName)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -4142,7 +4108,7 @@
   userChoice char(1) default NULL,
   groupDefCat int(12) default 0,
   groupTheme varchar(255) default '',  
-  PRIMARY KEY  (groupName(30))
+  PRIMARY KEY (groupName(30))
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -4159,7 +4125,7 @@
   permName varchar(40) NOT NULL default '',
   objectType varchar(20) NOT NULL default '',
   objectId varchar(32) NOT NULL default '',
-  PRIMARY KEY  (objectId, objectType, groupName(30),permName)
+  PRIMARY KEY (objectId, objectType, groupName(30),permName)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 
@@ -4177,199 +4143,200 @@
   level varchar(80) default NULL,
   type varchar(20) default NULL,
   admin varchar(1) default NULL,
-  PRIMARY KEY  (permName),
+  PRIMARY KEY (permName),
   KEY type (type)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 # 
 
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_abort_instance', 'Can abort a process instance', 'editors', 'workflow');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_access_closed_site', 'Can access site when closed', 'admin', 'tiki');
+
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_calendar', 'Can create/admin calendars', 'admin', 'calendar', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_add_events', 'Can add events in the calendar', 'registered', 'calendar');
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin', 'Administrator, can manage users groups and permissions, Hotwords and all the weblog features', 'admin', 'tiki', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_banners', 'Administrator, can admin banners', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_banning', 'Can ban users or ips', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_calendar', 'Can create/admin calendars', 'admin', 'calendar', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_change_events', 'Can change events in the calendar', 'registered', 'calendar');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_calendar', 'Can browse the calendar', 'basic', 'calendar');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_events', 'Can view events details', 'registered', 'calendar');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_tiki_calendar', 'Can view Tikiwiki tools calendar', 'basic', 'calendar');
+
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_categories', 'Can admin categories', 'editors', 'category', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_categorized', 'Can edit items in categories', 'registered', 'category');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_categories', 'Can view categories', 'basic', 'category');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_categorized', 'Can view categorized items', 'basic', 'category');
+
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_charts', 'Can admin charts', 'admin', 'charts', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_autoval_chart_suggestio', 'Autovalidate suggestions', 'editors', 'charts');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_suggest_chart_item', 'Can suggest items', 'basic', 'charts');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_chart', 'Can view charts', 'basic', 'charts');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_vote_chart', 'Can vote', 'basic', 'charts');
+
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_chat', 'Administrator, can create channels remove channels etc', 'editors', 'chat', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_chat', 'Can use the chat system', 'registered', 'chat');
+
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_cms', 'Can admin the cms', 'editors', 'cms', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_approve_submission', 'Can approve submissions', 'editors', 'cms');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_articles_admin_topics', 'Can admin article topics', 'editors', 'cms');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_articles_admin_types', 'Can admin article types', 'editors', 'cms');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_articles_read_heading', 'Can read article headings', 'basic', 'cms');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_autoapprove_submission', 'Submited articles automatically approved', 'editors', 'cms');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_article', 'Can edit articles', 'editors', 'cms');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_submission', 'Can edit submissions', 'editors', 'cms');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_read_article', 'Can read articles', 'basic', 'cms');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_remove_article', 'Can remove articles', 'editors', 'cms');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_remove_submission', 'Can remove submissions', 'editors', 'cms');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_submit_article', 'Can submit articles', 'basic', 'cms');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_topic_read', 'Can read a topic (Applies only to individual topic perms)', 'basic', 'cms');
+
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_contribution', 'Can admin contributions', 'admin', 'contribution', 'y');
+
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_directory', 'Can admin the directory', 'editors', 'directory', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_directory_cats', 'Can admin directory categories', 'editors', 'directory');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_directory_sites', 'Can admin directory sites', 'editors', 'directory');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_autosubmit_link', 'Submited links are valid', 'editors', 'directory');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_submit_link', 'Can submit sites to the directory', 'basic', 'directory');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_validate_links', 'Can validate submited links', 'editors', 'directory');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_directory', 'Can use the directory', 'basic', 'directory');
+
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_drawings', 'Can admin drawings', 'editors', 'drawings', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_drawings', 'Can edit drawings', 'basic', 'drawings');
+
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_faqs', 'Can admin faqs', 'editors', 'faqs', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_suggest_faq', 'Can suggest faq questions', 'basic', 'faqs');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_faqs', 'Can view faqs', 'basic', 'faqs');
+
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin', 'Administrator, can manage users groups and permissions, Hotwords and all the weblog features', 'admin', 'tiki', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_users', 'Can admin users', 'admin', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_access_closed_site', 'Can access site when closed', 'admin', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_banners', 'Administrator, can admin banners', 'admin', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_banning', 'Can ban users or ips', 'admin', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_dynamic', 'Can admin the dynamic content system', 'editors', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_faqs', 'Can admin faqs', 'editors', 'faqs', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_file_galleries', 'Can admin file galleries', 'editors', 'file galleries', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_forum', 'Can admin forums', 'editors', 'forums', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_galleries', 'Can admin Image Galleries', 'editors', 'image galleries', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_games', 'Can admin games', 'editors', 'games', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_integrator', 'Can admin integrator repositories and rules', 'admin', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_mailin', 'Can admin mail-in accounts', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_newsletters', 'Can admin newsletters', 'admin', 'newsletters', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_objects','Can edit object permissions', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_polls','Can admin polls', 'admin', 'polls', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_quizzes', 'Can admin quizzes', 'editors', 'quizzes', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_received_articles', 'Can admin received articles', 'editors', 'comm');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_received_pages', 'Can admin received pages', 'editors', 'comm');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_rssmodules','Can admin rss modules', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_sheet', 'Can admin sheet', 'admin', 'sheet', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_shoutbox', 'Can admin shoutbox (Edit/remove msgs)', 'editors', 'shoutbox', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_surveys', 'Can admin surveys', 'editors', 'surveys', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_trackers', 'Can admin trackers', 'editors', 'trackers', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_users', 'Can admin users', 'admin', 'user');
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_wiki', 'Can admin the wiki', 'editors', 'wiki', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_workflow', 'Can admin workflow processes', 'admin', 'workflow', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_quicktags', 'Can admin quicktags', 'admin', 'quicktags', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_freetags', 'Can admin freetags', 'admin', 'freetags', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_approve_submission', 'Can approve submissions', 'editors', 'cms');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_attach_trackers', 'Can attach files to tracker items', 'registered', 'trackers');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_autoapprove_submission', 'Submited articles automatically approved', 'editors', 'cms');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_autosubmit_link', 'Submited links are valid', 'editors', 'directory');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_autoval_chart_suggestio', 'Autovalidate suggestions', 'editors', 'charts');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_subscribe_email', 'Can subscribe many e-mails at once (requires tiki_p_subscribe email)', 'editors', 'newsletters');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_files', 'Can upload zip files with files', 'editors', 'file galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_file_dir', 'Can use Directory Batch Load', 'editors', 'file galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_image_dir', 'Can use Directory Batch Load', 'editors', 'image galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_images', 'Can upload zip files with images', 'editors', 'image galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_clean_cache', 'Can clean cache', 'editors', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_create_css', 'Can create new css suffixed with -user', 'registered', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_detach_translation', 'Can remove association between two pages in a translation set', 'registered', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_cookies', 'Can admin cookies', 'editors', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_languages', 'Can edit translations and create new languages', 'editors', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_menu', 'Can edit menu', 'admin', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_menu_option', 'Can edit menu option', 'admin', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_templates', 'Can edit site templates', 'admin', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_search', 'Can search', 'basic', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_site_report', 'Can report a link to the webmaster', 'basic', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_subscribe_groups', 'Can subscribe to groups', 'registered', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tell_a_friend', 'Can send a link to a friend', 'Basic', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_HTML', 'Can use HTML in pages', 'editors', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_actionlog', 'Can view action log', 'registered', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_actionlog_owngroups', 'Can view action log for users of his own groups', 'registered', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_integrator', 'Can view integrated repositories', 'basic', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_referer_stats', 'Can view referer stats', 'editors', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_stats', 'Can view site stats', 'basic', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_templates', 'Can view site templates', 'admin', 'tiki');
+
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_blog_admin', 'Can admin blogs', 'editors', 'blogs', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_blog', 'Can assign perms to blog', 'admin', 'blogs');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_blog_post', 'Can post to a blog', 'registered', 'blogs');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_broadcast', 'Can broadcast messages to groups', 'admin', 'messu');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_broadcast_all', 'Can broadcast messages to all user', 'admin', 'messu');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_cache_bookmarks', 'Can cache user bookmarks', 'admin', 'user');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_change_events', 'Can change events in the calendar', 'registered', 'calendar');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_chat', 'Can use the chat system', 'registered', 'chat');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_comment_tracker_items', 'Can insert comments for tracker items', 'basic', 'trackers');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_configure_modules', 'Can configure modules', 'registered', 'user');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_create_blogs', 'Can create a blog', 'editors', 'blogs');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_create_bookmarks', 'Can create user bookmarks', 'registered', 'user');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_create_css', 'Can create new css suffixed with -user', 'registered', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_read_blog', 'Can read blogs', 'basic', 'blogs');
+
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_file_galleries', 'Can admin file galleries', 'editors', 'file galleries', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_file_gallery', 'Can assign perms to file gallery', 'admin', 'file galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_file_dir', 'Can use Directory Batch Load', 'editors', 'file galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_files', 'Can upload zip files with files', 'editors', 'file galleries');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_create_file_galleries', 'Can create file galleries', 'editors', 'file galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_create_galleries', 'Can create image galleries', 'editors', 'image galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_create_tracker_items', 'Can create new items for trackers', 'registered', 'trackers');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_download_files', 'Can download files', 'basic', 'file galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit', 'Can edit pages', 'registered', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_article', 'Can edit articles', 'editors', 'cms');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_categorized', 'Can edit categorized items', 'registered', 'category');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_categories', 'Can edit items in categories', 'registered', 'category');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_comments', 'Can edit all comments', 'editors', 'comments');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_content_templates', 'Can edit content templates', 'editors', 'content templates');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_cookies', 'Can admin cookies', 'editors', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_copyrights', 'Can edit copyright notices', 'editors', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_drawings', 'Can edit drawings', 'basic', 'drawings');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_dynvar', 'Can edit dynamic variables', 'editors', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_gallery_file', 'Can edit a gallery file', 'editors', 'file galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_html_pages', 'Can edit HTML pages', 'editors', 'html pages');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_languages', 'Can edit translations and create new languages', 'editors', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_sheet', 'Can create and edit sheets', 'editors', 'sheet');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_structures', 'Can create and edit structures', 'editors', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_submission', 'Can edit submissions', 'editors', 'cms');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_templates', 'Can edit site templates', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_exception_instance', 'Can declare an instance as exception', 'registered', 'workflow');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forum_edit_own_posts', 'Can edit own forum posts', 'registered', 'forums');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_file_galleries', 'Can list file galleries', 'basic', 'file galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_upload_files', 'Can upload files', 'registered', 'file galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_fgal_explorer', 'Can view file galleries explorer', 'basic', 'file galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_fgal_path', 'Can view file galleries path', 'basic', 'file galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_file_gallery', 'Can view file galleries', 'basic', 'file galleries');
+
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_forum', 'Can admin forums', 'editors', 'forums', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forum_attach', 'Can attach to forum posts', 'registered', 'forums');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forum_autoapp', 'Auto approve forum posts', 'editors', 'forums');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forum_edit_own_posts', 'Can edit own forum posts', 'registered', 'forums');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forum_post', 'Can post in forums', 'registered', 'forums');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forum_post_topic', 'Can start threads in forums', 'registered', 'forums');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forum_read', 'Can read forums', 'basic', 'forums');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forums_report', 'Can report msgs to moderator', 'registered', 'forums');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forum_vote', 'Can vote comments in forums', 'registered', 'forums');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forums_report', 'Can report msgs to moderator', 'registered', 'forums');
+
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_freetags', 'Can admin freetags', 'admin', 'freetags', 'y');
+
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_galleries', 'Can admin Image Galleries', 'editors', 'image galleries', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_image_gallery', 'Can assign perms to image gallery', 'admin', 'image galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_image_dir', 'Can use Directory Batch Load', 'editors', 'image galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_images', 'Can upload zip files with images', 'editors', 'image galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_create_galleries', 'Can create image galleries', 'editors', 'image galleries');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_freetags_tag', 'Can tag objects', 'registered', 'freetags');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_users', 'Can list registered users', 'registered', 'community');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_live_support', 'Can use live support system', 'basic', 'support');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_live_support_admin', 'Admin live support system', 'admin', 'support');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_lock', 'Can lock pages', 'editors', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_map_create', 'Can create new mapfile', 'admin', 'maps');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_map_delete', 'Can delete mapfiles', 'admin', 'maps');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_map_edit', 'Can edit mapfiles', 'editors', 'maps');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_map_view', 'Can view mapfiles', 'basic', 'maps');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_map_view_mapfiles', 'Can view contents of mapfiles', 'registered', 'maps');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_messages', 'Can use the messaging system', 'registered', 'messu');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_minical', 'Can use the mini event calendar', 'registered', 'user');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_minor', 'Can save as minor edit', 'registered', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_modify_tracker_items', 'Can change tracker items', 'registered', 'trackers');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_newsreader', 'Can use the newsreader', 'registered', 'user');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_notepad', 'Can use the notepad', 'registered', 'user');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_image_galleries', 'Can list image galleries', 'basic', 'image galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_unassign_freetags', 'Can unassign tags from an object', 'basic', 'freetags');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_upload_images', 'Can upload images', 'registered', 'image galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_freetags', 'Can browse freetags', 'basic', 'freetags');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_image_gallery', 'Can view image galleries', 'basic', 'image galleries');
+
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_games', 'Can admin games', 'editors', 'games', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_play_games', 'Can play games', 'basic', 'games');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_post_comments', 'Can post new comments', 'registered', 'comments');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_post_shoutbox', 'Can post messages in shoutbox', 'basic', 'shoutbox');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_read_article', 'Can read articles', 'basic', 'cms');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_articles_read_heading', 'Can read article headings', 'basic', 'cms');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_read_blog', 'Can read blogs', 'basic', 'blogs');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_read_comments', 'Can read comments', 'basic', 'comments');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_remove', 'Can remove', 'editors', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_remove_article', 'Can remove articles', 'editors', 'cms');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_remove_comments', 'Can delete comments', 'editors', 'comments');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_remove_submission', 'Can remove submissions', 'editors', 'cms');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_rename', 'Can rename pages', 'editors', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_rollback', 'Can rollback pages', 'editors', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_send_articles', 'Can send articles to other sites', 'editors', 'comm');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_send_instance', 'Can send instances after completion', 'registered', 'workflow');
+
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_newsletters', 'Can admin newsletters', 'admin', 'newsletters', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_subscribe_email', 'Can subscribe many e-mails at once (requires tiki_p_subscribe email)', 'editors', 'newsletters');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_send_newsletters', 'Can send newsletters', 'editors', 'newsletters');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_send_pages', 'Can send pages to other sites', 'registered', 'comm');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_sendme_articles', 'Can send articles to this site', 'registered', 'comm');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_sendme_pages', 'Can send pages to this site', 'registered', 'comm');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_submit_article', 'Can submit articles', 'basic', 'cms');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_submit_link', 'Can submit sites to the directory', 'basic', 'directory');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_subscribe_email', 'Can subscribe any email to newsletters', 'editors', 'newsletters');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_subscribe_newsletters', 'Can subscribe to newsletters', 'basic', 'newsletters');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_suggest_chart_item', 'Can suggest items', 'basic', 'charts');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_suggest_faq', 'Can suggest faq questions', 'basic', 'faqs');
+
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_polls','Can admin polls', 'admin', 'polls', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_poll_results', 'Can view poll results', 'basic', 'polls');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_vote_poll', 'Can vote polls', 'basic', 'polls');
+
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_quicktags', 'Can admin quicktags', 'admin', 'quicktags', 'y');
+
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_quizzes', 'Can admin quizzes', 'editors', 'quizzes', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_take_quiz', 'Can take quizzes', 'basic', 'quizzes');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_take_survey', 'Can take surveys', 'basic', 'surveys');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tasks', 'Can use tasks', 'registered', 'user');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tasks_admin', 'Can admin public tasks', 'admin', 'user');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tasks_receive', 'Can receive tasks from other users', 'registered', 'user');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tasks_send', 'Can send tasks to other users', 'registered', 'user');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_topic_read', 'Can read a topic (Applies only to individual topic perms)', 'basic', 'cms');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_articles_admin_topics', 'Can admin article topics', 'editors', 'cms');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_articles_admin_types', 'Can admin article types', 'editors', 'cms');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tracker_view_ratings', 'Can view rating result for tracker items', 'basic', 'trackers');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tracker_vote_ratings', 'Can vote a rating for tracker items', 'registered', 'trackers');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_upload_files', 'Can upload files', 'registered', 'file galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_upload_images', 'Can upload images', 'registered', 'image galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_upload_picture', 'Can upload pictures to wiki pages', 'registered', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_HTML', 'Can use HTML in pages', 'editors', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_content_templates', 'Can use content templates', 'registered', 'content templates');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_webmail', 'Can use webmail', 'registered', 'webmail');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_workflow', 'Can execute workflow activities', 'registered', 'workflow');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_userfiles', 'Can upload personal files', 'registered', 'user');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_usermenu', 'Can create items in personal menu', 'registered', 'user');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_validate_links', 'Can validate submited links', 'editors', 'directory');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view', 'Can view page/pages', 'basic', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_calendar', 'Can browse the calendar', 'basic', 'calendar');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_categories', 'Can view categories', 'basic', 'category');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_categorized', 'Can view categorized items', 'basic', 'category');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_chart', 'Can view charts', 'basic', 'charts');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_directory', 'Can use the directory', 'basic', 'directory');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_events', 'Can view events details', 'registered', 'calendar');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_faqs', 'Can view faqs', 'basic', 'faqs');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_file_gallery', 'Can view file galleries', 'basic', 'file galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_freetags', 'Can browse freetags', 'basic', 'freetags');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_html_pages', 'Can view HTML pages', 'basic', 'html pages');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_image_gallery', 'Can view image galleries', 'basic', 'image galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_image_galleries', 'Can list image galleries', 'basic', 'image galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_integrator', 'Can view integrated repositories', 'basic', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_quiz_stats', 'Can view quiz stats', 'basic', 'quizzes');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_referer_stats', 'Can view referer stats', 'editors', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_user_results', 'Can view user quiz results', 'editors', 'quizzes');
+
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_sheet', 'Can admin sheet', 'admin', 'sheet', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_sheet', 'Can create and edit sheets', 'editors', 'sheet');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_sheet', 'Can view sheet', 'basic', 'sheet');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_sheet_history', 'Can view sheet history', 'admin', 'sheet');
+
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_shoutbox', 'Can admin shoutbox (Edit/remove msgs)', 'editors', 'shoutbox', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_post_shoutbox', 'Can post messages in shoutbox', 'basic', 'shoutbox');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_shoutbox', 'Can view shoutbox', 'basic', 'shoutbox');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_stats', 'Can view site stats', 'basic', 'tiki');
+
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_surveys', 'Can admin surveys', 'editors', 'surveys', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_take_survey', 'Can take surveys', 'basic', 'surveys');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_survey_stats', 'Can view survey stats', 'basic', 'surveys');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_templates', 'Can view site templates', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_tiki_calendar', 'Can view Tikiwiki tools calendar', 'basic', 'calendar');
+
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_trackers', 'Can admin trackers', 'editors', 'trackers', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_attach_trackers', 'Can attach files to tracker items', 'registered', 'trackers');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_comment_tracker_items', 'Can insert comments for tracker items', 'basic', 'trackers');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_create_tracker_items', 'Can create new items for trackers', 'registered', 'trackers');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_trackers', 'Can list trackers', 'basic', 'trackers');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_modify_tracker_items', 'Can change tracker items', 'registered', 'trackers');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tracker_view_ratings', 'Can view rating result for tracker items', 'basic', 'trackers');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tracker_vote_ratings', 'Can vote a rating for tracker items', 'registered', 'trackers');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_trackers', 'Can view trackers', 'basic', 'trackers');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_trackers', 'Can list trackers', 'basic', 'trackers');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_trackers_closed', 'Can view trackers closed items', 'registered', 'trackers');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_trackers_pending', 'Can view trackers pending items', 'editors', 'trackers');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_user_results', 'Can view user quiz results', 'editors', 'quizzes');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_vote_chart', 'Can vote', 'basic', 'charts');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_vote_comments', 'Can vote comments', 'registered', 'comments');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_vote_poll', 'Can vote polls', 'basic', 'polls');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_poll_results', 'Can view poll results', 'basic', 'polls');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_watch_trackers', 'Can watch tracker', 'registered', 'trackers');
+
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_wiki', 'Can admin the wiki', 'editors', 'wiki', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_wiki_page', 'Can assign perms to wiki pages', 'admin', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit', 'Can edit pages', 'registered', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_copyrights', 'Can edit copyright notices', 'editors', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_dynvar', 'Can edit dynamic variables', 'editors', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_structures', 'Can create and edit structures', 'editors', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_export_wiki', 'Can export wiki pages using the export feature', 'admin', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_lock', 'Can lock pages', 'editors', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_minor', 'Can save as minor edit', 'registered', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_remove', 'Can remove', 'editors', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_rename', 'Can rename pages', 'editors', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_rollback', 'Can rollback pages', 'editors', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_upload_picture', 'Can upload pictures to wiki pages', 'registered', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_as_template', 'Can use the page as a tracker template', 'basic', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view', 'Can view page/pages', 'basic', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_watch_structure', 'Can watch structure', 'registered', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_admin_attachments', 'Can admin attachments to wiki pages', 'editors', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_admin_ratings', 'Can add and change ratings on wiki pages', 'admin', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_attach_files', 'Can attach files to wiki pages', 'registered', 'wiki');
@@ -4379,35 +4346,67 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_view_ratings', 'Can view rating of wiki pages', 'basic', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_view_source', 'Can view source of wiki pages', 'basic', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_vote_ratings', 'Can participate to rating of wiki pages', 'registered', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_file_gallery', 'Can assign perms to file gallery', 'admin', 'file galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_image_gallery', 'Can assign perms to image gallery', 'admin', 'image galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_actionlog', 'Can view action log', 'registered', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_actionlog_owngroups for users of his own groups', 'Can view action log', 'registered', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_blog', 'Can assign perms to blog', 'admin', 'blogs');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tell_a_friend', 'Can send a link to a friend', 'Basic', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_file_galleries', 'Can list file galleries', 'basic', 'file galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_wiki_page', 'Can assign perms to wiki pages', 'admin', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_mypage', 'Can view any mypage', 'basic', 'mypage');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_own_mypage', 'Can view/edit only one\'s own mypages', 'registered', 'mypage');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_mypage', 'Can edit any mypage', 'registered', 'mypage');
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_mypage', 'Can admin any mypage', 'admin', 'mypage','y');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_mypage', 'Can list mypages', 'registered', 'mypage');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_mypage', 'Can assign perms to mypage', 'admin', 'mypage');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_watch_structure', 'Can watch structure', 'registered', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_menu', 'Can edit menu', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_menu_option', 'Can edit menu option', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_subscribe_groups', 'Can subscribe to groups', 'registered', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_detach_translation', 'Can remove association between two pages in a translation set', 'registered', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_unassign_freetags', 'Can unassign tags from an object', 'basic', 'freetags');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_search', 'Can search', 'basic', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES('tiki_p_clean_cache', 'Can clean cache', 'editors', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_fgal_explorer', 'Can view file galleries explorer', 'basic', 'file galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_fgal_path', 'Can view file galleries path', 'basic', 'file galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_site_report', 'Can report a link to the webmaster', 'basic', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_as_template', 'Can use the page as a tracker template', 'basic', 'wiki');
+
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_workflow', 'Can admin workflow processes', 'admin', 'workflow', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_abort_instance', 'Can abort a process instance', 'editors', 'workflow');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_exception_instance', 'Can declare an instance as exception', 'registered', 'workflow');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_send_instance', 'Can send instances after completion', 'registered', 'workflow');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_workflow', 'Can execute workflow activities', 'registered', 'workflow');
+
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_received_articles', 'Can admin received articles', 'editors', 'comm');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_received_pages', 'Can admin received pages', 'editors', 'comm');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_send_articles', 'Can send articles to other sites', 'editors', 'comm');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_sendme_articles', 'Can send articles to this site', 'registered', 'comm');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_sendme_pages', 'Can send pages to this site', 'registered', 'comm');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_send_pages', 'Can send pages to other sites', 'registered', 'comm');
+
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_tikitests', 'Can admin the TikiTests', 'admin', 'tikitests');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_tikitests', 'Can edit TikiTests', 'editors', 'tikitests');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_play_tikitests', 'Can replay the TikiTests', 'registered', 'tikitests');
+
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_cache_bookmarks', 'Can cache user bookmarks', 'admin', 'user');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_configure_modules', 'Can configure modules', 'registered', 'user');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_create_bookmarks', 'Can create user bookmarks', 'registered', 'user');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_minical', 'Can use the mini event calendar', 'registered', 'user');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_newsreader', 'Can use the newsreader', 'registered', 'user');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_notepad', 'Can use the notepad', 'registered', 'user');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tasks_admin', 'Can admin public tasks', 'admin', 'user');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tasks', 'Can use tasks', 'registered', 'user');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tasks_receive', 'Can receive tasks from other users', 'registered', 'user');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tasks_send', 'Can send tasks to other users', 'registered', 'user');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_userfiles', 'Can upload personal files', 'registered', 'user');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_usermenu', 'Can create items in personal menu', 'registered', 'user');
+
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_broadcast_all', 'Can broadcast messages to all user', 'admin', 'messu');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_broadcast', 'Can broadcast messages to groups', 'admin', 'messu');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_messages', 'Can use the messaging system', 'registered', 'messu');
+
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_comments', 'Can admin comments', 'admin', 'comments', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_comments', 'Can edit all comments', 'editors', 'comments');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_post_comments', 'Can post new comments', 'registered', 'comments');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_read_comments', 'Can read comments', 'basic', 'comments');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_remove_comments', 'Can delete comments', 'editors', 'comments');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_vote_comments', 'Can vote comments', 'registered', 'comments');
+
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_content_templates', 'Can admin content templates', 'admin', 'content templates', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_content_templates', 'Can edit content templates', 'editors', 'content templates');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_content_templates', 'Can use content templates', 'registered', 'content templates');
+
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_html_pages', 'Can edit HTML pages', 'editors', 'html pages');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_html_pages', 'Can view HTML pages', 'basic', 'html pages');
+
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_users', 'Can list registered users', 'registered', 'community');
+
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_live_support_admin', 'Admin live support system', 'admin', 'support', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_live_support', 'Can use live support system', 'basic', 'support');
+
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_map_create', 'Can create new mapfile', 'admin', 'maps');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_map_delete', 'Can delete mapfiles', 'admin', 'maps');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_map_edit', 'Can edit mapfiles', 'editors', 'maps');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_map_view', 'Can view mapfiles', 'basic', 'maps');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_map_view_mapfiles', 'Can view contents of mapfiles', 'registered', 'maps');
+
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_webmail', 'Can use webmail', 'registered', 'webmail');
 # --------------------------------------------------------
 
 #
@@ -4421,7 +4420,7 @@
 CREATE TABLE users_usergroups (
   userId int(8) NOT NULL default '0',
   groupName varchar(255) NOT NULL default '',
-  PRIMARY KEY  (userId,groupName(30))
+  PRIMARY KEY (userId,groupName(30))
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 INSERT INTO users_groups (groupName,groupDesc) VALUES ('Anonymous','Public users not logged');
@@ -4463,9 +4462,9 @@
   unsuccessful_logins int(14) default 0,
   openid_url varchar(255) default NULL,
   waiting char(1) default NULL,
-  PRIMARY KEY  (userId),
+  PRIMARY KEY (userId),
+  KEY score (score),
   KEY login (login),
-  KEY score (score),
   KEY registrationDate (registrationDate),
   KEY openid_url (openid_url)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -4493,7 +4492,7 @@
   cacheable char(1) NOT NULL default 'y',
   expiration int(11) NOT NULL default '0',
   description text NOT NULL,
-  PRIMARY KEY  (repID)
+  PRIMARY KEY (repID)
 ) ENGINE=MyISAM;
 
 #
@@ -4516,7 +4515,7 @@
   rxmod varchar(20) NOT NULL default '',
   enabled char(1) NOT NULL default 'n',
   description text NOT NULL,
-  PRIMARY KEY  (ruleID),
+  PRIMARY KEY (ruleID),
   KEY repID (repID)
 ) ENGINE=MyISAM;
 
@@ -4537,7 +4536,7 @@
   taginsert text,
   tagicon varchar(255) default NULL,
   tagcategory varchar(255) default NULL,
-  PRIMARY KEY  (tagId),
+  PRIMARY KEY (tagId),
   KEY tagcategory (tagcategory),
   KEY taglabel (taglabel)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
@@ -4730,7 +4729,7 @@
 CREATE TABLE tiki_friends (
   user varchar(200) NOT NULL default '',
   friend varchar(200) NOT NULL default '',
-  PRIMARY KEY  (`user`(120),friend(120))
+  PRIMARY KEY (`user`(120),friend(120))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_friendship_requests;
@@ -4738,7 +4737,7 @@
   userFrom varchar(200) NOT NULL default '',
   userTo varchar(200) NOT NULL default '',
   tstamp timestamp(14) NOT NULL,
-  PRIMARY KEY  (userFrom(120),userTo(120))
+  PRIMARY KEY (userFrom(120),userTo(120))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_score;
@@ -4746,7 +4745,7 @@
   event varchar(40) NOT NULL default '',
   score int(11) NOT NULL default '0',
   expiration int(11) NOT NULL default '0',
-  PRIMARY KEY  (event)
+  PRIMARY KEY (event)
 ) ENGINE=MyISAM;
 
 
@@ -4787,7 +4786,7 @@
   event_id char(40) NOT NULL default '',
   expire int(14) NOT NULL default '0',
   tstamp timestamp(14) NOT NULL,
-  PRIMARY KEY  (user,event_id),
+  PRIMARY KEY (user,event_id),
   KEY user (user,event_id,expire)
 ) ENGINE=MyISAM;
 
@@ -4822,7 +4821,7 @@
   type varchar(20) NOT NULL default '',
   day int(14) NOT NULL default '0',
   hits int(14) NOT NULL default '0',
-  PRIMARY KEY  (object(200),type,day)
+  PRIMARY KEY (object(200),type,day)
 ) ENGINE=MyISAM;
 
 #
@@ -4837,10 +4836,10 @@
   callback_type int(1) NOT NULL default '3',
   `order` int(2) NOT NULL default '50',
   event varchar(200) NOT NULL default '',
-  file varchar(200) NOT NULL default '',  
+  file varchar(200) NOT NULL default '',
   object varchar(200) NOT NULL default '',
   method varchar(200) NOT NULL default '',
-  PRIMARY KEY  (callback_type,`order`)
+  PRIMARY KEY (callback_type,`order`)
 ) ENGINE=MyISAM;
 
 INSERT IGNORE INTO tiki_events(callback_type,`order`,event,file,object,method) VALUES ('1', '20', 'user_registers', 'lib/registration/registrationlib.php', 'registrationlib', 'callback_tikiwiki_setup_custom_fields');
@@ -4864,7 +4863,7 @@
   type varchar(255) NOT NULL default 'text',
   `show` tinyint(1) NOT NULL default '1',
   size varchar(10) default '10',
-  PRIMARY KEY  (id)
+  PRIMARY KEY (id)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_actionlog_conf;
@@ -4888,7 +4887,6 @@
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Viewed', 'image gallery', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Uploaded', 'file gallery', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Uploaded', 'image gallery', 'n');
-INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Downloaded', 'file gallery', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('*', 'category', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('*', 'login', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Posted', 'message', 'n');
@@ -4898,6 +4896,7 @@
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Removed last version', 'wiki page', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Rollback', 'wiki page', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Removed', 'forum', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Downloaded', 'file gallery', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Posted', 'comment', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Replied', 'comment', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Updated', 'comment', 'n');
@@ -4927,7 +4926,7 @@
   tag varchar(30) NOT NULL default '',
   raw_tag varchar(50) NOT NULL default '',
   lang varchar(16) NULL,
-  PRIMARY KEY  (tagId)
+  PRIMARY KEY (tagId)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_freetagged_objects;
@@ -4936,7 +4935,7 @@
   objectId int(11) NOT NULL default 0,
   user varchar(200) NOT NULL default '',
   created int(14) NOT NULL default '0',
-  PRIMARY KEY  (tagId,user,objectId),
+  PRIMARY KEY (tagId,user,objectId),
   KEY (tagId),
   KEY (user),
   KEY (objectId)
@@ -4948,7 +4947,7 @@
   contributionId int(12) NOT NULL auto_increment,
   name varchar(100) default NULL,
   description varchar(250) default NULL,
-  PRIMARY KEY  (contributionId)
+  PRIMARY KEY (contributionId)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_contributions_assigned;
@@ -4955,107 +4954,29 @@
 CREATE TABLE tiki_contributions_assigned (
   contributionId int(12) NOT NULL,
   objectId int(12) NOT NULL,
-  PRIMARY KEY  (objectId, contributionId)
+  PRIMARY KEY (objectId, contributionId)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_webmail_contacts_ext;
 CREATE TABLE `tiki_webmail_contacts_ext` (
   `contactId` int(11) NOT NULL,
-  `fieldId` int(10) unsigned NOT NULL,
   `value` varchar(255) NOT NULL,
   `hidden` tinyint(1) NOT NULL,
+  `fieldId` int(10) unsigned NOT NULL,
   KEY `contactId` (`contactId`)
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_webmail_contacts_fields;
 CREATE TABLE `tiki_webmail_contacts_fields` (
-  `fieldId` int(10) unsigned NOT NULL auto_increment,
   `user` VARCHAR( 200 ) NOT NULL ,
   `fieldname` VARCHAR( 255 ) NOT NULL ,
   `order` int(2) NOT NULL default '0',
   `show` char(1) NOT NULL default 'n',
+  `fieldId` int(10) unsigned NOT NULL auto_increment,
   PRIMARY KEY ( `fieldId` ),
   INDEX ( `user` )
 ) ENGINE = MyISAM ;
 
-# ---------- mypage ----------------
-DROP TABLE IF EXISTS tiki_mypage;
-CREATE TABLE `tiki_mypage` (
-  `id` int(11) NOT NULL auto_increment,
-  `id_users` int(11) NOT NULL,
-  `id_types` int(11) NOT NULL,
-  `created` int(11) NOT NULL,
-  `modified` int(11) NOT NULL,
-  `viewed` int(11) NOT NULL,
-  `width` int(11) NOT NULL,
-  `height` int(11) NOT NULL,
-  `name` varchar(255) NOT NULL,
-  `description` varchar(255) NOT NULL,
-  `bgcolor` varchar(16) default NULL,
-  `winbgcolor` varchar(16) default NULL,
-  `wintitlecolor` varchar(16) default NULL,
-  `wintextcolor` varchar(16) default NULL,
-  `bgimage` varchar(255) default NULL,
-  `bgtype` enum ('color', 'imageurl') default 'color' NOT NULL,
-  `winbgimage` varchar(255) default NULL,
-  `winbgtype` enum ('color', 'imageurl') default 'color' NOT NULL,
-  PRIMARY KEY  (`id`),
-  KEY `id_users` (`id_users`),
-  KEY `name` (`name`),
-  KEY `id_types` (`id_types`)
-) ENGINE=MyISAM;
-
-DROP TABLE IF EXISTS tiki_mypagewin;
-CREATE TABLE `tiki_mypagewin` (
-  `id` int(11) NOT NULL auto_increment,
-  `id_mypage` int(11) NOT NULL,
-  `created` int(11) NOT NULL,
-  `modified` int(11) NOT NULL,
-  `viewed` int(11) NOT NULL,
-  `title` varchar(255) NOT NULL,
-  `inbody` enum('n','y') NOT NULL default 'n',
-  `modal` enum('n','y') NOT NULL default 'n',
-  `left` int(11) NOT NULL,
-  `top` int(11) NOT NULL,
-  `width` int(11) NOT NULL,
-  `height` int(11) NOT NULL,
-  `contenttype` varchar(31) default NULL,
-  `config` blob,
-  `content` blob,
-  PRIMARY KEY  (`id`),
-  KEY `id_mypage` (`id_mypage`)
-) ENGINE=MyISAM;
-
-DROP TABLE IF EXISTS tiki_mypage_types;
-CREATE TABLE `tiki_mypage_types` (
-  `id` int(11) NOT NULL auto_increment,
-  `created` int(11) NOT NULL,
-  `modified` int(11) NOT NULL,
-  `name` varchar(255) NOT NULL,
-  `description` varchar(255) NOT NULL,
-  `section` varchar(255) default NULL,
-  `permissions` varchar(255) default NULL,
-  `def_height` int(11) default NULL,
-  `def_width` int(11) default NULL,
-  `fix_dimensions` enum('no','yes') NOT NULL,
-  `def_bgcolor` varchar(8) default NULL,
-  `fix_bgcolor` enum('no','yes') NOT NULL,
-  `templateuser` int(11) NOT NULL,
-  PRIMARY KEY  (`id`),
-  KEY `name` (`name`)
-) ENGINE=MyISAM;
-
-DROP TABLE IF EXISTS tiki_mypage_types_components;
-CREATE TABLE `tiki_mypage_types_components` (
-  `id_mypage_types` int(11) NOT NULL,
-  `compname` varchar(255) NOT NULL,
-  `mincount` int(11) NOT NULL default '1',
-  `maxcount` int(11) NOT NULL default '1',
-  KEY `id_mypage_types` (`id_mypage_types`)
-) ENGINE=MyISAM;
-
-# ------------------------------------
-
 DROP TABLE IF EXISTS tiki_pages_translation_bits;
 CREATE TABLE `tiki_pages_translation_bits` (
   `translation_bit_id` int(14) NOT NULL auto_increment,
@@ -5088,6 +5009,19 @@
   `user` varchar(31) default NULL,
   `nick` varchar(31) default NULL,
   `msg` varchar(255) NOT NULL,
-  PRIMARY KEY  (`id`),
+  PRIMARY KEY (`id`),
   KEY `channel` (`channel`)
 );
+
+DROP TABLE IF EXISTS tiki_profile_symbols;
+CREATE TABLE tiki_profile_symbols (
+	`domain` VARCHAR(50) NOT NULL,
+	`profile` VARCHAR(50) NOT NULL,
+	`object` VARCHAR(50) NOT NULL,
+	`type` VARCHAR(20) NOT NULL,
+	`value` VARCHAR(50) NOT NULL,
+	`named` ENUM('y','n') NOT NULL,
+	`creation_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
+	PRIMARY KEY( `domain`, `profile`, `object` ),
+	INDEX(`named`)
+);

------------------------------------------------------------------------
r13490 | nyloth | 2008-07-10 03:49:40 -0400 (qui, 10 jul 2008) | 2 lines

[SVN] Create trunk from branches/1.10. branches/1.10 is now in feature-freeze. Every contributors should now commit in trunk/.



------------------------------------------------------------------------
r13479 | sylvieg | 2008-07-09 10:38:51 -0400 (qua, 09 jul 2008) | 1 line

[MOD]menu: possibility to change for a menu the folders icons by giving the path to the open folder icon + some fix to be able to overload the folder icons for a theme

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 13478)
+++ tiki.sql	(revision 13479)
@@ -2300,6 +2300,7 @@
   name varchar(200) NOT NULL default '',
   description text,
   type char(1) default NULL,
+  icon varchar(200) NULL default NULL,
   PRIMARY KEY  (menuId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------

------------------------------------------------------------------------
r13467 | Jyhem | 2008-07-08 14:04:27 -0400 (ter, 08 jul 2008) | 1 line

[ENH] Have actual permissions for admin article topics and types

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 13466)
+++ tiki.sql	(revision 13467)
@@ -2146,8 +2146,8 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','New article','tiki-edit_article.php',380,'feature_articles','tiki_p_read_article,tiki_p_edit_article','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Send articles','tiki-send_objects.php',385,'feature_articles,feature_comm','tiki_p_read_article,tiki_p_send_articles','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Received articles','tiki-received_articles.php',385,'feature_articles,feature_comm','tiki_p_read_article,tiki_p_admin_received_articles','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin topics','tiki-admin_topics.php',390,'feature_articles','tiki_p_read_article,tiki_p_admin_cms','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin types','tiki-article_types.php',395,'feature_articles','tiki_p_read_article,tiki_p_admin_cms','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin topics','tiki-admin_topics.php',390,'feature_articles','tiki_p_articles_admin_topics','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin types','tiki-article_types.php',395,'feature_articles','tiki_p_articles_admin_types','');
 
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Blogs','tiki-list_blogs.php',450,'feature_blogs','tiki_p_read_blog','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List blogs','tiki-list_blogs.php',455,'feature_blogs','tiki_p_read_blog','');
@@ -4322,6 +4322,8 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tasks_receive', 'Can receive tasks from other users', 'registered', 'user');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tasks_send', 'Can send tasks to other users', 'registered', 'user');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_topic_read', 'Can read a topic (Applies only to individual topic perms)', 'basic', 'cms');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_articles_admin_topics', 'Can admin article topics', 'editors', 'cms');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_articles_admin_types', 'Can admin article types', 'editors', 'cms');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tracker_view_ratings', 'Can view rating result for tracker items', 'basic', 'trackers');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tracker_vote_ratings', 'Can vote a rating for tracker items', 'registered', 'trackers');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_upload_files', 'Can upload files', 'registered', 'file galleries');

------------------------------------------------------------------------
r13422 | niclone | 2008-07-03 10:19:44 -0400 (qui, 03 jul 2008) | 3 lines

[FIX] minichat: also add sql tables



Index: tiki.sql
===================================================================
--- tiki.sql	(revision 13421)
+++ tiki.sql	(revision 13422)
@@ -5077,3 +5077,14 @@
 	PRIMARY KEY(page_id, version)
 );
 
+DROP TABLE IF EXISTS tiki_minichat;
+CREATE TABLE `tiki_minichat` (
+  `id` int(10) unsigned NOT NULL auto_increment,
+  `channel` varchar(31),
+  `ts` int(10) unsigned NOT NULL,
+  `user` varchar(31) default NULL,
+  `nick` varchar(31) default NULL,
+  `msg` varchar(255) NOT NULL,
+  PRIMARY KEY  (`id`),
+  KEY `channel` (`channel`)
+);

------------------------------------------------------------------------
r13390 | nyloth | 2008-06-30 10:22:48 -0400 (seg, 30 jun 2008) | 9 lines

[NEW] wiki pages: 
  * allow users that have tiki_p_admin_wiki perm to change the wiki authors style for each page,
  * allow admins to choose the position of the bar of actions buttons (save, cancel, preview...) : top (above textarea), bottom, both + factorize code of buttons for preview mode and for normal edit mode,
  * add a feature 'Save Draft' in wiki admin page, to be able to hide the 'Save Draft' button when editing a wiki page,
  * display a message ($date - Version $num of this page has been saved by $user) after a page has been saved,
  * css: by default, put wiki actions buttons on the right when they are above textarea (position = top),
  * in some places, use the new way of handling ':' chars at the end of translated strings



Index: tiki.sql
===================================================================
--- tiki.sql	(revision 13389)
+++ tiki.sql	(revision 13390)
@@ -2546,6 +2546,7 @@
   is_html tinyint(1) default 0,
   created int(14),
   wysiwyg char(1) default NULL,
+  wiki_authors_style varchar(20) NOT NULL default '',
   PRIMARY KEY  (page_id),
   UNIQUE KEY pageName (pageName),
   KEY data (data(255)),

------------------------------------------------------------------------
r13368 | pkdille | 2008-06-26 16:07:24 -0400 (qui, 26 jun 2008) | 1 line

[FIX] Application menu (42): Add action log items links also if user has tiki_p_view_actionlog or tiki_p_view_actionlog_owngroups perms

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 13367)
+++ tiki.sql	(revision 13368)
@@ -2274,6 +2274,8 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Tiki Logs','tiki-syslog.php',1245,'','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Security Admin','tiki-admin_security.php',1250,'','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_view_actionlog','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_view_actionlog_owngroups','');
 
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_wiki_comments','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_article_comments','tiki_p_admin','');

------------------------------------------------------------------------
r13284 | Jyhem | 2008-06-18 13:17:36 -0400 (qua, 18 jun 2008) | 1 line

[ENH] Allow permission for viewing articles headings only

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 13283)
+++ tiki.sql	(revision 13284)
@@ -2133,8 +2133,11 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','System gallery','tiki-list_gallery.php?galleryId=0',320,'feature_galleries','tiki_p_admin_galleries','');
 
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Articles','tiki-view_articles.php',350,'feature_articles','tiki_p_read_article','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Articles','tiki-view_articles.php',350,'feature_articles','tiki_p_articles_read_heading','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Articles home','tiki-view_articles.php',355,'feature_articles','tiki_p_read_article','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Articles home','tiki-view_articles.php',355,'feature_articles','tiki_p_articles_read_heading','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List articles','tiki-list_articles.php',360,'feature_articles','tiki_p_read_article','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List articles','tiki-list_articles.php',360,'feature_articles','tiki_p_articles_read_heading','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Rankings','tiki-cms_rankings.php',365,'feature_articles,feature_cms_rankings','tiki_p_read_article','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Submit article','tiki-edit_submission.php',370,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_submit_article','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','View submissions','tiki-list_submissions.php',375,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_submit_article','');
@@ -4288,6 +4291,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_post_comments', 'Can post new comments', 'registered', 'comments');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_post_shoutbox', 'Can post messages in shoutbox', 'basic', 'shoutbox');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_read_article', 'Can read articles', 'basic', 'cms');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_articles_read_heading', 'Can read article headings', 'basic', 'cms');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_read_blog', 'Can read blogs', 'basic', 'blogs');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_read_comments', 'Can read comments', 'basic', 'comments');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_remove', 'Can remove', 'editors', 'wiki');

------------------------------------------------------------------------
r13239 | sylvieg | 2008-06-13 13:14:26 -0400 (sex, 13 jun 2008) | 1 line

[MOD]tracker: 2 new characteristic to a field -> visible only by some groups+admin, editable by soem groups+admin -> to do: not only test the default group but all the groups

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 13238)
+++ tiki.sql	(revision 13239)
@@ -3440,6 +3440,8 @@
   description text,
   itemChoices text,
   errorMsg text,
+  visibleBy text,
+  editableBy text,
   PRIMARY KEY  (fieldId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------

------------------------------------------------------------------------
r13233 | sylvieg | 2008-06-13 06:06:05 -0400 (sex, 13 jun 2008) | 1 line

[FIX]missing perm

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 13232)
+++ tiki.sql	(revision 13233)
@@ -4368,6 +4368,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_view_source', 'Can view source of wiki pages', 'basic', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_vote_ratings', 'Can participate to rating of wiki pages', 'registered', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_file_gallery', 'Can assign perms to file gallery', 'admin', 'file galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_image_gallery', 'Can assign perms to image gallery', 'admin', 'image galleries');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_actionlog', 'Can view action log', 'registered', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_actionlog_owngroups for users of his own groups', 'Can view action log', 'registered', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_blog', 'Can assign perms to blog', 'admin', 'blogs');

------------------------------------------------------------------------
r13218 | sylvieg | 2008-06-12 06:22:57 -0400 (qui, 12 jun 2008) | 1 line

[FIX]db: achnge also permName size to 40 in tiki.sql+ remove the side effect with tiki_p_assign_perm_image_galler

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 13217)
+++ tiki.sql	(revision 13218)
@@ -4104,7 +4104,7 @@
 DROP TABLE IF EXISTS users_grouppermissions;
 CREATE TABLE users_grouppermissions (
   groupName varchar(255) NOT NULL default '',
-  permName varchar(31) NOT NULL default '',
+  permName varchar(40) NOT NULL default '',
   value char(1) default '',
   PRIMARY KEY  (groupName(30),permName)
 ) ENGINE=MyISAM;
@@ -4147,7 +4147,7 @@
 DROP TABLE IF EXISTS users_objectpermissions;
 CREATE TABLE users_objectpermissions (
   groupName varchar(255) NOT NULL default '',
-  permName varchar(31) NOT NULL default '',
+  permName varchar(40) NOT NULL default '',
   objectType varchar(20) NOT NULL default '',
   objectId varchar(32) NOT NULL default '',
   PRIMARY KEY  (objectId, objectType, groupName(30),permName)
@@ -4163,7 +4163,7 @@
 
 DROP TABLE IF EXISTS users_permissions;
 CREATE TABLE users_permissions (
-  permName varchar(31) NOT NULL default '',
+  permName varchar(40) NOT NULL default '',
   permDesc varchar(250) default NULL,
   level varchar(80) default NULL,
   type varchar(20) default NULL,

------------------------------------------------------------------------
r13217 | Jyhem | 2008-06-12 05:07:04 -0400 (qui, 12 jun 2008) | 1 line

[ENH] Yesterday's commit about tracker parsed descriptions needs these database updates

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 13216)
+++ tiki.sql	(revision 13217)
@@ -3557,6 +3557,7 @@
   trackerId int(12) NOT NULL auto_increment,
   name varchar(255) default NULL,
   description text,
+  descriptionIsParsed varchar(1) default NULL,
   created int(14) default NULL,
   lastModif int(14) default NULL,
   showCreated char(1) default NULL,

------------------------------------------------------------------------
r13159 | sylvieg | 2008-06-06 13:47:07 -0400 (sex, 06 jun 2008) | 1 line

[MOD]tracker: to have the possibility to have customize error message in TRACKER (useful when using pretty tracker where you do not see the field name

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 13158)
+++ tiki.sql	(revision 13159)
@@ -3439,6 +3439,7 @@
   isMultilingual char(1) default 'n',
   description text,
   itemChoices text,
+  errorMsg text,
   PRIMARY KEY  (fieldId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------

------------------------------------------------------------------------
r13101 | sept_7 | 2008-06-03 12:37:49 -0400 (ter, 03 jun 2008) | 2 lines

[FIX] TikiTests permission are also added to tiki.sql


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 13100)
+++ tiki.sql	(revision 13101)
@@ -4390,6 +4390,9 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_fgal_path', 'Can view file galleries path', 'basic', 'file galleries');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_site_report', 'Can report a link to the webmaster', 'basic', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_as_template', 'Can use the page as a tracker template', 'basic', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_tikitests', 'Can admin the TikiTests', 'admin', 'tikitests');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_tikitests', 'Can edit TikiTests', 'editors', 'tikitests');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_play_tikitests', 'Can replay the TikiTests', 'registered', 'tikitests');
 # --------------------------------------------------------
 
 #

------------------------------------------------------------------------
r13085 | sylvieg | 2008-06-02 12:06:54 -0400 (seg, 02 jun 2008) | 1 line

[FIX]tracker: to be able to use a page as a wiki template in pretty TRACKER/TRACKERLIST: the page must have the perm tiki_p_use_as_template

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 13084)
+++ tiki.sql	(revision 13085)
@@ -4389,6 +4389,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_fgal_explorer', 'Can view file galleries explorer', 'basic', 'file galleries');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_fgal_path', 'Can view file galleries path', 'basic', 'file galleries');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_site_report', 'Can report a link to the webmaster', 'basic', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_as_template', 'Can use the page as a tracker template', 'basic', 'wiki');
 # --------------------------------------------------------
 
 #

------------------------------------------------------------------------
r12932 | sylvieg | 2008-05-22 08:55:18 -0400 (qui, 22 mai 2008) | 1 line

[MOD]actionlog: new perm to see action log of users of all your groups

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 12931)
+++ tiki.sql	(revision 12932)
@@ -4367,6 +4367,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_vote_ratings', 'Can participate to rating of wiki pages', 'registered', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_file_gallery', 'Can assign perms to file gallery', 'admin', 'file galleries');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_actionlog', 'Can view action log', 'registered', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_actionlog_owngroups for users of his own groups', 'Can view action log', 'registered', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_blog', 'Can assign perms to blog', 'admin', 'blogs');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tell_a_friend', 'Can send a link to a friend', 'Basic', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_file_galleries', 'Can list file galleries', 'basic', 'file galleries');

------------------------------------------------------------------------
r12907 | etuate | 2008-05-20 18:10:31 -0400 (ter, 20 mai 2008) | 1 line

[UPDATE] SQL files updated when midfying tiki-map.phtml to tiki-map.php for updates made on tiki.sql adn tiki1.9to1.10_sql

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 12906)
+++ tiki.sql	(revision 12907)
@@ -2175,8 +2175,8 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List FAQs','tiki-list_faqs.php',665,'feature_faqs','tiki_p_view_faqs','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin FAQs','tiki-list_faqs.php',660,'feature_faqs','tiki_p_admin_faqs','');
 
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Maps','tiki-map.phtml',700,'feature_maps','tiki_p_map_view','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','View Maps','tiki-map.phtml',703,'feature_maps','tiki_p_map_view','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Maps','tiki-map.php',700,'feature_maps','tiki_p_map_view','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','View Maps','tiki-map.php',703,'feature_maps','tiki_p_map_view','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Mapfiles','tiki-map_edit.php',705,'feature_maps','tiki_p_map_view','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Layer management','tiki-map_upload.php',710,'feature_maps','tiki_p_map_edit','');
 

------------------------------------------------------------------------
r12859 | sylvieg | 2008-05-16 13:53:12 -0400 (sex, 16 mai 2008) | 1 line

missing tiki_p_edit_categories

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 12858)
+++ tiki.sql	(revision 12859)
@@ -4241,6 +4241,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit', 'Can edit pages', 'registered', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_article', 'Can edit articles', 'editors', 'cms');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_categorized', 'Can edit categorized items', 'registered', 'category');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_categories', 'Can edit items in categories', 'registered', 'category');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_comments', 'Can edit all comments', 'editors', 'comments');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_content_templates', 'Can edit content templates', 'editors', 'content templates');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_cookies', 'Can admin cookies', 'editors', 'tiki');

------------------------------------------------------------------------
r12804 | xavidp | 2008-05-12 14:47:51 -0400 (seg, 12 mai 2008) | 1 line

[FIX] changed some labels which generated confusion to many new tiki admins relted to Tiki cache and Wiki cache

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 12803)
+++ tiki.sql	(revision 12804)
@@ -2239,7 +2239,7 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Calendar','tiki-admin_calendars.php',1065,'feature_calendar','tiki_p_admin_calendar','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Users','tiki-adminusers.php',1070,'','tiki_p_admin_users','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Groups','tiki-admingroups.php',1075,'','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Cache','tiki-list_cache.php',1080,'cachepages','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Wiki Cache','tiki-list_cache.php',1080,'cachepages','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Modules','tiki-admin_modules.php',1085,'','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Links','tiki-admin_links.php',1090,'feature_featuredLinks','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Hotwords','tiki-admin_hotwords.php',1095,'feature_hotwords','tiki_p_admin','');
@@ -2265,7 +2265,7 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Edit languages','tiki-edit_languages.php',1200,'lang_use_db','tiki_p_edit_languages','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Integrator','tiki-admin_integrator.php',1205,'feature_integrator','tiki_p_admin_integrator','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','phpinfo','tiki-phpinfo.php',1215,'','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','System Admin','tiki-admin_system.php',1230,'','tiki_p_clean_cache','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Tiki Cache/Sys Admin','tiki-admin_system.php',1230,'','tiki_p_clean_cache','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Score','tiki-admin_score.php',1235,'feature_score','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin mods','tiki-mods.php',1240,'','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Tiki Logs','tiki-syslog.php',1245,'','tiki_p_admin','');

------------------------------------------------------------------------
r12750 | sylvieg | 2008-05-04 14:42:04 -0400 (dom, 04 mai 2008) | 1 line

[FIX]tracker: antoher index

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 12749)
+++ tiki.sql	(revision 12750)
@@ -3504,6 +3504,7 @@
   PRIMARY KEY  (itemId,fieldId,lang),
   INDEX fieldId (fieldId),
   INDEX value (value(250)),
+  INDEX lang (lang),
   FULLTEXT KEY ft (value)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------

------------------------------------------------------------------------
r12743 | sylvieg | 2008-05-02 16:34:44 -0400 (sex, 02 mai 2008) | 1 line

[FIX]tracker: 2 indexes that completly change perf in lsit items

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 12742)
+++ tiki.sql	(revision 12743)
@@ -3502,6 +3502,8 @@
   lang char(16) default NULL,
   value text,
   PRIMARY KEY  (itemId,fieldId,lang),
+  INDEX fieldId (fieldId),
+  INDEX value (value(250)),
   FULLTEXT KEY ft (value)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------

------------------------------------------------------------------------
r12643 | sylvieg | 2008-04-22 09:10:28 -0400 (ter, 22 abr 2008) | 1 line

sync

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 12642)
+++ tiki.sql	(revision 12643)
@@ -541,7 +541,7 @@
   user varchar(200) default '',
   trackbacks_to text,
   trackbacks_from text,
-  title varchar(80) default NULL,
+  title varchar(255) default NULL,
   priv varchar(1) default NULL,
   PRIMARY KEY  (postId),
   KEY data (data(255)),

------------------------------------------------------------------------
r12592 | nyloth | 2008-04-17 11:08:18 -0400 (qui, 17 abr 2008) | 1 line

[NEW] quicktags: new 'Email Address' quicktag.

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 12591)
+++ tiki.sql	(revision 12592)
@@ -4538,6 +4538,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('list bullets', '*text', 'pics/icons/text_list_bullets.png', 'wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('list numbers', '#text', 'pics/icons/text_list_numbers.png', 'wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Email Address','[mailto:text|text]','pics/icons/email.png','wiki');
 
 # maps
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New wms Metadata','METADATA\r\n		\"wms_name\" \"myname\"\r\n 	"wms_srs" "EPSG:4326"\r\n 	"wms_server_version" " "\r\n 	"wms_layers" "mylayers"\r\n 	"wms_request" "myrequest"\r\n 	"wms_format" " "\r\n 	"wms_time" " "\r\n END', 'pics/icons/tag_blue_add.png','maps');
@@ -4584,6 +4585,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Email Address','[mailto:text|text]','pics/icons/email.png','trackers');
 
 # blogs
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','blogs');
@@ -4603,6 +4605,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Email Address','[mailto:text|text]','pics/icons/email.png','blogs');
 
 # calendar
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','calendar');
@@ -4641,6 +4644,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Email Address','[mailto:text|text]','pics/icons/email.png','articles');
 
 # faqs
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','faqs');
@@ -4660,6 +4664,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Email Address','[mailto:text|text]','pics/icons/email.png','faqs');
 
 # forums
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','forums');
@@ -4679,6 +4684,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('Email Address','[mailto:text|text]','pics/icons/email.png','forums');
 
 #translated objects table
 DROP TABLE IF EXISTS tiki_translated_objects;

------------------------------------------------------------------------
r12564 | sylvieg | 2008-04-16 10:49:06 -0400 (qua, 16 abr 2008) | 1 line

work on the way

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 12563)
+++ tiki.sql	(revision 12564)
@@ -2540,6 +2540,7 @@
   lockedby varchar(200) default NULL,
   is_html tinyint(1) default 0,
   created int(14),
+  wysiwyg char(1) default NULL,
   PRIMARY KEY  (page_id),
   UNIQUE KEY pageName (pageName),
   KEY data (data(255)),

------------------------------------------------------------------------
r12503 | sylvieg | 2008-04-11 14:10:10 -0400 (sex, 11 abr 2008) | 1 line

[MOD]site identity: a site report bar at teh bottom that allows to have 2 links: report the webmaster and send a link

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 12502)
+++ tiki.sql	(revision 12503)
@@ -4382,6 +4382,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES('tiki_p_clean_cache', 'Can clean cache', 'editors', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_fgal_explorer', 'Can view file galleries explorer', 'basic', 'file galleries');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_fgal_path', 'Can view file galleries path', 'basic', 'file galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_site_report', 'Can report a link to the webmaster', 'basic', 'tiki');
 # --------------------------------------------------------
 
 #

------------------------------------------------------------------------
r12324 | marclaporte | 2008-04-02 21:56:12 -0400 (qua, 02 abr 2008) | 1 line

[FIX] Search menu item now checks for permission

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 12323)
+++ tiki.sql	(revision 12324)
@@ -2070,7 +2070,7 @@
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Home','./',10,'','','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Search','tiki-searchindex.php',13,'feature_search','','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Search','tiki-searchindex.php',13,'feature_search','tiki_p_search','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Contact us','tiki-contact.php',20,'feature_contact','','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Stats','tiki-stats.php',23,'feature_stats','tiki_p_view_stats','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Categories','tiki-browse_categories.php',25,'feature_categories','tiki_p_view_categories','');

------------------------------------------------------------------------
r12317 | sylvieg | 2008-04-02 14:12:32 -0400 (qua, 02 abr 2008) | 1 line

[FIX]register: can cumulate 'but need admin approval' + 'validate user by email'

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 12316)
+++ tiki.sql	(revision 12317)
@@ -4436,6 +4436,7 @@
   valid varchar(32) default NULL,
   unsuccessful_logins int(14) default 0,
   openid_url varchar(255) default NULL,
+  waiting char(1) default NULL,
   PRIMARY KEY  (userId),
   KEY login (login),
   KEY score (score),

------------------------------------------------------------------------
r12251 | luciash | 2008-03-30 10:25:59 -0400 (dom, 30 mar 2008) | 1 line

[SVN] svn:keywords setting - adding property for keyword Id ($Id: ... $) expansion

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 12250)
+++ tiki.sql	(revision 12251)

Property changes on: tiki.sql
___________________________________________________________________
Added: svn:keywords
## -0,0 +1 ##
+Id
\ No newline at end of property

------------------------------------------------------------------------
r12238 | sylvieg | 2008-03-29 19:14:16 -0400 (sÃ¡b, 29 mar 2008) | 1 line

[FIX]perm: tiki_p_search on new install was giving admin perm

Index: tiki.sql
===================================================================
--- tiki.sql	(revision 12237)
+++ tiki.sql	(revision 12238)
@@ -4378,7 +4378,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_subscribe_groups', 'Can subscribe to groups', 'registered', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_detach_translation', 'Can remove association between two pages in a translation set', 'registered', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_unassign_freetags', 'Can unassign tags from an object', 'basic', 'freetags');
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_search', 'Can search', 'basic', 'tiki', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_search', 'Can search', 'basic', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES('tiki_p_clean_cache', 'Can clean cache', 'editors', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_fgal_explorer', 'Can view file galleries explorer', 'basic', 'file galleries');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_fgal_path', 'Can view file galleries path', 'basic', 'file galleries');

------------------------------------------------------------------------
r12162 | nyloth | 2008-03-24 19:30:23 -0400 (seg, 24 mar 2008) | 1 line

[MOD] SVN Migration: reorganize the directories structure of the repository after the import made by cvs2svn


------------------------------------------------------------------------
r12161 | nyloth | 2008-03-24 19:26:12 -0400 (seg, 24 mar 2008) | 1 line

[MOD] SVN Migration: reorganize the directories structure of the repository after the import made by cvs2svn


------------------------------------------------------------------------
r12032 | nyloth | 2008-03-15 20:07:13 -0400 (sÃ¡b, 15 mar 2008) | 4 lines

[NEW] file galleries: filegal explorer and path can now be disabled (by gallery) + new perms 'tiki_p_view_fgal_explorer' (Can view file galleries explorer) and 'tiki_p_view_fgal_path' (Can view file galleries path) to limit usage of explorer and / or path to some groups of users only (only registered users will have those perms by default).

[FIX] file galleries: do not leave edition mode when saving new gallery params and 'viewitem' checkbox is not checked.


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 12031)
+++ tiki.sql	(revision 12032)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2008-03-15 21:11:14 $
-# $Author: sylvieg $
+# $Date: 2008-03-16 00:06:59 $
+# $Author: nyloth $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -1324,6 +1324,8 @@
   show_last_user char(1) default NULL,
   show_comment char(1) default NULL,
   show_files char(1) default NULL,
+  show_explorer char(1) default NULL,
+  show_path char(1) default NULL,
   PRIMARY KEY  (galleryId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
@@ -4378,6 +4380,8 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_unassign_freetags', 'Can unassign tags from an object', 'basic', 'freetags');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_search', 'Can search', 'basic', 'tiki', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES('tiki_p_clean_cache', 'Can clean cache', 'editors', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_fgal_explorer', 'Can view file galleries explorer', 'basic', 'file galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_fgal_path', 'Can view file galleries path', 'basic', 'file galleries');
 # --------------------------------------------------------
 
 #

------------------------------------------------------------------------
r12028 | sylvieg | 2008-03-15 17:11:16 -0400 (sÃ¡b, 15 mar 2008) | 2 lines

[MOD]gal: new perm tiki_p_list_iamge_galleries + anonymous can upload with antibot + delete the old watches in tiki_mail_events ->not to read the watches


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 12027)
+++ tiki.sql	(revision 12028)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2008-03-13 22:52:51 $
+# $Date: 2008-03-15 21:11:14 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -1720,7 +1720,7 @@
   lon float default NULL,
   lat float default NULL,
   created int(14) default NULL,
-  user varchar(200) NOT NULL default '',
+  user varchar(200) default '',
   hits int(14) default NULL,
   path varchar(255) default NULL,
   PRIMARY KEY  (imageId),
@@ -2123,9 +2123,9 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Structures','tiki-admin_structures.php',250,'feature_wiki','tiki_p_view','');
 
 
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Image Galleries','tiki-galleries.php',300,'feature_galleries','tiki_p_view_image_gallery','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Galleries','tiki-galleries.php',305,'feature_galleries','tiki_p_view_image_gallery','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Rankings','tiki-galleries_rankings.php',310,'feature_galleries,feature_gal_rankings','tiki_p_view_image_gallery','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Image Galleries','tiki-galleries.php',300,'feature_galleries','tiki_p_list_image_galleries','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Galleries','tiki-galleries.php',305,'feature_galleries','tiki_p_list_image_galleries','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Rankings','tiki-galleries_rankings.php',310,'feature_galleries,feature_gal_rankings','tiki_p_list_image_galleries','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Upload image','tiki-upload_image.php',315,'feature_galleries','tiki_p_upload_images','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Directory batch','tiki-batch_upload.php',318,'feature_galleries,feature_gal_batch','tiki_p_batch_upload','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','System gallery','tiki-list_gallery.php?galleryId=0',320,'feature_galleries','tiki_p_admin_galleries','');
@@ -4328,6 +4328,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_freetags', 'Can browse freetags', 'basic', 'freetags');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_html_pages', 'Can view HTML pages', 'basic', 'html pages');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_image_gallery', 'Can view image galleries', 'basic', 'image galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_image_galleries', 'Can list image galleries', 'basic', 'image galleries');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_integrator', 'Can view integrated repositories', 'basic', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_quiz_stats', 'Can view quiz stats', 'basic', 'quizzes');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_referer_stats', 'Can view referer stats', 'editors', 'tiki');

------------------------------------------------------------------------
r11996 | sylvieg | 2008-03-13 18:52:52 -0400 (qui, 13 mar 2008) | 2 lines

[FIX]notification: do not loose admin notifications created in 1.9


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 11995)
+++ tiki.sql	(revision 11996)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2008-03-13 21:14:04 $
+# $Date: 2008-03-13 22:52:51 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -3920,7 +3920,7 @@
   url varchar(250) default NULL,
   email varchar(200) default NULL,
   KEY watchId (watchId),
-  PRIMARY KEY  (`user`(100),event,object(100))
+  PRIMARY KEY  (`user`(50),event,object(100),email(50))
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 

------------------------------------------------------------------------
r11995 | sylvieg | 2008-03-13 17:14:04 -0400 (qui, 13 mar 2008) | 2 lines

[FIX]db: always name index,key... to avoid duplication


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 11994)
+++ tiki.sql	(revision 11995)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2008-03-13 21:00:46 $
+# $Date: 2008-03-13 21:14:04 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -3919,7 +3919,7 @@
   type varchar(200) default NULL,
   url varchar(250) default NULL,
   email varchar(200) default NULL,
-  KEY (watchId),
+  KEY watchId (watchId),
   PRIMARY KEY  (`user`(100),event,object(100))
 ) ENGINE=MyISAM;
 # --------------------------------------------------------

------------------------------------------------------------------------
r11994 | sylvieg | 2008-03-13 17:00:48 -0400 (qui, 13 mar 2008) | 2 lines

[MOD]watch: cleaning - replace hash with an autoincrement id


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 11993)
+++ tiki.sql	(revision 11994)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2008-03-11 22:01:11 $
-# $Author: lphuberdeau $
+# $Date: 2008-03-13 21:00:46 $
+# $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -3911,14 +3911,15 @@
 
 DROP TABLE IF EXISTS tiki_user_watches;
 CREATE TABLE tiki_user_watches (
+  watchId int(12) NOT NULL auto_increment,
   user varchar(200) NOT NULL default '',
   event varchar(40) NOT NULL default '',
   object varchar(200) NOT NULL default '',
-  hash varchar(32) default NULL,
   title varchar(250) default NULL,
   type varchar(200) default NULL,
   url varchar(250) default NULL,
   email varchar(200) default NULL,
+  KEY (watchId),
   PRIMARY KEY  (`user`(100),event,object(100))
 ) ENGINE=MyISAM;
 # --------------------------------------------------------

------------------------------------------------------------------------
r11838 | lphuberdeau | 2008-03-11 18:01:15 -0400 (ter, 11 mar 2008) | 2 lines

[NEW] Quantification of the translation up-to-date-ness.


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 11837)
+++ tiki.sql	(revision 11838)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2008-03-10 16:26:29 $
-# $Author: sylvieg $
+# $Date: 2008-03-11 22:01:11 $
+# $Author: lphuberdeau $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -5030,3 +5030,14 @@
   KEY(`original_translation_bit`),
   KEY(`source_translation_bit`)
 );
+
+DROP TABLE IF EXISTS tiki_pages_changes;
+CREATE TABLE tiki_pages_changes (
+	page_id int(14),
+	version int(10),
+	segments_added int(10),
+	segments_removed int(10),
+	segments_total int(10),
+	PRIMARY KEY(page_id, version)
+);
+

------------------------------------------------------------------------
r11814 | sylvieg | 2008-03-10 12:26:29 -0400 (seg, 10 mar 2008) | 2 lines

[MOD]perm: new perm tiki_p_clean_cache to allow editor to clean cache


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 11813)
+++ tiki.sql	(revision 11814)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2008-03-05 22:33:29 $
+# $Date: 2008-03-10 16:26:29 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -2229,6 +2229,7 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_contribution','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_users','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_menu','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_clean_cache','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin home','tiki-admin.php',1051,'','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Live support','tiki-live_support_admin.php',1055,'feature_live_support','tiki_p_live_support_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Live support','tiki-live_support_admin.php',1055,'feature_live_support','user_is_operator','');
@@ -2262,7 +2263,7 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Edit languages','tiki-edit_languages.php',1200,'lang_use_db','tiki_p_edit_languages','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Integrator','tiki-admin_integrator.php',1205,'feature_integrator','tiki_p_admin_integrator','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','phpinfo','tiki-phpinfo.php',1215,'','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','System Admin','tiki-admin_system.php',1230,'','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','System Admin','tiki-admin_system.php',1230,'','tiki_p_clean_cache','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Score','tiki-admin_score.php',1235,'feature_score','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin mods','tiki-mods.php',1240,'','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Tiki Logs','tiki-syslog.php',1245,'','tiki_p_admin','');
@@ -4374,6 +4375,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_detach_translation', 'Can remove association between two pages in a translation set', 'registered', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_unassign_freetags', 'Can unassign tags from an object', 'basic', 'freetags');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_search', 'Can search', 'basic', 'tiki', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES('tiki_p_clean_cache', 'Can clean cache', 'editors', 'tiki');
 # --------------------------------------------------------
 
 #

------------------------------------------------------------------------
r11771 | sylvieg | 2008-03-05 18:33:30 -0400 (qua, 05 mar 2008) | 2 lines

[MOD]perm: new perm tiki_p_search (to control the search box in site_identity for site where nothing is seen when not logged in


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 11770)
+++ tiki.sql	(revision 11771)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2008-03-05 14:25:11 $
-# $Author: marclaporte $
+# $Date: 2008-03-05 22:33:29 $
+# $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4373,6 +4373,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_subscribe_groups', 'Can subscribe to groups', 'registered', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_detach_translation', 'Can remove association between two pages in a translation set', 'registered', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_unassign_freetags', 'Can unassign tags from an object', 'basic', 'freetags');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_search', 'Can search', 'basic', 'tiki', 'y');
 # --------------------------------------------------------
 
 #

------------------------------------------------------------------------
r11757 | marclaporte | 2008-03-05 10:25:11 -0400 (qua, 05 mar 2008) | 2 lines

Like in 1.9.x, on new installs, removing (from default menu) links for DSN and External wikis, which are less used features and which are accessible by tiki-admin.php


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 11756)
+++ tiki.sql	(revision 11757)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2008-03-05 14:23:32 $
+# $Date: 2008-03-05 14:25:11 $
 # $Author: marclaporte $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -2262,8 +2262,6 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Edit languages','tiki-edit_languages.php',1200,'lang_use_db','tiki_p_edit_languages','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Integrator','tiki-admin_integrator.php',1205,'feature_integrator','tiki_p_admin_integrator','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','phpinfo','tiki-phpinfo.php',1215,'','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','DSN','tiki-admin_dsn.php',1220,'','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','External wikis','tiki-admin_external_wikis.php',1225,'','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','System Admin','tiki-admin_system.php',1230,'','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Score','tiki-admin_score.php',1235,'feature_score','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin mods','tiki-mods.php',1240,'','tiki_p_admin','');

------------------------------------------------------------------------
r11756 | marclaporte | 2008-03-05 10:23:32 -0400 (qua, 05 mar 2008) | 2 lines

[FIX] Menu item for cache should only appear if feature is on.


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 11755)
+++ tiki.sql	(revision 11756)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2008-03-05 12:58:40 $
+# $Date: 2008-03-05 14:23:32 $
 # $Author: marclaporte $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -2236,7 +2236,7 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Calendar','tiki-admin_calendars.php',1065,'feature_calendar','tiki_p_admin_calendar','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Users','tiki-adminusers.php',1070,'','tiki_p_admin_users','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Groups','tiki-admingroups.php',1075,'','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Cache','tiki-list_cache.php',1080,'','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Cache','tiki-list_cache.php',1080,'cachepages','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Modules','tiki-admin_modules.php',1085,'','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Links','tiki-admin_links.php',1090,'feature_featuredLinks','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Hotwords','tiki-admin_hotwords.php',1095,'feature_hotwords','tiki_p_admin','');

------------------------------------------------------------------------
r11750 | marclaporte | 2008-03-05 08:58:40 -0400 (qua, 05 mar 2008) | 2 lines

[FIX] Adding drop tables for mypages and translation bits on clean install, to be consistent with the rest of the script.


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 11749)
+++ tiki.sql	(revision 11750)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2008-03-04 18:45:55 $
-# $Author: sylvieg $
+# $Date: 2008-03-05 12:58:40 $
+# $Author: marclaporte $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4939,6 +4939,7 @@
 ) ENGINE = MyISAM ;
 
 # ---------- mypage ----------------
+DROP TABLE IF EXISTS tiki_mypage;
 CREATE TABLE `tiki_mypage` (
   `id` int(11) NOT NULL auto_increment,
   `id_users` int(11) NOT NULL,
@@ -4964,6 +4965,7 @@
   KEY `id_types` (`id_types`)
 ) ENGINE=MyISAM;
 
+DROP TABLE IF EXISTS tiki_mypagewin;
 CREATE TABLE `tiki_mypagewin` (
   `id` int(11) NOT NULL auto_increment,
   `id_mypage` int(11) NOT NULL,
@@ -4984,6 +4986,7 @@
   KEY `id_mypage` (`id_mypage`)
 ) ENGINE=MyISAM;
 
+DROP TABLE IF EXISTS tiki_mypage_types;
 CREATE TABLE `tiki_mypage_types` (
   `id` int(11) NOT NULL auto_increment,
   `created` int(11) NOT NULL,
@@ -5002,6 +5005,7 @@
   KEY `name` (`name`)
 ) ENGINE=MyISAM;
 
+DROP TABLE IF EXISTS tiki_mypage_types_components;
 CREATE TABLE `tiki_mypage_types_components` (
   `id_mypage_types` int(11) NOT NULL,
   `compname` varchar(255) NOT NULL,
@@ -5010,6 +5014,9 @@
   KEY `id_mypage_types` (`id_mypage_types`)
 ) ENGINE=MyISAM;
 
+# ------------------------------------
+
+DROP TABLE IF EXISTS tiki_pages_translation_bits;
 CREATE TABLE `tiki_pages_translation_bits` (
   `translation_bit_id` int(14) NOT NULL auto_increment,
   `page_id` int(14) NOT NULL,
@@ -5022,5 +5029,3 @@
   KEY(`original_translation_bit`),
   KEY(`source_translation_bit`)
 );
-
-# ------------------------------------

------------------------------------------------------------------------
r11733 | sylvieg | 2008-03-04 14:45:55 -0400 (ter, 04 mar 2008) | 2 lines

[MOD]freetag: new perm to unassign freetags


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 11732)
+++ tiki.sql	(revision 11733)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2008-03-04 15:45:00 $
-# $Author: lphuberdeau $
+# $Date: 2008-03-04 18:45:55 $
+# $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4374,6 +4374,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_menu_option', 'Can edit menu option', 'admin', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_subscribe_groups', 'Can subscribe to groups', 'registered', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_detach_translation', 'Can remove association between two pages in a translation set', 'registered', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_unassign_freetags', 'Can unassign tags from an object', 'basic', 'freetags');
 # --------------------------------------------------------
 
 #

------------------------------------------------------------------------
r11723 | lphuberdeau | 2008-03-04 11:45:04 -0400 (ter, 04 mar 2008) | 2 lines

[FIX] Add a permission for translation detach to prevent google from breaking links


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 11722)
+++ tiki.sql	(revision 11723)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2008-02-29 19:30:40 $
-# $Author: jyhem $
+# $Date: 2008-03-04 15:45:00 $
+# $Author: lphuberdeau $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4373,6 +4373,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_menu', 'Can edit menu', 'admin', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_menu_option', 'Can edit menu option', 'admin', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_subscribe_groups', 'Can subscribe to groups', 'registered', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_detach_translation', 'Can remove association between two pages in a translation set', 'registered', 'tiki');
 # --------------------------------------------------------
 
 #

------------------------------------------------------------------------
r11565 | jyhem | 2008-02-29 15:30:41 -0400 (sex, 29 fev 2008) | 2 lines

[ENH] Less differences in databases upgraded from 1.9 and clean installs (using diffsql.sh)


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 11564)
+++ tiki.sql	(revision 11565)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2008-02-27 15:18:42 $
-# $Author: nyloth $
+# $Date: 2008-02-29 19:30:40 $
+# $Author: jyhem $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -406,7 +406,7 @@
   show_pubdate varchar(1) default 'y',
   show_expdate varchar(1) default NULL,
   show_reads varchar(1) default 'y',
-  show_size varchar(1) default 'y',
+  show_size varchar(1) default 'n',
   show_topline varchar(1) default 'n',
   show_subtitle varchar(1) default 'n',
   show_linkto varchar(1) default 'n',
@@ -998,6 +998,7 @@
   UNIQUE KEY no_repeats (parentId, userName(40), title(100), commentDate, message_id(40), in_reply_to(40)),
   KEY title (title),
   KEY data (data(255)),
+  KEY tc_pi (parentId),
   KEY objectType (object, objectType),
   KEY commentDate (commentDate),
   KEY hits (hits),
@@ -1647,6 +1648,7 @@
   data longblob,
   type varchar(50) default NULL,
   PRIMARY KEY  (pageName,version),
+  KEY `user` (`user`),
   KEY(historyId)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
@@ -2369,8 +2371,9 @@
 # --------------------------------------------------------
 INSERT INTO tiki_modules (name,position,ord,cache_time,groups) VALUES ('login_box','r',1,0,'a:2:{i:0;s:10:"Registered";i:1;s:9:"Anonymous";}');
 INSERT INTO tiki_modules (name,position,ord,cache_time,params,groups) VALUES ('mnu_application_menu','l',1,0,'flip=y','a:2:{i:0;s:10:"Registered";i:1;s:9:"Anonymous";}');
-INSERT INTO tiki_modules (name,position,ord,cache_time,groups) VALUES ('quick_edit','l',2,0,'a:1:{i:0;s:10:"Registered";}');
+INSERT INTO tiki_modules (name,position,ord,cache_time,groups) VALUES ('quick_edit','l',2,0,'a:1:{i:0;s:6:\"Admins\";}');
 INSERT INTO tiki_modules (name,position,ord,cache_time,groups) VALUES ('assistant','l',10,0,'a:2:{i:0;s:10:"Registered";i:1;s:9:"Anonymous";}');
+INSERT INTO tiki_modules (name,position,ord,cache_time,groups) VALUES ('since_last_visit_new','r',40,0,'a:1:{i:0;s:6:\"Admins\";}');
 # --------------------------------------------------------
 
 #
@@ -2874,6 +2877,9 @@
   receivedFromSite varchar(200) default NULL,
   receivedFromUser varchar(200) default NULL,
   receivedDate int(14) default NULL,
+  parent varchar(255) default NULL,
+  position tinyint(3) unsigned default NULL,
+  alias varchar(255) default NULL,
   structureName  varchar(250) default NULL,
   parentName  varchar(250) default NULL,
   page_alias varchar(250) default '',
@@ -3226,8 +3232,8 @@
   heading text,
   body text,
   hash varchar(32) default NULL,
+  nbreads int(14) default NULL,
   author varchar(200) default NULL,
-  nbreads int(14) default NULL,
   votes int(8) default NULL,
   points int(14) default NULL,
   type varchar(50) default NULL,
@@ -4409,7 +4415,7 @@
   challenge varchar(32) default NULL,
   pass_confirm int(14) default NULL,
   email_confirm int(14) default NULL,
-  hash varchar(32) default NULL,
+  hash varchar(34) default NULL,
   created int(14) default NULL,
   avatarName varchar(80) default NULL,
   avatarSize int(14) default NULL,
@@ -4680,15 +4686,15 @@
 
 DROP TABLE IF EXISTS tiki_friends;
 CREATE TABLE tiki_friends (
-  user char(200) NOT NULL default '',
-  friend char(200) NOT NULL default '',
+  user varchar(200) NOT NULL default '',
+  friend varchar(200) NOT NULL default '',
   PRIMARY KEY  (`user`(120),friend(120))
 ) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_friendship_requests;
 CREATE TABLE tiki_friendship_requests (
-  userFrom char(200) NOT NULL default '',
-  userTo char(200) NOT NULL default '',
+  userFrom varchar(200) NOT NULL default '',
+  userTo varchar(200) NOT NULL default '',
   tstamp timestamp(14) NOT NULL,
   PRIMARY KEY  (userFrom(120),userTo(120))
 ) ENGINE=MyISAM;
@@ -4814,7 +4820,7 @@
   field varchar(255) NOT NULL default '',
   name varchar(255) default NULL,
   type varchar(255) NOT NULL default 'text',
-  `show` tinyint(1) NOT NULL default '0',
+  `show` tinyint(1) NOT NULL default '1',
   size varchar(10) default '10',
   PRIMARY KEY  (id)
 ) ENGINE=MyISAM;
@@ -4863,6 +4869,7 @@
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Posted', 'blog', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Updated', 'blog', 'n');
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Removed', 'blog', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Removed', 'file', 'n');
 # --------------------------------------------------------
 
 
@@ -4933,6 +4940,7 @@
 CREATE TABLE `tiki_mypage` (
   `id` int(11) NOT NULL auto_increment,
   `id_users` int(11) NOT NULL,
+  `id_types` int(11) NOT NULL,
   `created` int(11) NOT NULL,
   `modified` int(11) NOT NULL,
   `viewed` int(11) NOT NULL,
@@ -4950,7 +4958,8 @@
   `winbgtype` enum ('color', 'imageurl') default 'color' NOT NULL,
   PRIMARY KEY  (`id`),
   KEY `id_users` (`id_users`),
-  KEY `name` (`name`)
+  KEY `name` (`name`),
+  KEY `id_types` (`id_types`)
 ) ENGINE=MyISAM;
 
 CREATE TABLE `tiki_mypagewin` (

------------------------------------------------------------------------
r11520 | nyloth | 2008-02-27 11:19:12 -0400 (qua, 27 fev 2008) | 48 lines

[NEW][ENH] Complete revamping of file galleries

Most important IHM modifications are:

	* New gallery explorer (like windows one),

	* New subgal path (like breadcrumbs / directory path),

	* New wrench icon + contextual menu for actions on files and subgals to replace the old 'Actions' column (it can be disabled in admin > look & feel > other options > Use context menus for actions ),

	* New 'Other Sort' icon and column on the right (only if some fields are configured to be displayed in popup) to allow the user to sort on popup fields too (the 'Other Sort' icon will display the list of available fields with links to sort on them. It will dynamically replace the empty 'Other Sort' column by the selected one),

	* Merge files and subgals tables (like most common filemanagers),

	* Galleries now have only one feature-full display configuration (used for both files and subgals), were you can choose, for each field, between :
		- hide field,
		- show field as a column,
		- show field in the "informations" tooltip/popup,
		- show in both areas,
		(for "locked by" field, there is also a show as an 'icon' option),

	* Use new AJAX-enabled pagination, sort and other links,

	* Now handle subgals size (and sort on subgal size),

	* Add an option to limit the number of displayed rows,

	* Some tikineat theme improvements on filegals and icons hover for IE


Most important Code modifications are:

	* Rewrite of get_files() function to handle subgals too (and more options),

	* Modify some db field names to make it easier to handle files and subgals the same way (e.g. all 'downloads' fields are now named 'hits' fields),

	* many factorization and code cleaning,

	* now check permissions when retrieving files and subgals list from DB with new perms functions (this simplifies perms check and fix total number of items to count only items visible to user),

	* New smarty tree function to make tiki trees using phplayers and tiki famfamfam icons,

	* smarty block self_link : new param '_script' to specify another script than the current one (this disable AJAX for this link when the current script is different),

	* smarty query function now handles 'form_input' as '_type' param to return hidden fields needed for forms to keep current URL args,

	* smarty iconify modifier now benefits from icon function and accepts a second param to put an alt/title text for the icon


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 11519)
+++ tiki.sql	(revision 11520)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2008-02-26 17:37:07 $
-# $Author: nkoth $
+# $Date: 2008-02-27 15:18:42 $
+# $Author: nyloth $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -1310,7 +1310,7 @@
   show_description char(1) default NULL,
   max_desc int(8) default NULL,
   show_created char(1) default NULL,
-  show_dl char(1) default NULL,
+  show_hits char(1) default NULL,
   parentId int(14) NOT NULL default -1,
   lockable char(1) default 'n',
   show_lockedby char(1) default NULL,
@@ -1321,6 +1321,8 @@
   show_creator char(1) default NULL,
   subgal_conf varchar(200) default NULL,
   show_last_user char(1) default NULL,
+  show_comment char(1) default NULL,
+  show_files char(1) default NULL,
   PRIMARY KEY  (galleryId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
@@ -1346,7 +1348,7 @@
   data longblob,
   user varchar(200) default '',
   author varchar(40) default NULL,
-  downloads int(14) default NULL,
+  hits int(14) default NULL,
   votes int(8) default NULL,
   points decimal(8,2) default NULL,
   path varchar(255) default NULL,
@@ -1362,7 +1364,7 @@
   PRIMARY KEY  (fileId),
   KEY name (name),
   KEY description (description(255)),
-  KEY downloads (downloads),
+  KEY hits (hits),
   KEY created (created),
   KEY archiveId (archiveId),
   KEY galleryId (galleryId),
@@ -3450,7 +3452,7 @@
   user varchar(200) default NULL,
   data longblob,
   path varchar(255) default NULL,
-  downloads int(10) default NULL,
+  hits int(10) default NULL,
   created int(14) default NULL,
   comment varchar(250) default NULL,
   longdesc blob,
@@ -3553,7 +3555,7 @@
   items int(10) default NULL,
   showComments char(1) default NULL,
   showAttachments char(1) default NULL,
-  orderAttachments varchar(255) NOT NULL default 'filename,created,filesize,downloads,desc',
+  orderAttachments varchar(255) NOT NULL default 'filename,created,filesize,hits,desc',
   PRIMARY KEY  (trackerId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
@@ -4035,7 +4037,7 @@
   user varchar(200) default NULL,
   data longblob,
   path varchar(255) default NULL,
-  downloads int(10) default NULL,
+  hits int(10) default NULL,
   created int(14) default NULL,
   comment varchar(250) default NULL,
   PRIMARY KEY  (attId)

------------------------------------------------------------------------
r11479 | nkoth | 2008-02-26 13:37:07 -0400 (ter, 26 fev 2008) | 2 lines

[MOD] add admin perm tiki_p_admin_freetags


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 11478)
+++ tiki.sql	(revision 11479)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2008-02-20 16:04:14 $
-# $Author: lphuberdeau $
+# $Date: 2008-02-26 17:37:07 $
+# $Author: nkoth $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4197,6 +4197,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_wiki', 'Can admin the wiki', 'editors', 'wiki', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_workflow', 'Can admin workflow processes', 'admin', 'workflow', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_quicktags', 'Can admin quicktags', 'admin', 'quicktags', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_freetags', 'Can admin freetags', 'admin', 'freetags', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_approve_submission', 'Can approve submissions', 'editors', 'cms');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_attach_trackers', 'Can attach files to tracker items', 'registered', 'trackers');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_autoapprove_submission', 'Submited articles automatically approved', 'editors', 'cms');

------------------------------------------------------------------------
r11459 | lphuberdeau | 2008-02-20 12:04:14 -0400 (qua, 20 fev 2008) | 2 lines

[FIX] Adding tag language to tiki.sql


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 11458)
+++ tiki.sql	(revision 11459)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2008-02-14 19:47:14 $
+# $Date: 2008-02-20 16:04:14 $
 # $Author: lphuberdeau $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4874,6 +4874,7 @@
   tagId int(10) unsigned NOT NULL auto_increment,
   tag varchar(30) NOT NULL default '',
   raw_tag varchar(50) NOT NULL default '',
+  lang varchar(16) NULL,
   PRIMARY KEY  (tagId)
 ) ENGINE=MyISAM;
 

------------------------------------------------------------------------
r11412 | lphuberdeau | 2008-02-14 15:47:15 -0400 (qui, 14 fev 2008) | 2 lines

[FIX] Default change done right


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 11411)
+++ tiki.sql	(revision 11412)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2008-02-14 18:55:13 $
+# $Date: 2008-02-14 19:47:14 $
 # $Author: lphuberdeau $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -2639,7 +2639,6 @@
   PRIMARY KEY  (name)
 ) ENGINE=MyISAM;
 INSERT INTO `tiki_preferences` (name, value) VALUES ('pref_syntax', '1.10');
-INSERT INTO `tiki_preferences` (name, value) VALUES ('unsuccessful_logins', '5');
 # --------------------------------------------------------
 
 #

------------------------------------------------------------------------
r11411 | lphuberdeau | 2008-02-14 14:55:13 -0400 (qui, 14 fev 2008) | 2 lines

[MOD] Making unsuccessful_login default to 5


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 11410)
+++ tiki.sql	(revision 11411)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2008-02-05 18:36:31 $
+# $Date: 2008-02-14 18:55:13 $
 # $Author: lphuberdeau $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -2639,6 +2639,7 @@
   PRIMARY KEY  (name)
 ) ENGINE=MyISAM;
 INSERT INTO `tiki_preferences` (name, value) VALUES ('pref_syntax', '1.10');
+INSERT INTO `tiki_preferences` (name, value) VALUES ('unsuccessful_logins', '5');
 # --------------------------------------------------------
 
 #

------------------------------------------------------------------------
r11323 | lphuberdeau | 2008-02-05 14:36:32 -0400 (ter, 05 fev 2008) | 2 lines

[MOD] Adding an index on source_translation_bit. Quite a lot of search queries are made on it.


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 11322)
+++ tiki.sql	(revision 11323)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2008-01-25 17:23:29 $
-# $Author: nyloth $
+# $Date: 2008-02-05 18:36:31 $
+# $Author: lphuberdeau $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -5004,7 +5004,8 @@
   `flags` SET('critical') NOT NULL DEFAULT '',
   PRIMARY KEY (`translation_bit_id`),
   KEY(`page_id`),
-  KEY(`original_translation_bit`)
+  KEY(`original_translation_bit`),
+  KEY(`source_translation_bit`)
 );
 
 # ------------------------------------

------------------------------------------------------------------------
r11171 | nyloth | 2008-01-25 13:23:32 -0400 (sex, 25 jan 2008) | 2 lines

[KIL] removing very old and buggy cpaint ajax lib and chat feature. cpaint has now been replaced in tiki by xajax lib and chat feature is a release blocker for 1.10. If anyone wants to keep the existing chat feature, ask me for a mod.


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 11170)
+++ tiki.sql	(revision 11171)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2008-01-24 16:14:38 $
-# $Author: lphuberdeau $
+# $Date: 2008-01-25 17:23:29 $
+# $Author: nyloth $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -2065,7 +2065,6 @@
 # --------------------------------------------------------
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Home','./',10,'','','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Search','tiki-searchindex.php',13,'feature_search','','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Chat','tiki-chat.php',15,'feature_chat','tiki_p_chat','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Contact us','tiki-contact.php',20,'feature_contact','','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Stats','tiki-stats.php',23,'feature_stats','tiki_p_view_stats','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Categories','tiki-browse_categories.php',25,'feature_categories','tiki_p_view_categories','');
@@ -2244,7 +2243,6 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Search stats','tiki-search_stats.php',1125,'feature_search_stats','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Theme control','tiki-theme_control.php',1130,'feature_theme_control','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','QuickTags','tiki-admin_quicktags.php',1135,'','tiki_p_admin,tiki_p_admin_quicktags','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Chat','tiki-admin_chat.php',1140,'feature_chat','tiki_p_admin_chat','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Categories','tiki-admin_categories.php',1145,'feature_categories','tiki_p_admin_categories','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Banners','tiki-list_banners.php',1150,'feature_banners','tiki_p_admin_banners','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Edit templates','tiki-edit_templates.php',1155,'feature_edit_templates','tiki_p_edit_templates','');

------------------------------------------------------------------------
r11144 | lphuberdeau | 2008-01-24 12:14:38 -0400 (qui, 24 jan 2008) | 2 lines

[NEW] Adding table for translation sync


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 11143)
+++ tiki.sql	(revision 11144)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2008-01-22 22:27:16 $
-# $Author: sylvieg $
+# $Date: 2008-01-24 16:14:38 $
+# $Author: lphuberdeau $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4997,4 +4997,16 @@
   KEY `id_mypage_types` (`id_mypage_types`)
 ) ENGINE=MyISAM;
 
+CREATE TABLE `tiki_pages_translation_bits` (
+  `translation_bit_id` int(14) NOT NULL auto_increment,
+  `page_id` int(14) NOT NULL,
+  `version` int(8) NOT NULL,
+  `source_translation_bit` int(10) NULL,
+  `original_translation_bit` int(10) NULL,
+  `flags` SET('critical') NOT NULL DEFAULT '',
+  PRIMARY KEY (`translation_bit_id`),
+  KEY(`page_id`),
+  KEY(`original_translation_bit`)
+);
+
 # ------------------------------------

------------------------------------------------------------------------
r11121 | sylvieg | 2008-01-22 18:27:16 -0400 (ter, 22 jan 2008) | 2 lines

[MOD]fgal: split the show_modified into show date and show last user


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 11120)
+++ tiki.sql	(revision 11121)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2008-01-17 15:17:22 $
-# $Author: marclaporte $
+# $Date: 2008-01-22 22:27:16 $
+# $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -1320,6 +1320,7 @@
   show_author char(1) default NULL,
   show_creator char(1) default NULL,
   subgal_conf varchar(200) default NULL,
+  show_last_user char(1) default NULL,
   PRIMARY KEY  (galleryId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------

------------------------------------------------------------------------
r11050 | marclaporte | 2008-01-17 11:17:22 -0400 (qui, 17 jan 2008) | 2 lines

[MOD] Removing cookie & RSS quicktags because 1- this is not something you do often 2- It's usually done in modules. 3- To simplify interface.   This change affects new installs only. People needing this will use the edit help.


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 11049)
+++ tiki.sql	(revision 11050)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2008-01-15 08:26:08 $
-# $Author: pkdille $
+# $Date: 2008-01-17 15:17:22 $
+# $Author: marclaporte $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4510,9 +4510,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('rss feed','{rss id= }','pics/icons/feed.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/database_refresh.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('tagline','{cookie}','pics/icons/database_go.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','pics/icons/page.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','wiki');
@@ -4560,9 +4558,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('rss feed','{rss id= }','pics/icons/feed.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/database_refresh.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('tagline','{cookie}','pics/icons/database_go.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','pics/icons/page.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','trackers');
@@ -4581,9 +4577,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('rss feed','{rss id= }','pics/icons/feed.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/database_refresh.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('tagline','{cookie}','pics/icons/database_go.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','pics/icons/page.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','blogs');
@@ -4602,9 +4596,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('rss feed','{rss id= }','pics/icons/feed.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/database_refresh.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('tagline','{cookie}','pics/icons/database_go.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','pics/icons/page.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','calendar');
@@ -4623,9 +4615,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('rss feed','{rss id= }','pics/icons/feed.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/database_refresh.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('tagline','{cookie}','pics/icons/database_go.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','pics/icons/page.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','articles');
@@ -4644,9 +4634,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('rss feed','{rss id= }','pics/icons/feed.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/database_refresh.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('tagline','{cookie}','pics/icons/database_go.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','pics/icons/page.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','faqs');
@@ -4665,9 +4653,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('rss feed','{rss id= }','pics/icons/feed.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/database_refresh.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('tagline','{cookie}','pics/icons/database_go.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','pics/icons/page.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','forums');

------------------------------------------------------------------------
r11021 | pkdille | 2008-01-15 04:26:08 -0400 (ter, 15 jan 2008) | 2 lines

[FIX] Application Menu: lang_use_db is a feature not a permission


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 11020)
+++ tiki.sql	(revision 11021)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2008-01-11 21:31:11 $
+# $Date: 2008-01-15 08:26:08 $
 # $Author: pkdille $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -2256,7 +2256,7 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Shoutbox','tiki-shoutbox.php',1190,'feature_shoutbox','tiki_p_admin_shoutbox','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Shoutbox Words','tiki-admin_shoutbox_words.php',1191,'feature_shoutbox','tiki_p_admin_shoutbox','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Referer stats','tiki-referer_stats.php',1195,'feature_referer_stats','tiki_p_view_referer_stats','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Edit languages','tiki-edit_languages.php',1200,'','tiki_p_edit_languages,lang_use_db','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Edit languages','tiki-edit_languages.php',1200,'lang_use_db','tiki_p_edit_languages','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Integrator','tiki-admin_integrator.php',1205,'feature_integrator','tiki_p_admin_integrator','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','phpinfo','tiki-phpinfo.php',1215,'','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','DSN','tiki-admin_dsn.php',1220,'','tiki_p_admin','');

------------------------------------------------------------------------
r10998 | pkdille | 2008-01-11 17:31:12 -0400 (sex, 11 jan 2008) | 2 lines

[MOD] multiple print: change name in Application Menu (42) from "Print" to "Multiple Print"


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 10997)
+++ tiki.sql	(revision 10998)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2008-01-08 16:01:39 $
-# $Author: nyloth $
+# $Date: 2008-01-11 21:31:11 $
+# $Author: pkdille $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -2113,7 +2113,7 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List pages','tiki-listpages.php',220,'feature_wiki,feature_listPages','tiki_p_view','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Orphan pages','tiki-orphan_pages.php',225,'feature_wiki,feature_listPages','tiki_p_view','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Sandbox','tiki-editpage.php?page=sandbox',230,'feature_wiki,feature_sandbox','tiki_p_view','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Print','tiki-print_pages.php',235,'feature_wiki,feature_wiki_multiprint','tiki_p_view','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Multiple Print','tiki-print_pages.php',235,'feature_wiki,feature_wiki_multiprint','tiki_p_view','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Send pages','tiki-send_objects.php',240,'feature_wiki,feature_comm','tiki_p_view,tiki_p_send_pages','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Received pages','tiki-received_pages.php',245,'feature_wiki,feature_comm','tiki_p_view,tiki_p_admin_received_pages','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Structures','tiki-admin_structures.php',250,'feature_wiki','tiki_p_view','');

------------------------------------------------------------------------
r10979 | nyloth | 2008-01-08 12:01:46 -0400 (ter, 08 jan 2008) | 6 lines

[NEW] forums: two new features:

* Topics archiving : this feature can be enabled in forums admin panels and allows forum admins to hide complete topics from the list of topics without having to delete them. This can be done either on the topics list of a forum, or on the view_forum_thread page,

* Thread printing : users are now able to print a thread. There is two different icons to do this : one to print the current page only, the other to print the whole thread (i.e. not limited to a max of posts).


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 10978)
+++ tiki.sql	(revision 10979)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-12-25 14:28:12 $
-# $Author: sylvieg $
+# $Date: 2008-01-08 16:01:39 $
+# $Author: nyloth $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -992,7 +992,8 @@
   smiley varchar(80) default NULL,
   message_id varchar(128) default NULL,
   in_reply_to varchar(128) default NULL,
-  comment_rating tinyint(2) default NULL,  
+  comment_rating tinyint(2) default NULL,
+  archived char(1) default NULL,
   PRIMARY KEY  (threadId),
   UNIQUE KEY no_repeats (parentId, userName(40), title(100), commentDate, message_id(40), in_reply_to(40)),
   KEY title (title),

------------------------------------------------------------------------
r10902 | sylvieg | 2007-12-25 10:28:13 -0400 (ter, 25 dez 2007) | 2 lines

[FIX]modules: modules can be used many taime ->index must have ord


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 10901)
+++ tiki.sql	(revision 10902)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-12-10 16:13:58 $
+# $Date: 2007-12-25 14:28:12 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -3630,7 +3630,7 @@
   ord int(4) default NULL,
   type char(1) default NULL,
   user varchar(200) NOT NULL default '',
-  PRIMARY KEY  (name(30),user,position)
+  PRIMARY KEY  (name(30),user,position, ord)
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
 

------------------------------------------------------------------------
r10755 | sylvieg | 2007-12-10 12:14:00 -0400 (seg, 10 dez 2007) | 2 lines

[MOD]pref pref_syntax to have easy transition 1.9 to 1.10


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 10754)
+++ tiki.sql	(revision 10755)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-12-08 12:53:18 $
+# $Date: 2007-12-10 16:13:58 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -2638,6 +2638,7 @@
   value text,
   PRIMARY KEY  (name)
 ) ENGINE=MyISAM;
+INSERT INTO `tiki_preferences` (name, value) VALUES ('pref_syntax', '1.10');
 # --------------------------------------------------------
 
 #

------------------------------------------------------------------------
r10729 | sylvieg | 2007-12-08 08:53:18 -0400 (sÃ¡b, 08 dez 2007) | 2 lines

missing column


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 10728)
+++ tiki.sql	(revision 10729)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-12-07 05:56:42 $
-# $Author: mose $
+# $Date: 2007-12-08 12:53:18 $
+# $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4183,7 +4183,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_mailin', 'Can admin mail-in accounts', 'admin', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_newsletters', 'Can admin newsletters', 'admin', 'newsletters', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_objects','Can edit object permissions', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_polls','Can admin polls', 'admin', 'polls', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_polls','Can admin polls', 'admin', 'polls', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_quizzes', 'Can admin quizzes', 'editors', 'quizzes', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_received_articles', 'Can admin received articles', 'editors', 'comm');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_received_pages', 'Can admin received pages', 'editors', 'comm');

------------------------------------------------------------------------
r10692 | mose | 2007-12-07 01:56:44 -0400 (sex, 07 dez 2007) | 2 lines

[MOD] categs: renaming tiki_p_edit_categories to tiki_p_edit_categorized and split tiki_p_view_categories with tiki_p_view_categorized. You need to uncomment line 1647 in db/tiki_1.9to1.10.sql before your first upgrade, and comment it afterwards (or do not bother and just attribute tiki_p_view_categories to the appropriate group, typically Anonymous)


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 10691)
+++ tiki.sql	(revision 10692)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-12-06 16:35:53 $
-# $Author: sylvieg $
+# $Date: 2007-12-07 05:56:42 $
+# $Author: mose $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4224,7 +4224,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_download_files', 'Can download files', 'basic', 'file galleries');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit', 'Can edit pages', 'registered', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_article', 'Can edit articles', 'editors', 'cms');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_categories', 'Can edit items in categories', 'registered', 'category');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_categorized', 'Can edit categorized items', 'registered', 'category');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_comments', 'Can edit all comments', 'editors', 'comments');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_content_templates', 'Can edit content templates', 'editors', 'content templates');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_cookies', 'Can admin cookies', 'editors', 'tiki');
@@ -4308,7 +4308,8 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_validate_links', 'Can validate submited links', 'editors', 'directory');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view', 'Can view page/pages', 'basic', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_calendar', 'Can browse the calendar', 'basic', 'calendar');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_categories', 'Can browse categories', 'basic', 'category');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_categories', 'Can view categories', 'basic', 'category');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_categorized', 'Can view categorized items', 'basic', 'category');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_chart', 'Can view charts', 'basic', 'charts');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_directory', 'Can use the directory', 'basic', 'directory');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_events', 'Can view events details', 'registered', 'calendar');

------------------------------------------------------------------------
r10675 | sylvieg | 2007-12-06 12:35:53 -0400 (qui, 06 dez 2007) | 2 lines

avoid sql error if use 2 times the same module with the same position


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 10674)
+++ tiki.sql	(revision 10675)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-12-06 14:14:11 $
-# $Author: nkoth $
+# $Date: 2007-12-06 16:35:53 $
+# $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -2360,7 +2360,7 @@
   rows int(4) default NULL,
   params varchar(255) default NULL,
   groups text,
-  PRIMARY KEY  (name, position, ord),
+  PRIMARY KEY  (name(100), position, ord, params(140)),
   KEY positionType (position, type),
   KEY moduleId (moduleId)
 ) ENGINE=MyISAM;

------------------------------------------------------------------------
r10671 | nkoth | 2007-12-06 10:14:11 -0400 (qui, 06 dez 2007) | 2 lines

[MOD] more polls perms cleaning - decided to use new perm and to have polls perms as one type


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 10670)
+++ tiki.sql	(revision 10671)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-11-30 22:42:04 $
+# $Date: 2007-12-06 14:14:11 $
 # $Author: nkoth $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4183,7 +4183,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_mailin', 'Can admin mail-in accounts', 'admin', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_newsletters', 'Can admin newsletters', 'admin', 'newsletters', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_objects','Can edit object permissions', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_polls','Can admin polls', 'admin', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_polls','Can admin polls', 'admin', 'polls', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_quizzes', 'Can admin quizzes', 'editors', 'quizzes', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_received_articles', 'Can admin received articles', 'editors', 'comm');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_received_pages', 'Can admin received pages', 'editors', 'comm');
@@ -4334,7 +4334,8 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_user_results', 'Can view user quiz results', 'editors', 'quizzes');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_vote_chart', 'Can vote', 'basic', 'charts');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_vote_comments', 'Can vote comments', 'registered', 'comments');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_vote_poll', 'Can vote polls', 'basic', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_vote_poll', 'Can vote polls', 'basic', 'polls');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_poll_results', 'Can view poll results', 'basic', 'polls');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_watch_trackers', 'Can watch tracker', 'registered', 'trackers');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_admin_attachments', 'Can admin attachments to wiki pages', 'editors', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_admin_ratings', 'Can add and change ratings on wiki pages', 'admin', 'wiki');

------------------------------------------------------------------------
r10558 | nkoth | 2007-11-30 18:42:04 -0400 (sex, 30 nov 2007) | 2 lines

[MOD] field to store label for dynamic content (for tracker item 1431)


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 10557)
+++ tiki.sql	(revision 10558)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-11-22 19:58:42 $
-# $Author: nyloth $
+# $Date: 2007-11-30 22:42:04 $
+# $Author: nkoth $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -1016,6 +1016,7 @@
 CREATE TABLE tiki_content (
   contentId int(8) NOT NULL auto_increment,
   description text,
+  contentLabel varchar(255) NOT NULL default '',
   PRIMARY KEY  (contentId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------

------------------------------------------------------------------------
r10408 | nyloth | 2007-11-22 15:58:45 -0400 (qui, 22 nov 2007) | 13 lines

[NEW] tracker field types: add a multiple selection list to specify which items should be listed to the users when editing a tracker item of the concerned field types.

This has been done for those field types :
	* user selector,
	* group selector,
	* country selector

It allows, for example, to list only developpers in a list of users in charge of bugs in a bug tracker, or to list only a few countries with their flags.

It is possible to use this for every field type that generates a drop-down list of items (categories, ...).

Choosing no item at all will list all items to the user, for compatibility with old versions, because it's easier to use this way and because nobody should need an empty list.


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 10407)
+++ tiki.sql	(revision 10408)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-11-21 21:53:18 $
-# $Author: nkoth $
+# $Date: 2007-11-22 19:58:42 $
+# $Author: nyloth $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -3426,6 +3426,7 @@
   isMandatory char(1) NOT NULL default 'n',
   isMultilingual char(1) default 'n',
   description text,
+  itemChoices text,
   PRIMARY KEY  (fieldId)
 ) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------

------------------------------------------------------------------------
r10388 | nkoth | 2007-11-21 17:53:18 -0400 (qua, 21 nov 2007) | 2 lines

[FIX] oops. typo in prev commit


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 10387)
+++ tiki.sql	(revision 10388)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-11-21 21:49:55 $
+# $Date: 2007-11-21 21:53:18 $
 # $Author: nkoth $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4113,7 +4113,7 @@
   registrationUsersFieldIds text,
   userChoice char(1) default NULL,
   groupDefCat int(12) default 0,
-  groupThemechar(1) varchar(255) default '',  
+  groupTheme varchar(255) default '',  
   PRIMARY KEY  (groupName(30))
 ) ENGINE=MyISAM;
 # --------------------------------------------------------

------------------------------------------------------------------------
r10387 | nkoth | 2007-11-21 17:49:55 -0400 (qua, 21 nov 2007) | 2 lines

[NEW] support for 'group theme', based on user's default_group; support for group default category


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 10386)
+++ tiki.sql	(revision 10387)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-11-14 20:31:46 $
-# $Author: sylvieg $
+# $Date: 2007-11-21 21:49:55 $
+# $Author: nkoth $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4112,6 +4112,8 @@
   registrationChoice char(1) default NULL,
   registrationUsersFieldIds text,
   userChoice char(1) default NULL,
+  groupDefCat int(12) default 0,
+  groupThemechar(1) varchar(255) default '',  
   PRIMARY KEY  (groupName(30))
 ) ENGINE=MyISAM;
 # --------------------------------------------------------

------------------------------------------------------------------------
r10323 | sylvieg | 2007-11-14 16:31:47 -0400 (qua, 14 nov 2007) | 2 lines

[FIX]perm: change the perm name for a better one tiki_p_subscribe_groups


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 10322)
+++ tiki.sql	(revision 10323)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-11-13 17:37:14 $
+# $Date: 2007-11-14 20:31:46 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4356,7 +4356,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_watch_structure', 'Can watch structure', 'registered', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_menu', 'Can edit menu', 'admin', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_menu_option', 'Can edit menu option', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_my_groups', 'A user can assign himself in groups', 'registered', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_subscribe_groups', 'Can subscribe to groups', 'registered', 'tiki');
 # --------------------------------------------------------
 
 #

------------------------------------------------------------------------
r10305 | sylvieg | 2007-11-13 13:37:16 -0400 (ter, 13 nov 2007) | 2 lines

[MOD]group: new perm tiki_p_assign_my_groups that allows a user to assign himself in group from a list choosen by the admin


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 10304)
+++ tiki.sql	(revision 10305)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-11-07 16:58:16 $
-# $Author: pkdille $
+# $Date: 2007-11-13 17:37:14 $
+# $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4111,6 +4111,7 @@
   groupFieldId int(11),
   registrationChoice char(1) default NULL,
   registrationUsersFieldIds text,
+  userChoice char(1) default NULL,
   PRIMARY KEY  (groupName(30))
 ) ENGINE=MyISAM;
 # --------------------------------------------------------
@@ -4355,6 +4356,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_watch_structure', 'Can watch structure', 'registered', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_menu', 'Can edit menu', 'admin', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_menu_option', 'Can edit menu option', 'admin', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_my_groups', 'A user can assign himself in groups', 'registered', 'tiki');
 # --------------------------------------------------------
 
 #

------------------------------------------------------------------------
r9953 | pkdille | 2007-11-07 12:58:16 -0400 (qua, 07 nov 2007) | 2 lines

[FIX] tiki.sql: typo


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9952)
+++ tiki.sql	(revision 9953)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-11-04 22:08:07 $
-# $Author: nyloth $
+# $Date: 2007-11-07 16:58:16 $
+# $Author: pkdille $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4469,9 +4469,9 @@
 #
 # Dumping data for table 'tiki_integrator_rules'
 #
-INSERT INTO tiki_integrator_rules VALUES ('1','1','1','.*<body[^>]*?>(.*?)</body.*','\1','y','n','i','y','Extract code between <BODY> tags');
-INSERT INTO tiki_integrator_rules VALUES ('2','1','2','img src=(\"|\')(?!http://)','img src=\1{path}/','y','n','i','y','Fix images path');
-INSERT INTO tiki_integrator_rules VALUES ('3','1','3','href=(\"|\')(?!(#|(http|ftp)://))','href=\1tiki-integrator.php?repID={repID}&file=','y','n','i','y','Relace internal links to integrator. Dont touch an external links.');
+INSERT INTO tiki_integrator_rules VALUES ('1','1','1','.*<body[^>]*?>(.*?)</body.*','\1','y','n','i','y','Extract code between <body> and </body> tags');
+INSERT INTO tiki_integrator_rules VALUES ('2','1','2','img src=(\"|\')(?!http://)','img src=\1{path}/','y','n','i','y','Fix image paths');
+INSERT INTO tiki_integrator_rules VALUES ('3','1','3','href=(\"|\')(?!(#|(http|ftp)://))','href=\1tiki-integrator.php?repID={repID}&file=','y','n','i','y','Replace internal links to integrator. Don\'t touch an external link.');
 
 #
 # Table structures for table 'tiki_quicktags'

------------------------------------------------------------------------
r9923 | nyloth | 2007-11-04 18:08:35 -0400 (dom, 04 nov 2007) | 2 lines

[FIX] copyright: 2007 instead of 2005


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9922)
+++ tiki.sql	(revision 9923)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-10-30 09:10:41 $
-# $Author: pkdille $
+# $Date: 2007-11-04 22:08:07 $
+# $Author: nyloth $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1

------------------------------------------------------------------------
r9882 | pkdille | 2007-10-30 05:10:50 -0400 (ter, 30 out 2007) | 2 lines

[FIX] enclosing character on menu item creation was false


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9881)
+++ tiki.sql	(revision 9882)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-10-27 07:25:29 $
+# $Date: 2007-10-30 09:10:41 $
 # $Author: pkdille $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -2072,7 +2072,7 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Tiki Calendar','tiki-action_calendar.php',36,'feature_action_calendar','tiki_p_view_tiki_calendar','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Users map','tiki-gmap_usermap.php',36,'feature_gmap','','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Mobile','tiki-mobile.php',37,'feature_mobile','','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','(debug)','javascript:toggle("debugconsole")',40,'feature_debug_console','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','(debug)','javascript:toggle(\'debugconsole\')',40,'feature_debug_console','tiki_p_admin','');
 
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','MyTiki','tiki-my_tiki.php',50,'feature_mytiki','','Registered');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','MyTiki home','tiki-my_tiki.php',51,'feature_mytiki','','Registered');

------------------------------------------------------------------------
r9867 | pkdille | 2007-10-27 03:25:29 -0400 (sÃ¡b, 27 out 2007) | 2 lines

[FIX] typo


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9866)
+++ tiki.sql	(revision 9867)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-10-26 20:36:39 $
-# $Author: sylvieg $
+# $Date: 2007-10-27 07:25:29 $
+# $Author: pkdille $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4198,7 +4198,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_autoval_chart_suggestio', 'Autovalidate suggestions', 'editors', 'charts');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_subscribe_email', 'Can subscribe many e-mails at once (requires tiki_p_subscribe email)', 'editors', 'newsletters');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_files', 'Can upload zip files with files', 'editors', 'file galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_file_dir', 'Can use Directoy Batch Load', 'editors', 'file galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_file_dir', 'Can use Directory Batch Load', 'editors', 'file galleries');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_image_dir', 'Can use Directory Batch Load', 'editors', 'image galleries');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_images', 'Can upload zip files with images', 'editors', 'image galleries');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_blog_admin', 'Can admin blogs', 'editors', 'blogs', 'y');

------------------------------------------------------------------------
r9866 | sylvieg | 2007-10-26 16:36:40 -0400 (sex, 26 out 2007) | 2 lines

[MOD]menu: 2 perms tiki_p_edit_menu and tiki_p_edit_menu_option


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9865)
+++ tiki.sql	(revision 9866)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-10-26 18:33:10 $
+# $Date: 2007-10-26 20:36:39 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -2222,6 +2222,7 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'feature_integrator','tiki_p_admin_integrator','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_contribution','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_users','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_menu','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin home','tiki-admin.php',1051,'','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Live support','tiki-live_support_admin.php',1055,'feature_live_support','tiki_p_live_support_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Live support','tiki-live_support_admin.php',1055,'feature_live_support','user_is_operator','');
@@ -2234,7 +2235,7 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Links','tiki-admin_links.php',1090,'feature_featuredLinks','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Hotwords','tiki-admin_hotwords.php',1095,'feature_hotwords','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','RSS modules','tiki-admin_rssmodules.php',1100,'','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Menus','tiki-admin_menus.php',1105,'','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Menus','tiki-admin_menus.php',1105,'','tiki_p_edit_menu','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Polls','tiki-admin_polls.php',1110,'feature_polls','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Mail notifications','tiki-admin_notifications.php',1120,'','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Search stats','tiki-search_stats.php',1125,'feature_search_stats','tiki_p_admin','');
@@ -4352,6 +4353,8 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_mypage', 'Can list mypages', 'registered', 'mypage');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_mypage', 'Can assign perms to mypage', 'admin', 'mypage');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_watch_structure', 'Can watch structure', 'registered', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_menu', 'Can edit menu', 'admin', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_menu_option', 'Can edit menu option', 'admin', 'tiki');
 # --------------------------------------------------------
 
 #

------------------------------------------------------------------------
r9865 | sylvieg | 2007-10-26 14:33:11 -0400 (sex, 26 out 2007) | 2 lines

[FIX]replace TYPE -> ENGINE


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9864)
+++ tiki.sql	(revision 9865)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-10-08 19:02:43 $
+# $Date: 2007-10-26 18:33:10 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -34,7 +34,7 @@
   description text,
   expirationTime int(6) unsigned NOT NULL default '0',
   PRIMARY KEY  (activityId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -49,7 +49,7 @@
   activityId int(14) NOT NULL default '0',
   roleId int(14) NOT NULL default '0',
   PRIMARY KEY  (activityId,roleId)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -68,7 +68,7 @@
   user varchar(200) default '',
   status enum('running','completed') default NULL,
   PRIMARY KEY  (instanceId,activityId)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -90,7 +90,7 @@
   activity varchar(80) default NULL,
   timestamp int(14) default NULL,
   PRIMARY KEY  (cId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -113,7 +113,7 @@
   status enum('active','exception','aborted','completed') default NULL,
   properties longblob,
   PRIMARY KEY  (instanceId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -134,7 +134,7 @@
   lastModif int(14) default NULL,
   normalized_name varchar(80) default NULL,
   PRIMARY KEY  (pId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -152,7 +152,7 @@
   name varchar(80) default NULL,
   description text,
   PRIMARY KEY  (roleId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -168,7 +168,7 @@
   actFromId int(14) NOT NULL default '0',
   actToId int(14) NOT NULL default '0',
   PRIMARY KEY  (actFromId,actToId)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -184,7 +184,7 @@
   roleId int(14) NOT NULL auto_increment,
   user varchar(200) NOT NULL default '',
   PRIMARY KEY  (roleId,user)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -205,7 +205,7 @@
   ended int(14) default NULL,
   user varchar(200) default '',
   PRIMARY KEY  (itemId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -234,7 +234,7 @@
   priority int(2) default NULL,
   PRIMARY KEY  (msgId),
   KEY userIsRead (user, isRead)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -263,7 +263,7 @@
   isFlagged char(1) default NULL,
   priority int(2) default NULL,
   PRIMARY KEY  (msgId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -292,7 +292,7 @@
   isFlagged char(1) default NULL,
   priority int(2) default NULL,
   PRIMARY KEY  (msgId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 DROP TABLE IF EXISTS sessions;
@@ -303,7 +303,7 @@
   data text NOT NULL,
   PRIMARY KEY  (sesskey),
   KEY expiry (expiry)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 
 #
 # Table structure for table tiki_actionlog
@@ -324,7 +324,7 @@
   comment varchar(200) default NULL,
   categId int(12) NOT NULL default '0',
   PRIMARY KEY  (actionId)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_actionlog_params;
 CREATE TABLE tiki_actionlog_params (
@@ -333,7 +333,7 @@
   value text,
   KEY (actionId),
   KEY nameValue (name, value(200))
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -389,7 +389,7 @@
   KEY expireDate (expireDate),
   KEY type (type),
   FULLTEXT KEY ft (title,heading,body)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 DROP TABLE IF EXISTS tiki_article_types;
@@ -417,7 +417,7 @@
   PRIMARY KEY  (type),
   KEY show_pre_publ (show_pre_publ),
   KEY show_post_expire (show_post_expire)
-) TYPE=MyISAM ;
+) ENGINE=MyISAM ;
 
 INSERT IGNORE INTO tiki_article_types(type) VALUES ('Article');
 INSERT IGNORE INTO tiki_article_types(type,use_ratings) VALUES ('Review','y');
@@ -463,7 +463,7 @@
   clicks int(8) default NULL,
   zone varchar(40) default NULL,
   PRIMARY KEY  (bannerId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -489,7 +489,7 @@
   created int(14) default NULL,
   message text,
   PRIMARY KEY  (banId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -504,7 +504,7 @@
   banId int(12) NOT NULL default '0',
   section varchar(100) NOT NULL default '',
   PRIMARY KEY  (banId,section)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -520,7 +520,7 @@
   day int(14) NOT NULL default '0',
   posts int(8) default NULL,
   PRIMARY KEY  (blogId,day)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -548,7 +548,7 @@
   KEY blogId (blogId),
   KEY created (created),
   FULLTEXT KEY ft (data,title)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -567,7 +567,7 @@
   filesize int(14) default NULL,
   data longblob,
   PRIMARY KEY  (imgId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -603,7 +603,7 @@
   KEY description (description(255)),
   KEY hits (hits),
   FULLTEXT KEY ft (title,description)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -620,7 +620,7 @@
   name varchar(255) NOT NULL default '',
   PRIMARY KEY  (calcatId),
   UNIQUE KEY catname (calendarId,name(16))
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -650,7 +650,7 @@
   lastmodif int(14) NOT NULL default '0',
   PRIMARY KEY  (calitemId),
   KEY calendarId (calendarId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -668,7 +668,7 @@
   description blob,
   PRIMARY KEY  (callocId),
   UNIQUE KEY locname (calendarId,name(16))
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -684,7 +684,7 @@
   username varchar(200) NOT NULL default '',
   role enum('0','1','2','3','6') NOT NULL default '0',
   PRIMARY KEY  (calitemId,username(16),role)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -710,7 +710,7 @@
   lastmodif int(14) NOT NULL default '0',
   personal enum ('n', 'y') NOT NULL default 'n',
   PRIMARY KEY  (calendarId)
-) TYPE=MyISAM ;
+) ENGINE=MyISAM ;
 # --------------------------------------------------------
 
 DROP TABLE IF EXISTS tiki_calendar_options;
@@ -719,7 +719,7 @@
 	optionName varchar(120) NOT NULL default '',
 	value varchar(255),
 	PRIMARY KEY (calendarId,optionName)
-) TYPE=MyISAM ;
+) ENGINE=MyISAM ;
 # --------------------------------------------------------
 #
 # Table structure for table tiki_categories
@@ -736,7 +736,7 @@
   parentId int(12) default NULL,
   hits int(8) default NULL,
   PRIMARY KEY  (categId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -759,7 +759,7 @@
   PRIMARY KEY  (objectId),
   KEY (type, objectId),
   KEY (itemId, type)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 # Table structure for table `tiki_categorized_objects`
@@ -769,7 +769,7 @@
 CREATE TABLE `tiki_categorized_objects` (
   `catObjectId` int(11) NOT NULL default '0',
   PRIMARY KEY  (`catObjectId`)
-) TYPE=MyISAM ;
+) ENGINE=MyISAM ;
 
 
 #
@@ -784,7 +784,7 @@
   catObjectId int(12) NOT NULL default '0',
   categId int(12) NOT NULL default '0',
   PRIMARY KEY  (catObjectId,categId)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -799,7 +799,7 @@
   catObjectId int(12) NOT NULL default '0',
   pollId int(12) NOT NULL default '0',
   PRIMARY KEY  (catObjectId,pollId)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -814,7 +814,7 @@
   categId int(10) NOT NULL default '0',
   siteId int(14) NOT NULL default '0',
   PRIMARY KEY  (categId,siteId)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -836,7 +836,7 @@
   points int(14) default NULL,
   average decimal(4,2) default NULL,
   PRIMARY KEY  (itemId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -867,7 +867,7 @@
   voteAgainAfter int(14) default NULL,
   created int(14) default NULL,
   PRIMARY KEY  (chartId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -888,7 +888,7 @@
   rvotes int(14) NOT NULL default '0',
   raverage decimal(4,2) NOT NULL default '0.00',
   PRIMARY KEY  (chartId,itemId,period)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -905,7 +905,7 @@
   timestamp int(14) default NULL,
   chartId int(14) default NULL,
   PRIMARY KEY  (user,itemId)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -926,7 +926,7 @@
   active char(1) default NULL,
   refresh int(6) default NULL,
   PRIMARY KEY  (channelId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -944,7 +944,7 @@
   poster varchar(200) NOT NULL default 'anonymous',
   timestamp int(14) default NULL,
   PRIMARY KEY  (messageId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -960,7 +960,7 @@
   channelId int(8) NOT NULL default '0',
   timestamp int(14) default NULL,
   PRIMARY KEY  (nickname,channelId)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -1002,7 +1002,7 @@
   KEY hits (hits),
   KEY threaded (message_id, in_reply_to, parentId),
   FULLTEXT KEY ft (title,data)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -1017,7 +1017,7 @@
   contentId int(8) NOT NULL auto_increment,
   description text,
   PRIMARY KEY  (contentId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -1034,7 +1034,7 @@
   name varchar(200) default NULL,
   created int(14) default NULL,
   PRIMARY KEY  (templateId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -1049,7 +1049,7 @@
   templateId int(10) NOT NULL default '0',
   section varchar(250) NOT NULL default '',
   PRIMARY KEY  (templateId,section)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -1064,7 +1064,7 @@
   cookieId int(10) NOT NULL auto_increment,
   cookie text,
   PRIMARY KEY  (cookieId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -1084,7 +1084,7 @@
   copyright_order int(11) default NULL,
   userName varchar(200) default '',
   PRIMARY KEY  (copyrightId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -1108,7 +1108,7 @@
   editorGroup varchar(200) default NULL,
   hits int(12) default NULL,
   PRIMARY KEY  (categId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -1123,7 +1123,7 @@
   term varchar(250) NOT NULL default '',
   hits int(14) default NULL,
   PRIMARY KEY  (term)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -1150,7 +1150,7 @@
   KEY (isValid),
   KEY (url),
   FULLTEXT KEY ft (name,description)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -1170,7 +1170,7 @@
   timestamp int(14) default NULL,
   user varchar(200) default '',
   PRIMARY KEY  (drawId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -1186,7 +1186,7 @@
   name varchar(200) NOT NULL default '',
   dsn varchar(255) default NULL,
   PRIMARY KEY  (dsnId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 
@@ -1211,7 +1211,7 @@
   name varchar(200) NOT NULL default '',
   extwiki varchar(255) default NULL,
   PRIMARY KEY  (extwikiId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -1234,7 +1234,7 @@
   KEY question (question(255)),
   KEY answer (answer(255)),
   FULLTEXT KEY ft (question,answer)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -1259,7 +1259,7 @@
   KEY description (description(255)),
   KEY hits (hits),
   FULLTEXT KEY ft (title,description)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -1278,7 +1278,7 @@
   position int(6) default NULL,
   type char(1) default NULL,
   PRIMARY KEY  (url)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 # Table structure for table tiki_file_galleries
 #
@@ -1319,7 +1319,7 @@
   show_creator char(1) default NULL,
   subgal_conf varchar(200) default NULL,
   PRIMARY KEY  (galleryId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -1364,7 +1364,7 @@
   KEY archiveId (archiveId),
   KEY galleryId (galleryId),
   FULLTEXT KEY ft (name,description,search_data)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -1389,7 +1389,7 @@
   path varchar(250) default NULL,
   PRIMARY KEY  (attId),
   KEY threadId (threadId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -1406,7 +1406,7 @@
   forumId int(14) default NULL,
   timestamp int(14) default NULL,
   PRIMARY KEY  (user,threadId)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -1476,7 +1476,7 @@
   commentsPerPage varchar(100) default NULL,
   is_flat char(1) default NULL,
   PRIMARY KEY  (forumId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -1503,7 +1503,7 @@
   summary varchar(240) default NULL,
   in_reply_to varchar(128) default NULL,
   PRIMARY KEY  (qId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -1522,7 +1522,7 @@
   timestamp int(14) default NULL,
   reason varchar(250) default NULL,
   PRIMARY KEY  (threadId)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -1571,7 +1571,7 @@
   KEY parentgallery (parentgallery),
   KEY visibleUser (visible, user),
   FULLTEXT KEY ft (name,description)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -1586,7 +1586,7 @@
   galleryId int(14) NOT NULL default '0',
   scale int(11) NOT NULL default '0',
   PRIMARY KEY  (galleryId,scale)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -1603,7 +1603,7 @@
   votes int(8) default NULL,
   points int(8) default NULL,
   PRIMARY KEY  (gameName)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -1618,7 +1618,7 @@
   groupName varchar(255) NOT NULL default '',
   includeGroup varchar(255) NOT NULL default '',
   PRIMARY KEY  (groupName(30),includeGroup(30))
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -1643,7 +1643,7 @@
   type varchar(50) default NULL,
   PRIMARY KEY  (pageName,version),
   KEY(historyId)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -1658,7 +1658,7 @@
   word varchar(40) NOT NULL default '',
   url varchar(255) NOT NULL default '',
   PRIMARY KEY  (word)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -1676,7 +1676,7 @@
   type char(1) default NULL,
   created int(14) default NULL,
   PRIMARY KEY  (pageName)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -1693,7 +1693,7 @@
   type char(2) default NULL,
   content text,
   PRIMARY KEY  (pageName,zone)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -1724,7 +1724,7 @@
   KEY ti_cr (created),
   KEY ti_us (user),
   FULLTEXT KEY ft (name,description)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -1748,7 +1748,7 @@
   etag varchar(32) default NULL,
   PRIMARY KEY  (imageId,xsize,ysize,type),
   KEY t_i_d_it (imageId,type)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -1764,7 +1764,7 @@
   lang char(16) NOT NULL default '',
   tran tinyblob,
   PRIMARY KEY  (source(255),lang)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -1779,7 +1779,7 @@
   lang char(16) NOT NULL default '',
   language varchar(255) default NULL,
   PRIMARY KEY  (lang)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 INSERT INTO tiki_languages(lang, language) VALUES('en','English');
 # --------------------------------------------------------
@@ -1799,7 +1799,7 @@
   refresh int(14) default NULL,
   PRIMARY KEY  (cacheId),
   KEY url (url)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 CREATE INDEX urlindex ON tiki_link_cache (url(250));
 # --------------------------------------------------------
 
@@ -1816,7 +1816,7 @@
   toPage varchar(160) NOT NULL default '',
   PRIMARY KEY  (fromPage,toPage),
   KEY toPage (toPage)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -1836,7 +1836,7 @@
   data text,
   timestamp int(14) default NULL,
   PRIMARY KEY  (eventId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -1853,7 +1853,7 @@
   data text,
   timestamp int(14) default NULL,
   PRIMARY KEY  (cId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -1878,7 +1878,7 @@
   module int(4) default NULL,
   email varchar(250) default NULL,
   PRIMARY KEY  (msgId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -1893,7 +1893,7 @@
   modId int(4) NOT NULL auto_increment,
   name varchar(90) default NULL,
   PRIMARY KEY  (modId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 INSERT INTO tiki_live_support_modules(name) VALUES('wiki');
 INSERT INTO tiki_live_support_modules(name) VALUES('forums');
@@ -1925,7 +1925,7 @@
   points int(10) default NULL,
   status_since int(14) default NULL,
   PRIMARY KEY  (user)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -1952,7 +1952,7 @@
   chat_started int(14) default NULL,
   chat_ended int(14) default NULL,
   PRIMARY KEY  (reqId)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -1973,7 +1973,7 @@
   logtime int(14) NOT NULL,
   PRIMARY KEY  (logId),
   KEY logtype (logtype)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 
 # --------------------------------------------------------
 
@@ -1989,7 +1989,7 @@
   event varchar(200) default NULL,
   object varchar(200) default NULL,
   email varchar(200) default NULL
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -2019,7 +2019,7 @@
   article_type varchar(50) default NULL,
   discard_after varchar(255) default NULL,
   PRIMARY KEY  (accountId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -2034,7 +2034,7 @@
   menuId int(8) NOT NULL auto_increment,
   language char(16) NOT NULL default '',
   PRIMARY KEY  (menuId,language)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -2058,7 +2058,7 @@
   userlevel int(4) default 0,
   PRIMARY KEY  (optionId),
   UNIQUE KEY uniq_menu (menuId,name(30),url(50),position,section(60),perm(50),groupname(50))
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Home','./',10,'','','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Search','tiki-searchindex.php',13,'feature_search','','');
@@ -2289,7 +2289,7 @@
   description text,
   type char(1) default NULL,
   PRIMARY KEY  (menuId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 INSERT INTO tiki_menus (menuId,name,description,type) VALUES ('42','Application menu','Main extensive navigation menu','d');
 # --------------------------------------------------------
@@ -2314,7 +2314,7 @@
   topicId int(12) default NULL,
   reminded char(1) default NULL,
   PRIMARY KEY  (eventId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -2336,7 +2336,7 @@
   path varchar(250) default NULL,
   isIcon char(1) default NULL,
   PRIMARY KEY  (topicId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -2361,7 +2361,7 @@
   PRIMARY KEY  (name, position, ord),
   KEY positionType (position, type),
   KEY moduleId (moduleId)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 INSERT INTO tiki_modules (name,position,ord,cache_time,groups) VALUES ('login_box','r',1,0,'a:2:{i:0;s:10:"Registered";i:1;s:9:"Anonymous";}');
 INSERT INTO tiki_modules (name,position,ord,cache_time,params,groups) VALUES ('mnu_application_menu','l',1,0,'flip=y','a:2:{i:0;s:10:"Registered";i:1;s:9:"Anonymous";}');
@@ -2385,7 +2385,7 @@
   subscribed int(14) default NULL,
   isUser char(1) NOT NULL default 'n',
   PRIMARY KEY  (nlId,email,isUser)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -2401,7 +2401,7 @@
   groupName varchar(255) NOT NULL default '',
   code varchar(32) default NULL,
   PRIMARY KEY  (nlId,groupName)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -2416,7 +2416,7 @@
   nlId int(12) NOT NULL default '0',
   includedId int(12) NOT NULL default '0',
   PRIMARY KEY  (nlId,includedId)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -2443,7 +2443,7 @@
   frequency int(14) default NULL,
 	author varchar(200) default NULL,
   PRIMARY KEY  (nlId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -2460,7 +2460,7 @@
   groupName varchar(255) NOT NULL default '',
   timestamp int(14) NOT NULL default '0',
   PRIMARY KEY  (`user`(100),serverId,groupName(100))
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -2479,7 +2479,7 @@
   username varchar(200) default NULL,
   password varchar(200) default NULL,
   PRIMARY KEY  (serverId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -2496,7 +2496,7 @@
   pageName varchar(250) NOT NULL default '',
   data text,
   PRIMARY KEY  (`user`(150),pageName(100))
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -2538,7 +2538,7 @@
   KEY pageRank (pageRank),
   FULLTEXT KEY ft (pageName,description,data),
   KEY lastModif(lastModif)
-) TYPE=MyISAM AUTO_INCREMENT=1;
+) ENGINE=MyISAM AUTO_INCREMENT=1;
 # --------------------------------------------------------
 
 #
@@ -2556,7 +2556,7 @@
   comment varchar(200) default NULL,
   lastModif int(14) default NULL,
   PRIMARY KEY  (pageName(120), `user`(120))
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -2571,7 +2571,7 @@
   day int(14) NOT NULL default '0',
   pageviews int(14) default NULL,
   PRIMARY KEY  (day)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -2584,7 +2584,7 @@
   `pollId` int(11) NOT NULL default '0',
   `title` varchar(255) default NULL,
   PRIMARY KEY  (`catObjectId`,`pollId`)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -2602,7 +2602,7 @@
   position int(4) NOT NULL default '0',
   votes int(8) default NULL,
   PRIMARY KEY  (optionId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -2620,7 +2620,7 @@
   active char(1) default NULL,
   publishDate int(14) default NULL,
   PRIMARY KEY  (pollId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -2635,7 +2635,7 @@
   name varchar(40) NOT NULL default '',
   value text,
   PRIMARY KEY  (name)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -2656,7 +2656,7 @@
   key(received),
   key(timestamp),
   PRIMARY KEY  (messageId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -2673,7 +2673,7 @@
   publishDate int(14) NOT NULL default '0',
   data text,
   PRIMARY KEY  (pId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -2690,7 +2690,7 @@
   optionText text,
   points int(4) default NULL,
   PRIMARY KEY  (optionId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -2709,7 +2709,7 @@
   type char(1) default NULL,
   maxPoints int(4) default NULL,
   PRIMARY KEY  (questionId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -2727,7 +2727,7 @@
   toPoints int(4) default NULL,
   answer text,
   PRIMARY KEY  (resultId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -2744,7 +2744,7 @@
   optionId int(10) NOT NULL default '0',
   votes int(10) default NULL,
   PRIMARY KEY  (quizId,questionId,optionId)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -2763,7 +2763,7 @@
   avgavg decimal(5,2) default NULL,
   avgtime decimal(5,2) default NULL,
   PRIMARY KEY  (quizId)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -2813,7 +2813,7 @@
   sEpilogue text,
   passingperct int(4) default 0,
   PRIMARY KEY  (quizId, nVersion)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -2849,7 +2849,7 @@
   type varchar(50) default NULL,
   rating decimal(3,2) default NULL,
   PRIMARY KEY  (receivedArticleId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -2875,7 +2875,7 @@
   pos int(4) default NULL,
   PRIMARY KEY  (receivedPageId),
   KEY structureName (structureName)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -2891,7 +2891,7 @@
   hits int(10) default NULL,
   last int(14) default NULL,
   PRIMARY KEY  (referer)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -2906,7 +2906,7 @@
   categId int(10) NOT NULL default '0',
   relatedTo int(10) NOT NULL default '0',
   PRIMARY KEY  (categId,relatedTo)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -2929,7 +2929,7 @@
   content longblob,
   PRIMARY KEY  (rssId),
   KEY name (name)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -2947,7 +2947,7 @@
   lastUpdated int(14) default NULL,
   cache longblob,
   PRIMARY KEY  (name,rssVer)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 DROP TABLE IF EXISTS tiki_searchindex;
@@ -2960,7 +2960,7 @@
   PRIMARY KEY  (searchword,location,page(80)),
   KEY last_update (last_update),
   KEY location (location(50), page(200))
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 
 # LRU (last recently used) list for searching parts of words
 DROP TABLE IF EXISTS tiki_searchsyllable;
@@ -2970,7 +2970,7 @@
   lastUpdated int(11) NOT NULL default '0',
   PRIMARY KEY  (syllable),
   KEY lastUsed (lastUsed)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 
 # searchword caching table for search syllables
 DROP TABLE IF EXISTS tiki_searchwords;
@@ -2978,7 +2978,7 @@
   syllable varchar(80) NOT NULL default '',
   searchword varchar(80) NOT NULL default '',
   PRIMARY KEY  (syllable,searchword)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 
 #
 # Table structure for table tiki_search_stats
@@ -2992,7 +2992,7 @@
   term varchar(50) NOT NULL default '',
   hits int(10) default NULL,
   PRIMARY KEY  (term)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -3008,7 +3008,7 @@
   severity int(4) NOT NULL default '0',
   PRIMARY KEY  (md5_value,filename(100),tiki_version),
   KEY sdb_fn (filename)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 
 #
 # Table structure for table tiki_semaphores
@@ -3024,7 +3024,7 @@
   user varchar(200) default NULL,
   timestamp int(14) default NULL,
   PRIMARY KEY  (semName)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -3044,7 +3044,7 @@
   data longblob,
   datatxt longblob,
   PRIMARY KEY  (editionId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -3058,7 +3058,7 @@
   login varchar(40) default '',
   error char(1) default '',
   KEY  (editionId)
-) TYPE=MyISAM ;
+) ENGINE=MyISAM ;
 # --------------------------------------------------------
 
 
@@ -3078,7 +3078,7 @@
   PRIMARY KEY  (sessionId),
   KEY user (user),
   KEY timestamp (timestamp)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 # Tables for TikiSheet
@@ -3091,7 +3091,7 @@
   footerRow int(4) NOT NULL default '0',
   className varchar(64) default NULL,
   UNIQUE KEY sheetId (sheetId,begin)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_sheet_values;
 CREATE TABLE tiki_sheet_values (
@@ -3108,7 +3108,7 @@
   user varchar(200) default NULL,
   UNIQUE KEY sheetId (sheetId,begin,rowIndex,columnIndex),
   KEY sheetId_2 (sheetId,rowIndex,columnIndex)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_sheets;
 CREATE TABLE tiki_sheets (
@@ -3117,7 +3117,7 @@
   description text,
   author varchar(200) NOT NULL default '',
   PRIMARY KEY  (sheetId)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 
 #
 # Table structure for table tiki_shoutbox
@@ -3134,7 +3134,7 @@
   user varchar(200) default NULL,
   hash varchar(32) default NULL,
   PRIMARY KEY  (msgId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -3146,7 +3146,7 @@
   word VARCHAR( 40 ) NOT NULL ,
   qty INT DEFAULT '0' NOT NULL ,
   PRIMARY KEY  (word)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -3161,7 +3161,7 @@
   structure_id int(14) NOT NULL auto_increment,
   version int(14) default NULL,
   PRIMARY KEY  (structure_id)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -3183,7 +3183,7 @@
   PRIMARY KEY  (page_ref_id),
   KEY pidpaid (page_id,parent_id),
   KEY page_id (page_id)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -3229,7 +3229,7 @@
   rating decimal(3,2) default NULL,
   isfloat char(1) default NULL,
   PRIMARY KEY  (subId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -3248,7 +3248,7 @@
   created int(14) default NULL,
   user varchar(200) default NULL,
   PRIMARY KEY  (sfqId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -3265,7 +3265,7 @@
   qoption text,
   votes int(10) default NULL,
   PRIMARY KEY  (optionId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -3287,7 +3287,7 @@
   value int(10) default NULL,
   average decimal(4,2) default NULL,
   PRIMARY KEY  (questionId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -3307,7 +3307,7 @@
   created int(14) default NULL,
   status char(1) default NULL,
   PRIMARY KEY  (surveyId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -3331,7 +3331,7 @@
   ip varchar(15) default NULL,
   flag char(1) default NULL,
   PRIMARY KEY  (tagName,pageName)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -3346,7 +3346,7 @@
   categId int(12) NOT NULL default '0',
   theme varchar(250) NOT NULL default '',
   PRIMARY KEY  (categId)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -3363,7 +3363,7 @@
   name varchar(250) NOT NULL default '',
   theme varchar(250) NOT NULL default '',
   PRIMARY KEY  (objId(100), type(100))
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -3378,7 +3378,7 @@
   section varchar(250) NOT NULL default '',
   theme varchar(250) NOT NULL default '',
   PRIMARY KEY  (section)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -3399,7 +3399,7 @@
   active char(1) default NULL,
   created int(14) default NULL,
   PRIMARY KEY  (topicId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -3426,7 +3426,7 @@
   isMultilingual char(1) default 'n',
   description text,
   PRIMARY KEY  (fieldId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -3452,7 +3452,7 @@
   longdesc blob,
   version varchar(40) default NULL,
   PRIMARY KEY  (attId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -3471,7 +3471,7 @@
   title varchar(200) default NULL,
   posted int(14) default NULL,
   PRIMARY KEY  (commentId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -3489,7 +3489,7 @@
   value text,
   PRIMARY KEY  (itemId,fieldId,lang),
   FULLTEXT KEY ft (value)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -3507,7 +3507,7 @@
   status char(1) default NULL,
   lastModif int(14) default NULL,
   PRIMARY KEY  (itemId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -3523,7 +3523,7 @@
   name varchar(80) NOT NULL default '',
   value text default NULL,
   PRIMARY KEY  (trackerId,name(30))
-) TYPE=MyISAM ;
+) ENGINE=MyISAM ;
 # --------------------------------------------------------
 
 
@@ -3551,7 +3551,7 @@
   showAttachments char(1) default NULL,
   orderAttachments varchar(255) NOT NULL default 'filename,created,filesize,downloads,desc',
   PRIMARY KEY  (trackerId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -3569,7 +3569,7 @@
   PRIMARY KEY  (source(255),lang),
   UNIQUE KEY id (id),
   KEY id_2 (id)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -3586,7 +3586,7 @@
   questionId int(10) NOT NULL default '0',
   optionId int(10) NOT NULL default '0',
   PRIMARY KEY  (userResultId,quizId,questionId,optionId)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 
@@ -3608,7 +3608,7 @@
   filesize varchar(255) NOT NULL default '',
   filecontent longblob NOT NULL,
   PRIMARY KEY  (answerUploadId)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 
 
 #
@@ -3627,7 +3627,7 @@
   type char(1) default NULL,
   user varchar(200) NOT NULL default '',
   PRIMARY KEY  (name(30),user,position)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -3644,7 +3644,7 @@
   user varchar(200) NOT NULL default '',
   name varchar(30) default NULL,
   PRIMARY KEY  (user,folderId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -3664,7 +3664,7 @@
   folderId int(12) NOT NULL default '0',
   user varchar(200) NOT NULL default '',
   PRIMARY KEY  (urlId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -3689,7 +3689,7 @@
   useAuth char(1) default NULL,
   smtpPort int(4) default NULL,
   PRIMARY KEY  (accountId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -3708,7 +3708,7 @@
   position int(4) default NULL,
   mode char(1) default NULL,
   PRIMARY KEY  (menuId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -3725,7 +3725,7 @@
   data longblob,
   parse char(1) default NULL,
   PRIMARY KEY  (name)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 INSERT INTO tiki_user_modules (name, title, data, parse) VALUES ('mnu_application_menu', 'Menu', '{menu id=42}', 'n');
 
@@ -3747,7 +3747,7 @@
   size int(14) default NULL,
   parse_mode varchar(20) default NULL,
   PRIMARY KEY  (noteId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -3765,7 +3765,7 @@
   first int(14) default NULL,
   level int(8) default NULL,
   PRIMARY KEY  (user)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -3781,7 +3781,7 @@
   prefName varchar(40) NOT NULL default '',
   value varchar(250) default NULL,
   PRIMARY KEY  (user,prefName)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -3802,7 +3802,7 @@
   resultId int(10) default NULL,
   userResultId int(10) NOT NULL auto_increment,
   PRIMARY KEY  (userResultId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -3817,7 +3817,7 @@
   user varchar(200) NOT NULL default '',
   quizId varchar(255) NOT NULL default '',
   PRIMARY KEY  (user,quizId(50))
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 
@@ -3847,7 +3847,7 @@
   accepted_creator char(1) DEFAULT NULL,             -- y - yes, n - no, null - waiting
   accepted_user char(1) DEFAULT NULL,                -- y - yes, n - no, null - waiting
   PRIMARY KEY (belongs_to, task_version)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 
 #
@@ -3871,7 +3871,7 @@
   percentage int(4) default NULL,
   PRIMARY KEY (taskId),
   UNIQUE(creator, created)
-) TYPE=MyISAM AUTO_INCREMENT=1;
+) ENGINE=MyISAM AUTO_INCREMENT=1;
 
 # --------------------------------------------------------
 
@@ -3888,7 +3888,7 @@
   id varchar(255) NOT NULL default '',
   optionId int(10) NOT NULL default 0,
   PRIMARY KEY  (`user`(100),id(100))
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -3909,7 +3909,7 @@
   url varchar(250) default NULL,
   email varchar(200) default NULL,
   PRIMARY KEY  (`user`(100),event,object(100))
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -3933,7 +3933,7 @@
   path varchar(255) default NULL,
   created int(14) default NULL,
   PRIMARY KEY  (fileId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -3948,7 +3948,7 @@
   user varchar(200) default NULL,
   points decimal(8,2) default NULL,
   voted int(8) default NULL
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -3965,7 +3965,7 @@
   email varchar(200) default NULL,
   lastLogin int(14) default NULL,
   PRIMARY KEY  (user)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -3984,7 +3984,7 @@
   nickname varchar(200) default NULL,
   user varchar(200) NOT NULL default '',
   PRIMARY KEY  (contactId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 DROP TABLE IF EXISTS tiki_webmail_contacts_groups;
@@ -3992,7 +3992,7 @@
   contactId int(12) NOT NULL,
   groupName varchar(255) NOT NULL,
   PRIMARY KEY  (contactId,groupName(200))
-) TYPE=MyISAM ;
+) ENGINE=MyISAM ;
 # --------------------------------------------------------
 
 #
@@ -4011,7 +4011,7 @@
   isReplied char(1) default NULL,
   isFlagged char(1) default NULL,
   PRIMARY KEY  (accountId,mailId)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -4035,7 +4035,7 @@
   created int(14) default NULL,
   comment varchar(250) default NULL,
   PRIMARY KEY  (attId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
 #
@@ -4049,7 +4049,7 @@
 CREATE TABLE tiki_zones (
   zone varchar(40) NOT NULL default '',
   PRIMARY KEY  (zone)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 #
 # Table structure for table tiki_download
@@ -4071,7 +4071,7 @@
   KEY userId (userId),
   KEY type (type),
   KEY date (date)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -4087,7 +4087,7 @@
   permName varchar(31) NOT NULL default '',
   value char(1) default '',
   PRIMARY KEY  (groupName(30),permName)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 insert into users_grouppermissions (groupName,permName) values('Anonymous','tiki_p_view');
@@ -4111,7 +4111,7 @@
   registrationChoice char(1) default NULL,
   registrationUsersFieldIds text,
   PRIMARY KEY  (groupName(30))
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -4128,7 +4128,7 @@
   objectType varchar(20) NOT NULL default '',
   objectId varchar(32) NOT NULL default '',
   PRIMARY KEY  (objectId, objectType, groupName(30),permName)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 
 #
@@ -4147,7 +4147,7 @@
   admin varchar(1) default NULL,
   PRIMARY KEY  (permName),
   KEY type (type)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 # 
 
@@ -4366,7 +4366,7 @@
   userId int(8) NOT NULL default '0',
   groupName varchar(255) NOT NULL default '',
   PRIMARY KEY  (userId,groupName(30))
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 # --------------------------------------------------------
 INSERT INTO users_groups (groupName,groupDesc) VALUES ('Anonymous','Public users not logged');
 INSERT INTO users_groups (groupName,groupDesc) VALUES ('Registered','Users logged into the system');
@@ -4411,7 +4411,7 @@
   KEY score (score),
   KEY registrationDate (registrationDate),
   KEY openid_url (openid_url)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 ### Administrator account
 INSERT INTO users_users(email,login,password,hash) VALUES ('','admin','admin',md5('adminadmin'));
@@ -4437,7 +4437,7 @@
   expiration int(11) NOT NULL default '0',
   description text NOT NULL,
   PRIMARY KEY  (repID)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 
 #
 # Dumping data for table 'tiki_integrator_reps'
@@ -4461,7 +4461,7 @@
   description text NOT NULL,
   PRIMARY KEY  (ruleID),
   KEY repID (repID)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 
 #
 # Dumping data for table 'tiki_integrator_rules'
@@ -4483,7 +4483,7 @@
   PRIMARY KEY  (tagId),
   KEY tagcategory (tagcategory),
   KEY taglabel (taglabel)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
+) ENGINE=MyISAM AUTO_INCREMENT=1 ;
 
 # wiki
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','wiki');
@@ -4670,7 +4670,7 @@
   lang varchar(16) default NULL,
   PRIMARY KEY (type, objId),
   KEY traId ( traId )
-) TYPE=MyISAM AUTO_INCREMENT=1;
+) ENGINE=MyISAM AUTO_INCREMENT=1;
 
 
 #
@@ -4682,7 +4682,7 @@
   user char(200) NOT NULL default '',
   friend char(200) NOT NULL default '',
   PRIMARY KEY  (`user`(120),friend(120))
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_friendship_requests;
 CREATE TABLE tiki_friendship_requests (
@@ -4690,7 +4690,7 @@
   userTo char(200) NOT NULL default '',
   tstamp timestamp(14) NOT NULL,
   PRIMARY KEY  (userFrom(120),userTo(120))
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_score;
 CREATE TABLE tiki_score (
@@ -4698,7 +4698,7 @@
   score int(11) NOT NULL default '0',
   expiration int(11) NOT NULL default '0',
   PRIMARY KEY  (event)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 
 
 INSERT INTO tiki_score (event, score, expiration) VALUES ('login',1,0);
@@ -4740,7 +4740,7 @@
   tstamp timestamp(14) NOT NULL,
   PRIMARY KEY  (user,event_id),
   KEY user (user,event_id,expire)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 
 
 #
@@ -4758,7 +4758,7 @@
 CREATE TABLE tiki_file_handlers (
 	mime_type varchar(64) default NULL,
 	cmd varchar(238) default NULL
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 
 #
 # Table structure for table tiki_stats
@@ -4774,7 +4774,7 @@
   day int(14) NOT NULL default '0',
   hits int(14) NOT NULL default '0',
   PRIMARY KEY  (object(200),type,day)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 
 #
 # Table structure for table tiki_events
@@ -4792,7 +4792,7 @@
   object varchar(200) NOT NULL default '',
   method varchar(200) NOT NULL default '',
   PRIMARY KEY  (callback_type,`order`)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 
 INSERT IGNORE INTO tiki_events(callback_type,`order`,event,file,object,method) VALUES ('1', '20', 'user_registers', 'lib/registration/registrationlib.php', 'registrationlib', 'callback_tikiwiki_setup_custom_fields');
 INSERT IGNORE INTO tiki_events(event,file,object,method) VALUES ('user_registers', 'lib/registration/registrationlib.php', 'registrationlib', 'callback_tikiwiki_save_registration');
@@ -4816,7 +4816,7 @@
   `show` tinyint(1) NOT NULL default '0',
   size varchar(10) default '10',
   PRIMARY KEY  (id)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_actionlog_conf;
 CREATE TABLE tiki_actionlog_conf (
@@ -4826,7 +4826,7 @@
  `status` char(1) default '',
 PRIMARY KEY (action, objectType),
 KEY (id)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Created', 'wiki page', 'y');
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Updated', 'wiki page', 'y');
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Removed', 'wiki page', 'y');
@@ -4877,7 +4877,7 @@
   tag varchar(30) NOT NULL default '',
   raw_tag varchar(50) NOT NULL default '',
   PRIMARY KEY  (tagId)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_freetagged_objects;
 CREATE TABLE tiki_freetagged_objects (
@@ -4889,7 +4889,7 @@
   KEY (tagId),
   KEY (user),
   KEY (objectId)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 
 
 DROP TABLE IF EXISTS tiki_contributions;
@@ -4898,7 +4898,7 @@
   name varchar(100) default NULL,
   description varchar(250) default NULL,
   PRIMARY KEY  (contributionId)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_contributions_assigned;
 CREATE TABLE tiki_contributions_assigned (
@@ -4905,7 +4905,7 @@
   contributionId int(12) NOT NULL,
   objectId int(12) NOT NULL,
   PRIMARY KEY  (objectId, contributionId)
-) TYPE=MyISAM;
+) ENGINE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_webmail_contacts_ext;
 CREATE TABLE `tiki_webmail_contacts_ext` (

------------------------------------------------------------------------
r9738 | (no author) | 2007-10-16 13:23:10 -0400 (ter, 16 out 2007) | 1 line

This commit was manufactured by cvs2svn to create branch '1.10'.


------------------------------------------------------------------------
r9616 | sylvieg | 2007-10-08 15:02:44 -0400 (seg, 08 out 2007) | 2 lines

[FIX]menu: change the uniq index to be able to have same option with different groups


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9615)
+++ tiki.sql	(revision 9616)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-10-08 18:52:40 $
-# $Author: pkdille $
+# $Date: 2007-10-08 19:02:43 $
+# $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -2057,7 +2057,7 @@
   groupname varchar(255) default NULL,
   userlevel int(4) default 0,
   PRIMARY KEY  (optionId),
-  UNIQUE KEY uniq_menu (menuId,name(50),url(80),position,section(50),perm(50))
+  UNIQUE KEY uniq_menu (menuId,name(30),url(50),position,section(60),perm(50),groupname(50))
 ) TYPE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Home','./',10,'','','');

------------------------------------------------------------------------
r9614 | pkdille | 2007-10-08 14:52:40 -0400 (seg, 08 out 2007) | 2 lines

[FIX] tiki_mypage creation request. Thks jonnyb


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9613)
+++ tiki.sql	(revision 9614)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-10-07 15:58:08 $
+# $Date: 2007-10-08 18:52:40 $
 # $Author: pkdille $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4943,9 +4943,9 @@
   `wintitlecolor` varchar(16) default NULL,
   `wintextcolor` varchar(16) default NULL,
   `bgimage` varchar(255) default NULL,
-  `bgtype` enum ('color', 'imageurl') default 'color' NOT NULL;
+  `bgtype` enum ('color', 'imageurl') default 'color' NOT NULL,
   `winbgimage` varchar(255) default NULL,
-  `winbgtype` enum ('color', 'imageurl') default 'color' NOT NULL;
+  `winbgtype` enum ('color', 'imageurl') default 'color' NOT NULL,
   PRIMARY KEY  (`id`),
   KEY `id_users` (`id_users`),
   KEY `name` (`name`)

------------------------------------------------------------------------
r9600 | pkdille | 2007-10-07 11:58:09 -0400 (dom, 07 out 2007) | 2 lines

1 typo for permission description and 1 french translation


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9599)
+++ tiki.sql	(revision 9600)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-10-06 09:50:05 $
+# $Date: 2007-10-07 15:58:08 $
 # $Author: pkdille $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4285,7 +4285,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_take_survey', 'Can take surveys', 'basic', 'surveys');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tasks', 'Can use tasks', 'registered', 'user');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tasks_admin', 'Can admin public tasks', 'admin', 'user');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tasks_receive', 'Can  receive tasks from other users', 'registered', 'user');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tasks_receive', 'Can receive tasks from other users', 'registered', 'user');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tasks_send', 'Can send tasks to other users', 'registered', 'user');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_topic_read', 'Can read a topic (Applies only to individual topic perms)', 'basic', 'cms');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tracker_view_ratings', 'Can view rating result for tracker items', 'basic', 'trackers');

------------------------------------------------------------------------
r9591 | pkdille | 2007-10-06 05:50:05 -0400 (sÃ¡b, 06 out 2007) | 2 lines

[ENH] quicktags administration: create a "tiki_p_admin_quicktags" perm that will allow to give the ability to manage quicktags without having tiki-p-admin perm


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9590)
+++ tiki.sql	(revision 9591)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-10-05 14:11:57 $
-# $Author: sylvieg $
+# $Date: 2007-10-06 09:50:05 $
+# $Author: pkdille $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -2215,6 +2215,7 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_html_pages','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_view_referer_stats','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_drawings','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_quicktags','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_shoutbox','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_live_support_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','user_is_operator','');
@@ -2238,7 +2239,7 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Mail notifications','tiki-admin_notifications.php',1120,'','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Search stats','tiki-search_stats.php',1125,'feature_search_stats','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Theme control','tiki-theme_control.php',1130,'feature_theme_control','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','QuickTags','tiki-admin_quicktags.php',1135,'','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','QuickTags','tiki-admin_quicktags.php',1135,'','tiki_p_admin,tiki_p_admin_quicktags','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Chat','tiki-admin_chat.php',1140,'feature_chat','tiki_p_admin_chat','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Categories','tiki-admin_categories.php',1145,'feature_categories','tiki_p_admin_categories','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Banners','tiki-list_banners.php',1150,'feature_banners','tiki_p_admin_banners','');
@@ -4188,6 +4189,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_users', 'Can admin users', 'admin', 'user');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_wiki', 'Can admin the wiki', 'editors', 'wiki', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_workflow', 'Can admin workflow processes', 'admin', 'workflow', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_quicktags', 'Can admin quicktags', 'admin', 'quicktags', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_approve_submission', 'Can approve submissions', 'editors', 'cms');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_attach_trackers', 'Can attach files to tracker items', 'registered', 'trackers');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_autoapprove_submission', 'Submited articles automatically approved', 'editors', 'cms');

------------------------------------------------------------------------
r9581 | sylvieg | 2007-10-05 10:12:17 -0400 (sex, 05 out 2007) | 2 lines

[MOD]perm tiki_p_watch_structure as it creates an overhead of queries


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9580)
+++ tiki.sql	(revision 9581)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-10-02 17:27:06 $
+# $Date: 2007-10-05 14:11:57 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4349,6 +4349,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_mypage', 'Can admin any mypage', 'admin', 'mypage','y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_mypage', 'Can list mypages', 'registered', 'mypage');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_mypage', 'Can assign perms to mypage', 'admin', 'mypage');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_watch_structure', 'Can watch structure', 'registered', 'wiki');
 # --------------------------------------------------------
 
 #

------------------------------------------------------------------------
r9556 | sylvieg | 2007-10-02 13:27:07 -0400 (ter, 02 out 2007) | 2 lines

[MOD]send structures by xmlrpc


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9555)
+++ tiki.sql	(revision 9556)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-09-25 02:12:50 $
-# $Author: mose $
+# $Date: 2007-10-02 17:27:06 $
+# $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -2868,7 +2868,12 @@
   receivedFromSite varchar(200) default NULL,
   receivedFromUser varchar(200) default NULL,
   receivedDate int(14) default NULL,
-  PRIMARY KEY  (receivedPageId)
+  structureName  varchar(250) default NULL,
+  parentName  varchar(250) default NULL,
+  page_alias varchar(250) default '',
+  pos int(4) default NULL,
+  PRIMARY KEY  (receivedPageId),
+  KEY structureName (structureName)
 ) TYPE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 

------------------------------------------------------------------------
r9512 | mose | 2007-09-24 22:12:50 -0400 (seg, 24 set 2007) | 2 lines

[MOD] newsletter: adding a way to include newsletter in another (sql part)


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9511)
+++ tiki.sql	(revision 9512)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-09-22 21:16:48 $
-# $Author: pkdille $
+# $Date: 2007-09-25 02:12:50 $
+# $Author: mose $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -2404,6 +2404,21 @@
 # --------------------------------------------------------
 
 #
+# Table structure for table tiki_newsletter_included
+#
+# Creation: Sep 25, 2007
+# Last update: Sep 25, 2007
+#
+
+DROP TABLE IF EXISTS tiki_newsletter_included;
+CREATE TABLE tiki_newsletter_included (
+  nlId int(12) NOT NULL default '0',
+  includedId int(12) NOT NULL default '0',
+  PRIMARY KEY  (nlId,includedId)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
 # Table structure for table tiki_newsletters
 #
 # Creation: Jul 03, 2003 at 07:42 PM

------------------------------------------------------------------------
r9501 | pkdille | 2007-09-22 17:16:48 -0400 (sÃ¡b, 22 set 2007) | 2 lines

[FIX] menu: search stats item should not appear if feature is deactivated


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9500)
+++ tiki.sql	(revision 9501)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-09-14 19:53:05 $
-# $Author: niclone $
+# $Date: 2007-09-22 21:16:48 $
+# $Author: pkdille $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -2236,7 +2236,7 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Menus','tiki-admin_menus.php',1105,'','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Polls','tiki-admin_polls.php',1110,'feature_polls','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Mail notifications','tiki-admin_notifications.php',1120,'','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Search stats','tiki-search_stats.php',1125,'feature_search','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Search stats','tiki-search_stats.php',1125,'feature_search_stats','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Theme control','tiki-theme_control.php',1130,'feature_theme_control','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','QuickTags','tiki-admin_quicktags.php',1135,'','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Chat','tiki-admin_chat.php',1140,'feature_chat','tiki_p_admin_chat','');

------------------------------------------------------------------------
r9440 | niclone | 2007-09-14 15:53:06 -0400 (sex, 14 set 2007) | 2 lines

[FIX] mypage: added support for background images


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9439)
+++ tiki.sql	(revision 9440)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-09-12 01:50:57 $
+# $Date: 2007-09-14 19:53:05 $
 # $Author: niclone $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4919,6 +4919,10 @@
   `winbgcolor` varchar(16) default NULL,
   `wintitlecolor` varchar(16) default NULL,
   `wintextcolor` varchar(16) default NULL,
+  `bgimage` varchar(255) default NULL,
+  `bgtype` enum ('color', 'imageurl') default 'color' NOT NULL;
+  `winbgimage` varchar(255) default NULL,
+  `winbgtype` enum ('color', 'imageurl') default 'color' NOT NULL;
   PRIMARY KEY  (`id`),
   KEY `id_users` (`id_users`),
   KEY `name` (`name`)

------------------------------------------------------------------------
r9421 | niclone | 2007-09-11 21:50:57 -0400 (ter, 11 set 2007) | 2 lines

[FIX] mypage: added support for windows title, text content, and background color choosing


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9420)
+++ tiki.sql	(revision 9421)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-09-10 16:18:58 $
+# $Date: 2007-09-12 01:50:57 $
 # $Author: niclone $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4916,6 +4916,9 @@
   `name` varchar(255) NOT NULL,
   `description` varchar(255) NOT NULL,
   `bgcolor` varchar(16) default NULL,
+  `winbgcolor` varchar(16) default NULL,
+  `wintitlecolor` varchar(16) default NULL,
+  `wintextcolor` varchar(16) default NULL,
   PRIMARY KEY  (`id`),
   KEY `id_users` (`id_users`),
   KEY `name` (`name`)

------------------------------------------------------------------------
r9399 | niclone | 2007-09-10 12:18:58 -0400 (seg, 10 set 2007) | 2 lines

[FIX] mypages/types: added preliminary support for templates by types


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9398)
+++ tiki.sql	(revision 9399)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-09-09 16:24:48 $
-# $Author: nkoth $
+# $Date: 2007-09-10 16:18:58 $
+# $Author: niclone $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4954,6 +4954,7 @@
   `fix_dimensions` enum('no','yes') NOT NULL,
   `def_bgcolor` varchar(8) default NULL,
   `fix_bgcolor` enum('no','yes') NOT NULL,
+  `templateuser` int(11) NOT NULL,
   PRIMARY KEY  (`id`),
   KEY `name` (`name`)
 ) ENGINE=MyISAM;

------------------------------------------------------------------------
r9385 | nkoth | 2007-09-09 12:24:48 -0400 (dom, 09 set 2007) | 2 lines

[NEW] add openid support


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9384)
+++ tiki.sql	(revision 9385)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-09-09 16:21:33 $
+# $Date: 2007-09-09 16:24:48 $
 # $Author: nkoth $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4382,10 +4382,12 @@
   score int(11) NOT NULL default 0,
   valid varchar(32) default NULL,
   unsuccessful_logins int(14) default 0,
+  openid_url varchar(255) default NULL,
   PRIMARY KEY  (userId),
   KEY login (login),
   KEY score (score),
-  KEY registrationDate (registrationDate)
+  KEY registrationDate (registrationDate),
+  KEY openid_url (openid_url)
 ) TYPE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 ### Administrator account

------------------------------------------------------------------------
r9384 | nkoth | 2007-09-09 12:22:21 -0400 (dom, 09 set 2007) | 2 lines

[FIX] field length should be 255 not 256?


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9383)
+++ tiki.sql	(revision 9384)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-09-02 20:22:11 $
-# $Author: parkercroft $
+# $Date: 2007-09-09 16:21:33 $
+# $Author: nkoth $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4925,7 +4925,7 @@
   `created` int(11) NOT NULL,
   `modified` int(11) NOT NULL,
   `viewed` int(11) NOT NULL,
-  `title` varchar(256) NOT NULL,
+  `title` varchar(255) NOT NULL,
   `inbody` enum('n','y') NOT NULL default 'n',
   `modal` enum('n','y') NOT NULL default 'n',
   `left` int(11) NOT NULL,

------------------------------------------------------------------------
r9335 | parkercroft | 2007-09-02 16:22:11 -0400 (dom, 02 set 2007) | 2 lines

Remove a bogus key


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9334)
+++ tiki.sql	(revision 9335)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-09-02 12:16:37 $
-# $Author: sylvieg $
+# $Date: 2007-09-02 20:22:11 $
+# $Author: parkercroft $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4917,7 +4917,6 @@
   PRIMARY KEY  (`id`),
   KEY `id_users` (`id_users`),
   KEY `name` (`name`)
-  KEY `id_types` (`id_types`)
 ) ENGINE=MyISAM;
 
 CREATE TABLE `tiki_mypagewin` (

------------------------------------------------------------------------
r9330 | sylvieg | 2007-09-02 08:16:38 -0400 (dom, 02 set 2007) | 2 lines

varcher limited to 255


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9329)
+++ tiki.sql	(revision 9330)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-08-27 09:57:41 $
-# $Author: niclone $
+# $Date: 2007-09-02 12:16:37 $
+# $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4944,7 +4944,7 @@
   `id` int(11) NOT NULL auto_increment,
   `created` int(11) NOT NULL,
   `modified` int(11) NOT NULL,
-  `name` varchar(256) NOT NULL,
+  `name` varchar(255) NOT NULL,
   `description` varchar(255) NOT NULL,
   `section` varchar(255) default NULL,
   `permissions` varchar(255) default NULL,

------------------------------------------------------------------------
r9281 | niclone | 2007-08-27 05:57:41 -0400 (seg, 27 ago 2007) | 2 lines

[DEV] mypage: added created, modified, viewed of mypage and mypagewin. (viewed not yet incremented)


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9280)
+++ tiki.sql	(revision 9281)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-08-25 14:10:42 $
+# $Date: 2007-08-27 09:57:41 $
 # $Author: niclone $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4906,6 +4906,9 @@
 CREATE TABLE `tiki_mypage` (
   `id` int(11) NOT NULL auto_increment,
   `id_users` int(11) NOT NULL,
+  `created` int(11) NOT NULL,
+  `modified` int(11) NOT NULL,
+  `viewed` int(11) NOT NULL,
   `width` int(11) NOT NULL,
   `height` int(11) NOT NULL,
   `name` varchar(255) NOT NULL,
@@ -4920,6 +4923,9 @@
 CREATE TABLE `tiki_mypagewin` (
   `id` int(11) NOT NULL auto_increment,
   `id_mypage` int(11) NOT NULL,
+  `created` int(11) NOT NULL,
+  `modified` int(11) NOT NULL,
+  `viewed` int(11) NOT NULL,
   `title` varchar(256) NOT NULL,
   `inbody` enum('n','y') NOT NULL default 'n',
   `modal` enum('n','y') NOT NULL default 'n',
@@ -4936,6 +4942,8 @@
 
 CREATE TABLE `tiki_mypage_types` (
   `id` int(11) NOT NULL auto_increment,
+  `created` int(11) NOT NULL,
+  `modified` int(11) NOT NULL,
   `name` varchar(256) NOT NULL,
   `description` varchar(255) NOT NULL,
   `section` varchar(255) default NULL,

------------------------------------------------------------------------
r9275 | niclone | 2007-08-25 10:10:42 -0400 (sÃ¡b, 25 ago 2007) | 2 lines

[FIX] mypage: mypage type more maleable


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9274)
+++ tiki.sql	(revision 9275)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-08-21 20:33:05 $
+# $Date: 2007-08-25 14:10:42 $
 # $Author: niclone $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4927,7 +4927,7 @@
   `top` int(11) NOT NULL,
   `width` int(11) NOT NULL,
   `height` int(11) NOT NULL,
-  `contenttype` enum('iframe','wiki') default NULL,
+  `contenttype` varchar(31) default NULL,
   `config` blob,
   `content` blob,
   PRIMARY KEY  (`id`),

------------------------------------------------------------------------
r9230 | niclone | 2007-08-21 16:33:06 -0400 (ter, 21 ago 2007) | 2 lines

[DEV] mypage/types: add preliminary support for default values by types


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9229)
+++ tiki.sql	(revision 9230)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-08-17 10:17:12 $
+# $Date: 2007-08-21 20:33:05 $
 # $Author: niclone $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4928,7 +4928,8 @@
   `width` int(11) NOT NULL,
   `height` int(11) NOT NULL,
   `contenttype` enum('iframe','wiki') default NULL,
-  `content` text,
+  `config` blob,
+  `content` blob,
   PRIMARY KEY  (`id`),
   KEY `id_mypage` (`id_mypage`)
 ) ENGINE=MyISAM;
@@ -4939,6 +4940,11 @@
   `description` varchar(255) NOT NULL,
   `section` varchar(255) default NULL,
   `permissions` varchar(255) default NULL,
+  `def_height` int(11) default NULL,
+  `def_width` int(11) default NULL,
+  `fix_dimensions` enum('no','yes') NOT NULL,
+  `def_bgcolor` varchar(8) default NULL,
+  `fix_bgcolor` enum('no','yes') NOT NULL,
   PRIMARY KEY  (`id`),
   KEY `name` (`name`)
 ) ENGINE=MyISAM;

------------------------------------------------------------------------
r9211 | niclone | 2007-08-17 06:17:13 -0400 (sex, 17 ago 2007) | 2 lines

[FIX] mypage: update table for bgcolor


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9210)
+++ tiki.sql	(revision 9211)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-08-15 13:10:33 $
+# $Date: 2007-08-17 10:17:12 $
 # $Author: niclone $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4910,9 +4910,11 @@
   `height` int(11) NOT NULL,
   `name` varchar(255) NOT NULL,
   `description` varchar(255) NOT NULL,
+  `bgcolor` varchar(16) default NULL,
   PRIMARY KEY  (`id`),
   KEY `id_users` (`id_users`),
   KEY `name` (`name`)
+  KEY `id_types` (`id_types`)
 ) ENGINE=MyISAM;
 
 CREATE TABLE `tiki_mypagewin` (
@@ -4933,10 +4935,10 @@
 
 CREATE TABLE `tiki_mypage_types` (
   `id` int(11) NOT NULL auto_increment,
-  `name` varchar(256) collate utf8_bin NOT NULL,
-  `description` varchar(255) collate utf8_bin NOT NULL,
-  `section` varchar(255) collate utf8_bin default NULL,
-  `permissions` varchar(255) collate utf8_bin default NULL,
+  `name` varchar(256) NOT NULL,
+  `description` varchar(255) NOT NULL,
+  `section` varchar(255) default NULL,
+  `permissions` varchar(255) default NULL,
   PRIMARY KEY  (`id`),
   KEY `name` (`name`)
 ) ENGINE=MyISAM;
@@ -4943,7 +4945,7 @@
 
 CREATE TABLE `tiki_mypage_types_components` (
   `id_mypage_types` int(11) NOT NULL,
-  `compname` varchar(255) collate utf8_bin NOT NULL,
+  `compname` varchar(255) NOT NULL,
   `mincount` int(11) NOT NULL default '1',
   `maxcount` int(11) NOT NULL default '1',
   KEY `id_mypage_types` (`id_mypage_types`)

------------------------------------------------------------------------
r9192 | niclone | 2007-08-15 09:10:34 -0400 (qua, 15 ago 2007) | 2 lines

[DEV] mypage: added tables for mypage types


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9191)
+++ tiki.sql	(revision 9192)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-08-13 08:57:47 $
-# $Author: nyloth $
+# $Date: 2007-08-15 13:10:33 $
+# $Author: niclone $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4930,4 +4930,23 @@
   PRIMARY KEY  (`id`),
   KEY `id_mypage` (`id_mypage`)
 ) ENGINE=MyISAM;
+
+CREATE TABLE `tiki_mypage_types` (
+  `id` int(11) NOT NULL auto_increment,
+  `name` varchar(256) collate utf8_bin NOT NULL,
+  `description` varchar(255) collate utf8_bin NOT NULL,
+  `section` varchar(255) collate utf8_bin default NULL,
+  `permissions` varchar(255) collate utf8_bin default NULL,
+  PRIMARY KEY  (`id`),
+  KEY `name` (`name`)
+) ENGINE=MyISAM;
+
+CREATE TABLE `tiki_mypage_types_components` (
+  `id_mypage_types` int(11) NOT NULL,
+  `compname` varchar(255) collate utf8_bin NOT NULL,
+  `mincount` int(11) NOT NULL default '1',
+  `maxcount` int(11) NOT NULL default '1',
+  KEY `id_mypage_types` (`id_mypage_types`)
+) ENGINE=MyISAM;
+
 # ------------------------------------

------------------------------------------------------------------------
r9176 | nyloth | 2007-08-13 04:57:49 -0400 (seg, 13 ago 2007) | 2 lines

[FIX] forums: moderation now worksfor every posts in a moderated forum (only new topics where moderated before).


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9175)
+++ tiki.sql	(revision 9176)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-08-09 21:33:59 $
-# $Author: sylvieg $
+# $Date: 2007-08-13 08:57:47 $
+# $Author: nyloth $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -1501,6 +1501,7 @@
   topic_smiley varchar(80) default NULL,
   topic_title varchar(240) default NULL,
   summary varchar(240) default NULL,
+  in_reply_to varchar(128) default NULL,
   PRIMARY KEY  (qId)
 ) TYPE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------

------------------------------------------------------------------------
r9134 | sylvieg | 2007-08-09 17:33:59 -0400 (qui, 09 ago 2007) | 2 lines

rollback perm on component tiki perms are enough


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9133)
+++ tiki.sql	(revision 9134)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-08-09 18:35:29 $
+# $Date: 2007-08-09 21:33:59 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4327,10 +4327,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_mypage', 'Can edit any mypage', 'registered', 'mypage');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_mypage', 'Can admin any mypage', 'admin', 'mypage','y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_mypage', 'Can list mypages', 'registered', 'mypage');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_component', 'Can list components', 'basic', 'component');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_component', 'Can view a component', 'basic', 'component');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_mypage', 'Can assign perms to mypage', 'admin', 'mypage');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_component', 'Can assign perms to component', 'admin', 'component');
 # --------------------------------------------------------
 
 #

------------------------------------------------------------------------
r9124 | sylvieg | 2007-08-09 14:35:29 -0400 (qui, 09 ago 2007) | 2 lines

[MOD]mypage: local perm to mypage


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9123)
+++ tiki.sql	(revision 9124)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-08-09 18:34:37 $
-# $Author: niclone $
+# $Date: 2007-08-09 18:35:29 $
+# $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4329,6 +4329,8 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_mypage', 'Can list mypages', 'registered', 'mypage');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_component', 'Can list components', 'basic', 'component');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_component', 'Can view a component', 'basic', 'component');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_mypage', 'Can assign perms to mypage', 'admin', 'mypage');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_component', 'Can assign perms to component', 'admin', 'component');
 # --------------------------------------------------------
 
 #

------------------------------------------------------------------------
r9123 | niclone | 2007-08-09 14:34:38 -0400 (qui, 09 ago 2007) | 2 lines

[FIX] sql: escaping a ' char


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9122)
+++ tiki.sql	(revision 9123)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-08-09 17:23:43 $
-# $Author: sylvieg $
+# $Date: 2007-08-09 18:34:37 $
+# $Author: niclone $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4323,7 +4323,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_file_galleries', 'Can list file galleries', 'basic', 'file galleries');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_wiki_page', 'Can assign perms to wiki pages', 'admin', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_mypage', 'Can view any mypage', 'basic', 'mypage');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_own_mypage', 'Can view/edit only one's own mypages', 'registered', 'mypage');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_own_mypage', 'Can view/edit only one\'s own mypages', 'registered', 'mypage');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_mypage', 'Can edit any mypage', 'registered', 'mypage');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_mypage', 'Can admin any mypage', 'admin', 'mypage','y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_mypage', 'Can list mypages', 'registered', 'mypage');

------------------------------------------------------------------------
r9116 | sylvieg | 2007-08-09 13:23:44 -0400 (qui, 09 ago 2007) | 2 lines

[MOD]mypage: some fix on perms mypage + perm on component


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9115)
+++ tiki.sql	(revision 9116)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-08-08 18:25:21 $
+# $Date: 2007-08-09 17:23:43 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4326,6 +4326,9 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_own_mypage', 'Can view/edit only one's own mypages', 'registered', 'mypage');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_mypage', 'Can edit any mypage', 'registered', 'mypage');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_mypage', 'Can admin any mypage', 'admin', 'mypage','y');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_mypage', 'Can list mypages', 'registered', 'mypage');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_component', 'Can list components', 'basic', 'component');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_component', 'Can view a component', 'basic', 'component');
 # --------------------------------------------------------
 
 #

------------------------------------------------------------------------
r9093 | sylvieg | 2007-08-08 14:25:21 -0400 (qua, 08 ago 2007) | 2 lines

Instant-Auto-Merge from BRANCH-1-9 to HEAD


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9092)
+++ tiki.sql	(revision 9093)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-08-07 22:01:10 $
+# $Date: 2007-08-08 18:25:21 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4344,6 +4344,7 @@
 # --------------------------------------------------------
 INSERT INTO users_groups (groupName,groupDesc) VALUES ('Anonymous','Public users not logged');
 INSERT INTO users_groups (groupName,groupDesc) VALUES ('Registered','Users logged into the system');
+INSERT INTO users_groups (groupName,groupDesc) VALUES ('Admins','Administrator and accounts managers.');
 # --------------------------------------------------------
 
 #
@@ -4388,6 +4389,8 @@
 INSERT INTO users_users(email,login,password,hash) VALUES ('','admin','admin',md5('adminadmin'));
 UPDATE users_users set currentLogin=lastLogin, registrationDate=lastLogin;
 INSERT INTO tiki_user_preferences (user,prefName,value) VALUES ('admin','realName','System Administrator');
+INSERT INTO users_usergroups (userId, groupName) VALUES(1,'Admins');
+INSERT INTO users_grouppermissions (groupName, permName) VALUES ('Admins','tiki_p_admin');
 # --------------------------------------------------------
 # 
 

------------------------------------------------------------------------
r9081 | sylvieg | 2007-08-07 18:01:11 -0400 (ter, 07 ago 2007) | 2 lines

[MOD]mypage: perms


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9080)
+++ tiki.sql	(revision 9081)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-08-06 19:20:52 $
-# $Author: niclone $
+# $Date: 2007-08-07 22:01:10 $
+# $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4322,6 +4322,10 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tell_a_friend', 'Can send a link to a friend', 'Basic', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_file_galleries', 'Can list file galleries', 'basic', 'file galleries');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_wiki_page', 'Can assign perms to wiki pages', 'admin', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_mypage', 'Can view any mypage', 'basic', 'mypage');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_own_mypage', 'Can view/edit only one's own mypages', 'registered', 'mypage');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_mypage', 'Can edit any mypage', 'registered', 'mypage');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_mypage', 'Can admin any mypage', 'admin', 'mypage','y');
 # --------------------------------------------------------
 
 #

------------------------------------------------------------------------
r9044 | niclone | 2007-08-06 15:20:52 -0400 (seg, 06 ago 2007) | 2 lines

[MOD] mypage: updated tiki.sql for mypage table with more columns


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9043)
+++ tiki.sql	(revision 9044)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-08-06 13:13:38 $
+# $Date: 2007-08-06 19:20:52 $
 # $Author: niclone $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4898,8 +4898,11 @@
   `id_users` int(11) NOT NULL,
   `width` int(11) NOT NULL,
   `height` int(11) NOT NULL,
+  `name` varchar(255) NOT NULL,
+  `description` varchar(255) NOT NULL,
   PRIMARY KEY  (`id`),
-  KEY `id_users` (`id_users`)
+  KEY `id_users` (`id_users`),
+  KEY `name` (`name`)
 ) ENGINE=MyISAM;
 
 CREATE TABLE `tiki_mypagewin` (

------------------------------------------------------------------------
r9031 | niclone | 2007-08-06 09:13:38 -0400 (seg, 06 ago 2007) | 2 lines

[NEW] mypage: add mypage feature (alpha state), mypage is intended to let users build there own pages with choosable and plugable components.


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9030)
+++ tiki.sql	(revision 9031)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-08-03 18:42:16 $
-# $Author: sylvieg $
+# $Date: 2007-08-06 13:13:38 $
+# $Author: niclone $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4891,3 +4891,30 @@
   PRIMARY KEY ( `fieldId` ),
   INDEX ( `user` )
 ) ENGINE = MyISAM ;
+
+# ---------- mypage ----------------
+CREATE TABLE `tiki_mypage` (
+  `id` int(11) NOT NULL auto_increment,
+  `id_users` int(11) NOT NULL,
+  `width` int(11) NOT NULL,
+  `height` int(11) NOT NULL,
+  PRIMARY KEY  (`id`),
+  KEY `id_users` (`id_users`)
+) ENGINE=MyISAM;
+
+CREATE TABLE `tiki_mypagewin` (
+  `id` int(11) NOT NULL auto_increment,
+  `id_mypage` int(11) NOT NULL,
+  `title` varchar(256) NOT NULL,
+  `inbody` enum('n','y') NOT NULL default 'n',
+  `modal` enum('n','y') NOT NULL default 'n',
+  `left` int(11) NOT NULL,
+  `top` int(11) NOT NULL,
+  `width` int(11) NOT NULL,
+  `height` int(11) NOT NULL,
+  `contenttype` enum('iframe','wiki') default NULL,
+  `content` text,
+  PRIMARY KEY  (`id`),
+  KEY `id_mypage` (`id_mypage`)
+) ENGINE=MyISAM;
+# ------------------------------------

------------------------------------------------------------------------
r9019 | sylvieg | 2007-08-03 14:42:17 -0400 (sex, 03 ago 2007) | 2 lines

[FIX]modules: as tiki_modules have moduleId now (to have 2 same modules with diff params) tiki_user_assigned_modules must have moduleId


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9018)
+++ tiki.sql	(revision 9019)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-08-03 17:03:30 $
-# $Author: niclone $
+# $Date: 2007-08-03 18:42:16 $
+# $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -3598,6 +3598,7 @@
 
 DROP TABLE IF EXISTS tiki_user_assigned_modules;
 CREATE TABLE tiki_user_assigned_modules (
+  moduleId int(8) NOT NULL,
   name varchar(200) NOT NULL default '',
   position char(1) default NULL,
   ord int(4) default NULL,

------------------------------------------------------------------------
r9017 | niclone | 2007-08-03 13:03:30 -0400 (sex, 03 ago 2007) | 2 lines

[FIX] bad typoo on tikii


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9016)
+++ tiki.sql	(revision 9017)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-08-02 13:41:46 $
-# $Author: sylvieg $
+# $Date: 2007-08-03 17:03:30 $
+# $Author: niclone $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4469,8 +4469,8 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','wiki');
-INSERT INTO tikii_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('list bullets', '*text', 'pics/icons/text_list_bullets.png', 'wiki');
-INSERT INTO tikii_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('list numbers', '#text', 'pics/icons/text_list_numbers.png', 'wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('list bullets', '*text', 'pics/icons/text_list_bullets.png', 'wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('list numbers', '#text', 'pics/icons/text_list_numbers.png', 'wiki');
 
 # maps
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New wms Metadata','METADATA\r\n		\"wms_name\" \"myname\"\r\n 	"wms_srs" "EPSG:4326"\r\n 	"wms_server_version" " "\r\n 	"wms_layers" "mylayers"\r\n 	"wms_request" "myrequest"\r\n 	"wms_format" " "\r\n 	"wms_time" " "\r\n END', 'pics/icons/tag_blue_add.png','maps');

------------------------------------------------------------------------
r9011 | sylvieg | 2007-08-02 09:41:47 -0400 (qui, 02 ago 2007) | 2 lines

[MOD]quicktags: 2 new wiki quicktags list_bullet and list_number


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 9010)
+++ tiki.sql	(revision 9011)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-08-01 10:53:57 $
+# $Date: 2007-08-02 13:41:46 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4469,6 +4469,8 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','wiki');
+INSERT INTO tikii_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('list bullets', '*text', 'pics/icons/text_list_bullets.png', 'wiki');
+INSERT INTO tikii_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('list numbers', '#text', 'pics/icons/text_list_numbers.png', 'wiki');
 
 # maps
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New wms Metadata','METADATA\r\n		\"wms_name\" \"myname\"\r\n 	"wms_srs" "EPSG:4326"\r\n 	"wms_server_version" " "\r\n 	"wms_layers" "mylayers"\r\n 	"wms_request" "myrequest"\r\n 	"wms_format" " "\r\n 	"wms_time" " "\r\n END', 'pics/icons/tag_blue_add.png','maps');

------------------------------------------------------------------------
r8997 | sylvieg | 2007-08-01 06:53:57 -0400 (qua, 01 ago 2007) | 2 lines

[FIX]varchar is limitted to 255 in mysql 4


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8996)
+++ tiki.sql	(revision 8997)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-07-25 22:16:50 $
-# $Author: pkdille $
+# $Date: 2007-08-01 10:53:57 $
+# $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4873,7 +4873,7 @@
 CREATE TABLE `tiki_webmail_contacts_ext` (
   `contactId` int(11) NOT NULL,
   `fieldId` int(10) unsigned NOT NULL,
-  `value` varchar(256) NOT NULL,
+  `value` varchar(255) NOT NULL,
   `hidden` tinyint(1) NOT NULL,
   KEY `contactId` (`contactId`)
 ) ENGINE=MyISAM;
@@ -4882,7 +4882,7 @@
 CREATE TABLE `tiki_webmail_contacts_fields` (
   `fieldId` int(10) unsigned NOT NULL auto_increment,
   `user` VARCHAR( 200 ) NOT NULL ,
-  `fieldname` VARCHAR( 256 ) NOT NULL ,
+  `fieldname` VARCHAR( 255 ) NOT NULL ,
   `order` int(2) NOT NULL default '0',
   `show` char(1) NOT NULL default 'n',
   PRIMARY KEY ( `fieldId` ),

------------------------------------------------------------------------
r8976 | pkdille | 2007-07-25 18:16:50 -0400 (qua, 25 jul 2007) | 5 lines

[MOD] quicktags: The default quicktag set (with the new icon set) should be the same in each use case:
	- new install of tiki v1.10
	- upgrading to v1.10 from 1.9.x
	- running tiki_1.9to_1.10 script to install the last devs


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8975)
+++ tiki.sql	(revision 8976)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-07-24 14:47:49 $
-# $Author: sylvieg $
+# $Date: 2007-07-25 22:16:50 $
+# $Author: pkdille $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4488,7 +4488,7 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','newsletters');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','newsletters');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','newsletters');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/world_link.png','newsletters');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text|nocache]','pics/icons/world_link.png','newsletters');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading1','!text','pics/icons/text_heading_1.png','newsletters');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading2','!!text','pics/icons/text_heading_2.png','newsletters');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','newsletters');

------------------------------------------------------------------------
r8962 | sylvieg | 2007-07-24 10:47:49 -0400 (ter, 24 jul 2007) | 2 lines

Instant-Auto-Merge from BRANCH-1-9 to HEAD


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8961)
+++ tiki.sql	(revision 8962)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-07-21 00:57:43 $
-# $Author: nkoth $
+# $Date: 2007-07-24 14:47:49 $
+# $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4371,6 +4371,7 @@
   avatarLibName varchar(200) default NULL,
   avatarType char(1) default NULL,
   score int(11) NOT NULL default 0,
+  valid varchar(32) default NULL,
   unsuccessful_logins int(14) default 0,
   PRIMARY KEY  (userId),
   KEY login (login),

------------------------------------------------------------------------
r8944 | nkoth | 2007-07-20 20:57:43 -0400 (sex, 20 jul 2007) | 2 lines

[MOD] share page perm is actually just the tiki_p_assign_perm_wiki_page perm - will merge functionality into tiki-objectpermissions.php


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8943)
+++ tiki.sql	(revision 8944)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-07-19 20:55:18 $
-# $Author: lphuberdeau $
+# $Date: 2007-07-21 00:57:43 $
+# $Author: nkoth $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4251,7 +4251,6 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_send_pages', 'Can send pages to other sites', 'registered', 'comm');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_sendme_articles', 'Can send articles to this site', 'registered', 'comm');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_sendme_pages', 'Can send pages to this site', 'registered', 'comm');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_share_page', 'Can use the share page interface', 'registered', 'wiki page');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_submit_article', 'Can submit articles', 'basic', 'cms');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_submit_link', 'Can submit sites to the directory', 'basic', 'directory');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_subscribe_email', 'Can subscribe any email to newsletters', 'editors', 'newsletters');
@@ -4321,6 +4320,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_blog', 'Can assign perms to blog', 'admin', 'blogs');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tell_a_friend', 'Can send a link to a friend', 'Basic', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_file_galleries', 'Can list file galleries', 'basic', 'file galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_wiki_page', 'Can assign perms to wiki pages', 'admin', 'wiki');
 # --------------------------------------------------------
 
 #

------------------------------------------------------------------------
r8924 | lphuberdeau | 2007-07-19 16:55:18 -0400 (qui, 19 jul 2007) | 2 lines

Page sharing


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8923)
+++ tiki.sql	(revision 8924)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-07-19 11:24:32 $
-# $Author: sylvieg $
+# $Date: 2007-07-19 20:55:18 $
+# $Author: lphuberdeau $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4251,6 +4251,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_send_pages', 'Can send pages to other sites', 'registered', 'comm');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_sendme_articles', 'Can send articles to this site', 'registered', 'comm');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_sendme_pages', 'Can send pages to this site', 'registered', 'comm');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_share_page', 'Can use the share page interface', 'registered', 'wiki page');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_submit_article', 'Can submit articles', 'basic', 'cms');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_submit_link', 'Can submit sites to the directory', 'basic', 'directory');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_subscribe_email', 'Can subscribe any email to newsletters', 'editors', 'newsletters');

------------------------------------------------------------------------
r8914 | sylvieg | 2007-07-19 07:24:32 -0400 (qui, 19 jul 2007) | 2 lines

[FIX]index are limitted to 250 chars


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8913)
+++ tiki.sql	(revision 8914)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-07-18 17:04:05 $
-# $Author: pkdille $
+# $Date: 2007-07-19 11:24:32 $
+# $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -2056,7 +2056,7 @@
   groupname varchar(255) default NULL,
   userlevel int(4) default 0,
   PRIMARY KEY  (optionId),
-  UNIQUE KEY uniq_menu (menuId,name,url,position,section,perm)
+  UNIQUE KEY uniq_menu (menuId,name(50),url(80),position,section(50),perm(50))
 ) TYPE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Home','./',10,'','','');

------------------------------------------------------------------------
r8904 | pkdille | 2007-07-18 13:04:10 -0400 (qua, 18 jul 2007) | 2 lines

[MOD] & (FIX]: quicktags: All quicktags icons are located in pics/icons (famfamfam silk icon collection) and the tiki_1.9_to_1.10 script will no longer add and double quicktags with the old icons


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8903)
+++ tiki.sql	(revision 8904)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-07-16 19:24:28 $
-# $Author: sylvieg $
+# $Date: 2007-07-18 17:04:05 $
+# $Author: pkdille $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4452,17 +4452,17 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/link.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','images/ed_copy.gif','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/world_link.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','pics/icons/page_link.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading1','!text','pics/icons/text_heading_1.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading2','!!text','pics/icons/text_heading_2.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','images/fullscreen_maximize.gif','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('rss feed','{rss id= }','pics/icons/feed.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/book_open.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('tagline','{cookie}','images/footprint.gif','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','images/ed_hr.gif','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/database_refresh.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('tagline','{cookie}','pics/icons/database_go.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','pics/icons/page.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','wiki');
@@ -4469,28 +4469,28 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','wiki');
 
 # maps
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New wms Metadata','METADATA\r\n		\"wms_name\" \"myname\"\r\n 	"wms_srs" "EPSG:4326"\r\n 	"wms_server_version" " "\r\n 	"wms_layers" "mylayers"\r\n 	"wms_request" "myrequest"\r\n 	"wms_format" " "\r\n 	"wms_time" " "\r\n END', 'img/icons/admin_metatags.png','maps');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Class', 'CLASS\r\n EXPRESSION ()\r\n SYMBOL 0\r\n OUTLINECOLOR\r\n COLOR\r\n NAME "myclass" \r\nEND #end of class', 'img/icons/mini_triangle.gif','maps');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Projection','PROJECTION\r\n "init=epsg:4326"\r\nEND','images/ico_mode.gif','maps');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Query','#\r\n# Start of query definitions\r\n#\r\n QUERYMAP\r\n STATUS ON\r\n STYLE HILITE\r\nEND','img/icons/questions.gif','maps');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Scalebar','#\r\n# Start of scalebar\r\n#\r\nSCALEBAR\r\n IMAGECOLOR 255 255 255\r\n STYLE 1\r\n SIZE 400 2\r\n COLOR 0 0 0\r\n UNITS KILOMETERS\r\n INTERVALS 5\r\n STATUS ON\r\nEND','img/icons/desc_length.gif','maps');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Layer','LAYER\r\n NAME\r\n TYPE\r\n STATUS ON\r\n DATA "mydata"\r\nEND #end of layer', 'images/ed_copy.gif', 'maps');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Label','LABEL\r\n COLOR\r\n ANGLE\r\n FONT arial\r\n TYPE TRUETYPE\r\n POSITION\r\n PARTIALS TRUE\r\n SIZE 6\r\n BUFFER 0\r\n OUTLINECOLOR \r\nEND #end of label', 'img/icons/fontfamily.gif', 'maps');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Reference','#\r\n#start of reference\r\n#\r\n REFERENCE\r\n SIZE 120 60\r\n STATUS ON\r\n EXTENT -180 -90 182 88\r\n OUTLINECOLOR 255 0 0\r\n IMAGE "myimagedata"\r\n COLOR -1 -1 -1\r\nEND','images/ed_image.gif','maps');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Legend','#\r\n#start of Legend\r\n#\r\n LEGEND\r\n KEYSIZE 18 12\r\n POSTLABELCACHE TRUE\r\n STATUS ON\r\nEND','images/ed_about.gif','maps');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Web','#\r\n# Start of web interface definition\r\n#\r\nWEB\r\n TEMPLATE "myfile/url"\r\n MINSCALE 1000\r\n MAXSCALE 40000\r\n IMAGEPATH "myimagepath"\r\n IMAGEURL "mypath"\r\nEND','img/icons/ico_link.gif','maps');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Outputformat','OUTPUTFORMAT\r\n NAME\r\n DRIVER " "\r\n MIMETYPE "myimagetype"\r\n IMAGEMODE RGB\r\n EXTENSION "png"\r\nEND','img/icons/opera.gif','maps');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Mapfile','#\r\n# Start of mapfile\r\n#\r\nNAME MYMAPFLE\r\n STATUS ON\r\nSIZE \r\nEXTENT\r\nUNITS \r\nSHAPEPATH " "\r\nIMAGETYPE " "\r\nFONTSET " "\r\nIMAGECOLOR -1 -1 -1\r\n\r\n#remove this text and add objects here\r\n\r\nEND # end of mapfile','img/icons/global.gif','maps');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New wms Metadata','METADATA\r\n		\"wms_name\" \"myname\"\r\n 	"wms_srs" "EPSG:4326"\r\n 	"wms_server_version" " "\r\n 	"wms_layers" "mylayers"\r\n 	"wms_request" "myrequest"\r\n 	"wms_format" " "\r\n 	"wms_time" " "\r\n END', 'pics/icons/tag_blue_add.png','maps');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Class', 'CLASS\r\n EXPRESSION ()\r\n SYMBOL 0\r\n OUTLINECOLOR\r\n COLOR\r\n NAME "myclass" \r\nEND #end of class', 'pics/icons/application_add.png','maps');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Projection','PROJECTION\r\n "init=epsg:4326"\r\nEND','pics/icons/image_add.png','maps');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Query','#\r\n# Start of query definitions\r\n#\r\n QUERYMAP\r\n STATUS ON\r\n STYLE HILITE\r\nEND','pics/icons/database_gear.png','maps');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Scalebar','#\r\n# Start of scalebar\r\n#\r\nSCALEBAR\r\n IMAGECOLOR 255 255 255\r\n STYLE 1\r\n SIZE 400 2\r\n COLOR 0 0 0\r\n UNITS KILOMETERS\r\n INTERVALS 5\r\n STATUS ON\r\nEND','pics/icons/layout_add.png','maps');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Layer','LAYER\r\n NAME\r\n TYPE\r\n STATUS ON\r\n DATA "mydata"\r\nEND #end of layer', 'pics/icons/layers.png', 'maps');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Label','LABEL\r\n COLOR\r\n ANGLE\r\n FONT arial\r\n TYPE TRUETYPE\r\n POSITION\r\n PARTIALS TRUE\r\n SIZE 6\r\n BUFFER 0\r\n OUTLINECOLOR \r\nEND #end of label', 'pics/icons/comment_add.png', 'maps');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Reference','#\r\n#start of reference\r\n#\r\n REFERENCE\r\n SIZE 120 60\r\n STATUS ON\r\n EXTENT -180 -90 182 88\r\n OUTLINECOLOR 255 0 0\r\n IMAGE "myimagedata"\r\n COLOR -1 -1 -1\r\nEND','pics/icons/picture_add.png','maps');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Legend','#\r\n#start of Legend\r\n#\r\n LEGEND\r\n KEYSIZE 18 12\r\n POSTLABELCACHE TRUE\r\n STATUS ON\r\nEND','pics/icons/note_add.png','maps');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Web','#\r\n# Start of web interface definition\r\n#\r\nWEB\r\n TEMPLATE "myfile/url"\r\n MINSCALE 1000\r\n MAXSCALE 40000\r\n IMAGEPATH "myimagepath"\r\n IMAGEURL "mypath"\r\nEND', 'pics/icons/world_link.png', 'maps');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Outputformat','OUTPUTFORMAT\r\n NAME\r\n DRIVER " "\r\n MIMETYPE "myimagetype"\r\n IMAGEMODE RGB\r\n EXTENSION "png"\r\nEND','pics/icons/newspaper_go.png','maps');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Mapfile','#\r\n# Start of mapfile\r\n#\r\nNAME MYMAPFLE\r\n STATUS ON\r\nSIZE \r\nEXTENT\r\nUNITS \r\nSHAPEPATH " "\r\nIMAGETYPE " "\r\nFONTSET " "\r\nIMAGECOLOR -1 -1 -1\r\n\r\n#remove this text and add objects here\r\n\r\nEND # end of mapfile','pics/icons/world_add.png','maps');
 
 # newsletters
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','newsletters');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','newsletters');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','newsletters');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/link.png','newsletters');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/world_link.png','newsletters');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading1','!text','pics/icons/text_heading_1.png','newsletters');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading2','!!text','pics/icons/text_heading_2.png','newsletters');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','newsletters');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr', '---', 'images/ed_hr.gif', 'newsletters');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr', '---', 'pics/icons/page.png', 'newsletters');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','newsletters');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','newsletters');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','newsletters');
@@ -4500,17 +4500,17 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/link.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','images/ed_copy.gif','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/world_link.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','pics/icons/page_link.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading1','!text','pics/icons/text_heading_1.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading2','!!text','pics/icons/text_heading_2.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','images/fullscreen_maximize.gif','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('rss feed','{rss id= }','pics/icons/feed.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/book_open.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('tagline','{cookie}','images/footprint.gif','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','images/ed_hr.gif','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/database_refresh.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('tagline','{cookie}','pics/icons/database_go.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','pics/icons/page.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','trackers');
@@ -4521,17 +4521,17 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/link.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','images/ed_copy.gif','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/world_link.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','pics/icons/page_link.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading1','!text','pics/icons/text_heading_1.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading2','!!text','pics/icons/text_heading_2.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','images/fullscreen_maximize.gif','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('rss feed','{rss id= }','pics/icons/feed.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/book_open.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('tagline','{cookie}','images/footprint.gif','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','images/ed_hr.gif','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/database_refresh.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('tagline','{cookie}','pics/icons/database_go.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','pics/icons/page.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','blogs');
@@ -4542,17 +4542,17 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/link.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','images/ed_copy.gif','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/world_link.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','pics/icons/page_link.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading1','!text','pics/icons/text_heading_1.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading2','!!text','pics/icons/text_heading_2.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','images/fullscreen_maximize.gif','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('rss feed','{rss id= }','pics/icons/feed.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/book_open.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('tagline','{cookie}','images/footprint.gif','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','images/ed_hr.gif','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/database_refresh.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('tagline','{cookie}','pics/icons/database_go.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','pics/icons/page.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','calendar');
@@ -4563,17 +4563,17 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/link.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','images/ed_copy.gif','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/world_link.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','pics/icons/page_link.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading1','!text','pics/icons/text_heading_1.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading2','!!text','pics/icons/text_heading_2.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','images/fullscreen_maximize.gif','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('rss feed','{rss id= }','pics/icons/feed.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/book_open.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('tagline','{cookie}','images/footprint.gif','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','images/ed_hr.gif','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/database_refresh.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('tagline','{cookie}','pics/icons/database_go.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','pics/icons/page.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','articles');
@@ -4584,17 +4584,17 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/link.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','images/ed_copy.gif','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/world_link.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','pics/icons/page_link.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading1','!text','pics/icons/text_heading_1.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading2','!!text','pics/icons/text_heading_2.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','images/fullscreen_maximize.gif','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('rss feed','{rss id= }','pics/icons/feed.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/book_open.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('tagline','{cookie}','images/footprint.gif','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','images/ed_hr.gif','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/database_refresh.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('tagline','{cookie}','pics/icons/database_go.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','pics/icons/page.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','faqs');
@@ -4605,17 +4605,17 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/link.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','images/ed_copy.gif','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/world_link.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','pics/icons/page_link.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading1','!text','pics/icons/text_heading_1.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading2','!!text','pics/icons/text_heading_2.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','images/fullscreen_maximize.gif','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','pics/icons/text_padding_top.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('rss feed','{rss id= }','pics/icons/feed.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/book_open.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('tagline','{cookie}','images/footprint.gif','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','images/ed_hr.gif','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/database_refresh.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('tagline','{cookie}','pics/icons/database_go.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','pics/icons/page.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','forums');

------------------------------------------------------------------------
r8873 | sylvieg | 2007-07-16 15:24:30 -0400 (seg, 16 jul 2007) | 2 lines

[FIX]better implementation for a module can be used twice via index - will fix duplication when moving for right to left


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8872)
+++ tiki.sql	(revision 8873)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-07-15 12:43:38 $
-# $Author: nyloth $
+# $Date: 2007-07-16 19:24:28 $
+# $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -2346,6 +2346,7 @@
 
 DROP TABLE IF EXISTS tiki_modules;
 CREATE TABLE tiki_modules (
+  moduleId int(8) NOT NULL auto_increment,
   name varchar(200) NOT NULL default '',
   position char(1) default NULL,
   ord int(4) default NULL,
@@ -2356,7 +2357,8 @@
   params varchar(255) default NULL,
   groups text,
   PRIMARY KEY  (name, position, ord),
-  KEY positionType (position, type)
+  KEY positionType (position, type),
+  KEY moduleId (moduleId)
 ) TYPE=MyISAM;
 # --------------------------------------------------------
 INSERT INTO tiki_modules (name,position,ord,cache_time,groups) VALUES ('login_box','r',1,0,'a:2:{i:0;s:10:"Registered";i:1;s:9:"Anonymous";}');

------------------------------------------------------------------------
r8853 | nyloth | 2007-07-15 08:43:39 -0400 (dom, 15 jul 2007) | 8 lines

[MOD] application menu (menu 42):

- new "Display 'MyTiki' in the application menu" feature, that allows to completely hide (or not) the 'MyTiki' menu,

- add 'Search' in the application menu,

- add a unique key "uniq_menu" to table "tiki_menu_options", to avoid useless duplicated menu items


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8852)
+++ tiki.sql	(revision 8853)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-07-12 20:10:00 $
-# $Author: sylvieg $
+# $Date: 2007-07-15 12:43:38 $
+# $Author: nyloth $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -2055,10 +2055,12 @@
   perm varchar(255) default NULL,
   groupname varchar(255) default NULL,
   userlevel int(4) default 0,
-  PRIMARY KEY  (optionId)
+  PRIMARY KEY  (optionId),
+  UNIQUE KEY uniq_menu (menuId,name,url,position,section,perm)
 ) TYPE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Home','./',10,'','','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Search','tiki-searchindex.php',13,'feature_search','','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Chat','tiki-chat.php',15,'feature_chat','tiki_p_chat','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Contact us','tiki-contact.php',20,'feature_contact','','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Stats','tiki-stats.php',23,'feature_stats','tiki_p_view_stats','');
@@ -2071,21 +2073,21 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Mobile','tiki-mobile.php',37,'feature_mobile','','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','(debug)','javascript:toggle("debugconsole")',40,'feature_debug_console','tiki_p_admin','');
 
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','MyTiki','tiki-my_tiki.php',50,'','','Registered');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','MyTiki home','tiki-my_tiki.php',51,'','','Registered');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Preferences','tiki-user_preferences.php',55,'feature_userPreferences','','Registered');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Messages','messu-mailbox.php',60,'feature_messages','tiki_p_messages','Registered');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Tasks','tiki-user_tasks.php',65,'feature_tasks','tiki_p_tasks','Registered');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Bookmarks','tiki-user_bookmarks.php',70,'feature_user_bookmarks','tiki_p_create_bookmarks','Registered');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Modules','tiki-user_assigned_modules.php',75,'user_assigned_modules','tiki_p_configure_modules','Registered');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Newsreader','tiki-newsreader_servers.php',80,'feature_newsreader','tiki_p_newsreader','Registered');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Webmail','tiki-webmail.php',85,'feature_webmail','tiki_p_use_webmail','Registered');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Contacts','tiki-contacts.php',87,'feature_contacts','','Registered');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Notepad','tiki-notepad_list.php',90,'feature_notepad','tiki_p_notepad','Registered');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','My files','tiki-userfiles.php',95,'feature_userfiles','tiki_p_userfiles','Registered');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','User menu','tiki-usermenu.php',100,'feature_usermenu','','Registered');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Mini calendar','tiki-minical.php',105,'feature_minical','','Registered');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','My watches','tiki-user_watches.php',110,'feature_user_watches','','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','MyTiki','tiki-my_tiki.php',50,'feature_mytiki','','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','MyTiki home','tiki-my_tiki.php',51,'feature_mytiki','','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Preferences','tiki-user_preferences.php',55,'feature_mytiki,feature_userPreferences','','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Messages','messu-mailbox.php',60,'feature_mytiki,feature_messages','tiki_p_messages','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Tasks','tiki-user_tasks.php',65,'feature_mytiki,feature_tasks','tiki_p_tasks','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Bookmarks','tiki-user_bookmarks.php',70,'feature_mytiki,feature_user_bookmarks','tiki_p_create_bookmarks','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Modules','tiki-user_assigned_modules.php',75,'feature_mytiki,user_assigned_modules','tiki_p_configure_modules','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Newsreader','tiki-newsreader_servers.php',80,'feature_mytiki,feature_newsreader','tiki_p_newsreader','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Webmail','tiki-webmail.php',85,'feature_mytiki,feature_webmail','tiki_p_use_webmail','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Contacts','tiki-contacts.php',87,'feature_mytiki,feature_contacts','','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Notepad','tiki-notepad_list.php',90,'feature_mytiki,feature_notepad','tiki_p_notepad','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','My files','tiki-userfiles.php',95,'feature_mytiki,feature_userfiles','tiki_p_userfiles','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','User menu','tiki-usermenu.php',100,'feature_mytiki,feature_usermenu','','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Mini calendar','tiki-minical.php',105,'feature_mytiki,feature_minical','','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','My watches','tiki-user_watches.php',110,'feature_mytiki,feature_user_watches','','Registered');
 
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Workflow','tiki-g-user_processes.php',150,'feature_workflow','tiki_p_use_workflow','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','User processes','tiki-g-user_processes.php',152,'feature_workflow','tiki_p_use_workflow','');

------------------------------------------------------------------------
r8822 | sylvieg | 2007-07-12 16:10:00 -0400 (qui, 12 jul 2007) | 2 lines

index


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8821)
+++ tiki.sql	(revision 8822)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-07-12 17:50:29 $
-# $Author: nyloth $
+# $Date: 2007-07-12 20:10:00 $
+# $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -331,7 +331,8 @@
   actionId int(8) NOT NULL,
   name varchar(40) NOT NULL,
   value text,
-  KEY  (actionId)
+  KEY (actionId),
+  KEY nameValue (name, value(200))
 ) TYPE=MyISAM;
 # --------------------------------------------------------
 

------------------------------------------------------------------------
r8820 | nyloth | 2007-07-12 13:50:30 -0400 (qui, 12 jul 2007) | 2 lines

[NEW] forums: new permission 'tiki_p_forum_edit_own_posts' that allow to give users the right of modifying their own posts.


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8819)
+++ tiki.sql	(revision 8820)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-07-11 22:14:36 $
+# $Date: 2007-07-12 17:50:29 $
 # $Author: nyloth $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4204,6 +4204,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_submission', 'Can edit submissions', 'editors', 'cms');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_templates', 'Can edit site templates', 'admin', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_exception_instance', 'Can declare an instance as exception', 'registered', 'workflow');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forum_edit_own_posts', 'Can edit own forum posts', 'registered', 'forums');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forum_attach', 'Can attach to forum posts', 'registered', 'forums');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forum_autoapp', 'Auto approve forum posts', 'editors', 'forums');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forum_post', 'Can post in forums', 'registered', 'forums');

------------------------------------------------------------------------
r8814 | nyloth | 2007-07-11 18:14:36 -0400 (qua, 11 jul 2007) | 2 lines

[NEW] forums: new forum option 'Only allow replies to the first message (flat forum)' available for each forum. If enabled, users won't be able to reply to forum posts other than the first one (they reply to the thread), and the display style will be forced to 'plain' and styles choices will be hidden from the toolbar.


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8813)
+++ tiki.sql	(revision 8814)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-07-11 16:27:49 $
-# $Author: pkdille $
+# $Date: 2007-07-11 22:14:36 $
+# $Author: nyloth $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -1473,6 +1473,7 @@
   mandatory_contribution char(1) default NULL,
   threadStyle varchar(100) default NULL,
   commentsPerPage varchar(100) default NULL,
+  is_flat char(1) default NULL,
   PRIMARY KEY  (forumId)
 ) TYPE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------

------------------------------------------------------------------------
r8811 | pkdille | 2007-07-11 12:27:49 -0400 (qua, 11 jul 2007) | 2 lines

[FIX] tiki.sql: 2 mistakes in this file


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8810)
+++ tiki.sql	(revision 8811)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-07-10 13:55:48 $
-# $Author: sylvieg $
+# $Date: 2007-07-11 16:27:49 $
+# $Author: pkdille $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -2351,7 +2351,7 @@
   rows int(4) default NULL,
   params varchar(255) default NULL,
   groups text,
-  PRIMARY KEY  (name, position, ord)
+  PRIMARY KEY  (name, position, ord),
   KEY positionType (position, type)
 ) TYPE=MyISAM;
 # --------------------------------------------------------
@@ -4116,7 +4116,7 @@
   level varchar(80) default NULL,
   type varchar(20) default NULL,
   admin varchar(1) default NULL,
-  PRIMARY KEY  (permName)
+  PRIMARY KEY  (permName),
   KEY type (type)
 ) TYPE=MyISAM;
 # --------------------------------------------------------

------------------------------------------------------------------------
r8797 | sylvieg | 2007-07-10 09:55:48 -0400 (ter, 10 jul 2007) | 2 lines

Instant-Auto-Merge from BRANCH-1-9 to HEAD


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8796)
+++ tiki.sql	(revision 8797)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-07-09 10:14:41 $
-# $Author: pkdille $
+# $Date: 2007-07-10 13:55:48 $
+# $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -232,7 +232,8 @@
   isReplied char(1) default NULL,
   isFlagged char(1) default NULL,
   priority int(2) default NULL,
-  PRIMARY KEY  (msgId)
+  PRIMARY KEY  (msgId),
+  KEY userIsRead (user, isRead)
 ) TYPE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -382,6 +383,10 @@
   KEY body (body(255)),
   KEY author (author(32)),
   KEY nbreads (nbreads),
+  KEY topicId (topicId),
+  KEY publishDate (publishDate),
+  KEY expireDate (expireDate),
+  KEY type (type),
   FULLTEXT KEY ft (title,heading,body)
 ) TYPE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
@@ -408,7 +413,9 @@
   show_lang varchar(1) default 'n',
   creator_edit varchar(1) default NULL,
   comment_can_rate_article char(1) default NULL,
-  PRIMARY KEY  (type)
+  PRIMARY KEY  (type),
+  KEY show_pre_publ (show_pre_publ),
+  KEY show_post_expire (show_post_expire)
 ) TYPE=MyISAM ;
 
 INSERT IGNORE INTO tiki_article_types(type) VALUES ('Article');
@@ -989,7 +996,8 @@
   UNIQUE KEY no_repeats (parentId, userName(40), title(100), commentDate, message_id(40), in_reply_to(40)),
   KEY title (title),
   KEY data (data(255)),
-  KEY object (object),
+  KEY objectType (object, objectType),
+  KEY commentDate (commentDate),
   KEY hits (hits),
   KEY threaded (message_id, in_reply_to, parentId),
   FULLTEXT KEY ft (title,data)
@@ -1378,7 +1386,8 @@
   dir varchar(200) default NULL,
   created int(14) default NULL,
   path varchar(250) default NULL,
-  PRIMARY KEY  (attId)
+  PRIMARY KEY  (attId),
+  KEY threadId (threadId)
 ) TYPE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
 
@@ -1556,6 +1565,8 @@
   KEY name (name),
   KEY description (description(255)),
   KEY hits (hits),
+  KEY parentgallery (parentgallery),
+  KEY visibleUser (visible, user),
   FULLTEXT KEY ft (name,description)
 ) TYPE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
@@ -1783,7 +1794,8 @@
   url varchar(250) default NULL,
   data longblob,
   refresh int(14) default NULL,
-  PRIMARY KEY  (cacheId)
+  PRIMARY KEY  (cacheId),
+  KEY url (url)
 ) TYPE=MyISAM AUTO_INCREMENT=1 ;
 CREATE INDEX urlindex ON tiki_link_cache (url(250));
 # --------------------------------------------------------
@@ -2053,6 +2065,7 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Games','tiki-list_games.php',30,'feature_games','tiki_p_play_games','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Calendar','tiki-calendar.php',35,'feature_calendar','tiki_p_view_calendar','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Tiki Calendar','tiki-action_calendar.php',36,'feature_action_calendar','tiki_p_view_tiki_calendar','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Users map','tiki-gmap_usermap.php',36,'feature_gmap','','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Mobile','tiki-mobile.php',37,'feature_mobile','','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','(debug)','javascript:toggle("debugconsole")',40,'feature_debug_console','tiki_p_admin','');
 
@@ -2339,6 +2352,7 @@
   params varchar(255) default NULL,
   groups text,
   PRIMARY KEY  (name, position, ord)
+  KEY positionType (position, type)
 ) TYPE=MyISAM;
 # --------------------------------------------------------
 INSERT INTO tiki_modules (name,position,ord,cache_time,groups) VALUES ('login_box','r',1,0,'a:2:{i:0;s:10:"Registered";i:1;s:9:"Anonymous";}');
@@ -3033,7 +3047,9 @@
   user varchar(200) default NULL,
   timestamp int(14) default NULL,
   tikihost varchar(200) default NULL,
-  PRIMARY KEY  (sessionId)
+  PRIMARY KEY  (sessionId),
+  KEY user (user),
+  KEY timestamp (timestamp)
 ) TYPE=MyISAM;
 # --------------------------------------------------------
 
@@ -4101,6 +4117,7 @@
   type varchar(20) default NULL,
   admin varchar(1) default NULL,
   PRIMARY KEY  (permName)
+  KEY type (type)
 ) TYPE=MyISAM;
 # --------------------------------------------------------
 # 

------------------------------------------------------------------------
r8789 | pkdille | 2007-07-09 06:14:41 -0400 (seg, 09 jul 2007) | 2 lines

[FIX] quicktags: Avoid creation of false "create table" quicktag in tiki.sql script


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8788)
+++ tiki.sql	(revision 8789)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-07-08 17:39:03 $
-# $Author: nyloth $
+# $Date: 2007-07-09 10:14:41 $
+# $Author: pkdille $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4427,7 +4427,6 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','wiki');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table','||r1c1|r1c2||r2c1|r2c2||','pics/icons/table.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/link.png','wiki');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','images/ed_copy.gif','wiki');
@@ -4476,7 +4475,6 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','trackers');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table','||r1c1|r1c2||r2c1|r2c2||','pics/icons/table.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/link.png','trackers');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','images/ed_copy.gif','trackers');
@@ -4498,7 +4496,6 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','blogs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table','||r1c1|r1c2||r2c1|r2c2||','pics/icons/table.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/link.png','blogs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','images/ed_copy.gif','blogs');
@@ -4520,7 +4517,6 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','calendar');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table','||r1c1|r1c2||r2c1|r2c2||','pics/icons/table.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/link.png','calendar');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','images/ed_copy.gif','calendar');
@@ -4542,7 +4538,6 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','articles');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table','||r1c1|r1c2||r2c1|r2c2||','pics/icons/table.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/link.png','articles');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','images/ed_copy.gif','articles');
@@ -4564,7 +4559,6 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','faqs');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table','||r1c1|r1c2||r2c1|r2c2||','pics/icons/table.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/link.png','faqs');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','images/ed_copy.gif','faqs');
@@ -4586,7 +4580,6 @@
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','forums');
-INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table','||r1c1|r1c2||r2c1|r2c2||','pics/icons/table.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/link.png','forums');
 INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','images/ed_copy.gif','forums');

------------------------------------------------------------------------
r8780 | nyloth | 2007-07-08 13:39:05 -0400 (dom, 08 jul 2007) | 39 lines

[NEW][MOD] forums: new configuration options + cleaning

In short, this commit allows to choose thread display preferences in the general forum config panel, which may be overriden by the same preferences in each forum config, which may be overriden by users with the display preferences toolbar in thread view.

More precisely :

  * Add new "Threads default preferences" in the general forum configuration panel (tiki-admin.php?page=forums):

	- "Allow to manage thread defaults in each forum configuration": allows to override preferences of "Threads default preferences" for each forums, in tiki-admin_forums.php (see below),

	- "Display thread configuration bar to override defaults": allows to decide weither to display or not the display preferences in the 'view forum thread' page,

	- "Configuration bar settings are the kept for all forums during the user session": allows to store in session variables the last thread preferences decided by users (needs "Display thread configuration bar to override defaults" to be enabled)

	- "Default number of comments per page", that defaults to '20'

	- "Default thread style", that defaults to 'Plain' (this closes dev.tw.o feature request #1106, since the default view was hardcoded before),

	- "Default thread sort mode", that defaults to 'Newest first',


  * Reorganize and add options in each forum configuration page (tiki-admin_forums.php):

	- group preferences related to topics in a "Set topics preferences" zone that can be hiden to reduce page length,

	- group preferences related to threads in a "Set thread preferences" zone that can also be hiden and that includes now all the thread displaying preferences proposed in the general forum configuration panel (i.e. thread sort mode, thread style, comments per page). Remember that this zone is not visible at all if the general option "Allow to manage thread defaults in each forum configuration" is disabled.


  * Add new sorting options to the "thread configuration bar" in the thread view page (tiki-view_forum_thread.php), "Title (desc)" and "Title (asc)", in order to have the same choices everywhere. This bar can now be removed (see above),


  * Code cleaning and fixes :

	- homogeinize of variables names used in thread preferences process (be WARNED that this has an impact on bookmarked URL with thread display preferences): 'comments_default_ordering', 'comments_sort_mode' => 'thread_sort_mode' ; 'comments_maxComments' => 'comments_per_page' ; 'comments_style' => 'thread_style',

	- factorize the code that handles thread preferences variables. Use an array of variable names (handled_requests) that could be extended to manage more easily new preferences in comments.php,

	- fix the default value of thread "comments_per_page" that was based on value used for topics


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8779)
+++ tiki.sql	(revision 8780)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-07-06 08:20:30 $
-# $Author: jyhem $
+# $Date: 2007-07-08 17:39:03 $
+# $Author: nyloth $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -1462,6 +1462,8 @@
   vote_threads char(1) default NULL,
   forum_last_n int(2) default 0,
   mandatory_contribution char(1) default NULL,
+  threadStyle varchar(100) default NULL,
+  commentsPerPage varchar(100) default NULL,
   PRIMARY KEY  (forumId)
 ) TYPE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------

------------------------------------------------------------------------
r8769 | jyhem | 2007-07-06 04:20:30 -0400 (sex, 06 jul 2007) | 2 lines

[FIX] merge conflict resolution


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8768)
+++ tiki.sql	(revision 8769)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-07-05 16:10:04 $
+# $Date: 2007-07-06 08:20:30 $
 # $Author: jyhem $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4333,14 +4333,9 @@
   currentLogin int(14) default NULL,
   registrationDate int(14) default NULL,
   challenge varchar(32) default NULL,
-<<<<<<< tiki.sql
-  pass_due int(14) default NULL,
-  hash varchar(34) default NULL,
-=======
   pass_confirm int(14) default NULL,
   email_confirm int(14) default NULL,
   hash varchar(32) default NULL,
->>>>>>> 1.395
   created int(14) default NULL,
   avatarName varchar(80) default NULL,
   avatarSize int(14) default NULL,

------------------------------------------------------------------------
r8762 | jyhem | 2007-07-05 12:10:04 -0400 (qui, 05 jul 2007) | 2 lines

[MOD] This menu item was misleading: the link just creates a new article


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8761)
+++ tiki.sql	(revision 8762)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-07-03 21:58:53 $
-# $Author: sylvieg $
+# $Date: 2007-07-05 16:10:04 $
+# $Author: jyhem $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -2112,7 +2112,7 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','View submissions','tiki-list_submissions.php',375,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_submit_article','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','View submissions','tiki-list_submissions.php',375,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_approve_submission','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','View submissions','tiki-list_submissions.php',375,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_remove_submission','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Edit article','tiki-edit_article.php',380,'feature_articles','tiki_p_read_article,tiki_p_edit_article','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','New article','tiki-edit_article.php',380,'feature_articles','tiki_p_read_article,tiki_p_edit_article','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Send articles','tiki-send_objects.php',385,'feature_articles,feature_comm','tiki_p_read_article,tiki_p_send_articles','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Received articles','tiki-received_articles.php',385,'feature_articles,feature_comm','tiki_p_read_article,tiki_p_admin_received_articles','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin topics','tiki-admin_topics.php',390,'feature_articles','tiki_p_read_article,tiki_p_admin_cms','');
@@ -4333,9 +4333,14 @@
   currentLogin int(14) default NULL,
   registrationDate int(14) default NULL,
   challenge varchar(32) default NULL,
+<<<<<<< tiki.sql
+  pass_due int(14) default NULL,
+  hash varchar(34) default NULL,
+=======
   pass_confirm int(14) default NULL,
   email_confirm int(14) default NULL,
   hash varchar(32) default NULL,
+>>>>>>> 1.395
   created int(14) default NULL,
   avatarName varchar(80) default NULL,
   avatarSize int(14) default NULL,

------------------------------------------------------------------------
r8758 | sylvieg | 2007-07-03 17:58:53 -0400 (ter, 03 jul 2007) | 2 lines

Instant-Auto-Merge from BRANCH-1-9 to HEAD


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8757)
+++ tiki.sql	(revision 8758)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-07-01 16:56:02 $
-# $Author: mose $
+# $Date: 2007-07-03 21:58:53 $
+# $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -2483,7 +2483,7 @@
   flag char(1) default NULL,
   points int(8) default NULL,
   votes int(8) default NULL,
-  cache mediumtext,
+  cache longtext,
   wiki_cache int(10) default NULL,
   cache_timestamp int(14) default NULL,
   pageRank decimal(4,3) default NULL,

------------------------------------------------------------------------
r8740 | mose | 2007-07-01 12:56:02 -0400 (dom, 01 jul 2007) | 2 lines

[MOD] newsletters: new field, author


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8739)
+++ tiki.sql	(revision 8740)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-06-16 16:01:48 $
-# $Author: sylvieg $
+# $Date: 2007-07-01 16:56:02 $
+# $Author: mose $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -2402,6 +2402,7 @@
   unsubMsg char(1) default 'y',
   validateAddr char(1) default 'y',
   frequency int(14) default NULL,
+	author varchar(200) default NULL,
   PRIMARY KEY  (nlId)
 ) TYPE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------

------------------------------------------------------------------------
r8638 | sylvieg | 2007-06-16 12:02:10 -0400 (sÃ¡b, 16 jun 2007) | 2 lines

Instant-Auto-Merge from BRANCH-1-9 to HEAD


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8637)
+++ tiki.sql	(revision 8638)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-06-14 22:21:56 $
-# $Author: mose $
+# $Date: 2007-06-16 16:01:48 $
+# $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1

------------------------------------------------------------------------
r8624 | mose | 2007-06-14 18:21:56 -0400 (qui, 14 jun 2007) | 2 lines

[FIX] sql: removed duplicate declaration on tiki_p_list_tracker


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8623)
+++ tiki.sql	(revision 8624)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-06-07 11:58:49 $
+# $Date: 2007-06-14 22:21:56 $
 # $Author: mose $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4293,7 +4293,6 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_blog', 'Can assign perms to blog', 'admin', 'blogs');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tell_a_friend', 'Can send a link to a friend', 'Basic', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_file_galleries', 'Can list file galleries', 'basic', 'file galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_trackers', 'Can list trackers', 'basic', 'trackers');
 # --------------------------------------------------------
 
 #

------------------------------------------------------------------------
r8558 | mose | 2007-06-07 07:58:49 -0400 (qui, 07 jun 2007) | 2 lines

[NEW] user_menu: new param, preparting user level


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8557)
+++ tiki.sql	(revision 8558)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-06-05 13:23:47 $
-# $Author: nkoth $
+# $Date: 2007-06-07 11:58:49 $
+# $Author: mose $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -2038,6 +2038,7 @@
   section varchar(255) default NULL,
   perm varchar(255) default NULL,
   groupname varchar(255) default NULL,
+  userlevel int(4) default 0,
   PRIMARY KEY  (optionId)
 ) TYPE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------

------------------------------------------------------------------------
r8531 | nkoth | 2007-06-05 09:23:47 -0400 (ter, 05 jun 2007) | 2 lines

[MOD] in 1.10 tiki-admin_structures.php can be used for users without tiki_p_edit_structures to show and browse the list of structures. Access to the structure creating and edit functions are still restricted to tiki_p_edit_structures


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8530)
+++ tiki.sql	(revision 8531)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-06-04 22:46:54 $
-# $Author: sylvieg $
+# $Date: 2007-06-05 13:23:47 $
+# $Author: nkoth $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -2093,7 +2093,7 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Print','tiki-print_pages.php',235,'feature_wiki,feature_wiki_multiprint','tiki_p_view','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Send pages','tiki-send_objects.php',240,'feature_wiki,feature_comm','tiki_p_view,tiki_p_send_pages','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Received pages','tiki-received_pages.php',245,'feature_wiki,feature_comm','tiki_p_view,tiki_p_admin_received_pages','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Structures','tiki-admin_structures.php',250,'feature_wiki','tiki_p_edit_structures','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Structures','tiki-admin_structures.php',250,'feature_wiki','tiki_p_view','');
 
 
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Image Galleries','tiki-galleries.php',300,'feature_galleries','tiki_p_view_image_gallery','');

------------------------------------------------------------------------
r8514 | sylvieg | 2007-06-04 18:46:55 -0400 (seg, 04 jun 2007) | 2 lines

[MOD]fgal: can config the subgallery listing for each gallery


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8513)
+++ tiki.sql	(revision 8514)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-06-04 17:13:32 $
-# $Author: nkoth $
+# $Date: 2007-06-04 22:46:54 $
+# $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -1308,6 +1308,7 @@
   show_modified char(1) default NULL,
   show_author char(1) default NULL,
   show_creator char(1) default NULL,
+  subgal_conf varchar(200) default NULL,
   PRIMARY KEY  (galleryId)
 ) TYPE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------

------------------------------------------------------------------------
r8497 | nkoth | 2007-06-04 13:13:32 -0400 (seg, 04 jun 2007) | 2 lines

[FIX] category type perms... oops


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8496)
+++ tiki.sql	(revision 8497)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-06-04 17:11:39 $
+# $Date: 2007-06-04 17:13:32 $
 # $Author: nkoth $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4107,7 +4107,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_banners', 'Administrator, can admin banners', 'admin', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_banning', 'Can ban users or ips', 'admin', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_calendar', 'Can create/admin calendars', 'admin', 'calendar', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_categories', 'Can admin categories', 'editors', 'tiki', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_categories', 'Can admin categories', 'editors', 'category', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_charts', 'Can admin charts', 'admin', 'charts', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_chat', 'Administrator, can create channels remove channels etc', 'editors', 'chat', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_cms', 'Can admin the cms', 'editors', 'cms', 'y');

------------------------------------------------------------------------
r8496 | nkoth | 2007-06-04 13:11:39 -0400 (seg, 04 jun 2007) | 2 lines

[FIX] category type perms...


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8495)
+++ tiki.sql	(revision 8496)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-06-04 16:56:06 $
+# $Date: 2007-06-04 17:11:39 $
 # $Author: nkoth $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4107,7 +4107,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_banners', 'Administrator, can admin banners', 'admin', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_banning', 'Can ban users or ips', 'admin', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_calendar', 'Can create/admin calendars', 'admin', 'calendar', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_categories', 'Can admin categories', 'editors', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_categories', 'Can admin categories', 'editors', 'tiki', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_charts', 'Can admin charts', 'admin', 'charts', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_chat', 'Administrator, can create channels remove channels etc', 'editors', 'chat', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_cms', 'Can admin the cms', 'editors', 'cms', 'y');
@@ -4166,6 +4166,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_download_files', 'Can download files', 'basic', 'file galleries');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit', 'Can edit pages', 'registered', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_article', 'Can edit articles', 'editors', 'cms');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_categories', 'Can edit items in categories', 'registered', 'category');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_comments', 'Can edit all comments', 'editors', 'comments');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_content_templates', 'Can edit content templates', 'editors', 'content templates');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_cookies', 'Can admin cookies', 'editors', 'tiki');
@@ -4248,7 +4249,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_validate_links', 'Can validate submited links', 'editors', 'directory');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view', 'Can view page/pages', 'basic', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_calendar', 'Can browse the calendar', 'basic', 'calendar');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_categories', 'Can browse categories', 'basic', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_categories', 'Can browse categories', 'basic', 'category');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_chart', 'Can view charts', 'basic', 'charts');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_directory', 'Can use the directory', 'basic', 'directory');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_events', 'Can view events details', 'registered', 'calendar');

------------------------------------------------------------------------
r8493 | nkoth | 2007-06-04 12:56:06 -0400 (seg, 04 jun 2007) | 2 lines

[FIX] tiki_p_admin_categories should not be the admin perm for type tiki, since tiki_p_admin is already the one.


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8492)
+++ tiki.sql	(revision 8493)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-06-04 15:55:31 $
-# $Author: sylvieg $
+# $Date: 2007-06-04 16:56:06 $
+# $Author: nkoth $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4107,7 +4107,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_banners', 'Administrator, can admin banners', 'admin', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_banning', 'Can ban users or ips', 'admin', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_calendar', 'Can create/admin calendars', 'admin', 'calendar', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_categories', 'Can admin categories', 'editors', 'tiki', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_categories', 'Can admin categories', 'editors', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_charts', 'Can admin charts', 'admin', 'charts', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_chat', 'Administrator, can create channels remove channels etc', 'editors', 'chat', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_cms', 'Can admin the cms', 'editors', 'cms', 'y');

------------------------------------------------------------------------
r8490 | sylvieg | 2007-06-04 11:55:32 -0400 (seg, 04 jun 2007) | 2 lines

[MOD]modules: can assign 2 times the same modules


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8489)
+++ tiki.sql	(revision 8490)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-06-01 18:39:32 $
+# $Date: 2007-06-04 15:55:31 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -2334,7 +2334,7 @@
   rows int(4) default NULL,
   params varchar(255) default NULL,
   groups text,
-  PRIMARY KEY  (name)
+  PRIMARY KEY  (name, position, ord)
 ) TYPE=MyISAM;
 # --------------------------------------------------------
 INSERT INTO tiki_modules (name,position,ord,cache_time,groups) VALUES ('login_box','r',1,0,'a:2:{i:0;s:10:"Registered";i:1;s:9:"Anonymous";}');

------------------------------------------------------------------------
r8452 | sylvieg | 2007-06-01 14:39:32 -0400 (sex, 01 jun 2007) | 2 lines

[NEW]perm tiki_p_list_file_galleries and tiki_p_list_trackers only for new database - pelase add manually in your database


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8451)
+++ tiki.sql	(revision 8452)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-05-30 09:30:03 $
-# $Author: pkdille $
+# $Date: 2007-06-01 18:39:32 $
+# $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -2136,8 +2136,8 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_validate_links','');
 
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','File Galleries','tiki-file_galleries.php',600,'feature_file_galleries','tiki_p_view_file_gallery','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List galleries','tiki-file_galleries.php',605,'feature_file_galleries','tiki_p_view_file_gallery','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Rankings','tiki-file_galleries_rankings.php',610,'feature_file_galleries,feature_file_galleries_rankings','tiki_p_view_file_gallery','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List galleries','tiki-file_galleries.php',605,'feature_file_galleries','tiki_p_list_file_galleries','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Rankings','tiki-file_galleries_rankings.php',610,'feature_file_galleries,feature_file_galleries_rankings','tiki_p_list_file_galleries','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Upload file','tiki-upload_file.php',615,'feature_file_galleries','tiki_p_view_file_gallery,tiki_p_upload_files','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Directory batch','tiki-batch_upload_files.php',617,'feature_file_galleries_batch','tiki_p_batch_upload_file_dir','');
 
@@ -2158,8 +2158,8 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','TikiSheet','tiki-sheets.php',780,'feature_sheet','tiki_p_view_sheet','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List TikiSheets','tiki-sheets.php',782,'feature_sheet','tiki_p_view_sheet','');
 
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Trackers','tiki-list_trackers.php',800,'feature_trackers','tiki_p_view_trackers','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List trackers','tiki-list_trackers.php',805,'feature_trackers','tiki_p_view_trackers','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Trackers','tiki-list_trackers.php',800,'feature_trackers','tiki_p_list_trackers','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List trackers','tiki-list_trackers.php',805,'feature_trackers','tiki_p_list_trackers','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin trackers','tiki-admin_trackers.php',810,'feature_trackers','tiki_p_admin_trackers','');
 
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Surveys','tiki-list_surveys.php',850,'feature_surveys','','');
@@ -4289,6 +4289,8 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_actionlog', 'Can view action log', 'registered', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_blog', 'Can assign perms to blog', 'admin', 'blogs');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tell_a_friend', 'Can send a link to a friend', 'Basic', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_file_galleries', 'Can list file galleries', 'basic', 'file galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_trackers', 'Can list trackers', 'basic', 'trackers');
 # --------------------------------------------------------
 
 #

------------------------------------------------------------------------
r8422 | pkdille | 2007-05-30 05:30:03 -0400 (qua, 30 mai 2007) | 2 lines

[MOD] add the "Admin" menu section in the "Application menu" for users who have the tiki_p_admin_users right


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8421)
+++ tiki.sql	(revision 8422)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-05-25 16:59:03 $
-# $Author: sylvieg $
+# $Date: 2007-05-30 09:30:03 $
+# $Author: pkdille $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -2198,6 +2198,7 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','user_is_operator','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'feature_integrator','tiki_p_admin_integrator','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_contribution','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_users','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin home','tiki-admin.php',1051,'','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Live support','tiki-live_support_admin.php',1055,'feature_live_support','tiki_p_live_support_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Live support','tiki-live_support_admin.php',1055,'feature_live_support','user_is_operator','');

------------------------------------------------------------------------
r8402 | sylvieg | 2007-05-25 12:59:04 -0400 (sex, 25 mai 2007) | 2 lines

[FIX]password & email due: to change the password/email due for all users when changing the params in the admin panel


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8401)
+++ tiki.sql	(revision 8402)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-05-25 13:12:08 $
+# $Date: 2007-05-25 16:59:03 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4327,8 +4327,8 @@
   currentLogin int(14) default NULL,
   registrationDate int(14) default NULL,
   challenge varchar(32) default NULL,
-  pass_due int(14) default NULL,
-  email_due int(14) default NULL,
+  pass_confirm int(14) default NULL,
+  email_confirm int(14) default NULL,
   hash varchar(32) default NULL,
   created int(14) default NULL,
   avatarName varchar(80) default NULL,

------------------------------------------------------------------------
r8397 | sylvieg | 2007-05-25 09:15:29 -0400 (sex, 25 mai 2007) | 2 lines

[NEW]login: send an email with a link to click to the user after n unsuccessful logins


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8396)
+++ tiki.sql	(revision 8397)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-05-24 14:30:45 $
+# $Date: 2007-05-25 13:12:08 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4338,6 +4338,7 @@
   avatarLibName varchar(200) default NULL,
   avatarType char(1) default NULL,
   score int(11) NOT NULL default 0,
+  unsuccessful_logins int(14) default 0,
   PRIMARY KEY  (userId),
   KEY login (login),
   KEY score (score),

------------------------------------------------------------------------
r8383 | sylvieg | 2007-05-24 10:32:57 -0400 (qui, 24 mai 2007) | 2 lines

[NEW]login: a confirmation mail can be sent at login request each n days. The user must activate the link sent to be able to log in again


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8382)
+++ tiki.sql	(revision 8383)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-05-20 00:37:41 $
-# $Author: nyloth $
+# $Date: 2007-05-24 14:30:45 $
+# $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4328,6 +4328,7 @@
   registrationDate int(14) default NULL,
   challenge varchar(32) default NULL,
   pass_due int(14) default NULL,
+  email_due int(14) default NULL,
   hash varchar(32) default NULL,
   created int(14) default NULL,
   avatarName varchar(80) default NULL,

------------------------------------------------------------------------
r8366 | nyloth | 2007-05-19 20:37:41 -0400 (sÃ¡b, 19 mai 2007) | 2 lines

[FIX] Home URL: use './' instead of 'tiki-index.php' to go back to tiki home, in order to be able to go back to the same page that the user has after login (e.g. group specific home page, wiki disabled and home page directly in forums, ...)


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8365)
+++ tiki.sql	(revision 8366)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-05-16 14:38:22 $
-# $Author: sylvieg $
+# $Date: 2007-05-20 00:37:41 $
+# $Author: nyloth $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -2040,7 +2040,7 @@
   PRIMARY KEY  (optionId)
 ) TYPE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Home','tiki-index.php',10,'','','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Home','./',10,'','','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Chat','tiki-chat.php',15,'feature_chat','tiki_p_chat','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Contact us','tiki-contact.php',20,'feature_contact','','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Stats','tiki-stats.php',23,'feature_stats','tiki_p_view_stats','');

------------------------------------------------------------------------
r8344 | sylvieg | 2007-05-16 10:38:23 -0400 (qua, 16 mai 2007) | 2 lines

[FIX]comments: title also to 255 characters+clean index


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8343)
+++ tiki.sql	(revision 8344)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-05-15 23:29:38 $
+# $Date: 2007-05-16 14:38:22 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -976,7 +976,7 @@
   points decimal(8,2) default NULL,
   votes int(8) default NULL,
   average decimal(8,4) default NULL,
-  title varchar(100) default NULL,
+  title varchar(255) default NULL,
   data text,
   hash varchar(32) default NULL,
   user_ip varchar(15) default NULL,
@@ -986,12 +986,11 @@
   in_reply_to varchar(128) default NULL,
   comment_rating tinyint(2) default NULL,  
   PRIMARY KEY  (threadId),
-  UNIQUE KEY no_repeats (parentId, userName, title(40), commentDate, message_id(40), in_reply_to(40)),
+  UNIQUE KEY no_repeats (parentId, userName(40), title(100), commentDate, message_id(40), in_reply_to(40)),
   KEY title (title),
   KEY data (data(255)),
   KEY object (object),
   KEY hits (hits),
-  KEY tc_pi (parentId),
   KEY threaded (message_id, in_reply_to, parentId),
   FULLTEXT KEY ft (title,data)
 ) TYPE=MyISAM AUTO_INCREMENT=1 ;

------------------------------------------------------------------------
r8342 | sylvieg | 2007-05-15 19:29:41 -0400 (ter, 15 mai 2007) | 2 lines

[FIX]forum: name to 255 character


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8341)
+++ tiki.sql	(revision 8342)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-05-09 14:47:52 $
+# $Date: 2007-05-15 23:29:38 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -1409,7 +1409,7 @@
 DROP TABLE IF EXISTS tiki_forums;
 CREATE TABLE tiki_forums (
   forumId int(8) NOT NULL auto_increment,
-  name varchar(40) default NULL,
+  name varchar(255) default NULL,
   description text,
   created int(14) default NULL,
   lastPost int(14) default NULL,

------------------------------------------------------------------------
r8293 | sylvieg | 2007-05-09 10:47:52 -0400 (qua, 09 mai 2007) | 2 lines

[FIX]perms: typo in tiki.sql 'tiki_p_batch_upload_file_dir'


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8292)
+++ tiki.sql	(revision 8293)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-04-30 22:24:07 $
+# $Date: 2007-05-09 14:47:52 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4145,7 +4145,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_autoval_chart_suggestio', 'Autovalidate suggestions', 'editors', 'charts');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_subscribe_email', 'Can subscribe many e-mails at once (requires tiki_p_subscribe email)', 'editors', 'newsletters');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_files', 'Can upload zip files with files', 'editors', 'file galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_files_dir', 'Can use Directoy Batch Load', 'editors', 'file galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_file_dir', 'Can use Directoy Batch Load', 'editors', 'file galleries');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_image_dir', 'Can use Directory Batch Load', 'editors', 'image galleries');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_images', 'Can upload zip files with images', 'editors', 'image galleries');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_blog_admin', 'Can admin blogs', 'editors', 'blogs', 'y');

------------------------------------------------------------------------
r8238 | sylvieg | 2007-04-30 18:24:08 -0400 (seg, 30 abr 2007) | 2 lines

[FIX]menu: rollback a section links to the main features + the default section at the top of submenu + option link_on_section in {menu} to do whatever you want


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8237)
+++ tiki.sql	(revision 8238)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-04-04 17:23:39 $
+# $Date: 2007-04-30 22:24:07 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -2053,7 +2053,7 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Mobile','tiki-mobile.php',37,'feature_mobile','','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','(debug)','javascript:toggle("debugconsole")',40,'feature_debug_console','tiki_p_admin','');
 
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','MyTiki','',50,'','','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','MyTiki','tiki-my_tiki.php',50,'','','Registered');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','MyTiki home','tiki-my_tiki.php',51,'','','Registered');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Preferences','tiki-user_preferences.php',55,'feature_userPreferences','','Registered');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Messages','messu-mailbox.php',60,'feature_messages','tiki_p_messages','Registered');
@@ -2069,20 +2069,20 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Mini calendar','tiki-minical.php',105,'feature_minical','','Registered');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','My watches','tiki-user_watches.php',110,'feature_user_watches','','Registered');
 
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Workflow','',150,'feature_workflow','tiki_p_use_workflow','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Workflow','tiki-g-user_processes.php',150,'feature_workflow','tiki_p_use_workflow','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','User processes','tiki-g-user_processes.php',152,'feature_workflow','tiki_p_use_workflow','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','User activities','tiki-g-user_activities.php',153,'feature_workflow','tiki_p_use_workflow','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','User instances','tiki-g-user_instances.php',154,'feature_workflow','tiki_p_use_workflow','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin processes','tiki-g-admin_processes.php',155,'feature_workflow','tiki_p_admin_workflow','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Monitor processes','tiki-g-monitor_processes.php',160,'feature_workflow','tiki_p_admin_workflow','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Monitor activities','tiki-g-monitor_activities.php',165,'feature_workflow','tiki_p_admin_workflow','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Monitor instances','tiki-g-monitor_instances.php',170,'feature_workflow','tiki_p_admin_workflow','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','User processes','tiki-g-user_processes.php',175,'feature_workflow','tiki_p_use_workflow','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','User activities','tiki-g-user_activities.php',180,'feature_workflow','tiki_p_use_workflow','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','User instances','tiki-g-user_instances.php',185,'feature_workflow','tiki_p_use_workflow','');
 
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Community','','187','feature_friends','tiki_p_list_users','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','User list','tiki-list_users.php','188','feature_friends','tiki_p_list_users','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Friendship Network','tiki-friends.php','189','feature_friends','','');
 
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Wiki','',200,'feature_wiki','tiki_p_view','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Wiki','tiki-index.php',200,'feature_wiki','tiki_p_view','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Wiki Home','tiki-index.php',202,'feature_wiki','tiki_p_view','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Last Changes','tiki-lastchanges.php',205,'feature_wiki,feature_lastChanges','tiki_p_view','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Dump','dump/new.tar',210,'feature_wiki,feature_dump','tiki_p_view','');
@@ -2096,7 +2096,7 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Structures','tiki-admin_structures.php',250,'feature_wiki','tiki_p_edit_structures','');
 
 
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Image Galleries','',300,'feature_galleries','tiki_p_view_image_gallery','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Image Galleries','tiki-galleries.php',300,'feature_galleries','tiki_p_view_image_gallery','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Galleries','tiki-galleries.php',305,'feature_galleries','tiki_p_view_image_gallery','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Rankings','tiki-galleries_rankings.php',310,'feature_galleries,feature_gal_rankings','tiki_p_view_image_gallery','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Upload image','tiki-upload_image.php',315,'feature_galleries','tiki_p_upload_images','');
@@ -2103,7 +2103,7 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Directory batch','tiki-batch_upload.php',318,'feature_galleries,feature_gal_batch','tiki_p_batch_upload','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','System gallery','tiki-list_gallery.php?galleryId=0',320,'feature_galleries','tiki_p_admin_galleries','');
 
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Articles','',350,'feature_articles','tiki_p_read_article','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Articles','tiki-view_articles.php',350,'feature_articles','tiki_p_read_article','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Articles home','tiki-view_articles.php',355,'feature_articles','tiki_p_read_article','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List articles','tiki-list_articles.php',360,'feature_articles','tiki_p_read_article','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Rankings','tiki-cms_rankings.php',365,'feature_articles,feature_cms_rankings','tiki_p_read_article','');
@@ -2117,7 +2117,7 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin topics','tiki-admin_topics.php',390,'feature_articles','tiki_p_read_article,tiki_p_admin_cms','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin types','tiki-article_types.php',395,'feature_articles','tiki_p_read_article,tiki_p_admin_cms','');
 
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Blogs','',450,'feature_blogs','tiki_p_read_blog','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Blogs','tiki-list_blogs.php',450,'feature_blogs','tiki_p_read_blog','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List blogs','tiki-list_blogs.php',455,'feature_blogs','tiki_p_read_blog','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Rankings','tiki-blog_rankings.php',460,'feature_blogs,feature_blog_rankings','tiki_p_read_blog','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Create/Edit blog','tiki-edit_blog.php',465,'feature_blogs','tiki_p_read_blog,tiki_p_create_blogs','');
@@ -2124,53 +2124,53 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Post','tiki-blog_post.php',470,'feature_blogs','tiki_p_read_blog,tiki_p_blog_post','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin posts','tiki-list_posts.php',475,'feature_blogs','tiki_p_read_blog,tiki_p_blog_admin','');
 
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Forums','',500,'feature_forums','tiki_p_forum_read','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Forums','tiki-forums.php',500,'feature_forums','tiki_p_forum_read','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List forums','tiki-forums.php',505,'feature_forums','tiki_p_forum_read','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Rankings','tiki-forum_rankings.php',510,'feature_forums,feature_forum_rankings','tiki_p_forum_read','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin forums','tiki-admin_forums.php',515,'feature_forums','tiki_p_forum_read,tiki_p_admin_forum','');
 
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Directory','',550,'feature_directory','tiki_p_view_directory','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Directory','tiki-directory_browse.php',550,'feature_directory','tiki_p_view_directory','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Browse directory','tiki-directory_browse.php',552,'feature_directory','tiki_p_view_directory','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Submit a new link','tiki-directory_add_site.php',555,'feature_directory','tiki_p_submit_link','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Browse directory','tiki-directory_browse.php',560,'feature_directory','tiki_p_view_directory','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_admin_directory_cats','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_admin_directory_sites','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_validate_links','');
 
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','File Galleries','',600,'feature_file_galleries','tiki_p_view_file_gallery','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','File Galleries','tiki-file_galleries.php',600,'feature_file_galleries','tiki_p_view_file_gallery','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List galleries','tiki-file_galleries.php',605,'feature_file_galleries','tiki_p_view_file_gallery','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Rankings','tiki-file_galleries_rankings.php',610,'feature_file_galleries,feature_file_galleries_rankings','tiki_p_view_file_gallery','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Upload file','tiki-upload_file.php',615,'feature_file_galleries','tiki_p_view_file_gallery,tiki_p_upload_files','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Directory batch','tiki-batch_upload_files.php',617,'feature_file_galleries_batch','tiki_p_batch_upload_file_dir','');
 
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','FAQs','',650,'feature_faqs','tiki_p_view_faqs','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','FAQs','tiki-list_faqs.php',650,'feature_faqs','tiki_p_view_faqs','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List FAQs','tiki-list_faqs.php',665,'feature_faqs','tiki_p_view_faqs','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin FAQs','tiki-list_faqs.php',660,'feature_faqs','tiki_p_admin_faqs','');
 
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Maps','',700,'feature_maps','tiki_p_map_view','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Maps','tiki-map.phtml',700,'feature_maps','tiki_p_map_view','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','View Maps','tiki-map.phtml',703,'feature_maps','tiki_p_map_view','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Mapfiles','tiki-map_edit.php',705,'feature_maps','tiki_p_map_view','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Layer management','tiki-map_upload.php',710,'feature_maps','tiki_p_map_edit','');
 
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Quizzes','',750,'feature_quizzes','','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Quizzes','tiki-list_quizzes.php',750,'feature_quizzes','','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List quizzes','tiki-list_quizzes.php',755,'feature_quizzes','','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Quiz stats','tiki-quiz_stats.php',760,'feature_quizzes','tiki_p_view_quiz_stats','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin quiz','tiki-edit_quiz.php',765,'feature_quizzes','tiki_p_admin_quizzes','');
 
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','TikiSheet','',780,'feature_sheet','tiki_p_view_sheet','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','TikiSheet','tiki-sheets.php',780,'feature_sheet','tiki_p_view_sheet','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List TikiSheets','tiki-sheets.php',782,'feature_sheet','tiki_p_view_sheet','');
 
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Trackers','',800,'feature_trackers','tiki_p_view_trackers','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Trackers','tiki-list_trackers.php',800,'feature_trackers','tiki_p_view_trackers','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List trackers','tiki-list_trackers.php',805,'feature_trackers','tiki_p_view_trackers','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin trackers','tiki-admin_trackers.php',810,'feature_trackers','tiki_p_admin_trackers','');
 
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Surveys','',850,'feature_surveys','','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Surveys','tiki-list_surveys.php',850,'feature_surveys','','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List surveys','tiki-list_surveys.php',855,'feature_surveys','','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Stats','tiki-survey_stats.php',860,'feature_surveys','tiki_p_view_survey_stats','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin surveys','tiki-admin_surveys.php',865,'feature_surveys','tiki_p_admin_surveys','');
 
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Newsletters','',900,'feature_newsletters','tiki_p_subscribe_newsletters','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Newsletters','',900,'feature_newsletters','tiki_p_send_newsletters','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Newsletters','',900,'feature_newsletters','tiki_p_admin_newsletters','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_subscribe_newsletters','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_send_newsletters','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Newsletters','tiki-newsletters.php',900,'feature_newsletters','tiki_p_admin_newsletters','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Newsletters','tiki-newsletters.php',903,'feature_newsletters','tiki_p_subscribe_newsletters','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Newsletters','tiki-newsletters.php',903,'feature_newsletters','tiki_p_send_newsletters','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Newsletters','tiki-newsletters.php',903,'feature_newsletters','tiki_p_admin_newsletters','');
@@ -2178,27 +2178,27 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin newsletters','tiki-admin_newsletters.php',910,'feature_newsletters','tiki_p_admin_newsletters','');
 
 
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Charts','',1000,'feature_charts','','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'','Charts','tiki-charts.php',1003,'feature_charts','','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Charts','tiki-charts.php',1000,'feature_charts','','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Charts','tiki-charts.php',1003,'feature_charts','','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin charts','tiki-admin_charts.php',1005,'feature_charts','tiki_p_admin_charts','');
 
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_admin_chat','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_admin_categories','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_admin_banners','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_edit_templates','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_edit_cookies','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_admin_dynamic','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_admin_mailin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_edit_content_templates','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_edit_html_pages','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_view_referer_stats','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_admin_drawings','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_admin_shoutbox','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_live_support_admin','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','user_is_operator','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'feature_integrator','tiki_p_admin_integrator','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_admin_contribution','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_chat','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_categories','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_banners','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_templates','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_cookies','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_dynamic','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_mailin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_content_templates','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_edit_html_pages','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_view_referer_stats','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_drawings','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_shoutbox','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_live_support_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','user_is_operator','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'feature_integrator','tiki_p_admin_integrator','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','tiki-admin.php',1050,'','tiki_p_admin_contribution','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin home','tiki-admin.php',1051,'','tiki_p_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Live support','tiki-live_support_admin.php',1055,'feature_live_support','tiki_p_live_support_admin','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Live support','tiki-live_support_admin.php',1055,'feature_live_support','user_is_operator','');

------------------------------------------------------------------------
r8164 | sylvieg | 2007-04-04 13:23:39 -0400 (qua, 04 abr 2007) | 2 lines

[MOD]actionlog: a user can set the action he wants to see + actionlog tpl with tabs


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8163)
+++ tiki.sql	(revision 8164)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-03-23 14:15:18 $
+# $Date: 2007-04-04 17:23:39 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4754,10 +4754,12 @@
 
 DROP TABLE IF EXISTS tiki_actionlog_conf;
 CREATE TABLE tiki_actionlog_conf (
+ id int(11) NOT NULL auto_increment,
  action varchar(32) NOT NULL default '',
  objectType varchar(32) NOT NULL default '',
  `status` char(1) default '',
-PRIMARY KEY (action, objectType)
+PRIMARY KEY (action, objectType),
+KEY (id)
 ) TYPE=MyISAM;
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Created', 'wiki page', 'y');
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Updated', 'wiki page', 'y');

------------------------------------------------------------------------
r8105 | sylvieg | 2007-03-23 10:15:18 -0400 (sex, 23 mar 2007) | 2 lines

[FIX]perms: tiki_p_admin_users is not an admin perm + topics perm type->cms perm type + get rid of the propagation perms


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8104)
+++ tiki.sql	(revision 8105)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-03-22 20:31:18 $
+# $Date: 2007-03-23 14:15:18 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4135,7 +4135,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_shoutbox', 'Can admin shoutbox (Edit/remove msgs)', 'editors', 'shoutbox', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_surveys', 'Can admin surveys', 'editors', 'surveys', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_trackers', 'Can admin trackers', 'editors', 'trackers', 'y');
-INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_users', 'Can admin users', 'admin', 'user', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_users', 'Can admin users', 'admin', 'user');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_wiki', 'Can admin the wiki', 'editors', 'wiki', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_workflow', 'Can admin workflow processes', 'admin', 'workflow', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_approve_submission', 'Can approve submissions', 'editors', 'cms');
@@ -4233,7 +4233,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tasks_admin', 'Can admin public tasks', 'admin', 'user');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tasks_receive', 'Can  receive tasks from other users', 'registered', 'user');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tasks_send', 'Can send tasks to other users', 'registered', 'user');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_topic_read', 'Can read a topic (Applies only to individual topic perms)', 'basic', 'topics');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_topic_read', 'Can read a topic (Applies only to individual topic perms)', 'basic', 'cms');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tracker_view_ratings', 'Can view rating result for tracker items', 'basic', 'trackers');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tracker_vote_ratings', 'Can vote a rating for tracker items', 'registered', 'trackers');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_upload_files', 'Can upload files', 'registered', 'file galleries');

------------------------------------------------------------------------
r8100 | sylvieg | 2007-03-22 16:31:19 -0400 (qui, 22 mar 2007) | 2 lines

[MOD]perms: new column in users_permissions to say that the perm is the admin perm of the perm type -> if you have it, you have all the perms of the same perm type


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 8099)
+++ tiki.sql	(revision 8100)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-03-09 19:01:21 $
+# $Date: 2007-03-22 20:31:18 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4094,6 +4094,7 @@
   permDesc varchar(250) default NULL,
   level varchar(80) default NULL,
   type varchar(20) default NULL,
+  admin varchar(1) default NULL,
   PRIMARY KEY  (permName)
 ) TYPE=MyISAM;
 # --------------------------------------------------------
@@ -4102,41 +4103,41 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_abort_instance', 'Can abort a process instance', 'editors', 'workflow');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_access_closed_site', 'Can access site when closed', 'admin', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_add_events', 'Can add events in the calendar', 'registered', 'calendar');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin', 'Administrator, can manage users groups and permissions, Hotwords and all the weblog features', 'admin', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin', 'Administrator, can manage users groups and permissions, Hotwords and all the weblog features', 'admin', 'tiki', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_banners', 'Administrator, can admin banners', 'admin', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_banning', 'Can ban users or ips', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_calendar', 'Can create/admin calendars', 'admin', 'calendar');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_categories', 'Can admin categories', 'editors', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_charts', 'Can admin charts', 'admin', 'charts');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_chat', 'Administrator, can create channels remove channels etc', 'editors', 'chat');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_cms', 'Can admin the cms', 'editors', 'cms');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_contribution', 'Can admin contributions', 'admin', 'contribution');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_directory', 'Can admin the directory', 'editors', 'directory');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_calendar', 'Can create/admin calendars', 'admin', 'calendar', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_categories', 'Can admin categories', 'editors', 'tiki', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_charts', 'Can admin charts', 'admin', 'charts', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_chat', 'Administrator, can create channels remove channels etc', 'editors', 'chat', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_cms', 'Can admin the cms', 'editors', 'cms', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_contribution', 'Can admin contributions', 'admin', 'contribution', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_directory', 'Can admin the directory', 'editors', 'directory', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_directory_cats', 'Can admin directory categories', 'editors', 'directory');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_directory_sites', 'Can admin directory sites', 'editors', 'directory');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_drawings', 'Can admin drawings', 'editors', 'drawings');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_drawings', 'Can admin drawings', 'editors', 'drawings', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_dynamic', 'Can admin the dynamic content system', 'editors', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_faqs', 'Can admin faqs', 'editors', 'faqs');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_file_galleries', 'Can admin file galleries', 'editors', 'file galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_forum', 'Can admin forums', 'editors', 'forums');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_galleries', 'Can admin Image Galleries', 'editors', 'image galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_games', 'Can admin games', 'editors', 'games');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_faqs', 'Can admin faqs', 'editors', 'faqs', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_file_galleries', 'Can admin file galleries', 'editors', 'file galleries', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_forum', 'Can admin forums', 'editors', 'forums', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_galleries', 'Can admin Image Galleries', 'editors', 'image galleries', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_games', 'Can admin games', 'editors', 'games', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_integrator', 'Can admin integrator repositories and rules', 'admin', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_mailin', 'Can admin mail-in accounts', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_newsletters', 'Can admin newsletters', 'admin', 'newsletters');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_newsletters', 'Can admin newsletters', 'admin', 'newsletters', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_objects','Can edit object permissions', 'admin', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_polls','Can admin polls', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_quizzes', 'Can admin quizzes', 'editors', 'quizzes');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_quizzes', 'Can admin quizzes', 'editors', 'quizzes', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_received_articles', 'Can admin received articles', 'editors', 'comm');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_received_pages', 'Can admin received pages', 'editors', 'comm');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_rssmodules','Can admin rss modules', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_sheet', 'Can admin sheet', 'admin', 'sheet');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_shoutbox', 'Can admin shoutbox (Edit/remove msgs)', 'editors', 'shoutbox');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_surveys', 'Can admin surveys', 'editors', 'surveys');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_trackers', 'Can admin trackers', 'editors', 'trackers');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_users', 'Can admin users', 'admin', 'user');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_wiki', 'Can admin the wiki', 'editors', 'wiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_workflow', 'Can admin workflow processes', 'admin', 'workflow');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_sheet', 'Can admin sheet', 'admin', 'sheet', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_shoutbox', 'Can admin shoutbox (Edit/remove msgs)', 'editors', 'shoutbox', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_surveys', 'Can admin surveys', 'editors', 'surveys', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_trackers', 'Can admin trackers', 'editors', 'trackers', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_users', 'Can admin users', 'admin', 'user', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_wiki', 'Can admin the wiki', 'editors', 'wiki', 'y');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_admin_workflow', 'Can admin workflow processes', 'admin', 'workflow', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_approve_submission', 'Can approve submissions', 'editors', 'cms');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_attach_trackers', 'Can attach files to tracker items', 'registered', 'trackers');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_autoapprove_submission', 'Submited articles automatically approved', 'editors', 'cms');
@@ -4147,7 +4148,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_files_dir', 'Can use Directoy Batch Load', 'editors', 'file galleries');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_image_dir', 'Can use Directory Batch Load', 'editors', 'image galleries');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_images', 'Can upload zip files with images', 'editors', 'image galleries');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_blog_admin', 'Can admin blogs', 'editors', 'blogs');
+INSERT INTO users_permissions (permName, permDesc, level, type, admin) VALUES ('tiki_p_blog_admin', 'Can admin blogs', 'editors', 'blogs', 'y');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_blog_post', 'Can post to a blog', 'registered', 'blogs');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_broadcast', 'Can broadcast messages to groups', 'admin', 'messu');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_broadcast_all', 'Can broadcast messages to all user', 'admin', 'messu');

------------------------------------------------------------------------
r7995 | sylvieg | 2007-03-09 15:01:22 -0400 (sex, 09 mar 2007) | 2 lines

[NEW]tellAFriend: new feature to send a link to emails


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 7994)
+++ tiki.sql	(revision 7995)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-03-06 19:29:55 $
+# $Date: 2007-03-09 19:01:21 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4287,6 +4287,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_file_gallery', 'Can assign perms to file gallery', 'admin', 'file galleries');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_actionlog', 'Can view action log', 'registered', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_blog', 'Can assign perms to blog', 'admin', 'blogs');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tell_a_friend', 'Can send a link to a friend', 'Basic', 'tiki');
 # --------------------------------------------------------
 
 #

------------------------------------------------------------------------
r7953 | sylvieg | 2007-03-06 15:30:46 -0400 (ter, 06 mar 2007) | 2 lines

Instant-Auto-Merge from BRANCH-1-9 to HEAD


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 7952)
+++ tiki.sql	(revision 7953)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-03-02 19:49:02 $
-# $Author: luciash $
+# $Date: 2007-03-06 19:29:55 $
+# $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4265,8 +4265,9 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_stats', 'Can view site stats', 'basic', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_survey_stats', 'Can view survey stats', 'basic', 'surveys');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_templates', 'Can view site templates', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_tiki_calendar', 'Can view Tikiwiki tools calendar', 'basic', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_tiki_calendar', 'Can view Tikiwiki tools calendar', 'basic', 'calendar');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_trackers', 'Can view trackers', 'basic', 'trackers');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_trackers', 'Can list trackers', 'basic', 'trackers');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_trackers_closed', 'Can view trackers closed items', 'registered', 'trackers');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_trackers_pending', 'Can view trackers pending items', 'editors', 'trackers');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_user_results', 'Can view user quiz results', 'editors', 'quizzes');

------------------------------------------------------------------------
r7942 | luciash | 2007-03-02 15:49:35 -0400 (sex, 02 mar 2007) | 2 lines

[MOD] TikiWiki -> Tikiwiki


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 7941)
+++ tiki.sql	(revision 7942)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-02-21 11:54:19 $
-# $Author: sylvieg $
+# $Date: 2007-03-02 19:49:02 $
+# $Author: luciash $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4265,7 +4265,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_stats', 'Can view site stats', 'basic', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_survey_stats', 'Can view survey stats', 'basic', 'surveys');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_templates', 'Can view site templates', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_tiki_calendar', 'Can view TikiWiki tools calendar', 'basic', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_tiki_calendar', 'Can view Tikiwiki tools calendar', 'basic', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_trackers', 'Can view trackers', 'basic', 'trackers');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_trackers_closed', 'Can view trackers closed items', 'registered', 'trackers');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_trackers_pending', 'Can view trackers pending items', 'editors', 'trackers');

------------------------------------------------------------------------
r7889 | sylvieg | 2007-02-21 07:54:19 -0400 (qua, 21 fev 2007) | 2 lines

[FIX]speed: index in tiki_searchindex - thx xavi


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 7888)
+++ tiki.sql	(revision 7889)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-02-12 21:08:56 $
-# $Author: nyloth $
+# $Date: 2007-02-21 11:54:19 $
+# $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -2911,7 +2911,8 @@
   count int(11) NOT NULL default '1',
   last_update int(11) NOT NULL default '0',
   PRIMARY KEY  (searchword,location,page(80)),
-  KEY last_update (last_update)
+  KEY last_update (last_update),
+  KEY location (location(50), page(200))
 ) TYPE=MyISAM;
 
 # LRU (last recently used) list for searching parts of words

------------------------------------------------------------------------
r7831 | nyloth | 2007-02-12 17:08:56 -0400 (seg, 12 fev 2007) | 12 lines

[MOD] user contacts:

- alter database structure for tables 'tiki_webmail_contacts_fields' and 'tiki_webmail_contacts_ext' in order to :
	* add an 'order' field that will be used to store the position of each field in the contact list,
	* add a 'show' field that will be used to specify if this field is shown in the contact list,
	* add an auto_increment 'fieldId' field as the primary key of the 'tiki_webmail_contacts_ext' table, since it's better to use unique id instead of names,
	* use a new field 'fieldId' in table 'tiki_webmail_contacts_fields' as the foreign key for the table 'tiki_webmail_contacts_ext' and remove the unuseful field 'name',

- apply the default table look to 'User Contacts Preferences' -> 'Contacts Possible Fields' and use icons instead of text for actions,

- don't show fields of a contact that are not listed in the user contacts possible fields (feel free to add it again if ou really need it)


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 7830)
+++ tiki.sql	(revision 7831)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-02-05 19:31:51 $
-# $Author: niclone $
+# $Date: 2007-02-12 21:08:56 $
+# $Author: nyloth $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4838,7 +4838,7 @@
 DROP TABLE IF EXISTS tiki_webmail_contacts_ext;
 CREATE TABLE `tiki_webmail_contacts_ext` (
   `contactId` int(11) NOT NULL,
-  `name` varchar(32) NOT NULL,
+  `fieldId` int(10) unsigned NOT NULL,
   `value` varchar(256) NOT NULL,
   `hidden` tinyint(1) NOT NULL,
   KEY `contactId` (`contactId`)
@@ -4846,7 +4846,11 @@
 
 DROP TABLE IF EXISTS tiki_webmail_contacts_fields;
 CREATE TABLE `tiki_webmail_contacts_fields` (
+  `fieldId` int(10) unsigned NOT NULL auto_increment,
   `user` VARCHAR( 200 ) NOT NULL ,
   `fieldname` VARCHAR( 256 ) NOT NULL ,
+  `order` int(2) NOT NULL default '0',
+  `show` char(1) NOT NULL default 'n',
+  PRIMARY KEY ( `fieldId` ),
   INDEX ( `user` )
 ) ENGINE = MyISAM ;

------------------------------------------------------------------------
r7758 | niclone | 2007-02-05 15:31:51 -0400 (seg, 05 fev 2007) | 2 lines

[FIX] tiki_user_preferences value was too short to store all user fields in one line. So a new table is now used for them.


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 7757)
+++ tiki.sql	(revision 7758)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-02-05 14:37:06 $
+# $Date: 2007-02-05 19:31:51 $
 # $Author: niclone $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4843,3 +4843,10 @@
   `hidden` tinyint(1) NOT NULL,
   KEY `contactId` (`contactId`)
 ) ENGINE=MyISAM;
+
+DROP TABLE IF EXISTS tiki_webmail_contacts_fields;
+CREATE TABLE `tiki_webmail_contacts_fields` (
+  `user` VARCHAR( 200 ) NOT NULL ,
+  `fieldname` VARCHAR( 256 ) NOT NULL ,
+  INDEX ( `user` )
+) ENGINE = MyISAM ;

------------------------------------------------------------------------
r7750 | niclone | 2007-02-05 10:37:06 -0400 (seg, 05 fev 2007) | 2 lines

[FIX] added table creation for contacts extended informations in db/tiki.sql


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 7749)
+++ tiki.sql	(revision 7750)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-01-21 19:27:12 $
-# $Author: awolfff $
+# $Date: 2007-02-05 14:37:06 $
+# $Author: niclone $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -4835,3 +4835,11 @@
   PRIMARY KEY  (objectId, contributionId)
 ) TYPE=MyISAM;
 
+DROP TABLE IF EXISTS tiki_webmail_contacts_ext;
+CREATE TABLE `tiki_webmail_contacts_ext` (
+  `contactId` int(11) NOT NULL,
+  `name` varchar(32) NOT NULL,
+  `value` varchar(256) NOT NULL,
+  `hidden` tinyint(1) NOT NULL,
+  KEY `contactId` (`contactId`)
+) ENGINE=MyISAM;

------------------------------------------------------------------------
r7684 | awolfff | 2007-01-21 15:27:12 -0400 (dom, 21 jan 2007) | 2 lines

[FIX]: quote column name in 'user(count)' used in PRIMARY KEY definitions to avoid errors in mysql (4.0.15).


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 7683)
+++ tiki.sql	(revision 7684)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-01-21 03:21:18 $
-# $Author: garygriffin $
+# $Date: 2007-01-21 19:27:12 $
+# $Author: awolfff $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -2417,7 +2417,7 @@
   serverId int(12) NOT NULL default '0',
   groupName varchar(255) NOT NULL default '',
   timestamp int(14) NOT NULL default '0',
-  PRIMARY KEY  (user(100),serverId,groupName(100))
+  PRIMARY KEY  (`user`(100),serverId,groupName(100))
 ) TYPE=MyISAM;
 # --------------------------------------------------------
 
@@ -2453,7 +2453,7 @@
   user varchar(200) NOT NULL default '',
   pageName varchar(250) NOT NULL default '',
   data text,
-  PRIMARY KEY  (user(150),pageName(100))
+  PRIMARY KEY  (`user`(150),pageName(100))
 ) TYPE=MyISAM;
 # --------------------------------------------------------
 
@@ -2513,7 +2513,7 @@
   description varchar(200) default NULL,
   comment varchar(200) default NULL,
   lastModif int(14) default NULL,
-  PRIMARY KEY  (pageName(120), user(120))
+  PRIMARY KEY  (pageName(120), `user`(120))
 ) TYPE=MyISAM;
 # --------------------------------------------------------
 
@@ -3836,7 +3836,7 @@
   user varchar(200) NOT NULL default '',
   id varchar(255) NOT NULL default '',
   optionId int(10) NOT NULL default 0,
-  PRIMARY KEY  (user(100),id(100))
+  PRIMARY KEY  (`user`(100),id(100))
 ) TYPE=MyISAM;
 # --------------------------------------------------------
 
@@ -3857,7 +3857,7 @@
   type varchar(200) default NULL,
   url varchar(250) default NULL,
   email varchar(200) default NULL,
-  PRIMARY KEY  (user(100),event,object(100))
+  PRIMARY KEY  (`user`(100),event,object(100))
 ) TYPE=MyISAM;
 # --------------------------------------------------------
 
@@ -4611,7 +4611,7 @@
 CREATE TABLE tiki_friends (
   user char(200) NOT NULL default '',
   friend char(200) NOT NULL default '',
-  PRIMARY KEY  (user(120),friend(120))
+  PRIMARY KEY  (`user`(120),friend(120))
 ) TYPE=MyISAM;
 
 DROP TABLE IF EXISTS tiki_friendship_requests;

------------------------------------------------------------------------
r7681 | garygriffin | 2007-01-20 23:21:18 -0400 (sÃ¡b, 20 jan 2007) | 2 lines

update tiki_file_galleries for missing show_creator and show_author fields


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 7680)
+++ tiki.sql	(revision 7681)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2007-01-19 23:58:05 $
-# $Author: sylvieg $
+# $Date: 2007-01-21 03:21:18 $
+# $Author: garygriffin $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -1307,6 +1307,8 @@
   archives int(4) default -1,
   sort_mode char(20) default NULL,
   show_modified char(1) default NULL,
+  show_author char(1) default NULL,
+  show_creator char(1) default NULL,
   PRIMARY KEY  (galleryId)
 ) TYPE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------

------------------------------------------------------------------------
r7673 | sylvieg | 2007-01-19 19:58:05 -0400 (sex, 19 jan 2007) | 2 lines

[FIX]rollback - field with reserverd name must be quoted


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 7672)
+++ tiki.sql	(revision 7673)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-01-16 14:45:56 $
+# $Date: 2007-01-19 23:58:05 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4714,19 +4714,19 @@
 DROP TABLE IF EXISTS tiki_events;
 CREATE TABLE tiki_events (
   callback_type int(1) NOT NULL default '3',
-  order int(2) NOT NULL default '50',
+  `order` int(2) NOT NULL default '50',
   event varchar(200) NOT NULL default '',
   file varchar(200) NOT NULL default '',  
   object varchar(200) NOT NULL default '',
   method varchar(200) NOT NULL default '',
-  PRIMARY KEY  (callback_type,order)
+  PRIMARY KEY  (callback_type,`order`)
 ) TYPE=MyISAM;
 
-INSERT IGNORE INTO tiki_events(callback_type,order,event,file,object,method) VALUES ('1', '20', 'user_registers', 'lib/registration/registrationlib.php', 'registrationlib', 'callback_tikiwiki_setup_custom_fields');
+INSERT IGNORE INTO tiki_events(callback_type,`order`,event,file,object,method) VALUES ('1', '20', 'user_registers', 'lib/registration/registrationlib.php', 'registrationlib', 'callback_tikiwiki_setup_custom_fields');
 INSERT IGNORE INTO tiki_events(event,file,object,method) VALUES ('user_registers', 'lib/registration/registrationlib.php', 'registrationlib', 'callback_tikiwiki_save_registration');
-INSERT IGNORE INTO tiki_events(callback_type,order,event,file,object,method) VALUES ('5', '20', 'user_registers', 'lib/registration/registrationlib.php', 'registrationlib', 'callback_logslib_user_registers');
-INSERT IGNORE INTO tiki_events(callback_type,order,event,file,object,method) VALUES ('5', '25', 'user_registers', 'lib/registration/registrationlib.php', 'registrationlib', 'callback_tikiwiki_send_email');
-INSERT IGNORE INTO tiki_events(callback_type,order,event,file,object,method) VALUES ('5', '30', 'user_registers', 'lib/registration/registrationlib.php', 'registrationlib', 'callback_tikimail_user_registers');
+INSERT IGNORE INTO tiki_events(callback_type,`order`,event,file,object,method) VALUES ('5', '20', 'user_registers', 'lib/registration/registrationlib.php', 'registrationlib', 'callback_logslib_user_registers');
+INSERT IGNORE INTO tiki_events(callback_type,`order`,event,file,object,method) VALUES ('5', '25', 'user_registers', 'lib/registration/registrationlib.php', 'registrationlib', 'callback_tikiwiki_send_email');
+INSERT IGNORE INTO tiki_events(callback_type,`order`,event,file,object,method) VALUES ('5', '30', 'user_registers', 'lib/registration/registrationlib.php', 'registrationlib', 'callback_tikimail_user_registers');
 
 #
 # Table structure for table tiki_registration_fields
@@ -4741,7 +4741,7 @@
   field varchar(255) NOT NULL default '',
   name varchar(255) default NULL,
   type varchar(255) NOT NULL default 'text',
-  show tinyint(1) NOT NULL default '0',
+  `show` tinyint(1) NOT NULL default '0',
   size varchar(10) default '10',
   PRIMARY KEY  (id)
 ) TYPE=MyISAM;
@@ -4749,8 +4749,8 @@
 DROP TABLE IF EXISTS tiki_actionlog_conf;
 CREATE TABLE tiki_actionlog_conf (
  action varchar(32) NOT NULL default '',
- objectTypevarchar(32) NOT NULL default '',
- status char(1) default '',
+ objectType varchar(32) NOT NULL default '',
+ `status` char(1) default '',
 PRIMARY KEY (action, objectType)
 ) TYPE=MyISAM;
 INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Created', 'wiki page', 'y');

------------------------------------------------------------------------
r7651 | sylvieg | 2007-01-16 10:45:56 -0400 (ter, 16 jan 2007) | 2 lines

some indexes for directories


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 7650)
+++ tiki.sql	(revision 7651)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-01-12 17:02:51 $
+# $Date: 2007-01-16 14:45:56 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -1139,6 +1139,8 @@
   cache longblob,
   cache_timestamp int(14) default NULL,
   PRIMARY KEY  (siteId),
+  KEY (isValid),
+  KEY (url),
   FULLTEXT KEY ft (name,description)
 ) TYPE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------

------------------------------------------------------------------------
r7636 | sylvieg | 2007-01-12 13:02:52 -0400 (sex, 12 jan 2007) | 2 lines

[MOD]blog: new perm tiki_p_assign_perm_blog


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 7635)
+++ tiki.sql	(revision 7636)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-01-08 13:54:38 $
+# $Date: 2007-01-12 17:02:51 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -4280,6 +4280,7 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_vote_ratings', 'Can participate to rating of wiki pages', 'registered', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_file_gallery', 'Can assign perms to file gallery', 'admin', 'file galleries');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_actionlog', 'Can view action log', 'registered', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_blog', 'Can assign perms to blog', 'admin', 'blogs');
 # --------------------------------------------------------
 
 #

------------------------------------------------------------------------
r7622 | sylvieg | 2007-01-08 09:54:38 -0400 (seg, 08 jan 2007) | 2 lines

[FIX]partial rollback to mose's commit: user can be null


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 7621)
+++ tiki.sql	(revision 7622)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2007-01-07 21:07:19 $
+# $Date: 2007-01-08 13:54:38 $
 # $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -65,7 +65,7 @@
   activityId int(14) NOT NULL default '0',
   started int(14) NOT NULL default '0',
   ended int(14) NOT NULL default '0',
-  user varchar(200) not null default '',
+  user varchar(200) default '',
   status enum('running','completed') default NULL,
   PRIMARY KEY  (instanceId,activityId)
 ) TYPE=MyISAM;
@@ -82,7 +82,7 @@
 CREATE TABLE galaxia_instance_comments (
   cId int(14) NOT NULL auto_increment,
   instanceId int(14) NOT NULL default '0',
-  user varchar(200) not null default '',
+  user varchar(200) default '',
   activityId int(14) default NULL,
   hash varchar(34) default NULL,
   title varchar(250) default NULL,
@@ -203,7 +203,7 @@
   properties longblob,
   started int(14) default NULL,
   ended int(14) default NULL,
-  user varchar(200) not null default '',
+  user varchar(200) default '',
   PRIMARY KEY  (itemId)
 ) TYPE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
@@ -474,7 +474,7 @@
   ip2 char(3) default NULL,
   ip3 char(3) default NULL,
   ip4 char(3) default NULL,
-  user varchar(200) not null default '',
+  user varchar(200) default '',
   date_from timestamp(14) NOT NULL,
   date_to timestamp(14) NOT NULL,
   use_dates char(1) default NULL,
@@ -530,7 +530,7 @@
   data text,
   data_size int(11) unsigned NOT NULL default '0',
   created int(14) default NULL,
-  user varchar(40) default NULL,
+  user varchar(200) default '',
   trackbacks_to text,
   trackbacks_from text,
   title varchar(80) default NULL,
@@ -577,7 +577,7 @@
   lastModif int(14) default NULL,
   title varchar(200) default NULL,
   description text,
-  user varchar(200) not null default '',
+  user varchar(200) default '',
   public char(1) default NULL,
   posts int(8) default NULL,
   maxPosts int(8) default NULL,
@@ -637,7 +637,7 @@
   lang char(16) NOT NULL default 'en',
   name varchar(255) NOT NULL default '',
   description blob,
-  user varchar(200) not null default '',
+  user varchar(200) default '',
   created int(14) NOT NULL default '0',
   lastmodif int(14) NOT NULL default '0',
   PRIMARY KEY  (calitemId),
@@ -969,7 +969,7 @@
   object varchar(255) NOT NULL default '',
   objectType varchar(32) NOT NULL default '',
   parentId int(14) default NULL,
-  userName varchar(200) NOT NULL default '',
+  userName varchar(200) default '',
   commentDate int(14) default NULL,
   hits int(8) default NULL,
   type char(1) default NULL,
@@ -1074,7 +1074,7 @@
   year int(11) default NULL,
   authors varchar(200) default NULL,
   copyright_order int(11) default NULL,
-  userName varchar(200) not null default '',
+  userName varchar(200) default '',
   PRIMARY KEY  (copyrightId)
 ) TYPE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
@@ -1158,7 +1158,7 @@
   filename_draw varchar(250) default NULL,
   filename_pad varchar(250) default NULL,
   timestamp int(14) default NULL,
-  user varchar(200) not null default '',
+  user varchar(200) default '',
   PRIMARY KEY  (drawId)
 ) TYPE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
@@ -1285,7 +1285,7 @@
   created int(14) default NULL,
   visible char(1) default NULL,
   lastModif int(14) default NULL,
-  user varchar(200) NOT NULL default '',
+  user varchar(200) default '',
   hits int(14) default NULL,
   votes int(8) default NULL,
   points decimal(8,2) default NULL,
@@ -1328,7 +1328,7 @@
   filesize int(14) default NULL,
   filetype varchar(250) default NULL,
   data longblob,
-  user varchar(200) not null default '',
+  user varchar(200) default '',
   author varchar(40) default NULL,
   downloads int(14) default NULL,
   votes int(8) default NULL,
@@ -1340,7 +1340,7 @@
   search_data longtext,
   lastModif integer(14) DEFAULT NULL,
   lastModifUser varchar(200) DEFAULT NULL,
-  lockedby varchar(200) NOT NULL default '',
+  lockedby varchar(200) default '',
   comment varchar(200) default NULL,
   archiveId int(14) default 0,
   PRIMARY KEY  (fileId),
@@ -1476,7 +1476,7 @@
   parentId int(14) default NULL,
   forumId int(14) default NULL,
   timestamp int(14) default NULL,
-  user varchar(200) not null default '',
+  user varchar(200) default '',
   title varchar(240) default NULL,
   data text,
   type varchar(60) default NULL,
@@ -1500,7 +1500,7 @@
   threadId int(12) NOT NULL default '0',
   forumId int(12) NOT NULL default '0',
   parentId int(12) NOT NULL default '0',
-  user varchar(200) NOT NULL default '',
+  user varchar(200) default '',
   timestamp int(14) default NULL,
   reason varchar(250) default NULL,
   PRIMARY KEY  (threadId)
@@ -1525,7 +1525,7 @@
   visible char(1) default NULL,
   geographic char(1) default NULL,
   theme varchar(60) default NULL,
-  user varchar(200) NOT NULL default '',
+  user varchar(200) default '',
   hits int(14) default NULL,
   maxRows int(10) default NULL,
   rowImages int(10) default NULL,
@@ -1693,7 +1693,7 @@
   lon float default NULL,
   lat float default NULL,
   created int(14) default NULL,
-  user varchar(200) not null default '',
+  user varchar(200) NOT NULL default '',
   hits int(14) default NULL,
   path varchar(255) default NULL,
   PRIMARY KEY  (imageId),
@@ -2276,7 +2276,7 @@
 
 DROP TABLE IF EXISTS tiki_minical_events;
 CREATE TABLE tiki_minical_events (
-  user varchar(200) not null default '',
+  user varchar(200) default '',
   eventId int(12) NOT NULL auto_increment,
   title varchar(250) default NULL,
   description text,
@@ -2299,7 +2299,7 @@
 
 DROP TABLE IF EXISTS tiki_minical_topics;
 CREATE TABLE tiki_minical_topics (
-  user varchar(200) not null default '',
+  user varchar(200) default '',
   topicId int(12) NOT NULL auto_increment,
   name varchar(250) default NULL,
   filename varchar(200) default NULL,
@@ -2471,7 +2471,7 @@
   lastModif int(14) default NULL,
   comment varchar(200) default NULL,
   version int(8) NOT NULL default '0',
-  user varchar(200) NOT NULL default '',
+  user varchar(200) default '',
   ip varchar(15) default NULL,
   flag char(1) default NULL,
   points int(8) default NULL,
@@ -2503,13 +2503,13 @@
 
 DROP TABLE IF EXISTS tiki_page_drafts;
 CREATE TABLE tiki_page_drafts (
-  user varchar(40) NOT NULL,
+  user varchar(200) default '',
   pageName varchar(255) NOT NULL,
   data mediumtext,
   description varchar(200) default NULL,
   comment varchar(200) default NULL,
   lastModif int(14) default NULL,
-  PRIMARY KEY  (pageName, user)
+  PRIMARY KEY  (pageName(120), user(120))
 ) TYPE=MyISAM;
 # --------------------------------------------------------
 
@@ -3051,7 +3051,7 @@
   width int(4) NOT NULL default '1',
   height int(4) NOT NULL default '1',
   format varchar(255) default NULL,
-  user varchar(40) default NULL,
+  user varchar(200) default NULL,
   UNIQUE KEY sheetId (sheetId,begin,rowIndex,columnIndex),
   KEY sheetId_2 (sheetId,rowIndex,columnIndex)
 ) TYPE=MyISAM;
@@ -3389,7 +3389,7 @@
   filename varchar(80) default NULL,
   filetype varchar(80) default NULL,
   filesize int(14) default NULL,
-  user varchar(40) default NULL,
+  user varchar(200) default NULL,
   data longblob,
   path varchar(255) default NULL,
   downloads int(10) default NULL,
@@ -3412,7 +3412,7 @@
 CREATE TABLE tiki_tracker_item_comments (
   commentId int(12) NOT NULL auto_increment,
   itemId int(12) NOT NULL default '0',
-  user varchar(40) default NULL,
+  user varchar(200) default NULL,
   data text,
   title varchar(200) default NULL,
   posted int(14) default NULL,
@@ -3738,7 +3738,7 @@
 
 DROP TABLE IF EXISTS tiki_user_quizzes;
 CREATE TABLE tiki_user_quizzes (
-  user varchar(200) NOT NULL default '',
+  user varchar(200) default '',
   quizId int(10) default NULL,
   timestamp int(14) default NULL,
   timeTaken int(14) default NULL,

------------------------------------------------------------------------
r7621 | sylvieg | 2007-01-07 17:07:19 -0400 (dom, 07 jan 2007) | 2 lines

[FIX]actionlog: user can be null


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 7620)
+++ tiki.sql	(revision 7621)
@@ -1,6 +1,6 @@
 # $Rev$
-# $Date: 2006-12-28 17:57:26 $
-# $Author: mose $
+# $Date: 2007-01-07 21:07:19 $
+# $Author: sylvieg $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
 # version 2.5.1
@@ -318,7 +318,7 @@
   lastModif int(14) default NULL,
   object varchar(255) default NULL,
   objectType varchar(32) NOT NULL default '',
-  user varchar(200) not null default '',
+  user varchar(200) default '',
   ip varchar(15) default NULL,
   comment varchar(200) default NULL,
   categId int(12) NOT NULL default '0',

------------------------------------------------------------------------
r7548 | mose | 2006-12-28 13:57:26 -0400 (qui, 28 dez 2006) | 2 lines

[KIL] removed ephemeride table and perms


Index: tiki.sql
===================================================================
--- tiki.sql	(revision 7547)
+++ tiki.sql	(revision 7548)
@@ -1,5 +1,5 @@
 # $Rev$
-# $Date: 2006-12-28 17:56:05 $
+# $Date: 2006-12-28 17:57:26 $
 # $Author: mose $
 # $Name: not supported by cvs2svn $
 # phpMyAdmin MySQL-Dump
@@ -1187,29 +1187,7 @@
   PRIMARY KEY  (name)
 );
 
-#
-# Table structure for table tiki_eph
-#
-# Creation: Jul 03, 2003 at 07:42 PM
-# Last update: Jul 06, 2003 at 08:23 AM
-#
-
-DROP TABLE IF EXISTS tiki_eph;
-CREATE TABLE tiki_eph (
-  ephId int(12) NOT NULL auto_increment,
-  title varchar(250) default NULL,
-  isFile char(1) default NULL,
-  filename varchar(250) default NULL,
-  filetype varchar(250) default NULL,
-  filesize varchar(250) default NULL,
-  data longblob,
-  textdata longblob,
-  publish int(14) default NULL,
-  hits int(10) default NULL,
-  PRIMARY KEY  (ephId)
-) TYPE=MyISAM AUTO_INCREMENT=1 ;
 # --------------------------------------------------------
-
 #
 # Table structure for table tiki_extwiki
 #
@@ -2195,9 +2173,6 @@
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Send newsletters','tiki-send_newsletters.php',905,'feature_newsletters','tiki_p_send_newsletters','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin newsletters','tiki-admin_newsletters.php',910,'feature_newsletters','tiki_p_admin_newsletters','');
 
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Ephemerides','',950,'feature_eph','','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Ephemerides','tiki-eph.php',953,'feature_eph','','');
-INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin ephemerides','tiki-eph_admin.php',955,'feature_eph','tiki_p_eph_admin','');
 
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Charts','',1000,'feature_charts','','');
 INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'','Charts','tiki-charts.php',1003,'feature_charts','','');
@@ -4198,7 +4173,6 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_structures', 'Can create and edit structures', 'editors', 'wiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_submission', 'Can edit submissions', 'editors', 'cms');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_templates', 'Can edit site templates', 'admin', 'tiki');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_eph_admin', 'Can admin ephemerides', 'editors', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_exception_instance', 'Can declare an instance as exception', 'registered', 'workflow');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forum_attach', 'Can attach to forum posts', 'registered', 'forums');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forum_autoapp', 'Auto approve forum posts', 'editors', 'forums');
@@ -4271,7 +4245,6 @@
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_categories', 'Can browse categories', 'basic', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_chart', 'Can view charts', 'basic', 'charts');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_directory', 'Can use the directory', 'basic', 'directory');
-INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_eph', 'Can view ephemerides', 'registered', 'tiki');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_events', 'Can view events details', 'registered', 'calendar');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_faqs', 'Can view faqs', 'basic', 'faqs');
 INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_file_gallery', 'Can view file galleries', 'basic', 'file galleries');

------------------------------------------------------------------------
r7547 | mose | 2006-12-28 13:56:05 -0400 (qui, 28 dez 2006) | 2 lines

[FIX] oops, removed tiki.sql, bad boy


Index: tiki.sql
===================================================================
--- tiki.sql	(nonexistent)
+++ tiki.sql	(revision 7547)
@@ -0,0 +1,4859 @@
+# $Rev$
+# $Date: 2006-12-28 17:56:05 $
+# $Author: mose $
+# $Name: not supported by cvs2svn $
+# phpMyAdmin MySQL-Dump
+# version 2.5.1
+# http://www.phpmyadmin.net/ (download page)
+#
+# Host: localhost
+# Generation Time: Jul 13, 2003 at 02:09 AM
+# Server version: 4.0.13
+# PHP Version: 4.2.3
+# Database : tikiwiki
+# --------------------------------------------------------
+
+#
+# Table structure for table galaxia_activities
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS galaxia_activities;
+CREATE TABLE galaxia_activities (
+  activityId int(14) NOT NULL auto_increment,
+  name varchar(80) default NULL,
+  normalized_name varchar(80) default NULL,
+  pId int(14) NOT NULL default '0',
+  type enum('start','end','split','switch','join','activity','standalone') default NULL,
+  isAutoRouted char(1) default NULL,
+  flowNum int(10) default NULL,
+  isInteractive char(1) default NULL,
+  lastModif int(14) default NULL,
+  description text,
+  expirationTime int(6) unsigned NOT NULL default '0',
+  PRIMARY KEY  (activityId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table galaxia_activity_roles
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS galaxia_activity_roles;
+CREATE TABLE galaxia_activity_roles (
+  activityId int(14) NOT NULL default '0',
+  roleId int(14) NOT NULL default '0',
+  PRIMARY KEY  (activityId,roleId)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table galaxia_instance_activities
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS galaxia_instance_activities;
+CREATE TABLE galaxia_instance_activities (
+  instanceId int(14) NOT NULL default '0',
+  activityId int(14) NOT NULL default '0',
+  started int(14) NOT NULL default '0',
+  ended int(14) NOT NULL default '0',
+  user varchar(200) not null default '',
+  status enum('running','completed') default NULL,
+  PRIMARY KEY  (instanceId,activityId)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table galaxia_instance_comments
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS galaxia_instance_comments;
+CREATE TABLE galaxia_instance_comments (
+  cId int(14) NOT NULL auto_increment,
+  instanceId int(14) NOT NULL default '0',
+  user varchar(200) not null default '',
+  activityId int(14) default NULL,
+  hash varchar(34) default NULL,
+  title varchar(250) default NULL,
+  comment text,
+  activity varchar(80) default NULL,
+  timestamp int(14) default NULL,
+  PRIMARY KEY  (cId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table galaxia_instances
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS galaxia_instances;
+CREATE TABLE galaxia_instances (
+  instanceId int(14) NOT NULL auto_increment,
+  pId int(14) NOT NULL default '0',
+  started int(14) default NULL,
+  name varchar(200) NOT NULL default 'No Name',
+  owner varchar(200) default NULL,
+  nextActivity int(14) default NULL,
+  nextUser varchar(200) default NULL,
+  ended int(14) default NULL,
+  status enum('active','exception','aborted','completed') default NULL,
+  properties longblob,
+  PRIMARY KEY  (instanceId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table galaxia_processes
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS galaxia_processes;
+CREATE TABLE galaxia_processes (
+  pId int(14) NOT NULL auto_increment,
+  name varchar(80) default NULL,
+  isValid char(1) default NULL,
+  isActive char(1) default NULL,
+  version varchar(12) default NULL,
+  description text,
+  lastModif int(14) default NULL,
+  normalized_name varchar(80) default NULL,
+  PRIMARY KEY  (pId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table galaxia_roles
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS galaxia_roles;
+CREATE TABLE galaxia_roles (
+  roleId int(14) NOT NULL auto_increment,
+  pId int(14) NOT NULL default '0',
+  lastModif int(14) default NULL,
+  name varchar(80) default NULL,
+  description text,
+  PRIMARY KEY  (roleId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table galaxia_transitions
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS galaxia_transitions;
+CREATE TABLE galaxia_transitions (
+  pId int(14) NOT NULL default '0',
+  actFromId int(14) NOT NULL default '0',
+  actToId int(14) NOT NULL default '0',
+  PRIMARY KEY  (actFromId,actToId)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table galaxia_user_roles
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS galaxia_user_roles;
+CREATE TABLE galaxia_user_roles (
+  pId int(14) NOT NULL default '0',
+  roleId int(14) NOT NULL auto_increment,
+  user varchar(200) NOT NULL default '',
+  PRIMARY KEY  (roleId,user)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table galaxia_workitems
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS galaxia_workitems;
+CREATE TABLE galaxia_workitems (
+  itemId int(14) NOT NULL auto_increment,
+  instanceId int(14) NOT NULL default '0',
+  orderId int(14) NOT NULL default '0',
+  activityId int(14) NOT NULL default '0',
+  properties longblob,
+  started int(14) default NULL,
+  ended int(14) default NULL,
+  user varchar(200) not null default '',
+  PRIMARY KEY  (itemId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table messu_messages
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 08:29 PM
+#
+
+DROP TABLE IF EXISTS messu_messages;
+CREATE TABLE messu_messages (
+  msgId int(14) NOT NULL auto_increment,
+  user varchar(200) NOT NULL default '',
+  user_from varchar(200) NOT NULL default '',
+  user_to text,
+  user_cc text,
+  user_bcc text,
+  subject varchar(255) default NULL,
+  body text,
+  hash varchar(32) default NULL,
+  replyto_hash varchar(32) default NULL,
+  date int(14) default NULL,
+  isRead char(1) default NULL,
+  isReplied char(1) default NULL,
+  isFlagged char(1) default NULL,
+  priority int(2) default NULL,
+  PRIMARY KEY  (msgId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table messu_archive (same structure as messu_messages)
+# desc: user may archive his messages to this table to speed up default msg handling
+#
+# Creation: Feb 26, 2005 at 03:00 PM
+# Last update: Feb 26, 2005 at 03:00 PM
+#
+
+DROP TABLE IF EXISTS messu_archive;
+CREATE TABLE messu_archive (
+  msgId int(14) NOT NULL auto_increment,
+  user varchar(40) NOT NULL default '',
+  user_from varchar(40) NOT NULL default '',
+  user_to text,
+  user_cc text,
+  user_bcc text,
+  subject varchar(255) default NULL,
+  body text,
+  hash varchar(32) default NULL,
+  replyto_hash varchar(32) default NULL,
+  date int(14) default NULL,
+  isRead char(1) default NULL,
+  isReplied char(1) default NULL,
+  isFlagged char(1) default NULL,
+  priority int(2) default NULL,
+  PRIMARY KEY  (msgId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table messu_sent (same structure as messu_messages)
+# desc: user may archive his messages to this table to speed up default msg handling
+#
+# Creation: Feb 26, 2005 at 11:00 PM
+# Last update: Feb 26, 2005 at 11:00 PM
+#
+
+DROP TABLE IF EXISTS messu_sent;
+CREATE TABLE messu_sent (
+  msgId int(14) NOT NULL auto_increment,
+  user varchar(40) NOT NULL default '',
+  user_from varchar(40) NOT NULL default '',
+  user_to text,
+  user_cc text,
+  user_bcc text,
+  subject varchar(255) default NULL,
+  body text,
+  hash varchar(32) default NULL,
+  replyto_hash varchar(32) default NULL,
+  date int(14) default NULL,
+  isRead char(1) default NULL,
+  isReplied char(1) default NULL,
+  isFlagged char(1) default NULL,
+  priority int(2) default NULL,
+  PRIMARY KEY  (msgId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+DROP TABLE IF EXISTS sessions;
+CREATE TABLE sessions(
+  sesskey char(32) NOT NULL,
+  expiry int(11) unsigned NOT NULL,
+  expireref varchar(64),
+  data text NOT NULL,
+  PRIMARY KEY  (sesskey),
+  KEY expiry (expiry)
+) TYPE=MyISAM;
+
+#
+# Table structure for table tiki_actionlog
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 13, 2003 at 12:29 AM
+#
+
+DROP TABLE IF EXISTS tiki_actionlog;
+CREATE TABLE tiki_actionlog (
+  actionId int(8) NOT NULL auto_increment,
+  action varchar(255) NOT NULL default '',
+  lastModif int(14) default NULL,
+  object varchar(255) default NULL,
+  objectType varchar(32) NOT NULL default '',
+  user varchar(200) not null default '',
+  ip varchar(15) default NULL,
+  comment varchar(200) default NULL,
+  categId int(12) NOT NULL default '0',
+  PRIMARY KEY  (actionId)
+) TYPE=MyISAM;
+
+DROP TABLE IF EXISTS tiki_actionlog_params;
+CREATE TABLE tiki_actionlog_params (
+  actionId int(8) NOT NULL,
+  name varchar(40) NOT NULL,
+  value text,
+  KEY  (actionId)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_articles
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Nov 27, 2006 at 21:53 PM
+# Last check: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_articles;
+CREATE TABLE tiki_articles (
+  articleId int(8) NOT NULL auto_increment,
+  topline varchar(255) default NULL,
+  title varchar(255) default NULL,
+  subtitle varchar(255) default NULL,
+  linkto varchar(255) default NULL,
+  lang varchar(16) default NULL,
+  state char(1) default 's',
+  authorName varchar(60) default NULL,
+  topicId int(14) default NULL,
+  topicName varchar(40) default NULL,
+  size int(12) default NULL,
+  useImage char(1) default NULL,
+  image_name varchar(80) default NULL,
+  image_caption text default NULL,
+  image_type varchar(80) default NULL,
+  image_size int(14) default NULL,
+  image_x int(4) default NULL,
+  image_y int(4) default NULL,
+  image_data longblob,
+  publishDate int(14) default NULL,
+  expireDate int(14) default NULL,
+  created int(14) default NULL,
+  heading text,
+  body text,
+  hash varchar(32) default NULL,
+  author varchar(200) default NULL,
+  nbreads int(14) default NULL,
+  votes int(8) default NULL,
+  points int(14) default NULL,
+  type varchar(50) default NULL,
+  rating decimal(3,2) default NULL,
+  isfloat char(1) default NULL,
+  PRIMARY KEY  (articleId),
+  KEY title (title),
+  KEY heading (heading(255)),
+  KEY body (body(255)),
+  KEY author (author(32)),
+  KEY nbreads (nbreads),
+  FULLTEXT KEY ft (title,heading,body)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+DROP TABLE IF EXISTS tiki_article_types;
+CREATE TABLE tiki_article_types (
+  type varchar(50) NOT NULL,
+  use_ratings varchar(1) default NULL,
+  show_pre_publ varchar(1) default NULL,
+  show_post_expire varchar(1) default 'y',
+  heading_only varchar(1) default NULL,
+  allow_comments varchar(1) default 'y',
+  show_image varchar(1) default 'y',
+  show_avatar varchar(1) default NULL,
+  show_author varchar(1) default 'y',
+  show_pubdate varchar(1) default 'y',
+  show_expdate varchar(1) default NULL,
+  show_reads varchar(1) default 'y',
+  show_size varchar(1) default 'y',
+  show_topline varchar(1) default 'n',
+  show_subtitle varchar(1) default 'n',
+  show_linkto varchar(1) default 'n',
+  show_image_caption varchar(1) default 'n',
+  show_lang varchar(1) default 'n',
+  creator_edit varchar(1) default NULL,
+  comment_can_rate_article char(1) default NULL,
+  PRIMARY KEY  (type)
+) TYPE=MyISAM ;
+
+INSERT IGNORE INTO tiki_article_types(type) VALUES ('Article');
+INSERT IGNORE INTO tiki_article_types(type,use_ratings) VALUES ('Review','y');
+INSERT IGNORE INTO tiki_article_types(type,show_post_expire) VALUES ('Event','n');
+INSERT IGNORE INTO tiki_article_types(type,show_post_expire,heading_only,allow_comments) VALUES ('Classified','n','y','n');
+
+#
+# Table structure for table tiki_banners
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_banners;
+CREATE TABLE tiki_banners (
+  bannerId int(12) NOT NULL auto_increment,
+  client varchar(200) NOT NULL default '',
+  url varchar(255) default NULL,
+  title varchar(255) default NULL,
+  alt varchar(250) default NULL,
+  which varchar(50) default NULL,
+  imageData longblob,
+  imageType varchar(200) default NULL,
+  imageName varchar(100) default NULL,
+  HTMLData text,
+  fixedURLData varchar(255) default NULL,
+  textData text,
+  fromDate int(14) default NULL,
+  toDate int(14) default NULL,
+  useDates char(1) default NULL,
+  mon char(1) default NULL,
+  tue char(1) default NULL,
+  wed char(1) default NULL,
+  thu char(1) default NULL,
+  fri char(1) default NULL,
+  sat char(1) default NULL,
+  sun char(1) default NULL,
+  hourFrom varchar(4) default NULL,
+  hourTo varchar(4) default NULL,
+  created int(14) default NULL,
+  maxImpressions int(8) default NULL,
+  impressions int(8) default NULL,
+  clicks int(8) default NULL,
+  zone varchar(40) default NULL,
+  PRIMARY KEY  (bannerId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_banning
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_banning;
+CREATE TABLE tiki_banning (
+  banId int(12) NOT NULL auto_increment,
+  mode enum('user','ip') default NULL,
+  title varchar(200) default NULL,
+  ip1 char(3) default NULL,
+  ip2 char(3) default NULL,
+  ip3 char(3) default NULL,
+  ip4 char(3) default NULL,
+  user varchar(200) not null default '',
+  date_from timestamp(14) NOT NULL,
+  date_to timestamp(14) NOT NULL,
+  use_dates char(1) default NULL,
+  created int(14) default NULL,
+  message text,
+  PRIMARY KEY  (banId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_banning_sections
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_banning_sections;
+CREATE TABLE tiki_banning_sections (
+  banId int(12) NOT NULL default '0',
+  section varchar(100) NOT NULL default '',
+  PRIMARY KEY  (banId,section)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_blog_activity
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 04:52 PM
+#
+
+DROP TABLE IF EXISTS tiki_blog_activity;
+CREATE TABLE tiki_blog_activity (
+  blogId int(8) NOT NULL default '0',
+  day int(14) NOT NULL default '0',
+  posts int(8) default NULL,
+  PRIMARY KEY  (blogId,day)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_blog_posts
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 04:52 PM
+# Last check: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_blog_posts;
+CREATE TABLE tiki_blog_posts (
+  postId int(8) NOT NULL auto_increment,
+  blogId int(8) NOT NULL default '0',
+  data text,
+  data_size int(11) unsigned NOT NULL default '0',
+  created int(14) default NULL,
+  user varchar(40) default NULL,
+  trackbacks_to text,
+  trackbacks_from text,
+  title varchar(80) default NULL,
+  priv varchar(1) default NULL,
+  PRIMARY KEY  (postId),
+  KEY data (data(255)),
+  KEY blogId (blogId),
+  KEY created (created),
+  FULLTEXT KEY ft (data,title)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_blog_posts_images
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_blog_posts_images;
+CREATE TABLE tiki_blog_posts_images (
+  imgId int(14) NOT NULL auto_increment,
+  postId int(14) NOT NULL default '0',
+  filename varchar(80) default NULL,
+  filetype varchar(80) default NULL,
+  filesize int(14) default NULL,
+  data longblob,
+  PRIMARY KEY  (imgId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_blogs
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 13, 2003 at 01:07 AM
+# Last check: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_blogs;
+CREATE TABLE tiki_blogs (
+  blogId int(8) NOT NULL auto_increment,
+  created int(14) default NULL,
+  lastModif int(14) default NULL,
+  title varchar(200) default NULL,
+  description text,
+  user varchar(200) not null default '',
+  public char(1) default NULL,
+  posts int(8) default NULL,
+  maxPosts int(8) default NULL,
+  hits int(8) default NULL,
+  activity decimal(4,2) default NULL,
+  heading text,
+  use_find char(1) default NULL,
+  use_title char(1) default NULL,
+  add_date char(1) default NULL,
+  add_poster char(1) default NULL,
+  allow_comments char(1) default NULL,
+  show_avatar char(1) default NULL,
+  PRIMARY KEY  (blogId),
+  KEY title (title),
+  KEY description (description(255)),
+  KEY hits (hits),
+  FULLTEXT KEY ft (title,description)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_calendar_categories
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 07:05 AM
+#
+
+DROP TABLE IF EXISTS tiki_calendar_categories;
+CREATE TABLE tiki_calendar_categories (
+  calcatId int(11) NOT NULL auto_increment,
+  calendarId int(14) NOT NULL default '0',
+  name varchar(255) NOT NULL default '',
+  PRIMARY KEY  (calcatId),
+  UNIQUE KEY catname (calendarId,name(16))
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_calendar_items
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 07:43 AM
+#
+
+DROP TABLE IF EXISTS tiki_calendar_items;
+CREATE TABLE tiki_calendar_items (
+  calitemId int(14) NOT NULL auto_increment,
+  calendarId int(14) NOT NULL default '0',
+  start int(14) NOT NULL default '0',
+  end int(14) NOT NULL default '0',
+  locationId int(14) default NULL,
+  categoryId int(14) default NULL,
+  nlId int(12) NOT NULL default '0',
+  priority enum('1','2','3','4','5','6','7','8','9') NOT NULL default '1',
+  status enum('0','1','2') NOT NULL default '0',
+  url varchar(255) default NULL,
+  lang char(16) NOT NULL default 'en',
+  name varchar(255) NOT NULL default '',
+  description blob,
+  user varchar(200) not null default '',
+  created int(14) NOT NULL default '0',
+  lastmodif int(14) NOT NULL default '0',
+  PRIMARY KEY  (calitemId),
+  KEY calendarId (calendarId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_calendar_locations
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 07:05 AM
+#
+
+DROP TABLE IF EXISTS tiki_calendar_locations;
+CREATE TABLE tiki_calendar_locations (
+  callocId int(14) NOT NULL auto_increment,
+  calendarId int(14) NOT NULL default '0',
+  name varchar(255) NOT NULL default '',
+  description blob,
+  PRIMARY KEY  (callocId),
+  UNIQUE KEY locname (calendarId,name(16))
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_calendar_roles
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_calendar_roles;
+CREATE TABLE tiki_calendar_roles (
+  calitemId int(14) NOT NULL default '0',
+  username varchar(200) NOT NULL default '',
+  role enum('0','1','2','3','6') NOT NULL default '0',
+  PRIMARY KEY  (calitemId,username(16),role)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_calendars
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 05, 2003 at 02:03 PM
+#
+
+DROP TABLE IF EXISTS tiki_calendars;
+CREATE TABLE tiki_calendars (
+  calendarId int(14) NOT NULL auto_increment,
+  name varchar(80) NOT NULL default '',
+  description varchar(255) default NULL,
+  user varchar(200) NOT NULL default '',
+  customlocations enum('n','y') NOT NULL default 'n',
+  customcategories enum('n','y') NOT NULL default 'n',
+  customlanguages enum('n','y') NOT NULL default 'n',
+  custompriorities enum('n','y') NOT NULL default 'n',
+  customparticipants enum('n','y') NOT NULL default 'n',
+  customsubscription enum('n','y') NOT NULL default 'n',
+  created int(14) NOT NULL default '0',
+  lastmodif int(14) NOT NULL default '0',
+  personal enum ('n', 'y') NOT NULL default 'n',
+  PRIMARY KEY  (calendarId)
+) TYPE=MyISAM ;
+# --------------------------------------------------------
+
+DROP TABLE IF EXISTS tiki_calendar_options;
+CREATE TABLE tiki_calendar_options (
+	calendarId int(14) NOT NULL default 0,
+	optionName varchar(120) NOT NULL default '',
+	value varchar(255),
+	PRIMARY KEY (calendarId,optionName)
+) TYPE=MyISAM ;
+# --------------------------------------------------------
+#
+# Table structure for table tiki_categories
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 04, 2003 at 09:47 PM
+#
+
+DROP TABLE IF EXISTS tiki_categories;
+CREATE TABLE tiki_categories (
+  categId int(12) NOT NULL auto_increment,
+  name varchar(100) default NULL,
+  description varchar(250) default NULL,
+  parentId int(12) default NULL,
+  hits int(8) default NULL,
+  PRIMARY KEY  (categId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_categorized_objects
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Dec 06, 2005 
+#
+
+DROP TABLE IF EXISTS tiki_objects;
+CREATE TABLE tiki_objects (
+  objectId int(12) NOT NULL auto_increment,
+  type varchar(50) default NULL,
+  itemId varchar(255) default NULL,
+  description text,
+  created int(14) default NULL,
+  name varchar(200) default NULL,
+  href varchar(200) default NULL,
+  hits int(8) default NULL,
+  PRIMARY KEY  (objectId),
+  KEY (type, objectId),
+  KEY (itemId, type)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+# Table structure for table `tiki_categorized_objects`
+#
+
+DROP TABLE IF EXISTS `tiki_categorized_objects`;
+CREATE TABLE `tiki_categorized_objects` (
+  `catObjectId` int(11) NOT NULL default '0',
+  PRIMARY KEY  (`catObjectId`)
+) TYPE=MyISAM ;
+
+
+#
+# Table structure for table tiki_category_objects
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 13, 2003 at 01:09 AM
+#
+
+DROP TABLE IF EXISTS tiki_category_objects;
+CREATE TABLE tiki_category_objects (
+  catObjectId int(12) NOT NULL default '0',
+  categId int(12) NOT NULL default '0',
+  PRIMARY KEY  (catObjectId,categId)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_category_sites
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 07, 2003 at 01:53 AM
+#
+
+DROP TABLE IF EXISTS tiki_object_ratings;
+CREATE TABLE tiki_object_ratings (
+  catObjectId int(12) NOT NULL default '0',
+  pollId int(12) NOT NULL default '0',
+  PRIMARY KEY  (catObjectId,pollId)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_category_sites
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 07, 2003 at 01:53 AM
+#
+
+DROP TABLE IF EXISTS tiki_category_sites;
+CREATE TABLE tiki_category_sites (
+  categId int(10) NOT NULL default '0',
+  siteId int(14) NOT NULL default '0',
+  PRIMARY KEY  (categId,siteId)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_chart_items
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_chart_items;
+CREATE TABLE tiki_chart_items (
+  itemId int(14) NOT NULL auto_increment,
+  title varchar(250) default NULL,
+  description text,
+  chartId int(14) NOT NULL default '0',
+  created int(14) default NULL,
+  URL varchar(250) default NULL,
+  votes int(14) default NULL,
+  points int(14) default NULL,
+  average decimal(4,2) default NULL,
+  PRIMARY KEY  (itemId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_charts
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 06, 2003 at 08:14 AM
+#
+
+DROP TABLE IF EXISTS tiki_charts;
+CREATE TABLE tiki_charts (
+  chartId int(14) NOT NULL auto_increment,
+  title varchar(250) default NULL,
+  description text,
+  hits int(14) default NULL,
+  singleItemVotes char(1) default NULL,
+  singleChartVotes char(1) default NULL,
+  suggestions char(1) default NULL,
+  autoValidate char(1) default NULL,
+  topN int(6) default NULL,
+  maxVoteValue int(4) default NULL,
+  frequency int(14) default NULL,
+  showAverage char(1) default NULL,
+  isActive char(1) default NULL,
+  showVotes char(1) default NULL,
+  useCookies char(1) default NULL,
+  lastChart int(14) default NULL,
+  voteAgainAfter int(14) default NULL,
+  created int(14) default NULL,
+  PRIMARY KEY  (chartId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_charts_rankings
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_charts_rankings;
+CREATE TABLE tiki_charts_rankings (
+  chartId int(14) NOT NULL default '0',
+  itemId int(14) NOT NULL default '0',
+  position int(14) NOT NULL default '0',
+  timestamp int(14) NOT NULL default '0',
+  lastPosition int(14) NOT NULL default '0',
+  period int(14) NOT NULL default '0',
+  rvotes int(14) NOT NULL default '0',
+  raverage decimal(4,2) NOT NULL default '0.00',
+  PRIMARY KEY  (chartId,itemId,period)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_charts_votes
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_charts_votes;
+CREATE TABLE tiki_charts_votes (
+  user varchar(200) NOT NULL default '',
+  itemId int(14) NOT NULL default '0',
+  timestamp int(14) default NULL,
+  chartId int(14) default NULL,
+  PRIMARY KEY  (user,itemId)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_chat_channels
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_chat_channels;
+CREATE TABLE tiki_chat_channels (
+  channelId int(8) NOT NULL auto_increment,
+  name varchar(30) default NULL,
+  description varchar(250) default NULL,
+  max_users int(8) default NULL,
+  mode char(1) default NULL,
+  moderator varchar(200) default NULL,
+  active char(1) default NULL,
+  refresh int(6) default NULL,
+  PRIMARY KEY  (channelId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_chat_messages
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_chat_messages;
+CREATE TABLE tiki_chat_messages (
+  messageId int(8) NOT NULL auto_increment,
+  channelId int(8) NOT NULL default '0',
+  data varchar(255) default NULL,
+  poster varchar(200) NOT NULL default 'anonymous',
+  timestamp int(14) default NULL,
+  PRIMARY KEY  (messageId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_chat_users
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_chat_users;
+CREATE TABLE tiki_chat_users (
+  nickname varchar(200) NOT NULL default '',
+  channelId int(8) NOT NULL default '0',
+  timestamp int(14) default NULL,
+  PRIMARY KEY  (nickname,channelId)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_comments
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 10:56 PM
+# Last check: Jul 11, 2003 at 01:52 AM
+#
+
+DROP TABLE IF EXISTS tiki_comments;
+CREATE TABLE tiki_comments (
+  threadId int(14) NOT NULL auto_increment,
+  object varchar(255) NOT NULL default '',
+  objectType varchar(32) NOT NULL default '',
+  parentId int(14) default NULL,
+  userName varchar(200) NOT NULL default '',
+  commentDate int(14) default NULL,
+  hits int(8) default NULL,
+  type char(1) default NULL,
+  points decimal(8,2) default NULL,
+  votes int(8) default NULL,
+  average decimal(8,4) default NULL,
+  title varchar(100) default NULL,
+  data text,
+  hash varchar(32) default NULL,
+  user_ip varchar(15) default NULL,
+  summary varchar(240) default NULL,
+  smiley varchar(80) default NULL,
+  message_id varchar(128) default NULL,
+  in_reply_to varchar(128) default NULL,
+  comment_rating tinyint(2) default NULL,  
+  PRIMARY KEY  (threadId),
+  UNIQUE KEY no_repeats (parentId, userName, title(40), commentDate, message_id(40), in_reply_to(40)),
+  KEY title (title),
+  KEY data (data(255)),
+  KEY object (object),
+  KEY hits (hits),
+  KEY tc_pi (parentId),
+  KEY threaded (message_id, in_reply_to, parentId),
+  FULLTEXT KEY ft (title,data)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_content
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_content;
+CREATE TABLE tiki_content (
+  contentId int(8) NOT NULL auto_increment,
+  description text,
+  PRIMARY KEY  (contentId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_content_templates
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 12:37 AM
+#
+
+DROP TABLE IF EXISTS tiki_content_templates;
+CREATE TABLE tiki_content_templates (
+  templateId int(10) NOT NULL auto_increment,
+  content longblob,
+  name varchar(200) default NULL,
+  created int(14) default NULL,
+  PRIMARY KEY  (templateId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_content_templates_sections
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 12:37 AM
+#
+
+DROP TABLE IF EXISTS tiki_content_templates_sections;
+CREATE TABLE tiki_content_templates_sections (
+  templateId int(10) NOT NULL default '0',
+  section varchar(250) NOT NULL default '',
+  PRIMARY KEY  (templateId,section)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_cookies
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 10, 2003 at 04:00 AM
+#
+
+DROP TABLE IF EXISTS tiki_cookies;
+CREATE TABLE tiki_cookies (
+  cookieId int(10) NOT NULL auto_increment,
+  cookie text,
+  PRIMARY KEY  (cookieId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_copyrights
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_copyrights;
+CREATE TABLE tiki_copyrights (
+  copyrightId int(12) NOT NULL auto_increment,
+  page varchar(200) default NULL,
+  title varchar(200) default NULL,
+  year int(11) default NULL,
+  authors varchar(200) default NULL,
+  copyright_order int(11) default NULL,
+  userName varchar(200) not null default '',
+  PRIMARY KEY  (copyrightId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_directory_categories
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 08:59 PM
+#
+
+DROP TABLE IF EXISTS tiki_directory_categories;
+CREATE TABLE tiki_directory_categories (
+  categId int(10) NOT NULL auto_increment,
+  parent int(10) default NULL,
+  name varchar(240) default NULL,
+  description text,
+  childrenType char(1) default NULL,
+  sites int(10) default NULL,
+  viewableChildren int(4) default NULL,
+  allowSites char(1) default NULL,
+  showCount char(1) default NULL,
+  editorGroup varchar(200) default NULL,
+  hits int(12) default NULL,
+  PRIMARY KEY  (categId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_directory_search
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_directory_search;
+CREATE TABLE tiki_directory_search (
+  term varchar(250) NOT NULL default '',
+  hits int(14) default NULL,
+  PRIMARY KEY  (term)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_directory_sites
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 07:32 PM
+#
+
+DROP TABLE IF EXISTS tiki_directory_sites;
+CREATE TABLE tiki_directory_sites (
+  siteId int(14) NOT NULL auto_increment,
+  name varchar(240) default NULL,
+  description text,
+  url varchar(255) default NULL,
+  country varchar(255) default NULL,
+  hits int(12) default NULL,
+  isValid char(1) default NULL,
+  created int(14) default NULL,
+  lastModif int(14) default NULL,
+  cache longblob,
+  cache_timestamp int(14) default NULL,
+  PRIMARY KEY  (siteId),
+  FULLTEXT KEY ft (name,description)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_drawings
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 08, 2003 at 05:02 AM
+#
+
+DROP TABLE IF EXISTS tiki_drawings;
+CREATE TABLE tiki_drawings (
+  drawId int(12) NOT NULL auto_increment,
+  version int(8) default NULL,
+  name varchar(250) default NULL,
+  filename_draw varchar(250) default NULL,
+  filename_pad varchar(250) default NULL,
+  timestamp int(14) default NULL,
+  user varchar(200) not null default '',
+  PRIMARY KEY  (drawId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_dsn
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_dsn;
+CREATE TABLE tiki_dsn (
+  dsnId int(12) NOT NULL auto_increment,
+  name varchar(200) NOT NULL default '',
+  dsn varchar(255) default NULL,
+  PRIMARY KEY  (dsnId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+
+DROP TABLE IF EXISTS tiki_dynamic_variables;
+CREATE TABLE tiki_dynamic_variables (
+  name varchar(40) NOT NULL,
+  data text,
+  PRIMARY KEY  (name)
+);
+
+#
+# Table structure for table tiki_eph
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 06, 2003 at 08:23 AM
+#
+
+DROP TABLE IF EXISTS tiki_eph;
+CREATE TABLE tiki_eph (
+  ephId int(12) NOT NULL auto_increment,
+  title varchar(250) default NULL,
+  isFile char(1) default NULL,
+  filename varchar(250) default NULL,
+  filetype varchar(250) default NULL,
+  filesize varchar(250) default NULL,
+  data longblob,
+  textdata longblob,
+  publish int(14) default NULL,
+  hits int(10) default NULL,
+  PRIMARY KEY  (ephId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_extwiki
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_extwiki;
+CREATE TABLE tiki_extwiki (
+  extwikiId int(12) NOT NULL auto_increment,
+  name varchar(200) NOT NULL default '',
+  extwiki varchar(255) default NULL,
+  PRIMARY KEY  (extwikiId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_faq_questions
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+# Last check: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_faq_questions;
+CREATE TABLE tiki_faq_questions (
+  questionId int(10) NOT NULL auto_increment,
+  faqId int(10) default NULL,
+  position int(4) default NULL,
+  question text,
+  answer text,
+  PRIMARY KEY  (questionId),
+  KEY faqId (faqId),
+  KEY question (question(255)),
+  KEY answer (answer(255)),
+  FULLTEXT KEY ft (question,answer)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_faqs
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 09:09 PM
+# Last check: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_faqs;
+CREATE TABLE tiki_faqs (
+  faqId int(10) NOT NULL auto_increment,
+  title varchar(200) default NULL,
+  description text,
+  created int(14) default NULL,
+  questions int(5) default NULL,
+  hits int(8) default NULL,
+  canSuggest char(1) default NULL,
+  PRIMARY KEY  (faqId),
+  KEY title (title),
+  KEY description (description(255)),
+  KEY hits (hits),
+  FULLTEXT KEY ft (title,description)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_featured_links
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 11:08 PM
+#
+
+DROP TABLE IF EXISTS tiki_featured_links;
+CREATE TABLE tiki_featured_links (
+  url varchar(200) NOT NULL default '',
+  title varchar(200) default NULL,
+  description text,
+  hits int(8) default NULL,
+  position int(6) default NULL,
+  type char(1) default NULL,
+  PRIMARY KEY  (url)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+# Table structure for table tiki_file_galleries
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 13, 2003 at 01:13 AM
+#
+
+DROP TABLE IF EXISTS tiki_file_galleries;
+CREATE TABLE tiki_file_galleries (
+  galleryId int(14) NOT NULL auto_increment,
+  name varchar(80) NOT NULL default '',
+  type varchar(20) NOT NULL default 'default',
+  description text,
+  created int(14) default NULL,
+  visible char(1) default NULL,
+  lastModif int(14) default NULL,
+  user varchar(200) NOT NULL default '',
+  hits int(14) default NULL,
+  votes int(8) default NULL,
+  points decimal(8,2) default NULL,
+  maxRows int(10) default NULL,
+  public char(1) default NULL,
+  show_id char(1) default NULL,
+  show_icon char(1) default NULL,
+  show_name char(1) default NULL,
+  show_size char(1) default NULL,
+  show_description char(1) default NULL,
+  max_desc int(8) default NULL,
+  show_created char(1) default NULL,
+  show_dl char(1) default NULL,
+  parentId int(14) NOT NULL default -1,
+  lockable char(1) default 'n',
+  show_lockedby char(1) default NULL,
+  archives int(4) default -1,
+  sort_mode char(20) default NULL,
+  show_modified char(1) default NULL,
+  PRIMARY KEY  (galleryId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_files
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Nov 02, 2004 at 05:59 PM
+# Last check: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_files;
+CREATE TABLE tiki_files (
+  fileId int(14) NOT NULL auto_increment,
+  galleryId int(14) NOT NULL default '0',
+  name varchar(200) NOT NULL default '',
+  description text,
+  created int(14) default NULL,
+  filename varchar(80) default NULL,
+  filesize int(14) default NULL,
+  filetype varchar(250) default NULL,
+  data longblob,
+  user varchar(200) not null default '',
+  author varchar(40) default NULL,
+  downloads int(14) default NULL,
+  votes int(8) default NULL,
+  points decimal(8,2) default NULL,
+  path varchar(255) default NULL,
+  reference_url varchar(250) default NULL,
+  is_reference char(1) default NULL,
+  hash varchar(32) default NULL,
+  search_data longtext,
+  lastModif integer(14) DEFAULT NULL,
+  lastModifUser varchar(200) DEFAULT NULL,
+  lockedby varchar(200) NOT NULL default '',
+  comment varchar(200) default NULL,
+  archiveId int(14) default 0,
+  PRIMARY KEY  (fileId),
+  KEY name (name),
+  KEY description (description(255)),
+  KEY downloads (downloads),
+  KEY created (created),
+  KEY archiveId (archiveId),
+  KEY galleryId (galleryId),
+  FULLTEXT KEY ft (name,description,search_data)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_forum_attachments
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_forum_attachments;
+CREATE TABLE tiki_forum_attachments (
+  attId int(14) NOT NULL auto_increment,
+  threadId int(14) NOT NULL default '0',
+  qId int(14) NOT NULL default '0',
+  forumId int(14) default NULL,
+  filename varchar(250) default NULL,
+  filetype varchar(250) default NULL,
+  filesize int(12) default NULL,
+  data longblob,
+  dir varchar(200) default NULL,
+  created int(14) default NULL,
+  path varchar(250) default NULL,
+  PRIMARY KEY  (attId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_forum_reads
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 07:17 PM
+#
+
+DROP TABLE IF EXISTS tiki_forum_reads;
+CREATE TABLE tiki_forum_reads (
+  user varchar(200) NOT NULL default '',
+  threadId int(14) NOT NULL default '0',
+  forumId int(14) default NULL,
+  timestamp int(14) default NULL,
+  PRIMARY KEY  (user,threadId)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_forums
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 11:14 PM
+#
+
+DROP TABLE IF EXISTS tiki_forums;
+CREATE TABLE tiki_forums (
+  forumId int(8) NOT NULL auto_increment,
+  name varchar(40) default NULL,
+  description text,
+  created int(14) default NULL,
+  lastPost int(14) default NULL,
+  threads int(8) default NULL,
+  comments int(8) default NULL,
+  controlFlood char(1) default NULL,
+  floodInterval int(8) default NULL,
+  moderator varchar(200) default NULL,
+  hits int(8) default NULL,
+  mail varchar(200) default NULL,
+  useMail char(1) default NULL,
+  section varchar(200) default NULL,
+  usePruneUnreplied char(1) default NULL,
+  pruneUnrepliedAge int(8) default NULL,
+  usePruneOld char(1) default NULL,
+  pruneMaxAge int(8) default NULL,
+  topicsPerPage int(6) default NULL,
+  topicOrdering varchar(100) default NULL,
+  threadOrdering varchar(100) default NULL,
+  att varchar(80) default NULL,
+  att_store varchar(4) default NULL,
+  att_store_dir varchar(250) default NULL,
+  att_max_size int(12) default NULL,
+  ui_level char(1) default NULL,
+  forum_password varchar(32) default NULL,
+  forum_use_password char(1) default NULL,
+  moderator_group varchar(200) default NULL,
+  approval_type varchar(20) default NULL,
+  outbound_address varchar(250) default NULL,
+  outbound_mails_for_inbound_mails char(1) default NULL,
+  outbound_mails_reply_link char(1) default NULL,
+  outbound_from varchar(250) default NULL,
+  inbound_pop_server varchar(250) default NULL,
+  inbound_pop_port int(4) default NULL,
+  inbound_pop_user varchar(200) default NULL,
+  inbound_pop_password varchar(80) default NULL,
+  topic_smileys char(1) default NULL,
+  ui_avatar char(1) default NULL,
+  ui_flag char(1) default NULL,
+  ui_posts char(1) default NULL,
+  ui_email char(1) default NULL,
+  ui_online char(1) default NULL,
+  topic_summary char(1) default NULL,
+  show_description char(1) default NULL,
+  topics_list_replies char(1) default NULL,
+  topics_list_reads char(1) default NULL,
+  topics_list_pts char(1) default NULL,
+  topics_list_lastpost char(1) default NULL,
+  topics_list_author char(1) default NULL,
+  vote_threads char(1) default NULL,
+  forum_last_n int(2) default 0,
+  mandatory_contribution char(1) default NULL,
+  PRIMARY KEY  (forumId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_forums_queue
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_forums_queue;
+CREATE TABLE tiki_forums_queue (
+  qId int(14) NOT NULL auto_increment,
+  object varchar(32) default NULL,
+  parentId int(14) default NULL,
+  forumId int(14) default NULL,
+  timestamp int(14) default NULL,
+  user varchar(200) not null default '',
+  title varchar(240) default NULL,
+  data text,
+  type varchar(60) default NULL,
+  hash varchar(32) default NULL,
+  topic_smiley varchar(80) default NULL,
+  topic_title varchar(240) default NULL,
+  summary varchar(240) default NULL,
+  PRIMARY KEY  (qId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_forums_reported
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_forums_reported;
+CREATE TABLE tiki_forums_reported (
+  threadId int(12) NOT NULL default '0',
+  forumId int(12) NOT NULL default '0',
+  parentId int(12) NOT NULL default '0',
+  user varchar(200) NOT NULL default '',
+  timestamp int(14) default NULL,
+  reason varchar(250) default NULL,
+  PRIMARY KEY  (threadId)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_galleries
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Sep 18, 2004 at 11:56 PM
+# Last check: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_galleries;
+CREATE TABLE tiki_galleries (
+  galleryId int(14) NOT NULL auto_increment,
+  name varchar(80) NOT NULL default '',
+  description text,
+  created int(14) default NULL,
+  lastModif int(14) default NULL,
+  visible char(1) default NULL,
+  geographic char(1) default NULL,
+  theme varchar(60) default NULL,
+  user varchar(200) NOT NULL default '',
+  hits int(14) default NULL,
+  maxRows int(10) default NULL,
+  rowImages int(10) default NULL,
+  thumbSizeX int(10) default NULL,
+  thumbSizeY int(10) default NULL,
+  public char(1) default NULL,
+  sortorder varchar(20) NOT NULL default 'created',
+  sortdirection varchar(4) NOT NULL default 'desc',
+  galleryimage varchar(20) NOT NULL default 'first',
+  parentgallery int(14) NOT NULL default -1,
+  showname char(1) NOT NULL default 'y',
+  showimageid char(1) NOT NULL default 'n',
+  showdescription char(1) NOT NULL default 'n',
+  showcreated char(1) NOT NULL default 'n',
+  showuser char(1) NOT NULL default 'n',
+  showhits char(1) NOT NULL default 'y',
+  showxysize char(1) NOT NULL default 'y',
+  showfilesize char(1) NOT NULL default 'n',
+  showfilename char(1) NOT NULL default 'n',
+  defaultscale varchar(10) NOT NULL DEFAULT 'o',
+  PRIMARY KEY  (galleryId),
+  KEY name (name),
+  KEY description (description(255)),
+  KEY hits (hits),
+  FULLTEXT KEY ft (name,description)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_galleries_scales
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_galleries_scales;
+CREATE TABLE tiki_galleries_scales (
+  galleryId int(14) NOT NULL default '0',
+  scale int(11) NOT NULL default '0',
+  PRIMARY KEY  (galleryId,scale)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_games
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 05, 2003 at 08:23 PM
+#
+
+DROP TABLE IF EXISTS tiki_games;
+CREATE TABLE tiki_games (
+  gameName varchar(200) NOT NULL default '',
+  hits int(8) default NULL,
+  votes int(8) default NULL,
+  points int(8) default NULL,
+  PRIMARY KEY  (gameName)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_group_inclusion
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 05, 2003 at 02:03 AM
+#
+
+DROP TABLE IF EXISTS tiki_group_inclusion;
+CREATE TABLE tiki_group_inclusion (
+  groupName varchar(255) NOT NULL default '',
+  includeGroup varchar(255) NOT NULL default '',
+  PRIMARY KEY  (groupName(30),includeGroup(30))
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_history
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Mar 30, 2005 at 10:21 PM
+#
+
+DROP TABLE IF EXISTS tiki_history;
+CREATE TABLE tiki_history (
+  historyId int(12) NOT NULL auto_increment,
+  pageName varchar(160) NOT NULL default '',
+  version int(8) NOT NULL default '0',
+  version_minor int(8) NOT NULL default '0',
+  lastModif int(14) default NULL,
+  description varchar(200) default NULL,
+  user varchar(200) not null default '',
+  ip varchar(15) default NULL,
+  comment varchar(200) default NULL,
+  data longblob,
+  type varchar(50) default NULL,
+  PRIMARY KEY  (pageName,version),
+  KEY(historyId)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_hotwords
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 10, 2003 at 11:04 PM
+#
+
+DROP TABLE IF EXISTS tiki_hotwords;
+CREATE TABLE tiki_hotwords (
+  word varchar(40) NOT NULL default '',
+  url varchar(255) NOT NULL default '',
+  PRIMARY KEY  (word)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_html_pages
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_html_pages;
+CREATE TABLE tiki_html_pages (
+  pageName varchar(200) NOT NULL default '',
+  content longblob,
+  refresh int(10) default NULL,
+  type char(1) default NULL,
+  created int(14) default NULL,
+  PRIMARY KEY  (pageName)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_html_pages_dynamic_zones
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_html_pages_dynamic_zones;
+CREATE TABLE tiki_html_pages_dynamic_zones (
+  pageName varchar(40) NOT NULL default '',
+  zone varchar(80) NOT NULL default '',
+  type char(2) default NULL,
+  content text,
+  PRIMARY KEY  (pageName,zone)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_images
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Sep 18, 2004 at 08:29 PM
+# Last check: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_images;
+CREATE TABLE tiki_images (
+  imageId int(14) NOT NULL auto_increment,
+  galleryId int(14) NOT NULL default '0',
+  name varchar(200) NOT NULL default '',
+  description text,
+  lon float default NULL,
+  lat float default NULL,
+  created int(14) default NULL,
+  user varchar(200) not null default '',
+  hits int(14) default NULL,
+  path varchar(255) default NULL,
+  PRIMARY KEY  (imageId),
+  KEY name (name),
+  KEY description (description(255)),
+  KEY hits (hits),
+  KEY ti_gId (galleryId),
+  KEY ti_cr (created),
+  KEY ti_us (user),
+  FULLTEXT KEY ft (name,description)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_images_data
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 12:49 PM
+# Last check: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_images_data;
+CREATE TABLE tiki_images_data (
+  imageId int(14) NOT NULL default '0',
+  xsize int(8) NOT NULL default '0',
+  ysize int(8) NOT NULL default '0',
+  type char(1) NOT NULL default '',
+  filesize int(14) default NULL,
+  filetype varchar(80) default NULL,
+  filename varchar(80) default NULL,
+  data longblob,
+  etag varchar(32) default NULL,
+  PRIMARY KEY  (imageId,xsize,ysize,type),
+  KEY t_i_d_it (imageId,type)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_language
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_language;
+CREATE TABLE tiki_language (
+  source tinyblob NOT NULL,
+  lang char(16) NOT NULL default '',
+  tran tinyblob,
+  PRIMARY KEY  (source(255),lang)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_languages
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_languages;
+CREATE TABLE tiki_languages (
+  lang char(16) NOT NULL default '',
+  language varchar(255) default NULL,
+  PRIMARY KEY  (lang)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+INSERT INTO tiki_languages(lang, language) VALUES('en','English');
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_link_cache
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 06:06 PM
+#
+
+DROP TABLE IF EXISTS tiki_link_cache;
+CREATE TABLE tiki_link_cache (
+  cacheId int(14) NOT NULL auto_increment,
+  url varchar(250) default NULL,
+  data longblob,
+  refresh int(14) default NULL,
+  PRIMARY KEY  (cacheId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+CREATE INDEX urlindex ON tiki_link_cache (url(250));
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_links
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 11:39 PM
+#
+
+DROP TABLE IF EXISTS tiki_links;
+CREATE TABLE tiki_links (
+  fromPage varchar(160) NOT NULL default '',
+  toPage varchar(160) NOT NULL default '',
+  PRIMARY KEY  (fromPage,toPage),
+  KEY toPage (toPage)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_live_support_events
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_live_support_events;
+CREATE TABLE tiki_live_support_events (
+  eventId int(14) NOT NULL auto_increment,
+  reqId varchar(32) NOT NULL default '',
+  type varchar(40) default NULL,
+  seqId int(14) default NULL,
+  senderId varchar(32) default NULL,
+  data text,
+  timestamp int(14) default NULL,
+  PRIMARY KEY  (eventId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_live_support_message_comments
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_live_support_message_comments;
+CREATE TABLE tiki_live_support_message_comments (
+  cId int(12) NOT NULL auto_increment,
+  msgId int(12) default NULL,
+  data text,
+  timestamp int(14) default NULL,
+  PRIMARY KEY  (cId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_live_support_messages
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_live_support_messages;
+CREATE TABLE tiki_live_support_messages (
+  msgId int(12) NOT NULL auto_increment,
+  data text,
+  timestamp int(14) default NULL,
+  user varchar(200) not null default '',
+  username varchar(200) default NULL,
+  priority int(2) default NULL,
+  status char(1) default NULL,
+  assigned_to varchar(200) default NULL,
+  resolution varchar(100) default NULL,
+  title varchar(200) default NULL,
+  module int(4) default NULL,
+  email varchar(250) default NULL,
+  PRIMARY KEY  (msgId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_live_support_modules
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_live_support_modules;
+CREATE TABLE tiki_live_support_modules (
+  modId int(4) NOT NULL auto_increment,
+  name varchar(90) default NULL,
+  PRIMARY KEY  (modId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+INSERT INTO tiki_live_support_modules(name) VALUES('wiki');
+INSERT INTO tiki_live_support_modules(name) VALUES('forums');
+INSERT INTO tiki_live_support_modules(name) VALUES('image galleries');
+INSERT INTO tiki_live_support_modules(name) VALUES('file galleries');
+INSERT INTO tiki_live_support_modules(name) VALUES('directory');
+INSERT INTO tiki_live_support_modules(name) VALUES('workflow');
+INSERT INTO tiki_live_support_modules(name) VALUES('charts');
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_live_support_operators
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_live_support_operators;
+CREATE TABLE tiki_live_support_operators (
+  user varchar(200) NOT NULL default '',
+  accepted_requests int(10) default NULL,
+  status varchar(20) default NULL,
+  longest_chat int(10) default NULL,
+  shortest_chat int(10) default NULL,
+  average_chat int(10) default NULL,
+  last_chat int(14) default NULL,
+  time_online int(10) default NULL,
+  votes int(10) default NULL,
+  points int(10) default NULL,
+  status_since int(14) default NULL,
+  PRIMARY KEY  (user)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_live_support_requests
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_live_support_requests;
+CREATE TABLE tiki_live_support_requests (
+  reqId varchar(32) NOT NULL default '',
+  user varchar(200) NOT NULL default '',
+  tiki_user varchar(200) default NULL,
+  email varchar(200) default NULL,
+  operator varchar(200) default NULL,
+  operator_id varchar(32) default NULL,
+  user_id varchar(32) default NULL,
+  reason text,
+  req_timestamp int(14) default NULL,
+  timestamp int(14) default NULL,
+  status varchar(40) default NULL,
+  resolution varchar(40) default NULL,
+  chat_started int(14) default NULL,
+  chat_ended int(14) default NULL,
+  PRIMARY KEY  (reqId)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_logs
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_logs;
+CREATE TABLE tiki_logs (
+  logId int(8) NOT NULL auto_increment,
+  logtype varchar(20) NOT NULL,
+  logmessage text NOT NULL,
+  loguser varchar(40) NOT NULL,
+  logip varchar(200),
+  logclient text NOT NULL,
+  logtime int(14) NOT NULL,
+  PRIMARY KEY  (logId),
+  KEY logtype (logtype)
+) TYPE=MyISAM;
+
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_mail_events
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 11, 2003 at 05:28 AM
+#
+
+DROP TABLE IF EXISTS tiki_mail_events;
+CREATE TABLE tiki_mail_events (
+  event varchar(200) default NULL,
+  object varchar(200) default NULL,
+  email varchar(200) default NULL
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_mailin_accounts
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jun 17, 2004 at 03:06 PM EST
+#
+
+DROP TABLE IF EXISTS tiki_mailin_accounts;
+CREATE TABLE tiki_mailin_accounts (
+  accountId int(12) NOT NULL auto_increment,
+  user varchar(200) NOT NULL default '',
+  account varchar(50) NOT NULL default '',
+  pop varchar(255) default NULL,
+  port int(4) default NULL,
+  username varchar(100) default NULL,
+  pass varchar(100) default NULL,
+  active char(1) default NULL,
+  type varchar(40) default NULL,
+  smtp varchar(255) default NULL,
+  useAuth char(1) default NULL,
+  smtpPort int(4) default NULL,
+  anonymous char(1) NOT NULL default 'y',
+  attachments char(1) NOT NULL default 'n',
+  article_topicId int(4) default NULL,
+  article_type varchar(50) default NULL,
+  discard_after varchar(255) default NULL,
+  PRIMARY KEY  (accountId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_menu_languages
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_menu_languages;
+CREATE TABLE tiki_menu_languages (
+  menuId int(8) NOT NULL auto_increment,
+  language char(16) NOT NULL default '',
+  PRIMARY KEY  (menuId,language)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_menu_options
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Nov 21, 2003 at 07:05 AM
+#
+
+DROP TABLE IF EXISTS tiki_menu_options;
+CREATE TABLE tiki_menu_options (
+  optionId int(8) NOT NULL auto_increment,
+  menuId int(8) default NULL,
+  type char(1) default NULL,
+  name varchar(200) default NULL,
+  url varchar(255) default NULL,
+  position int(4) default NULL,
+  section varchar(255) default NULL,
+  perm varchar(255) default NULL,
+  groupname varchar(255) default NULL,
+  PRIMARY KEY  (optionId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Home','tiki-index.php',10,'','','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Chat','tiki-chat.php',15,'feature_chat','tiki_p_chat','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Contact us','tiki-contact.php',20,'feature_contact','','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Stats','tiki-stats.php',23,'feature_stats','tiki_p_view_stats','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Categories','tiki-browse_categories.php',25,'feature_categories','tiki_p_view_categories','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Freetags','tiki-browse_freetags.php',27,'feature_freetags','tiki_p_view_freetags','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Games','tiki-list_games.php',30,'feature_games','tiki_p_play_games','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Calendar','tiki-calendar.php',35,'feature_calendar','tiki_p_view_calendar','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Tiki Calendar','tiki-action_calendar.php',36,'feature_action_calendar','tiki_p_view_tiki_calendar','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Mobile','tiki-mobile.php',37,'feature_mobile','','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','(debug)','javascript:toggle("debugconsole")',40,'feature_debug_console','tiki_p_admin','');
+
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','MyTiki','',50,'','','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','MyTiki home','tiki-my_tiki.php',51,'','','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Preferences','tiki-user_preferences.php',55,'feature_userPreferences','','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Messages','messu-mailbox.php',60,'feature_messages','tiki_p_messages','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Tasks','tiki-user_tasks.php',65,'feature_tasks','tiki_p_tasks','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Bookmarks','tiki-user_bookmarks.php',70,'feature_user_bookmarks','tiki_p_create_bookmarks','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Modules','tiki-user_assigned_modules.php',75,'user_assigned_modules','tiki_p_configure_modules','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Newsreader','tiki-newsreader_servers.php',80,'feature_newsreader','tiki_p_newsreader','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Webmail','tiki-webmail.php',85,'feature_webmail','tiki_p_use_webmail','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Contacts','tiki-contacts.php',87,'feature_contacts','','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Notepad','tiki-notepad_list.php',90,'feature_notepad','tiki_p_notepad','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','My files','tiki-userfiles.php',95,'feature_userfiles','tiki_p_userfiles','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','User menu','tiki-usermenu.php',100,'feature_usermenu','','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Mini calendar','tiki-minical.php',105,'feature_minical','','Registered');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','My watches','tiki-user_watches.php',110,'feature_user_watches','','Registered');
+
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Workflow','',150,'feature_workflow','tiki_p_use_workflow','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin processes','tiki-g-admin_processes.php',155,'feature_workflow','tiki_p_admin_workflow','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Monitor processes','tiki-g-monitor_processes.php',160,'feature_workflow','tiki_p_admin_workflow','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Monitor activities','tiki-g-monitor_activities.php',165,'feature_workflow','tiki_p_admin_workflow','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Monitor instances','tiki-g-monitor_instances.php',170,'feature_workflow','tiki_p_admin_workflow','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','User processes','tiki-g-user_processes.php',175,'feature_workflow','tiki_p_use_workflow','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','User activities','tiki-g-user_activities.php',180,'feature_workflow','tiki_p_use_workflow','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','User instances','tiki-g-user_instances.php',185,'feature_workflow','tiki_p_use_workflow','');
+
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Community','','187','feature_friends','tiki_p_list_users','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','User list','tiki-list_users.php','188','feature_friends','tiki_p_list_users','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Friendship Network','tiki-friends.php','189','feature_friends','','');
+
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Wiki','',200,'feature_wiki','tiki_p_view','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Wiki Home','tiki-index.php',202,'feature_wiki','tiki_p_view','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Last Changes','tiki-lastchanges.php',205,'feature_wiki,feature_lastChanges','tiki_p_view','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Dump','dump/new.tar',210,'feature_wiki,feature_dump','tiki_p_view','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Rankings','tiki-wiki_rankings.php',215,'feature_wiki,feature_wiki_rankings','tiki_p_view','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List pages','tiki-listpages.php',220,'feature_wiki,feature_listPages','tiki_p_view','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Orphan pages','tiki-orphan_pages.php',225,'feature_wiki,feature_listPages','tiki_p_view','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Sandbox','tiki-editpage.php?page=sandbox',230,'feature_wiki,feature_sandbox','tiki_p_view','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Print','tiki-print_pages.php',235,'feature_wiki,feature_wiki_multiprint','tiki_p_view','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Send pages','tiki-send_objects.php',240,'feature_wiki,feature_comm','tiki_p_view,tiki_p_send_pages','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Received pages','tiki-received_pages.php',245,'feature_wiki,feature_comm','tiki_p_view,tiki_p_admin_received_pages','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Structures','tiki-admin_structures.php',250,'feature_wiki','tiki_p_edit_structures','');
+
+
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Image Galleries','',300,'feature_galleries','tiki_p_view_image_gallery','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Galleries','tiki-galleries.php',305,'feature_galleries','tiki_p_view_image_gallery','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Rankings','tiki-galleries_rankings.php',310,'feature_galleries,feature_gal_rankings','tiki_p_view_image_gallery','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Upload image','tiki-upload_image.php',315,'feature_galleries','tiki_p_upload_images','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Directory batch','tiki-batch_upload.php',318,'feature_galleries,feature_gal_batch','tiki_p_batch_upload','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','System gallery','tiki-list_gallery.php?galleryId=0',320,'feature_galleries','tiki_p_admin_galleries','');
+
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Articles','',350,'feature_articles','tiki_p_read_article','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Articles home','tiki-view_articles.php',355,'feature_articles','tiki_p_read_article','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List articles','tiki-list_articles.php',360,'feature_articles','tiki_p_read_article','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Rankings','tiki-cms_rankings.php',365,'feature_articles,feature_cms_rankings','tiki_p_read_article','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Submit article','tiki-edit_submission.php',370,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_submit_article','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','View submissions','tiki-list_submissions.php',375,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_submit_article','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','View submissions','tiki-list_submissions.php',375,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_approve_submission','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','View submissions','tiki-list_submissions.php',375,'feature_articles,feature_submissions','tiki_p_read_article,tiki_p_remove_submission','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Edit article','tiki-edit_article.php',380,'feature_articles','tiki_p_read_article,tiki_p_edit_article','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Send articles','tiki-send_objects.php',385,'feature_articles,feature_comm','tiki_p_read_article,tiki_p_send_articles','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Received articles','tiki-received_articles.php',385,'feature_articles,feature_comm','tiki_p_read_article,tiki_p_admin_received_articles','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin topics','tiki-admin_topics.php',390,'feature_articles','tiki_p_read_article,tiki_p_admin_cms','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin types','tiki-article_types.php',395,'feature_articles','tiki_p_read_article,tiki_p_admin_cms','');
+
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Blogs','',450,'feature_blogs','tiki_p_read_blog','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List blogs','tiki-list_blogs.php',455,'feature_blogs','tiki_p_read_blog','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Rankings','tiki-blog_rankings.php',460,'feature_blogs,feature_blog_rankings','tiki_p_read_blog','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Create/Edit blog','tiki-edit_blog.php',465,'feature_blogs','tiki_p_read_blog,tiki_p_create_blogs','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Post','tiki-blog_post.php',470,'feature_blogs','tiki_p_read_blog,tiki_p_blog_post','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin posts','tiki-list_posts.php',475,'feature_blogs','tiki_p_read_blog,tiki_p_blog_admin','');
+
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Forums','',500,'feature_forums','tiki_p_forum_read','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List forums','tiki-forums.php',505,'feature_forums','tiki_p_forum_read','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Rankings','tiki-forum_rankings.php',510,'feature_forums,feature_forum_rankings','tiki_p_forum_read','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin forums','tiki-admin_forums.php',515,'feature_forums','tiki_p_forum_read,tiki_p_admin_forum','');
+
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Directory','',550,'feature_directory','tiki_p_view_directory','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Submit a new link','tiki-directory_add_site.php',555,'feature_directory','tiki_p_submit_link','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Browse directory','tiki-directory_browse.php',560,'feature_directory','tiki_p_view_directory','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_admin_directory_cats','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_admin_directory_sites','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin directory','tiki-directory_admin.php',565,'feature_directory','tiki_p_view_directory,tiki_p_validate_links','');
+
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','File Galleries','',600,'feature_file_galleries','tiki_p_view_file_gallery','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List galleries','tiki-file_galleries.php',605,'feature_file_galleries','tiki_p_view_file_gallery','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Rankings','tiki-file_galleries_rankings.php',610,'feature_file_galleries,feature_file_galleries_rankings','tiki_p_view_file_gallery','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Upload file','tiki-upload_file.php',615,'feature_file_galleries','tiki_p_view_file_gallery,tiki_p_upload_files','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Directory batch','tiki-batch_upload_files.php',617,'feature_file_galleries_batch','tiki_p_batch_upload_file_dir','');
+
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','FAQs','',650,'feature_faqs','tiki_p_view_faqs','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List FAQs','tiki-list_faqs.php',665,'feature_faqs','tiki_p_view_faqs','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin FAQs','tiki-list_faqs.php',660,'feature_faqs','tiki_p_admin_faqs','');
+
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Maps','',700,'feature_maps','tiki_p_map_view','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','View Maps','tiki-map.phtml',703,'feature_maps','tiki_p_map_view','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Mapfiles','tiki-map_edit.php',705,'feature_maps','tiki_p_map_view','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Layer management','tiki-map_upload.php',710,'feature_maps','tiki_p_map_edit','');
+
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Quizzes','',750,'feature_quizzes','','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List quizzes','tiki-list_quizzes.php',755,'feature_quizzes','','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Quiz stats','tiki-quiz_stats.php',760,'feature_quizzes','tiki_p_view_quiz_stats','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin quiz','tiki-edit_quiz.php',765,'feature_quizzes','tiki_p_admin_quizzes','');
+
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','TikiSheet','',780,'feature_sheet','tiki_p_view_sheet','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List TikiSheets','tiki-sheets.php',782,'feature_sheet','tiki_p_view_sheet','');
+
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Trackers','',800,'feature_trackers','tiki_p_view_trackers','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List trackers','tiki-list_trackers.php',805,'feature_trackers','tiki_p_view_trackers','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin trackers','tiki-admin_trackers.php',810,'feature_trackers','tiki_p_admin_trackers','');
+
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Surveys','',850,'feature_surveys','','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','List surveys','tiki-list_surveys.php',855,'feature_surveys','','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Stats','tiki-survey_stats.php',860,'feature_surveys','tiki_p_view_survey_stats','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin surveys','tiki-admin_surveys.php',865,'feature_surveys','tiki_p_admin_surveys','');
+
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Newsletters','',900,'feature_newsletters','tiki_p_subscribe_newsletters','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Newsletters','',900,'feature_newsletters','tiki_p_send_newsletters','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Newsletters','',900,'feature_newsletters','tiki_p_admin_newsletters','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Newsletters','tiki-newsletters.php',903,'feature_newsletters','tiki_p_subscribe_newsletters','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Newsletters','tiki-newsletters.php',903,'feature_newsletters','tiki_p_send_newsletters','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Newsletters','tiki-newsletters.php',903,'feature_newsletters','tiki_p_admin_newsletters','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Send newsletters','tiki-send_newsletters.php',905,'feature_newsletters','tiki_p_send_newsletters','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin newsletters','tiki-admin_newsletters.php',910,'feature_newsletters','tiki_p_admin_newsletters','');
+
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Ephemerides','',950,'feature_eph','','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Ephemerides','tiki-eph.php',953,'feature_eph','','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin ephemerides','tiki-eph_admin.php',955,'feature_eph','tiki_p_eph_admin','');
+
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'s','Charts','',1000,'feature_charts','','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'','Charts','tiki-charts.php',1003,'feature_charts','','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin charts','tiki-admin_charts.php',1005,'feature_charts','tiki_p_admin_charts','');
+
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_admin_chat','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_admin_categories','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_admin_banners','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_edit_templates','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_edit_cookies','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_admin_dynamic','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_admin_mailin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_edit_content_templates','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_edit_html_pages','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_view_referer_stats','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_admin_drawings','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_admin_shoutbox','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_live_support_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','user_is_operator','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'feature_integrator','tiki_p_admin_integrator','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'r','Admin','',1050,'','tiki_p_admin_contribution','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin home','tiki-admin.php',1051,'','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Live support','tiki-live_support_admin.php',1055,'feature_live_support','tiki_p_live_support_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Live support','tiki-live_support_admin.php',1055,'feature_live_support','user_is_operator','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Banning','tiki-admin_banning.php',1060,'feature_banning','tiki_p_admin_banning','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Calendar','tiki-admin_calendars.php',1065,'feature_calendar','tiki_p_admin_calendar','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Users','tiki-adminusers.php',1070,'','tiki_p_admin_users','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Groups','tiki-admingroups.php',1075,'','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Cache','tiki-list_cache.php',1080,'','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Modules','tiki-admin_modules.php',1085,'','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Links','tiki-admin_links.php',1090,'feature_featuredLinks','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Hotwords','tiki-admin_hotwords.php',1095,'feature_hotwords','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','RSS modules','tiki-admin_rssmodules.php',1100,'','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Menus','tiki-admin_menus.php',1105,'','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Polls','tiki-admin_polls.php',1110,'feature_polls','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Mail notifications','tiki-admin_notifications.php',1120,'','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Search stats','tiki-search_stats.php',1125,'feature_search','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Theme control','tiki-theme_control.php',1130,'feature_theme_control','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','QuickTags','tiki-admin_quicktags.php',1135,'','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Chat','tiki-admin_chat.php',1140,'feature_chat','tiki_p_admin_chat','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Categories','tiki-admin_categories.php',1145,'feature_categories','tiki_p_admin_categories','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Banners','tiki-list_banners.php',1150,'feature_banners','tiki_p_admin_banners','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Edit templates','tiki-edit_templates.php',1155,'feature_edit_templates','tiki_p_edit_templates','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Drawings','tiki-admin_drawings.php',1160,'feature_drawings','tiki_p_admin_drawings','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Dynamic content','tiki-list_contents.php',1165,'feature_dynamic_content','tiki_p_admin_dynamic','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Cookies','tiki-admin_cookies.php',1170,'','tiki_p_edit_cookies','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Mail-in','tiki-admin_mailin.php',1175,'feature_mailin','tiki_p_admin_mailin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Content templates','tiki-admin_content_templates.php',1180,'','tiki_p_edit_content_templates','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','HTML pages','tiki-admin_html_pages.php',1185,'feature_html_pages','tiki_p_edit_html_pages','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Shoutbox','tiki-shoutbox.php',1190,'feature_shoutbox','tiki_p_admin_shoutbox','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Shoutbox Words','tiki-admin_shoutbox_words.php',1191,'feature_shoutbox','tiki_p_admin_shoutbox','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Referer stats','tiki-referer_stats.php',1195,'feature_referer_stats','tiki_p_view_referer_stats','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Edit languages','tiki-edit_languages.php',1200,'','tiki_p_edit_languages,lang_use_db','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Integrator','tiki-admin_integrator.php',1205,'feature_integrator','tiki_p_admin_integrator','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','phpinfo','tiki-phpinfo.php',1215,'','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','DSN','tiki-admin_dsn.php',1220,'','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','External wikis','tiki-admin_external_wikis.php',1225,'','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','System Admin','tiki-admin_system.php',1230,'','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Score','tiki-admin_score.php',1235,'feature_score','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Admin mods','tiki-mods.php',1240,'','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Tiki Logs','tiki-syslog.php',1245,'','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Security Admin','tiki-admin_security.php',1250,'','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Action Log','tiki-admin_actionlog.php',1255,'feature_actionlog','tiki_p_admin','');
+
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_wiki_comments','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_article_comments','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_blog_comments','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_file_galleries_comments','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_image_galleries_comments','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_poll_comments','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Comments','tiki-list_comments.php',1260,'feature_faq_comments','tiki_p_admin','');
+INSERT INTO tiki_menu_options (menuId,type,name,url,position,section,perm,groupname) VALUES (42,'o','Contribution','tiki-admin_contribution.php',1265,'feature_contribution','tiki_p_admin_contribution','');
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_menus
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_menus;
+CREATE TABLE tiki_menus (
+  menuId int(8) NOT NULL auto_increment,
+  name varchar(200) NOT NULL default '',
+  description text,
+  type char(1) default NULL,
+  PRIMARY KEY  (menuId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+INSERT INTO tiki_menus (menuId,name,description,type) VALUES ('42','Application menu','Main extensive navigation menu','d');
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_minical_events
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 09, 2003 at 04:06 AM
+#
+
+DROP TABLE IF EXISTS tiki_minical_events;
+CREATE TABLE tiki_minical_events (
+  user varchar(200) not null default '',
+  eventId int(12) NOT NULL auto_increment,
+  title varchar(250) default NULL,
+  description text,
+  start int(14) default NULL,
+  end int(14) default NULL,
+  security char(1) default NULL,
+  duration int(3) default NULL,
+  topicId int(12) default NULL,
+  reminded char(1) default NULL,
+  PRIMARY KEY  (eventId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_minical_topics
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_minical_topics;
+CREATE TABLE tiki_minical_topics (
+  user varchar(200) not null default '',
+  topicId int(12) NOT NULL auto_increment,
+  name varchar(250) default NULL,
+  filename varchar(200) default NULL,
+  filetype varchar(200) default NULL,
+  filesize varchar(200) default NULL,
+  data longblob,
+  path varchar(250) default NULL,
+  isIcon char(1) default NULL,
+  PRIMARY KEY  (topicId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_modules
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 11:44 PM
+#
+
+DROP TABLE IF EXISTS tiki_modules;
+CREATE TABLE tiki_modules (
+  name varchar(200) NOT NULL default '',
+  position char(1) default NULL,
+  ord int(4) default NULL,
+  type char(1) default NULL,
+  title varchar(255) default NULL,
+  cache_time int(14) default NULL,
+  rows int(4) default NULL,
+  params varchar(255) default NULL,
+  groups text,
+  PRIMARY KEY  (name)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+INSERT INTO tiki_modules (name,position,ord,cache_time,groups) VALUES ('login_box','r',1,0,'a:2:{i:0;s:10:"Registered";i:1;s:9:"Anonymous";}');
+INSERT INTO tiki_modules (name,position,ord,cache_time,params,groups) VALUES ('mnu_application_menu','l',1,0,'flip=y','a:2:{i:0;s:10:"Registered";i:1;s:9:"Anonymous";}');
+INSERT INTO tiki_modules (name,position,ord,cache_time,groups) VALUES ('quick_edit','l',2,0,'a:1:{i:0;s:10:"Registered";}');
+INSERT INTO tiki_modules (name,position,ord,cache_time,groups) VALUES ('assistant','l',10,0,'a:2:{i:0;s:10:"Registered";i:1;s:9:"Anonymous";}');
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_newsletter_subscriptions
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_newsletter_subscriptions;
+CREATE TABLE tiki_newsletter_subscriptions (
+  nlId int(12) NOT NULL default '0',
+  email varchar(255) NOT NULL default '',
+  code varchar(32) default NULL,
+  valid char(1) default NULL,
+  subscribed int(14) default NULL,
+  isUser char(1) NOT NULL default 'n',
+  PRIMARY KEY  (nlId,email,isUser)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_newsletter_groups
+#
+# Creation: Jan 18, 2005
+# Last update: Jan 18, 2005
+#
+
+DROP TABLE IF EXISTS tiki_newsletter_groups;
+CREATE TABLE tiki_newsletter_groups (
+  nlId int(12) NOT NULL default '0',
+  groupName varchar(255) NOT NULL default '',
+  code varchar(32) default NULL,
+  PRIMARY KEY  (nlId,groupName)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_newsletters
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_newsletters;
+CREATE TABLE tiki_newsletters (
+  nlId int(12) NOT NULL auto_increment,
+  name varchar(200) default NULL,
+  description text,
+  created int(14) default NULL,
+  lastSent int(14) default NULL,
+  editions int(10) default NULL,
+  users int(10) default NULL,
+  allowUserSub char(1) default 'y',
+  allowTxt char(1) default 'y',
+  allowAnySub char(1) default NULL,
+  unsubMsg char(1) default 'y',
+  validateAddr char(1) default 'y',
+  frequency int(14) default NULL,
+  PRIMARY KEY  (nlId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_newsreader_marks
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_newsreader_marks;
+CREATE TABLE tiki_newsreader_marks (
+  user varchar(200) NOT NULL default '',
+  serverId int(12) NOT NULL default '0',
+  groupName varchar(255) NOT NULL default '',
+  timestamp int(14) NOT NULL default '0',
+  PRIMARY KEY  (user(100),serverId,groupName(100))
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_newsreader_servers
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_newsreader_servers;
+CREATE TABLE tiki_newsreader_servers (
+  user varchar(200) NOT NULL default '',
+  serverId int(12) NOT NULL auto_increment,
+  server varchar(250) default NULL,
+  port int(4) default NULL,
+  username varchar(200) default NULL,
+  password varchar(200) default NULL,
+  PRIMARY KEY  (serverId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_page_footnotes
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 10:00 AM
+# Last check: Jul 12, 2003 at 10:00 AM
+#
+
+DROP TABLE IF EXISTS tiki_page_footnotes;
+CREATE TABLE tiki_page_footnotes (
+  user varchar(200) NOT NULL default '',
+  pageName varchar(250) NOT NULL default '',
+  data text,
+  PRIMARY KEY  (user(150),pageName(100))
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_pages
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 13, 2003 at 01:52 AM
+# Last check: Jul 12, 2003 at 10:01 AM
+#
+
+DROP TABLE IF EXISTS tiki_pages;
+CREATE TABLE tiki_pages (
+  page_id int(14) NOT NULL auto_increment,
+  pageName varchar(160) NOT NULL default '',
+  hits int(8) default NULL,
+  data mediumtext,
+  description varchar(200) default NULL,
+  lastModif int(14) default NULL,
+  comment varchar(200) default NULL,
+  version int(8) NOT NULL default '0',
+  user varchar(200) NOT NULL default '',
+  ip varchar(15) default NULL,
+  flag char(1) default NULL,
+  points int(8) default NULL,
+  votes int(8) default NULL,
+  cache mediumtext,
+  wiki_cache int(10) default NULL,
+  cache_timestamp int(14) default NULL,
+  pageRank decimal(4,3) default NULL,
+  creator varchar(200) default NULL,
+  page_size int(10) unsigned default '0',
+  lang varchar(16) default NULL,
+  lockedby varchar(200) default NULL,
+  is_html tinyint(1) default 0,
+  created int(14),
+  PRIMARY KEY  (page_id),
+  UNIQUE KEY pageName (pageName),
+  KEY data (data(255)),
+  KEY pageRank (pageRank),
+  FULLTEXT KEY ft (pageName,description,data),
+  KEY lastModif(lastModif)
+) TYPE=MyISAM AUTO_INCREMENT=1;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_page_drafts
+#
+# Creation: March 12, 2006 at 
+#
+
+DROP TABLE IF EXISTS tiki_page_drafts;
+CREATE TABLE tiki_page_drafts (
+  user varchar(40) NOT NULL,
+  pageName varchar(255) NOT NULL,
+  data mediumtext,
+  description varchar(200) default NULL,
+  comment varchar(200) default NULL,
+  lastModif int(14) default NULL,
+  PRIMARY KEY  (pageName, user)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_pageviews
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 13, 2003 at 01:52 AM
+#
+
+DROP TABLE IF EXISTS tiki_pageviews;
+CREATE TABLE tiki_pageviews (
+  day int(14) NOT NULL default '0',
+  pageviews int(14) default NULL,
+  PRIMARY KEY  (day)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_poll_objects
+#
+
+DROP TABLE IF EXISTS tiki_poll_objects;
+CREATE TABLE `tiki_poll_objects` (
+  `catObjectId` int(11) NOT NULL default '0',
+  `pollId` int(11) NOT NULL default '0',
+  `title` varchar(255) default NULL,
+  PRIMARY KEY  (`catObjectId`,`pollId`)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_poll_options
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 06, 2003 at 07:57 PM
+#
+
+DROP TABLE IF EXISTS tiki_poll_options;
+CREATE TABLE tiki_poll_options (
+  pollId int(8) NOT NULL default '0',
+  optionId int(8) NOT NULL auto_increment,
+  title varchar(200) default NULL,
+  position int(4) NOT NULL default '0',
+  votes int(8) default NULL,
+  PRIMARY KEY  (optionId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_polls
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 06, 2003 at 07:57 PM
+#
+
+DROP TABLE IF EXISTS tiki_polls;
+CREATE TABLE tiki_polls (
+  pollId int(8) NOT NULL auto_increment,
+  title varchar(200) default NULL,
+  votes int(8) default NULL,
+  active char(1) default NULL,
+  publishDate int(14) default NULL,
+  PRIMARY KEY  (pollId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_preferences
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 12:04 PM
+#
+
+DROP TABLE IF EXISTS tiki_preferences;
+CREATE TABLE tiki_preferences (
+  name varchar(40) NOT NULL default '',
+  value text,
+  PRIMARY KEY  (name)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_private_messages
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_private_messages;
+CREATE TABLE tiki_private_messages (
+  messageId int(8) NOT NULL auto_increment,
+  toNickname varchar(200) NOT NULL default '',
+  message varchar(255) default NULL,
+  poster varchar(200) NOT NULL default 'anonymous',
+  timestamp int(14) default NULL,
+  received tinyint(1) not null default 0,
+  key(received),
+  key(timestamp),
+  PRIMARY KEY  (messageId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_programmed_content
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_programmed_content;
+CREATE TABLE tiki_programmed_content (
+  pId int(8) NOT NULL auto_increment,
+  contentId int(8) NOT NULL default '0',
+  publishDate int(14) NOT NULL default '0',
+  data text,
+  PRIMARY KEY  (pId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_quiz_question_options
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_quiz_question_options;
+CREATE TABLE tiki_quiz_question_options (
+  optionId int(10) NOT NULL auto_increment,
+  questionId int(10) default NULL,
+  optionText text,
+  points int(4) default NULL,
+  PRIMARY KEY  (optionId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_quiz_questions
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_quiz_questions;
+CREATE TABLE tiki_quiz_questions (
+  questionId int(10) NOT NULL auto_increment,
+  quizId int(10) default NULL,
+  question text,
+  position int(4) default NULL,
+  type char(1) default NULL,
+  maxPoints int(4) default NULL,
+  PRIMARY KEY  (questionId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_quiz_results
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_quiz_results;
+CREATE TABLE tiki_quiz_results (
+  resultId int(10) NOT NULL auto_increment,
+  quizId int(10) default NULL,
+  fromPoints int(4) default NULL,
+  toPoints int(4) default NULL,
+  answer text,
+  PRIMARY KEY  (resultId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_quiz_stats
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_quiz_stats;
+CREATE TABLE tiki_quiz_stats (
+  quizId int(10) NOT NULL default '0',
+  questionId int(10) NOT NULL default '0',
+  optionId int(10) NOT NULL default '0',
+  votes int(10) default NULL,
+  PRIMARY KEY  (quizId,questionId,optionId)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_quiz_stats_sum
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_quiz_stats_sum;
+CREATE TABLE tiki_quiz_stats_sum (
+  quizId int(10) NOT NULL default '0',
+  quizName varchar(255) default NULL,
+  timesTaken int(10) default NULL,
+  avgpoints decimal(5,2) default NULL,
+  avgavg decimal(5,2) default NULL,
+  avgtime decimal(5,2) default NULL,
+  PRIMARY KEY  (quizId)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_quizzes
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: April 29, 2004
+#
+
+DROP TABLE IF EXISTS tiki_quizzes;
+CREATE TABLE tiki_quizzes (
+  quizId int(10) NOT NULL auto_increment,
+  name varchar(255) default NULL,
+  description text,
+  canRepeat char(1) default NULL,
+  storeResults char(1) default NULL,
+  questionsPerPage int(4) default NULL,
+  timeLimited char(1) default NULL,
+  timeLimit int(14) default NULL,
+  created int(14) default NULL,
+  taken int(10) default NULL,
+  immediateFeedback char(1) default NULL,
+  showAnswers char(1) default NULL,
+  shuffleQuestions char(1) default NULL,
+  shuffleAnswers char(1) default NULL,
+  publishDate int(14) default NULL,
+  expireDate int(14) default NULL,
+  bDeleted char(1) default NULL,
+  nVersion int(4) NOT NULL,
+  nAuthor int(4) default NULL,
+  bOnline char(1) default NULL,
+  bRandomQuestions char(1) default NULL,
+  nRandomQuestions tinyint(4) default NULL,
+  bLimitQuestionsPerPage char(1) default NULL,
+  nLimitQuestionsPerPage tinyint(4) default NULL,
+  bMultiSession char(1) default NULL,
+  nCanRepeat tinyint(4) default NULL,
+  sGradingMethod varchar(80) default NULL,
+  sShowScore varchar(80) default NULL,
+  sShowCorrectAnswers varchar(80) default NULL,
+  sPublishStats varchar(80) default NULL,
+  bAdditionalQuestions char(1) default NULL,
+  bForum char(1) default NULL,
+  sForum varchar(80) default NULL,
+  sPrologue text,
+  sData text,
+  sEpilogue text,
+  passingperct int(4) default 0,
+  PRIMARY KEY  (quizId, nVersion)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_received_articles
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_received_articles;
+CREATE TABLE tiki_received_articles (
+  receivedArticleId int(14) NOT NULL auto_increment,
+  receivedFromSite varchar(200) default NULL,
+  receivedFromUser varchar(200) default NULL,
+  receivedDate int(14) default NULL,
+  title varchar(80) default NULL,
+  authorName varchar(60) default NULL,
+  size int(12) default NULL,
+  useImage char(1) default NULL,
+  image_name varchar(80) default NULL,
+  image_type varchar(80) default NULL,
+  image_size int(14) default NULL,
+  image_x int(4) default NULL,
+  image_y int(4) default NULL,
+  image_data longblob,
+  publishDate int(14) default NULL,
+  expireDate int(14) default NULL,
+  created int(14) default NULL,
+  heading text,
+  body longblob,
+  hash varchar(32) default NULL,
+  author varchar(200) default NULL,
+  type varchar(50) default NULL,
+  rating decimal(3,2) default NULL,
+  PRIMARY KEY  (receivedArticleId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_received_pages
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 09, 2003 at 03:56 AM
+#
+
+DROP TABLE IF EXISTS tiki_received_pages;
+CREATE TABLE tiki_received_pages (
+  receivedPageId int(14) NOT NULL auto_increment,
+  pageName varchar(160) NOT NULL default '',
+  data longblob,
+  description varchar(200) default NULL,
+  comment varchar(200) default NULL,
+  receivedFromSite varchar(200) default NULL,
+  receivedFromUser varchar(200) default NULL,
+  receivedDate int(14) default NULL,
+  PRIMARY KEY  (receivedPageId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_referer_stats
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 13, 2003 at 01:30 AM
+#
+
+DROP TABLE IF EXISTS tiki_referer_stats;
+CREATE TABLE tiki_referer_stats (
+  referer varchar(255) NOT NULL default '',
+  hits int(10) default NULL,
+  last int(14) default NULL,
+  PRIMARY KEY  (referer)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_related_categories
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_related_categories;
+CREATE TABLE tiki_related_categories (
+  categId int(10) NOT NULL default '0',
+  relatedTo int(10) NOT NULL default '0',
+  PRIMARY KEY  (categId,relatedTo)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_rss_modules
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 10:19 AM
+#
+
+DROP TABLE IF EXISTS tiki_rss_modules;
+CREATE TABLE tiki_rss_modules (
+  rssId int(8) NOT NULL auto_increment,
+  name varchar(30) NOT NULL default '',
+  description text,
+  url varchar(255) NOT NULL default '',
+  refresh int(8) default NULL,
+  lastUpdated int(14) default NULL,
+  showTitle char(1) default 'n',
+  showPubDate char(1) default 'n',
+  content longblob,
+  PRIMARY KEY  (rssId),
+  KEY name (name)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_rss_feeds
+#
+# Creation: Oct 14, 2003 at 20:34 PM
+# Last update: Oct 14, 2003 at 20:34 PM
+#
+
+DROP TABLE IF EXISTS tiki_rss_feeds;
+CREATE TABLE tiki_rss_feeds (
+  name varchar(30) NOT NULL default '',
+  rssVer char(1) NOT NULL default '1',
+  refresh int(8) default '300',
+  lastUpdated int(14) default NULL,
+  cache longblob,
+  PRIMARY KEY  (name,rssVer)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+DROP TABLE IF EXISTS tiki_searchindex;
+CREATE TABLE tiki_searchindex(
+  searchword varchar(80) NOT NULL default '',
+  location varchar(80) NOT NULL default '',
+  page varchar(255) NOT NULL default '',
+  count int(11) NOT NULL default '1',
+  last_update int(11) NOT NULL default '0',
+  PRIMARY KEY  (searchword,location,page(80)),
+  KEY last_update (last_update)
+) TYPE=MyISAM;
+
+# LRU (last recently used) list for searching parts of words
+DROP TABLE IF EXISTS tiki_searchsyllable;
+CREATE TABLE tiki_searchsyllable(
+  syllable varchar(80) NOT NULL default '',
+  lastUsed int(11) NOT NULL default '0',
+  lastUpdated int(11) NOT NULL default '0',
+  PRIMARY KEY  (syllable),
+  KEY lastUsed (lastUsed)
+) TYPE=MyISAM;
+
+# searchword caching table for search syllables
+DROP TABLE IF EXISTS tiki_searchwords;
+CREATE TABLE tiki_searchwords(
+  syllable varchar(80) NOT NULL default '',
+  searchword varchar(80) NOT NULL default '',
+  PRIMARY KEY  (syllable,searchword)
+) TYPE=MyISAM;
+
+#
+# Table structure for table tiki_search_stats
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 10:55 PM
+#
+
+DROP TABLE IF EXISTS tiki_search_stats;
+CREATE TABLE tiki_search_stats (
+  term varchar(50) NOT NULL default '',
+  hits int(10) default NULL,
+  PRIMARY KEY  (term)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_secdb
+#
+#
+
+DROP TABLE IF EXISTS tiki_secdb;
+CREATE TABLE tiki_secdb(
+  md5_value varchar(32) NOT NULL,
+  filename varchar(250) NOT NULL,
+  tiki_version varchar(60) NOT NULL,
+  severity int(4) NOT NULL default '0',
+  PRIMARY KEY  (md5_value,filename(100),tiki_version),
+  KEY sdb_fn (filename)
+) TYPE=MyISAM;
+
+#
+# Table structure for table tiki_semaphores
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 13, 2003 at 01:52 AM
+#
+
+DROP TABLE IF EXISTS tiki_semaphores;
+CREATE TABLE tiki_semaphores (
+  semName varchar(250) NOT NULL default '',
+  objectType varchar(20) default 'wiki page',
+  user varchar(200) default NULL,
+  timestamp int(14) default NULL,
+  PRIMARY KEY  (semName)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_sent_newsletters
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_sent_newsletters;
+CREATE TABLE tiki_sent_newsletters (
+  editionId int(12) NOT NULL auto_increment,
+  nlId int(12) NOT NULL default '0',
+  users int(10) default NULL,
+  sent int(14) default NULL,
+  subject varchar(200) default NULL,
+  data longblob,
+  datatxt longblob,
+  PRIMARY KEY  (editionId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_sent_newsletters_errors
+#
+
+DROP TABLE IF EXISTS tiki_sent_newsletters_errors;
+CREATE TABLE tiki_sent_newsletters_errors (
+  editionId int(12),
+  email varchar(255),
+  login varchar(40) default '',
+  error char(1) default '',
+  KEY  (editionId)
+) TYPE=MyISAM ;
+# --------------------------------------------------------
+
+
+#
+# Table structure for table tiki_sessions
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 13, 2003 at 01:52 AM
+#
+
+DROP TABLE IF EXISTS tiki_sessions;
+CREATE TABLE tiki_sessions (
+  sessionId varchar(32) NOT NULL default '',
+  user varchar(200) default NULL,
+  timestamp int(14) default NULL,
+  tikihost varchar(200) default NULL,
+  PRIMARY KEY  (sessionId)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+# Tables for TikiSheet
+DROP TABLE IF EXISTS tiki_sheet_layout;
+CREATE TABLE tiki_sheet_layout (
+  sheetId int(8) NOT NULL default '0',
+  begin int(10) NOT NULL default '0',
+  end int(10) default NULL,
+  headerRow int(4) NOT NULL default '0',
+  footerRow int(4) NOT NULL default '0',
+  className varchar(64) default NULL,
+  UNIQUE KEY sheetId (sheetId,begin)
+) TYPE=MyISAM;
+
+DROP TABLE IF EXISTS tiki_sheet_values;
+CREATE TABLE tiki_sheet_values (
+  sheetId int(8) NOT NULL default '0',
+  begin int(10) NOT NULL default '0',
+  end int(10) default NULL,
+  rowIndex int(4) NOT NULL default '0',
+  columnIndex int(4) NOT NULL default '0',
+  value varchar(255) default NULL,
+  calculation varchar(255) default NULL,
+  width int(4) NOT NULL default '1',
+  height int(4) NOT NULL default '1',
+  format varchar(255) default NULL,
+  user varchar(40) default NULL,
+  UNIQUE KEY sheetId (sheetId,begin,rowIndex,columnIndex),
+  KEY sheetId_2 (sheetId,rowIndex,columnIndex)
+) TYPE=MyISAM;
+
+DROP TABLE IF EXISTS tiki_sheets;
+CREATE TABLE tiki_sheets (
+  sheetId int(8) NOT NULL auto_increment,
+  title varchar(200) NOT NULL default '',
+  description text,
+  author varchar(200) NOT NULL default '',
+  PRIMARY KEY  (sheetId)
+) TYPE=MyISAM;
+
+#
+# Table structure for table tiki_shoutbox
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 08:21 PM
+#
+
+DROP TABLE IF EXISTS tiki_shoutbox;
+CREATE TABLE tiki_shoutbox (
+  msgId int(10) NOT NULL auto_increment,
+  message varchar(255) default NULL,
+  timestamp int(14) default NULL,
+  user varchar(200) default NULL,
+  hash varchar(32) default NULL,
+  PRIMARY KEY  (msgId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_shoutbox_words
+#
+
+DROP TABLE IF EXISTS tiki_shoutbox_words;
+CREATE TABLE tiki_shoutbox_words (
+  word VARCHAR( 40 ) NOT NULL ,
+  qty INT DEFAULT '0' NOT NULL ,
+  PRIMARY KEY  (word)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_structure_versions
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_structure_versions;
+CREATE TABLE tiki_structure_versions (
+  structure_id int(14) NOT NULL auto_increment,
+  version int(14) default NULL,
+  PRIMARY KEY  (structure_id)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_structures
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_structures;
+CREATE TABLE tiki_structures (
+  page_ref_id int(14) NOT NULL auto_increment,
+  structure_id int(14) NOT NULL,
+  parent_id int(14) default NULL,
+  page_id int(14) NOT NULL,
+  page_version int(8) default NULL,
+  page_alias varchar(240) NOT NULL default '',
+  pos int(4) default NULL,
+  PRIMARY KEY  (page_ref_id),
+  KEY pidpaid (page_id,parent_id),
+  KEY page_id (page_id)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_submissions
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Nov 29, 2006 at 08:46 PM
+#
+
+DROP TABLE IF EXISTS tiki_submissions;
+CREATE TABLE tiki_submissions (
+  subId int(8) NOT NULL auto_increment,
+  topline varchar(255) default NULL,
+  title varchar(255) default NULL,
+  subtitle varchar(255) default NULL,
+  linkto varchar(255) default NULL,
+  lang varchar(16) default NULL,
+  authorName varchar(60) default NULL,
+  topicId int(14) default NULL,
+  topicName varchar(40) default NULL,
+  size int(12) default NULL,
+  useImage char(1) default NULL,
+  image_name varchar(80) default NULL,
+  image_caption text default NULL,
+  image_type varchar(80) default NULL,
+  image_size int(14) default NULL,
+  image_x int(4) default NULL,
+  image_y int(4) default NULL,
+  image_data longblob,
+  publishDate int(14) default NULL,
+  expireDate int(14) default NULL,
+  created int(14) default NULL,
+  bibliographical_references text,
+  resume text,
+  heading text,
+  body text,
+  hash varchar(32) default NULL,
+  author varchar(200) default NULL,
+  nbreads int(14) default NULL,
+  votes int(8) default NULL,
+  points int(14) default NULL,
+  type varchar(50) default NULL,
+  rating decimal(3,2) default NULL,
+  isfloat char(1) default NULL,
+  PRIMARY KEY  (subId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_suggested_faq_questions
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 11, 2003 at 08:52 PM
+#
+
+DROP TABLE IF EXISTS tiki_suggested_faq_questions;
+CREATE TABLE tiki_suggested_faq_questions (
+  sfqId int(10) NOT NULL auto_increment,
+  faqId int(10) NOT NULL default '0',
+  question text,
+  answer text,
+  created int(14) default NULL,
+  user varchar(200) default NULL,
+  PRIMARY KEY  (sfqId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_survey_question_options
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 11, 2003 at 12:55 AM
+#
+
+DROP TABLE IF EXISTS tiki_survey_question_options;
+CREATE TABLE tiki_survey_question_options (
+  optionId int(12) NOT NULL auto_increment,
+  questionId int(12) NOT NULL default '0',
+  qoption text,
+  votes int(10) default NULL,
+  PRIMARY KEY  (optionId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_survey_questions
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 11, 2003 at 11:55 PM
+#
+
+DROP TABLE IF EXISTS tiki_survey_questions;
+CREATE TABLE tiki_survey_questions (
+  questionId int(12) NOT NULL auto_increment,
+  surveyId int(12) NOT NULL default '0',
+  question text,
+  options text,
+  type char(1) default NULL,
+  position int(5) default NULL,
+  votes int(10) default NULL,
+  value int(10) default NULL,
+  average decimal(4,2) default NULL,
+  PRIMARY KEY  (questionId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_surveys
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 07:40 PM
+#
+
+DROP TABLE IF EXISTS tiki_surveys;
+CREATE TABLE tiki_surveys (
+  surveyId int(12) NOT NULL auto_increment,
+  name varchar(200) default NULL,
+  description text,
+  taken int(10) default NULL,
+  lastTaken int(14) default NULL,
+  created int(14) default NULL,
+  status char(1) default NULL,
+  PRIMARY KEY  (surveyId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_tags
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 06, 2003 at 02:58 AM
+#
+
+DROP TABLE IF EXISTS tiki_tags;
+CREATE TABLE tiki_tags (
+  tagName varchar(80) NOT NULL default '',
+  pageName varchar(160) NOT NULL default '',
+  hits int(8) default NULL,
+  description varchar(200) default NULL,
+  data longblob,
+  lastModif int(14) default NULL,
+  comment varchar(200) default NULL,
+  version int(8) NOT NULL default '0',
+  user varchar(200) default NULL,
+  ip varchar(15) default NULL,
+  flag char(1) default NULL,
+  PRIMARY KEY  (tagName,pageName)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_theme_control_categs
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_theme_control_categs;
+CREATE TABLE tiki_theme_control_categs (
+  categId int(12) NOT NULL default '0',
+  theme varchar(250) NOT NULL default '',
+  PRIMARY KEY  (categId)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_theme_control_objects
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_theme_control_objects;
+CREATE TABLE tiki_theme_control_objects (
+  objId varchar(250) NOT NULL default '',
+  type varchar(250) NOT NULL default '',
+  name varchar(250) NOT NULL default '',
+  theme varchar(250) NOT NULL default '',
+  PRIMARY KEY  (objId(100), type(100))
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_theme_control_sections
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_theme_control_sections;
+CREATE TABLE tiki_theme_control_sections (
+  section varchar(250) NOT NULL default '',
+  theme varchar(250) NOT NULL default '',
+  PRIMARY KEY  (section)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_topics
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 04, 2003 at 10:10 PM
+#
+
+DROP TABLE IF EXISTS tiki_topics;
+CREATE TABLE tiki_topics (
+  topicId int(14) NOT NULL auto_increment,
+  name varchar(40) default NULL,
+  image_name varchar(80) default NULL,
+  image_type varchar(80) default NULL,
+  image_size int(14) default NULL,
+  image_data longblob,
+  active char(1) default NULL,
+  created int(14) default NULL,
+  PRIMARY KEY  (topicId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_tracker_fields
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 08, 2003 at 01:48 PM
+#
+
+DROP TABLE IF EXISTS tiki_tracker_fields;
+CREATE TABLE tiki_tracker_fields (
+  fieldId int(12) NOT NULL auto_increment,
+  trackerId int(12) NOT NULL default '0',
+  name varchar(255) default NULL,
+  options text,
+  type char(1) default NULL,
+  isMain char(1) default NULL,
+  isTblVisible char(1) default NULL,
+  position int(4) default NULL,
+  isSearchable char(1) NOT NULL default 'y',
+  isPublic char(1) NOT NULL default 'n',
+  isHidden char(1) NOT NULL default 'n',
+  isMandatory char(1) NOT NULL default 'n',
+  isMultilingual char(1) default 'n',
+  description text,
+  PRIMARY KEY  (fieldId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_tracker_item_attachments
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_tracker_item_attachments;
+CREATE TABLE tiki_tracker_item_attachments (
+  attId int(12) NOT NULL auto_increment,
+  itemId int(12) NOT NULL default 0,
+  filename varchar(80) default NULL,
+  filetype varchar(80) default NULL,
+  filesize int(14) default NULL,
+  user varchar(40) default NULL,
+  data longblob,
+  path varchar(255) default NULL,
+  downloads int(10) default NULL,
+  created int(14) default NULL,
+  comment varchar(250) default NULL,
+  longdesc blob,
+  version varchar(40) default NULL,
+  PRIMARY KEY  (attId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_tracker_item_comments
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 08:12 AM
+#
+
+DROP TABLE IF EXISTS tiki_tracker_item_comments;
+CREATE TABLE tiki_tracker_item_comments (
+  commentId int(12) NOT NULL auto_increment,
+  itemId int(12) NOT NULL default '0',
+  user varchar(40) default NULL,
+  data text,
+  title varchar(200) default NULL,
+  posted int(14) default NULL,
+  PRIMARY KEY  (commentId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_tracker_item_fields
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 08:26 AM
+#
+
+DROP TABLE IF EXISTS tiki_tracker_item_fields;
+CREATE TABLE tiki_tracker_item_fields (
+  itemId int(12) NOT NULL default '0',
+  fieldId int(12) NOT NULL default '0',
+  lang char(16) default NULL,
+  value text,
+  PRIMARY KEY  (itemId,fieldId,lang),
+  FULLTEXT KEY ft (value)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_tracker_items
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 08:26 AM
+#
+
+DROP TABLE IF EXISTS tiki_tracker_items;
+CREATE TABLE tiki_tracker_items (
+  itemId int(12) NOT NULL auto_increment,
+  trackerId int(12) NOT NULL default '0',
+  created int(14) default NULL,
+  status char(1) default NULL,
+  lastModif int(14) default NULL,
+  PRIMARY KEY  (itemId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_tracker_options
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 08, 2003 at 01:48 PM
+#
+
+DROP TABLE IF EXISTS tiki_tracker_options;
+CREATE TABLE tiki_tracker_options (
+  trackerId int(12) NOT NULL default '0',
+  name varchar(80) NOT NULL default '',
+  value text default NULL,
+  PRIMARY KEY  (trackerId,name(30))
+) TYPE=MyISAM ;
+# --------------------------------------------------------
+
+
+#
+# Table structure for table tiki_trackers
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 08:26 AM
+#
+
+DROP TABLE IF EXISTS tiki_trackers;
+CREATE TABLE tiki_trackers (
+  trackerId int(12) NOT NULL auto_increment,
+  name varchar(255) default NULL,
+  description text,
+  created int(14) default NULL,
+  lastModif int(14) default NULL,
+  showCreated char(1) default NULL,
+  showStatus char(1) default NULL,
+  showLastModif char(1) default NULL,
+  useComments char(1) default NULL,
+  useAttachments char(1) default NULL,
+  items int(10) default NULL,
+  showComments char(1) default NULL,
+  showAttachments char(1) default NULL,
+  orderAttachments varchar(255) NOT NULL default 'filename,created,filesize,downloads,desc',
+  PRIMARY KEY  (trackerId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_untranslated
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_untranslated;
+CREATE TABLE tiki_untranslated (
+  id int(14) NOT NULL auto_increment,
+  source tinyblob NOT NULL,
+  lang char(16) NOT NULL default '',
+  PRIMARY KEY  (source(255),lang),
+  UNIQUE KEY id (id),
+  KEY id_2 (id)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_user_answers
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_user_answers;
+CREATE TABLE tiki_user_answers (
+  userResultId int(10) NOT NULL default '0',
+  quizId int(10) NOT NULL default '0',
+  questionId int(10) NOT NULL default '0',
+  optionId int(10) NOT NULL default '0',
+  PRIMARY KEY  (userResultId,quizId,questionId,optionId)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+
+#
+# Table structure for table tiki_user_answers_uploads
+#
+# Creation: Jan 25, 2005 at 07:42 PM
+# Last update: Jan 25, 2005 at 07:42 PM
+#
+
+
+DROP TABLE IF EXISTS tiki_user_answers_uploads;
+CREATE TABLE tiki_user_answers_uploads (
+  answerUploadId int(4) NOT NULL auto_increment,
+  userResultId int(11) NOT NULL default '0',
+  questionId int(11) NOT NULL default '0',
+  filename varchar(255) NOT NULL default '',
+  filetype varchar(64) NOT NULL default '',
+  filesize varchar(255) NOT NULL default '',
+  filecontent longblob NOT NULL,
+  PRIMARY KEY  (answerUploadId)
+) TYPE=MyISAM;
+
+
+#
+# Table structure for table tiki_user_assigned_modules
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 08:25 PM
+#
+
+DROP TABLE IF EXISTS tiki_user_assigned_modules;
+CREATE TABLE tiki_user_assigned_modules (
+  name varchar(200) NOT NULL default '',
+  position char(1) default NULL,
+  ord int(4) default NULL,
+  type char(1) default NULL,
+  user varchar(200) NOT NULL default '',
+  PRIMARY KEY  (name(30),user,position)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_user_bookmarks_folders
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 11, 2003 at 08:35 AM
+#
+
+DROP TABLE IF EXISTS tiki_user_bookmarks_folders;
+CREATE TABLE tiki_user_bookmarks_folders (
+  folderId int(12) NOT NULL auto_increment,
+  parentId int(12) default NULL,
+  user varchar(200) NOT NULL default '',
+  name varchar(30) default NULL,
+  PRIMARY KEY  (user,folderId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_user_bookmarks_urls
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 11, 2003 at 08:36 AM
+#
+
+DROP TABLE IF EXISTS tiki_user_bookmarks_urls;
+CREATE TABLE tiki_user_bookmarks_urls (
+  urlId int(12) NOT NULL auto_increment,
+  name varchar(30) default NULL,
+  url varchar(250) default NULL,
+  data longblob,
+  lastUpdated int(14) default NULL,
+  folderId int(12) NOT NULL default '0',
+  user varchar(200) NOT NULL default '',
+  PRIMARY KEY  (urlId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_user_mail_accounts
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_user_mail_accounts;
+CREATE TABLE tiki_user_mail_accounts (
+  accountId int(12) NOT NULL auto_increment,
+  user varchar(200) NOT NULL default '',
+  account varchar(50) NOT NULL default '',
+  pop varchar(255) default NULL,
+  current char(1) default NULL,
+  port int(4) default NULL,
+  username varchar(100) default NULL,
+  pass varchar(100) default NULL,
+  msgs int(4) default NULL,
+  smtp varchar(255) default NULL,
+  useAuth char(1) default NULL,
+  smtpPort int(4) default NULL,
+  PRIMARY KEY  (accountId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_user_menus
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 11, 2003 at 10:58 PM
+#
+
+DROP TABLE IF EXISTS tiki_user_menus;
+CREATE TABLE tiki_user_menus (
+  user varchar(200) NOT NULL default '',
+  menuId int(12) NOT NULL auto_increment,
+  url varchar(250) default NULL,
+  name varchar(40) default NULL,
+  position int(4) default NULL,
+  mode char(1) default NULL,
+  PRIMARY KEY  (menuId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_user_modules
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 05, 2003 at 03:16 AM
+#
+
+DROP TABLE IF EXISTS tiki_user_modules;
+CREATE TABLE tiki_user_modules (
+  name varchar(200) NOT NULL default '',
+  title varchar(40) default NULL,
+  data longblob,
+  parse char(1) default NULL,
+  PRIMARY KEY  (name)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+INSERT INTO tiki_user_modules (name, title, data, parse) VALUES ('mnu_application_menu', 'Menu', '{menu id=42}', 'n');
+
+#
+# Table structure for table tiki_user_notes
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 07:52 AM
+#
+
+DROP TABLE IF EXISTS tiki_user_notes;
+CREATE TABLE tiki_user_notes (
+  user varchar(200) NOT NULL default '',
+  noteId int(12) NOT NULL auto_increment,
+  created int(14) default NULL,
+  name varchar(255) default NULL,
+  lastModif int(14) default NULL,
+  data text,
+  size int(14) default NULL,
+  parse_mode varchar(20) default NULL,
+  PRIMARY KEY  (noteId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_user_postings
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 13, 2003 at 01:12 AM
+#
+
+DROP TABLE IF EXISTS tiki_user_postings;
+CREATE TABLE tiki_user_postings (
+  user varchar(200) NOT NULL default '',
+  posts int(12) default NULL,
+  last int(14) default NULL,
+  first int(14) default NULL,
+  level int(8) default NULL,
+  PRIMARY KEY  (user)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_user_preferences
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 13, 2003 at 01:09 AM
+#
+
+DROP TABLE IF EXISTS tiki_user_preferences;
+CREATE TABLE tiki_user_preferences (
+  user varchar(200) NOT NULL default '',
+  prefName varchar(40) NOT NULL default '',
+  value varchar(250) default NULL,
+  PRIMARY KEY  (user,prefName)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_user_quizzes
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_user_quizzes;
+CREATE TABLE tiki_user_quizzes (
+  user varchar(200) NOT NULL default '',
+  quizId int(10) default NULL,
+  timestamp int(14) default NULL,
+  timeTaken int(14) default NULL,
+  points int(12) default NULL,
+  maxPoints int(12) default NULL,
+  resultId int(10) default NULL,
+  userResultId int(10) NOT NULL auto_increment,
+  PRIMARY KEY  (userResultId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_user_taken_quizzes
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_user_taken_quizzes;
+CREATE TABLE tiki_user_taken_quizzes (
+  user varchar(200) NOT NULL default '',
+  quizId varchar(255) NOT NULL default '',
+  PRIMARY KEY  (user,quizId(50))
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+
+#
+# Table structure for table tiki_user_tasks_history
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jan 25, 2005 by sir-b & moresun
+#
+DROP TABLE IF EXISTS tiki_user_tasks_history;
+CREATE TABLE tiki_user_tasks_history (
+  belongs_to integer(14) NOT NULL,                   -- the fist task in a history it has the same id as the task id
+  task_version integer(4) NOT NULL DEFAULT 0,        -- version number for the history it starts with 0
+  title varchar(250) NOT NULL,                       -- title
+  description text DEFAULT NULL,                     -- description
+  start integer(14) DEFAULT NULL,                    -- date of the starting, if it is not set than there is not starting date
+  end integer(14) DEFAULT NULL,                      -- date of the end, if it is not set than there is not dealine
+  lasteditor varchar(200) NOT NULL,                  -- lasteditor: username of last editior
+  lastchanges integer(14) NOT NULL,                  -- date of last changes
+  priority integer(2) NOT NULL DEFAULT 3,                     -- priority
+  completed integer(14) DEFAULT NULL,                -- date of the completation if it is null it is not yet completed
+  deleted integer(14) DEFAULT NULL,                  -- date of the deleteation it it is null it is not deleted
+  status char(1) DEFAULT NULL,                       -- null := waiting, 
+                                                     -- o := open / in progress, 
+                                                     -- c := completed -> (percentage = 100) 
+  percentage int(4) DEFAULT NULL,
+  accepted_creator char(1) DEFAULT NULL,             -- y - yes, n - no, null - waiting
+  accepted_user char(1) DEFAULT NULL,                -- y - yes, n - no, null - waiting
+  PRIMARY KEY (belongs_to, task_version)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+
+
+#
+# Table structure for table tiki_user_tasks
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jan 25, 2005 by sir-b & moresun
+#
+DROP TABLE IF EXISTS tiki_user_tasks;
+CREATE TABLE tiki_user_tasks (
+  taskId integer(14) NOT NULL auto_increment,        -- task id
+  last_version integer(4) NOT NULL DEFAULT 0,        -- last version of the task starting with 0
+  user varchar(200) NOT NULL DEFAULT '',              -- task user
+  creator varchar(200) NOT NULL,                     -- username of creator
+  public_for_group varchar(30) DEFAULT NULL,         -- this group can also view the task, if it is null it is not public
+  rights_by_creator char(1) DEFAULT NULL,            -- null the user can delete the task, 
+  created integer(14) NOT NULL,                      -- date of the creation
+  status char(1) default NULL,
+  priority int(2) default NULL,
+  completed int(14) default NULL,
+  percentage int(4) default NULL,
+  PRIMARY KEY (taskId),
+  UNIQUE(creator, created)
+) TYPE=MyISAM AUTO_INCREMENT=1;
+
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_user_votings
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 11, 2003 at 11:55 PM
+#
+
+DROP TABLE IF EXISTS tiki_user_votings;
+CREATE TABLE tiki_user_votings (
+  user varchar(200) NOT NULL default '',
+  id varchar(255) NOT NULL default '',
+  optionId int(10) NOT NULL default 0,
+  PRIMARY KEY  (user(100),id(100))
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_user_watches
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 08:07 AM
+#
+
+DROP TABLE IF EXISTS tiki_user_watches;
+CREATE TABLE tiki_user_watches (
+  user varchar(200) NOT NULL default '',
+  event varchar(40) NOT NULL default '',
+  object varchar(200) NOT NULL default '',
+  hash varchar(32) default NULL,
+  title varchar(250) default NULL,
+  type varchar(200) default NULL,
+  url varchar(250) default NULL,
+  email varchar(200) default NULL,
+  PRIMARY KEY  (user(100),event,object(100))
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_userfiles
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_userfiles;
+CREATE TABLE tiki_userfiles (
+  user varchar(200) NOT NULL default '',
+  fileId int(12) NOT NULL auto_increment,
+  name varchar(200) default NULL,
+  filename varchar(200) default NULL,
+  filetype varchar(200) default NULL,
+  filesize varchar(200) default NULL,
+  data longblob,
+  hits int(8) default NULL,
+  isFile char(1) default NULL,
+  path varchar(255) default NULL,
+  created int(14) default NULL,
+  PRIMARY KEY  (fileId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_userpoints
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 11, 2003 at 05:47 AM
+#
+
+DROP TABLE IF EXISTS tiki_userpoints;
+CREATE TABLE tiki_userpoints (
+  user varchar(200) default NULL,
+  points decimal(8,2) default NULL,
+  voted int(8) default NULL
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_users
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_users;
+CREATE TABLE tiki_users (
+  user varchar(200) NOT NULL default '',
+  password varchar(40) default NULL,
+  email varchar(200) default NULL,
+  lastLogin int(14) default NULL,
+  PRIMARY KEY  (user)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_webmail_contacts
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_webmail_contacts;
+CREATE TABLE tiki_webmail_contacts (
+  contactId int(12) NOT NULL auto_increment,
+  firstName varchar(80) default NULL,
+  lastName varchar(80) default NULL,
+  email varchar(250) default NULL,
+  nickname varchar(200) default NULL,
+  user varchar(200) NOT NULL default '',
+  PRIMARY KEY  (contactId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+DROP TABLE IF EXISTS tiki_webmail_contacts_groups;
+CREATE TABLE tiki_webmail_contacts_groups (
+  contactId int(12) NOT NULL,
+  groupName varchar(255) NOT NULL,
+  PRIMARY KEY  (contactId,groupName(200))
+) TYPE=MyISAM ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_webmail_messages
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_webmail_messages;
+CREATE TABLE tiki_webmail_messages (
+  accountId int(12) NOT NULL default '0',
+  mailId varchar(255) NOT NULL default '',
+  user varchar(200) NOT NULL default '',
+  isRead char(1) default NULL,
+  isReplied char(1) default NULL,
+  isFlagged char(1) default NULL,
+  PRIMARY KEY  (accountId,mailId)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_wiki_attachments
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_wiki_attachments;
+CREATE TABLE tiki_wiki_attachments (
+  attId int(12) NOT NULL auto_increment,
+  page varchar(200) NOT NULL default '',
+  filename varchar(80) default NULL,
+  filetype varchar(80) default NULL,
+  filesize int(14) default NULL,
+  user varchar(200) default NULL,
+  data longblob,
+  path varchar(255) default NULL,
+  downloads int(10) default NULL,
+  created int(14) default NULL,
+  comment varchar(250) default NULL,
+  PRIMARY KEY  (attId)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+
+#
+# Table structure for table tiki_zones
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_zones;
+CREATE TABLE tiki_zones (
+  zone varchar(40) NOT NULL default '',
+  PRIMARY KEY  (zone)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+#
+# Table structure for table tiki_download
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Apr 15 2004 at 07:42 PM
+#
+
+DROP TABLE IF EXISTS tiki_download;
+CREATE TABLE tiki_download (
+  id int(11) NOT NULL auto_increment,
+  object varchar(255) NOT NULL default '',
+  userId int(8) NOT NULL default '0',
+  type varchar(20) NOT NULL default '',
+  date int(14) NOT NULL default '0',
+  IP varchar(50) NOT NULL default '',
+  PRIMARY KEY  (id),
+  KEY object (object,userId,type),
+  KEY userId (userId),
+  KEY type (type),
+  KEY date (date)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table users_grouppermissions
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 11, 2003 at 07:22 AM
+#
+
+DROP TABLE IF EXISTS users_grouppermissions;
+CREATE TABLE users_grouppermissions (
+  groupName varchar(255) NOT NULL default '',
+  permName varchar(31) NOT NULL default '',
+  value char(1) default '',
+  PRIMARY KEY  (groupName(30),permName)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+insert into users_grouppermissions (groupName,permName) values('Anonymous','tiki_p_view');
+
+#
+# Table structure for table users_groups
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 03, 2003 at 08:57 PM
+#
+
+DROP TABLE IF EXISTS users_groups;
+CREATE TABLE users_groups (
+  groupName varchar(255) NOT NULL default '',
+  groupDesc varchar(255) default NULL,
+  groupHome varchar(255),
+  usersTrackerId int(11),
+  groupTrackerId int(11),
+  usersFieldId int(11),
+  groupFieldId int(11),
+  registrationChoice char(1) default NULL,
+  registrationUsersFieldIds text,
+  PRIMARY KEY  (groupName(30))
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table users_objectpermissions
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 07:20 AM
+#
+
+DROP TABLE IF EXISTS users_objectpermissions;
+CREATE TABLE users_objectpermissions (
+  groupName varchar(255) NOT NULL default '',
+  permName varchar(31) NOT NULL default '',
+  objectType varchar(20) NOT NULL default '',
+  objectId varchar(32) NOT NULL default '',
+  PRIMARY KEY  (objectId, objectType, groupName(30),permName)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+
+#
+# Table structure for table users_permissions
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 11, 2003 at 07:22 AM
+#
+
+DROP TABLE IF EXISTS users_permissions;
+CREATE TABLE users_permissions (
+  permName varchar(31) NOT NULL default '',
+  permDesc varchar(250) default NULL,
+  level varchar(80) default NULL,
+  type varchar(20) default NULL,
+  PRIMARY KEY  (permName)
+) TYPE=MyISAM;
+# --------------------------------------------------------
+# 
+
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_abort_instance', 'Can abort a process instance', 'editors', 'workflow');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_access_closed_site', 'Can access site when closed', 'admin', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_add_events', 'Can add events in the calendar', 'registered', 'calendar');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin', 'Administrator, can manage users groups and permissions, Hotwords and all the weblog features', 'admin', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_banners', 'Administrator, can admin banners', 'admin', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_banning', 'Can ban users or ips', 'admin', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_calendar', 'Can create/admin calendars', 'admin', 'calendar');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_categories', 'Can admin categories', 'editors', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_charts', 'Can admin charts', 'admin', 'charts');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_chat', 'Administrator, can create channels remove channels etc', 'editors', 'chat');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_cms', 'Can admin the cms', 'editors', 'cms');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_contribution', 'Can admin contributions', 'admin', 'contribution');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_directory', 'Can admin the directory', 'editors', 'directory');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_directory_cats', 'Can admin directory categories', 'editors', 'directory');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_directory_sites', 'Can admin directory sites', 'editors', 'directory');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_drawings', 'Can admin drawings', 'editors', 'drawings');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_dynamic', 'Can admin the dynamic content system', 'editors', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_faqs', 'Can admin faqs', 'editors', 'faqs');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_file_galleries', 'Can admin file galleries', 'editors', 'file galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_forum', 'Can admin forums', 'editors', 'forums');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_galleries', 'Can admin Image Galleries', 'editors', 'image galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_games', 'Can admin games', 'editors', 'games');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_integrator', 'Can admin integrator repositories and rules', 'admin', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_mailin', 'Can admin mail-in accounts', 'admin', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_newsletters', 'Can admin newsletters', 'admin', 'newsletters');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_objects','Can edit object permissions', 'admin', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_polls','Can admin polls', 'admin', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_quizzes', 'Can admin quizzes', 'editors', 'quizzes');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_received_articles', 'Can admin received articles', 'editors', 'comm');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_received_pages', 'Can admin received pages', 'editors', 'comm');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_rssmodules','Can admin rss modules', 'admin', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_sheet', 'Can admin sheet', 'admin', 'sheet');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_shoutbox', 'Can admin shoutbox (Edit/remove msgs)', 'editors', 'shoutbox');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_surveys', 'Can admin surveys', 'editors', 'surveys');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_trackers', 'Can admin trackers', 'editors', 'trackers');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_users', 'Can admin users', 'admin', 'user');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_wiki', 'Can admin the wiki', 'editors', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_admin_workflow', 'Can admin workflow processes', 'admin', 'workflow');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_approve_submission', 'Can approve submissions', 'editors', 'cms');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_attach_trackers', 'Can attach files to tracker items', 'registered', 'trackers');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_autoapprove_submission', 'Submited articles automatically approved', 'editors', 'cms');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_autosubmit_link', 'Submited links are valid', 'editors', 'directory');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_autoval_chart_suggestio', 'Autovalidate suggestions', 'editors', 'charts');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_subscribe_email', 'Can subscribe many e-mails at once (requires tiki_p_subscribe email)', 'editors', 'newsletters');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_files', 'Can upload zip files with files', 'editors', 'file galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_files_dir', 'Can use Directoy Batch Load', 'editors', 'file galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_image_dir', 'Can use Directory Batch Load', 'editors', 'image galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_batch_upload_images', 'Can upload zip files with images', 'editors', 'image galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_blog_admin', 'Can admin blogs', 'editors', 'blogs');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_blog_post', 'Can post to a blog', 'registered', 'blogs');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_broadcast', 'Can broadcast messages to groups', 'admin', 'messu');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_broadcast_all', 'Can broadcast messages to all user', 'admin', 'messu');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_cache_bookmarks', 'Can cache user bookmarks', 'admin', 'user');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_change_events', 'Can change events in the calendar', 'registered', 'calendar');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_chat', 'Can use the chat system', 'registered', 'chat');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_comment_tracker_items', 'Can insert comments for tracker items', 'basic', 'trackers');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_configure_modules', 'Can configure modules', 'registered', 'user');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_create_blogs', 'Can create a blog', 'editors', 'blogs');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_create_bookmarks', 'Can create user bookmarks', 'registered', 'user');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_create_css', 'Can create new css suffixed with -user', 'registered', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_create_file_galleries', 'Can create file galleries', 'editors', 'file galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_create_galleries', 'Can create image galleries', 'editors', 'image galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_create_tracker_items', 'Can create new items for trackers', 'registered', 'trackers');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_download_files', 'Can download files', 'basic', 'file galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit', 'Can edit pages', 'registered', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_article', 'Can edit articles', 'editors', 'cms');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_comments', 'Can edit all comments', 'editors', 'comments');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_content_templates', 'Can edit content templates', 'editors', 'content templates');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_cookies', 'Can admin cookies', 'editors', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_copyrights', 'Can edit copyright notices', 'editors', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_drawings', 'Can edit drawings', 'basic', 'drawings');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_dynvar', 'Can edit dynamic variables', 'editors', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_gallery_file', 'Can edit a gallery file', 'editors', 'file galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_html_pages', 'Can edit HTML pages', 'editors', 'html pages');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_languages', 'Can edit translations and create new languages', 'editors', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_sheet', 'Can create and edit sheets', 'editors', 'sheet');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_structures', 'Can create and edit structures', 'editors', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_submission', 'Can edit submissions', 'editors', 'cms');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_edit_templates', 'Can edit site templates', 'admin', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_eph_admin', 'Can admin ephemerides', 'editors', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_exception_instance', 'Can declare an instance as exception', 'registered', 'workflow');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forum_attach', 'Can attach to forum posts', 'registered', 'forums');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forum_autoapp', 'Auto approve forum posts', 'editors', 'forums');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forum_post', 'Can post in forums', 'registered', 'forums');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forum_post_topic', 'Can start threads in forums', 'registered', 'forums');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forum_read', 'Can read forums', 'basic', 'forums');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forum_vote', 'Can vote comments in forums', 'registered', 'forums');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_forums_report', 'Can report msgs to moderator', 'registered', 'forums');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_freetags_tag', 'Can tag objects', 'registered', 'freetags');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_list_users', 'Can list registered users', 'registered', 'community');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_live_support', 'Can use live support system', 'basic', 'support');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_live_support_admin', 'Admin live support system', 'admin', 'support');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_lock', 'Can lock pages', 'editors', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_map_create', 'Can create new mapfile', 'admin', 'maps');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_map_delete', 'Can delete mapfiles', 'admin', 'maps');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_map_edit', 'Can edit mapfiles', 'editors', 'maps');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_map_view', 'Can view mapfiles', 'basic', 'maps');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_map_view_mapfiles', 'Can view contents of mapfiles', 'registered', 'maps');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_messages', 'Can use the messaging system', 'registered', 'messu');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_minical', 'Can use the mini event calendar', 'registered', 'user');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_minor', 'Can save as minor edit', 'registered', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_modify_tracker_items', 'Can change tracker items', 'registered', 'trackers');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_newsreader', 'Can use the newsreader', 'registered', 'user');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_notepad', 'Can use the notepad', 'registered', 'user');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_play_games', 'Can play games', 'basic', 'games');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_post_comments', 'Can post new comments', 'registered', 'comments');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_post_shoutbox', 'Can post messages in shoutbox', 'basic', 'shoutbox');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_read_article', 'Can read articles', 'basic', 'cms');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_read_blog', 'Can read blogs', 'basic', 'blogs');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_read_comments', 'Can read comments', 'basic', 'comments');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_remove', 'Can remove', 'editors', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_remove_article', 'Can remove articles', 'editors', 'cms');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_remove_comments', 'Can delete comments', 'editors', 'comments');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_remove_submission', 'Can remove submissions', 'editors', 'cms');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_rename', 'Can rename pages', 'editors', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_rollback', 'Can rollback pages', 'editors', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_send_articles', 'Can send articles to other sites', 'editors', 'comm');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_send_instance', 'Can send instances after completion', 'registered', 'workflow');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_send_newsletters', 'Can send newsletters', 'editors', 'newsletters');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_send_pages', 'Can send pages to other sites', 'registered', 'comm');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_sendme_articles', 'Can send articles to this site', 'registered', 'comm');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_sendme_pages', 'Can send pages to this site', 'registered', 'comm');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_submit_article', 'Can submit articles', 'basic', 'cms');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_submit_link', 'Can submit sites to the directory', 'basic', 'directory');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_subscribe_email', 'Can subscribe any email to newsletters', 'editors', 'newsletters');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_subscribe_newsletters', 'Can subscribe to newsletters', 'basic', 'newsletters');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_suggest_chart_item', 'Can suggest items', 'basic', 'charts');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_suggest_faq', 'Can suggest faq questions', 'basic', 'faqs');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_take_quiz', 'Can take quizzes', 'basic', 'quizzes');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_take_survey', 'Can take surveys', 'basic', 'surveys');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tasks', 'Can use tasks', 'registered', 'user');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tasks_admin', 'Can admin public tasks', 'admin', 'user');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tasks_receive', 'Can  receive tasks from other users', 'registered', 'user');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tasks_send', 'Can send tasks to other users', 'registered', 'user');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_topic_read', 'Can read a topic (Applies only to individual topic perms)', 'basic', 'topics');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tracker_view_ratings', 'Can view rating result for tracker items', 'basic', 'trackers');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_tracker_vote_ratings', 'Can vote a rating for tracker items', 'registered', 'trackers');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_upload_files', 'Can upload files', 'registered', 'file galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_upload_images', 'Can upload images', 'registered', 'image galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_upload_picture', 'Can upload pictures to wiki pages', 'registered', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_HTML', 'Can use HTML in pages', 'editors', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_content_templates', 'Can use content templates', 'registered', 'content templates');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_webmail', 'Can use webmail', 'registered', 'webmail');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_use_workflow', 'Can execute workflow activities', 'registered', 'workflow');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_userfiles', 'Can upload personal files', 'registered', 'user');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_usermenu', 'Can create items in personal menu', 'registered', 'user');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_validate_links', 'Can validate submited links', 'editors', 'directory');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view', 'Can view page/pages', 'basic', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_calendar', 'Can browse the calendar', 'basic', 'calendar');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_categories', 'Can browse categories', 'basic', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_chart', 'Can view charts', 'basic', 'charts');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_directory', 'Can use the directory', 'basic', 'directory');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_eph', 'Can view ephemerides', 'registered', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_events', 'Can view events details', 'registered', 'calendar');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_faqs', 'Can view faqs', 'basic', 'faqs');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_file_gallery', 'Can view file galleries', 'basic', 'file galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_freetags', 'Can browse freetags', 'basic', 'freetags');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_html_pages', 'Can view HTML pages', 'basic', 'html pages');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_image_gallery', 'Can view image galleries', 'basic', 'image galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_integrator', 'Can view integrated repositories', 'basic', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_quiz_stats', 'Can view quiz stats', 'basic', 'quizzes');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_referer_stats', 'Can view referer stats', 'editors', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_sheet', 'Can view sheet', 'basic', 'sheet');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_sheet_history', 'Can view sheet history', 'admin', 'sheet');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_shoutbox', 'Can view shoutbox', 'basic', 'shoutbox');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_stats', 'Can view site stats', 'basic', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_survey_stats', 'Can view survey stats', 'basic', 'surveys');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_templates', 'Can view site templates', 'admin', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_tiki_calendar', 'Can view TikiWiki tools calendar', 'basic', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_trackers', 'Can view trackers', 'basic', 'trackers');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_trackers_closed', 'Can view trackers closed items', 'registered', 'trackers');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_trackers_pending', 'Can view trackers pending items', 'editors', 'trackers');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_user_results', 'Can view user quiz results', 'editors', 'quizzes');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_vote_chart', 'Can vote', 'basic', 'charts');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_vote_comments', 'Can vote comments', 'registered', 'comments');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_vote_poll', 'Can vote polls', 'basic', 'tiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_watch_trackers', 'Can watch tracker', 'registered', 'trackers');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_admin_attachments', 'Can admin attachments to wiki pages', 'editors', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_admin_ratings', 'Can add and change ratings on wiki pages', 'admin', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_attach_files', 'Can attach files to wiki pages', 'registered', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_view_attachments', 'Can view wiki attachments and download', 'registered', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_view_comments', 'Can view wiki comments', 'basic', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_view_history', 'Can view wiki history', 'basic', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_view_ratings', 'Can view rating of wiki pages', 'basic', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_view_source', 'Can view source of wiki pages', 'basic', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_wiki_vote_ratings', 'Can participate to rating of wiki pages', 'registered', 'wiki');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_assign_perm_file_gallery', 'Can assign perms to file gallery', 'admin', 'file galleries');
+INSERT INTO users_permissions (permName, permDesc, level, type) VALUES ('tiki_p_view_actionlog', 'Can view action log', 'registered', 'tiki');
+# --------------------------------------------------------
+
+#
+# Table structure for table users_usergroups
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 12, 2003 at 09:31 PM
+#
+
+DROP TABLE IF EXISTS users_usergroups;
+CREATE TABLE users_usergroups (
+  userId int(8) NOT NULL default '0',
+  groupName varchar(255) NOT NULL default '',
+  PRIMARY KEY  (userId,groupName(30))
+) TYPE=MyISAM;
+# --------------------------------------------------------
+INSERT INTO users_groups (groupName,groupDesc) VALUES ('Anonymous','Public users not logged');
+INSERT INTO users_groups (groupName,groupDesc) VALUES ('Registered','Users logged into the system');
+# --------------------------------------------------------
+
+#
+# Table structure for table users_users
+#
+# Creation: Jul 03, 2003 at 07:42 PM
+# Last update: Jul 13, 2003 at 01:07 AM
+#
+
+DROP TABLE IF EXISTS users_users;
+CREATE TABLE users_users (
+  userId int(8) NOT NULL auto_increment,
+  email varchar(200) default NULL,
+  login varchar(200) NOT NULL default '',
+  password varchar(30) default '',
+  provpass varchar(30) default NULL,
+  default_group varchar(255),
+  lastLogin int(14) default NULL,
+  currentLogin int(14) default NULL,
+  registrationDate int(14) default NULL,
+  challenge varchar(32) default NULL,
+  pass_due int(14) default NULL,
+  hash varchar(32) default NULL,
+  created int(14) default NULL,
+  avatarName varchar(80) default NULL,
+  avatarSize int(14) default NULL,
+  avatarFileType varchar(250) default NULL,
+  avatarData longblob,
+  avatarLibName varchar(200) default NULL,
+  avatarType char(1) default NULL,
+  score int(11) NOT NULL default 0,
+  PRIMARY KEY  (userId),
+  KEY login (login),
+  KEY score (score),
+  KEY registrationDate (registrationDate)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+# --------------------------------------------------------
+### Administrator account
+INSERT INTO users_users(email,login,password,hash) VALUES ('','admin','admin',md5('adminadmin'));
+UPDATE users_users set currentLogin=lastLogin, registrationDate=lastLogin;
+INSERT INTO tiki_user_preferences (user,prefName,value) VALUES ('admin','realName','System Administrator');
+# --------------------------------------------------------
+# 
+
+#
+# Table structure for table 'tiki_integrator_reps'
+#
+DROP TABLE IF EXISTS tiki_integrator_reps;
+CREATE TABLE tiki_integrator_reps (
+  repID int(11) NOT NULL auto_increment,
+  name varchar(255) NOT NULL default '',
+  path varchar(255) NOT NULL default '',
+  start_page varchar(255) NOT NULL default '',
+  css_file varchar(255) NOT NULL default '',
+  visibility char(1) NOT NULL default 'y',
+  cacheable char(1) NOT NULL default 'y',
+  expiration int(11) NOT NULL default '0',
+  description text NOT NULL,
+  PRIMARY KEY  (repID)
+) TYPE=MyISAM;
+
+#
+# Dumping data for table 'tiki_integrator_reps'
+#
+INSERT INTO tiki_integrator_reps VALUES ('1','Doxygened (1.3.4) Documentation','','index.html','doxygen.css','n','y','0','Use this repository as rule source for all your repositories based on doxygened docs. To setup yours just add new repository and copy rules from this repository :)');
+
+#
+# Table structure for table 'tiki_integrator_rules'
+#
+DROP TABLE IF EXISTS tiki_integrator_rules;
+CREATE TABLE tiki_integrator_rules (
+  ruleID int(11) NOT NULL auto_increment,
+  repID int(11) NOT NULL default '0',
+  ord int(2) unsigned NOT NULL default '0',
+  srch blob NOT NULL,
+  repl blob NOT NULL,
+  type char(1) NOT NULL default 'n',
+  casesense char(1) NOT NULL default 'y',
+  rxmod varchar(20) NOT NULL default '',
+  enabled char(1) NOT NULL default 'n',
+  description text NOT NULL,
+  PRIMARY KEY  (ruleID),
+  KEY repID (repID)
+) TYPE=MyISAM;
+
+#
+# Dumping data for table 'tiki_integrator_rules'
+#
+INSERT INTO tiki_integrator_rules VALUES ('1','1','1','.*<body[^>]*?>(.*?)</body.*','\1','y','n','i','y','Extract code between <BODY> tags');
+INSERT INTO tiki_integrator_rules VALUES ('2','1','2','img src=(\"|\')(?!http://)','img src=\1{path}/','y','n','i','y','Fix images path');
+INSERT INTO tiki_integrator_rules VALUES ('3','1','3','href=(\"|\')(?!(#|(http|ftp)://))','href=\1tiki-integrator.php?repID={repID}&file=','y','n','i','y','Relace internal links to integrator. Dont touch an external links.');
+
+#
+# Table structures for table 'tiki_quicktags'
+# 
+DROP TABLE IF EXISTS tiki_quicktags;
+CREATE TABLE tiki_quicktags (
+  tagId int(4) unsigned NOT NULL auto_increment,
+  taglabel varchar(255) default NULL,
+  taginsert text,
+  tagicon varchar(255) default NULL,
+  tagcategory varchar(255) default NULL,
+  PRIMARY KEY  (tagId),
+  KEY tagcategory (tagcategory),
+  KEY taglabel (taglabel)
+) TYPE=MyISAM AUTO_INCREMENT=1 ;
+
+# wiki
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table','||r1c1|r1c2||r2c1|r2c2||','pics/icons/table.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/link.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','images/ed_copy.gif','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading1','!text','pics/icons/text_heading_1.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading2','!!text','pics/icons/text_heading_2.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','images/fullscreen_maximize.gif','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('rss feed','{rss id= }','pics/icons/feed.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/book_open.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('tagline','{cookie}','images/footprint.gif','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','images/ed_hr.gif','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','wiki');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','wiki');
+
+# maps
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New wms Metadata','METADATA\r\n		\"wms_name\" \"myname\"\r\n 	"wms_srs" "EPSG:4326"\r\n 	"wms_server_version" " "\r\n 	"wms_layers" "mylayers"\r\n 	"wms_request" "myrequest"\r\n 	"wms_format" " "\r\n 	"wms_time" " "\r\n END', 'img/icons/admin_metatags.png','maps');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Class', 'CLASS\r\n EXPRESSION ()\r\n SYMBOL 0\r\n OUTLINECOLOR\r\n COLOR\r\n NAME "myclass" \r\nEND #end of class', 'img/icons/mini_triangle.gif','maps');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Projection','PROJECTION\r\n "init=epsg:4326"\r\nEND','images/ico_mode.gif','maps');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Query','#\r\n# Start of query definitions\r\n#\r\n QUERYMAP\r\n STATUS ON\r\n STYLE HILITE\r\nEND','img/icons/questions.gif','maps');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Scalebar','#\r\n# Start of scalebar\r\n#\r\nSCALEBAR\r\n IMAGECOLOR 255 255 255\r\n STYLE 1\r\n SIZE 400 2\r\n COLOR 0 0 0\r\n UNITS KILOMETERS\r\n INTERVALS 5\r\n STATUS ON\r\nEND','img/icons/desc_length.gif','maps');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Layer','LAYER\r\n NAME\r\n TYPE\r\n STATUS ON\r\n DATA "mydata"\r\nEND #end of layer', 'images/ed_copy.gif', 'maps');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Label','LABEL\r\n COLOR\r\n ANGLE\r\n FONT arial\r\n TYPE TRUETYPE\r\n POSITION\r\n PARTIALS TRUE\r\n SIZE 6\r\n BUFFER 0\r\n OUTLINECOLOR \r\nEND #end of label', 'img/icons/fontfamily.gif', 'maps');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Reference','#\r\n#start of reference\r\n#\r\n REFERENCE\r\n SIZE 120 60\r\n STATUS ON\r\n EXTENT -180 -90 182 88\r\n OUTLINECOLOR 255 0 0\r\n IMAGE "myimagedata"\r\n COLOR -1 -1 -1\r\nEND','images/ed_image.gif','maps');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Legend','#\r\n#start of Legend\r\n#\r\n LEGEND\r\n KEYSIZE 18 12\r\n POSTLABELCACHE TRUE\r\n STATUS ON\r\nEND','images/ed_about.gif','maps');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Web','#\r\n# Start of web interface definition\r\n#\r\nWEB\r\n TEMPLATE "myfile/url"\r\n MINSCALE 1000\r\n MAXSCALE 40000\r\n IMAGEPATH "myimagepath"\r\n IMAGEURL "mypath"\r\nEND','img/icons/ico_link.gif','maps');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Outputformat','OUTPUTFORMAT\r\n NAME\r\n DRIVER " "\r\n MIMETYPE "myimagetype"\r\n IMAGEMODE RGB\r\n EXTENSION "png"\r\nEND','img/icons/opera.gif','maps');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('New Mapfile','#\r\n# Start of mapfile\r\n#\r\nNAME MYMAPFLE\r\n STATUS ON\r\nSIZE \r\nEXTENT\r\nUNITS \r\nSHAPEPATH " "\r\nIMAGETYPE " "\r\nFONTSET " "\r\nIMAGECOLOR -1 -1 -1\r\n\r\n#remove this text and add objects here\r\n\r\nEND # end of mapfile','img/icons/global.gif','maps');
+
+# newsletters
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','newsletters');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','newsletters');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','newsletters');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/link.png','newsletters');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading1','!text','pics/icons/text_heading_1.png','newsletters');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading2','!!text','pics/icons/text_heading_2.png','newsletters');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','newsletters');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr', '---', 'images/ed_hr.gif', 'newsletters');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','newsletters');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','newsletters');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','newsletters');
+
+# trackers
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table','||r1c1|r1c2||r2c1|r2c2||','pics/icons/table.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/link.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','images/ed_copy.gif','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading1','!text','pics/icons/text_heading_1.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading2','!!text','pics/icons/text_heading_2.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','images/fullscreen_maximize.gif','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('rss feed','{rss id= }','pics/icons/feed.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/book_open.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('tagline','{cookie}','images/footprint.gif','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','images/ed_hr.gif','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','trackers');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','trackers');
+
+# blogs
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table','||r1c1|r1c2||r2c1|r2c2||','pics/icons/table.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/link.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','images/ed_copy.gif','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading1','!text','pics/icons/text_heading_1.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading2','!!text','pics/icons/text_heading_2.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','images/fullscreen_maximize.gif','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('rss feed','{rss id= }','pics/icons/feed.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/book_open.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('tagline','{cookie}','images/footprint.gif','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','images/ed_hr.gif','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','blogs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','blogs');
+
+# calendar
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table','||r1c1|r1c2||r2c1|r2c2||','pics/icons/table.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/link.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','images/ed_copy.gif','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading1','!text','pics/icons/text_heading_1.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading2','!!text','pics/icons/text_heading_2.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','images/fullscreen_maximize.gif','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('rss feed','{rss id= }','pics/icons/feed.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/book_open.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('tagline','{cookie}','images/footprint.gif','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','images/ed_hr.gif','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','calendar');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','calendar');
+
+# articles
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table','||r1c1|r1c2||r2c1|r2c2||','pics/icons/table.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/link.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','images/ed_copy.gif','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading1','!text','pics/icons/text_heading_1.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading2','!!text','pics/icons/text_heading_2.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','images/fullscreen_maximize.gif','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('rss feed','{rss id= }','pics/icons/feed.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/book_open.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('tagline','{cookie}','images/footprint.gif','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','images/ed_hr.gif','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','articles');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','articles');
+
+# faqs
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table','||r1c1|r1c2||r2c1|r2c2||','pics/icons/table.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/link.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','images/ed_copy.gif','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading1','!text','pics/icons/text_heading_1.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading2','!!text','pics/icons/text_heading_2.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','images/fullscreen_maximize.gif','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('rss feed','{rss id= }','pics/icons/feed.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/book_open.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('tagline','{cookie}','images/footprint.gif','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','images/ed_hr.gif','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','faqs');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','faqs');
+
+# forums
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('bold','__text__','pics/icons/text_bold.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('italic','\'\'text\'\'','pics/icons/text_italic.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('underline','===text===','pics/icons/text_underline.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table','||r1c1|r1c2||r2c1|r2c2||','pics/icons/table.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('table new','||r1c1|r1c2\nr2c1|r2c2||','pics/icons/table.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('external link','[http://example.com|text]','pics/icons/link.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('wiki link','((text))','images/ed_copy.gif','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading1','!text','pics/icons/text_heading_1.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading2','!!text','pics/icons/text_heading_2.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('heading3','!!!text','pics/icons/text_heading_3.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('title bar','-=text=-','images/fullscreen_maximize.gif','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('box','^text^','pics/icons/box.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('rss feed','{rss id= }','pics/icons/feed.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic content','{content id= }','pics/icons/book_open.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('tagline','{cookie}','images/footprint.gif','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('hr','---','images/ed_hr.gif','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('center text','::text::','pics/icons/text_align_center.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('colored text','~~#FF0000:text~~','pics/icons/palette.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('dynamic variable','%text%','pics/icons/book_open.png','forums');
+INSERT INTO tiki_quicktags (taglabel, taginsert, tagicon, tagcategory) VALUES ('image','{img src= width= height= align= desc= link= }','pics/icons/picture.png','forums');
+
+#translated objects table
+DROP TABLE IF EXISTS tiki_translated_objects;
+CREATE TABLE tiki_translated_objects (
+  traId int(14) NOT NULL auto_increment,
+  type varchar(50) NOT NULL,
+  objId varchar(255) NOT NULL,
+  lang varchar(16) default NULL,
+  PRIMARY KEY (type, objId),
+  KEY traId ( traId )
+) TYPE=MyISAM AUTO_INCREMENT=1;
+
+
+#
+# Community tables begin
+#
+
+DROP TABLE IF EXISTS tiki_friends;
+CREATE TABLE tiki_friends (
+  user char(200) NOT NULL default '',
+  friend char(200) NOT NULL default '',
+  PRIMARY KEY  (user(120),friend(120))
+) TYPE=MyISAM;
+
+DROP TABLE IF EXISTS tiki_friendship_requests;
+CREATE TABLE tiki_friendship_requests (
+  userFrom char(200) NOT NULL default '',
+  userTo char(200) NOT NULL default '',
+  tstamp timestamp(14) NOT NULL,
+  PRIMARY KEY  (userFrom(120),userTo(120))
+) TYPE=MyISAM;
+
+DROP TABLE IF EXISTS tiki_score;
+CREATE TABLE tiki_score (
+  event varchar(40) NOT NULL default '',
+  score int(11) NOT NULL default '0',
+  expiration int(11) NOT NULL default '0',
+  PRIMARY KEY  (event)
+) TYPE=MyISAM;
+
+
+INSERT INTO tiki_score (event, score, expiration) VALUES ('login',1,0);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('login_remain',2,60);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('profile_fill',10,0);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('profile_see',2,0);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('profile_is_seen',1,0);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('friend_new',10,0);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('message_receive',1,0);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('message_send',2,0);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('article_read',2,0);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('article_comment',5,0);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('article_new',20,0);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('article_is_read',1,0);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('article_is_commented',2,0);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('fgallery_new',10,0);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('fgallery_new_file',10,0);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('fgallery_download',5,0);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('fgallery_is_downloaded',5,0);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('igallery_new',10,0);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('igallery_new_img',6,0);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('igallery_see_img',3,0);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('igallery_img_seen',1,0);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('blog_new',20,0);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('blog_post',5,0);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('blog_read',2,0);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('blog_comment',2,0);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('blog_is_read',3,0);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('blog_is_commented',3,0);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('wiki_new',10,0);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('wiki_edit',5,0);
+INSERT INTO tiki_score (event, score, expiration) VALUES ('wiki_attach_file',3,0);
+
+DROP TABLE IF EXISTS tiki_users_score;
+CREATE TABLE tiki_users_score (
+  user char(200) NOT NULL default '',
+  event_id char(40) NOT NULL default '',
+  expire int(14) NOT NULL default '0',
+  tstamp timestamp(14) NOT NULL,
+  PRIMARY KEY  (user,event_id),
+  KEY user (user,event_id,expire)
+) TYPE=MyISAM;
+
+
+#
+# Community tables end
+#
+
+#
+# Table structure for table tiki_file_handlers
+#
+# Creation: Nov 02, 2004 at 05:59 PM
+# Last update: Nov 02, 2004 at 05:59 PM
+#
+
+DROP TABLE IF EXISTS tiki_file_handlers;
+CREATE TABLE tiki_file_handlers (
+	mime_type varchar(64) default NULL,
+	cmd varchar(238) default NULL
+) TYPE=MyISAM;
+
+#
+# Table structure for table tiki_stats
+#
+# Creation: Aug 04, 2005 at 05:59 PM
+# Last update: Aug 04, 2005 at 05:59 PM
+#
+
+DROP TABLE IF EXISTS tiki_stats;
+CREATE TABLE tiki_stats (
+  object varchar(255) NOT NULL default '',
+  type varchar(20) NOT NULL default '',
+  day int(14) NOT NULL default '0',
+  hits int(14) NOT NULL default '0',
+  PRIMARY KEY  (object(200),type,day)
+) TYPE=MyISAM;
+
+#
+# Table structure for table tiki_events
+#
+# Creation: Aug 26, 2005 at 06:59 AM - mdavey
+# Last update: Sep 31, 2005 at 12:29 PM - mdavey
+#
+
+DROP TABLE IF EXISTS tiki_events;
+CREATE TABLE tiki_events (
+  callback_type int(1) NOT NULL default '3',
+  order int(2) NOT NULL default '50',
+  event varchar(200) NOT NULL default '',
+  file varchar(200) NOT NULL default '',  
+  object varchar(200) NOT NULL default '',
+  method varchar(200) NOT NULL default '',
+  PRIMARY KEY  (callback_type,order)
+) TYPE=MyISAM;
+
+INSERT IGNORE INTO tiki_events(callback_type,order,event,file,object,method) VALUES ('1', '20', 'user_registers', 'lib/registration/registrationlib.php', 'registrationlib', 'callback_tikiwiki_setup_custom_fields');
+INSERT IGNORE INTO tiki_events(event,file,object,method) VALUES ('user_registers', 'lib/registration/registrationlib.php', 'registrationlib', 'callback_tikiwiki_save_registration');
+INSERT IGNORE INTO tiki_events(callback_type,order,event,file,object,method) VALUES ('5', '20', 'user_registers', 'lib/registration/registrationlib.php', 'registrationlib', 'callback_logslib_user_registers');
+INSERT IGNORE INTO tiki_events(callback_type,order,event,file,object,method) VALUES ('5', '25', 'user_registers', 'lib/registration/registrationlib.php', 'registrationlib', 'callback_tikiwiki_send_email');
+INSERT IGNORE INTO tiki_events(callback_type,order,event,file,object,method) VALUES ('5', '30', 'user_registers', 'lib/registration/registrationlib.php', 'registrationlib', 'callback_tikimail_user_registers');
+
+#
+# Table structure for table tiki_registration_fields
+#
+# Creation: Aug 31, 2005 at 12:57 PM - mdavey
+# Last update: Aug 31, 2005 at 12:57 PM - mdavey
+# 
+
+DROP TABLE IF EXISTS tiki_registration_fields;
+CREATE TABLE tiki_registration_fields (
+  id int(11) NOT NULL auto_increment,
+  field varchar(255) NOT NULL default '',
+  name varchar(255) default NULL,
+  type varchar(255) NOT NULL default 'text',
+  show tinyint(1) NOT NULL default '0',
+  size varchar(10) default '10',
+  PRIMARY KEY  (id)
+) TYPE=MyISAM;
+
+DROP TABLE IF EXISTS tiki_actionlog_conf;
+CREATE TABLE tiki_actionlog_conf (
+ action varchar(32) NOT NULL default '',
+ objectTypevarchar(32) NOT NULL default '',
+ status char(1) default '',
+PRIMARY KEY (action, objectType)
+) TYPE=MyISAM;
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Created', 'wiki page', 'y');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Updated', 'wiki page', 'y');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Removed', 'wiki page', 'y');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Viewed', 'wiki page', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Viewed', 'forum', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Posted', 'forum', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Replied', 'forum', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Updated', 'forum', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Viewed', 'file gallery', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Viewed', 'image gallery', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Uploaded', 'file gallery', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Uploaded', 'image gallery', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Downloaded', 'file gallery', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('*', 'category', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('*', 'login', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Posted', 'message', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Replied', 'message', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Viewed', 'message', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Removed version', 'wiki page', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Removed last version', 'wiki page', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Rollback', 'wiki page', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Removed', 'forum', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Posted', 'comment', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Replied', 'comment', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Updated', 'comment', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Removed', 'comment', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Renamed', 'wiki page', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Created', 'sheet', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Updated', 'sheet', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Removed', 'sheet', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Viewed', 'sheet', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Viewed', 'blog', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Posted', 'blog', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Updated', 'blog', 'n');
+INSERT IGNORE INTO tiki_actionlog_conf(action, objectType, status) VALUES ('Removed', 'blog', 'n');
+# --------------------------------------------------------
+
+
+# Table structure for folksonomy tables
+#
+# Creation: Out 16, 2005 - batawata
+# Last update: Out 16, 2005 - batawata
+# 
+
+DROP TABLE IF EXISTS tiki_freetags;
+CREATE TABLE tiki_freetags (
+  tagId int(10) unsigned NOT NULL auto_increment,
+  tag varchar(30) NOT NULL default '',
+  raw_tag varchar(50) NOT NULL default '',
+  PRIMARY KEY  (tagId)
+) TYPE=MyISAM;
+
+DROP TABLE IF EXISTS tiki_freetagged_objects;
+CREATE TABLE tiki_freetagged_objects (
+  tagId int(12) NOT NULL auto_increment,
+  objectId int(11) NOT NULL default 0,
+  user varchar(200) NOT NULL default '',
+  created int(14) NOT NULL default '0',
+  PRIMARY KEY  (tagId,user,objectId),
+  KEY (tagId),
+  KEY (user),
+  KEY (objectId)
+) TYPE=MyISAM;
+
+
+DROP TABLE IF EXISTS tiki_contributions;
+CREATE TABLE tiki_contributions (
+  contributionId int(12) NOT NULL auto_increment,
+  name varchar(100) default NULL,
+  description varchar(250) default NULL,
+  PRIMARY KEY  (contributionId)
+) TYPE=MyISAM;
+
+DROP TABLE IF EXISTS tiki_contributions_assigned;
+CREATE TABLE tiki_contributions_assigned (
+  contributionId int(12) NOT NULL,
+  objectId int(12) NOT NULL,
+  PRIMARY KEY  (objectId, contributionId)
+) TYPE=MyISAM;
+

------------------------------------------------------------------------
